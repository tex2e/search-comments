"Simple op" handlers.
(Can't trust DBL_MAX)
(It can't right now.)
/ FIXME: Enumify this
11xxxxxx begins UTF-8
A function reference.
A simple index range.
ARRAY_INFO(1, arg, 0)
AST printing options.
Absorb ConvIntToBool.
Add declared methods.
Add forward pointers.
Add operator methods.
Add sub-types of NTD.
Add this conformance.
AdjustColorspace:  6.
AdjustColorspaceBack:
All set, let's do it.
Allocate a temporary.
Allocate the buffers.
Allocations are safe.
AllowMergeWithDefBody
Allowed to pass null.
Already saw an entry.
Always add the stdlib
Always zero histogram
An RC-identity cache.
And the Apply itself.
And the instructions.
Annot_array_get_count
Annot_array_get_int64
Annot_array_get_value
Annot_int64_get_value
Array for subpatterns
AsyncMysqlClientStats
Attempt batch commit.
Await the next value.
BEL BS HT LF    FF CR
BLA doesn't work here
Base is not a string.
Basic ripemd function
Basic: display-string
Begin rotate function
Both formats are cool
Branch based on that.
Break out of for loop
Bridge a result type.
Bridge the arguments.
Build the result phi.
COMPRESSION constants
Calculate the result.
Call the initializer.
Callbacks and helpers
Can't infer anything.
Cannot drop 'throws'.
Canonicalise the path
Casting will succeed.
Check for pseudomain.
Check if name changed
Check parent context.
Check the parameters.
Check threshold value
Check vtable methods.
Classify the operand.
Clean up and reassign
Clear the body of BB.
Clear the flow filter
Clear the pc filters.
Clone the components.
Close all connections
Coerce to an r-value.
Collect disjunctions.
Collect outside uses.
Common extension init
Compute the selector.
Connection management
Construct SILDeclRef.
ContinueAfterFailures
Convention attribute.
Convert the argument.
Copy the native data.
Copy the parent type.
Copy tvRef to tvRef2.
Create the body type.
Create the error node
Create the frame node
Create the new entry.
Create the parameter.
Custom type checking.
Data must be provided
Dec ref the old value
Default to full alpha
Destroy the captures.
Determine the callee.
Did not find a number
Die a horrible death.
Dig out the argument.
Dig out the protocol.
Do a quick self-test.
Do a two-step look up
Do the binary search.
Do we have a payload.
DominatingSuccBB: ...
Don't add them again.
Don't need to recurse
Don't use handle zero
Double to fixed point
Drop all connections.
Dump contents of Node
Dynamic is inherited.
ELF-based platforms).
Emit into the buffer.
Emit the direct path.
Emit the error block.
Emit the switch_value
Emit them if present.
Emit warning message.
Empty selector piece.
End top of the stack.
Evaluate a ParenExpr.
Execute the fill ops.
Existential Metatypes
ExpectMultipleResults
FIXME VarDecl LetDecl
FIXME: Bad dependency
FIXME: Horrible hack.
FIXME: This is awful.
FIXME: This is gross.
FIXME: This is silly.
Fallback to TypeRepr.
Find max message size
Find our first letter
Find the closing ')'.
Find the counterpart.
Find the entry point.
Find the first colon.
Find the matching ID.
Find the placeholder.
Find the single ivar.
Find the start value.
Finish the type name.
First handle options.
First sort the types.
Fix all predecessors.
Fixed point to double
For each instruction:
For each user of V...
For visibility checks
Form the Fix-It text.
Form the conformance.
Forward declarations.
Forwards declarations
Free allocated memory
Funcs and PreClasses.
Function return value
Function-to-function.
GIF Specific routines
GMPData class methods
Gather the arguments.
Generate diagnostics.
Get algorithmic types
Get direct subclasses
Get nautical twilight
Get number of septets
Get the callee value.
Get the input stream.
Get the nominal type.
Get the return value.
Get the server status
Grab the address info
Grab the next result.
Grab the unit offsets
Handle "x.self" expr.
Handle bridged types.
Handle it better way.
Handle methods first.
Handle nominal types.
Handle the None case.
Handle the Some case.
Handle the top frame.
Handle unknown preds.
Handled by printName.
Hoist the loop nests.
INTERPOLATE constants
Identity optimization
If last encoded token
If not, return false.
If so, then simplify.
Ignore both of these.
Ignore empty structs.
Ignore entire object.
Ignore specific base.
Ignore the duplicate.
Ignore visited nodes.
Include function args
Initialize the buffer
Input string argument
Insert them in order.
Invalid file location
Invoke the intrinsic.
It *may* have failed.
It is at offset 0x08.
It is restored below.
Iterate over children
Iterate up the stack.
Iterator instructions
JavaScript/CSS/etc...
Just push by default.
Just re-typecheck it.
Keep the other store.
Keep witness markers.
Key related variables
LAYERMETHOD constants
Last item was encoded
Last walked character
Lay out this element.
Leave the name alone.
Left operand is null.
Let's check for this.
List of predecessors.
Load from the lvalue.
Load in bitcode file.
Load it to a register
Load the WaitHandle*.
Load the error value.
Load the payload tag.
Load the value at +0.
Load the value of VD.
Loadable with payload
Local symbolic flavor
Look through lvalues.
MONTAGEMODE constants
Mainly for debugging.
Make the actual call.
Manage the parameter.
Map the error result.
Map the return value.
Mongo class constants
NULL-terminate values
Native func prologue.
Next: LdCns hit in TC
No `ini` binding yet.
No builtin to disable
No closure signature.
No conversion needed.
No size was provided.
Not a known platform.
Not a shared library.
Not supported at all.
Nothing else for now.
Now get the time zone
Now to build the path
ORIENTATION constants
ObjectData* or Class*
Ok, we have a VTable.
Olympus specific tags
Omit invalid sequence
On to the metaphoning
Open destination file
Operator instructions
OptimizeProtocolNames
Option parser helpers
Optional to optional.
Optional-to-optional.
Options through array
Ownership attributes.
PCRE specific options
Pack payload, if any.
Pad state to finalize
Parse 'catch' clauses
Parse a tuple of args
Parse default values.
Parse the class name.
Parse the closing ')'
Parse the entry list.
Parse the local-name.
Parse the next value.
Parse the parameters.
Paths and Directories
Perform scalar inits.
Performance inlining.
Pop the return value.
Print the class type.
Process a COM marker.
Process instructions.
Property information.
Protocol requirement.
Record this raw type.
Refine the salt first
Regions to not inline
Register the new line
Register this pass...
Remove in the future.
Remove platform name.
ReplaceInstUsesAction
Report a fatal error.
Reset jemalloc stats.
Reseting/initializing
Resolve the name ids.
Respond on next break
Respond on step break
Result of replacement
Return merged result.
Return the archetype.
Return the singleton.
Return to the caller.
Run release hoisting.
Run the actual search
Section Header Record
Self is passed inout.
Set locals to Uninit.
Set the conformances.
Set the input stream.
Set up criteria array
Set up line thickness
Set up the IRBuilder.
Should not be loaded.
Shutdown the debugger
Simplify terminators.
Simplify the locator.
Skip 'super.init' bit
Skip getters/setters.
Skip over the prefix.
Skip up to the module
So we'll do the same.
Some stack locations.
Sort modules by name.
Sort specified array.
Stmt Attr Cursor type
Stop on deallocation.
Store file date/time.
Store in the session.
Store into the value.
Store state in digest
Store the 'in' value.
Store to a temporary.
String interpolation.
Strip off the prefix.
TNull could be uninit
Tediously free stuff.
Tell SQLite to retry.
Terminate the string.
The argument is dead.
The initial code size
The lookahead symbol.
The module generator.
The types must match.
The value goes first.
Then our magic string
There is no callback.
They don't add value.
This is often faster.
Thread-local globals.
Thus an intersection.
Too many translations
Top level entry point
Top-level entrypoint.
Track this new store.
Transform input type.
Trivial and loadable.
Try Repo.Central.Path
Try to fold the user.
UDateTimePatternField
Unknown encode/decode
Unused closure class.
Unwrap an inout type.
Update number of bits
Use the type witness.
Used by include_impl.
User defined/internal
Uses the rules above.
Using static instance
Validate the context.
Verify metatype uses.
View takes ownership.
Wait for all threads.
We are not in a loop.
We have a difference.
We have seen: for ...
We'll use this later.
Write each child call
Write out the epilog.
XDebug Implementation
XHP-specific entities
adding negative start
already accounted for
always a slow lookup.
always direct for now
and the last inliner.
arc or fixup metadata
arithmetic intrinsics
array stream_stat ( )
autoseek for resuming
back to blocking mode
break on error or EOF
can translation occur
cast for 8-bit char's
channel extrema/range
check extended opcode
class NumberFormatter
class ReflectionClass
clip if out of bounds
comment, do not parse
compare element names
consumes s2 reference
continue foreach loop
convert usage to MB..
day of the week (0-6)
default witness count
does not modify flags
end namespace options
end namespace version
end unnamed namespace
expecting a delimiter
expression separators
fake a MongoDB object
file current position
file error after info
fill buffer if needed
finalize endpoint url
find antialised color
first look for argnum
first look in _SERVER
floating point string
floor it just in case
for all SuccessPreds.
for each modification
force this to be used
force use of sf_used.
force_error_reporting
gap in sequence found
generate a huge chunk
generic argument list
get a connection pool
handle for the server
helpers for PDO class
how many times faster
iconv supports errno.
id maps to AnyObject.
impl convention, type
init to max poss dist
invalid signal number
is_a() finishes here.
json_decode() options
json_encode() options
kVPackedKind warnings
length excluding ipv4
link in the mh driver
make sure file exists
meot (hundreads) case
minimum witness count
must have catch block
need a brand new pdbh
new line safety check
no digits, fcvt style
no infinite redirects
no more data to fetch
no timeout by default
non-numeric key found
offset range +/- 32KB
old non-POSIX version
open a temporary file
otherwise, there must
parse the header line
parser error handling
part before the match
platform:  identifier
process run of digits
real dTLB miss events
real iTLB miss events
reasonable circa 2006
release the extra ref
relink to top of list
reset the POLLIN flag
resolve relative path
rule 12 can match eol
rule 15 can match eol
rule 21 can match eol
rule 22 can match eol
rule 23 can match eol
rule 26 can match eol
rule 29 can match eol
rule 30 can match eol
rule 31 can match eol
rule 32 can match eol
rule 56 can match eol
rule 57 can match eol
run and verify output
save away the results
send the site command
set to largest number
skip leading newlines
skipping "tags" files
so these can't match.
so we tab, we're done
stores the lock state
suppose binary format
surprise flag support
test self-assignment.
the "Domincal number"
these refine the type
transfar text charset
transform glyph image
uninitialized variant
urls are special too.
use to specify stdin.
user thrown exception
user time of children
we know this is valid
we may need an object
where new box will go
(It's a hacky closure)
- the substituted type
-- Parameter checks --
--- Private functions.
-ve means no antialias
/ Use for fast lookup.
1) Compare type guards
1) Update type guards.
A discriminated union.
A rethrowing function.
AFTER ALL ABOVE FAILED
ALPHACHANNEL constants
Academic Press, 1991).
Accumulate our result.
Accumulate the result.
Add V to the worklist.
Add a type annotation.
Add backward pointers.
Add the source lazily.
Add the subexpression.
Advance the generator.
All children finished.
Allocate a new object.
Allocate the metadata.
Allocate the new node.
Allow for transparency
Always returns an i8*.
An array of arguments.
Annot_array_get_string
Append it to the list.
Array loads and stores
Ask the parent module.
Available since 7.10.6
Available since 7.10.7
Available since 7.10.8
Available since 7.11.0
Available since 7.11.2
Available since 7.12.2
Available since 7.12.3
Available since 7.13.0
Available since 7.14.1
Available since 7.15.0
Available since 7.15.1
Available since 7.15.2
Available since 7.15.3
Available since 7.15.4
Available since 7.15.5
Available since 7.16.0
Available since 7.16.1
Available since 7.16.2
Available since 7.16.3
Available since 7.16.4
Available since 7.17.0
Available since 7.17.1
Available since 7.18.0
Available since 7.18.2
Available since 7.19.0
Available since 7.19.1
Available since 7.19.3
Available since 7.19.4
Available since 7.19.6
Available since 7.20.0
Available since 7.21.0
Available since 7.21.2
Available since 7.21.3
Available since 7.21.4
Available since 7.21.6
Available since 7.22.0
Available since 7.24.0
Available since 7.25.0
Available since 7.34.0
Available since 7.43.0
Begin filters function
Blacklist the location
Bool to Int conversion
Borrowed from proxygen
Break down the values.
Bridge the parameters.
Buffer remaining input
Build it if necessary.
Build the inline tree.
Build the token table.
Build type annotation.
Cached process statics
Calculate unknown size
Catch reentrancy bugs.
Check all the results.
Check check_subscript.
Check for tuple splat.
Check the debug scope.
Check witness methods.
Clear existing tagsets
Clear generator's key.
Clear our delete list.
Coding style component
Coerce the subpattern.
Collect bit depth info
Collect the arguments.
Command line handling.
Common value witnesses
Compare overload sets.
Component registration
Compute the distances.
Consider 'self' first.
Construct the exporter
Constructor reference.
Consume the base name.
Continue trying below.
Convert an inout type.
Convert it to unowned.
Convert the arguments.
Copy it if nontrivial.
Create a new function.
Create a new one here.
Create a new phi node.
Create an empty entry.
Create the IR emitter.
Create the None block.
Create the allocation.
Create the constraint.
Create the constructor
Create the descriptor.
Curl version constants
Cursor helper function
DITHERMETHOD constants
Datetime encode/decode
Deallocate the buffer.
Deallocate the object.
Declaration reference.
Decode operator names.
Decref the WaitHandle.
Description structure.
Destroy the old value.
Diagnose the conflict.
Diagnose the override.
Dig out the base type.
Do so at +0 if we can.
Do the ping, if needed
Does not run any code.
Don't append anything.
Don't go overboard....
Drop trailing newline.
Eat leading whitespace
Emit other attributes.
Emit the base operand.
Emit the closure body.
Emit the initializers.
Emit type predictions.
Enter the normal path.
Erase the 'live-range'
Establish the cleanup.
Exclude address types.
Explode as an r-value.
Extract the arguments.
Extract the parameter.
Extract tuple element.
FIXME: Cache the name.
FIXME: Compound names.
FIXME: Explosion level
FIXME: Heavy WIP here.
FIXME: Implementation.
FIXME: Record failure.
FIXME: This is a hack.
FIXME: better recovery
FIXME: drop mutable...
FIXME: print condition
FIXME: print container
FIXME: print increment
Fetch the next record.
File upload successful
Filter out duplicates.
Finally, set the body.
Find a potential best.
Find an exiting block.
Find best predecessor.
Find the lookup table.
Find the vtable entry.
First child is number.
First phase: analysis.
First try gdRealloc().
Fixed point to integer
Fixup the exit blocks.
For internal use only.
Form the match result.
Form the overload set.
Form the source value.
Form the substitution.
Format: Name and type.
Forward all arguments.
Forward substitutions.
Forward the arguments.
Free is skipped above.
Freetype 2.1 or better
GD2 image format types
Gather the spare bits.
Generator instructions
Generic integer switch
Get the class pointer.
Get the current token.
Get the declared type.
Get the output stream.
Get the self argument.
Get the type metadata.
Get value of parameter
Getting more aggresive
Handle a regular call.
Handle dynamic lookup.
Handle other closures.
Handle self-recursion.
Handling database name
Hit the chained cache.
IRGen the main module.
Identify Bison output.
Identity optimization.
If first encoded token
If so, just return it.
If we did, consume it.
If we fail, then bail.
Ignore include guards.
Ignore size specifier.
Import the parameters.
Index Projection Kinds
Initialization points.
Initialize parameters.
Initialize the header.
Inject the 'Some' tag.
Instantiation function
Integer to fixed point
Integer value of limit
Internal Resource Data
Internal resource data
Introduce the fill op.
Invalidate everything.
It can be an argument.
It doesn't contribute.
It's a block algorithm
It's okay to grow etc.
JPEG 2000 Marker Codes
Just for completeness.
Keyed by function name
LIBC_SCCS and not lint
Lane's stdio versions.
Let's not have "ur_ls"
Load the 'out' values.
Load the parent chain.
Load the payload area.
Location of last match
Look at the parameter.
Look for the function.
Look through metatypes
Look two letters down.
Lower the result type.
Make sure they pair up
Make the name private.
Make the property decl
Mangle the parameters.
Materialize the input.
MongoGridFSFile Object
More-or-less vertical.
Move on to the options
N is usually small ...
NamedEntity* np.second
NativeData definitions
Need to raise an error
New item or continuous
Next: src is an object
Next: tvRef is Uninit.
No dispatch necessary.
No implicit arguments.
No need to keep going.
No other kind for now.
No tag, nothing to do.
Non-existent property.
Non-generic extension.
Non-polymorphic types.
Non-semantic patterns.
Non-wildcard patterns.
Not possible: no this.
Nothing more to solve.
Objective-C "id" type.
Ok, we have all loads.
Ok, we have succeeded.
Okay, we have a tuple.
Okay, we need a cache.
Only instance methods.
Open the nominal type.
Optimize US-ASCII case
Optional class methods
Otherwise PHP-compare.
Otherwise return None.
Otherwise, keep going.
Otherwise, make a GEP.
PCREglobals definition
Pack tag bits, if any.
Package up the result.
Parse a tuple pattern.
Parse the closing ')'.
Parse the leading '('.
Parse the opcode name.
Parse the second type.
Peephole cleanup pass.
Perform the pre-check.
Pop off the top value.
Possible Content-Type:
Prepare to SILCombine.
Print everything else.
Print out the comment.
Print the inline tree.
Process a SOFn marker.
Process the root node.
Protocol compositions.
Pull out the elements.
Qualified lookup case.
Quantization component
RESOURCETYPE constants
Reabstract the result.
Reabstract the return.
Read preferences types
Record a type witness.
Record the attributes.
Record the superclass.
Record this component.
Record this parameter.
Recursively satisfied.
Register all the FDEs.
Reject a where clause.
Release the connection
Release the old value.
Remove dead functions.
Remove the constraint.
Required class methods
Return True on change.
Return the new reader.
Returns None on error.
Richard Stevens p 298.
RotateSingleBlockLoops
Run shutdown handlers.
SHA256 initialization.
SHA384 initialization.
STREAM_META_GROUP_NAME
STREAM_META_OWNER_NAME
Same thing for arrays.
Scan the JPEG headers.
Search the loaded dls.
See if it's a property
Set function override.
Set in FrontendOptions
Set the uncurry level.
Set to start of buffer
Set up method pointers
Set up the args array.
Set up the dependency.
Setup the SIL Options.
Shift the error token.
Skip a split backedge.
Skip checking for SIL.
Skip local successors.
Skip non-type members.
Skip trivial children.
Skip unnamed elements.
Some analysis we need.
Some other platform...
Some unknown function.
Someone beat us to it.
Sort the protocol set.
Split the module path.
Static property marker
Static stored property
Stop at may interfere.
Store it in the cache.
Store the new pointer.
String dir_rewinddir()
Strip off the extract.
Strip trailing slashes
SunOS 5.x (short name)
Swallow the exception.
Swap our destinations.
SystemlibSessionModule
TODO: Compute the BCT.
Thanks to Geert Jansen
That's okay, though...
The continuation block
The fall-through case.
The index types match.
The length of the key.
The name didn't match.
The option key follows
There's nothing to do.
This is an awful hack.
This is an inout type.
This is checked later.
This is the easy case.
This isn't a generator
This speeds things up.
This was really a NUL.
Timeout is in seconds.
Token at end of string
Transform result type.
Translate the context.
Treat it as a typedef.
Trivially unmergeable.
Try to import a macro.
Try to read more data.
Try to use the winner.
Turn the next flag on.
Type sugar for arrays.
UNumberFormatAttribute
Unknown accessor kind.
Unknown operator kind.
Update all the servers
Update dominance info.
Update it if possible.
Update stats for boxes
Update the output set.
Use a random location.
Use the inline buffer.
Value is on the stack.
Verify the SourceFile.
Visit in source order.
We completed the root.
We found an ambiguity.
We have a declaration.
We moved instructions.
We've loaded the file.
Wire up the overrides.
Write the Image header
Write the Magic header
a chunk of whitespaces
abbreviated month name
activate the converter
add 1 to the number b.
adding negative length
allocate output buffer
allow room for a space
also checks invariants
an array of php stacks
avoid lint complaining
before iter is modifed
body transfar encoding
bool stream_truncate()
brackets nesting level
but not variadic ones.
by-ref argument passed
call the user function
canInlineAt() helpers.
cast as a stdio FILE *
cast is due to xml api
check 1 or 2 digit day
check for bundled IPv4
class AsyncMysqlResult
class EncodingDetector
class-name constructor
clear the ready status
compressed images only
conditional allocation
convert UNC paths (eg.
create the full path..
d8-15 are callee-saved
db connection resource
diff/intersect helpers
double free on failure
eagerly rename all SFs
end namespace comments
even if you notify it.
expose the mysql flags
extract only this file
field name is too long
fill in the basic info
for reading from input
for the NUL terminator
fork failed, join now.
free the bvalue struct
generate: var indexVar
handle Location header
handle an mmaped file.
has interlace argument
helper for __construct
i'm done with this job
identifier, identifier
if subject is an array
if we read any data...
im1 must be True Color
increment pen position
individual test suites
initialize scope array
insert copies on edges
interfaces to C-client
just for cgLdObjMethod
length includes itself
length of state vector
link in the mbx driver
link in the mtx driver
load directory or file
localizes all the rows
look through Type node
m_op is from other now
make_mutable hoisting.
match against full uri
may replace at runtime
minimum pattern length
names for regular year
namespace HPHP::Native
namespace ServiceData.
neither does AnyObject
new chunk of base size
new scope, new statics
no magic values on rhs
no need for filtering.
null for Xenon signals
objc_msgSend for now).
offset is imm number 0
opens up a data stream
optimization functions
options with int value
overjump leading space
perform test operation
phar:// stream wrapper
phase 1: look for args
reached end-of-string.
register start address
register top level DIE
release node if unused
remove the "f_" prefix
replace the old cache.
return the column name
rule 128 can match eol
rule 129 can match eol
rule 135 can match eol
rule 146 can match eol
rule 161 can match eol
rule 162 can match eol
rule 163 can match eol
rule 164 can match eol
rule 171 can match eol
rule 172 can match eol
rule 178 can match eol
rule 180 can match eol
rule 181 can match eol
rule 182 can match eol
rule 184 can match eol
rule 188 can match eol
rule 191 can match eol
rule 192 can match eol
rule 193 can match eol
rule 194 can match eol
rule 195 can match eol
rule 197 can match eol
rule 201 can match eol
rule 205 can match eol
rule 208 can match eol
rule 215 can match eol
rule 218 can match eol
rule 219 can match eol
rule 220 can match eol
rule 221 can match eol
rule 224 can match eol
scan through modifiers
select this collection
set rotation transform
signal handler / Types
sizeof(struct class_t)
skip field number, I16
skip unimportant stuff
special colours for gd
start of search region
stdclass converts to 1
this does not re-enter
true iff size not zero
typedefs for the array
use fg color directly.
validate the next char
visiting each argument
walking to next column
we should've escalated
workaround for ICU bug
zm_deactivate_dso_test
"de" can prefix a verb.
"infinity" use position
"re" can prefix a verb.
(re)bind the parameters
- "Pointer followable".
- days after 21st March
--- Refutable patterns.
/ This is used by Sema.
// no writes /   return
0xxxxxxx is plain ASCII
10xxxxxx never 1st byte
404 redirection succeed
A same-type-requirement
Accumulate each channel
Actual allocated length
Add a zero initializer.
Add constraint on args.
Add key or last result.
Add other requirements.
Add the argument label.
Add the block argument.
Add the call file/line.
Add the extra tag bits.
Add the selector value.
Add the witness marker.
Add type specific info.
Adjust to the B.C./A.D.
Advance the sequence...
Allocate a new element.
Allocate the new entry.
Always returns an i8**.
An IPv4 mapped address.
An exponent is allowed.
Annot_string_get_length
Argument list mismatch.
Array value projection.
Assume largest possible
Bad or unexpected data.
Base might be a string.
Bind the type variable.
Bitset of Vreg numbers.
Breakpoint manipulation
Bridge the input types.
Build conformance table
Build import depth map.
Build the return value.
Bump the request count.
By Authors:  Spencer W.
CR_NET_READ_INTERRUPTED
Callback based constant
Can't store it anywhere
Cannot parse correctly.
Cast the wrapped value.
Check 32-bit alignment.
Check for a query error
Check for swift_newtype
Check number of args...
Check the caches again.
Check the hit condition
Check the inline cache.
Checking for key-length
Chunk collection object
Clear AllocStack state.
Coerce scalar to tuple.
Collect type variables.
Common Vector/ImmVector
Compare argument names.
Compute adjusted flags.
Compute relative score.
Conservatively say yes.
Construct the full name
Constructor/Initializer
Consume the 'escaping'.
Consume the identifier.
Continue at the caller.
Continue in the caller.
Convert to milliseconds
Copy InitF into GetterF
Copy the field offsets.
Create a new preheader.
Create byte sequence P.
Create byte sequence S.
Create the array value.
Create the constructor.
Create the message node
Create the result plan.
Create the struct type.
Deactivate the cleanup.
Debugger (part of Eval)
Decode each instruction
Default case comes last
Deferred exception data
Delete redundant stores
Delete the dead blocks.
Delete the dead stores.
Demangle the base name.
Demangle the base type.
Demangle the identifier
Desugar for comparison.
Desugar the value type.
Diagnose each conflict.
Diagnose the ambiguity.
Display the diagnostic.
Do it last just in case
Do the actual hoisting.
Don't attempt recovery.
Don't deduce IUO types.
Don't print submodules.
Don't rename functions.
Don't try this at home.
Drop padding arguments.
Drop the double quotes.
Easy case -- no payload
Eat trailing whitespace
Emit a byte of padding.
Emit a global variable.
Emit a heap allocation.
Emit into that address.
Emit the failure block.
Emit the indirect path.
Emit the layout values.
Emit the rethrow block.
Emit the rethrow logic.
Emit the subexpression.
Emit the subject value.
Emit the success block.
End of the input string
Enter a cleanups scope.
Error already populated
Error results are last.
Evaluate the condition.
Exact equality is fine.
Execute each operation.
Execute the subcommand.
Extended result values.
Extract the parameters.
Extract tuple elements.
FIXME: Better recovery.
FIXME: Deal with these.
FIXME: Generalize this.
FIXME: Not really true.
FIXME: This is brittle.
FIXME: a bit of a hack.
FIXME: generalize this.
FIXME: make thread-safe
FIXME: print guard expr
FIXME: this will assert
Fail to open empty path
Finalize the DIBuilder.
Finalize this solution.
Find a reasonable color
Find starting text node
Find the argument type.
Find the protocol decl.
Find the witness table.
Finish the result type.
Fix the argument label.
Fix the argument names.
For debugging purposes.
For example: switch ...
For now, we don't care.
For resolved archetypes
Form the call argument.
Form the function type.
Free the response node.
FuncEntry    caller ...
Get field specification
Get potential bindings.
Get the dominator tree.
Get the function value.
Get the next character.
Get the original value.
Get the witness tables.
Give it a module number
Grab server information
Grab the original load.
Grab the substitutions.
Handle nontrivial tags.
Handle sil-dotted-path.
Handle the ObjC prefix.
Handled in visitSwitch.
Hide unrelated options.
ID, local discriminator
If NO_EMPTY flag is set
If we hit EOF, we fail.
Ignore invalid escapes.
Ignore the array value.
Ignore the entry block.
Import the DeclContext.
Import the constructor.
Import the declaration.
Import the result type.
Import trait properties
Include the _Tt prefix.
Index+Base+Displacement
Initial size of the map
Initialize return array
Initialize return value
Initialize the debugger
Initialize the members.
Initialize the response
Initialize the xml node
Insert the shadow copy.
Intentional fallthrough
Intermediate operations
Internal helper methods
Intervals that overlap.
Invalid UTF-8 sequence.
Invariants verified: 1.
Is this a check_bounds.
It could cause a crash.
It is a warning message
Just delete the source.
Just in case it is not.
Just return SILValue().
Keep these two in sync.
Kill the abort cleanup.
Lazy allocation of heap
Leave it untransformed.
Load from the optional.
Load the metatype kind.
Look back a split edge.
Look for Boolean types.
Look through metatypes.
Look through optionals.
MD5(pw,salt,pw), valid.
Mainly used internally.
Make sure YYID is used.
Match on the alternate.
May not be initialized.
Merge the predecessors.
Merge two state-stacks.
Might change any array.
Move on to the next one
Move to the next piece.
NB: may update m_stack.
Names of integer types.
Need to raise a warning
New and include/require
No adjustment required.
No explicit __construct
No room for more colors
No self, must be static
Normal token character.
Not a constructor call.
Not a formal parameter.
Nothing more to do here
Now finalize the match.
Now we have a +1 value.
Now, we just ignore it.
OK, we allocated SIZE+1
Object/Ref loads/stores
Objective-C properties.
Ok we found our VTable.
Okay, insert a new row.
Okay, make a new entry.
Okay, we found a match.
One case and a default.
Only for type metadata.
Other metadata routines
Otherwise look on disk.
Otherwise return false.
Otherwise, do a switch.
Otherwise, it's scalar.
Otherwise, preserve it.
Otherwise, replace top.
Out of order on purpose
Output YUV data buffers
Overwrite the functiosn
Parse all the elements.
Parse the body, if any.
Parse the covered name.
Parse the element type.
Parse the matching ')'.
Patch the length field.
Peek through optionals.
Per-block live-in sets.
Perform the conversion.
Perl compatible options
Pre: isPredefined(bits)
Prepare the Apply args.
Print the requirements.
Process the header info
Process the parameters.
Profiler config options
Prohibit strengthening.
Promote the Allocation.
Protocol witness tables
ProxygenTransportTraits
Pull the r-value apart.
Put out the final code.
RSA Data Security, Inc.
Ran out of spill slots.
Re-calculate the stride
Read an unsigned value.
Read the substitutions.
Recognize applications.
Record the conformance.
Record the requirement.
Register trace consumer
Report success/failure.
Reset it and try again.
Resolve this extension.
Result is always value.
Retreat the dfs search.
Retrieve the archetype.
Return false otherwise.
Return undefined value.
Return: success/failure
Returns true for error.
Returns true on success
Revert the result type.
RuntimeException object
SOAP 1.2 enc:id enc:ref
Scalarize CopyAddrInst.
Scatter the spare bits.
See RFC 1010 for values
See findDeallocPoint().
Send and wait for reply
Set C language options.
Set state to succeeded.
Set the class variables
Set the current column.
Set the interface type.
Shared helper functions
Should never be called.
Simplify a switch_enum.
Single or empty values.
Skip claimed arguments.
Skip leading whitespace
Skip unknown arguments.
So assume that it does.
So just fail hard here.
So let's decompress it.
So this should be fast.
So we just don't do it.
Sort the summary table.
Spill space allocation.
Split the header by ','
Stack of input buffers.
Standard config options
State is uninitialized.
Store the metadata ref.
Store the payload back.
Store the result later.
String to match against
Strip the segment name.
Success block: recurse.
Superclass requirement.
System classes override
System crypt() function
TODO Create the helper.
TODO: Extra inhabitants
TODO: Remove this hack.
TODO: Swift submodules.
TODO: security checking
Take only the last part
Thanks to John Buckman.
Thanks to Steven Brown.
That produce Selectors.
The for-each statement.
The function reference.
The kind of adjustment.
The one-byte opcode map
The pattern of a catch.
The primary entrypoint.
The specialized column.
The type of a variable.
The witness we matched.
There might not be any.
These make C and G soft
This is a boolean value
This is somewhat hacky.
This location is alive.
This release generates.
This should be removed.
This should still be 2.
This simplifies SILGen.
This will go away soon.
Tracing return lambdas.
Transform requirements.
Try grabbing the memory
Try to find the member.
Try to load the module.
Type should be loadable
Typecheck the function.
U8_NEXT would increment
Unused sequence length.
Upcast to a superclass.
Used for static_assert.
Using the new protocol.
Validate raw video data
Verification utilities.
Visit param conformance
Walk the blocks in rpo.
We found a split point.
We have better results.
We have reached the end
We might load a module.
We need to do the same.
We need to handle this.
We want to start fresh.
We won't handle XLBoxes
Where to insert spills.
Wire up the archetypes.
WitnessTableSizeInWords
XXX: is this useful ...
Zero-parameter methods.
add user-defined fields
alafim (thousands) case
alloc the ftp structure
allow empty param lists
also copy the tailing 0
appease -Wuninitialized
apply change right away
basic block arguments).
bind to a local address
build the output buffer
bytes allocated in heap
caller raises exception
check for invalid dates
check optional fraction
class IntlBreakIterator
class IntlDateFormatter
collect WorkItem to run
convert *nix paths (eg.
converted super globals
create files collection
create foreground color
def gets populated here
default to cached value
do regular substitution
else leave offsetp NULL
end anonymous namespace
end standard C headers.
entry has no dominator.
execute the stmt itself
expecting any character
ext/intl error handling
extension class methods
fetch the relevant data
find type of descriptor
find type of named file
for exponent conversion
for heb_number_to_chars
for multithreading mode
force tail calls at -O0
free old palette buffer
full time and date spec
generic signature, type
getExtraInhabitantIndex
global pattern matching
handle a compiled file.
has query in 404 string
have already seen the -
helper for getConstants
ignore cert expirations
ignoreTopLevelInjection
impl function attribute
initial distance values
invoke function pointer
job reaper would block.
jump to end of template
link in the imap driver
link in the mmdf driver
link in the news driver
link in the nntp driver
link in the pop3 driver
link in the unix driver
look for LF in the data
look up for a delimiter
mem files are read-only
memcpy(dst, src, count)
mode for proc_open code
multiply by m and add a
no generic requirements
no need to escape these
not configured to cache
nothing else to look at
now mutate instructions
null line, garbage, etc
number of raw comments,
one time initialization
out of order on purpose
output readable address
overriding ResourceData
parse out the timestamp
point to buffer's start
populate to from object
pre-conversion encoding
real dcache miss events
real icache miss events
reinitialize pcre table
release attrp if unused
release nextp if unused
replay the same command
return whatever's there
ripemd128 finalization.
ripemd160 finalization.
ripemd256 finalization.
ripemd320 finalization.
round to next pixel row
same for TypeConstraint
sanity check the cipher
set by GenericType case
setState(STATE_RUNNING)
should be line1 one day
shouldInline() helpers.
single pattern matching
skip if already marked.
skip leading delimiters
so to avoid "-0" output
source is palette based
stop at type attributes
stores our calculations
stream socket functions
suspend eager execution
swallow errors silently
system time of children
this will free data ptr
too few parameter bound
treat as normal comment
turn keys into a string
union_of is commutative
unsupported RIFF header
uses the subclass lists
view the wbmp on stdout
we want the private key
work out remaining time
"remove" what was added.
(*) Auto -- The default.
(We need a type for it.)
(iOS only) No arguments.
/ Always returns an i8*.
/ Otherwise return null.
/ Otherwise, return nil.
/ TODO: Move into utils.
16 bits should be enough
8-bit conditional branch
@see yy_switch_to_buffer
A non-throwing function.
A reference to a member.
Adapter for tuple types.
Add New to the worklist.
Add all those arguments.
Add an optional operand.
Add inferred attributes.
Add inherited protocols.
Add the argument labels.
Add the breakpoint info.
Add the breakpoint state
Add the inherited entry.
Add this key/value pair.
Advance stable iterator.
Advance the linked list.
Algorithm for reflow: 1.
Already fully diagnosed.
Already walked children.
Also CSE semantic calls.
Always do direct access.
Analysis was successful.
Anything else -- give up
Apply the mask and test.
Apply the substitutions.
Apply the sugar onto it.
Be conservative for now.
Bitcast of zero is zero.
Block-local environment.
Blocks are ObjC objects.
Both types are optional.
BreakIterator's iterator
Build APInt from string.
Build result existential
Build the function name.
Build the function type.
Build the metadata name.
Build the witness table.
Bundled blowfish crypt()
CF type as foreign class
CR_NET_WRITE_INTERRUPTED
Call the builtin method.
Can't hoist terminators.
Cast to the result type.
Check a super.init call.
Check extra inhabitants.
Check for a .foo suffix.
Check for shallow match.
Check for stream wrapper
Check is trivially true.
Check the catch pattern.
Check the location kind.
Check the request kinds.
Claim the next argument.
Class existentials, etc.
Classref symbolic flavor
Cleanup the merged node.
Clear out the hash table
Coercions to tuple type.
Collect innermost loops.
Completely naive search.
Component 2 is not used.
Compute block summaries.
Conditional branch user.
Construct the extension.
Consume the +1 argument.
Conversion instructions.
Convert to a define call
Converts call arguments.
Copy in all the use vars
Copy only the drive name
Copy only the share name
Copy parent's constants.
Copy the type witnesses.
Could be some cert thing
Create a Swift compiler.
Create a list instead :)
Create a target machine.
Create the getter thunk.
Create the lookup table.
Create the new function.
Create the result value.
Create the setter thunk.
D1 can be the same as B.
DecRef tvRef and tvRef2.
Declared in externals.h.
Decompose the call site.
Delete the old argument.
Demangle the parameters.
Deserialize Conformance.
Detect a terminal match.
Diagnose for deprecation
Diagnostic didn't exist.
Disable logging to files
Disallow infinite loops.
Do not replace the bbarg
Do replica set name test
Don't analyze PHI nodes.
Don't do anything with I
Don't reprocess the phi.
Don't visit types twice.
Emit a call to a getter.
Emit a conditional cast.
Emit the class metadata.
Emit the initialization.
Emit the statement here.
Emit the uncurried call.
Emit them as constant 0.
End anonymous namespace.
End of unrolling passes.
Ended on non-(space/NUL)
Engine exception classes
Ennumerators and lookups
Enter a start condition.
Erase the rethrow block.
Evaluate script with JSC
Extract struct elements.
Extract the true values.
FIXME: Make this useful.
FIXME: This is horrible.
FIXME: compress bitfield
FIXME: drop "Mutable"...
FIXME: non-fixed offsets
FIXME: print expression.
FIXME: print initializer
FIXME: std::map is lame.
Fallback to pointer kind
Feature name is required
Fetch the ctx hash value
File is a reparse point.
Finally dump the output.
Find the argument types.
Find the builtin method.
Find the digit sequence.
Find the exit condition.
Find the extended class.
Find the property names.
Find the representative.
Find the return BB of F.
Find the sanitizer kind.
First, indirect results.
Fix the name, if needed.
For replicaset in return
For str_getcsv() support
For use with loading xml
Form a normal subscript.
Form the argument lists.
Form the argument tuple.
Form the parameter list.
Forward iteration count.
Freetype 2.1.3 or better
Generalize if necessary.
Generate the thunk name.
Generic type parameters.
Get best match possible.
Get the end of the line.
Get the global variable.
Get the original lvalue.
Get the static metadata.
Get the superclass type.
Grab the callee function
Grab the indexed offset.
Group results by module.
Grow args, if necessary.
Handle integrated tools.
Handle known type names.
Handle redeclared decls.
Handle store and assign.
Handle the "reset" form.
Handle the nominal type.
Handle the obvious case.
Handle the requirements.
Handle the return value.
Hence "copy forwarding".
Here we don't want that.
Hit condition and value.
Hit the fast path below.
Id's of must-alias-sets.
If U has side effects...
If invalid return false.
If it fails, we're done.
If so, dig through that.
If something has matched
If we fail, return true.
If we have a backedge...
Ignore matched releases.
Ignore metatype argument
Ignore possible error(s)
Ignore the data pointer.
Incref the return value.
Initialize the metadata.
Inlining was successful.
Insert a fake EOI marker
Insert convert_function.
Insufficient result_buf.
Insufficient result_bug.
Interface for ExprWalker
Invalid field descriptor
It could be much better.
Just drop the attribute.
Keep track of InOutExprs
Keyed by serialized args
Length is in code units.
Length of needed storage
Lets declare those here.
Load and parse one file.
Load the input module...
Load the original value.
LogFile debugger setting
Look at block arguments.
Look at the input types.
Look at the result type.
Look for an exact match.
Look in the cache first.
Look through attributes.
Lookup the swift module.
Loop back to the header.
Loop through the chunks.
Low-level send function.
Lower comparison to cmpq
MD5 password encryption.
MInstrTranslator helpers
Macro that does padding.
Main workhorse functions
Make sure we dont hit it
Mangle the requirements.
Map each of the results.
Mark this test a failure
Mask off the spare bits.
Materialize the element.
Merge the property type.
Might throw an exception
Module printing options.
More-or-less horizontal.
Must be the pseudo-type.
NOTE: legacy punctuator.
Next: Base is an object.
No cached results found.
No cls field in Resource
Not found within a type.
Not in a method context.
Not needed for mangling.
Now encode the result...
Now look for the method.
NullSafe Property marker
OR in the Bits per Pixel
Objective-C "BOOL" type.
Obtain target to be set.
Only diagnose this once.
Only left in intern map.
Only non-static members.
Only push if top exists.
Only valid for a result.
Open up the existential.
Otherwise returns false.
Otherwise, fall through.
Otherwise, it's bridged.
Otherwise, keep looking.
Otherwise, put it there.
Otherwise, return false.
Otherwise, use a memcpy.
Out of order on purpose.
Output DOT-format graph.
PCRECache implementation
Pagelet Server unit test
Parse getter and setter.
Parse parameter-clauses.
Parse the subexpression.
Pass in just the setter.
Patch the FPI structures
Perform Copy Forwarding.
Perform a native return.
Perform the translation.
Pre-allocate the result.
Preallocate index buffer
Preceding item must not.
Pretty-print the vector.
Print an unsigned value.
Print equivalence class.
Print the summary table.
Produce the value at +1.
Progression order change
Project out the payload.
Promote this allocation.
Prop handler for mysqli.
Property initialization.
Put the thread to sleep.
Read all of the entries.
Read the cached results.
Record the type witness.
Record this conformance.
Record this requirement.
Reference storage types.
Reference to super.init.
Regenerate the prologue.
Relax the region guards.
Remangle generic params.
Remove any opened types.
Remove the bounds check.
Remove the instructions.
Remove the solver state.
Reset the module filter.
Resolve the member type.
Resolve the nested type.
Resolve the parent type.
Restore clip if required
Restore debugging state.
Result types must match.
Return address register.
Return exact match color
Return the result at +1.
Returns false otherwise.
Returns true on failure.
Returns true on success.
Reverse iteration count.
Run the function passes.
Sampling based profiler.
Sanitize the expression.
See KindOfDouble (below)
See ObjectData::release.
Select the linker to use
Semantic calls are safe.
Serialize 'this' object.
Serialize operation info
Set the computed setter.
Set the superclass type.
Set up the VM registers.
Set up the callee state.
Set up the inner result.
Should be done in caller
SimpleXMLElementIterator
Simply replace the load.
Skip leading whitespace.
Skip past any leading X.
Skip unreachable blocks.
So we know they overlap.
Something else is wrong.
Special cases: +0 and -0
Square output for digest
Static computed property
Store the cpu frequency.
Store the prefix length.
Strip inout from 'self'.
SunOS 5.x (command line)
Superclass requirements.
Switch on the tag value.
Tag declaration context.
Test erase(value) method
The basic MD5 functions.
The current function ID.
The entity is available.
The field of the member.
The locator we're using.
The main AA entry point.
The non-trivial element.
The origin index to use.
The outer matching loop.
The repo wasn't loadable
The service has crashed.
The type inside the box.
There are invalid bytes.
There is no declaration.
These should never fail.
This is a viable result.
This is the entry point.
This must be a backedge.
This was causing a crash
Timestamp (microseconds)
Track a specific VarDecl
Transform a tuple value.
Try to solve the system.
Type Expansion Analysis.
Type expansion analysis.
UDateTimePatternConflict
UNumberFormatPadPosition
Unique inline locations.
Unknown xref path piece.
Unqualified lookup case.
Update the element type.
Update the overload set.
Use POD value witnesses.
Use SILOneOperandLayout.
Use the ObjC entry point
Validate the parameters.
Variadic bit must match.
Verify imported modules.
Visit the lookup tables.
Visit the subexpression.
WITH_FB_MEMORY_PROFILING
Wait for VMs to shutdown
Wait for a socket event.
We already processed it.
We can ignore mayTrap().
We can never consume it.
We can remove the check.
We didn't find anything.
We have a compound name.
We have a function name.
We have the constructor.
We only support classes.
We referenced an lvalue.
We take the first value.
We'll follow strategy 2.
We've been told to exit.
Win XP specific, Unicode
Write an Image separator
Y if followed by a vowel
abbreviated weekday name
account for the sentinel
add funciton return type
alloc the data structure
allocate the data struct
anon namespace / Helpers
array for GETALL, SETALL
avoid infinite recursion
avoiding trigraph errors
bidirectional references
block became unnecessary
check the apc array list
checks GOTO label syntax
class AsyncMysqlRowBlock
class ReflectionProperty
clear the Variant's copy
complete extension tests
constructors/destructors
consume the input value.
convert angle to radians
convert escape sequences
copy over any stragglers
copy the decimal places.
create base query object
create chunks collection
didn't find the boundary
don't allow numeric keys
don't free global VarEnv
dump all buffered output
else call string version
else fallback to default
emit a call to willThrow
end anonymous namespace.
ensure index on chunks.n
error for below/prev col
exact prefix match bonus
exactly half-way between
expecting a charset name
extension in this module
fallback to normal popen
finish populating cursor
first code of JIS-8 pair
free but still reachable
from immutable typeParam
full mmap'd rds section.
give gdb users some love
header transfar encoding
helper for getParameters
histogram cell c0/c1/c2.
histogram is garbage now
if this is a function...
ignore unreachable block
in the middle of it etc.
initialize response code
instantion of ICU object
invalidating read buffer
it's copied from xpath.c
iterate over all rounds:
key is already inserted.
leaks prior conformances
link in the dummy driver
link in the phile driver
link in the tenex driver
loc_name ends with '-x-'
longest sane line length
look up clsName::cnsName
m_hash is computed soon.
make the return an array
maximum size of colormap
mix of names and numbers
myFoo.doThing(42, b: 19)
no conversion necessary.
no magic values get here
no scheme, look for port
non-free reachable nodes
number of arc traversals
of factory initializers.
only cond_br terminators
only scheme is available
or enums with enum data.
ordinary counted objects
other channel statistics
output in octal notation
path should be absolute.
php5 special cases this.
pointer to the histogram
poison released bytecode
preventing instantiation
read and parse this file
rebuild url from scratch
remember stream position
resolving home directory
retain(null) is a no-op.
same width, just copy it
scale is now normalized.
secondary hash (after G.
service request-y things
should compile to a load
silence operator support
single memory operations
skipping emacs leftovers
skipping the first colon
so no repetitive logging
split the critical edge.
split up input parameter
stack of filled segments
statically compute X / Y
stopped by worker thread
sufficient test for here
the next character class
the static type itself).
there is no 'right' char
there was no 'left' char
to avoid wrong CodeError
toggle AUTOCOMMIT status
unexpected end of header
update the buffer length
use add/findForNewInsert
write to the output file
zero only the new slots.
zm_globals_ctor_dso_test
zm_globals_dtor_dso_test
(Currently that is none.)
/ Otherwise returns true.
/ Should use EnumPayload.
/proc/* parsing functions
1) Check the type guards.
32-bit conditional branch
: (after unquoted string)
@objc protocol metatypes.
A map with a single entry
Account for the sentinel.
Add a value to image_info
Add an array of protocols
Add resolutions for phis.
Add the indirect results.
Add the parent protocols.
Add the syntax map token.
Added in the early phase.
AddrToTransFragmentMapper
Address-only with payload
Adjust iLast accordingly.
Adopt the requested name.
All bits are significant.
All cases must be covered
Allocate a new archetype.
Allocate the existential.
Allocate the thread-stack
Always returns / an i8**.
Any type syntax is valid.
Apply 'self' if provided.
ArgBB is the entry block.
Assign tmp2 into storage.
At least one predecessor.
Attributes like cc(x,y,z)
Augmentation data length.
Blocks must be non-empty.
Break out the parameters.
Bridge all the arguments.
Build the necessary decl.
Call the native function.
Cannot extend a metatype.
Cast the unwrapped value.
Cause a token to be read.
Change the file mode mask
Check all witness tables.
Check and build thumbnail
Check for an exact match.
Check generic parameters.
Check graph invariance 4)
Check this / recursively.
Classify the instruction.
Clone each of the blocks.
Clone generic parameters.
Clone the tuple elements.
Compute the type of self.
Conformance requirements.
Constant fold switch int.
Construct a TuplePattern.
Construct left-hand side.
Control flow instructions
Convert to final encoding
Copy the value out at +1.
Copy the value witnesses.
Create a compressed file.
Create an IRGen instance.
Create an override of it.
Create the function body.
Create the tuple shuffle.
Creation and destruction.
D1 can be the same as D2.
Deallocate the temporary.
Decimal point is allowed.
Default number of rounds.
Default variable settings
Defined in crypt-sha256.c
Demangle the result type.
Destroy the lookup table.
Destroy the stack itself.
Destroy the value inside.
Dig out the context type.
Dig out the nominal type.
Dig out the type witness.
Discard stack temporaries
Distances for all scopes.
Divide a fixed by a fixed
Don't compare methods vs.
Don't emit a Fix-It here.
Don't strip just "Error".
Don't walk into closures.
Drop the argument labels.
Dynamic member reference.
EOS after separators only
Edit over the 'foo' decl.
Emit attributes (if any).
Emit static initializers.
Emit the destructor body.
Emit the module contents.
Emit the raw application.
Emit the real definition.
Emit the recursive cases.
Enabling the token table.
End of replacement string
Enter offset lookup state
Execute this source line.
Expand the direct result.
Extract the false values.
Extract the program name.
FIXME: Cache name lookup.
FIXME: No "safe" variant.
FIXME: Not a total order.
FIXME: generic parameters
FIXME: source location...
Failed to prove anything.
Failure to read the file.
Figure out what they are.
Fill in the `self` space.
Filled in by the runtime.
Filled in during parsing.
Finally, call the setter.
Find the end of the year.
Find the global variable.
Find the protocol layout.
Find the replica set name
Find the selected member.
First handle allocations.
First the ApplyInst args.
First we pad on the left.
Floating point operations
For constant values only.
For example, this allows:
Forget the previous decl.
Form the dictionary type.
Form the parameter tuple.
Form the selector string.
Form the subcommand name.
Free all transformations.
Gather the occupied bits.
Generate diagnostic info.
Generator support helpers
Get astronomical twilight
Get constant option value
Get of new value in array
Get the Swift identifier.
Get the integer constant.
Get the payload argument.
Get the requested handler
Get the unapplied params.
Get/create the semaphore.
Getting name, advancing i
Getting type, advancing i
Global NamedEntity table.
Global error code/message
Grab a chunk of the mask.
Grab the file as an array
Grab the incoming values.
Graphic Control Extension
HW events for each region
Handle cleanup locations.
Handle empty identifiers.
Handle these cases below.
Hide editor placeholders.
Hit max number of levels.
Holds list of subpatterns
Holds results of studying
If OK2 is unset, take K1.
If not special builtin...
If so, swallow the error.
If so, the madness starts
If that fails, slow exit.
If we found it, we're ok.
If we have a subregion...
Implicit sp input/output.
Import the function type.
Initialize compiler state
Initialize the data flow.
Initialize the properties
Insert the element decls.
Inspect integer literals.
Instantiate the constant.
Introduced in DOM Level 2
Introduced in DOM Level 3
Invalid field descriptor.
It should be pretty fast.
It's in this source file.
Iterator for input string
Junk the truecolor pixels
Just retain a by-val let.
Keep the original source.
Leaving one of the preds.
Lee, all rights reserved.
Left operand is a double.
Left operand is a string.
Left operand is an array.
Let caller sort them out.
Let's check the perf map.
Limits of integral types.
Linux 2.0.36 (short name)
Load the 'self' argument.
Load the metadata tables.
Log the passed in command
Look for the closing ')'.
Look through DynamicSelf.
Look through ParenExpr's.
Look through inout types.
Look through named types.
Look through parentheses.
Look through typealiases.
Lower subtraction to subq
MD5 basic transformation.
Machine is running again.
Make sure we have a proxy
Mark children as invalid.
Mark end of requirements.
Maximum number of rounds.
May be an array mutation.
Memorize the last retain.
Minimum number of rounds.
Must have a where clause.
Needs a special argument.
Nice interface, but slow.
No action is needed here.
No behavior, no problems.
No connections at all yet
No need to check further.
No need to check nParams.
No split DWARF on Darwin.
No, so try to allocate it
Non-optional to optional.
Not needed for the moment
Nothing was stripped off.
Now we can get on with it
ObjC forwards references.
Objective-C "Class" type.
Obtain aggregation object
Ok, we have an alloc_ref.
Okay, everything is fine.
Old fashioned tar archive
Omit needless words stats
Only process store insts.
Only remember the offset.
Open up the generic type.
Open up the witness type.
Optimize overflow checks.
Optimize the constraints.
Optional instance methods
Or it was just too large.
Otherwise kInvalidOffset.
Otherwise return nullptr.
Otherwise, keep scanning.
Otherwise, must be unary.
PERF_TYPE_HARDWARE events
Pack the payload, if any.
Parse Generic Parameters.
Parse a list of SILValue.
Parse a throws specifier.
Parse a unary expression.
Parse function arguments.
Parse the first argument.
Parse the main file last.
Parse the parameter list.
Patch the PC range field.
Per-member field actions:
Perform action un-disable
Perform the lookup again.
Perform the substitution.
Pick up where we left off
Possibly send a response.
Pre-sort the completions.
PreClass::TraitAliasRule.
Print a constraint value.
Print arcs in dot format.
Print the argument names.
Print the header and body
Process the error result.
Punt if path is relative.
Push the current segment.
RENDERINGINTENT constants
RawRepresentable.RawValue
RawRepresentable.rawValue
Re-abstract if necessary.
Re-use an existing thunk.
Reabstract the arguments.
Read the rest of the data
Record return statements.
Record solved constraint.
Record this overload set.
Record this substitution.
Recursively add the child
Register global functions
Reject an empty 'switch'.
Releases are always safe.
Remove elements from key.
Remove trailing semicolon
Replace invalid sequences
Represents the loop nest.
Require a selector match.
Required instance methods
Requires one is attached.
Reset the debug location.
Reset the previous score.
Respond on step out break
Responds to a REPL input.
Retains can move over it.
Retrieve the requirement.
Return this data pointer.
Run high-level loop opts.
Safe to just delete self.
Schedule all jobs we can.
Schema validation options
See longer comment above.
See upload.cpp:read_post.
Self argument mismatches.
Set constructor override.
Set current virtual host.
Set lower bits as needed.
Set the metadata pointer.
Set the state and return.
Set up the result buffer.
Setting up crypto failed.
Should be in the same BB.
Simplify this constraint.
Single-parameter methods.
Size of the offsets array
Skip immediates and defs.
Skip immediates and uses.
Skip presumed whitespace.
Skip the last two checks.
Solve for this component.
Some asserts and tracing.
Specialization Statistics
Split all critical edges.
Split the token into two.
Standard message handlers
Start the validating loop
Store it into the result.
Stores to array elements.
String'ify the arguments.
Substitute into the type.
System functions override
TODO: eliminate all these
TODO: swift_error marker.
Taken: value is not Boxed
Target specific FP types.
Test for read permission.
Test of object_init_ex().
The SILType of the value.
The bit count is dynamic.
The destination protocol.
The passed in SGFContext.
The payload may be empty.
The resolution succeeded.
The rest of the new args.
The semantic value stack.
The two angles are acute.
The type may be optional.
The type must be an enum.
The type of the sequence.
The types are equivalent.
These do prevent removal.
These should be the same.
They are replaced with _.
Thin metatypes are empty.
This composes such a key.
This has two purposes: 1.
This is flow insensitive.
This is potentially dumb.
This is the failure path.
This should be after FSO.
This should never happen.
Transform this type node.
Translation unit context.
Treat signals as timeouts
Trie of stored locations.
Try it as a keyword type.
Try to become the writer.
Tuples preserve variance.
Type-check the 'do' body.
UNumberFormatRoundingMode
Unalign the native stack.
Unchecked casts are free.
Unconditional deprecated.
Uninit is folded to init.
Unix Standard tar archive
Unknown requirement kind.
UnknownCppException class
Unlink backward pointers.
Update `m_blocks' vector.
Update next free element.
Update the aggregate size
Use the generated 86ctor.
Used for auto completion.
Validate the declaration.
Validate the parent type.
Validate the requirement.
Values should be the same
Variadic bits must match.
Verify common invariants.
Visit the next successor.
Visit the sub-expression.
Walk each of the entries.
We are updating SSA form.
We bail out in this case.
We cannot call accessors.
We did not find an entry.
We do have a parent type.
We don't actually use it.
We have a RIFF container.
We have a true successor.
We just ignore them here.
We require substitutions.
We're in a fault funclet.
Weird hacky special case.
Welcome to refcount-opts.
Work around that for now.
Work out start/end chunks
Worse, it may be aliased.
Yes, there is a color map
add a byte for minus sign
add function return value
after bcopy, update count
already set to be dynamic
and erase the allocation.
and replace its uses with
assume minimal collisions
begin standard C headers.
being a Swift extension).
both types are TypeDecls:
c_Vector* or c_ImmVector*
cacheDirectory/ModuleName
cannot allocate new edges
check for defined classes
check the apc string list
class ReflectionTypeAlias
cns() would ODR-use these
code generation functions
colorspace of input image
constants for jddayofweek
constants for jdmonthname
convert it to unsigned d.
copy the old data into it
create an id for the file
delete the ones to delete
directory, like /usr/bin/
don't need to do anything
don't return empty string
dropped if after C else K
end Olympus specific tags
end of scanning one token
erase it from its parent.
error for pixel below cur
error-recovery path, only
extract ones in the array
failed to read statm file
figure out the GMT offset
fixed type from ExtraData
fixed type from ctx class
for xml_parse_into_struct
function entry breakpoint
get raw directory listing
get rid of decimal places
gregorian or julian month
immediate has 32 bits set
import/export ImagePixels
increment cursor position
keep track of last marker
libmemcached result codes
load classes in hierarchy
load the renamed function
make a connection attempt
make sure this sorts last
map the modification type
matches anything penalize
max uppercase match score
might not work for EBCDIC
namespace HPHP::SystemLib
no mapping, so handle raw
no reason to check bounds
normal string: do it fast
not doesn't set any flags
now execute the statement
obsoleted by ExtraSamples
obsoleted by SampleFormat
only return after cleanup
optional time zone minute
options with string value
otherwise we wait for EOM
outside_error may be NULL
parameter was not defined
parse out the IP and port
prevent SCOPE_EXIT sweeps
print path from root to n
process memory statistics
r1,e1 span all of current
register rebind procedure
release(null) is a no-op.
remember first valid char
remember that we did this
replace invalid sequences
ripemd128 initialization.
ripemd160 initialization.
ripemd256 initialization.
ripemd320 initialization.
rotate bounding rectangle
seed segment (popped 1st)
serialize a normal object
set default class members
set hash code range bound
sharing globals is *evil*
skip the .gz file comment
so no resize would happen
so we can dtor this later
sometimes points into rds
space if previous printed
split into surrogate pair
start with max key length
static analysis functions
static or uncounted array
stop skipping 0 for M_COM
suppress all initializers
suspend resumed execution
the timer has gone off...
this is not an error here
this is the child process
this is the first execute
turn into cascaded concat
validation was successful
we botched the k estimate
we want the old behaviour
we're building systemlib.
willBeRelativelyAddressed
zero before decimal point
"VideoDecodeAcceleration",
(buffer, optionalCallback)
+2 removes the "f_" prefix
- unfulfilled requirements
-1 stand for default case.
/ Returns true on success.
/ along some of the paths.
8-bit unconditional branch
@see hphp_switch_to_buffer
A conformance-requirement.
A single tracked location.
Abandon any current cache.
Access locals thru VarEnv.
Add a curried 'self' type.
Add a row for each clause.
Add all the early sources.
Add an expression segment.
Add each of the protocols.
Add the body of a wrapper.
Advance to the next piece.
Allocate the "self" value.
Allocate the 'self' value.
An error-handling context.
Analyze some special cases
Annot_dictionary_get_value
Avoid realloc() most cases
Bad compressed data stream
Bail on multiple payloads.
Bind the associated types.
Boolean is a special case.
Bring the parameter to +1.
Build the ExecutionEngine.
Build the bottom-up order.
Build the cache structure.
Build the field name list.
Bump the generation count.
C::Constant inside a class
Call the destructor method
Calls FunctionReturn hook.
Camel case matched better.
Cast argument if required.
Cast to the function type.
Check a bunch of integers.
Check against the commands
Check environment variable
Check for Infinity and NaN
Check some runtime options
Check the parameter types.
Claim the exception value.
Classify this declaration.
Clear any stored exception
Clear the persistence flag
Client initiated shutdown.
Coerce the index argument.
Collect existential types.
Compare the element types.
Compare tuple expressions.
Compile with main function
Compute the begin/end line
Compute the common prefix.
Compute the declared type.
Compute the edit distance.
Compute the function name.
Compute the function type.
Compute the property type.
Compute the source string.
Compute the substitutions.
Constant fold switch enum.
Construct right-hand side.
Consult the type lowering.
Continue up to the parent.
Conversion to Y,U,V buffer
Convert the subexpression.
Copy the instance pointer.
Copy to the new explosion.
Copyright (c) 1998 Todd C.
Create a set of arguments.
Create the new apply inst.
Create the new link object
Create the parameter list:
Deallocation is also okay.
Debug-only run identifier.
Decompose the application.
Decrement the usage count.
Default to public linkage.
Delete the argument label.
Descriptor for buffer area
Destroy the object inside.
Detect suspicious headers.
Dig out the extended type.
Discard the shifted token.
Do nothing if this is null
Don't diagnose this again.
Done by our system library
Done by the system library
Drill down to make an i8*.
Drop duplicates, except CC
Drops all open connections
Either way, just bail out.
Emit a global declaration.
Emit a load of a selector.
Emit the constructor body.
Emit the dependent rodata.
Emit the inner expression.
Emit the result explosion.
Emit the trap instruction.
Empty option name or value
Empty values don't matter.
Ensure path ends with '/'.
Establish the new context.
Evaluate literal integers.
Everything else is opaque.
Exif Attribute Information
Expand the nassign buffer.
Extract the lazy resolver.
Extract the signal number.
FIXME: Diagnose ambiguity.
FIXME: Drop this protocol.
FIXME: I just made this up
FIXME: Poor location info.
FIXME: Print element expr.
FIXME: This is a fallback.
FIXME: bind the extension.
Fast-path the empty tuple.
Filter out the duplicates.
Find read preferences tags
Find the last preposition.
Find the next combination.
Find the overload for Int.
Find the store instruction
Finds the specified class.
Fold sequence expressions.
Follow this metadata path.
For stubs, just add line 0
Force send to drop a field
Force the import to occur.
Form the error convention.
Form the specialized type.
Forward the context as is.
Found a use of an element.
Free this cursor/link pair
Gather the type arguments.
Get appropriate arguments.
Get the accessor function.
Get the destination block.
Go through the input array
Go through the subregions.
Grab a chunk of the value.
Handle 'int8' and friends.
Handle AnyObject directly.
Handle any decl-modifiers.
Handle arguments' changes.
Handle boolean conditions.
Handle dynamic references.
Handle local declarations.
Handle non-enclosure field
Handle pre-versioned input
Handle suffix expressions.
Hardcoded for destructors.
Hash the supplied password
Helper code ABI registers.
Holds the list of VTables.
IP and port conversion box
IRGen the current line(s).
If found a backreference..
If so, just nuke the type.
If we have any children...
Ignore other declarations.
Ignore the storage address
Ignore unreachable blocks.
Immediately stepping back.
In that case, we just bail
InOut types are invariant.
Initialize line breakpoint
Initialize stack pointers.
Initialize the LSLocation.
Input must be Builtin.Int1
Insert the new decrements.
Insert the new increments.
Install our dyld callback.
Instance computed property
Internal utility routines.
Invalid continuation byte.
Invalid escape, ignore it.
Is this block interesting.
It must be a class method.
It should be never called.
It's an object allocation.
It's just a DI annotation.
It's not a block algorithm
IterNext/IterNextK helpers
Iterator for PHI operands.
Iterator for output string
Its legal to ref a list...
Its not the final release.
Jump to the failure block.
Jump to the func prologue.
Just holders for the value
Just mangle the decl's DC.
Keep track of cold blocks.
LINTED bug in header macro
Last loop to jumpt out of.
Lay out the template data.
Leading separators, if any
Leave room for the header.
Leave the RHS on the stack
Leave the parameter empty.
Left operand is an object.
Let's not blow up our map.
Link float literal tyvars.
Link the standard library.
Load the 'super' argument.
Load the instance pointer.
Look for the builtin name.
Look in the current trait.
Look into children traits.
Look through "a.b" to "b".
Look through lvalue types.
Look through the metatype.
Look through this pattern.
Look up UIApplicationMain.
Lookup hash and destroy it
Loop through the elements.
Lower the formal AST type.
Mangle the name of a type.
Map __attribute__((pure)).
Marks a function as alive.
Match an add 1 recurrence.
Minimize trashed registers
Miscellaneous instructions
Movable, but not copyable.
Move new declarations out.
Move the constraints back.
Name lookup was ambiguous.
New version of subfile tag
Next: ask escape analysis.
No Array object to delete.
No change to the argument.
No need to report symbols.
Non-repo mode unit caching
Not default initializable.
Note synthesized protocols
Nothing follows the number
Now count remaining bytes.
Now find all uses of Call.
Now make the output string
Now sort the group itself.
Objective-C class context.
Objective-C selector type.
Ok, it's a big allocation.
Okay, can't solve forward.
Okay, define the accessor.
Okay, resolve the pattern.
Old version of subfile tag
Only handle integer values
Only the first error is ok
Open session handler first
Options that can be passed
Otherwise, keep searching.
Otherwise, name not found.
Otherwise, return nullptr.
Our parent must be a call.
Outside the cloned region.
PHP Exceptions and Classes
Packet length, main header
Parse 'default' sil-value.
Parse any width specifier.
Parse the 'in' at the end.
Parse the config variable.
Parse the current line(s).
Parse the type annotation.
Parse the type-identifier.
Perform a clear operation.
Perform the modification .
Perform the substitutions.
Populate the lookup table.
Populates `imm' on `inst'.
Pre- and post-allocations.
Prepare for the real work.
Primarily tests iteration.
Print an identifier value.
Project down to the field.
Put in the correct context
Put the result into cache.
Python-style long strings.
Quickly dump HHVM_VERSION.
Reabstraction information.
Read the first path piece.
Record archetype contexts.
Record the interface type.
Record this argument name.
Record this type variable.
Refcount initialized to 1.
Register allocation state.
Register overload choices.
Remember the opened types.
Remove the dead failureBB.
Remove the old constraint.
Remove the prefix, if any.
Remove unreachable blocks.
RequestLocal is too early.
Resolve the optional type.
Restoring previous options
RetC and RetV are special.
Return if already smashed.
Return if we loaded a file
Return last error message.
Return value must be freed
Returned upon end-of-file.
Returns nullptr otherwise.
Run the generated program.
SHA1 basic transformation.
Scan field conservatively.
Scatter the occupied bits.
Score the base name match.
Set the attributes, if any
Set the destination index.
Set the error result slot.
Set the module cache path.
Set the user-defined data.
Set up the cache variable.
Set up the parameter info.
Set/ImmSet, val is the key
Shift the bits into place.
Shift the lookahead token.
Skip all "// CHECK" lines.
Skip fulfilled parameters.
Skip invalid declarations.
Skip most significant byte
Skip the 'self' parameter.
Skip unimplemented method.
Skips leading underscores.
So skip over any of those.
Software written by Ian F.
Sort out the requirements.
Sort the types in the set.
Specializations are below.
Specifically imagine this:
Start with a base benefit.
Steps over function calls.
Store it as properties too
Sync the translator state.
Synthesize the getter body
Synthesize the setter body
TODO(stephentu): constants
TODO: Array index overflow
TODO: Should be a SILType.
TODO: Strengthen analysis.
TODO: This is an atrocity.
TODO: get rid of "bogus"..
T_CONSTANT_ENCAPSED_STRING
Taken: Property is Uninit.
Taken: tvRef isn't Uninit.
Test for write permission.
Thanks to "Super Pikeman."
Thanks to Frank Warmerdam.
The Array may escape here.
The algorithm is based on:
The array allocation call.
The array does not escape.
The location is untracked.
The longest anonymous name
The non-polymorphic types.
The old branch is deleted.
The other cases are empty.
The payload size in bytes.
The rest we'll just count.
The source type is 'BOOL'.
The source type is 'void'.
The symbols being reduced.
The top-level entry point.
The uncurried input types.
Then if we have an enum...
Then perform the dataflow.
There is a self-recursion.
Therefore we do it lazily.
These don't actually work.
This cast is always false.
This continuation matched.
This exact cast will fail.
This is a handled context.
This is a singleton class.
This is over-conservative.
This is the first 64 bits.
This should be unreachable
This shouldn't be reached.
Try HHVM_REPO_CENTRAL_PATH
Try to consume a bareword.
Try to grab the breakpoint
Try to handle the command.
Tuple elements must match.
Type check the expression.
Type-check the expression.
UNumberFormatTextAttribute
Un-disable builtin wrapper
Unbias by subtracting one.
Unconditional unavailable.
UnknownCppException object
Unwrap ObjC class objects.
Update the dominator tree.
Use default glob semantics
Validate the capture list.
Variables, null if unused.
Vector instruction helpers
Visit each of the members.
We can't do bridging here.
We don't support this yet.
We ignore retains of self.
We won't need them anymore
We'll indent with 4 spaces
We're out of note headers.
We've hit the result type.
When we get it, return it.
Will be set by LdObjMethod
Work out number of chunks.
Write out the frame's info
Write the body parameters.
Write the standard header.
X-scaled Sinc(x) function.
XXX line numbers are bogus
XXX this should be dynamic
YYLOC is available though.
You can set it afterwards.
ZF, SF, PF set accordingly
abcdefghijklmnopqrstuvwxyz
active (normal) connection
already copied srcPosBytes
and 6 stands for Saturday.
assuming we are in "catch"
beginning of action switch
block further optimization
both types are ValueDecls:
build the array of objects
cheap enough, do it always
check if match is a suffix
class AsyncMysqlConnection
class ImagickPixelIterator
class ReflectionFuncHandle
cleanup our temp variables
close() may call destroy()
connecting to the database
constructor and destructor
convert Vptr to MemOperand
copies will go at end of b
copy doesn't set any flags
count does not include NUL
create MongoBinData object
cross the context boundary
else, we're done with meta
end user quitting debugger
entry and update the cache
exception are IFD pointers
execute serverside command
expand to 1 byte per pixel
fill up the WBMP structure
first case-sensitive match
floating-point conversions
if PHP_FILEINFO_UNCOMPRESS
if subject is not an array
implementing PageletServer
includeInaccessibleMembers
instance for empty matches
invalid compression format
let's quote all the values
lint doesn't need analysis
make sometypes and objects
malloc alignment guarantee
map the buffer to a block:
match against relative url
match the behavior of PHP5
maximum code, given n_bits
may need more than 16 bits
may reenter for __destruct
memory-register operations
mode flags for opening fds
motorola is easier to read
need to test multiple bits
next expected param number
no ctor no args is also ok
no decimal point was found
no matches, token required
non-free nodes in the heap
not doesn't set any flags.
number of candidate colors
only the 1st chunnk got it
options with boolean value
others (treat as a string)
parse the data source name
passive connection handler
proceed to remaining data:
read all the app markes...
region with a whole method
register-memory operations
release xincnode if unused
resolveVmInclude callbacks
return the wrapper for it.
return val should be array
returns FAILURE on failure
scan for recursive objects
set default timeout values
sets the ftp transfer type
single register operations
skip uninteresting fields.
skipping the padded spaces
some clocks do weird stuff
space padding, the default
split and decode the query
stable_maps is meaningless
static array initilization
static or uncounted string
still zero iff exact match
strict after the open tag.
trivial for packed arrays.
try to get from _GET/_POST
tweencolor cache functions
type for top-level pointer
type, protocol conformance
underlying file descriptor
use token where applicable
validate input parameters.
verification is turned off
walk the oauth param names
we remove the dead stores.
where Self : SomeProtocol`
will warn/fatal at runtime
wrong image file signature
'-code-completion' options.
'-syntax-coloring' options.
'zperiod' (the z is silent)
- the rest of the arguments
- upcasts from an archetype
/ / Returns false on error.
/ Does not crash by itself.
/ code generation functions
// this is the new EndBlock
32-bit unconditional branch
@objc class types are okay.
A +/- character is allowed.
A Cosine windowing function
A class for loadable types.
A non-throwing autoclosure.
A reference to a subscript.
A value loaded from memory.
A width value was supplied.
Absorb boolean comparisons.
ActRec is torn down as well
Add a value witness marker.
Add an entry to the vtable.
Add inherited conformances.
Add the converted argument.
Add the domain error member
Add to the end of the list.
Already setup for this key.
Also, today's epoch, 1 A.D.
An entry in the input array
An indirect function value.
Annot_dictionary_get_string
Array for named subpatterns
Array of subpattern offsets
At the moment, I am unsure.
Attempt to parse the input.
Autorelease a return value.
Bind polymorphic arguments.
Bind the generic arguments.
Break intentionally missing
Build a name for the thunk.
Build the block descriptor.
Build the member reference.
Build the parent hierarchy.
Build up the conflict sets.
Bump the current X position
Byte order is little-endian
Call the mutable addressor.
Canonicalize the signature.
Cast to Builtin.RawPointer.
Certificate Signing Request
Check RHS in getter context
Check all overridden decls.
Check array semantic calls.
Check each of the elements.
Check for associated types.
Check if data field exists.
Check if the site is valid.
Check if we have a CDF file
Check if we have a tar file
Check protocol conformance.
Check type metadata records
Check whether it is 'Self'.
Checking configure timezone
Clear any previous setting.
Coercions to function type.
Collect the witness tables.
Collections are not allowed
Combine adjacent Req nodes.
Compiled regular expression
Compute the interface type.
Configure a default target.
Connect to a remote address
Constants for curl_setopt()
Consuming would be a no-op.
Content of note is always 0
Context sensitive keywords.
Context-sensitive keywords.
Convert the argument names.
Convert the int to a string
Convert the type arguments.
Copy the list of protocols.
Count the number of digits.
Create a compiler instance.
Create intermediate result.
Create the access function.
Create the expression node.
Create the forwarding stub.
Create the global constant.
Create the global variable.
Create the invoke function.
Create the no-member block.
Create the target instance.
Current match for a backref
DebuggerHook implementation
Decode Unicode identifiers.
Decoding value of parameter
Default to standard output.
Detach from the old sandbox
Diagnose C style for loops.
Diagnose this specifically.
Dig out the argument tuple.
Direct reference to a type.
Do a double word increment.
Don't erase it in that case
Don't sleep too frequently.
Don't walk into statements.
Done, break out of for loop
Doubles always stay doubles
Drill down to make an i16*.
Drill into the result type.
Drop top-level module name.
Easy case: the types match.
Eat attributes, if present.
Either way we skip over it.
Embed command-line options.
Emit a "sentinel" location.
Emit a specific diagnostic.
Emit reffiness predictions.
Emit the C function pointer
Emit the error destination.
Emit the existential value.
Emit the fully-formed call.
Emit the metatype argument.
Emit the throw destination.
Emit the unpin immediately.
Empty result, don't add it.
Encode the filenames first.
Ensure that vmfp() is valid
Enum case constructor call.
Enum request local wrappers
Eval stack use information.
Evaluate a Boolean literal.
Everything else is trivial.
Everything else returns ().
Exact match is always okay.
ExnNode ids are contiguous.
Explode the direct results.
FIXME: Add proper location.
FIXME: Bogus location info.
FIXME: For mapTypeInContext
FIXME: Move to an LLVM API.
FIXME: Need error-checking.
FIXME: This is inefficient.
FIXME: this is inefficient.
Fetch the value separately.
Field reading functionality
Fill in the Elements array.
Fill in the type and value.
Finally delete the closure.
Find Id for the given name.
Find array object lifetime.
Find back edges in the CFG.
Find last attribute in node
Find the bit count, if any.
Find the chain for the key.
Find the library intrinsic.
Find the named requirement.
Find the start of the year.
Find the type we bridge to.
First specialize user-code.
First time that it crashed.
Flip args and do the above.
Fold comparison predicates.
For each successor of BB...
Force send to drop a field.
Fork off the parent process
Form the argument patterns.
Form the method_t instance.
Form the result and return.
Forward propagation failed.
Forwarding implementations.
Free the variable metadata.
Function argument handling.
Function is not definition.
Gather up all Values in Fn.
Get sun up/down and transit
Get the correct stack frame
Get the intrinsic function.
Get the messenger function.
Get the protocol reference.
Handle member initializers.
Handle properties directly.
Handle variadic parameters.
Hoist globals out of loops.
If OK1 is unset, ignore it.
If inlining was disabled...
If not, diagnose the error.
If so, propagate the sugar.
If so, we can zap the pair.
If we can, return No Alias.
If we don't have one, bail.
Import each of the members.
Import the underlying type.
Includes both iOS and TVOS.
Infer requirements from it.
Init the last_sample in tsc
Initialize buffer pointers.
Initialize code completion.
Insert our custom init body
Instruction is unreachable.
IntegerLiterals are signed.
Invariant: S is even-sized.
It consists of three parts.
Just bail and return false.
Just don't claim the value.
Just replace the base name.
Lazily create EntryPointFn.
Leave at 0x00 for releases.
Left operand is a resource.
Length of the current match
Length of the function name
Linear lookup here is lame.
Link string literal tyvars.
Load a loadable data value.
Load the destination value.
Look for an existing entry.
Look for module references.
Look through an inout type.
Look through pointer types.
Look within a type context.
MD4 block update operation.
MD5 block update operation.
Make sure that we are safe.
Mangle a list of protocols.
Map __attribute__((const)).
Marks flexible array field.
Mask out the selected bits.
Match array semantic calls.
Maximum salt string length.
Merge the data flow states.
Multiply a fixed by a fixed
Must be 'const' or nothing.
NULL is automatically added
Never walk into statements.
No bb args should be passed
No change to src necessary.
No simplification happened.
No special treatment needed
No witness for typealiases.
Nodes in the RC flowgraphs.
Non-zero on any differences
Normal function references.
Not a protocol conformance.
Not a valid start character
Not localhost or empty host
Now get dynamic properties.
Now try to break the cycle.
Number of spill slots used.
Only parameter adjustments.
Only record non-local USRs.
Only thread 'small blocks'.
Options passed to pcre_exec
Order of subpattern matches
Otherwise it returns false.
Otherwise, add a new entry.
Otherwise, stop traversing.
Otherwise, we're canonical.
Output must be Builtin.Int1
Override an existing method
ParamDecls never get PBD's.
Parse an optional modifier.
Parse the basic block list.
Parse the body of the file.
Parse the first expression.
Parse the parameter clause.
Parse the parameter-clause.
Partial application thunks.
Pass down the error result.
Pass the generic arguments.
Pop the blocked dependency.
Prepare for the next round.
Pretend it's a bit shorter.
Print a field with a value.
Print all the blocks first.
Print the type of location.
Process UserComment in IFD.
Process string values only.
Process the names we found.
Process the self parameter.
Promote memory to registers
Propagate it to the in set.
Prospectively add a source.
Protocol types are nominal.
Push a mode onto the stack.
Push new activation record.
Raises an error on failure.
Re-enter the lexical scope.
Reabstract it if necessary.
Read all trailing elements.
Record Objective-C methods.
Record inherited protocols.
Record releases of the box.
Record stores into the box.
Record the diagnostic info.
Record the name of a block.
Recover the decl reference.
Recursively write the child
Register Swift Only Passes.
Register the memory buffer.
Remove args from the block.
Replace DefLabel with Mov's
Reset the inverse color map
Restore Content-Type Header
Restore the debug location.
Retain 'self' if necessary.
Retain the end of the file.
Retrieve the argument name.
Return EOF for end of file.
Return the element layouts.
Return the length of YYSTR.
Return the operand we wrap.
Return undef for dead node.
Reuse same temporary array.
Row-major ever since gd 1.3
SPARSECOLORMETHOD constants
SSL config for this request
Same-order combining marks.
Save the transparent color.
See also tvDupFlattenVars()
See comment in addMethod().
See if this can be removed.
Selector for error message.
Serialize 'use' parameters.
Serialize compiler instance
Server shutdown - Explained
Set run status to STOPPING.
Set the constructor's type.
Set up the 'self' argument.
Set up the load forwarding.
Set up the necessary values
Setup the variable exporter
Shutdown the server socket.
Silently ignore it for now.
Single code point matching.
Skip global init functions.
Skip non-uppercase letters.
Skip to next top-level test
Skip: 'e' encoding 'v' str.
Slice the spare bit vector.
So we really need the copy.
Solve the dataflow problem.
Special internal orderings.
Specialize going bottom-up.
Splice it out of the chain.
Start another mangled name.
Start of option with offset
Store location information.
Store the extra inhabitant.
Store the function pointer.
Store the instance pointer.
Substitute the replacement.
Suspend the async function.
TODO: Randomize the filler.
TODO: Static functions too.
TODO: swift_context marker.
Taken: global doesn't exist
Taken: src is not an object
Test Object cast operations
Test erase(iterator) method
That's not what clang does.
The JumpDest must be valid.
The allocator we are using.
The combined READER/HANDLER
The llvm IR did not change.
The name must not be empty.
The name of a typedef-name.
The number of payload bits.
The pseudomain comes first.
The solution is incomplete.
The summary for a function.
Then renumber integer keys.
Then we can reuse the work.
There's no need to copy it.
There's no pattern to link.
They're insignificant here.
This deletes the breakpoint
This is a fast-patch check.
This is a local allocation.
This is an implicit getter.
This is to get DV funclets.
This matches zend behavior.
Thread local config options
Transform a function value.
Transform a metatype value.
Trivial case: empty string.
Try to desugar one level...
Try to position this field.
Tuple-to-scalar conversion.
Type-check the case blocks.
Type-check the clause body.
Type-check the initializer.
Update names and locations.
Use SILOneTypeValuesLayout.
Use memcpy if that's legal.
Use the pointer not the obj
Variable used in pseudomain
Wagner All rights reserved.
Wait for sem 1 to be zero .
Wait for the pid to be set.
We can forward to this use.
We can see all the callees.
We can't inline FCallArray.
We don't check doubles yet.
We don't cross the streams.
We found the same solution.
We have a persistent Class.
We have a type constructor.
We have an indirect schema.
We have to be careful here.
We need signed shifts here.
We only accept single uses.
We only handle those cases.
We splitted critical edges.
We use -1 as an invalid id.
We walk through statements.
We'll rebuild it on demand.
We'll split the edge later.
Where the new search starts
Wire up the Clang importer.
Written 2004, Phil Knirsch.
__attribute__((deprecated))
__attribute__((unavailable)
add the header to the hash.
after modifiers comes width
allocate a database handle.
and a minus sign, if needed
any other event is an error
argument tuple, result type
arm64 requires ISA-masking.
both servers have to finish
break intentionally missing
break missing intentionally
break omitted intentionally
breakpoint could be deleted
build environment pair list
but if it does, use stderr.
but sometimes there will be
by the Gregorian calendar).
case FIELD_TYPE_NEWDECIMAL:
case MYSQL_TYPE_NEWDECIMAL:
check each element in tuple
check for empty private key
check for username:password
check if it is a replicaset
check time zone offset sign
class AsyncMysqlErrorResult
class AsyncMysqlQueryResult
class AsyncMysqlRowIterator
class name with PHP keyword
compare element numerically
constructors and destructor
convert from decimal to int
copy doesn't set any flags.
create regex pattern buffer
create the background color
didn't find boundary, abort
drop the message into place
e.g., defined("self::ZERO")
enable data conn encryption
fetch one row of the cursor
filename is the actual data
find the entry in the array
function/method declaration
happens with optional types
header length isn't tracked
http authentication options
ignore if s or d is nullptr
immediate-memory operations
implementing RequestHandler
instantiation of ICU object
int literal symbolic flavor
intentionally not returning
invoking a file through rpc
just call addslashes quotes
length of evaluation stack.
m_savedRip will point here.
make sure not sign-extended
matched it and printed type
might be a non-static call.
no more command can come in
not found (i.e., undefined)
now for the signature stuff
number of keys and elements
only one cursor to be freed
optional objc class methods
or const char * is not safe
out of range for timestamps
output im must be truecolor
parse commandline arguments
place it at the successors.
private helper for getClass
process the remaining bits:
query matches native syntax
rAsm is a scratch register.
re-enters on CountableClass
re-merge of all pred states
replace sufix with wildcard
required objc class methods
requires rcid to stay live.
retrieve info about columns
session will handle locking
short version string length
skip the original file name
so can index -MAXJSAMPLE ..
so point to rightmost pixel
so pointer math below works
start value for TSC counter
still dealing with a group.
succeeded, notify condition
suppress assert in setClass
to the current instruction.
traced too many exact ptrs.
translated path of the file
treatRequirementsAsExplicit
try to avoid breaking words
unload prev errs into array
unregister rebind procedure
up to 64 codes on the stack
use AEmpty if you want that
use wid for vertical stroke
we are completely hosed now
we can create an io context
we prefer to rewrite it to:
we won't use per-row status
we're not switching threads
zend does this, so so do we
(value)  or (value, indices)
/ / Returns true on success.
/ The level of loop nesting.
A cached dominance analysis.
A crash occurred previously.
A representative of the set.
Accessor methods to globals.
Actually import the methods.
Add constraints accordingly.
Add imports to the worklist.
Add the 'dynamic' attribute.
Add the Set to the callback.
Add the guard to the SrcRec.
Add the stderr to the output
Advance over this immediate.
Allocate a new ProtocolInfo.
Allocate space for the args.
Also frees con_error_message
Analyse one instruction wrt.
And Other is also nominal...
Argument to pass to function
Async functions instructions
Begin with the 'self' value.
Bind type metadata for Self.
Block and function pointers.
Both types are not optional.
Both types need to be valid.
Break up the source r-value.
BreakIterator parts iterator
Bump up refcounts as needed.
Busy loop for 5 miliseconds.
But propagate the error bit.
Bytecode-level control flow.
Call the native entry point.
Can't handle unknown values.
Capture the atom if desired.
Cast the value if necessary.
Casts to concrete metatypes.
Changed by gzdecode(), sigh.
Changed by gzencode(), sigh.
Check all parameter effects.
Check array bounds semantic.
Check for unknown arguments.
Check if `calleeAR' was set.
Check if the inputs changed.
Check if there's any parent.
Check if we have a raw spec.
Check non-type requirements.
Check protocol conformances.
Check the conformance below.
Check the stored properties.
Check the type of the array.
Checking functions whitelist
Claim the next inner result.
Clang is currently broken...
Clear out result parameters.
Clear the extra-lines buffer
Clone the generic arguments.
Closures are the specialest.
Coerce to the property type.
Collect the selector pieces.
Come up with a shorter name.
Commonly-used Clang classes.
Compare the extracted values
Composite Operator Constants
Compute the underlying type.
Configure the module passes.
Conservative scan everything
Construct an archetype call.
Construct the TypeRefBuilder
Consume a comma to continue.
Consume the first semicolon.
Control flow insensitive vs.
Conversion to number failed.
Convert a weak storage type.
Copied from upstream's libgd
Copy in interface constants.
Copy the address-only value.
Copy the source if we can't.
Count of matched subpatterns
Create a continuation block.
Create a new empty function.
Create an empty hash object.
Create an uncompressed file.
Create prologue when calling
Create the Generator object.
Create the global mcg object
Create the has-member block.
Create the no-member branch.
Create the return statement.
Create their prototypes now.
Custom request local globals
Darwin uses Objective-C ARC.
Debug output for Explosions.
Destination is palette based
Destructure original tuples.
Destructure tuple arguments.
Detect self-recursive calls.
Determine the substitutions.
Diagnosed at the call sites.
Did not find .mgc, restore q
Disallow mutableAddress+set.
Dispatching will consume it.
Do initial permutation (IP).
Do the pre-order visitation.
Do these in a separate pass.
Does not have accessibility.
Emit a call to an addressor.
Emit a call to swift_retain.
Emit the RECORD_DIAG record.
Emit the continuation block.
Empty whitespace-only input.
Encrypt the key with itself.
End with xdebug_stop_trace()
Enum elements require names.
Everything else is a method.
Expand the indirect results.
Export for the admin server.
FIXME: Ambiguity resolution.
FIXME: Dig into the pattern.
FIXME: Handle errors better.
FIXME: Implement cancelling.
FIXME: Other decl types too.
FIXME: SDK overlay semantics
FIXME: This could be lazier.
FIXME: clang source location
FIXME: support 'inout', etc.
Failed to write file to disk
Favor types, as appropriate.
Fetch the error result slot.
Filter out global variables.
Find the conformance record.
Find the generic parameters.
Find the mapped instruction.
First check for a self-move.
First handle the tuple case.
First synchronize registers.
Fixed by Mao Morimoto 2.0.16
Flags liveness optimization.
Follow the superclass chain.
Form the block on the stack.
Form the bound generic type.
Form the type of the getter.
Form the type of the setter.
Function arguments are safe.
GEP to the appropriate slot.
Gather all of the protocols.
Get the actual class object.
Get the current line number.
Get the field offset vector.
Get the loop exit condition.
Get the sub-initializations.
Get the type of the witness.
Global registry for wrappers
Global, non-disabled wrapper
Handle all other references.
Handle do/catch differently.
Head of this Interval chain.
ICU shallow clones the UText
INFRINGES ON USER NAME SPACE
If it is not a load, bail...
If so, it does not conflict.
If there is a class, use it.
If we are not a subregion...
If we are not trivial, bail.
If we fail to load it, bail.
If we have a nominal kind...
If we have a retain value...
If we know the ID already...
Ignore removed instructions.
Ignore stub implementations.
Ignore unacceptable entries.
Illegal use of this function
Import the enumeration type.
In all other cases, use tcT.
Include const, volatile, etc
Increment profiling counter.
Indent two spaces per depth.
Index of phi group metadata.
Initialization and shutdown.
Initialize the response node
Insert copies inside blocks.
It is only used for sorting.
It loses source information.
It might get replaced later.
Items with string arguments.
Iterate until a fixed point.
Iterative forward data flow.
Just add the suffix back on.
Keep expanding the location.
KindOfObject (specific type)
Language-specific filtering.
Leave the scope immediately.
Length of replacement string
Let the debugger initialize.
Link integer literal tyvars.
Load the protocol reference.
Localize the address access.
Look at method entries only.
Look for a generic function.
Look for the first phi hint.
Look through local contexts.
Look through optional types.
Look up the global variable.
Look up the static property.
Look up the types to verify.
Low-level receive functions.
Main loop to read CSV fields
Make sure we have a delegate
Make terminator unreachable.
Make the given name private.
Map it to a contextual type.
Match a storage requirement.
Match get_element_addr call.
Match initialization stores.
Match up any named elements.
Metatypes preserve variance.
Move index to genericParams.
NULL-terminate modifications
Need some type of error here
Need to have a matching 'f'.
Next, the generic signature.
Next: Property isn't Uninit.
No digits have been scanned.
Not exposed in header files.
Notify the callback, if any.
Notify the constraint graph.
Now bridge the return value.
Now build the character set.
Number of intervals spilled.
Number of uses of each Vreg.
Objective-C object pointers.
Obtain the current thread id
On failure, jump to BreakBB.
Only handle innermost loops.
Optionals preserve variance.
Other classifications below.
Otherwise, any type is fine.
Otherwise, create a new doc.
Otherwise, create the module
Otherwise, rebuild the type.
Otherwise, return the index.
Otherwise, sort by protocol.
Pack the extra bits, if any.
Parse the 'super' reference.
Parse the closure arguments.
Perform register allocation.
Perform the RRNOptimization.
Perform the second pass now.
Perform the traditional CSE.
Pop off the null terminator.
Pop off the top of the list.
Pop the next parameter info.
Position of this use or def.
Powers of two are not biased
Preallocate sort keys buffer
Prefix: remove the ++ or --.
Prescan some rows of pixels.
Previous RBP is at CFA - 2 .
Previous RIP is at CFA - 1 .
Print a type variable value.
Print it to the output file.
Process basic blocks in RPO.
Produce the multibyte output
Project down to the buffers.
Public is always accessible.
Pure-ObjC existential types.
Push uninitialized instance.
Reabstract the result value.
Read inherited conformances.
Read it back from the cache.
Read the generic parameters.
Read through some attributes
Record the error convention.
Recurse into optional types.
Recurse into the superclass.
Redundant keyword arguments.
Release the provider handle.
Remove the closure argument.
Remove the setter attribute.
Resolve the protocol's type.
Restructure tuple arguments.
Retrieve the selector piece.
Return newly allocated color
Return the expression value.
Return the forwarding value.
Return value from evaluation
Return value symbolic flavor
SHA1 block update operation.
SHA256 basic transformation.
SHA512 basic transformation.
Same conditions should hold.
Scan a floating point number
Search among the references.
Section Filters Declarations
See also tvDupFlatternVars()
See if this is a type alias.
See note in debugger-hook.h.
Set defaults from config.hdf
Set the body of the closure.
Set the current line number.
Set the kind of initializer.
Set the type on the pattern.
Set the typo-corrected name.
Set up the first two fields.
Shared ref to keep us alive.
Short-circuit other commands
Should never be polymorphic.
Shut up the compiler warning
Skip non-apply instructions.
Skip non-named declarations.
Skip over inout expressions.
Skip over trailing closures.
Skip past unrelated retains.
Skip unfulfilled parameters.
So we follow the link again.
Some unique global pointers.
Specifically skipped/avoided
Start of the next iteration.
Stop and destory this proxy.
Store the context arguments.
SyntaxSugarType derivations.
TODO: Check for a type here.
TODO: They don't have to be.
TODO: handle resilient types
TODO: namespace isn't stored
T_FUNCTION related functions
Terminate loop in recursion.
Test copy constructor method
Test for execute permission.
The backtick is punctuation.
The call/function can throw.
The character is lower case.
The character is title case.
The character is upper case.
The class cannot be generic.
The current piece of subject
The index of the target row.
The initial buffer size is 0
The locals are already gone.
The main REPL prompt string.
The main loop for this pass.
The operand is an alloc_box.
The original parameter type.
The payload is address-only.
The release side of this is:
The selectors must coincide.
The type can be polymorphic.
The type of the initializer.
The user marks a dependence.
Then erase this instruction.
Then we can make it fragile.
There is a must alias store.
There is no KindRefVarParam.
There is nothing more to do.
There must be enum elements.
These don't prevent removal.
They must all have keywords.
They should be the same now.
This can cause side effects.
This check will always fail.
This is a Swift to ObjC cast
This is not a compound name.
This is not an optimization.
This method is from a class.
This vtable has no contents.
This was a module reference.
Title: Affine transformation
Transform the error pattern.
Translate the result values.
Treat null as an empty path.
Trust an explicit attribute.
Try the specific type first.
Try to convert to a pattern.
Try to delete dead closures.
Try to find the cached file.
Try to open the output file.
Try to simplify the argument
Tuple elements are siblings.
Type check a parameter list.
Type sugar for dictionaries.
Types never refer to 'Self'.
U8_NEXT would increment this
UNumberFormatStyle constants
Unambiguous top level decls.
Unflag ourselves as waiting.
Update AsmState accordingly.
Update dominator information
Update native stack pointer.
Update the cache and return.
Use flag for each registers.
Used to walk the code string
Uses SILOneTypeValuesLayout.
VIRTUALPIXELMETHOD constants
Validate the representation.
Validate the resulting type.
Var doesn't affect the type.
Variables are imported as...
Visualize the Unicode string
We are doing the actual DSE.
We can be fairly smart here.
We can just drop Any values.
We can't fix this situation.
We can't simplify this away.
We could not prove anything.
We don't do stack promotion.
We don't know what happened.
We failed to prove anything.
We may want to revisit this.
We print tuples as "(x, y)".
We were called via re-entry.
We'll relex from that point.
We've reached a fixed point.
When we have something like:
Write to the tail component.
XDebugCommand implementation
YYNRULES -- Number of rules.
YYSTR is taken from yytname.
Yes, this should be an array
Zap all of the instructions.
address within callee's body
address within caller's body
after argnum comes modifiers
allocate and bind the buffer
assuming syncvmsp uses lea.d
attaching to default sandbox
begin in header parsing mode
both parts will be non-empty
buffer for IPC_STAT, IPC_SET
calculate length after match
check EH regions and targets
check for dynamic properties
check for login and password
check if length is too large
class ReflectionTypeConstant
code that breaks a block ...
concatenation and increments
current error or pixel value
defined in ext_simplexml.cpp
do not inform about in debug
do not recompute length here
each byte is " xx" (3 chars)
expecting a non-encoded word
expecting an encoded portion
expose the mysql field types
fallthrough for a normal obj
handled by KindOfIfStatement
helper for getReturnTypeText
hidden in ext/ext_sqlite.cpp
included for future-proofing
includes mail.h and rfc822.h
includes zlib.h and setjmp.h
information and calculations
initialise MIME type to none
initialize the tzinfo cache.
iter should now be exhausted
localizes all the field info
m_documentRoot is a bitfield
make a copy of the substring
metatype (which may be thin)
no clue about it, use it raw
no interpolation needed here
node has been visited before
non-spec code for PHP errors
nop if already called before
normal text without encoding
not allowed, so fall through
not counting null terminator
not marked mayhavesideffects
not processing any requests.
not sure, if we need this...
not used for string switches
now enable ssl if we need to
now visit the remaining ones
only need to do this once...
otherwise populate post data
overwrite jmp with copy of s
pop caller's return address.
protocol conformance, entity
quick test whole path exists
register-register operations
remove the possible leftover
replace the old popular API.
replaced by a memory buffer.
required by emitInterpRet():
restore value inferred above
return the wrapper for that.
routines to handle JPEG data
run the full blown machinery
shift the extra to the front
skip next if carriage return
something we didn't think of
successfully read statm file
take a byte from the source:
this Vptr doesn't need patch
this is for sure not allowed
this means string, not array
this used to be "metachar.h"
translate "self" or "parent"
trying to compute the length
type, protocol name, context
unable to create class entry
use UTF-8 mapping from ASCII
use pclose instead of fclose
v29 reserved for Vxls::m_tmp
walk up the class hierarchy.
we may have shifted to align
we might be at tok::eof now.
x86-64 requires ISA-masking.
xpath query from xpath_array
"JavaVM", "Kerberos", "LDAP",
(See below for more details).
(This is fixed in gcc 4.8.5.)
*Release/*Retain/*Autorelease
, llvm::Linker::DestroySource
/ / TODO: Move this to Utils.
2-DO: check splitting at phis
2.0.9: fixed by Thomas Winzig
A flattened list of l-values.
A lookup map for value decls.
A more complex iteration test
A reference to a declaration.
Activate the destroy cleanup.
Actual T_ELSEIF, continue on.
Add a call site to the curry.
Add a member to this context.
Add all the subpatterns to it
Add an entry to this context.
Add conformance requirements.
Add fix-it to insert ".self".
Add it to our call site list.
Add the 'rethrows' attribute.
Add the argument to our list.
Add the same-type constraint.
Add this binding to the diff.
Add this element to the list.
Additional delimiter argument
Adjust the start of the year.
All of this is autogenerated.
Allocate and project the box.
Allocate the result set array
Already matching (no labels).
Also for getting bulk fixits.
Always allow mismatches here.
Analysis passes will be kept.
Apply attributes to the type.
Arch-dependent stack pointer.
Ask the TaskQueue to execute.
Avoid possible race condition
Build the case type accessor.
Build the final results view.
Build the nested types array.
Cap to prevent insane things.
Capture match offsets: yes/no
Case on the type for the rest
Change the state and iterate.
Check each method for a match
Check for key buffer overflow
Check for old-style whitelist
Check for unsupported options
Check that we have a payload.
Check the declaration itself.
Check the parameter patterns.
Class maps to AnyObject.Type.
Classes conform to AnyObject.
Clone the blocks in the loop.
Collect the captures, if any.
Colorize the response output.
Compute the set of solutions.
Consider this simple example:
Constant fold function calls.
Construct the list of inputs.
Construction and destruction.
Consume the second semicolon.
Continue with the fixed type.
Convert the check into a Jmp.
Copy pointers to the results.
Copy remaining data to buffer
Copy the temporary into Dest.
Create a binary and function.
Create a reabstraction thunk.
Create epilogue when calling.
Create new metadata to cache.
Create the archetype builder.
Create the associated action.
Create the has-member branch.
Create the new function type.
Create the set of properties.
Create the substitution maps.
Create tmp server definitions
Dbgp Header for sent messages
Decompose parallel structure.
Decompose the initialization.
Demangle the basic type name.
Destroy the value indirectly.
Determine the parameter type.
Diagnose a potential witness.
Diagnose each of the matches.
Diagnose the duplicate value.
Different, cleanup and ignore
Dig out the Objective-C type.
Dig out the class definition.
Do a lookup in this protocol.
Do it conservatively for now:
Does not skip any whitespace.
Doesn't look like text at all
Don't walk into nested decls.
Double quoted '"' string ends
Drop 'noreturn' and 'throws'.
DummyTaskQueue implementation
Dump human-readable bytecode.
EAM   - It's worse than that.
END Facebook: json_utf8_loose
EOF during the string throws.
Edge forward in the string...
Emit the first level of call.
Emit the member initializers.
Emit the release immediately.
Emit the runtime "once" call.
Emit the specific class test.
Enter a break/continue scope.
Enter the continuation block.
Enums do not alias non-enums.
Explicitly disabled inlining.
Expressions that wrap lvalues
Extend the stack our own way.
External aggregate statistics
Extract application argument.
Extract application function.
FIXME: Canonical equivalence.
FIXME: Emit candidate set....
FIXME: Enable this assertion.
FIXME: Handle all attributes.
FIXME: Remove dummy argument.
FIXME: Report the diagnostic.
FIXME: This is an awful hack.
FIXME: This is an error path.
FIXME: Use mongo_methods here
FIXME: matched ranges output.
FIXME: popular/unpopular API.
FIXME: print guard expression
Facts about a specific block.
Fast-path check for equality.
Finally, decref the old value
Finally, we pad on the right.
Find all IncRefs in the unit.
Find or create the best match
Find the builtin "once" call.
Find the canonical protocols.
Find the set of loop headers.
Find two types that conflict.
Finish whatever is left over.
First look for an exact match
First, check for an accessor.
First, lower the method type.
First, the formal parameters.
Flush the final conformances.
Folding JmpZero and JmpNZero.
For HHBBC to invoke builtins.
For each instruction in BB...
For now just be conservative.
For now just throw that away.
Force null-termination at MAX
Force the value we will test.
Form a full tuple expression.
Free the already existing one
Function has WSDL description
GNU Unix Standard tar archive
Generate or use a private key
Generate the entire C++ file.
Get current dominating block.
Get the 'self' decl and type.
Get the (sub)module to print.
Get the last induction value.
Get the next execution offset
Give up if it's not a string.
Global type aliases are okay.
Grab and 0-index the end line
Grab caller info from ActRec.
Grab the current projections.
Grab the parent of this node.
Grab the thumbnail, corrected
HAVE_SNAPPY / NZLIB functions
Handle complete name matches.
Handle custom accessor names.
Handle each of these in turn.
Handle one file or directory.
Handle protocol compositions.
Handle recursive inheritance.
Handle return value's change.
Hex literals shouldn't match.
Highlight the whole operator.
Hoistable check instructions.
Hook called on function exit.
However, it is not identical.
If all went well, we're done.
If calling a static method...
If offsets should be captured
If so, diagnose them as such.
If the denominator is zero...
If the names match, continue.
If there is a name, print it.
If we didn't find anything...
Ignore empty specializations.
Ignore non-type declarations.
Immediately stepping forward.
Implementing HttpTransport...
Implies HasDependentMetadata.
Import parameter constraints.
Import the Clang declaration.
In that case, reset the type.
Increment aggregation metrics
Initialization and execution.
Initialized by RuntimeOption.
Instantiate template members.
Introduce a new overload set.
Is this use outside the loop.
Items with version arguments.
Iterate over all AST modules.
Just branch on the condition.
Just emit a let with cleanup.
Just emit its value directly.
Just return the existing one.
LLVM's ABI rules for I.O.U.S.
Last unhandled case: strings.
Legacy optimization functions
Let the empty rule remove it.
Lifted from the clang driver.
Loads are a use of the value.
Locals, iterators, and stack.
Log handler which uses printf
Look at the replacement type.
Look at what's locally bound.
Look for an exact match first
Look for an objc method call.
Look for induction variables.
Look for known substitutions.
Look through DynamicSelfType.
Look through Optional unwraps
Look through a named 1-tuple.
Look through most attributes.
Look through reference types.
Look within a module context.
Make the last case a default.
Map each of the declarations.
Map property getters/setters.
Mark class methods as static.
Mark dependence as necessary.
Match each of the parameters.
Match various reserved words.
Maybe the literal was in hex.
Merge cond_fail instructions.
Merge with actual extensions.
Metatypes are always trivial.
Move the pointer back to EOF.
Move them to the check block.
Move under the type-checking.
New prop, go ahead and add it
Next block in dominator tree.
Next, the partial apply args.
No global variable is needed.
No new arguments are created.
No optimization was possible.
No other types are permitted.
Non-optional to non-optional.
Non-trivial and not loadable.
Not a decl or type attribute.
Not too pretty, but it works.
ObjC classes are type erased.
Objective-C protocol context.
Objective-c bridging helpers.
Ok, this type is non-trivial.
Okay, now emit all the cases.
Okay, reproduce tuple layout.
Only call this on CPP classes
Only consider function calls.
Only handle reachable blocks.
Order based on protocol name.
Otherwise handle option sets.
Otherwise pop as a Use::Used.
Otherwise record the operand.
Otherwise we clear all state.
Otherwise, process this loop.
Otherwise, propagate upwards.
Otherwise, resolve the macro.
Otherwise, we bind the value.
Otherwise, we have a default.
Otherwise, we have a failure.
Otherwise, we know S is in L.
Output uses for BB arguments.
Overwrites are not permitted.
Parse 'throws' or 'rethrows'.
Parse additional expressions.
Parse any leading attributes.
Parse attributes then a type.
Parse the opening left brace.
Parse the optimization level.
Pass the argument indirectly.
Penalty for skipping a token.
Perform SROA on BB arguments.
Pop off the last member type.
Pop the InWritebackScope bit.
Potentially kill the profiler
Precompute full function name
Pretty printer for debuggin'.
Print line and column number.
Print reachable blocks first.
Print the generic parameters.
Process attributes in passes.
Process key and retrieve type
Process this potential match.
Process unicode field in IFD.
Project out the payload area.
Projections are fine as well.
Property is unset, try __get.
Purge all dirty unused pages.
Push to the innermost stream.
REPL mode requires no inputs.
Read back into another cache.
Read the associated type ids.
Read the attributes (if any).
Recognize result conventions.
Record new generic parameter.
Records a reverse dependency.
Recreate as a borrowed value.
Recursively construct the xml
Recursively visit successors.
Reform the original structure
Remember the element cleanup.
Remember to deallocate later.
Reset the preloaded g_context
Respect function no.optimize.
Restore it if we disabled it.
Return control to the caller.
Return the deserialized Vtbl.
Return the non-trivial field.
Returns an accessor kind that
Returns true if we succeeded.
Reverse post order block ids.
Rewrite the program argument.
Run 'swift-autolink-extract'.
Save current state for block.
Save the original expression.
Second phase: transformation.
See DCE::ReverseDependencies.
See comments in invokeFunc().
See if any addresses are here
See what we can do backwards.
Service request stub emitter.
Set AttrHot on hot functions.
Set semaphore 1 back to zero.
Set the array.props argument.
Set the most significant bit.
Set up the generic signature.
Shift away the reserved bits.
Should be StaticArr: t2124292
Size of default input buffer.
Skip fieldname to get to data
Skip over a leading backslash
Skip over escaped characters.
Skip the whole debug section.
So we make an exception here.
Sort by SILValue ID+Subindex.
Special diagnostic for enums.
Start random number generator
Start tracking this location.
Stop if this was the last box
Store the current stack depth
Store this archetype builder.
Strip off lvalue/inout types.
Substitute the function type.
Subtract the number of cases.
Switch on the incoming value.
Switch on the optional error.
Synchronously stop satellites
TODO(9994180): Throw on error
TODO: find out what this does
Take the union componentwise.
Ternary has fixed precedence.
Test 4: Move empty over self.
Test Resource cast operations
The REPL got a "quit" signal.
The VarDecl for the let decl.
The `alt_hint' is for phijcc.
The comparison was ambiguous.
The deallocation Instruction.
The declaration of Swift.Any.
The declaration of Swift.Int.
The first N are the use vars.
The generic parameter 'Self'.
The generic signature filter.
The metadata is now complete.
The namespace might be empty.
The passmanager we are using.
The protocol can be imported.
The result type of something.
The source type is 'Boolean'.
The spec says that's an error
The stream has been restarted
The strings compare the same.
The values incoming into Arg.
Then build the class RO-data.
These always produce lvalues.
These need to be lowercase...
This could be an array value.
This could be revisted later.
This cuts down on duplicates.
This element is now provided.
This exact cast will succeed.
This helps our pruning later.
This is expected to non-zero.
This is not true of HH files.
This is slow and works badly.
This means we should iterate.
This new layout is different.
This returns true on invalid.
Transform an arbitrary value.
Transform generic parameters.
Translate to dst origin (0,0)
Treat _ as a word on its own.
Treat as if it's "thismodule"
Try to create a select_value.
Try to find a register again.
Try to import the superclass.
Try to parse a compound name.
Try to read a file list file.
Turn it into a block pointer.
Type Parsing and AST Building
Unblocked after notification.
Unconditional unavailability.
Update the depth accordingly.
Update the edited line range.
Update various other metadata
Use as many args as specified
Use xsi:type if it is defined
Used locally for exec options
Wait for consumers to finish.
We already handled the block.
We don't want to touch those.
We should return NULL instead
We'll eventually change that.
We'll set size and pos later.
Whether this is a SIMD value.
Whether we have data to read.
Will break out of loop below.
Worker was already terminated
Write inherited conformances.
Write the GIF file terminator
Xml encode the passed string.
YYNRULES -- Number of states.
__attribute__((availability))
`v' must not be KindOfUninit.
`yyls': related to locations.
actually generate the MongoId
addr-spec / phrase route-addr
allow for thousand separators
assign ids to local variables
assume it is a known command.
autoclosure implies noescape.
bit 1 set: header CRC present
bits are left-justified on b.
byteswap a single magic entry
cannot split before first_use
cast as a POSIX fd or socketd
check if suffix is a sub path
class AsyncMysqlConnectResult
copy replacement and backrefs
copy to image, mapping colors
could not resolve address(es)
dealloc_stack can be ignored.
deprecation warnings disabled
detect event type and get tag
disp is loaded on a register.
doIt - returns true on error.
emit surrogate object and tag
empty string given as pattern
end namespace FatalErrorFlags
execute arbitrary ftp command
expects a language specifier.
fail if there is no transport
fake a MongoCollection object
fds for pipes in parent/child
finish default implementation
fix timestamp format for PHP4
flex integer type definitions
flush the shift-out sequences
for now, it's the same as Jcc
full date spec (non-standard)
full time spec (non-standard)
get iso-8601 format specifier
get offset, then skip over it
get the font (via font cache)
get the length of the message
get/set source/dest encodings
helper for getStaticVariables
if unresolved, ignore wrapper
ignore partial string matches
immediate-register operations
implement RequestEventHandler
initial values for increments
inotify saw this path change.
interpOne syncs regs manually
invalidate the current buffer
just to make valgrind cleaner
libmemcached behavior options
link in the gss authenticator
link in the log authenticator
make explain use a hard limit
make it zero-based internally
maps block to current cluster
mark the beginning of varargs
metatype representation, type
mostly from vm_call_user_func
move us to the parent context
name is checked as class name
never null, sometimes counted
not in a context being exited
not the same when in for-loop
now no more jobs are expired.
overlay becomes quite opaque.
pointer into main cache array
poll() timed out, or errored.
prevState must not be Uninit.
print phi pseudo-instructions
pull data buffer into tmpfile
read and fill StatM structure
recvfrom doesn't fill this in
remove double slashes and '.'
return string to free storage
returns 0 for ok, 1 for error
scale, round and offset brect
simply skipping this new line
skip optional separator space
so we don't annotate it again
so we fall back to 500 return
summon memory to hold the row
take care of negative indexes
these hold the DEFAULT logger
this used to be "metaphone.h"
thread-safe network functions
throw away duplicate response
try to discover text encoding
turn on verification callback
use wid for horizontal stroke
uses AttrNoOverride functions
we can remember the null byte
we handled static if present.
whether we need to initialize
y is bound safe at this point
"bring back" what was removed.
(Currently only return types.)
(Just saves a charset lookup.)
(Leave a hole for test cases.)
(and we always use MixedArray)
- Every node should be walked.
/  / TODO: Move this to Utils.
/ Ordered by decreasing depth.
/ This implies BitwiseTakable.
1 if this is an exclusion set.
2) Check the reffiness guards.
32-bit constants are unsigned.
6 is the position after zip://
@param file A readable stream.
A context that handles errors.
A default argument expression.
A failed type witness binding.
A very simple dominance check.
Add a checked cast constraint.
Add all the ids for this line.
Add an int value to image_info
Add an unreachable terminator.
Add read preferences to cursor
Add the 'self' parameter back.
Add the argument to the block.
Add the parameters into scope.
Add the rest of the arguments.
Additional headers for NetWare
Allocate an objc_super struct.
Almost ready for another flush
Already emitted code for this.
Also add the alias, if needed.
Also check the interface type.
Also match against the parent.
Always diagnose the new class.
An int is already a valid key.
Analyze the array object uses.
And add it to the output array
Apparently, Mac OSX needs this
Append length (before padding)
Arbitrary ordering of layouts.
Archetype function references.
Ask the target for the string.
Async function support helpers
Attempt to backward propagate.
Attempt to derive the witness.
Avoid duplicate invalidations.
BackedgeBlock: br HeaderBlock:
Begin walking a path from reg.
Bind the rest of the patterns.
Bounds of source pixels window
Break off a chunk of the mask.
Breakpoint id must be provided
Bridge input and result types.
Build a list of Substitutions.
Build the Clang function type.
Build the minimized signature.
But we do not create any body.
Byte of 0's (future expansion)
Bytes to reserve for sort keys
C++ code generation functions:
Cache for evaluated constants.
Calculates EstimatedStackSize.
Call the FunctionSuspend hook.
Carries out the Break command.
Check default witness methods.
Check for "j" in options array
Check for some invalid imports
Check if a width was specified
Check if delegate is non-null.
Check iterator variable state.
Check that invalidation works.
Check the cache in ASTContext.
Check whether V is up to date.
Claim only the self parameter.
Claim the next len characters.
Cleanup the captured argument.
Clobber rvmsp in debug builds.
Coercion by itself is a no-op.
Collect all of the archetypes.
Collect non-function captures.
Collect the exploded elements.
Collect the uses of the value.
Collecting the correct servers
Compare a variety of literals.
Complain that we expected '('.
Compute its original lifetime.
Compute number of bytes mod 64
Compute the effective context.
Configure the function passes.
Construct the SILFunctionType.
Control flow splits and joins.
Copy as many bytes as will fit
Copy in the metadata template.
Copy instructions into GetterF
Copy nodes into captured nodes
Copy the generic requirements.
Couldn't convert, use raw path
Create a node for the pass id.
Create a specialized function.
Create the 'self' declaration.
Create the actual constructor.
Create the continuation block.
Create the edge in this graph.
Create the on-disk hash table.
Create the protected function.
Creates a query string in buf.
Creates a simple query header.
Decode but ignore the pointee.
Default value for select_enum.
Deferred constants such as SID
Derive name from SIL location.
Determine an appropriate path.
Determine the constraint kind.
Determine the self.init state.
Differing only in Optional vs.
Dig out the Objective-C class.
Directories are not executable
Display diagnostics to stderr.
Do an adjustment if necessary.
Do authentication if requested
Do not remove the casts below.
Does not require an Operation.
Don't add operands to worklist
Double quoted '"' string start
Drill into the object pointer.
Drop one layer of parentheses.
Drop the original self clause.
Edge from inner to outer loop.
Edge from outer to inner loop.
Edit over the 'foo' reference.
Emission of materializeForSet.
Emit a 'get' into a temporary.
Emit a collection check first.
Emit an allocation of a class.
Emit the ambiguity diagnostic.
Emit the indirect return slot.
Enable checks for parsed files
Enable debugging if requested.
Entry block starts with DefFP.
Even when they're annotations.
Exact matches are even better.
Expand inherited conformances.
Extents of the inner elements.
Extra verbose when with __TEST
Extract the PGO function name.
FIXME emit the name somewhere.
FIXME: Deterministic ordering.
FIXME: Losing ".0" sugar here.
FIXME: Make this an assertion.
FIXME: Not the best interface.
FIXME: Platform compatibility.
FIXME: Recovery here is awful.
FIXME: This is really dubious.
FIXME: We shouldn't need this.
FIXME: actually check imports.
FIXME: add a UID for operators
FIXME: print closures somehow.
FIXME: recursion-breaking hack
FIXME: uncomment these checks.
Fall back to the r-value case.
Fall out into the normal path.
Fast path for files that exist
Fetching non-WSDL mode options
Figure out the parameter type.
Fill in the metaclass pointer.
Find beginning of salt string.
Find out which linkage it has.
Find the check_subscript call.
Find the database and username
Find the initializer we chose.
Find the interface, if we can.
Find the potential archetypes.
First, write out the metadata.
First-letter-case insensitive.
Fix PHIs (incoming arguments).
For each exiting block: / / 1.
For optional types, use 'nil'.
For possible future extension.
Form and return the aggregate.
Form the subscript expression.
Function currently processing.
Generally you want a TInitGen.
Get source type and bit width.
Get the PIPE_BUF from pathconf
Get the current column number.
Get the first induction value.
Get the inputs without 'self'.
Get the metatype of this type.
Get the superclass constraint.
Getters return the value type.
Go get the actual nested type.
Grab the apparent 'self' type.
Grab the first predecessor BB.
Grab the predecessors state...
Handle Int and UInt specially.
Handle a SILBasicBlock record.
Handle cold blocks separately.
Handle cond_fail instructions.
Handle format arguments if any
Handle relational constraints.
Hook called on function entry.
If YYTABLE_NINF, syntax error.
If it has, reject the program.
If it is record, we succeeded.
If positive, shift that token.
If so, do a direct assignment.
If so, just return that value.
If so, we add an extra retain.
If that fails, return nullptr.
If the kind changed, complain.
If we have matched a delimiter
Ignore SCCs of size 1 for now.
Ignore the values of null type
Ignored, FilePath will be used
Import the property's context.
Incoming values for the BBArg.
Increment the backedge region.
Initialize the variable value.
Initializers can be inherited.
Insert `inst' after `definer'.
Inspired loosely by William D.
Install the protocol elements.
Instead we return immediately.
It can save some compile-time.
It could be a type or an expr.
It could decref the inner ref.
It doesn't affect name lookup.
It is our duty to add a chunk.
It must have a valid raw type.
Just look through l-valueness.
Last sector might be truncated
Live ranges and use positions.
Log handler which does nothing
Look for a protocol type info.
Look for the key in the cache.
Make mongo objects uncloneable
Make sure chunk size is valid.
Make this a computed property.
Mangle a type into the buffer.
Mark the value as a tombstone.
Match up the parents, exactly.
Merge initialAttrs with attrs.
Merge the two states together.
Metatype to object conversion.
Metatypes have instance types.
Methods with unique signatures
Move CFs to right before Inst.
Move us to the parent context.
Must hold when updating m_last
Name lookup will disambiguate.
Next command not active, break
No other transforms necessary.
No user code after this point.
No witness table for AnyObject
Normal nodes that we just keep
Not a well-formed placeholder.
Not in a context being exited.
Note the dependent VWT offset.
Now add the inherited methods.
Now pass our field back to php
Number of captured subpatterns
ONE(IVA),     CMANY,   ONE(CV)
ONE(VSA),     SMANY,   ONE(CV)
Objective-C existential types.
Ok, we have a full apply site.
Only consider the rvalue type.
Only do this for local values.
Only hoist releases very late.
Only if debug info is enabled.
Only valid if the IP is valid.
Operate on the representative.
Operate on the representatives
Optional methods in protocols.
Or two words, if it's vacuous.
Otherwise emit a class method.
Otherwise lookup by extension.
Otherwise, artifacting occurs.
Otherwise, create a new clone.
Otherwise, emit a direct call.
Otherwise, fall back to UTF-8.
Otherwise, it's a conformance.
Otherwise, use the class name.
Otherwise, visit the children.
Otherwise, we have a variable.
Otherwise, we need to emit it.
Out of date, or doesn't exist.
PERF_TYPE_HW_CACHE hw_cache_id
PHP extension STANDARD: iptc.c
Palette based to palette based
Parse a list of Substitutions.
Parse the type being extended.
Parse the type for SILDeclRef.
Perform 1st shear (horizontal)
Perform some cleanups such as:
Pick the smallest disjunction.
Pointer-based loads and stores
Pop the ReqInfo off the stack.
Postfix: replace the ++ or --.
Prepare type substitution map.
Print unreachable blocks last.
Process the callee convention.
Produce the initializer value.
Protocol methods have no impl.
Put in an assert just in case.
Reactivate the result cleanup.
Read the generic requirements.
Record the index and continue.
Record the opened existential.
Record the sugared field name.
Record what we want to change.
Recursively put parents first.
Reject over-large code points.
Remember, it's a colour circle
Remove dead array.count calls.
Remove it from the class list.
Remove switch_enum instruction
Remove this when they go away.
Remove write-only AllocStacks.
Replace the overridden member.
Report a dynamic cast failure.
Retains and releases are fine.
Retrieve the superclass bound.
Return closest available color
Return false if FriBidi failed
Return from the main function.
Return the initialized 'self'.
Return to the caller function.
Returns 0-terminated hostname.
Returns the forward arguments.
SHA256 block update operation.
SHA384 block update operation.
SHA512 block update operation.
SIL mode uses the same syntax.
Search among the declarations.
See LLVM's separateNestedLoop.
See MixedArray::isTombstone().
See cancelTimerSource() above.
See computeSimpleCollectionOp.
Send the xml shutdown response
Serialize function parameters.
Server should have matched it.
Set the constructor's type(s).
Set up a function declaration.
Shift the remaining bits down.
Shuffle args into two vectors.
Silently truncate long inputs.
Skip over the implicit 'self'.
Skip unavailable requirements.
Slightly larger than formatlen
Smaller, self-destribing enums
So the base is an rvalue type.
So we move to the next II, SI.
Sort for deterministic import.
Special diagnostic for tuples.
Special-case the empty string.
Specialize the generic method.
Specific checking for methods.
Start by adding a heap header.
Start with .hdf and .ini files
Start with the global effects.
String literal symbolic flavor
Strip off any casts on V1, V2.
Strip the last path component.
Subtype conversions: - upcasts
SunOS 5.x, 64-bit (short name)
Support for the stub freelist.
Support optional color output.
Switch on the optional result.
Sync vmsp and the return regs.
TODO(stephentu): fix this hack
TODO: Fix better error message
TODO: create one if necessary.
Test 2: Move empty over empty.
Test 5: Move source over self.
The aggregate's type lowering.
The argument we are splitting.
The best path length we found.
The call/function can't throw.
The declaration of Swift.Bool.
The declaration of Swift.UInt.
The declaration of Swift.Void.
The default Swift conventions.
The destination index, if any.
The extra byte is for the tag.
The following license applies:
The function already returned.
The global MCGenerator object.
The level of 'switch' nesting.
The property must have type T.
The rest of the outer columns.
The result is / always an i8*.
The set of known declarations.
The set of potential bindings.
The value is already incref'd.
Then for every stored field...
Then go to user-level `__set`.
Then something really weird...
Then we copy the input string.
These may be overridden below.
These require special handling
This can be a bridging upcast.
This can happen due to either:
This class implements a method
This constraint is not active.
This implies it is known safe.
This is a pre-order traversal.
This is a type-safety problem.
This is an ObjC to Swift cast.
This is an apply or try_apply.
This is defined in php_mongo.h
This is semantically required.
This is the More Correct path.
This is the new function name.
This results in better SILGen.
This use looks something like:
Time interval, in microseconds
Translate the argument values.
Trust the explicit attributes.
Try to infer a member function
Try to infer a member variable
Try to load the first function
Try to unroll innermost loops.
Type check the argument first.
Type-check the type parameter.
Undefined hues always match...
Undo the allocation of propVec
Unpack the extra bits, if any.
Unwrap UnresolvedPatternExprs.
Unwrap single element structs.
Update our own cache to match.
Update the aggregate alignment
Update the type appropriately.
Update vmfp() and vmFirstAR().
Usually needs to flush buffer.
Validate the generic argument.
Value uses are generally safe.
Variable name might not exist.
Verify that / its uses are ok.
Verify the static initializer.
W before a vowel, else dropped
We don't model these in DWARF.
We don't want redundant calls.
We have a reference to 'self'.
We have to clean up ourselves.
We need to deduce a file name.
We only handle loadable types.
We only pair mutators for now.
What to do in state STATE-NUM.
WitnessTablePrivateSizeInWords
XDebug is disabled by default.
XXX: this should not be static
Zeroize sensitive information.
_BridgedNSError._nsErrorDomain
already walked what we needed.
always at least ((), SelfType)
and increment the usage count.
as if just "list" fall through
assign formattables to varargs
attribute default and required
bad record, don't set anything
bit 2 set: extra field present
break is missing intentionally
break is omitted intentionally
cache lookup for absolute path
can't throw when you pass zero
check union_of union of subCls
class AsyncMysqlConnectionPool
class IntlDatePatternGenerator
commit the current transaction
conversion to string can throw
copy belongs on successor edge
copy out the dir from response
copy out the pwd from response
copy the value string for work
count each document as we pass
current distance in inner loop
current position inside buffer
decrefs context object in iter
end SHUFFLE_EXTRA_ARGS_PRELUDE
end of nested comment sequence
extract an error from a handle
finally, get the error message
format date as iso-8601 string
helper for getAssignedTypeText
if expr is null, just continue
if our descriptor has an error
inconsistent size information.
labels don't matter for layout
loading APC from archive files
loop chunks to find BMHD chunk
make the circular-lists empty.
memoryaddress of shared memory
might use Sys V memset(3) here
names for leap (13-month) year
not a Class, but clear low bit
not counted but can be marked.
not meaningful in type-checker
now we can add our information
only for STDIN, STDOUT, STDERR
optional objc instance methods
presume minimum collisions ...
proceed to next shutdown phase
readwbmp and writewbmp(stdout)
relative path to document root
required objc instance methods
reset cursor to original state
reset load and store counters.
result is not used, only flags
return the days after March 21
run never responds immediately
scale G distances by this much
scale R distances by this much
see if we encountered an error
set interleave for early code.
should be only 8bits available
so that we always have a range
table clear for block compress
takes an unmangled header name
the initializing constructor).
the variable hasn't been unset
then we have a self.init call.
this is where the match starts
this object is no longer valid
this should be a thumbnail IFD
unwrap optionals, check again.
valid would return FAILURE now
watch out, "ret", not "retval"
we already added the first one
we have a release instruction.
we need to prune the list - cc
we're here courtesy of longjmp
whitespace / last char in file
whoops: sockfd has disappeared
work left to right in this row
work right to left in this row
workaround for a bug in gd 1.2
(E.g. if the base is a number.)
+1 or -1 depending on direction
- DefCls by name would be nice.
/ / This operation cannot fail.
/ Dumping reflection metadata /
/ Otherwise, an empty optional.
3) Compare the reffiness guards
A child of this aggregate type.
A non-trivial case of the enum.
Accept singlethread if present.
Acquire count for auto-release.
Acronym doesn't get lowercased.
Add Objective-C property names.
Add an index-forwarding clause.
Add compare_objects for MongoId
Add macros to the lookup table.
Add the hit condition and count
Add the piece DWARF expression.
Add the protocols we inherited.
Alias parent's static property.
All arguments except one match.
All block in-states start here.
All exnNode ids must be unique.
All path elements are the same.
All types considered identical.
Allocate a new metadata object.
Allocate workspace for box list
Allow escaping of ``relations''
Allow one level of optionality.
Alternatively, try to add 'es'.
Always start with a blank array
Analyze the array storage uses.
And not on certain value decls.
Anything else, just pass along.
Are we computing max store set.
Assumes len is a multiple of 4.
Assumes len is a multiple of 8.
At the bottom of the hierarchy.
BEGIN Facebook: json_utf8_loose
Bell filter, default radius 1.5
Borrow the base for the getter.
Both ways go to the same block.
Bridge the result back to ObjC.
Build the descriptor signature.
Build the invoke function type.
Bump up the unnamed local count
But our memory is not infinite.
By-value let's have no address.
Cache cold blocks per function.
Call the destroying destructor.
Call the llvm.memcpy intrinsic.
Call the native implementation.
Call the superclass's -dealloc.
Can't be added in an extension.
Can't do anything else with it.
Can't grow it, we don't own it.
Can't load from an inout value.
Can't right-pad 0's on integers
Casts to existential metatypes.
Chain the retranslation blocks.
Check all the potential splits.
Check each of the requirements.
Check for a common input value.
Check for circular inheritance.
Check for index buffer overflow
Check for special existentials.
Check for the 'throws' keyword.
Check if its parent is a "let".
Check special-case names first.
Check whether anything changed.
Check whether the name changed.
Clear out other "failed" state.
Clear out the error convention.
Clear out the type of the decl.
Coerce from a tuple to a tuple.
Collect any linked expressions.
Collect hint metadata for phis.
Collect the rows to specialize.
Comment is past the clang node.
Compile a static string as HHAS
Complain about inconsistencies.
Complain and pretend we saw it.
Complain on the first offender.
Compute number of bytes mod 128
Compute the concrete reference.
Compute the genset and killset.
Compute the type of the getter.
Construct the graph of Actions.
Construct the specialized rows.
Consume owned parameters at +1.
Consume the ')', if it's there.
Convert all tuples to patterns.
Convert params to proper types.
Convert to UChar pivot encoding
Convert to an object reference.
Copied to BlockAnalysis::antLoc
Copied to BlockAnalysis::avlLoc
Copied to BlockAnalysis::delLoc
Copy must be an initialization.
Create a FixIt for the keyword.
Create a Forward-declared type.
Create a new entry for the box.
Create a new linker flag entry.
Create a vector of cluster arcs
Create the default constructor.
Create the filename then enable
Create the opaque opened value.
Custom handling for statements.
Deconstruct a tuple expression.
Deferred string init, see below
Define the metadata for a type.
Destroy the value if requested.
Determine if an object is dead.
Diagnose duplicated attributes.
Diagnose non-type declarations.
Didn't find an error parameter.
Do a binary search with 5 steps
Do not encode output and input.
Don't bother walking into this.
Don't go beyond the definition.
Dump large annotations to disk.
Each label is space-terminated.
Earlier match kinds are better.
Else: calling non-static method
Emit a jump to the actual code.
Emit a release of a live value.
Emit all of the trailing bytes.
Emit the application of 'self'.
Emit the block name if present.
Emit the destroying destructor.
Emit the diagnostic to bitcode.
Emit the elementwise arguments.
Emit the non-error destination.
Emit the polymorphic arguments.
Emit type guards/preconditions.
Encoding is 0x110aaaaa 10bbbbbb
Ensure the entry is acceptable.
Ensure the flow filter is fresh
Enter section data lookup state
Erase the end of various lists.
Everything else gets accessors.
Everything else stays the same.
Execute the regular expression.
Explicitly ignored field types.
Extract out the first operator.
Extract out the scalar results.
Extract the size and alignment.
FIXME: AnyObject should go away
FIXME: Change to iterator later
FIXME: Check class requirement.
FIXME: Compound name locations.
FIXME: Feels like a total hack.
FIXME: Provide type annotation.
FIXME: Record that we did this.
FIXME: Respect the access path.
FIXME: This is a bit of a hack.
FIXME: Tuple-to-Any conversions
FIXME: We aren't const-correct.
FIXME: We shouldn't allow this.
FIXME: optional of Any (ugh...)
Fail if the Elm is a tombstone.
Fast-path a really common case.
Fast-path the empty tuple type.
Figure out the source location.
Find the adjacency information.
Find the archetype information.
Find the set of property names.
Find this symbols recurse level
First do 50 LIFO, then 50 FIFO.
First increment the byte count.
First try unwrapping optionals.
First update uses of the value.
Flush the current conformances.
For HTTP/1.0 conforming clients
For all successors of the node:
For each instruction I in BB...
For now, just send a naked RST.
Form the inherited conformance.
Format: a list of typed values.
Freeze epilogue release or not.
Functions have component types.
Generate HHBC of the structure:
Get the extra tag bits, if any.
Get time delta in microseconds.
Grab from the requested context
Grab the context if it provided
Handle Swift builtin functions.
Handle a SILInstruction record.
Handle includes of pseudomains.
Handle it as other diagnostics.
Handle simple subtype bindings.
Handle the split backedge case.
Handle the various field types.
Have to have a server to break.
Haystack isn't statically known
Hoist in the current loop nest.
Hoisting instructions as we go.
ICU 4.9 / IntlGregorianCalendar
If it is safe to remove, do it.
If it is, go to the interpreter
If needed, split the base name.
If nothing changed, we're done.
If nothing changes, we're done.
If requested, sort the results.
If so, don't import this field.
If we can order by kind, do so.
If we do / advance return true.
If we don't have one, continue.
If we have a 'this' pointer ...
If we have a colon, consume it.
If we have a tuple, flatten it.
If we want a super.init call...
If zero, do what YYDEFACT says.
Ignore blocks that allow leaks.
Ignore the preallocated header.
Import each of the enumerators.
In any case, it's not unsigned.
Include implementation details.
Initialize our breakpoint maps.
Initialize the successor array.
Insert 100 numbers into the map
Instruction has been processed.
Intermediate minstr operations.
Internal href try and find node
It also may simply have no data
It cannot increment ref counts.
It returns a +1 value with one.
It will be diagnosed elsewhere.
Iterator into the lookup table.
Just smash m_dbgBranchGuardSrc.
Keep continuing the identifier.
Leave the argument unfulfilled.
Leave the direct results alone.
Leave the outer scope in place.
Lifetime continuity resolution.
Limit the number of recursions.
Load these parameters directly.
Loads cannot affect the retain.
Look for _bridgeToObjectiveC().
Look for the breakpoint's unit.
Look through ignored bases too.
Look through lvalues in tuples.
Look up the name in the module.
Lose a static `self` parameter.
Make sure we don't change that.
Malformed or multiple newlines.
Mangle the reabstraction thunk.
Manually add status and reason.
Map the character sequence onto
Map the former into the latter.
Maps class name to a VTable ID.
Mark the generator as finished.
Merge any concrete constraints.
Merge in the predecessor state.
Might as well store it as a map
Next: property or global exists
No data is always more general.
No translations, nothing to do.
Non-C99 systems may or may not.
Non-stored properties are fine.
Nor does a stub implementation.
Normal accessibility attribute.
Not imported as an initializer.
Not sure if we should pop here.
Note: only occurs in templates.
Nothing to check at the moment.
Number of syntax errors so far.
ObjC decls don't go in vtables.
Offset is part of removed text.
Offset where the suffix begins.
Ok, it better be an opcode now.
Ok, this is something loadable.
Only certain decls can be ObjC.
Only the empty tuple is a leaf.
Only value declarations matter.
Only visit each archetype once.
Open the type we're casting to.
Open up the type of the member.
Or the other type is a typedef,
Other types must match exactly.
Otherwise, a store just writes.
Otherwise, add up the elements.
Otherwise, desugar one level...
Otherwise, do the normal thing.
Otherwise, emit a function_ref.
Otherwise, emit to a temporary.
Otherwise, it is an RValue let.
Otherwise, move F over to NewF.
Otherwise, use value witnesses.
Otherwise, we have a leaf node.
Overwrite the superclass field.
PHP extension STANDARD: image.c
PHP7 is off by default (false).
Packet length, tile-part header
Parse 'default' sil-identifier.
Parse substitution as AST type.
Parse the pieces of the fix-it.
Parse the protocol conformance.
Parseable output was requested.
Perform lowering optimizations.
Perform the bridging operation.
Pointer to DNS_RECORD structure
Pop the capture if we made one.
Process functions in any order.
Project out the 'Some' payload.
Prop handler for mysqli_result.
Protect against corrupt headers
Pull out the generic signature.
Push the new throw destination.
Read the associated type names.
Read the length of the section.
Reallocate string and return it
Reconstructing branch operands.
Record identifier for the file.
Record the implementation type.
Recover by creating AnyPattern.
Recurse into implied protocols.
Recursively follow projections.
Register namespaces in the node
Remove any disjunction choices.
Remove duplicated declarations.
Remove it from the map as well.
Remove the copy_addr from Uses.
Remove the image from the stack
Report a corrupted type object.
Request new APIs from SceneKit.
Resolve any unmatched elements.
Resolve any unresolved entries.
Resolve the property reference.
Resolve the ternary expression.
Response for one-way opearation
Return nullptr to signal error.
Return the 0...11 month number.
Return the SerializedSILLoader.
Return the canonical signature.
Return the day within the month
Returns the corresponding unit.
Safe array semantics operation.
Same logic for any suffix type.
Same: Swift.IntegerLiteralType.
Saw a check for the first time.
Search for 'FIXME:' or 'TODO:'.
Search the runtime import path.
Section 6.2: Decoding procedure
Section 6.3: Encoding procedure
See autoTypecheckRequestInit().
See dce.cpp for an explanation.
See note above about this wait.
See the comment in SILType.cpp.
Serialized as part of the type.
Server-side work for a command.
Set by a .ini file at the start
Set the body of the class type.
Set the metatype in local data.
Should already be 0 after mmap.
Should be called outside m_lock
Should be significantly faster.
Skip anything from an AST file.
Skip over the losing solutions.
So we'll ignore the error code.
Some literal kinds are related.
Sort it and fill in parent info
Sort the conflict declarations.
Sort them and make them unique.
Special diagnostic for classes.
Special diagnostic for structs.
Special-case writing to stdout.
Speculate virtual call targets.
Split of a new empty preheader.
Start of loop unrolling passes.
Start recording argument names.
Stash any releases that we see.
State structure for rc_analyze.
Statistics for failure to infer
Step over PopR following a call
Store an index_addr projection.
Store first two pre-read bytes.
Store the block header literal.
String is converted successfuly
String'ify the parameter types.
Subtypes of the specified type.
SunOS 5.x hardware capabilities
SunOS 5.x software capabilities
Switch out nontrivial payloads.
Synthesize -- remaining args...
TODO may not always be all-ones
TODO: This is way conservative.
TODO: This needs a better name.
TODO: block descriptor pointer.
TODO: handle address-only types
TODO: strip leading underscores
TODO: use ObjC class references
TWO(IVA, SA), CVUMANY,  ONE(RV)
Test 2: Move source over empty.
Test assignment operator method
The Vreg this value represents.
The closure is the first local.
The declaration of Swift.Float.
The failed type witness result.
The function doesn't exist yet.
The kind of bindings permitted.
The last user should delete it.
The latter should never happen.
The length of the block itself.
The longest run of digits wins.
The path only contained slashes
The representations must match.
The result is placed in `left'.
The return type should be void.
The set of blocks in this loop.
The solution contains an error.
The subscript index expression.
The subscript index parameters.
The substituted parameter type.
The type of the thunk function.
The type we're converting from.
The value is expressed as bits.
Then perform the optimizations.
There is a potential race here.
There was no argument to claim.
There was no witness available.
There's nothing to do for them.
These are the possible outputs:
They / should be never inlined.
They are defined in php_mongo.h
They are not imported directly.
Thin metatypes are always free.
This code is very conservative.
This is a partially dead store.
This is a temporary limitation.
This is only possible for vars.
This is set to true by default.
This isn't necessarily optimal.
This might be a bridged upcast.
This must be done with a thunk.
This only stops release motion.
This typehint will always fail.
This will be eliminated by DCE.
To check for query reply status
To simplify induction variable.
Transform the body of the 'do'.
Translate C++ to Java Exception
Try to derive the type witness.
Try to get needed context info.
Try to perform the propagation.
Try to use a standard function.
Tuples are lowered elementwise.
Tuples do not alias non-tuples.
Tuples don't have member types.
Type-check the body statements.
Typed GEPs do not use pointers.
Types are not instance members.
URIs don't have an include path
Uninitialize the current state.
Update outside used phi values.
Update the genset and kill set.
Verify noescape parameter uses.
Verify that the types match up.
Verify the module, if required.
Warnings are currently sampled.
We can just load the cache now.
We can strip the module prefix.
We cannot extend sugared types.
We didn't consume, so reassign.
We do not handle these for now.
We don't need to capture types.
We don't want to do that again.
We finally know the base value.
We have to build a new locator.
We may have an aliasing append.
We preserve the dominator tree.
We should use WitnessTableBody.
What's left is the result type.
Wrap the result in an optional.
Write out DefaultWitnessTables.
Write out the Background colour
Write out the Global Colour Map
Write out the initial code size
Write the hash as a hex string.
XXX - these two should not need
XXX: const castaway, via strchr
adjust timeout for next attempt
allocate array of modifications
also maybe atomic-dec APCString
anything else isn't interesting
appease StringData::checkSane()
assert invalid instruction form
bit 4 set: file comment present
bound-check asserts in offsetOf
but strip off the requirements.
calculate the slope of the line
chPtr is the int for the result
character never appears in text
check if we can write more data
clear sign bit, which we ignore
collections of scannable fields
colormap allocated at init time
compress.zlib:// stream wrapper
comunication with DebuggerProxy
copy result into our return var
copy the MergeKind::Done marker
count is constant numNonDefault
create a temp file for the data
decrefs src, may read obj props
do the default on invalid input
end additional , gerrit thomson
error encountered parsing input
fill this out if people need it
find decimal point, if expected
find parent in the same context
flag that says to auto-release.
for pointers to histogram cells
get current autocommit behavior
get lines of text, or CRLF_CRLF
get pixel location in gd buffer
get the kind out of the finder.
get the length of the true salt
hash sqlstate to error messages
helper for getClosureScopeClass
if it is already set, skip this
if this is defined in a type...
ini parsing treats "None" as ""
init_closure doesn't move stack
inlining may not change spValue
innerExtents will point at this
instance methods and properties
let async modifier be mandatory
libc++ has the class "CLNGC++".
link in the plain authenticator
lower left corner of update box
make sure there wasn't an error
make the new db the current one
mask     the highest   bit of u
mask all but highest   bit of u
mask all but lowest    bit of u
maybe() is a symmetric relation
mirror thrift log in plain text
move hi bit of u to hi bit of v
must run before setODAttributes
need to start from 0 for komodo
negate it (becomes positive) c.
nothing, but kids can overwrite
now, draw to our target surface
options with control list value
ordinary basic block boundaries
original Zend name is _estrndup
otherwise not freed from memory
pcre_cache_entry implementation
point at our new starting point
print encoding, like in objdump
private helper for getPrototype
re-using definition of O below.
read until a boundary condition
register frame base of function
resources allocated from now on
return if there were 0 elements
ripemd128 basic transformation.
ripemd160 basic transformation.
ripemd256 basic transformation.
ripemd320 basic transformation.
rsrc is not a native collection
s_stackLimit is already aligned
save absolute path in the cache
scan JPEG in thumbnail (memory)
should NEVER generate this code
should be only 16bits available
side exits if misses in the RDS
skip any other marker silently.
special case for trailing space
sprintf 0-terminates the string
start of line is left of window
state at the start of the block
t / t here is an ArchetypeType.
take value of num_index instead
test iterating objects in slabs
the current period has finished
the solar and lunar corrections
top level DIE for each function
true multithread-shared globals
type for the 2nd-level pointers
unknownRetain(null) is a no-op.
use 'int' for calculation temps
we are above high water mark...
we just handle 3 octets of data
when not using an objc runtime.
will raise notice and push null
"(function(..): ..)" typehints).
"Inst" is an Upcast instruction.
(It may have been set to `last'.
(They're only created in hhbbc.)
- tuples of transformable values
-1 is invalid (not-Counted tmps)
/ / Returns a value of type i8*.
/ / Valid: SomeDecl, OuterResult
/ This is set in the first pass.
/proc/self/cwd is not available.
10 for the 32bit int at max size
64-bit hash for 64-bit platforms
@objc existential types are okay
@param in_str A readable stream.
@param new_buffer The new state.
@src: The affine transformation.
A common base class for structs.
A stable ordering of ID objects.
AST and module printing options.
Abstraction changes: - functions
Accumulate it into the full set.
Actually update the type guards.
Add a padding field if required.
Add a tag from IFD to image_info
Add constructors for the struct.
Add effects from the parameters.
Add it to our list and continue.
Add members from any extensions.
Add resolutions for livein sets.
Add results from current module.
Add the appropriate function map
Add the character to the string.
Add the type binding constraint.
Add these fields to the builder.
Add this parameter to the scope.
Adjust the class object extents.
All marker codes start with this
All other metatypes are bridged.
Allocate storage for the object.
Allocate the object on the heap.
An Identifier is "pointer like".
Append the current function name
Argument labels are not correct.
Ask the value type for its mask.
Assert that two types are equal.
Assert to check this and return.
Assignment has fixed precedence.
Assume it may be important in C.
Bail early if this isn't a push.
Best case scenario, user behaved
Both instructions need to exist.
Bound closures should be scoped.
Build the constructor reference.
Build the generic function type.
Build the subscript declaration.
Build up the list of input jobs.
But for 'self' it is just noise.
But for now we aren't bothering.
But now readMetaData is gone ...
C function imported as a method.
Canonicalize generic parameters.
Cast the witness pointer to i8*.
Check for a specialized emitter.
Check for an explicit attribute.
Check for correct version number
Check for deep match if desired.
Check if a builtin is inlinable.
Check metatype objects directly.
Check the fpi region to be sure.
Check the get_element_addr call.
Checked Conversion instructions.
Choose the right implementation.
Choose the swiftdoc output path.
Classes are sources of metadata.
Classify a potential CF typedef.
Code and data alignment factors.
Compiler arguments do not matter
Compute the canonical signature.
Compute the final extended type.
Compute the type of hashValue().
Conservative scan entire object.
Constants are captured by value.
Construct the original constant.
Contextual keyword get, set, ...
Copy element names, if provided.
Copy parent's declared property.
Copy the payload, if we have it.
Copyright (c) 2003 Constantin S.
Create a CodeCompletionConsumer.
Create a computed value variable
Create the branch to the header.
Create the coverage data header.
Current post-order we are using.
Custom scanner for base classes.
Deallocate an uninitialized box.
Decompose protocol compositions.
Delimiter character to be quoted
Destroy only the unique entries.
Determine how much file is left.
Determine the result convention.
Dig out the type of its pointer.
Dig through all levels of calls.
Discard all buffered characters.
Displaying a spinning wait icon.
Do not handle unavailable decls.
Do nothing if the list is empty.
Do so now, and cache the result.
Do the same with the call graph.
Do the take/copy of the payload.
Don't add the super.init() call.
Don't cache type variable types.
Don't jumpthread function calls.
Don't recur into child closures.
Don't show the "omitted" suffix.
Drop references to other blocks.
Drop the cleanup if we have one.
Emit a 'get' into the temporary.
Emit diagnostic with the Fix-It.
Emit the epilog and post-matter.
Emit the fail BB if we have one.
Emit the witness table pointers.
Empty/null string is meaningless
Enabling verbose error messages.
End HHVM internal memory buckets
End Of Image (end of datastream)
End the initial writeback scope.
Ensure consistent state for vmfp
Ensure every number was visited.
Ensure we're actually connected.
Error case: erroneous extension.
Evaluate the subject every time.
Existential types handled below.
Expect a " " separator to follow
Expect the attribute terminator.
FIXME: Check inputs and outputs.
FIXME: Could emit a Fix-It here.
FIXME: Fully use the ASTPrinter.
FIXME: Handle re-exported decls.
FIXME: Implement request handle.
FIXME: No generic substitutions.
FIXME: Requirement declarations.
FIXME: Revisit this restriction.
FIXME: This shouldn't be needed.
FIXME: check for matching types.
Fall back to the 'Unknown' path.
Fall through to mangle the name.
Fallback default implementation.
Family of relative op functions.
File upload stopped by extension
Find all methods to be imported.
Find entries for this base name.
Find library intrinsic function.
Find the destructor of the type.
Find the origin's type metadata.
Find the witness we need to use.
Finish all the component tuples.
Finish the first scheduled task.
First dive into the inner loops.
For all users of the AllocStack:
For each BB in our post order...
For each BB in the destructor...
For each basic block BB in Fn...
For each instruction II in BB...
Form a reference to this member.
Form the call and type-check it.
Forward the captured owning box.
Found an unsafe or unknown user.
Found the AAWH we need to remove
Found the next unfinished child.
Function hasn't WSDL description
Generic Parsing and AST Building
Get rest as section/offset value
Get the (sub)module to generate.
Get the current type to process.
Get the destination payload type
Get the pair of array and index.
Get the stored value for a load.
Give the function an empty body.
Give up and call the interpreter
Good, they have migrated already
Grab the depth if it is provided
Grab the optional depth argument
Grab the page if it was provided
Handle LLVM intrinsic functions.
Handle an interrupt from the VM.
Handle dynamically set constants
Handle subscripting of generics.
Handle the bridging header case.
Handle the subsequent VM frames.
Handled directly by emitClass().
Hermite filter, default radius 1
Hoist decrement to predecessors.
Hoist this call to make_mutable.
Holds the list of WitnessTables.
Identity expressions are no-ops.
If Closure is a partial apply...
If delimiters should be captured
If either are none, return None.
If it isn't settable, return it.
If our kinds do not match, bail.
If so, check for matching types.
If the block is dead, remove it.
If the field is not a let, bail.
If the match should not be empty
If the parent is dead, continue.
If we don't find anything, stop.
If we found both, point at them.
If we get here, turn on coverage
If we have a non-trivial type...
If we loop on ourselves, bail...
If we see a closing parenthesis,
Ignore any stub implementations.
Ignore blocks with no arguments.
Ignore lvalues in the base type.
Ignore non-stores for SelfInits.
Ignore spaces and empty strings.
Implicit collection conversions.
Import the name of the function.
Imported inherited initializers.
Include room in for 2 EOB chars.
Initialize the status and reason
Inject some behavior into react/
Insert it before the 'UserInst'.
Insert new module:depth mapping.
Invoke the conversion intrinsic.
It first checks / in the module.
It might throw, or loop forever.
It should be removed when fixed.
It's an array buffer allocation.
It's not ok to just ignore this.
Jump tables are lists of labels.
Jump-threading was not possible.
Just move to MightBeDecremented.
Keep running until we reach one.
Keep skipping uppercase letters.
Leaf patterns have no recursion.
Leave result array on the stack.
Let the C++ exception propagate.
Let the server do initialization
Load the witness table pointers.
Lock the proxy during the switch
Look for copy_addr instructions.
Look for special top-level lists
Look through explicit coercions.
Look through mark_uninitialized.
Lower `block' from HHIR to vasm.
Make sure we have a valid class.
Make this a stub implementation.
Make this addressor transparent.
Mangle ASCII operators directly.
Mangle the number of parameters.
Manually trigger memory cleanup.
Map the metatype representation.
Map up to our superclass's type.
Maps manipulated by getObject().
Mark metaclasses as appropriate.
Marker, not a real user token ID
Memoization Opportunity Profiler
Merge in our predecessor states.
Might be defined in sys/types.h.
Missing a keyword argument name.
Must be on the same source line.
Needs to have a known semantics.
Neither loop contains the other.
New instructions were generated.
No deprecation filter on watchOS
No need to run Prop destructors.
Nominal Type Descriptor Emission
Non elem/prop/W part of M-vector
Non-subscript decls don't match.
Nonzero means print parse trace.
Not supporting local_infile yet.
Note that we've been superseded.
Okay, move to the address point.
One of the identifiers is empty.
Only consume non-toplevel decls.
Only handle branch instructions.
Only visit each constraint once.
Open up the type we're checking.
Optimizes binary bit operations.
Optional-to-optional conversion.
Otherwise it belongs to the body
Otherwise try to deserialize it.
Otherwise, compute and cache it.
Otherwise, do a recursive parse.
Otherwise, eat other characters.
Otherwise, evaluate the payload.
Otherwise, fake up an ErrorExpr.
Otherwise, grab the next result.
Otherwise, it is a leaf element.
Otherwise, it's a concrete type.
Otherwise, it's a direct result.
Otherwise, leave it in the list.
Otherwise, look at the operands.
Otherwise, look for completions.
Otherwise, sort by source order.
Otherwise, use the generic path.
Otherwise, we have invalid code.
Otherwise, we need to create it.
Overwrite the old witness table.
PHP_INI_ALL has a weird encoding
Parse a single parameter-clause.
Parse an initializer if present.
Parse file extension from a path
Parse the concrete nominal type.
Parse the environment for flags.
Parse the name of the parameter.
Parse the optional where-clause.
Parse the pattern tuple element.
Parse the type-composition-list.
Parse the unqualified-decl-name.
Pass along the indirect results.
Pass on any build config options
Pass through Unicode characters.
Pattern Parsing and AST Building
Perform (full) path compression.
Plan to emit into that location.
Pointer to the next subinterval.
Prepare a jump destination here.
Prepare to read the next record.
Preserve origTc's weak property.
Pretend that there was no error.
Prevent spurious printir traces.
Process the rest of truncations.
Produce a diff of the solutions.
Reassign the +1 storage with it.
Record a store into this object.
Record that there is no witness.
Recover 'self' from the context.
Regex instance for empty matches
Reinitialize with the new value.
Remove all the now-dead applies.
Remove the entries from the map.
Removes edges to original dests.
Replace OtherSt with this store.
Replace users of f_inverse by x.
Represents a vector of n values.
Request new APIs from CoreImage.
Request new APIs from SpriteKit.
Resize the image to the new size
Restore the previous best score.
Retain type sugar if it's there.
Return and unreachable are free.
Return null if that is the case.
Return null on the failure path.
Return true if Ptr alias's self.
Revert the body parameter types.
Rows can be added using addRows.
Run default priority queue once.
Sends GLog output to adb logcat.
Serialize a Variant recursively.
Set the "os" platform condition.
Set the protocol witness tables.
Set the type of the initializer.
Set the type we checked against.
Set up an initial clause matrix.
Set up the 'byte output' routine
Simple case: add the constraint.
Simple debugging print function.
Simple single-character escapes.
Singleton inlining optimization.
Skip outer potential archetypes.
Skip over ASCII art, if present.
Skip over any claimed arguments.
Skip over empty parent contexts.
Sort the entries by input order.
Special-case the Swift frontend.
Standard allocator for Patterns.
Start inserting into that block.
Stepping back twice (slow path).
Stop the graceful shutdown timer
Store to the "pointee" property.
Strdup S using the bump pointer.
Subscripts can never have names.
Substitute into the parent type.
SunOS 5.x, 64-bit (command line)
Swap operands if the dest is s0.
Synthesize identifier locations.
TODO: 'swift_error' IR attribute
TODO: Add more cases than Struct
TODO: Add swift_error attribute.
TODO: Handle object IntlCalendar
TODO: This list is conservative.
TODO: This seems overly limited.
TODO: produce warning invalid ns
TWO(IVA,SA),  CVUMANY,   ONE(CV)
Take care of all ancestors first
Take ownership of the exception.
The allocation we are analyzing.
The decl that has the raw value.
The declaration from the module.
The declaration of Swift.Double.
The declaration of Swift.String.
The dependent generic signature.
The echoed command is discarded.
The function accepted ownership.
The intersection is thus Bottom.
The loop will advance 'i' again.
The option's value should follow
The other fields can be ignored.
The overlay might shadow things.
The result types are equivalent.
The source type is 'NSUInteger'.
The type name may be multi-part.
There are no conformance tables.
There is nothing more we can do.
There's no great way to do this.
These prevent GH from becoming F
They don't affect the structure.
This creates a second loop nest.
This file implements Type::walk.
This is enough for our purposes.
This is like a ref_element_addr.
This may cause user code to run.
This needs to get created first.
This securely "cleans" the file.
This subclass cannot be handled.
Thread-private ascii ringbuffer.
Tokenize w/o fixing split tokens
Trangle filter, default radius 1
Transforms state based on block.
Try to find an overridden entry.
Tuple lengths and elements match
Tuples depend on their elements.
Type-check the body of the loop.
Types don't have compound names.
Un-escape escaped single quotes.
Unknown connection string option
Unlink the outgoing defer edges.
Use SILOneValueOneOperandLayout.
Use information of a stack cell.
Use sizeof(float) bytes of input
Wait for a resonse from the user
Walk into all the catch clauses.
We already visited the children.
We can ignore the dealloc_stack.
We did consume, so reinitialize.
We didn't find any side effects.
We do this even for a parameter.
We don't really care about this.
We fail if there is no solution.
We found an enum initialization.
We found only one trivial field.
We have a resilient conformance.
We have seen this member before.
We might not have a parent type.
We need to borrow the base here.
We need to insert a store later.
We need to use the lvalue logic.
We only break once per location.
We only look at value witnesses.
We reached a user of CurrentDef.
We're halfway through a bytecode
Where to get hi to lo bytes from
Where to get lo to hi bytes from
Windows sleep takes milliseconds
Write out fragile WitnessTables.
YYLAST -- Last index in YYTABLE.
abort so we catch it as a crash.
add all functions this class has
allocate the modification struct
and any continuations that match
attributes don't have attributes
because strong_iterators_exist()
bits of precision in G histogram
break is missing *intentionally*
cannot safely unset upper range.
case T_UTF7: // aliases T_STRING
character-set, transfer-encoding
check 1 or 2 month and separator
check 4 digit year and separator
check for numeric (int or float)
class AsyncMysqlQueryErrorResult
class AsyncMysqlRowBlockIterator
clean up once event is processed
clear http input identification.
client is gone, just eat the msg
comparison match reduce strength
constants for easter calculation
consumes a ref on counted values
convert palette to libpng layout
convert windows drive paths (eg.
copied from yy_switch_to_buffer.
copy declared return type (hack)
copy str, replacing '.' with '_'
could do this in a simplify pass
counts nesting for T_TYPELIST_LT
create a socket for this address
create function/method statement
current position in input buffer
debugging and info/stats support
decrefs src, but src is a string
detect filetype from first bytes
do not delete intermediate files
do regular backreference copying
don't let XMLNode try to cleanup
error occurred changing cwd back
expecting a chunk of whitespaces
fail on any non-basic code point
fall through if not KindOfString
fetch more rows into the buffers
final sorted list of cluster ids
first letter of an encoded chunk
gd interface to freetype library
gdMalloc'd storage for the above
gdkanji.c (Kanji code converter)
get ready for the next iteration
grow (or shrink) dynamic pointer
handle enclosure delimited field
if there is a new peak, store it
in-memory cache entry is expired
index for the candidate property
intra-BB retain/release merging.
is the length of the result path
key is a long long int in cygwin
let's bypass trying to load vdso
liveness of member base register
load the needed chunk from mongo
make a new array to hold aliases
make a new array to hold mapping
matches almost anything penalize
min distance to colormap entry i
no info found about that header.
now go back and set the type bit
object property and method calls
offset shared lib's base address
optional sub and exact obj mixed
other end is outside to the left
otherwise crop the prior segment
pixdata: the output data buffer.
pixdatainput rgba data buffer 2.
position of the phijmp or phidef
protocol conformance, identifier
re-use the same initial timeout.
register end address of function
reschedule if still in a context
return data as a dynamic pointer
rollback the current transaction
rsrc points to native collection
run queues until we are finished
save copy of mapping start event
set based tests with many suites
signed to catch underflow errors
some style invalid/unknown to us
special case for Jewish calendar
stdin must be handled specially.
stop skipping non 0xff for M_COM
swift_once wants this as an i8*.
that came from a factory method.
these can be made stack relative
to copy anything, but do anyway.
transition from empty to WAITING
tries to connect to the database
undo the safety (for comparison)
unknownRelease(null) is a no-op.
via a "self.property" reference.
we're okay to be zero based here
web request died, destroy object
zero-extending/truncating copies
"this" is automatically included.
(Just going un-asserted for now.)
(This comment is repeated there.)
(We also use it to resolve phis.)
- metatype to Protocol conversion
/ / The load is marked invariant.
/ / There are some complications.
/ For details see EscapeAnalysis.
/ Otherwise, this returns Type().
/ This is set in the second pass.
/ or a pessimistic would suffice.
2) Compare input type predictions
@objc enums must have a raw type.
A builder for metadata templates.
A page can optionally be provided
A region on a single empty block.
A transaction id must be provided
A weight for an inlining benefit.
Abort if "Mutable" appears twice.
Add BBRegion to the ParentRegion.
Add all results from this lookup.
Add any synthesized conformances.
Add it to the front of the chain.
Add it to the stats_count global.
Add the heap header if necessary.
Add the piece to the return value
Adjust the type of the reference.
Align without registering fixups.
Alignment must be a power of two.
All array types must be the same.
All classes conform to AnyObject.
All enums used by the uchar APIs.
All the builtin types are leaves.
Allocate a box of the given type.
Allocate the JPEG palette-storage
Allocate the object on the stack.
Allocate the protocol descriptor.
Already have an active connection
Also note this down as code error
Also, collect all of the 'opens'.
An argument has one result value.
An entry in the dependency graph.
Analyze the argument information.
Any empty value is a valid value.
Are we performing the actual DSE.
Argument extraction and printing.
ArrayData objects could be static
Arrays of arrays are not allowed.
Ask the runtime to store the tag.
Assemble the parameter type list.
Attempt to open optional log file
Bail out if there are any errors.
Be conservative and don't zap it.
Be conservative and return false.
Bind all the static prop handles.
BitVector manipulation functions.
BoxR) already do the right thing.
Branch to the continuation block.
Bridge via _ObjectiveCBridgeable.
Build the specialized-rows array.
Build wrapper and add to results.
Bump the degree of the adjacency.
Calculate r2r1 / HALAKIM_PER_DAY.
Calculate the century (year/100).
Can't handle non-zero ptr values.
Cannot handle throwing functions.
Canonicalize boolean comparisons.
Capture the first parameter name.
Check all default witness tables.
Check copying of const_iterators.
Check for certain standard types.
Check for duplicate enum members.
Check for matching ExpectedTypes.
Check for missing argument error.
Check for the 'not set' sentinel.
Check if next exists in the Decl.
Check that the result isn't null.
Check the generic parameter list.
Check the rest of the gzip header
Check whether the low bit is set.
Check whether the metadata match.
Checking specialization dropping.
Choose a register to be the hint.
Classes can inherit from a class.
Classes do not alias non-classes.
Classify how close this match is.
Clone the basic blocks in a loop.
Closures do not have destructors.
Collect all uses, before casting.
Collect blocks to tail duplicate.
Collect results from the searches
Collect the parameter type names.
Compare low 32bits of each source
Compute the set of substitutions.
Configure the dominance resolver.
Consider the graph fragment:  ...
Constrain the 'self' object type.
Construct an AAWH from the array.
Continue if the value is present.
Continue looking into the parent.
Convert the argument to a string.
Convert the target to an integer.
Convert to a Clang function type.
Copied from BridgeObjectTypeInfo.
Copyright (c) 2009 Keynetics Inc.
Could be one of the following: 1.
Create a LineTable from `srcLoc'.
Create a TaskQueue for execution.
Create a fresh archetype builder.
Create a new entry for the cache.
Create a new member lookup table.
Create the appropriate LLVM type.
Create the instruction if we can.
Create the integer literal value.
Create the new generic parameter.
Create values for the leaf types.
Current rc-identity we are using.
Custom scanner for entire object.
Data is contained within "boxes".
Decode and print each instruction
Decode the default argument kind.
Defines a unique inline location.
Delete the old apply instruction.
Destructure the input tuple type.
Determine the calling convention.
Determine the parameter bindings.
Determine whether it's canonical.
Dig out the protocol conformance.
Dig out the type of the variable.
Disble function entry/exit events
Discard time, xflags and OS code:
Do linkage of the generator's AR.
Do not resolve volumes (for now).
Dominator information to be used.
Don't log "self" in a constructor
Don't resolve generic parameters.
Don't try to convert +/- infinity
Drill down to the member storage.
Else keep trying to find a space.
Elsewhere, we assume it's a type.
Emit a 'destroyBuffer' operation.
Emit a 'projectBuffer' operation.
Emit a sequence of catch clauses.
Emit debug info for the metadata.
Emit the base location operation.
Emit the conformance constraints.
Emit the deallocating destructor.
Emit the initialization sequence.
Emit the thunk if we haven't yet.
Erase a function from the module.
Erase any overridden declarations
Exit is a very special snowflake.
Explode the inner direct results.
Extract the protocol conformance.
FIXME: Better ambiguity handling.
FIXME: Compatibility equivalence.
FIXME: Deal with broken recursion
FIXME: Get the actual diagnostic.
FIXME: Handle IBOutletCollection.
FIXME: Map source locations over.
FIXME: Poor location information.
FIXME: Totally bogus fallthrough.
Fail if the cases are too sparse.
Fail if this isn't an assignment.
Fall back to a generic array get.
Fast path: we don't have a tuple.
Fields are imported as variables.
Figure out the non-fixed offsets.
Figure out which parameter it is.
Finally, update m_used and return
Find an unqualified enum element.
Find other potential definitions.
Find the initialization function.
Find the start of the given line.
First try to load the ini setting
Fix the lifetime of a live value.
For each Leaf we have as input...
For now only describing the data.
For now, never promise atomicity.
Forget the decl being invalidated
Form a reference to the function.
Function argument symbolic flavor
Function parameters are siblings.
Generally this will crash the VM.
Generate IR for the SIL Function.
Generate the local function body.
Get index of expression in tuple.
Get number option value as string
Get offset range for the pc only.
Get the superclass of current one
Get the underlying array pointer.
Go and actually compress the data
Grab our relevant callee types...
Grab the context if it was passed
Grab the depth if it was provided
Grab the file/line for the frame.
Grab the pretty-printed location.
Grab the standard exception type.
Handle the fully inlined Builtin.
Handled at the EnumElement level.
Helper for iterator instructions.
Hide private stdlib declarations.
I very much doubt you can see it.
If S is not contained in L, then:
If false, / uses forced bridging.
If it's already in memory, great.
If it's inout, we need writeback.
If it's known non-null, use that.
If not, we allow all connections.
If set, delete the session cookie
If so, we have to do some fixups.
If the type is right, we're done.
If there is a conflict, complain.
If we are detached, short circuit
If we didn't find one, create it.
If we failed, return nil or trap.
If we have a dead argument, bail.
Ignore fix_lifetime instructions.
Ignore uses of disjoint elements.
Implementations of the Swift heap
Implemented in SILGenPattern.cpp.
Implode the outer direct results.
Import generic arguments, if any.
In either case, we've visited it.
In this case nullptr is returned.
Incrementally build the DIRefMap.
Indent the body of the Fix-It if.
Individual instruction statistics
Information about builtins usage.
Initialize the NamedEntity table.
Is last char * - charset encoding
Is this a one iteration function.
It will be added later if needed.
It would be nicer to re-use them.
It's the first one in the list...
Iterate over the "hosts" document
Just consider it to be a clobber.
Just emit a generic message here.
Just look at the first character.
Just return the spot to continue.
Just send the class name instead.
Length of the quote-escaped match
Let the instance remove the node.
Let's extend our lifetime region.
Let's invalidate everything else.
Literal and constant instructions
Load the SIL if we have a module.
Locators used in this expression.
Look for any free type variables.
Look for imported operator decls.
Look for leading number by itself
Look for members within the base.
Look through all try expressions.
Look through property references.
Look up the case inside the enum.
Lower xor with immediate to xorqi
Make a really fake-looking class.
Make a reference to the callback.
Make sure target loc is after loc
Mark the hash entry as "deleted".
Merge initialAttrs with outAttrs.
Missing /tmp or similar directory
Multiple defaults are not allowed
Name is something like: add_Int64
NativeData types might leak these
Never 'use namespace swift::sma'.
New substitution for this callee.
No coercion or cast for Variants.
No idea why, but zend does this..
No integer keys so nothing to do.
No need to setLocalDiscriminator.
No other types have superclasses.
No use of Eval in our ini strings
No zero digits have been scanned.
Nominal types might have parents.
Note that this is an initializer.
Note: Copied from object-data.cpp
Note: templates are not imported.
Now examine the action component:
Now try to bring it into the AST.
Now visit the loop nest in a DFS.
Null-terminate the UTF-16 string.
Offset could be treated as a long
Ok we found a value in the cache.
Ok, we found the case for our BB.
Okay, remember this substitution.
Okay, specialize on the argument.
One ends before the other starts.
Operator lookup is always global.
Optional subscripts in protocols.
Optionally add .xt file extension
Otherwise advance the sequence...
Otherwise create a release value.
Otherwise explode and re-implode.
Otherwise it returns a new index.
Otherwise return an empty SILType
Otherwise we just output as lower
Otherwise, create a new function.
Otherwise, find the conformances.
Otherwise, project from the base.
Otherwise, remember it for later.
Otherwise, this has to be a type.
Otherwise, walk the lookup table.
Otherwise, we can't support this.
Otherwise, we have type metadata.
Otherwise, we leave retType null.
Otherwise, we need a cache entry.
Otherwise, we need to compute it.
Otherwise, we need to reabstract.
PHP 7 allows widening conversions
Parse the ':' followed by a type.
Parse the generic parameter list.
Parse the optional 'where' guard.
Pass through any subsystem flags.
Paste into dot -Txlib or similar.
Perform forward copy-propagation.
Pick one variable of the pattern.
Pre: direct_successor(pred, succ)
Prefer a path from the OutputMap.
Prefer value decls to extensions.
Prepend "llvm." and change _ to .
Print a single flag if it is set.
Private imports from this module.
Protocol properties have no impl.
Push autoload, defaulting to true
Quick and dirty octal conversion.
RAII guard for function creation.
Read the declarations and macros.
Read the sector allocation table.
Record the inherited conformance.
Recover from erroneous extension.
Recurse into nested declarations.
Recursion level for this function
Recursively check all successors.
Recursively walk tuple arguments.
Register constraint restrictions.
Register these types for testing.
Remove the old Apply instruction.
Removes whitespaces from the end.
Replace the existing completions.
Request new APIs from Foundation.
Reschedule if still in a context.
Reserve space for the FDE length.
Resolve the base type, if we can.
Resolve the pattern in the label.
Resolve the super type of 'self'.
Resolve type constant, if needed.
Result of eval or custom function
Retrieve the 'Iterator' protocol.
Retrieve the 'Sequence' protocol.
Return if there's no abstraction.
Return the callee of a once call.
Return true iff the key is found.
Returns true iff merging happend.
Run them under a malloc'ed stack.
SIL functions cannot be variadic.
Same applies to optional members.
Save the parsed map to the owner.
Scan backwards for a preposition.
Scan for supplementary characters
Scan the chain of inlined scopes.
Scan until we find the right one.
Set its next block appropriately.
Set the match location in subject
Set to true once we have a match.
Set up the final emission passes.
Settings constants before looping
Shouldn't need this side channel.
Simple case: forced checked cast.
Simplifies basic block arguments.
Simplify the block argument list.
Since we are overwriting, decref.
Skip declarations in other files.
Skip generated, internal methods.
Skip over same-type requirements.
Skip the foreign-error parameter.
So it makes sense to stay packed.
Sort the indices and unique them.
Special handling of class SoapVar
Stack of in-progress fpi regions.
Standard allocator for TypeReprs.
Statics Server session properties
Store Uninit to tvRef and tvRef2.
Store back to the cache variable.
Store the witness table pointers.
Structs do not alias non-structs.
Supertypes of the specified type.
Swift.ImplicitlyUnwrappedOptional
Switch over the no-payload cases.
TODO figure out how to use compar
TODO: Add properties to protocol.
TODO: Change this into an assert.
TODO: I am writing this too fast.
TODO: Make the test more precise.
TODO: Only one "types" is allowed
TODO: add noreturn serialization.
TODO: check name space separately
TODO: collect the witness tables.
TODO: not all elements converted.
TODO: properly handle task began.
Tab-expand all leading whitespace
Tail-allocate space for the UUID.
Take out locations that are dead.
The argument is no longer in use.
The argument should be a closure.
The array reference is invariant.
The basic block name is optional.
The capture may be worse aligned.
The context type must be a tuple.
The count is the second argument.
The count of the allocated array.
The function is always an rvalue.
The last part is the salt string.
The memory object has class type.
The next counter value to assign.
The node is intentionally leaked.
The original source is redundant.
The protocol conformance checker.
The tuple record itself is empty.
The vector of found declarations.
The worker should exit gracefully
Then check that we have a global.
Then parse all the library files.
Then they evaluate to their body.
There's an ignored i8* parameter.
This file has not been truncated.
This includes local declarations.
This is *amazingly* unprincipled.
This is a non-strict computation.
This is character-set independent
This is fast, but may be brittle.
This profiler is very, very slow.
This routine claims the argument.
This use is a copy of CurrentDef.
Thread might have already exited.
To give other consumers a chance.
Tokenize with fixing split tokens
Track the new location and value.
Track the projections of the box.
Try each of the bindings in turn.
Try to find a "necessary column".
Turn the pointer into an address.
Type-check this conditional case.
TypeInfo for loadable enum types.
U+FDD0...U+FDEF are also reserved
Unpack our inner payload, if any.
Update HHIR mappings for AsmInfo.
Use sizeof(double) bytes of input
Use the dynamic thunk if dynamic.
Variadic arguments handled below.
Verify that the submodule exists.
Visit all of the inherited types.
Was inFile, but won't be anymore.
We already have this requirement.
We are performing dynamic lookup.
We can always take from the copy.
We can cast to ObjC existentials.
We cannot analyze without target.
We create SILGlobalVariable here.
We currently assume this is done.
We do not, conversion is trivial.
We don't know what this field is.
We don't need the object anymore.
We have a designated initializer.
We have entries for this context.
We just assume this might happen.
We know this will always succeed.
We model this with the constraint
We'll resolve this somehow later.
We're ORing with zero, do nothing
We're in the resumable we expect.
We're past the end of the buffer.
Where are we on the stack now vs.
Windows hates argument registers.
Worklist for visiting all blocks.
Write the contents of the buffer.
Writes SIL out to the given file.
X509_REQ_free(nullptr) is a no-op
YYNNTS -- Number of nonterminals.
YYNTOKENS -- Number of terminals.
already determined to be nonempty
also including the default value.
append bit length of hashed data:
block had some type guard relaxed
break ref() from previous section
busy wait until value is updated.
case PHP_ICONV_ENC_SCHEME_BASE64:
case PHP_ICONV_ENC_SCHEME_QPRINT:
check 1 or 2 digit time zone hour
check Strings with embedded nulls
check that exp starts with a name
check that offset is within range
check that this isn't a system ns
classes containing exact pointers
continuing from the previous line
current instruction in the Label.
current maximum object identifier
document consists of next element
don't format doubles as integers.
don't try to write the data twice
dump starting from the hot region
extract public key from X509 cert
failed creating the child process
fall through to SORT_REGULAR case
finished if we found the boundary
for the modification hashtable...
fsock: treating sockets as "file"
gd 2.0: we now support truecolor.
get the system.indexes collection
handle single line of status code
horizontal segment of scan line y
if not already most-recently-used
implicit label position per block
increment access counted for hash
is the end of the current segment
isSuperGlobal is not wanted here.
it's a constant, so it is nowhere
light process is not really there
list of patterns and replacements
main loop to parse TIFF structure
mark_uninitialized is never dead.
mysql lied about the column width
namespace HPHP::ExtensionRegistry
no need to record duplicate names
now invalidate all un-used labels
order functions and merge cluster
other end is outside to the right
preveprev becomes new end of list
read the required number of bytes
redeclared class is also volatile
register compacted chunk with gdb
remove entry if load got deleted.
remove previous shutdown function
remove trailing space, if present
return the number of bytes copied
ripemd128 block update operation.
ripemd160 block update operation.
ripemd256 block update operation.
ripemd320 block update operation.
rodata, which is always dependent
sanity check liveness computation
save copy of sequence start event
see yyrealloc() for (char *) cast
set protection buffersize to zero
skip over leading spaces or zeros
so we initialize runtime properly
src is the target type or better.
statics used by the Xenon classes
sum of all previously read chunks
terminate the string, remove CRLF
tested in test_xbox_task_result()
thread-local cached coverage info
time separator is T or whitespace
to test cpy is still working fine
toggle autocommit behavior on/off
too many links or broken symlinks
try to map the name to the column
undo effects of setting up yytext
value ptr of tiff directory entry
walk out through all the closures
warm up the s_filter_request_data
where T is a fresh type variable.
x64 SSE class argument registers.
- metatype to AnyObject conversion
/ If the array is empty, use null.
/ It should be removed when fixed.
/ TODO: This is only a workaround.
/ This is null for top level code.
A C function imported as a method.
A REPL directive, such as ':help'.
A builder for ForeignEnumMetadata.
A property with exactly this name.
A test fixture with version ranges
Abstract description of a scanner.
Add args for any pattern variables
Add lower PC bound to function DIE
Add pending iterator if applicable
Add the diagnostic consumers back.
Add the error code's error message
Add the exit slot to the analysis.
Add the given number of arguments.
Add the type and the original size
Add to outer loop if there is one.
Add to the score based on context.
Add tuple completion (item, item).
Adjust the position of the tokens.
Advance the enum element iterator.
Allowed datatypes for property_set
Always clone the ivar descriptors.
Always print rvalues, not lvalues.
Always strip off type information.
Analyze return result information.
Append it unchanged to the result.
Apply instruction being optimized.
Arclite depends on CoreFoundation.
Ask the runtime what case we have.
Assume all submodules are missing.
At least 1 color must be allocated
Attempt to read the witness table.
Ban value-to-optional conversions.
Based on netpbm fixes by Alan Cox.
Bind the stream to a local address
Bound generic types are invariant.
Branch on the success of the cast.
Branch to the cleanup destination.
Bridge native functions to blocks.
Build a site to represent the URL.
But avoid this in the common case.
Byteswap an mmap'ed file if needed
C function imported as a function.
Calculate non-fixed field offsets.
Calculate the summary information.
Call the accessor if there is one.
Can't currently have array() info.
Can't really import variadics well
Casts are necessary due to xml api
Change address mode to kBase_Index
Check accessibility when relevant.
Check against the defined features
Check for "fsync" in options array
Check for an existing cache entry.
Check for array buffer allocation.
Check for swift object allocation.
Check if a precision was specified
Check out the operator attributes.
Check protocol conformances table.
Check that indexing is persistent.
Check that the mutating bit is ok.
Check the given list of protocols.
Check the raw values of the cases.
Check whether a constraint failed.
Check whether it has integer type.
Check whether it's already cached.
Check whether the base is 'super'.
Check whether we have a duplicate.
Chop of the beginning of the name.
Clean up a bunch of request state.
Cleanup after this initialization.
Close the current log file handler
Collect all the fields of a union.
Collect all the nested archetypes.
Collect conformances for the type.
Collect the same type constraints.
Common code for handling entities.
Compare to SILValues structurally.
Complain if we should have a body.
Compute livein set for each block.
Compute the re-sugared tuple type.
Compute the type of the reference.
Const-cast to inject into ASTNode.
Constants not found in ICU library
Consume bits from the input value.
Conversion to/from UnresolvedType.
Convert num to its decimal format.
Convert sampling interval to ticks
Copy all of the previous elements.
Copy and record the substitutions.
Copy argument into this temporary.
Count how many levels deep we are.
Counted as part sizeof(TypedValue)
Counters, just for debug printing.
Create a record for this function.
Create a reference to the witness.
Create an allocation on the stack.
Create edges for the instructions.
Create it in our current function.
Create it in the current function.
Create plans for all the elements.
Create the disjunction constraint.
Create the new address projection.
Creates an array with one element.
Current function we are analyzing.
Currently this is never dependent.
DCE instruction if trivially dead.
Deallocate an uninitialized array.
Default case, nothing extra needed
Demangle the associated type name.
Derive its extra inhabitant index.
Destroy and dealloc are both fine.
Destroy the start condition stack.
Destructor has no non-self params.
Destructure the result tuple type.
Determine the kind of conformance.
Did not find retain in this block.
Do another pass and kill them off.
Do nothing with error expressions.
Don't handle captured AllocStacks.
DynamicSelfType is actually local.
Emit Fix-Its to correct the names.
Emit a checked cast of a metatype.
Emit a reference to an ObjC class.
Emit abbreviation for RECORD_DIAG.
Emit all of the queue'd up errors.
Emit the implicit 'self' argument.
Emit the respondsToSelector: call.
Emit the subtree in its own scope.
Emit the value we're casting from.
Emit types and other global decls.
Empty store gives an empty sample.
End of section or an option offset
Enter a cleanup for the +1 result.
Enums depend on their enumerators.
Equivalent to Plan 9 chartorune().
Estimate the metonic cycle number.
Everything else is just an entity.
Everything else is non-exhaustive.
Exact prefix matches are the best.
Exception::getMessage method name.
Existential metatypes are trivial.
Expand if the pattern was a tuple.
Extract LSLocations from LoadInst.
FIXME: Deal with broken recursion.
FIXME: Decide what to do about ().
FIXME: Eventually it shouldn't be.
FIXME: Give the thunk a real name.
FIXME: Map into archetype context.
FIXME: Should probably cache this.
FIXME: Subscript trailing closures
FIXME: This doesn't belong on IGF.
FIXME: This is really unfortunate.
FIXME: This isn't a total ordering
FIXME: repack if not bit-identical
FIXME: take best contained result.
FIXME: the rest of body is ignored
Failing that, check for subtyping.
Fall back to our current directory
Fall back to savedFP in that case.
Fast path: no uncurrying required.
Fetch the metadata for that class.
Figure out what import to suggest.
Filter out redundant requirements.
Finalize the generic requirements.
Finalize the imported declaration.
Finally just use the default value
Finally, evaluate into the buffer.
Find the extraneous type variable.
Find the substituted storage type.
Find trait methods to be imported.
Finish up at the end of each pass.
First check if we have a function.
First, build the metaclass object.
For all instructions in the block.
For classes, check the superclass.
For closures, use the parent name.
For concrete caches, this is easy.
For each substitution Sub in AI...
For metadata patterns, we're done.
For now just always dump assembly.
For now just use a generic schema.
For recovery parse one if present.
Force it as "Used", if it conforms
Form type parameter substitutions.
Forward the constructor arguments.
Found at least one nonempty block.
Free TC-space associated with func
Generate a Jmp and return the src.
Get declaration of the superclass.
Get getCacheDir() from the context
Get the Application Context object
Get the SIL metatype of this type.
Get the arg if we haven't already.
Get the conformance and record it.
Get the heap metadata for the box.
Get the spare bits from this part.
Get values for all the properties.
Go find 'Any' in the Swift module.
Grab the first item off the stack.
Grab the new line if it was passed
Grow the buffer to sufficient size
HDF values take priority over INI.
Handle AnyObject in a special way.
Handle globals treated as members.
Handle inout bases specially here.
Handle leading and trailing quotes
Handle single-expression closures.
Handle the implicit rethrow block.
Helpers for comparison generation:
I added 15 extra bytes for safety.
If it doesn't just return fileurl.
If it has a Clang node (directly),
If so, emit a specific diagnostic.
If the entry fits our requirements
If the result is invalid, skip it.
If there is an argument, apply it.
If they are still different, fail.
If this has an address, return it.
If this is the target, we're done.
If we do change states continue...
If we found something, we're done.
If we got a subexpression, add it.
If we got to the root, we're done.
If we have a fixed offset, add it.
If we have to set the name, do so.
Ignore everything other than PBDs.
Ignore the value/buffer parameter.
Ignore this witness entry for now.
Import any interfaces implemented.
Import the underlying declaration.
In 3 cases do we need aggregation.
Initializers have argument labels.
Instance type check for the above.
Instruction which def'd each Vreg.
Is the argument a type variable...
Just need to hook up the new phis.
Just one of the two is a protocol.
Just use id for the receiver type.
Last row, or no row yet available.
Lastly, forward value to the load.
List of Authoritative Name Servers
Locals, iterators, and parameters.
Look for a __swift2_proto section.
Look for a __swift2_types section.
Look through argument list tuples.
Look through function conversions.
Look through identity expressions.
Look through implicit conversions.
Look up conformance in the module.
Look up the destructor of ClsDecl.
Look up the inherited conformance.
Lookup a function from the stdlib.
Lower-camel-case the incoming name
Macro expansion for function parts
Make a copy of the actual pattern.
Make sure null pointers stay null.
Make sure to print type variables.
Map the type to an interface type.
Map to a nominal type declaration.
Master routine for color selection
MayAlias, invalidate the location.
MemRefAnalysis availability state.
Merge from the predecessor blocks.
Move to the next dominating block.
Must provide the nothrow guarantee
NULL-terminate the argument array.
Need to add element number to name
Next, remove the copy_addr itself.
No bridging needed for native CCs.
No bytecode control flow in exits.
No point in hoisting generic code.
Non mutating array calls are safe.
Now do thin-to-thick if necessary.
Now that we do, this CFI is a lie.
Now tuneable thanks to Wez Furlong
Now we can go into a command loop.
Offset must be treated as a string
Ok now we make our transformation.
Ok, we have multiple predecessors.
Ok, we have some available values.
Okay, we have a closure signature.
Old senders will set version to 0.
Omit needless words from the name.
On windows, the max length is 256.
Only handle struct and tuple type.
Otherwise add it to our leaf list.
Otherwise pass it as Direct_Owned.
Otherwise, check for an ambiguity.
Otherwise, decrement our iterator.
Otherwise, delegate to the parent.
Otherwise, do a normal assignment.
Otherwise, increment our iterator.
Otherwise, it is a single element.
Otherwise, just release the error.
Otherwise, just return SILValue().
Otherwise, return the rvalue type.
Otherwise, try hoisting sub-loops.
Otherwise, we found it, break out.
Otherwise, we'll need a temporary.
Otherwise, we're down to a scalar.
Our best guess at the source root.
Outputs: Outputs code to the file.
PHP5 does not deduplicate cookies.
Packed packet headers, main header
Parentheses don't affect the type.
Parse a behavior block if present.
Parse an optional type annotation.
Parse identifier (',' identifier)*
Parse optional inheritance clause.
Parse the leading type-identifier.
Parse the protocol or composition.
Parses the current command string.
Pass the metatype of the subclass.
Peephole expects input eval state.
Perform a conditional cast branch.
Perform backward copy-propagation.
Perform basic layout on the tuple.
Perform classic SSA optimizations.
Pierre: crop everything sounds bad
Plan to expand from that location.
Pop the inlined frame in our IRGS.
Print inlined-at location, if any.
Process available complete blocks.
Process unknown read instructions.
Produce a correctly managed value.
Produce a fixit hint to remove it.
Produce a tracelet for the callee.
Profile takes precedence over hot.
Project out the optional callback.
Propagate this to sub-expressions.
Property lookup and accessibility.
Protocol conformance requirements.
Protocols don't have conformances.
Public methods are always visible.
Pull out the next binary operator.
Pull the class and property names.
RAII based coloring of SIL output.
ROTATE_LEFT rotates x left n bits.
Re-register if still in a context.
Record the unsatisfied dependency.
Record this same-type requirement.
Recover by creating a "_" pattern.
Recursively decompose tuple types.
Recursively walk the result types.
Redirect the incoming defer edges.
Refuse to draw if no style is set.
Remember the binding, and succeed.
Remove references to empty arrays.
Replace the old linker flag entry.
Report this record to the functor.
Request new APIs from libdispatch.
Reset the array's internal pointer
Resolve all of the type witnesses.
Resolve the assignment expression.
Resolve the types of the operands.
Results should always be the same.
Retrieve a replacement identifier.
Return a uniqued substituted type.
Return failure if at end of input.
Return false if there is overflow.
Return the number of bytes written
Return true if block was / merged.
Returns just the PID from the hash
Returns true if an error occurred.
Returns true iff changes are made.
Revert the generic parameter list.
Round up to the minimal alignment.
Save our old indent and increment.
Scan the box for interesting uses.
Schedule any that aren't complete.
See the implementation note below.
Self is always the first callsite.
Separate out the accessor methods.
Set AllArchetypes of the protocol.
Set state from Running to Started.
Set the "arch" platform condition.
Set the function up as the getter.
Set the search bits appropriately.
Set up the alloca insertion point.
Set up the imported header module.
Set up writebacks for the call(s).
Should we take control of the mang
Similar for Top, or InitCell, etc.
Sink one of the instructions to BB
Sink the fix_lifetime instruction.
Skip out of order non-token nodes.
Skip uninteresting type arguments.
So we can gdFree it with impunity.
Sometimes a paren is just a paren.
Start HHVM internal memory buckets
Stash the color map into the image
Statement Parsing and AST Building
Stolen directly out of the book...
Stop at an unescaped space or tab.
Store the protocol witness tables.
Store the tag into the spare bits.
Store untouched full datetimestamp
Subclass-to-superclass conversion.
Synthesize accessors as necessary.
TODO: 'swift_context' IR attribute
TODO: Eliminate the need for this.
TODO: Resolve persistent constants
TODO: Support server IP whitelist.
TODO: merge with emitIVA in unit.h
Temporary buffer for re-allocation
Test 3: Move empty over non-empty.
That is the *true* exiting region.
That's not a subtype relationship.
The callback gets the value at +1.
The callee function never returns.
The first element is the selector.
The generic parameter list itself.
The header needs to exit the loop.
The kind of initializer to import.
The kind of literal binding found.
The map of statements to counters.
The module that we are optimizing.
The range in the interface source.
The return value is the error code
The storage is completely trivial.
The string is ModuleName.TypeName.
The stubs are terminated by a ud2.
The symmetric difference is empty.
The two systems are not identical.
The type must refer to a protocol.
The type witness is still missing.
Then delete all user instructions.
Then demangle types until we fail.
Then until we have no work left...
Then, analyze indirect subclasses.
Then, print labels if we have any.
Therefore we don't know its value.
Therefore, blocks cannot be empty.
Therefore, just mark the function.
These do not call NSArray methods.
This block does not have a retain.
This can be called multiple times.
This function never returns error.
This is for use in the translator.
This is not a type-safety problem.
This is still better than nothing.
This member is accessed off of it.
This returns DAK_Count on failure.
This returns TAK_Count on failure.
This stops the diagnostic cascade.
This version performs no dithering
This will sort in ascending order.
Title: Matrix Group: Affine Matrix
Trace start of SourceKit operation
Translate the alignment to a mask.
Translate the arg to a memoize key
Truncate down to i32 if necessary.
Try the tuple-to-tuple conversion.
Try to find it in the cache first.
Try to open the module file first.
Try to perform cast optimizations.
Try to print a comment from Clang.
Turn on stack traces for coredumps
Turn this also into an index_addr.
Type arguments cannot be optional.
Type check the getter declaration.
Type-check the subject expression.
TypeAliasDecls need to be mangled.
TypeExpr's are relabeled by CSGen.
Undo effects of setting up yytext.
Unpack our extra tag bits, if any.
Update the predicted type for `l'.
Use a fixed offset if we have one.
Use the Apple System Log facility.
Use the saved index if applicable.
Use this bit as a payload tag bit.
Variadic tuples are not permitted.
Version components can't be empty.
Version, Passes, and Digest Length
Visit nested potential archetypes.
Walk the base in a getter context.
Walk through non-binding patterns.
We always have at least one entry.
We are therefore ready to move on.
We can directly reuse the address.
We can ignore most use kinds here.
We can't bridge thin types at all.
We couldn't solve this constraint.
We failed to constant propagate...
We have a matching ref count inst.
We have an argument name mismatch.
We need the same accessor on both.
We only want positive step values.
We're constructing something else.
We're done recording the solution.
We're mapping into a type context.
We've found a non-option argument.
We've found a retain on this path.
When that happens, update topFunc.
Write the declarations and macros.
XXX good candidate for refactoring
Y, U, V: the input data buffers 4.
Zero out the private storage area.
`safe' read for sockets and pipes.
add upper PC bound to function DIE
advance errorptr to current column
allocate buffer we'll pass to odbc
allow multiple '/' for readability
and now remove them from the stack
another block was merged into this
any other problem is a fatal error
b) Size-tracked small allocations.
binary test if pattern is not text
bits of precision in B/R histogram
bits of precision in R/B histogram
buffer isn't completely full, fail
builtin function and static method
but normal workers should proceed.
cache still growing - add new elem
called only if extra args are used
cannot end in : without previous :
character appears in ISO-8859 text
check 2 digit minute and separator
check against static content cache
check all functions this class has
check before calling this function
check if we need to add any fields
copied from hphp_switch_to_buffer.
couldBe is symmetric and reflexive
crc32 of current working directory
default to 50s (to match libevent)
delete the converter just in case.
desired fd number in child process
destroy event and its private data
don't care about other event types
expr-literal: /     string_literal
filled in by instantiator function
find and apply the filter function
first letter of a non-encoded word
flag optional arrays not allocated
for calendar calculation purposes.
get the collection we just created
gethostname may not null-terminate
given a method defined as func ...
guess weight for non-inferred arcs
here it means "it's a PHP file"...
if _id field doesn't exist, add it
if a match is found it is set to 1
if main entry matches, print it...
immediate has only low 32 bits set
immediate has only low 48 bits set
insert n into output at position i
link in the cram-md5 authenticator
loops until end-of-file is reached
make sure we've computed the type.
max2 is only called for 2 operands
methods with a cls() and functions
min2 is only called for 2 operands
needed if any date part is missing
new C() inside trait or pseudomain
non-shortest form or outside range
not supported, but could be later.
now copy the chars after the point
now we know exactly how long it is
paired with decRefCount() at below
paired with worker's decRefCount()
point in the phonization we're at.
pointer to next byte to read/write
presume minimum key collisions ...
pretend we don't have any argument
process it using the bit position.
read all PNG info up to image data
refine_public_statics never called
remove '..' and previous directory
remove explode()'s last empty line
resources have a separate id space
running position of rotated string
save the type variables (generics)
search for the end of the boundary
set/clear intercept for RPC thread
shadow process doesn't use g_procs
since this buffer can be quite big
skipping to the last error we have
stores the last diagnostic message
strip high/strip low ( see flags )
turning this off clears the errors
union of subCls and clsExact mixed
union of subObj and objExact mixed
we may have properties from traits
we should be able to improve this.
we tolerate this in TraceProfiler.
work-around for longtext and alike
- Last solution: average the colors
- Nodes should only be walked once.
/ / (1) An "out" or inout argument.
/ / Only intended for source files.
/ / Valid: NumElements, OuterResult
/ Return the hoisted self argument.
2.0.12: this is finally a parameter
@nonobjc will silence this warning.
@return the allocated buffer state.
@warn_unused_result with arguments.
A builder for ForeignClassMetadata.
A cast is almost like a projection.
A class for lowering Clang records.
A lexical scanner generated by flex
A local reference is not a capture.
A method call using dynamic lookup.
A stream for counting line numbers.
API interface to fetch a connection
Add a padding argument if required.
Add an Argument to the basic block.
Add the entry slot to the analysis.
Add the pass to the pass manager...
Add this as an external definition.
Add this entry to the lookup table.
Adjust result type for failability.
All SILFunctionTypes are canonical.
All branches are considered useful.
All other instructions marked dead.
All such operations return a tuple.
Allocate Floyd-Steinberg workspace.
Always have something on the stack.
An initialization of a local 'var'.
And gives its output to the linker.
And only do it in optimized builds.
Annotate the x86 with its bytecode.
Append the address to disambiguate.
Apply the mask if it's interesting.
Are we building genset and killset.
Assume new array is on top of stack
Assumes it is not already attached.
Assumptions: Chars are 8 bits long.
Attempt to find the unit/line combo
Bail if it is a declaration already
Bail, if there is no self argument.
Beyond here, we're using AnyObject.
Boxes are always native-refcounted.
Branch straight to the destination.
Break out when the end-tag is found
Build the parameter witness method.
But not enums with enums with data.
But you gotta do what you gotta do.
C-style escapes are also supported.
CODE has a useless total size field
Call the debugger hook and continue
Can never trust these PHP people...
Can only change the array argument.
Cannot extend a bound generic type.
Check if conversion was successful.
Check if the store is the only use.
Check if we already had a raw type.
Check nullability of the parameter.
Check that non-terminators look ok.
Check that the raw value is unique.
Check the availability of the type.
Check whether the macro is defined.
Check whether the new self is null.
Check whether we have an extension.
Choose the swiftmodule output path.
Clang is doing the same thing here.
Clone the basic blocks in the loop.
Clone the struct for the end index.
Coerce memoized methods to private.
Collect all the primary archetypes.
Compare the type variable bindings.
Compile regex or get it from cache.
Complain if that isn't what we got.
Complete the conditional execution.
Compute the signature optimization.
Consider whether we can share them.
Constants for MD5Transform routine.
Convert the result to a Builtin.i1.
Copy COUNT objects from FROM to TO.
Copy of the Vreg's def instruction.
Copy src to string dst of size siz.
Copy the array.props argument call.
Copy the body MaxTripCount-1 times.
Copy the locale into all categories
Copy-initialize with the new value.
Copyright (c) Christos Zoulas 2003.
Could re-enter to run a destructor.
Create a new scope to reflect this.
Create a release to balance it out.
Create the argc and argv arguments.
Create the initializer declaration.
Create the new retain instructions.
Create the true block if requested.
Cursor related read/write functions
Custom coercion rules for key types
Data flow may take too long to run.
Deal with any cycles we encountered
DeallocateLocation initially empty.
Default implementation: Use strlen.
Default to public external linkage.
Deferred string result and metadata
Delete the instruction and move on.
Demangle the associated type chain.
Derive the callee function pointer.
Destination must be the allocation.
Destroy the alloca insertion point.
Determine the assignment semantics.
Determine the frontend mode option.
Determine the number of parameters.
Diagnose the lack of initial value.
Diagnose this problem, if asked to.
Dig down to the type we care about.
Dig out the Objective-C superclass.
Directly call the peer constructor.
Disable the cleanup for this value.
Discard the implicit _cmd argument.
Do not recurse into other closures.
Do nothing with input, just skip it
Do what the zend-collator code does
Don't consider comments to be this.
Don't mark Swift decls as imported.
Don't match anything in a protocol.
Don't show generic type parameters.
DynamicSelfType preserves variance.
Each core filter has its own radius
Each protocol gets a witness table.
Emit an 'allocateBuffer' operation.
Emit the epilog into the epilog bb.
Emit the epilogue for the function.
Emit the ivar destroyer, if needed.
Emit the prologue for the function.
Emit the unreachable block, if any.
Encode Y,U,V and write data to file
End of the last delimiter match + 1
Enumerate conformance requirements.
Eval PHP code to get default value.
Evaluate it directly into the enum.
Evaluate the reference into memory.
Everything else requires accessors.
Expression Parsing and AST Building
Extract LSLocations from StoreInst.
Extract and switch on the tag bits.
Extract the class instance pointer.
Extract the paths from the builder.
FIXME conformance for concrete type
FIXME: Dropping substitutions here.
FIXME: Emit a warning of some kind.
FIXME: GSSAPI isn't implemented yet
FIXME: Handle multibyte characters.
FIXME: Look through the superclass.
FIXME: Report it as failed request.
FIXME: Resolve through name lookup.
FIXME: Skip Microsoft __interfaces.
FIXME: This doesn't cope with bzip2
FIXME: This feels very, very wrong.
FIXME: This isn't a total ordering.
FIXME: This location info is bogus.
FIXME: This should be more general.
FIXME: ThreadSafeRefCntPtr is racy.
FIXME: We don't handle remarks yet.
FIXME: const-ness on the clang API.
FNV-1 hash each octet in the buffer
FNV-1 hash each octet of the buffer
Failed to find a type we can extend
Fatal if any arguments are variadic
Fetch the metadata as a tuple type.
Figure out the type of the indices.
File written with different format.
Filter out inappropriate overloads.
Filter out redundant results early.
Finally we can erase the epilog BB.
Find canonical induction variables.
Find that offset into the metadata.
Find the Nth argument passed to BB.
Find the actual type of the source.
Find the appropriate function type.
Find the elements we need to touch.
Find the self index for the getter.
Find the self index for the setter.
Find where the field offsets begin.
Fine to have unbound generic types.
Finish off the epilog by returning.
First directory starts at offset 8.
First, bind type metadata for Self.
Fix up argv to have the right type.
Flattened inner parameter sequence.
For added safety, we only leave -_.
For flow control only at this time.
Forward the captured value address.
Forward the indirect return values.
GD_SUCCESS on success or GD_FAILURE
GenSet and KillSet initially empty.
Get arguments and do error checking
Get the corresponding context type.
Get-only properties are (readonly).
Gets its class name from 1st column
Getter has none, setter has one arg
Go find 'Void' in the Swift module.
Go through all uses of our closure.
Grab the exception name and message
Grab the new state if it was passed
Handle falling out of the do-block.
Handle only integer values for now.
Handle the CPU and its preferences.
Handle the last unsubstituted case.
Handle wrapping an Optional target.
If it's null, then we return false.
If not, we can't explode to a load.
If that fails, just print the name.
If the entry is a witness method...
If the locator is empty, ignore it.
If there was an argument, apply it.
If we are not done, print the ", ".
If we can't zap this instruction...
If we had a valid value, return -1.
If we have a definition, return it.
Ignore fields with a default value.
Ignore indirect parameters for now.
Ignore parens and other easy cases.
Ignored, Impl.FilePath will be used
Import the full name of the method.
Import the setter, if there is one.
Import the underlying integer type.
Increase the file descriptor limit.
Inherit swift3_migration attribute.
Initialize static props for parent.
Initialize the Compression routines
Initialize the dominator tree info.
Initialized by the setup operation.
Insert a release in the success BB.
Instance property, look beyond self
Invalidate all cached SILFunctions.
Is the array type a contextual type
It comes up during switch emission.
It serves two purposes at once:  1.
Just a dumb implementation for now.
Just consume the incoming argument.
Just diagnose this as an ambiguity.
Just forward the incoming argument.
Just in case TRACE_RB changes errno
Lastly, mark the old store as dead.
Layout information for class types.
LdObjInvoke t1:Cls doesn't simplify
Leave only attribute name without *
Load and check whether it was null.
Load property and check for uninit.
Look at the next letter in the word
Look through artificial subclasses.
Look through one level of optional.
Look up the top-level module first.
Loop over all unmatched breakpoints
Lower bound for this type variable.
Lower the unabstracted result type.
Make sure color count is acceptable
Make sure it is, in fact, the best.
Make sure we can handle the inputs.
Make up a key for readCachedModule.
Make year always a positive number.
Mangle the error result if present.
Map an ExtInfo for a function type.
Map categories known to the reader.
Map from a different tuple element.
Map the indirect return if present.
Maps global variable name to an ID.
Mark all region's nodes as covered.
Mark that the function type throws.
Mark this basic block as processed.
Metatype is already an ObjC object.
Mitchell filter, default radius 2.0
Modules are never instance members.
Moreover the strings must be static
Multiple values, must use a bitset.
Must use resilient access patterns.
NSZone parameters default to 'nil'.
Need to be wary of old-style ctors.
New sprintf implementation for PHP.
No need to flush a file descriptor.
No new instructions were generated.
None of the candidates were viable.
Not yet handling nested archetypes.
Note this case must never return 0.
Now get last part - the description
Now see if the source also has one.
Number of keys position to allocate
ObjC protocol names aren't mangled.
Offset 0 is used for empty strings.
Only empty instances compare equal.
Only function types may be generic.
Only handle imported ObjC generics.
Only valid for reabstraction kinds.
Opcode, Func, Dest, SyncPoint, Args
Otherwise, apply the default rules.
Otherwise, create the retain_value.
Otherwise, emit an access function.
Otherwise, keep scanning the block.
Otherwise, print the Builtin Types.
Otherwise, produce a candidate set.
Otherwise, resolve the declaration.
Otherwise, return the return value.
Otherwise, store the single scalar.
Otherwise, the result is identical.
Otherwise, use the default failure.
Otherwise, we have to do lookahead.
Override cipher specs if necessary.
Override the name on the attribute.
PHP5 xdebug returns "" for no class
Parse static initializer if exists.
Perform standard value name lookup.
Perform whole-module type checking.
Please send bug reports to David M.
Pointer to current parsing position
Prepare generic target information.
Preserve parens when opening types.
Pretty-print the SILModule to errs.
Print Ext and add sub-types of Ext.
Printers for the underlying stream.
Private utf8_strlen implementation.
Probably not actually autoreleased.
Project the address of the element.
Property already exist - make array
Public static property information.
Push a writeback for the temporary.
Push the next child onto the stack.
Put CurPtr back into buffer bounds.
Randomly choose which half to keep.
Recognize this and produce a fixit.
Record additional weight increases.
Record optional adjustment, if any.
Record the adjacent type variables.
Recover by just ignoring the label.
Recurse into protocol compositions.
Register dirtiness: thread-private.
Release on a functionref is a noop.
Relocate the metadata if necessary.
Relocation is not supported on arm.
Remove all old retain instructions.
Remove any constraint restrictions.
Remove null elements from the list.
Remove the blocks we never reached.
Remove the old retain instructions.
Replace AllocStacks with Phi-nodes.
RepoAuthoritative mode unit caching
Return false if we can't find them.
Return the last extract we created.
Return the resulting witness table.
Return the size reported by a type.
Return true if an error is emitted.
Returns true iff changes were made.
Returns whether any states changed.
Scalar-to-tuple and tuple-to-tuple.
Scan an unsigned or signed integer.
See if the repr resolves to a type.
See if we're in an Xcode toolchain.
Set LegalUsers to false and return.
Set to true if both sides are zero.
Set up the current x and y position
Shift the selected bits into place.
Similar to above, but with mulodi4.
Simplify the type we're casting to.
Skip declarations in other modules.
Skip the next same-type constraint.
Slight hack: see comments in hphp.y
So it must be BLOCKED on something.
So we just cause an stl alloc here.
So we move it into the zombie list.
Split into before and after ranges.
Subscript decls have function type.
Subscripts use a specific selector.
Switch over the cases for this tag.
Switch to a different input buffer.
TODO: Sink more than just integers.
TODO: Support fragile initializers.
TODO: This should not be necessary.
TODO: handle enums with array data.
TODO: set up Outputs appropriately.
TODO: these need to be implemented.
Take the payload from the optional.
Test 4: Move source over identical.
Test if it is the exact same class.
That's enough to build the l-value.
The context is in the highest slot.
The declaration of Swift.OptionSet.
The existential value being opened.
The group info file does not exist.
The list of identical instructions.
The projected value is the payload.
The resulting set of substitutions.
The source may be optionally inout.
The value must not be KindOfUninit.
Then grab the terminator of Pred...
Then if we have a struct address...
Then until our worklist is clear...
Then until the worklist is empty...
These are all expected to be equal.
They are in a transparent function.
This BB copy branches to SuccessBB.
This can be extended in the future.
This doesn't apply to autoclosures.
This function is called many times.
This is always just a bare pointer.
This is not a malloc/realloc check.
This is the first or last character
This is to match zend 5.5 behavior.
This may trigger other node merges.
This might not be a legal SIL type.
This might not be necessary though.
This will be removed in the future.
Throw a fatal exception if it does.
Throw exception - error code is 25.
Traverse the chain of predecessors.
Treat a copy_addr as a load + store
Treat stdlib_binary_only specially.
Trivial case: empty parameter list.
Trivial case: no generic arguments.
Try splitting a Boolean "Animated".
Try to provide a decent diagnostic.
Turn this into a computed property.
Turn this into a computed variable.
Type-check an entire function body.
Type-check the cast as a condition.
Unicode escapes of various lengths.
Unregister request-specific wrapper
Unwrap the original optional value.
Unwrap zero or more metatype levels
Update based on these conformances.
Update the "result" variable above.
Upper bound for this type variable.
Use the row pattern, if it has one.
Use the timer group as a semaphore.
Used to walk the replacement string
Usually called outside of the lock.
Very slow on a palette destination.
Wait for a response from the client
Walk from the terminator up the BB.
Was not able to remove this branch.
We also don't want to enumerate it.
We also need to pass it indirectly.
We are not verifying anything here.
We can just move forward and recur.
We cannot handle generic apply yet.
We couldn't get a prologue address.
We do not try to analyze this case.
We don't know what to do with this.
We handle accessibility explicitly.
We have remaining argument clauses.
We only handle pointers to objects.
We should always have a value here.
We won't need the counters anymore.
We'd rather not have to check this.
Weak ownership implies optionality.
Wrap that in a struct if necessary.
Write 16 bit unsigned value to data
X3.64/ECMA-43 "next line" character
XXX avoid scratch register somehow.
Zero means the default is an error.
`safe' write for sockets and pipes.
`yyvs': related to semantic values.
add chunks collection as a property
also used as tmp1 by MacroAssembler
and no availability semantics calls
async functions use callToExit stub
bit 0 set: file probably ascii text
boundary case -- decrement exponent
boundary case -- increment exponent
build up a the new array of objects
cache miss, need to grab write lock
change the offset also in the chunk
changed already handled by unneeded
check against dynamic content cache
check and set generator/async flags
check emitSetCc is called only once
check if a string based key is used
check if shm is already initialized
check if there is already more data
checkCLASS does nothing by default.
classes containing counted pointers
clear extended sign (64bits number.
couldn't convert to string and back
currently unknown portion of vmSize
default to regular inet (see below)
don't have the sandbox on file yet.
don't mark the symbol as overridden
encoding handled by property on doc
enums marked as 'indirect' are safe
evaluate expression passed to await
fake event grouping all dTLB misses
fake event grouping all iTLB misses
file location without anything else
found if checking both, check value
found the main thread-local section
handle generic PDO-level attributes
helper for getAbstractConstantNames
if autoresume is wanted seek to end
if buffered, pre-fetch all the data
if non-null, the count of arguments
if relative path, prepend directory
if this is not a valid string, stop
legacy entry point, no longer used.
let's see if we have one cached....
look for argument promotion in ctor
make it an 8 bit conditional branch
mark a TypedValue or TypedValueAux.
mark p if it's an interesting kind.
may be null if call is not a method
move on to first character in field
must be a 32-bit conditional branch
must occur before setting up locals
namespace / Clone a constant value.
not to run the 1st file if compiled
null iff charset was not recognized
objects with unknown type_scan type
on failure, and throw an exception.
only inherit non-private properties
only media type (type/subtype,data)
only print to thread local log once
pass as long as it doesn't blow up.
plain scalar with no specified type
polled, so no need to wait any more
print_string will decRef the string
replace jcc with fallbackcc and jmp
return the last error msg extracted
sanity check parameter number range
scan over it and pull out the certs
see hphprealloc() for (char *) cast
setup string-variable and serialize
setup the version number: version 1
should not already exist in the map
should probably notify about errors
simple xml also needs one time init
skip subarray without named element
so to generate a starter for people
src must be the last in its cluster
still mark the symbol as overridden
stop before corrupting unioned data
stop before hitting compressed data
support some of the 1999 data types
switch the byte order, if necessary
table mapping hash to allowed shift
tally the length of the added data:
the first element is an empty table
throws if cross-context cycle found
update the body/part end positions.
usec is already 0, if not set above
valid characters are a..z,A..Z,0..9
we have to go and check with the db
we're shutting down flush http logs
week number (weeks start on Monday)
week number (weeks start on Sunday)
"CryptoTokenKit", "DVComponentGlue",
'Self' can appear in types, skip it.
'let' parameters are never settable.
(References are not needed anymore.)
...and it has no scalar value, bail.
/ / Valid: InnerResult, OuterResult.
/ / Valid: SomeDecl, OuterResultAddr
/ This is not a type-safety problem.
/ `constant` must refer to a method.
@param input_file A readable stream.
@param yyscanner The scanner object.
A '_' is an untranslated AnyPattern.
A builder for ForeignStructMetadata.
A class for trivial, loadable types.
A datatype and depth can be provided
A far relative indirectable pointer.
A module may contain multiple files.
A path through a protocol hierarchy.
A row which we intend to specialize.
A will strip any trailing whitespace
Actually convert the source element.
Add StrongPinInst to available pins.
Add a token for the quote character.
Add all modified instrs to worklist.
Add any relevant custom completions.
Add attributes to the root init node
Add capture list variables to scope.
Add flags implied by -embed-bitcode.
Add the breakpoint, write out the id
Add the data pointer if we have one.
Add the error result if we have one.
Add the padding to the fixed layout.
Add the requirements as constraints.
Add the results from scoped imports.
Align the current size appropriately
All keys are already static strings.
Allocate the Input buffer front-end.
Also remove superflous range checks.
An exception has already been thrown
And commutatively, swapping A and B.
Are we computing genset and killset.
Assign lowering may split the block.
Attach the foreign error convention.
Attempt to open the passed filename.
Avoid creating negative-weight arcs.
Bail if the cases aren't homogeneous
Bail out on other kinds of contexts.
Bail, if the lookup of VTable fails.
Be conservative and return MayAlias.
Be conservative for everything else.
Bind all the archetype access paths.
Bind this parameter to the argument.
Build a new specialized conformance.
Build the argument to the operation.
Build the invoke function signature.
Cache our results for use next time.
Calculate all the non-fixed layouts.
Call the _getBool library intrinsic.
Called right before a function call.
Calls hp_sample_stack() if its time.
Canonicalize constants to the right.
Capture inout parameters by pointer.
Change all the OrdStr uses into Movs
Check first if the whole path exists
Check for Swift module and overlays.
Check for a postfix-operator suffix.
Check for an abstraction difference.
Check for an exact type match first.
Check for ending label on this line.
Check generic parameters, if needed.
Check how to optimize this function.
Check minimum supported OS versions.
Check stack depth to avoid overflow.
Check that we don't have collisions.
Check the expression as a condition.
Check the order of the declarations.
Check whether the self type matches.
Check whether this is a SILArgument.
Claim and return the next character.
Class names must be globally unique.
Clear out the target locator result.
Clobbering an existing file is fine.
Collect all arrays in this function.
Collect all of the results in order.
Collect all users of element values.
Collect requirements for this level.
Common reporting for TU/module file.
Compute stack depths for each block.
Compute the type of the initializer.
Construct the ASCII collation table.
Constructor for the callee function.
Constructor for the caller function.
Convert UnicodeString back to UTF-8.
Convert the error to a bridged form.
Create a name of the specialization.
Create a new select_enum instruction
Create a zombie forward declaration.
Create an uncounted array if we can.
Create arguments for the entry block
Create the appropriate pointer type.
Create the cloned start basic block.
Create the false block if requested.
Create the thunk and function value.
Curl NETRC constants (CURLOPT_NETRC)
Current alias analysis we are using.
Custom scanner for particular field.
Deactivate this special destination.
Declaration Parsing and AST Building
Define some builtin opaque metadata.
Define the copy and dispose helpers.
Delete all the converted type infos.
Destructor for an ErrorProtocol box.
Determine how many tag bits we need.
Determine the object type of 'self'.
Determine the type of the container.
Determine whether type is 'NSString.
Diagnostic printing of PatternKinds.
Different fields should not overlap.
Dig out the OtherConstructorRefExpr.
Dig out the conforming nominal type.
Dig out the parameter for the value.
Disable builtin wrapper if it exists
Discarding an assignment is a no-op.
Don't bother with the root directory
Don't inline from resumed functions.
Don't print unsafe_unretained twice.
Drill in on the actual source value.
Drop N parameters off of ParamInfos.
Dynamic dispatch to the initializer.
Each quarter-round modifies 4 words.
Emit a 'deallocateBuffer' operation.
Emit all the shared case statements.
Emit the capture argument variables.
Emit the guard branch, if it exists.
Emit the operand into the temporary.
Emit the record for the type itself.
Empty is represented in bitset mode.
Ensure consistency between filenames
Entry block can't have predecessors.
Erase the member type entry from the
Escape double quoted string contents
Extract locations from SIL LoadInst.
Extract the i1 from the Bool struct.
FIXME: Get expansion from SILDeclRef
FIXME: Should be represented in SIL.
FIXME: This should not be rewritten.
FIXME: We shouldn't need to do this.
FIXME: individual custom completions
FIXME: pull out the magic constants.
FIXME: show deduced types, etc, etc.
Fall through to produce diagnostics.
Fall through to record the raw type.
Fallthrough and use default collator
Fast path: check the invasive cache.
Figure out the first parameter name.
Finally, print the variable's value.
Find all non-back-edge predecessors.
Find the Swift class being extended.
Find the corresponding lookup table.
Find the decl for the protocol name.
Find the first non invalidated node.
Find the first space in the command.
Fix "XDebug" turning into "x_debug".
Fix in 1.3: count a vertex only once
Fix the name of the function itself.
Fold archetypes to unique exemplars.
Fold for integer constant arguments.
For a function, use the result type.
For each basic block BB in Caller...
For each color in colormap, find: 1.
For each successor region S of ER...
For keys of SILFunction and SILLoop.
Free memory allocated for image_info
From date/time (3, 5 or 6 arguments)
Generate the compare of the indices.
GenericFunctionTypes shouldn't nest.
Get at least the name of the module.
Get it from /proc/cpuinfo if we can.
Get the ObjC metadata for the class.
Get the allocation size of this box.
Get the length of the current token.
Get the protocol being conformed to.
Gets input and stuffs it into "buf".
Give each SILBasicBlock a unique ID.
Grab the last instruction in the BB.
Grab the max data if it was provided
Guess 4 spaces as extra indentation.
HTTPPushTransactionHandler interface
Handle all of the SIMPLE_DECL_ATTRs.
Handle destruction of a local array.
Handle fixup and unwind information.
Handle unspecialized types directly.
Handle weak/unowned/unowned(unsafe).
Have to look up and down for matches
Here, the destination has a payload.
Hope the C compiler is smart enough.
How to process the current function.
If / diagnostics are being deferred,
If BBCount is not BBIndex, continue.
If I is not an increment, ignore it.
If it isn't a 'let', don't touch it.
If it's -1 then we have the payload.
If no witness table was found, bail.
If not, add them to AvailableValues.
If not, first transcode it to UTF16.
If not, or if we fail, return false.
If the SILLoader is null, create it.
If the argument is a block, copy it.
If the declaration is generic, fail.
If the declaration is invalid, fail.
If the payload is boxed, project it.
If the type matches exactly, use it.
If there is, project and destroy it.
If this is an error type, ignore it.
If this is the first method, use it.
If we are dominated by a constraint:
If we didn't already outdent, do so.
If we don't have a string, complain.
If we fail to do that as well, bail.
If we fail to find a root, return V.
If we have an indirect result, bail.
If we have one loop latch, continue.
If we reinitialize we return / true.
Ignore IFD2 if it purportedly exists
Ignore everything, a trivial scanner
Ignore uses in the same basic block.
ImplicitlyUnwrappedOptional is fine.
Import NSString * globals as String.
In Cygwin, getCLocale() is not used.
Infer requirements from the pattern.
Information about a value in memory.
Initialize for each processing pass.
Initialize the BBToLocState mapping.
Insert a NamedEntity into the table.
Insert into the lowered basic block.
Inserted, container owns the pointer
Intersect in the successor BBSetIns.
Invoke the runtime to store the tag.
Is this basic block jump threadable.
It can happen in phijmp or callargs.
Iterate through the remaining bytes.
Just fall back to emitting a switch.
Keep reading if input is unfinished.
Keeps track of what blocks we clone.
Kill the server if there's an error.
Leave a placeholder in the position.
Like YYERROR except do call yyerror.
Load magic initialization constants.
Load up the state for the new block.
Local function that performs lookup.
Look for methods with this selector.
Look in each extension of this type.
Look through lvalue and inout types.
Look through self-rebind expression.
Look through the cases for this tag.
Look up the associated type witness.
Look up the header in the ASTReader.
Lower Assign instructions if needed.
Macro happens to work with IGM, too.
Make a plan to initialize into that.
Make an exact copy of this AST node.
Make sure all offsets are in-bounds.
Make sure key and value are present.
Make sure that the WMI and AI match.
Make the context ready to start over
Mangle this entity as a std::string.
Map the indirect returns if present.
Mapping for the top level functions.
Mark 0 again -- should be no change.
Mark a value-dependence on the base.
Master copy of the tokenizer object.
Match a hoistable make_mutable call.
Merge nodes in the constraint graph.
Metaprogramming-friendly base class.
Method lookup did not find anything.
Need to recheck now we have the lock
Next, sort by full description text.
Next, try consulting the 'type' map.
No slash found, therefore return '.'
Note that this effectively ignores a
Note that we're parsing a statement.
Nothing else is allowed in the name.
Ok, V2 is not an address projection.
Only SOF0-SOF2 are now in common use
Only do anything special to methods.
Only handle innermost loops for now.
Only known protocols can be derived.
Open up the type of the requirement.
Operand is defined outside the loop.
Optimize the addressors if possible.
Otherwise it will return MAP_FAILED.
Otherwise report the overflow error.
Otherwise the location is untracked.
Otherwise, add an 's' and try again.
Otherwise, add it as an opaque blob.
Otherwise, allocate one temporarily.
Otherwise, boolean true is returned.
Otherwise, create one and return it.
Otherwise, it must be an index type.
Otherwise, just store it in our map.
Otherwise, set result to that value.
Otherwise, there are no subelements.
Otherwise, this is just a character.
Otherwise, we have an array literal.
Output string with quoted characters
Parse all the partial modules first.
Parse an element of a tuple pattern.
Parse comma-separated enum elements.
Parse the debug information, if any.
Parse the decl, stmt, or expression.
Point to the first real instruction.
Prefer the unlabeled form of a type.
Previous instruction was unreachable
Print the content of the constraint.
Problem reported by Andreas Pfaller.
Process a TIFF header in a JPEG file
Process all the non-self parameters.
Process releases to adjust for this.
Produce the resulting function type.
Promote stack allocations to values.
Provide context as note diagnostics.
Pull the top-level pattern back out.
Pushes the new state onto the stack.
Quadratic filter, default radius 1.5
RPCRequestHandler makes use of this.
Re-enter the top-level decl context.
Read and uncompress an entire chunk.
Read the end-of-requirements record.
Rebuild the resulting function type.
Rebuild the uncurried accessor type.
Receive at least one finished event.
Record the deallocation instruction.
Record the type as soon as possible.
Recover the original type if needed.
Recur into simple wrapping patterns.
Recursively visit all our ancestors.
Recursively write the this property.
Redirect standard files to /dev/null
Refuse to fill to a non-solid border
Register ObjC protocol conformances.
Reject shifting all significant bits
Release the non-consumed parameters.
Remember the statically known value.
Remove all old release instructions.
Remove any duplicate type variables.
Remove any opened existential types.
Remove the alloc_global instruction.
Remove the old release instructions.
Replace and destroy the placeholder.
Replace archetypes in the base type.
Replace dominated user instructions.
Represents the actual Zend resource.
Resolve the 'as' or 'is' expression.
Resolve the type of the constructor.
Resolve this initializer, if needed.
Retrieve the ErrorProtocol protocol.
Retry with moving the allocation up.
Return error if Basic Block is null.
Return success because we recovered.
Return the maximum stack cell count.
Return the next pixel from the image
Return true if we should return `h'.
Returns true for failure to resolve.
Returns true if the Array is unsafe.
Returns true if this is a Zero node.
Rewind to the beginning of the decl.
Round up to an even number of bytes.
SHA384 uses the exact same algorithm
Safe because they create new arrays.
Save the return value and its length
Schedule users for constant folding.
Second step: do the actual inlining.
See GEMS I for the algorithm details
See header for why this is required.
See if we have a cached conformance.
See readLongString for more details.
Separate out the checks for methods.
Set downcasts are handled specially.
Set the alignment from the TypeInfo.
Set up the block for the false case.
SetL preserves reffiness of a local.
Shift the mask down to this element.
Sign bit of the operand is promoted.
Simple cases we want to handle fast.
SimplifyCFG deletes the dead BB arg.
Singleton metatype values are empty.
Skip defaulted-protocol constraints.
So check if we can't keep the value.
So only ignore global private decls.
Some general concepts:  - "Scanner".
Some unknown terminator instruction.
Sorry, MArrayIter only goes forwards
Sort and print the top translations.
Specialized emitter for Builtin.gep.
Specialized emitter for type traits.
Start at the beginning of the string
Store it back to the cache variable.
Store nil to the foreign error slot.
Store the value into element slot 0.
Switch through the rest of builtins.
TODO: We could be lazier about this.
Take the intersection componentwise.
Taken from here http://git.io/wY2WPw
Test 1: Move empty over nonexistent.
Thanks to Aaron Giles for this idea.
That clips too, so don't clip twice.
That isn't the case for Swift enums.
That might involve storing directly.
The ID of the block enclosing `pos'.
The SILDeclRef declaring the method.
The absolute stack depth is unknown.
The benefit of a onFastPath builtin.
The block header is pointer aligned.
The cast takes the source reference.
The class for building result plans.
The conformance checker we're using.
The first entry is always the weak*.
The first result is the array value.
The function that we are optimizing.
The function that we are processing.
The function throws unconditionally.
The implicit value/buffer parameter.
The initializer for an enum element.
The instance type is not a SIL type.
The last one to fail will delete us.
The layout of an existential buffer.
The same IDs as the SILPrinter uses.
The set is optional, but get is not.
The stacks must have the same depth.
The storage better not be resilient.
The successor node is a new PHINode.
The type-of-rvalue must be loadable.
Then type check the function itself.
Then until we finish the worklist...
There are no alignment requirements.
There is a MayDecrement instruction.
There is a store into this property.
Therefore we still have to check it.
Therefore, they have to be computed.
These characters need to be escaped.
These terminator instructions block.
They are equivalent along all paths.
They aren't available independently.
Things that may be read in the block
Things we can determine when we seek
This allows for subsequent rollback.
This is a case for the select_value.
This is a common case that comes up.
This is a new context for this name.
This is an initialization for a box.
This is an intersection / operation.
This is not a type-safety / problem.
This is the final inlining decision.
This is very conservative, but safe.
This should *really* be a ValueDecl.
This turns out to be rather cunning.
Throw a fatal exception if one does.
Tracks if the pass changed branches.
Transfer the witness table pointers.
Transform as many times as possible.
Transform each of the catch clauses:
Try to inline CPP builtin functions.
Types are local or metatype members.
Update the value (and type) for `l'.
Uploaded file exceeded MAX_FILE_SIZE
Use machine dependent bytes of input
Using declarations are not imported.
Validate the generic type signature.
Verify warn_unqualified_access uses.
Wait for a response from the client.
We are not moving epilogue releases.
We can defer to this initialization.
We can only inline at normal FCalls.
We did A already case 'A': case 'a':
We have a requirement/witness match.
We need to either decref or release.
We need to fill this with the length
We should never see these unadorned.
We'll need to check the initializer.
We're always already a static array.
We're done iterating these elements.
We're parsing a conditional binding.
We've already visited this function.
Weaken protected property to public.
Whether a Vinstr is a register swap.
Whether the given word is a plural s
Whether the solutions are identical.
Whether we've found an unbound type.
Wrapping should be in the same line.
XXX: should do something better here
add thread to m_sandboxThreadInfoMap
allNodes is sorted by function name.
apply the r-th round transformation:
buggy scan() or refcount is too low.
charListData must be null-terminated
check if we are above low water mark
check that no connection pools exist
constants for Jewish date formatting
convert ID back to base cell indexes
copies will go at start of successor
create the message for the exception
date only format requires YYYY-MM-DD
day of the month (with leading zero)
do uri matching on the relative path
dst must be the first in its cluster
each catch block is reachable from b
emit code to create generator object
executes a previously prepared query
executes a query and open the cursor
exponential format (e.g. 1.2345e+13)
fallback, when a vasm is not lowered
fill up the buffer with client data.
flag to remember which row we are on
get PHP's output if "output" is NULL
get/address default to non-mutating.
global environment overrides the hdf
helper for getMethods: returns a Set
if a new entry is added in blacklist
if hasCallToGetArgs() or if mayUseVV
if n is a basic code point then fail
if our descriptor is ready break out
initialize state at all entry points
isset returns false for null values.
lazy may only be used on properties.
linear interpolation between w and v
location of c-client quota functions
longer patterns must be sorted first
mark as outside range and get buffer
need to shift things up to make room
no need for further argument munging
note: diagOpt has references to this
now correctly move the decimal point
now deal with the tail end of things
now ready to start the child process
now set the first job to be expired.
number of args of the set() overload
number of bytes read from a datafile
on no results, return an empty array
partially a lie: vmpc() isn't synced
png_set_strip_16() not yet in effect
prepare oauth arguments to be signed
private helper for getDeclaringClass
randomMT() returns 32 random bits...
rarg(2) is set at the stub callsite.
record request for debugging purpose
resize to buffer to the "right" size
restore read preferences from backup
return the completed message digest:
return the last error code extracted
run this twice to test lvalBlackHole
safe because we've fixed up the args
shift the existing data if necessary
should be less than sizeof(uint16_t)
small-string path: make a flat copy.
sort arcs in decreasing weight order
spurious load if we're not returning
table for clamping the applied error
take a substring after the first "."
taken: the param type does not match
the backslash comes from namespaces.
the onUnblocked handler may free cur
this sucks for threaded environments
token required if no match was found
trigger callback hook for parameters
true if a unique sugar mapping found
try to sink past Check* instructions
unqualified name in global namespace
update carcs: merge c1arcs to c2arcs
we already know they aren't the same
we do not know the order of sections
will shutdown when request completes
write into the last (variadic) param
, llvm::Linker::LinkerMode LinkerMode
...so to strictly follow PHP's output
/ / (2) A local alloc_stack variable.
/ A value of -1 means: not known yet.
/ Currently: Decl, PrintStructureKind
/ For details see SideEffectAnalysis.
/ If the value is 1, it prints 'bar'.
1) The region has at least one block.
2.0.5: we should actually return this
@objc enums lower to their raw types.
A "minimal" class for querying IRGen.
A goto is used to prevent duplication
A handle to a row in a clause matrix.
A map of old to new available values.
A return value of 0 indicates success
A very basic conversion approach, TBB
Abandon all received finished events.
Access to the Index for this program.
Add an implicit 'override' attribute.
Add arguments for all the parameters.
Add init() as member of the metatype.
Add newly parsed decls to the module.
Add results for all imported modules.
Add target-independent options first.
Add the witnesses to the conformance.
Advance pixel pointers to next column
All Swift properties are (nonatomic).
All class types have the same layout.
All parameters are at the same depth.
Allocate memory for the offsets array
Allocate the Output buffer front-end.
Already saw globals-as-members table.
An evaluation string must be provided
An existing specialization was found.
And for each remaining predecessor...
And hoist decrements to predecessors.
And issue a warning in HipHop syntax.
Apply the solution to the expression.
Apply those attributes that do apply.
Ask the runtime to lay out the class.
Associated types can inherit a class.
Assume implicit decl captures are OK.
At EOF, write the rest of the buffer.
At a minimum, compaction is required.
At least confirmed for: OSF1 V4.0 878
Attach the parameters to the closure.
B range is +/- 128MB but this uses BR
Bail if it is not a required linkage.
Break type name ties by mangled name.
Bridge the source value to an object.
Build a binary operation declaration.
Build a binary predicate declaration.
Build a builtin function declaration.
Build the early return inside the if.
Build the inline-tree for a function.
Build tuple literals for tuple types.
By "any", we don't mean existentials.
Bypass the cache for the empty tuple.
Calculate the month and day of month.
Call the runtime to allocate the box.
Can be mangled without an introducer.
Carries out the "break list" command.
Cases are handled in visitSwitchStmt.
Cast the messenger to the right type.
Change the current working directory.
Check all of the members of the enum.
Check all operands of a partial_apply
Check and record normal conformances.
Check dominance of the parent blocks.
Check for empty protocol composition.
Check for non-cond_br critical edges.
Check for the swift_bridge attribute.
Check instruction and its immediates.
Check that we have a single WMI user.
Check the cache for a concrete value.
Classes and class-bounded archetypes.
Clear the AA_opacity array behind us.
Clone the struct for the start index.
Close the code completion connection.
Coerce the object type, if necessary.
Coercion from subclass to superclass.
Collect all the fields from the type.
Collect all uses of the Struct value.
Collect constraints from the pattern.
Collect non-trivial generated values.
Collect the primary archetypes first.
Common case: nothing left to resolve.
Compare the load result against null.
Compute the CCD width, in milimeters.
Compute the immediate-dominators map.
Compute the length down to this base.
Constant decls are captured by value.
Construct the full alternate pattern.
Consume self, and remember we did so.
Convert character code to glyph index
Copy everything including tombstones.
Copy the color bounds to the new box.
Copy this code point into the result.
Create a concatenated string literal.
Create a new VarDecl with dummy type.
Create a placeholder protocol record.
Create a unified set of requirements.
Create an almost-empty memory buffer.
Create arguments for the entry block.
Currently we ignore this possibility.
DC - This is the current DeclContext.
Danger is now that the data is dying.
Decls captured by value don't escape.
Default dirty page purging threshold.
Delete all fix lifetime instructions.
Dependency-marking is purely for SIL.
Destroy is a no-op for trivial types.
Determine the initializer parameters.
Determine the type we're bridging to.
Diagnose for potential unavailability
Dig out the declaration of the class.
Dispatch down to a concrete override.
Do final permutation (inverse of IP).
Do not try to optimize this function.
Don't jumpthread the same edge twice.
Don't resolve further absolute paths.
Each region is translated separately.
Early exit if the mask has no effect.
Effects on locally allocated storage.
Emit a reference to the global token.
Emit any default argument generators.
Emit byte codes to implement methods.
Emit the ivar initializer, if needed.
Emit the value into the payload area.
Emits a Make-style dependencies file.
Ensure no one calls into the function
Enter the line into the line history.
Eventually this block can be removed.
Exit-blocks from the lifetime region.
Expect an alloc_stack initialization.
Extract locations from SIL StoreInst.
Extract subexpression in parentheses.
FIXME: Add user-defined swift modules
FIXME: Allow class requirements here.
FIXME: Crummy way to get idempotency.
FIXME: Get expansion from SILFunction
FIXME: Handle generalized parameters.
FIXME: Horrible, horrible hackaround.
FIXME: Lots of other cases to handle.
FIXME: The AST should do this for us.
FIXME: Try uppercasing for non-types.
FIXME: add -x support (or equivalent)
FIXME: restructure to use a "switch".
Factory methods cannot be overridden.
Fallback to showing the default type.
Feed this result into the outter hash
Figure out the type of the container.
Fill in dynamic args (3..6) as needed
Find an enum element in an enum type.
Find the (unspecialized) conformance.
Find the corresponding named element.
Find the first retain of the pointer.
Find the node for this type variable.
Find the pure Objective-C superclass.
Find the standard type of exceptions.
Find the witness we're interested in.
First we determine the argument type.
First, analyze all direct subclasses.
Flush out information for old buffer.
For a Clang declaration, trust Clang.
For debugging, still output to stdout
For now, expose no extra inhabitants.
Forcing IUOs always requires a thunk.
Form the open-existential expression.
Forward the curried formal arguments.
Found the store to this enum payload.
Function referenced by partial_apply.
Function types must be parenthesized.
Get all of the analyses that we need.
Get offset ranges for the whole line.
Get the default value for journalling
Get the dominance node of the header.
Get the expression's simplified type.
Get the identifier for the base name.
Get the interface type of the result.
Get the size of the various sections.
Handle a parameter block requirement.
Handle member dependencies specially.
Handle missing optional requirements.
Handle the integer 'select' modifier.
HashCollection can't handle that yet.
Here, the source value has a payload.
Honor an explicit placement if given.
ICU UChar type is platform dependent.
If it didn't, use the standard logic.
If it's not there, try the slow path.
If not yet visited, visit the callee.
If our SILValue was blotted, skip it.
If so complete the forward reference.
If so, diagnose it as a common error.
If that fails, try to deserialize it.
If the entry is not visible, skip it.
If there are substitutions, add them.
If there is no comma then we're done.
If this is a simple name, we're done.
If we are not linking anything, bail.
If we can form a default type, do so.
If we didn't find anything, complain.
If we found any solution, we're done.
If we need a conversion, add one now.
If we want an rvalue, get the rvalue.
If we've found something, we're done.
Implement swift::VisibleDeclConsumer.
Import the parameter type into Swift.
Imported modules are not recommended.
Inject into an optional if necessary.
Inputs: code:   A n_bits-bit integer.
Insert a space between the operators.
Instantiate the payload if necessary.
Intersect in all successors' BBSetIn.
It could come from either at runtime.
It is implemented as max(strideof, 1)
It may only be used on class members.
It only applies to object properties.
It only works with stored properties.
It's okay to have these in side exits
Iterate over the leafs of the tree...
Its arguments are the direct results.
Jump immediately to the continuation.
Just compare the value decl pointers.
Just forward the input as the result.
Keep in sync with DiagnosticsSIL.def.
Keep looking at subsequent arguments.
Leave a scope, with all its cleanups.
Let's try inferring associated types.
Let's try to zap this AllocStackInst.
Limit the total number of iterations.
Look for a base of 'self' or 'super'.
Look for members with the given name.
Look through an implicit force-value.
Look through force-value expressions.
Look through reference-storage types.
Look up ValueDecl from a dotted path.
Look up the Func* in the targetcache.
Loop through all the program headers.
Maintain profiles of a running stack.
Make a given type pointer followable.
Make sure we can claim this argument.
Make sure we have a compatible block.
Make sure we have a type declaration.
Make sure we validate the type again.
Make sure we're dealing with strings.
Mangle an identifier into the buffer.
Mangle the containing module context.
Mangle the generic signature, if any.
Mangle the name of the witness thunk.
Map a signature type for a parameter.
Map back to IRInstruction from index.
Map errors 1:1 up to +- MAXJSAMPLE/16
Map the name and complete the import.
Mark the async generator as finished.
Mark the needed conformances as used.
Match a requirement and witness type.
Match the reference and token result.
Match the subsequence if we have one.
Move result keeping the higher 32bits
N indicates which compression process
NSString * must be bridged to String.
Native accessor properties of mysqli.
Native functions don't need bridging.
Next priority is favored constraints.
Next step: delete all dead functions.
No witness necessary for type aliases
Non-tuples don't need to be imploded.
Not all protocols use witness tables.
Note that we've formed this property.
Note: Do not provide any SILLocation.
Notes Any string in repo can be null.
Nothing else needs to be placed here.
Notify HttpServer that we've shutdown
Now we are done with code completion.
Number of elements in the entry array
ObjC protocols do not have witnesses.
Ok, we found a payloaded predecessor.
Okay, we're doing a conditional cast.
Only allow enums forming an optional.
Only interested in macro definitions.
Opaque existentials are address-only.
Other instructions can be duplicated.
Other result types are not permitted.
Otherwise just use the given message.
Otherwise perform the transformation.
Otherwise, adjust the argument index.
Otherwise, all of our users are sane.
Otherwise, collect the single scalar.
Otherwise, it throws unconditionally.
Otherwise, just delete the copy_addr.
Otherwise, load it from the metadata.
Otherwise, perform another iteration.
Otherwise, return SILValue() to bail.
Otherwise, the outer type is a tuple.
Otherwise, we have a generic failure.
Otherwise, we have an unexpected use.
Otherwise, we have another parameter.
Pacify GCC's `empty if-body' warning.
Package up the result in an optional.
Parameter types and kinds must match.
Parse the generic-params, if present.
Pass context sensitive keyword token.
Pass the argument explosion directly.
Perform the following simplification:
Prefer frameworks over plain headers.
Prepare for output to a stdio stream.
Prepare for the next round of checks.
Pretty-print the SILFunction to errs.
Prevent attempt to circularly inline.
Print the type arguments, if present.
Process all received finished events.
Processes a single option/value pair.
Produce a flattened queue of LValues.
Project out the materialized address.
Propagate type-resolution errors out.
Public classes can always be extended
Public interface and helper functions
RPCServer: Server + RPCRequestHandler
Reached end of input for '*' repeater
Read the optional opened existential.
Rebuild the cache, then search again.
Reclaim an autoreleased return value.
Record each of the deduced witnesses.
Record the frame if we are collecting
Recursive into children of this type.
Recursively move struct_element_addr.
Reencode well-formed UTF-8 as UTF-32.
Regardless, the storage size goes up.
Register all available PHP functions.
Register the solution's opened types.
Register this class with the runtime.
Reject constructors outside of types.
Releases are blocked by MayInterfere.
Remember file position of image data.
Remember the current depth and level.
Remember this as the exemplar to use.
Remove the callee from the FPI Stack.
Remove this from the s_loggers vector
Replace Self in the parent archetype.
Represents a lowered SIL basic block.
Reset the credentials since it failed
Restore the original name after write
Retains are blocked by MayDecrements.
Retains, releases of the result of F.
Return value of DnsQuery_A() function
Returns the attached xdebug profiler.
Returns true if any could / be merge.
Returns true if this is not possible.
Right now just pattern match applies.
Sanity check special member function.
Save the metadata for future lookups.
Search for a compatible extant class.
Section 6.1: Bias adaptation function
See if we've already got this cached.
Set the "runtime" platform condition.
Set the SDK path and target if given.
Set the debug scope for the function.
Set up the initialized release block.
Silentyly fail to match PHP5 behavior
Simple case: bridgeable object types.
Simulate already having mangled names
Skip implicit conversions completely.
Skip invalid superclass initializers.
Skip to the parent of a nominal type.
Skip trailing inherited conformances.
So we unique the exiting region list.
Special case for FPass* instructions.
Stack ranges, with subtype and maybe.
Start a scope for the current branch.
Start by splitting the current block.
Start computation of P byte sequence.
Start computation of S byte sequence.
Store the reference into a temporary.
Stub constructors don't get an entry.
TAG( output )  Output the given code.
THIS FILE IS AUTOMATICALLY GENERATED.
THREE(IVA,SA,SA),    FMANY,   ONE(CV)
THREE(IVA,SA,SA),    FMANY,   ONE(RV)
TODO: C++ types have different rules.
TODO: Should destructure recursively.
TODO: Support dynamic-sized captures.
TODO: change this to is same ExtInfo.
TODO: extensions TODO: local contexts
TODO: include Jobs in the diagnostic.
TODO: try to emit the argument at +0.
TRUE if next pass must zero histogram
Target is after end of Node, skip it.
Test 1: Move source over nonexistent.
Thats only OK if we only preferred it
The "Ref" variants have been removed.
The PBD covers the whole initializer.
The allocator we are currently using.
The archetype's protocol constraints.
The caller will remove the copy_addr.
The check_subscript call was removed.
The class must not have a superclass.
The compiler will reject actual uses.
The context for emitting the r-value.
The current function to be optimized.
The data occupies the entire payload.
The first type conforms to the second
The function's native representation.
The i.s already comes converted to FP
The immediate arguments must be last.
The inhabitant is an invalid pointer.
The lexer likes null-terminated data.
The literal expression has this type.
The next element becomes the new top.
The size includes the added tag bits.
The string literal provides the data.
The subclass is the common base type.
The system is back in a normal state.
The type must have generic arguments.
Then perform the region optimization.
Then rewrite successors of all exits.
Then see if BB has one predecessor...
Then try to load from the environment
There can only be one such parameter.
There is no current array addr value.
There is no location we can point to.
There was at least one non-OrdStr use
There were never any numeric indices.
There's only one extra inhabitant, 0.
These form dipthongs when preceding H
They are adjusted to not be l-values.
This API should be sunk down to LLVM.
This BB copy branches to a FailureBB.
This can cause further scalarization.
This concludes the conditional scope.
This guarantees eventual termination.
This implicitly adds a trailing null.
This instruction blocks this RC root.
This is a scalar-to-tuple conversion.
This is not feasible in DOS machines.
This is not reflected in clang types.
This is the common case in repo mode.
This is used by assignment operators.
This just ignores the provided value.
Throw out the witness table pointers.
Track the parameters of the function.
Transform the input and output types.
Treat empty input file as fatal error
Trivial payloads don't need any work.
Trivial types don't have destructors.
Try sink a retain as far as possible.
Try the special 'swift' substitution.
Try to find the breakpoint's function
Try to match the derived requirement.
Try to optimize string concatenation.
Try to substitute into the base type.
TupleType if we are visiting a tuple.
Type specialized comparison operators
U8_APPEND_UNSAFE updates dstPosBytes.
UTF-8 decoding finishes successfully.
Until then, we hack the mapping here.
Update HHBC mappings for the TransDB.
Update context for start of inlining.
Update values for this accessor kind.
Use alloc_ref to allocate the object.
Validate that we used the right decl.
Validate the generic type parameters.
Validate the result type, if present.
Verify the classification and string.
Visit each of the generic parameters.
Visitor class for renaming registers.
WBMP Type 0: B/W, Uncompressed bitmap
Wait for the server to actually start
We assume ranges are non-overlapping.
We don't yet have a name, assign one.
We found a user that we can't handle.
We have already checked the operands.
We have four cases to deal with here:
We have stripped off struct_extracts.
We haven't seen this function before.
We may want to diverge at some point.
We might need to bitcast the results.
We must always have the same spValue.
We need to place Phis for this block.
We only emit aliases for definitions.
We only handle the most common cases.
We only process basic blocks for now.
Wrap up in an Optional if called for.
Write out the screen width and height
Write the current frame at this level
Written/Modified 1999, Philip Warner.
abbreviated month name (non-standard)
add http header with oauth parameters
additional http headers can be passed
addressof expects an lvalue argument.
allocate space for the PNG image data
and appending the captured arguments.
and shrink back if that was incorrect
apply callbacks to the collected node
array with autogenerated numeric keys
assume long is not wider than 64 bits
bit 3 set: original file name present
but we do need to know the file size.
cache hit, no need to grab write lock
cast as fd/socket for select purposes
character appears in plain ASCII text
check 1 or 2 digit hour and separator
check if MAP_UNITIALIZED is supported
check the highest numbered descriptor
check union_of and commonAncestor API
choice point, seeing what to do next.
choose an efficiently fread'able size
clean up the data block and return it
clean up varargs array if it was used
convert a palette image to true color
copied and re-factored from addr2line
create an empty array to hold results
create new multipart_buffer structure
dSYM outputs are based on the image.)
day of the year (with leading zeroes)
deactivate - common for server/client
disallow access with an absolute path
expecting a encoding scheme specifier
fake event grouping all dcache misses
fake event grouping all icache misses
found match for the exact child class
freeList is address ordered first fit
getLastError can return an error here
handled as a special case in expand()
http://php.net/zlib.configuration.php
ideas from comp.graphics discussions.
identifier-or-none for the first name
ignore frames in the StackTrace class
impact perf a bit, but not that much.
integer safety for string allocations
lfchars must be encoded in ASCII here
look for more mailboxes in this group
make the center of rotation at (0, 0)
masking bits, we could count them too
mongo current chunk is kept in memory
must be a 32-bit unconditional branch
must first call update to flush data.
number of rows left inside the buffer
number of rows to fetch per ODBC call
objc_release(null) is a noop, zap it.
only in C-locale isalnum() would work
parent EHEnt better enclose this one.
parent close the pipe we're not using
parent:: in a class without a parent.
php notice: integer overflow detected
ppc64 can handle these address modes.
print per-TCRegion information header
print.c - debugging printout routines
pull out the tag and surrogate object
raises an error if function not found
record anchors in current alias table
ref might be visible to other threads
reffiness of the variadics must match
request memory has already been freed
reserve xmm15 to break shuffle cycles
reset all per-request data structures
reset iteration pointer, just in case
retrieve column information from odbc
return byte count on invalid sequence
return the serialized string directly
reuse -h for help command if possible
save header for possible continuation
scopes that call this scope (callers)
set flag for normal, old mailbox list
set http_response_code to error value
skip registers we've visited already.
so reports about my children are gone
sort array based on string comparison
src might be visible to other threads
table mapping hash to pos in patterns
taking tv by value would exclude aux.
tell the driver that it is going away
the beginning and end of the comment.
the instructions we have seen so far.
the way this is used *is* thread safe
trailing ', ' except for last element
try cache handle for unqualified name
use the numeric one for calculations.
we already read the 8 signature bytes
will diagnose a duplicate declaration
wrapper for local variable LA operand
wrapper for variable-size IVA operand
x64 INTEGER class argument registers.
xor the bottom with the current octet
zlib can read uncompressed files too.
"Inst" is a ValueMetatype instruction.
"foo." was allowed in earlier versions
"inf","nan" and maybe other weird ones
(E.g. GlobalsArray doesn't copy here.)
...but Clang isn't doing the emission.
/   TODO: this is not yet implemented.
/ / This is an intersection operation.
/ All this is done in a single thread.
0) Special cases are specially handled
1.8.1: remove dependency on jinclude.h
100 bytes written, not enough to flush
4) Otherwise remap the diagnostic kind
@warn_unused_result with no arguments.
A "load 32bits immediate" is mandatory
A bridged NSError is itself the value.
A class for Builtin.UnsafeValueBuffer.
A map from PhysReg number to position.
A single result-translation operation.
A witness method always provides Self.
Abstract state for a program position.
Accessor methods for yylval and yylloc
Accumulate run and reset for next run.
Add a row for each label of each case.
Add all of the blocks to the function.
Add all of the same-type requirements.
Add all parsed vardecls to this scope.
Add an empty element to the aggregate.
Add an output file for each input job.
Add new columns to the end of the row.
Add requirements for associated types.
Add requirements for the nested types.
Add superclass requirement, if needed.
Add the extension to the nominal type.
Add the last piece to the return value
Add the operand as the final callsite.
Add the results from unscoped imports.
All other calls can be consider valid.
Allocate and initialize a new element.
Allocate storage for the field vector.
Already representing the same integer.
Always consider unreachable code cold.
Arbitrarily truncate to 10 characters.
Array downcasts are handled specially.
Ask the runtime to lay out the struct.
Assert invocation with a primary file.
Attempt to demangle the source string.
Bail out immediately on a void result.
Bind a named pattern to a given value.
Bind all the refutable patterns first.
Bind the generic parameters from that.
Both return and parameter adjustments.
Branch instructions are not user code.
Bridge Objective-C to thick metatypes.
Bridge thick to Objective-C metatypes.
But please keep this copyright notice.
COLOR_* constants Colortype constants.
Cache the result if it is trustworthy.
Call the (unconditional) dynamic cast.
Call the builtin conversion operation.
Canonicalize switch_enum instructions.
Change every other comma into a colon.
Check all instructions of the function
Check for builtins that we can ignore.
Check for completeness of the solution
Check for errors in the format string.
Check if the generator has started yet
Check if the pattern is a Bool literal
Check one block for being well formed.
Check that the pat and str tails match
Check that the type is a nominal type.
Check the length of the class vectors.
Check the result type of the function.
Check the visibility of this property.
Check to see if the encoding is valid.
Check whether Copy is before UserInst.
Check whether the BBSetIn has changed.
Check whether the argument is 'super'.
Check whether the nominal types match.
Check whether the types are identical.
Choose which axis to split the box on.
Clean up tvRef2 before overwriting it.
Cleanups we introduced when splitting.
Close the loop on relative references.
Code executed at the end of each rule.
Coerce the base to the container type.
Coercion from one metatype to another.
Collect all of the keys and sort them.
Collect property names from the class.
Collect the users of this instruction.
Commands in MongoDB are case-sensitive
Compare operand with a case tag value.
Complain about redundant conformances.
Compute the type of the memory object.
Construct and register the constraint.
Constructors are not instance members.
Consts to be used on PHP and C++ side.
Consume source elements off the queue.
Copy down the parent's method entries.
Copyright 2010-present, Facebook, Inc.
Copyright 2013-present, Facebook, Inc.
Copyright 2015-present, Facebook, Inc.
Correct for over-counting in TC-stats.
Create "of (extension in Swift).Swift"
Create Vregs for all relevant SSATmps.
Create a new SID for the child process
Create and initialize the instruction.
Create failed StaticWaitHandle object.
Create or find the normal conformance.
Create the Some block, which recurses.
Create the indirect result parameters.
Create the size function for a layout.
Creating a `preExit' requires both: 1.
Currently, we treat NSUInteger as Int.
Database, username and hashed password
Deallocate ours and return the winner.
Declaration of the class F belongs to.
Declare 'IntlCalendar' class constants
Declare 'IntlTimeZone' class constants
Default value with no additional nodes
Derive the context argument if needed.
Destroy palette based temporary image.
Determine the actually nearest colors.
Determine the correct output filename.
Determine the implementation strategy.
Diagnose assigning variable to itself.
Diagnose the improper forward capture.
Diagnose this as a conversion failure.
Didn't have a type, totally guess here
Direct translation is relatively easy.
Discard all file_sections in ImageInfo
Do a dynamic cast to the target class.
Don't add redundant conformances here.
Don't confuse Variant with uninit data
Don't pass a uid *and* a name to this.
Don't touch generated or invalid code.
Don't try to find their meta-metatype.
Eat leading and trailing double quotes
Eat leading and trailing single quotes
Elements without payloads are trivial.
Embed the bitcode for the llvm module.
Emit a checked cast of a scalar value.
Emit a collection downcast expression.
Emit a temporary at the given address.
Emit abbreviation for RECORD_CATEGORY.
Emit an argument as an expanded tuple.
Emits a Swift-style dependencies file.
EndBlock means the end of this VTable.
Evaluate a named reference expression.
Everything else requires a definition.
Extract the return value if necessary.
F, G, H and I are basic MD5 functions.
FIXME: Diagnose existentials properly.
FIXME: Duplicated from ToolChains.cpp.
FIXME: Handle _Bool and DarwinBoolean.
FIXME: Implement bitcast typechecking.
FIXME: Include proper source location.
FIXME: Make sure this thing is global.
FIXME: Restore defer after Tokens.def.
FIXME: The short-circuit here is lame.
FIXME: This is completely unnecessary.
FIXME: This is not at all thread-safe.
FIXME: This should be target-specific.
FIXME: Use the SIL basic block's name.
FIXME: maybe don't have a default case
FIXME: this creates duplicate results.
Fail hard if the block isn't code.hot.
Fall through to record the superclass.
Fast path for zero-argument selectors.
Fast path: no re-abstraction required.
Figure out the index and result types.
Figure out which declaration to print.
Find all the RC roots in the function.
Find the builtin in the Builtin module
Find the other accessor, if it exists.
First, claim all the indirect results.
First, when we are code completing "x.
For a subscript, use the element type.
For each element index of the tuple...
For each entry in the witness table...
For examples, see hphp/tests/vm/asm_*.
For now just look for guaranteed self.
Form the generic subscript expression.
Form the initial difference increments
Free memory allocated for DNS records.
Free the pending iterators on the way.
FuncTable maps function name to an ID.
Functions to manipulate the write set.
Gather any diagnostics we've produced.
Get a StringMapEntry for the function.
Get a StringMapEntry for the variable.
Get or create an ObjC protocol record.
Get or create an llvm::GlobalVariable.
Get the Class* part of the cache line.
Get the SILArgument's incoming values.
Get the arguments and check for errors
Get the context as a Decl, or nullptr.
Get the linkage for SILGlobalVariable.
Get the lowering for the address type.
Get the signedness of the destination.
Get the type of a destructor function.
Gets the underlying address of a load.
Guaranteed by the memory_order_acquire
Hack around buffer overflow in libicu.
Handle return type constraint failures
Has a typed valueref and a field decl.
Heap metadata for ErrorProtocol boxes.
Helper macro for SWIFT_VERSION_STRING.
Higher priorities are preloaded first.
Hmm, no program fragment passed along.
However, pass though all other errors.
IE, it would have at least one action.
If CurrentBB is empty, just return fn.
If an exception was caught, rethrow it
If both paths are empty, return Equal.
If self is null, branch to the epilog.
If substitution is trivial, fast path.
If there are no VM frames, we're done.
If there is an entry to update, do so.
If there's already an entry, use that.
If this element has a label, parse it.
If this entry was superseded, move on.
If this is a tuple type, walk into it.
If this method is within a protocol...
If type-checking failed, we've failed.
If we are asked to link all, link all.
If we are not tracking anything, bail.
If we can't infer dynamic here, don't.
If we couldn't find anything, give up.
If we didn't, then this is unexpected.
If we don't have any arguments return.
If we have a parent, print out its id.
If we hit a builtin macro, we're done.
If we need to recur, emit a new block.
If we resolved everything, we're done.
If we succeeded, return the witnesses.
Ignore moves from a register to itself
Ignore non-types found by name lookup.
Ignore zero valued collation elements.
Immediately stepping back (fast path).
Import onto a swift_newtype if present
Import pointee types as true Optional.
In an initializer, ignore optionality.
In other words, there's nothing to do.
In this case, an error will be raised.
In this case, it uses PATH_TRANSLATED.
Include the IR in the body of the node
Include, eval, and define instructions
Incr time with the given microseconds.
Initialize the block state structures.
Initialize the breakpoint message node
Initialize the entry block's in state.
Initializes or reinitializes a buffer.
Inject 'nil' into the indirect return.
Insert a call into the entry function.
Insert a space in front of 'foo' decl.
Insert directly into body with spaces.
Inst may be moved by hoistMakeMutable.
Intentionally doesn't post to jsqueue.
Is the block reachable from the entry.
Is this a hoistable make_mutable call.
It comes out of the context as an i8*.
It is an invocation of a class method.
It is the unit of register allocation.
It should be a constant in most cases.
It should replace them with ErrorExpr.
JP2 is a wrapper format for JPEG 2000.
Jump over any class attribute mangling
Keep the service alive even when idle.
Leave non-transparent functions alone.
Length of the result of the evaluation
Linear search from end of m_nestedVMs.
Load if the result isn't address-only.
Look at the current letter in the word
Look before the "unsafeGuaranteedEnd".
Look for a module with the given name.
Look for an entry with this base name.
Look in for members of a nominal type.
Look through closures, initial values.
Look through one level of optionality.
Look up the witness for the archetype.
Loop through the unmatched breakpoints
Lowercase the remaining argument name.
Make sure we can duplicate the header.
Map contextual type to interface type.
Map the Objective-C selector directly.
Map the value to the original pattern.
Maps normalized QP (quality) to VP8 QP
Mark that this is a computed property.
Mark the original source as redundant.
Matters if exporter.debug_zval is set.
Move the function to a different name.
Must come after include of Tokens.def.
N argument types (with inout bit set),
NOTE: This does not match php5 xdebug.
Nav the tree evey time as this is LIVE
Negative phoneme length is meaningless
No need to apply this to existentials.
No support for switch, etc, right now.
No tag bits, there's only one payload.
Non-bind config options and edge-cases
Non-closure parameters require a type.
Not recursion, just cut short of print
Note that we're parsing a declaration.
Note: a Continue cmd is a bit special.
Nothing to do if the type is concrete.
Nothing to store for empty singletons.
Nothing will break if it doesn't work.
Now grab the RCID of this instruction.
Now parse an optional type annotation.
Now, copy over the partial apply args.
ObjC-compatible existential metatypes.
Offset is part of newly inserted text.
Okay, iteratively build up from there.
Okay, we have a varargs tuple element.
On non-x64, fall back to calling uname
Once constructed, we never destroy it.
Once this flag is set, it remains set.
One loop level has been taken care of.
Only accept pointing to an identifier.
Only consider throwing function types.
Only include free blocks if requested.
Only makes sense for members of types.
Only protocol members can be optional.
Only searched a part of m_breakpoints.
Only use a point that is in the image.
Operators do not have argument labels.
Or the extension with fewer protocols.
Order the dependent types canonically.
Otherwise increment reverse iterators.
Otherwise just delegate to the parent.
Otherwise run the rest of diagnostics.
Otherwise, add this new removal range.
Otherwise, call a lazy-cache function.
Otherwise, create the wrapping return.
Otherwise, emit the scalar assignment.
Otherwise, finish the translation now.
Otherwise, get them from the metadata.
Otherwise, materialize to a temporary.
Otherwise, order by buffer identifier.
Otherwise, pick the earlier file unit.
Otherwise, remember this field number.
Otherwise, the inner result is direct.
Otherwise, turn to +1 and re-abstract.
Otherwise, use the default BFD linker.
Otherwise, we have a program argument.
Otherwise, we have a simple primitive.
Otherwise, we have two direct results.
Otherwise, we produce a generic error.
Parse a function definition signature.
Parse the capture list and parameters.
Parse the type of the result operands.
Pass Function / Method structure node.
Peek through an extract of Bool.value.
Perform one of the predefined actions.
Perhaps file or fullPath is a symlink.
Please preserve the runtime self-test.
Pointers may be representable in ObjC.
Points to current character in buffer.
Pop Node off the back of the worklist.
Pop off the top type, value, and node.
Potentially attach the xdebug profiler
Prepare buffer (dirname never changes)
Print an error with magic line number.
Print in 8 clusters of 8 bits per row.
Process as many whole blocks as remain
Produce the new generic function type.
Property is new or override, so add it
Property is non-NULL if we reach here.
Property is not accessible, try __get.
Pull the old value out of the address.
Push the link register onto the stack.
Pushes the ids onto the passed vector.
Read the extra info in the gd2 header.
Read the generic requirements, if any.
Record this as a generated constraint.
Recursively profile nested archetypes.
Recursively visit the called function.
Reference types have 'self' of type T.
Regex matchers for spaces and numbers.
Register that we're no longer writing.
Register this thread as being debugged
Relax the type to something guardable.
Remember the GEP to the first element.
Remember the opened existential types.
Remember the property-calls for later.
Remove "once" call from the addressor.
Remove all of the defaulted arguments.
Remove call to array.props.read/write.
Remove duplicates then insert the name
Remove everything after the first null
Remove the last extension declaration.
Remove this expression from the stack.
Remove this pindef from AvailablePins.
Replace it with the dynamic self type.
Replace select_enum_addr by the result
Replicate function_refs to their uses.
Reset color before showing the prompt.
Retrieve the type variable for 'Self'.
Return the cached layout if available.
Return the type of the instance value.
Returns None if no such root is found.
Returns the image, or NULL upon error.
Returns the top of the stack, or NULL.
Round up the header size to alignment.
Run no-pending-io priority queue once.
SHUTTERSPEED comes after EXPOSURE TIME
See comment in listAssignmentVisitLHS.
See emitResolveClsBase() for examples.
See how many consecutive bits we have.
See if all of them are the same value.
See if there's a raw value expression.
See task description for more details.
See the TODO in computeSubSeqRelation.
Self is always an artificial argument.
Set connection type depending on flags
Set flow control (for uploads) to 1MB.
Set this block as the dominance point.
Set to false if only one side is zero.
Set up a decl context for the closure.
Set up the layout info in the vwtable.
Sets read preference mode and tagsets.
Side effects: Initializes the charset.
Side exit if the static local is null.
Similar for the other IterInits below.
Similar special case for FCallBuiltin.
Simplify operations that may overflow.
Simplify this term in the disjunction.
Skip anything in a protocol extension.
Skip pattern-globally ignored opcodes.
Smallest period allowed is per minute.
So let's issue the cache request ASAP.
So we do not return on a failure case.
Some basic canonicalization and maybe.
Some invariants about Closure classes.
Someone else already smashed this one.
Something got resolved, so loop again.
Sort the methods by declaration order.
Sort the protocols in canonical order.
Special handling for associated types.
Start Of Scan (begins compressed data)
Start with the known type of the decl.
Store it in our maps for later lookup.
Store the exception to the error slot.
Store this somewhere more appropriate.
Stores *to* the allocation are writes.
Subintervals sorted by Interval start.
Swift intrinsic names start with int_.
SystemlibSessionModule implementations
TODO: Cast to NSError succeeds always.
TODO: Investigate whether or not it is
TODO: adjust for error type parameter.
TODO: no good when generics are around
TODO: we're only saving the last error
Test that setcc/xor pair is collapsed.
That generic type should equal itself.
The alloc_stack that we are analyzing.
The archetype's superclass constraint.
The body is actually emitted by SILGen
The declaration must have a parameter.
The entry point to the transformation.
The getter/setter types are different.
The global initializations are in SIL.
The info for the parent of this Class.
The initializer for a global variable.
The live out information of the block.
The miss path is complicated and rare.
The mongos nodes aren't tagged either.
The name of the Swift migrator binary.
The offset past the end of this block.
The original operand values are equal.
The reference implicitly binds 'self'.
The result is returned as a new image.
The second causes a jam in that state.
The second type conforms to the first.
The spill slot assigned to this value.
The subexpression is always an rvalue.
The tolerances below are conservative.
The top level run routine of the pass.
The type of the internal lookup table.
The value for this enumeration element
Then try to load the fallback function
These are the edges that create loops.
Things we can determine before we seek
This does not / pop the cleanup stack.
This file implements the Swift parser.
This function has copy/grow semantics.
This is allowed for abstract functions
This is the last loop to break out of.
This may involve splitting some edges.
This requires /   serializing globals.
This should be expanded in the future.
This should have been a word all along
Throw away as much memory as possible.
Throw is not marked as a STMT_KEYWORD.
To prevent mistakes, assert that here.
Tolerate being passed an address here.
Too many gosh-darned arguments passed.
Track all uses in the block arguments.
Track the value up the dominator tree.
Tracks if the pass changed ApplyInsts.
Translate input hash to sortable index
Trim leading and trailing underscores.
Trivial case: same type in both cases.
Try looking up a concrete conformance.
Try old style class name constructors.
Try to get the class name from a LdCls
Try to look up the data handle for it.
Try to use the predecessor edge-value.
Tune dirty page purging for new arena.
Turn the subexpression into an rvalue.
Type check the constructor parameters.
Type parameters are statically opaque.
Type-check the destructor declaration.
Type-check the raw values of the enum.
Unpack and handle nontrivial payloads.
Use addr2line to get line number info.
Use the runtime to dynamically switch.
Use the subexpression as the function.
Use the type of the enum from context.
Validate that everything's still okay.
Variables might be stored or computed.
Visit all of the potential archetypes.
Walk an expression condition normally.
We add a pointer to an error function.
We already checked operands and types.
We appear to benefit from odd numbers.
We auto-alias classes only on HH mode.
We can't inline external declarations.
We check for "not master" error codes.
We expect to get a type variable back.
We ignore additional output filenames.
We just don't know how to handle this.
We may consider purge_all() here, too.
We need return type if it is not Void.
We need to apply all argument clauses.
We need to translate into a temporary.
We only care about the representative.
We only handle functions from here on.
We only handle structural errors here.
We override more than one declaration.
We timed out without receiving events.
We'll forward the rest in the handler.
We're going to produce an error below.
We're matching one element to another.
Whether the result is a function name.
Whether to quote additional delim char
Whether to return non-matching entries
Will assert invariants on the way out:
Wrapper fixes up negative/zero length.
Write any data remaining in the buffer
Write false until we rev the protocol.
add the embedded line end to the field
after width and argnum comes precision
apply strip_high and strip_low filters
assign ids to parameters (all methods)
associatedtype _ObjectiveCType : class
but we are not supposed to change this
calculate the free space in the buffer
case TAG_FMT_BYTE: case TAG_FMT_SBYTE:
check if the buffers are already bound
check if we are above below water mark
check that we haven't nuked the SSATmp
choose an efficiently fwrite'able size
coerce the stream into some other form
create a bson int from an Int32 object
dealloc_box the self box if necessary.
determine whether location is relative
don't want to confuse with primed keys
either an int or a dbl, but can't tell
fail if headers have already been sent
filename can be a filename or a stream
find and apply the evaluation function
forces fill_input_buffer on first read
frame pointer offset in previous frame
if I can get the function type from it
if false, we'll never reach this block
in case it's a tables-only JPEG stream
let's keep the nul-terminate tradition
lookup the prototype in the interfaces
make sure the DN contains no NUL bytes
make sure we're not getting crazy data
makeBlock might reallocate unit.blocks
mark_function_escape just gets zapped.
maximum number of bytes we are reading
move beyond the second '/' in /foo/bar
nameToAnnotType() never returns Object
need space for variable name and value
new style delimiter: locale id follows
now we expect to find a type specifier
null if there is no Unit for this path
number of params (prepared stmts only)
otherwise, a leaks when exn propagates
peek through an extract of Bool.value.
position of the original array element
prepares a query for further execution
record current glyph index for kerning
return entire buffer as a partial line
reusing db param from Mongo::drop call
running position of non-rotated string
select db.system.namespaces collection
set non-blocking so we can do timeouts
skip invalid variable names, as in PHP
skipping linux interpreter declaration
src is definitely not the target type.
starting bit of the consecutive range.
str is the UTF8 next character pointer
subtype is antisymmetric and reflexive
successfully created the child process
swift encodes octal differently from C
that work is left to prepareFuncEntry.
the caller should already have checked
the method does nothing if passed null
then we have seen a redundant release.
these are promoted to int, so no break
this closes the previous utext, if any
this covers both closures and functors
try looking at the first HOWMANY bytes
turn the first argument into MongoCode
unreachable for known expression kinds
use a bogus constant to store the name
we got a persistent guy from our cache
we have cleared all slots, good enough
we have to inspect the func at runtime
where to return number of rows fetched
whether to avoid priting the separator
will be null unless there was an error
write the WBMP to a gd file descriptor
"QTKit", QTKit is unavailable on Swift.
(Because of the LdLocPseudoMain stuff.)
(Only that one cell MUST be filled, but
- Only a single increment by a literal.
- The call must not be magic or static.
- We must be in RepoAuthoritative mode.
- the second one is the new apply site.
/ / FIXME: The latter reason is a hack.
/ / The result is always a GlobalValue.
/ / This is to handle a case like this.
/ All this is done in multiple threads.
/ The call result is otherwise ignored.
4) Compare the sets of successor blocks
@param new_buffer The new input buffer.
A folly::none return signifies Variant.
A layout can also have a suffix layout.
A method call using archetype dispatch.
A nonprintable character is also wrong.
A reusable buffer for emitting records.
A vector type we don't know how to map.
Actually get the input from the socket.
Add (match, offset) to the return value
Add all adjacent nodes to the WorkList.
Add key for numbers not divisible by 7.
Add opaque storage at the given offset.
Add the appropriate Boolean constraint.
Add the function type as the parameter.
Add the rest of Path to P and return P.
Add weights for all the loops BB is in.
Adjust the position of the diagnostics.
All argument values must be StructInst.
Allocate a new object using the layout.
Allocate the local variable for 'self'.
Allow this lookup to find hidden names.
Already accounted for in the arguments.
An indirect case should have a payload.
Anchor the SerializedSILLoader v-table.
And an empty object is null by default.
And it has substitutions, return false.
Apply substitutions to the callee type.
Are we building the genset and killset.
As such, we only remove allocations if:
Ask the runtime to find the case index.
At least one non-back edge predecessor.
At this point, we have 3 possibilities:
Attach succeed, wait for next interrupt
Attempt again using the up-to-date AST.
Attempt to import all modules we found.
Attempt to solve the constraint system.
Based on that, compute an overload set.
Being marked transparent controls this.
Bind a variable into the current scope.
Bind them together into a single tuple.
Bind things from 'self' preferentially.
Bitcast it to the class reference type.
Bitcast of non-negative is non-negative
Both tRNS and true alpha are supported.
Build a demangled type tree for a type.
Build the "if" around the early return.
Build the SILConstantInfo and cache it.
Build the field type accessor function.
But we might also have a foreign error.
By default, treat stdin as Swift input.
Calculate the size of the offsets array
Call this out in a separate diagnostic.
Called by the VM when a file is loaded.
Can be NULL if no characters were read.
Case 2: branch constantly goes one way.
Cast the predicate to a OnceTy pointer.
Check if a parent of a tuple is a "let"
Check if the step in command is active.
Check if we need the inner parentheses.
Check some cloning related constraints.
Check that it has the correct selector.
Check that we have a single Apply user.
Check the APP1 for Exif Identifier Code
Check the array element type parameter.
Check the default argument definitions.
Check the guard expression, if present.
Check to see if this looks like a type.
Check whether the BBSetOut has changed.
Check whether the optional has a value.
Check whether there is a conflict here.
Check whether we have a string literal.
Checks if an address value does escape.
Claim any additional unnamed arguments.
Clone or create the generic parameters.
Collect all of the following bitfields.
Collect all the required substitutions.
Collect both the value and the pointer.
Collect out of loop uses of this value.
Collect the cases and specialized rows.
Collect the remaining (unnamed) inputs.
Compare it with the class wrapper kind.
Compare the fixed scores by themselves.
Complete any conformances that we used.
Contrast this with the test in input().
Conventions based on a C function type.
Convert UTF8 representation into UTF16.
Convert each parameter to a Clang type.
Convert the condition to a logic value.
Convert the return and parameter types.
Converters can re-enter the interpreter
Converts UTF-8 into UTF-16 if required.
Create a lexer for the type sub-string.
Create a new Clang compiler invocation.
Create a new protocol composition type.
Create a typealias for this CF typedef.
Create the descriptor for the variable.
Create the getter function declaration.
Create the inherited conformance entry.
Create the new optimized function type.
Current algorithm: longest scaled axis.
Currently available indexes in tracked.
Data measued on function entry and exit
Declare 'IntlTimeZone' class properties
Decode RATAs with a different function.
Deconstruct a parenthesized expression.
Default arguments still require a type.
Deprecated, but we will keep it for now
Determine the foreign error convention.
Determine the name we would search for.
Devirtualize releases of array buffers.
Devirtualize releases of swift objects.
Diagnose some simple and common errors.
Diagnose user written unreachable code.
Dig out the reference to a declaration.
Direct conventions depends on the type.
Discard any inout or lvalue qualifiers.
Discard data scanned by exif_read_file.
Div and mod might return boolean false.
Do not iterate over this map's entries.
Don't pass a gid *and* a gname to this.
Don't recurse into the base expression.
Duplication is necessary due to xml api
Each object can only have one of these.
Elements are always stored at offset 0.
Emit a destroy_addr in the taken block.
Emit a metatype value for a known type.
Emit an expression in a forced context.
Emit any lazy type metadata we require.
Emit dealloc_stack for all temporaries.
Emit initializers for static variables.
Emit space for the dependent metaclass.
Emit the abbreviation for RECORD_FIXIT.
Emit the bindjmp for the function body.
Emit the block copy helper for a block.
Emit the body of a lazy cache accessor.
Emit the exploded constructor argument.
Emit the indirect return and arguments.
Emit the metadata for an ObjC category.
Emit the metadata for an ObjC protocol.
Emit the result of this call to memory.
Empty cases of enums do not have a type
Entry point for dead store elimination.
Enumerate the conformance requirements.
Erase any invalid or stub declarations.
Evaluate the condition, to validate it.
Exception breakpoints just add the type
Extensions could have shutdown handlers
F, G, H and I are basic SHA1 functions.
FIXME: Check all the variadic elements.
FIXME: Eliminate the less-correct path.
FIXME: Look up things other than types.
FIXME: Recursion into old type checker.
FIXME: Should look up the type witness.
FIXME: add ref_element_addr check here.
FIXME: get this from the proper header.
FIXME: that should be Direct_Guaranteed
Fail if the Elm key type doesn't match.
Figure out the name for this parameter.
Figure out what kind of optional it is.
Figure out which class this can affect.
Fill in the special destinations array.
Finally add the parent to the worklist.
Finally apply defaults from config file
Find a case corresponding to this value
Find safe array bounds check in a loop.
Find the _BridgedToObjectiveC protocol.
Find the bucket for the metadata entry.
Find the depth of the 'Self' parameter.
Find the maximum compressed chunk size.
Finished copying the file, now load it.
First if our UADCI has not users, bail.
First merge memory support information.
First, find the corresponding protocol.
Fix the name of the witness, if we can.
For a metatype, perform a construction.
For each Block with a new Phi argument:
For each index i until min path size...
For everything else, convert to an int.
For now, IR-gen makes the actual thunk.
For now, just generate a generic error.
Form a humble camel name from a string.
Form a reference to the builtin method.
Form a reference to the witness itself.
Found a replacement for this init call.
Free ActRec and store the return value.
Function arguments need to have a decl.
Function that calls loopCallee N times.
Generate ConstantStruct for StructInst.
Generate ilim digits, then fix them up.
Generate layouts for all indexed types.
Genset and Killset are initially empty.
Get disassembled instruction in codeStr
Get or create a global string constant.
Get ready to actually load the members.
Get the lowered optional payload types.
Get the type metadata for the instance.
Give reconnect a shot, it could help...
Grab the grouping data out of the array
Grab the hit condition if it was passed
Grab the new hit value if it was passed
Guarantees space for at least one push.
Handle .foo by just making an AST node.
Handle collection downcasts separately.
Handle identifier type representations.
Handle stuff specific to cppext classes
Handle the arguments of an ObjC method.
Handle the first instruction in the BB.
Helper for pretty-printing punctuation.
High precision timer related functions.
Holds the list of DefaultWitnessTables.
Holds the list of SIL global variables.
If any are not no alias, we have a use.
If both states equal, return the first.
If doing a self-assignment, we're done.
If it does not exist, ignore the error.
If it has the value 2, it prints 'baz'.
If not, emit the builtin call normally.
If so, the new bb dominates DestBB now.
If so, this release must be known safe.
If specialized, dump the substitutions.
If the declaration isn't generic, fail.
If the last letter is a 'y', try 'ies'.
If the result is a value, lowercase it.
If the type is null, lazily resolve it.
If the type is trivial, it's always +1.
If the variable is computed, ignore it.
If the variable is implicit, ignore it.
If there is 'else' logic, then emit it.
If there is a trailing slash, remove it
If there is no conflict, then we're ok.
If there were no conflicts, we're done.
If there's only one case, do a cond_br.
If we already have a failure, use that.
If we can derive a type witness, do so.
If we can emit a constant table, do so.
If we can't open the source file, fail.
If we can't stat the source file, fail.
If we didn't find anything, we're done.
If we found a single solution, take it.
If we get here, there was no end frame.
If we have a best method, reference it.
If we have fewer than 2 bytes, give up.
If we have metadata, go load from that.
If we haven't made progress, skip ahead
Ignore a failed super.init requirement.
Ignore the DominatingTerminator itself.
Import the accessor and its attributes.
Imported classes and protocols are not.
In the final case block, it is invalid.
Index the case according to this chunk.
Init state variables for paths analysis
Initialize the concrete value in-place.
Initialize the type expansion analysis.
Instantiate a thick metatype for T.Type
Intersect in all successors' BBMaxOuts.
Intersect in the successor WriteSetIns.
Invert the key compression permutation.
Is there an uncovered non-trivial type.
It also records how many Shapes it saw.
It was not always the first of January.
It's compressed, so it'll be different.
It's not live when we enter the helper.
Iterate over path components in `left'.
JmpZero/JmpNZero is handled separately.
Jump is unreachable, nothing to do here
Keep clrBack as color index if required
Key doesn't exist---we're still packed.
Language and Misc Configuration Options
Last vector element is the default case
Leave the original and 'hoist' a clone.
Lex any digits after the decimal point.
Links between loaded and stored values.
Load generator's FP and resume address.
Local function to finalize the witness.
Location data for the lookahead symbol.
Look for a Clang module with this name.
Look for conformances to this protocol.
Look through a TypedPattern if present.
Look through non-generic nominal types.
Look through the destination base type.
Look up the address of a witness table.
Look up the local type by its mangling.
Look up the method in the target class.
Maintain a set of whitelisted CF types.
Make sure all type parameters are safe.
Make sure that no bucket is at offset 0
Make sure that the value is in the map.
Make sure the FPushOp was in the region
Make sure the interface types are sane.
Mangle the constant with a _TTD header.
Manual re-construction of the instance.
Map errors 1:2 up to +- 3*MAXJSAMPLE/16
Map from each block to its information.
Map native types back to bridged types.
Map the SIL dest bbs to their LLVM bbs.
Map the selector into a Clang selector.
Maps region block ids to their RPO ids.
Maps witness table identifier to an ID.
Match the taken block, if there is one.
Module types are always fully resolved.
Must spill `current' or another victim.
NB: codes C4 and CC are NOT SOF markers
Next command is active, but it is done.
Next command is not active, just break.
No debug info is emitted for refcounts.
No label found, consume this character.
No type specified, treat it as a string
No-op on bool, array, resource, object.
Note that libclang does the same thing.
Note that loads do not kill a location.
Note that this typedef-name is special.
Note that we're removing this argument.
Note that we're resolving this witness.
Note that we've created this subscript.
Note: we never destruct APC, currently.
Nothing to do if we got an empty string
Now examine each block we saw a use in.
Now that the BB is empty, eliminate it.
Now we can construct the result string.
Now we have a namespace and class name.
Null goes to 1 on ++, stays null on --.
OK, this value is a potential candidate
Object inputs are only okay if linking.
Objects are always greater than arrays.
Ok, we just need to emit a declaration.
Ok, we need to use the projection tree.
Okay, we need to print this expression.
Okay: there is enough in the base name.
Only 'objc' declarations use 'dynamic'.
Only capture var decls at global scope.
Only do a filehash if the file changed.
Only handle integer operations for now.
Only handle single exit blocks for now.
Only if no flags are set (optimization)
Only remove the first occurance of "n".
Only set the class for static closures.
Only several types of modes are allowed
Only uses non reference counted values.
Operator decls aren't needed for IRGen.
Optional-to-value, normally disallowed.
Order the blocks for bytecode emission.
Other tokens are already accounted for.
Otherwise check for direct inheritance.
Otherwise give the entire call pattern.
Otherwise it must be a pattern binding.
Otherwise, consult the instruction map.
Otherwise, create a new string literal.
Otherwise, create and emit a new block.
Otherwise, destroy and copy-initialize.
Otherwise, it is a use of the argument.
Otherwise, just forget we had a setter.
Otherwise, just insert the closing ")".
Otherwise, leave zero as a placeholder.
Otherwise, return false with no effect.
Otherwise, this is a forward reference.
Otherwise, we come from a single value.
Otherwise, we have a generic parameter.
Otherwise, we have an extra inhabitant.
Outdent if the line looks like a label.
Packed packet headers, tile part header
Parameters are never directly imported.
Parse availability query specification.
Parse legacy array types for migration.
Parse the comma, if the list continues.
Parse version constraint specification.
Pass a null locale to use the C locale.
Perform automatic name transformations.
Pop the inputs, and push the constants.
Prefer the member in the concrete type.
Prepopulate the set of module prefixes.
Preserve the sugar of the scalar field.
Pretty-print the SILBasicBlock to errs.
Print the type using our print options.
Push stack arguments, in reverse order.
Raise frame is set to the current frame
Record the initial set of search paths.
Record this witness in the conformance.
Recover by propagating an undef result.
Recursively collect uses of the fields.
Recursively visit b and its successors.
Reemit the parameters as unsubstituted.
Reestablish our iterator if it wrapped.
Ref count already incremented in Create
Register that we are no longer writing.
Reject them unless this is a SIL input.
Relocation is not implemented on ppc64.
Remember that we're mangling a context.
Remember where this file data is going.
Remove calls to Builtin.staticReport().
Remove references from the dead blocks.
Remove this adjacency from the mapping.
Replace DebugValueAddr with DebugValue.
Replace the best cost and fall through.
Report an error if the sign bit is set.
Reserve space for polymorphic bindings.
Retrieve the state of this conformance.
Return () if no return value was given.
Return the SILBasicBlock of a given ID.
Return the cached clone if we have one.
Returns a connection for the operation.
Returns a unique id for the breakpoint.
Returns the SILValue base to bit index.
Returns true iff the unit was modified.
Roll over the jcc and the jmp/fallthru.
Row (or column) of contribution weights
SHA256-based Unix crypt implementation.
SHA512-based Unix crypt implementation.
SJIStoJIS() is sjis2jis() by Ken Lunde.
Same as above but with some other bits.
Same as vspprintf but taking an va_list
Same work as above, but opposite order.
Scans all references inside a function.
See if this is an optional initializer.
Seed the generator with a simple uint32
Send the gd2 id, to verify file format.
Set the lazy resolver for this context.
Set the manager from the global manager
Set the module's string representation.
Set up a writeback through a +0 buffer.
Set up the PHI nodes on the error edge.
Set up the uninitialized release block.
Shadow any initializers that are worse.
Signal an abnormal exit by returning 1.
Simplify the program termination block.
Skip a type suffix that can be dropped.
Skip any type variables that are bound.
Skip over 'type's in the context stack.
Skip the self types parameter entirely.
Skip type variables in dead components.
So there is only one possible function.
Someone called stop before we got here.
Special case the top-level pseudo-main.
Special-case: there's nothing to store.
Special-case: tuples containing inouts.
Split the base name, if it makes sense.
Start by cloning functions from stdlib.
Start tracking this location and value.
Starts tracing using the given profiler
Store subpat_names into the cache entry
Store the named value if we had a name.
Storing into the object can be ignored.
StructDecl if we are visiting a struct.
Subclasses and extensions cannot do it.
Subscripts are always instance members.
Substitute in our own 'self' parameter.
Suggest adding availability attributes.
TODO: Allow customizing recorded events
TODO: Issue a proper error message here
TODO: Non-ErrorType boxed existentials.
TODO: Unless they have magic methods...
TODO: emit diagnostic with error string
TODO: enums nested inside generic types
Tag sets will be included if available.
Technically not prohibited by the spec.
Teleport the closure to the next local.
Tell the database to destroy its cursor
Temporary buffer for vector immediates.
Temporary, during file-cache migration.
That is the IFD for the first thumbnail
The "could be" relationship also holds.
The "introduced" versions are the same.
The / result is of type ObjCClassPtrTy.
The author of this software is David M.
The basic block that we are optimizing.
The content of the destination address.
The context for the code we're running.
The declaration of ObjectiveC.ObjCBool.
The declaration of Swift.OpaquePointer.
The exited process was a light process.
The following vasms reemit other vasms.
The function_ref needs to be invariant.
The insert into seen wasn't successful.
The last multiplication could overflow.
The module we are currently processing.
The object being a deallocating object.
The operands need to be loop invariant.
The owner's already in its own cleanup.
The result can be empty in error cases.
The result type must be materializable.
The type must / have generic arguments.
The value is already a native metatype.
The volume (actually 2-norm) of the box
Then we transfer the body of F to NewF.
There are 3 cases that can happen here.
There's no reason not to do more later.
These settings are NOT system settings.
These work whenever they are suggested.
They should be structurally equivalent.
They're of the same kind: fix the name.
Things that may be written in the block
This happens when CSDiags nukes a type.
This has the effect of an intersection.
This is also part of "provides-member".
This is not a very efficient algorithm.
This is the Value for the current base.
This is useful for the image dimensions
This may let us recursively avoid work.
This should never cause a deallocation.
This version has the slow path inlined.
This works fine for GCC, but not Clang.
To avoid recursion, use a loop instead.
Top-level types, for various consumers.
Track stack types and pre-live ActRecs.
Track the base for member declarations.
Transfer control to the resume address.
Transfer ownership of obj to the ActRec
Transform the body of the catch clause.
Treat a newly-added hash as up-to-date.
Try to find the metatype in local data.
Try to grab needed context information.
Try to infer from containing file name.
Tuples are also represented as structs.
Type of the argument list, if knowable.
Type-check the constructor declaration.
Unify to a common ancestor if possible.
Unique the given set of type variables.
Update outside used instruction values.
Useful for the xdebug_call_* functions.
Value member lookup has some hacks too.
Variables for Floyd-Steinberg dithering
Variadic parameters can be unfulfilled.
Verify the set of cases we dispatch on.
Verify type layout if we were asked to.
Visit any var decls in the initializer.
We get this from the beginning of htab.
We have processed this SILValue before.
We need to handle the Self return type.
We pad ephemeral stubs unconditionally.
We prefer to print the type separately.
We will be also discarding stack temps.
Weak and Unowned properties are (weak).
When such collisions exist, we pick the
Whether this type is known to be empty.
Wrap the function in its original form.
Write the categories, if there are any.
Write the generated bitstream to "Out".
Zero the histogram or inverse color map
a certificate to use for authentication
actually execute the regular expression
add to the map the newly created values
all patterns are longer than the source
already handled with redirection or 404
already read 0xff in filetype detection
and recompute its volume and population
assert that end event is next in stream
can be nullptr for default constructor.
canonicalize handles Windows paths too.
clean up once we finish canceling event
concat_is will incRef the output string
copy document count to var user sent in
corrected date of the Paschal full moon
create a bson long from an Int64 object
create instance of default object class
do not return the shape fields and keys
encode each as a 3 byte surrogate value
end anonymous namespace / Sink Retains.
execinfo.h is not available on Android.
exposed to runtime/base/ini-setting.cpp
first getImm is suppose to get the sign
firstUse:      The first use in `this'.
for each block in reverse postorder: 2.
gdIOCtx JPEG data sources and sinks, T.
generate mmap flags for contiguous heap
generate sig base on the semi-final url
get color values of neighbouring pixels
get the converter output, and return it
i.e. clear, enable, disable, or toggle.
if this unit isnt mergeOnly, we're done
if we were killed, bail out immediately
iterate through first character matches
join multiple To: or Cc: lines together
just return 0 if we hit the end-of-file
locals are preferred in unions to iters
middle chunks should never be zero size
mop things up if we ended on a boundary
must conform to the NSCopying protocol.
name is an arbitrary sequence of bytes.
no other exceptions should be seen here
not exif_iif_add_str : this is a buffer
partial_apply which is being processed.
patched later Augmentation data length.
performance optimizations by Phong Tran
php_mongo_get_reply() throws exceptions
port cannot be longer then 5 characters
prepare and validate function modifiers
pretend we don't support this hash type
primed keys never say true to expired()
rcmd contains a list of variables only.
reset the HTTP_HOST header from apache.
return true if the store set / changes.
reuse this curl handle if we're pooling
rgb_sat: pointer to the output rgb row.
setting parameters and static variables
shuffleMagicArgs deals with everything.
so we can report errno by mysql_errno()
some schemas allow the host to be empty
static things shouldn't be in the heap.
switch_enum instruction to be replaced.
then use IT as our source of archetypes
this gets rid of the ref, if it was one
undo the effects of YY_DO_BEFORE_ACTION
update those bound column variables now
use an indirect jump through a register
we can fill as many others as we wish.)
we're guaranteed that the key is an int
"Weak" uses are used in optimizeActRecs.
'var' and 'let' patterns shouldn't nest.
(2) readSILFunction forces module scope.
(Re)define some defines known by libjpeg
- the field offset vector (fieldOffsets)
...so we don't mess up next array output
/ / Valid: InnerDirect, OuterResultAddr.
/ / Valid: InnerResultAddr, OuterResult.
/ Returns the array is this is the case.
2.0.18: space was a oor choice for this.
20 bytes RIFF header 10 bytes VP8 header
A Bison parser, made by GNU Bison 2.4.1.
A helper for creating LLVM struct types.
Above cases push at most one stack cell.
Acquire the archetype's static metadata.
Actually call the native implementation.
Actually, the final release would crash.
Add entries for each loaded conformance.
Add no-parameter, non-void method names.
Add salt for numbers not divisible by 3.
Add the DBGP_COOKIE environment variable
Add the new members to the lookup table.
Addresses aren't compatible with values.
Adjust internal breakpoints accordingly.
Adjust to the end of the starting token.
All funclets aren't in the main section.
All ints are implicity less than arrays.
All of the parameter names should match.
Allow our threads to fight for the lock.
Already accounted for in the parameters.
Already at the size, just strip profiles
Also add the subscript entry, if needed.
Also keep track of the blocks with uses.
Always normalize name before autoloading
Always verify the node as a parsed node.
And is not a release_value, return None.
Anonymous functions have shared linkage.
Any use of this will be an error anyway.
Anything else is not statically derived.
Append the new ones, filtering out Nops.
Apply the generic arguments to the type.
Archetypes are never statically derived.
Are we computing the genset and killset.
Ask the runtime to derive the tag index.
Assert that we set the superclass field.
Assignment to a StaticString is ignored.
Assume anything else isn't a definition.
Assumes two's complement representation.
At most siz-1 characters will be copied.
Attempt read-only lookup of cache entry.
Attempt to put it into our arc opts map.
Avoid reprocessing functions needlessly.
B.cond range is +/- 1MB but this uses BR
Bind arguments for cases that want them.
Both members are in protocol extensions.
Bound generic types have type arguments.
Branch with the result as a BB argument.
Break off a piece of the mask and value.
Build a new normal protocol conformance.
Build a reference to the generic member.
Build a specific value-witness function.
Build the union field getter and setter.
But this is the skeleton for when we do.
Call through "hasValue" on the decl ref.
Cancel backtracking and build that name.
Capture the methods in this source file.
Catches are handled in visitDoCatchStmt.
Changed during the course of the request
Check all the inputs for unknown values.
Check availability of accessor functions
Check for an existing generic signature.
Check for too many substrings condition.
Check if a getter was generated already.
Check if all possible cases are covered.
Check if the node needs to be processed.
Check if the subclass overrides a method
Check if this loop has multiple latches.
Check property and subscript overriding.
Check some invariants around InitCtx: 1.
Check that indexing is still persistent.
Check the class constraint if necessary.
Check the condition on line breakpoints.
Check the current set of type witnesses.
Check to see if this is already defined.
Check to see if we need a default block.
Check to see if workarounds are enabled.
Check whether the SIL module defines it.
Check whether the parameter types match.
Check whether this is a bridging upcast.
Check whether we have a forced downcast.
Check whether we have an implementation.
Check whether we're bridging to a class.
Check whether we've already cached this.
Cleanup to destroy an uninitialized box.
Clone the component if this isn't final.
Coerce the element to the expected type.
Collect all of the remaining archetypes.
Collect all of the visible declarations.
Collect all recursively hoistable calls.
Complain that there is no suitable type.
Complain that we couldn't find anything.
Compute the distances to the exit block.
Compute the sign bit of the LHS and RHS.
Compute vtable slots for all interfaces.
Construct this object before any others.
Convert input string to internal Unicode
Convert internal image_type to mime type
Convert the argument to +1 if necessary.
Convert the metatype value to AnyObject.
Convert the unicode string to lowercase.
Convert the unicode string to uppercase.
Converts a user token ID to a token name
Copy the array load to the insert point.
Create a constant with that struct type.
Create a copy of the BB as a landing BB.
Create allocations for this instruction.
Create an empty body for the destructor.
Create an implicit accessor declaration.
Create an integer literal for the value.
Create the Cloned Name for the function.
Create the allocations in reverse order.
Create the interface type of the method.
DCE replaces dead arg values with undef.
DISPOSE constants Dispose type constants
Dead-code, but needed to satisfy cond().
Deferred string value and cas, see below
Define the add-functions for all passes.
Defined here so it can be inlined below.
Defined property that is not accessible.
Derive the tuple type from the elements.
Determine default SSL configuration file
Determine the CommandOutput for the job.
Determine the OutputInfo for the driver.
Diagnose a missing required initializer.
Diagnose a reference to an unknown type.
Diagnostic about the compiler arguments.
Dig out the nominal type being extended.
Disable all llvm IR level optimizations.
Do an actual comparison of the contents.
Don't bother with string interpolations.
Don't diagnose when we're injecting into
Don't generate any code for the builtin.
Don't need a module for SIMD types in C.
Don't need to handle function arguments.
Don't use any AST types in 'swift::sma'.
Drop "With" if present after the "init".
Each dst must not be previously defined.
Each pred has a forward link to the phi.
Each real token shifted decrements this.
Eagerly mark us as not needing ratchets.
Either both must be 'static' or neither.
Eliminate trailing newline from ctime_r.
Emit 'self', then mark it uninitialized.
Emit IR for the body of the instruction.
Emit a call to do a 'destroy' operation.
Emit any delayed diagnostics and return.
Emit debug information for the argument.
Emit the default block if we needed one.
Emit the initialization for the pattern.
Emit the type encoding for the property.
Emits a type check in the current block.
Empty entries are basically AnyPatterns.
Enable jemalloc thread-local heap dumps.
Encoding is 0x1110aaaa 10bbbbbb 10cccccc
Ensure that graph invariance 4) is kept.
Enums can only have computed properties.
Errors and Logging Configuration Options
Errors are propagated via 'nil' returns.
Everything uses the new instruction now.
Explicitly pass the target to the linker
Extract the last SILLocation used in BB.
FIXME: Actually diagnose something here.
FIXME: Dig out the property DeclNameLoc.
FIXME: Eventually, we may want to throw.
FIXME: Handle hierarchical names better.
FIXME: If there is no module, infer one.
FIXME: Only functions can be overloaded.
FIXME: Optimize for known switch values.
FIXME: Poor source-location information.
FIXME: Print location info if available.
FIXME: Should check for protocol in Sema
FIXME: Specialize the match failure kind
FIXME: This feels painfully inefficient.
FIXME: We can't handle subpatterns here.
FIXME: handle variable amounts of space.
FIXME: partial application of properties
FIXME: this needs to be target-specific.
Fail if the Elm key value doesn't match.
Figure out the type we're converting to.
Find or create a translation for `args'.
Find the _ObjectiveCBridgeable protocol.
Find the appropriate injection function.
Find the destructor name via SILDeclRef.
Find the entry point for a SIL function.
Find the location of optionality, below.
Find the typealias given a builtin type.
First find the first non-payloaded enum.
First make sure that the prefix matches.
First test a case that we can represent.
First, see if this is a predefined type.
Fix build on Windows/old versions of ICU
Fix predecessor sets for the successors.
Fix successor sets for the predecessors.
Fix the argument names that need fixing.
Fixup local ids, in case we removed any.
Fonts can be used across multiple images
For each BB in our reverse post order...
For empty names, there is nothing to do.
For every requirement, add a constraint.
For now, all we have is swift_slowAlloc.
Form the lvalue referencing this member.
Form the target for the optional object.
Forward it along and register a cleanup.
Function that adds a new key/value pair.
Functions use statics within themselves.
Generate a load for the source argument.
Get or create buffers for the arguments.
Get the list of existential constraints.
Get the lvalue address as a raw pointer.
Get the storage type for the given type.
Grab the hostname and port to connect to
Guesstimate the weight of the new block.
Handle zero-argument selectors directly.
Handled at the PatternBindingDecl level.
Helper for vasm-simplification routines.
Hook called when the VM raises an error.
How to perform our stack overflow check.
If Ty is trivial, just pass it directly.
If U is a terminator inst, return false.
If __invoke is static, invoke it as such
If available, check the OutputMap first.
If everything is reachable, we are done.
If it a call of a throwing callee, bail.
If it has a global imported as a member.
If it is not working, it's not Thomas G.
If it is, you can ignore the error code.
If it might be, we do some more digging.
If it's obviously non-exhaustive, great.
If nothing has changed, just keep going.
If nothing uses it, it'll just be DCE'd.
If so, emit specific diagnostics for it.
If that doesn't exist neither, complain.
If the argument is existential, open it.
If the conformance is not visible, fail.
If the conversion is trivial, just cast.
If the name matched, report this result.
If the table was emitted, emit after it.
If there are extra tag bits, check them.
If there was a - sign, negate the value.
If they're ambiguous, they're ambiguous.
If this is the payload case, we're done.
If this piece is zero, it has no effect.
If we cannot do this, skip this release.
If we didn't find any methods, complain.
If we fail, just return the declaration.
If we found the end of the line, return.
If we have a superclass, import from it.
If we have an explicit cast, we're done.
If we have the slot, emit a store to it.
If we returned, then the cast succeeded.
If we saw a conflict, complain about it.
If we succeeded, use the coerced result.
If we used the entire value, we're done.
Ignore abstract entries if so requested.
Ignore the element that will be handled.
Implicit properties don't get accessors.
Import protocols this class conforms to.
In any case, erase the original Destroy.
In this function we do the actual check.
Infer requirements from the result type.
Initialize all of the known identifiers.
Insert copies and loads at instructions.
Intentionally copy the raw pointer value
Intersect in all predecessors' BBSetOut.
Intersect the successors' BBWriteSetIns.
Invoke Extension::moduleLoad() callbacks
Invoke the PHP extension function/method
It *seems* better than clearing the msb.
It can be acquired only when it is zero.
It would fail right now for exit traces.
Iterate over results and store in array.
Just be lazy and reload the error there.
Just use the argument registers instead.
Lazily generate the record for the file.
Leave the cleanup on the original value.
Like printf, only we append to a buffer.
Linkage specifications are not imported.
Load the address of the inout parameter.
Load the old pointer at the destination.
Local function to compare two solutions.
Logical error (i.e. conflicting options)
Look at all of the VarDecls being bound.
Look at the definition, if there is one.
Look for existing adjacency information.
Look up the Swift metadata from context.
Look up the node for this type variable.
Look up the witness for the constructor.
Lookup the decl in the top-level module.
Lower comparison with immediate to cmpqi
Lower the SIL arguments to IR arguments.
MARK: The ASTPrinter callback interface.
MD5 Message-Digest Algorithm (RFC 1321).
Make sure that no bucket is at offset 0.
Make sure that the StructDecls match up.
Make sure that the derived type is sane.
Make sure that the tuple types match up.
Make sure we have a reabstraction thunk.
Make sure we're left with an identifier.
Map __attribute__((warn_unused_result)).
Mark that this is an observing property.
Mask off the spare bits (if they exist).
Match up the generic arguments, exactly.
Metatype-to-object conversions are free.
Might learn more from the magic(4) entry
Modified 9 Jan 2002 by Makoto Matsumoto.
More than one trait contains the method.
Name is something like: trunc_Int64_Int8
Need to add maybeRef to the `store' set.
Need to check if extendedTy is ErrorType
Never do a +0 load together with a take.
Next opcode is unreachable on this path.
Next token should be the attribute name.
Next, write the protocol witness tables.
No bridging needed for native functions.
No other expression kinds are permitted.
No parallelism, verify all declarations.
Nodes that form the root of lvalue paths
Non-atomic reference counting tests // /
Non-static methods are instance members.
None of these tests should use any data.
Normalized weights of neighboring pixels
Not a typo: Zend defines OFFSET as ONSET
Not enough room in the buffer - grow it.
Not found - try it as a special keyword.
Not in any loop identified by loop info.
Note that this is a stub implementation.
Note: the parent list contains no nulls.
Nothing to do if we can't write the file
Now `shift' the result of the reduction.
Now add typerefs of all of the captures.
Now consider the rest of the parameters.
Now the effects on the set being stored.
Null terminate and eat *trailing* return
Number of elements along histogram axes.
Ok, we are visiting a non-trivial field.
Okay we found a post dominating release.
Okay, start building up the result list.
Only do the storage for ref-counted type
Only non-failing initializers can throw.
Only track one different operand for now
Ordering is as follows: - Generic params
Otherwise the payload is just the index.
Otherwise, break down the decision tree.
Otherwise, create a fresh type variable.
Otherwise, introduce a new vtable entry.
Otherwise, load the constant out of RDS.
Otherwise, look at the conformance list.
Otherwise, parse the fully general form.
Otherwise, produce a more generic error.
Otherwise, the destination is erroneous.
Otherwise, the result is always Nullptr.
Otherwise, the result must be a Boolean.
Otherwise, the types must be equivalent.
Otherwise, unknown associated decl kind.
Otherwise, use a global FunctionRefInst.
Otherwise, we can / potentially mismatch
Outdent if the line looks like a setter.
Output must be a global type named Bool.
Parse 'case' sil-decl-ref ':' sil-value.
Parse each segment, find the closing '/'
Parse the 'where' expression if present.
Parse the closure-signature, if present.
Parse the optional explicit return type.
Pass the diagnostic off to the consumer.
Peel off the bit at the current position
Perform a naive memcpy of src into dest.
Perform specialized dispatch for tuples.
Perform the transformation on each load.
Pop the matching bracket and keep going.
Populate the superclass members, if any.
Prepare a binary op that is commutative.
Prepare for input from a gdIOCtx stream.
Prepare the end of initializer location.
Print out the information for each loop.
Print the explicit raw value expression.
Produce a correct order of instructions.
Produce a nice diagnostic for this case.
Produce the mangled name for this class.
Protocol descriptor references are free.
Public properties are always accessible.
Reading the RC is as "bad" as releasing.
Received malformed record data- bail out
Record all of the explicit conformances.
Record the SILValue to location mapping.
Reference to an unbound instance method.
Reject static functions at global scope.
Remove all uses with the empty tuple ().
Remove this type variable from the list.
Remove unreachable blocks from `m_data'.
Removing a breakpoint with the given id.
Replace 'Self' with the conforming type.
Replace it with a Jmp to the next block.
Report the accessors that were utilized.
Resources are always greater than nulls.
Restart at the first argument/parameter.
Result type can be covariant (or equal).
Resume in the TC right after our caller.
Retrieve the raw type of the given enum.
Return 1 if generator state is not Done.
Return a MongoCursor for the result set.
Return the current time in microseconds.
Return the directory portion of the path
Returns how many connections were closed
Returns true / If the block was removed.
Round up to alignment to get the offset.
Run queue of ready async functions once.
Run the iterative data flow to converge.
Save this in case the debugger needs it.
Scale to 128 levels of alpha for gd use.
See TypeAnnotation::getScalarArrayRep().
See if we already defined this function.
See if we cached the mangling signature.
See the comments in asyncFunctionReturn.
Set backward pointers from last to pred.
Set flags to tell polling thread to end.
Set options for the current file/buffer.
Set our lattice state to be decremented.
Set our lattice state to be incremented.
Set the location/scope of the intrinsic.
Set up the PHI nodes on the normal edge.
Sets the elements of a use to available.
Setting DWARF Version depend on platform
Simple enumerations conform to Hashable.
Simple optional-to-optional conversions.
Skip invalid declarations and ourselves.
So I put a right shift to loose the lsb.
So remove Bar() to re-balance the stack.
So the phonome SCI invades both S and C.
Soon we'll add alpha channel to palettes
Sort the fixits by their start location.
Sort the same-types by LHS, then by RHS.
Special cases, optimized implementations
Specialized emitter for Builtin.destroy.
Split the base name from the parameters.
Start of segment to append while walking
State when we are within a quoted string
Stop here if we have nothing else to do.
Store the context arguments on the heap.
String literals concatenation optimizer.
Strip directory name from the file name.
Structs depend on their physical fields.
Synthesize the body of a trivial getter.
Synthesize the body of a trivial setter.
TODO: Encapsulate this better in Callee.
TODO: Prove this and put the proof here.
TODO: Switch to AcrRec API once it lands
Take yet unprocessed bytes into account.
Target is before start of Node, skip it.
The AllocStackInst that we are handling.
The SIL function type being represented.
The array must be an array literal type.
The call/function contains invalid code.
The context keeping the parameter alive.
The convention for general deallocators.
The default conventions for ObjC blocks.
The destination is of the expected type.
The kind of bindings that are permitted.
The last multiplication could underflow.
The new block is dominated by the SrcBB.
The new state becomes the current state.
The operand is an alloc_existential_box.
The paramdecl should have function type.
The result is perfectly decided locally.
The root node will / always be a Global.
The runtime limits the count to INT_MAX.
The set of normal protocol conformances.
The source type is a C++ reference type.
The source type is a block pointer type.
The type must first be a type reference.
The user has to think harder about this.
The witness table parameter is not used.
The work list of not yet handled blocks.
Then emit the case body into the caseBB.
There is no such thing as an EOF return.
There is nothing to do for this value...
There is some custom type checking here.
Therefore the assertion below must hold.
These types are always class references.
They forgot to leave room for the EOB's.
Thick metatypes are sources of metadata.
This address is of the substituted type.
This can modify both selfValue and subs.
This character could be either '"'or '-'
This could change the type of any local.
This is a simple form of jump threading.
This is a use of an uninitialized value.
This is an override, so mark it as such.
This is of course very much so not true.
This might box the local, we can't tell.
This only matters for stored properties.
This records the overload for use later.
This should be a tail call in opt build.
This should only be possible with loops.
Track the AST location of the component.
Trait aliases can increase method count.
Transfer function for dataflow analysis.
Treat this as the end of the value size.
True globals (no need for thread safety)
True if temporaries are not created yet.
Try to resolve the witness via defaults.
Tuples don't have compound-name members.
Type implementation for loadable tuples.
Types supported by PHP 7 scalar type RFC
Undo the effects of YY_DO_BEFORE_ACTION.
Unlikely: shifting by a negative amount.
Upcasting doesn't require type metadata.
Update the argument label and base name.
Update the best score we've seen so far.
Use a null decl to represent the module.
Use the apply instruction as the retain.
Using macro to commonlize vasms lowering
Verify that a vtable follows invariants.
Visit the loop nest hierarchy bottom up.
Wait for server ack before closing pipe.
We can "take" since the parameter is +0.
We can move this entity to an extension.
We cannot override individual accessors.
We cannot override operators as members.
We do not optimize this function at all.
We don't allow a filename of just ".ini"
We found an entry with a negative value.
We found the diagnostic, so remove it...
We have no source file for the function.
We haven't seen this member type before.
We know the dynamic type of the operand.
We know they cannot be the same integer.
We need to have generic parameters here.
We never emit constructors in protocols.
We registered the control target before.
We set it now, based on PATH_TRANSLATED.
We then add some extra slack for safety.
We want the frame of our callee's callee
We were not able to remove the condfail.
We will turn the latter into DebugValue.
We're about to start executing more PHP.
We're going to overwrite what was there.
We're going to smash the return address.
Will be set again below if still needed.
Zend doesn't support streams in realpath
Zext out to the size of the existential.
adjust so point is on the right boundary
already handled as part of the var decl.
and no error propagated to row below yet
auxiliary for emit(call) and emit(callr)
be sure calculation temps are big enough
because the first one was in funcs above
cache full - replace least-recently-used
callable type hint is considered builtin
callbacks for creating arrays out of ini
can raise an error if class is undefined
check the number of columns in resultset
closes the data connection, returns NULL
copy propagation on inst source operands
counts nesting for ( and T_UNRESOLVED_OP
create a packed array of the waithandles
create anchor to refer to this structure
create cursor, with RP inherited from us
cwd_length can be 0 when getcwd() fails.
decref after awaitResult is on the stack
do the same as for all other expressions
done if matches up to capacity of buffer
emulate poll(2) using select(2), safely.
ensure we only return 0 for FILE_DEFAULT
exception would have been thrown already
extend url request with oauth parameters
fake a quoted string for this last token
falls through if that condition was true
figure out the result set format, if any
filter jumps to prologues of other funcs
find address and figure out binding type
for rsrc, only write NULL in arrayHeader
get pixel value and index into the cache
hashes for storing parameter info/checks
if missing style, part, make it a double
if we don't have a PWD, try to append it
if we don't have a UID, try to append it
if we got a database name, add that, too
look up target config, and compare value
make a short string describing an object
make sure no other callback is specified
matched xchg+xchg that cancel each other
maximum length of the destination buffer
no equals, so either 'base64' or its bad
none of these interfaces support Uninits
now, perhaps, adjust the end of the line
number of antialias color lookups cached
number of characters read into yy_ch_buf
number of rows returned by the ODBC call
only print warning if not working with *
or all stored properties are safe types.
pre-compressed responses are always gzip
prefixes hashes by pat suffix hash order
pseudo marker for start of image(byte 0)
releaseRefs can be called more than once
reset all per-connection data structures
return type is the first of the typeArgs
return value is null if args are invalid
returns number of bytes added to buffer.
skip ahead the length of the regex match
space in the beginning means same header
special case -- power of FLT_RADIX to be
supporting a fallback doesn't make sense
the last vector item is the default case
this is where the match starts as size_t
unregister chunk from gdb and free chunk
wait until HTTP server is up and running
we forked/spawned and this is the parent
we've got something to kill, make a note
"auto" tends to be used as a verb prefix.
(At present, that depth is limited to 2).
*NOTE* We don't need to check types here.
- Nothing comes after the fault funclets.
- Pop the frame for the current function.
/ / Initially the BBWriteSetOut is empty.
/ Returns true if an overflow can happen.
/ Returns true if they are both l-values.
/ returns True if a function was inlined.
@autoclosure is only valid on parameters.
A "." expression that refers to a member.
A conformance in a different module file.
A destructor only has one argument, self.
A new state is a number between 0 and 29.
A node in an expression tree of counters.
A normal conformance in this module file.
A port of LLVM's InstCombine pass to SIL.
A single unlabelled value is not a tuple.
ARM machines really only have 32 GP regs.
Aaaand we're done - oops not thread safe.
Accepts ownership of the response object.
Add a new constraint between these types.
Add an output file for each input action.
Add any codecomplete.open specific flags.
Add delimiter only if entry had ancestors
Add the isASCII argument in case of UTF8.
Added 7/24/95: support transparent copies
All functions which implement the method.
All the translation routines expect this.
Allocate and construct the new signature.
Allocates the stack if it does not exist.
Along the way, it creates a PHP variable.
Also fix the Objective-C name, if needed.
An Objective-C class reference reference.
An adapter for laying out class metadata.
An array of the overloaded builtin kinds.
An error source that produces nil errors.
An operand marked as UA means use-across.
And that must be a releasing instruction.
Apply trait rules and import the methods.
Are we performing dead store elimination.
At most one should exist in a given unit.
Attempt to create a region at this SrcKey
AutoClosureExpr is introduced by CSApply.
BC: Close master when no arguments passed
Bail out if an unexpected error occurred.
Bail out immediately if the set is empty.
Behavior conformances are always private.
Behavior conformances can't be reflected.
Bind necessary bindings, if we have them.
Bind type1 to Void only as a last resort.
Block the threads we are about to create.
Blocks take their context argument first.
Build a convenient list of use-variables.
Build the body of a transformation thunk.
Build the fields of the private metadata.
Build the function_ref and partial_apply.
But this method is used as a last resort.
By default, just use the in-memory cache.
C99 requires __STDC__ to be defined as 1.
Calculate number of bits we are expecting
Can happen, e.g., in exception scenarios.
Case 1: both ways lead to the same block.
Case sensitive uppercase first character.
Check for a CF type name (drop the "Ref")
Check for a trailing closure, if allowed.
Check for apply insts that we can ignore.
Check for required protocol conformances.
Check if src and dest types are optional.
Check if this class is effectively final.
Check if we are hitting a call breakpoint
Check if we've reached a fixed point yet.
Check inherited protocols for class-ness.
Check instanceof using instance bitmasks.
Check other direction on the support_map.
Check that each dst is defined only once.
Check the raw value expr, if we have one.
Check whether this string already exists.
Check whether we have a default argument.
Check whether we have nolock as an option
Check whether we have the type expansion.
Choose the dependencies file output path.
Class declarations cannot be transparent.
Class instance is already an ObjC object.
Class metatypes bridge to ObjC metatypes.
Classes and class-constrained archetypes.
Clean up the source if we're supposed to.
Clear out the class requirement location.
CodeGen can't build ssa for objc methods.
Coerce the expression to the scalar type.
Coerce the operand to the exception type.
Coerce the pattern to the exception type.
Coerce the pattern to the subject's type.
Coercion from a subclass to a superclass.
Collect and sort the set of module names.
Collect the nested types, sorted by name.
Common base template for enum type infos.
Compute fixed point on the out_used sets.
Compute the dominator tree levels for DT.
Compute the interface type of the getter.
Compute the kill set for the basic block.
Concrete witness thunk for a conformance:
Configuration for the caller block limit.
Construct a SILDeclRef from ListOfValues.
Construct a representative function type.
Continue checking the result type, below.
Convert cell coordinates to update box ID
Convert pattern (if specified) to UTF-16.
Convert to microsecs and trunc that first
Copy element name locations, if provided.
Copy the first part of user declarations.
Create a new context for the fallthrough.
Create a typedpattern(namedpattern(decl))
Create all blocks and edges for one Func.
Create and register 'IntlCalendar' class.
Create and register 'IntlIterator' class.
Create and register 'IntlTimeZone' class.
Create succeeded StaticWaitHandle object.
Create the parameter list for the getter.
Create the parameter list for the setter.
Create the specialized conformance entry.
Currently only handle array.uninitialized
Currently this is only hooked up to SetL.
Currently we only handle array semantics.
Dead instructions should just be removed.
Deallocate everything we allocated above.
Deliberately leak the llvm::MemoryBuffer.
Delta Memory (since the last begin frame)
Destroy the main struct (reentrant only).
Determine the formal type of the storage.
Diagnose 'nil' without a contextual type.
Diagnose obvious assignments to literals.
Do formal evaluation of the base l-value.
Do nothing if no 'duplicates' were found.
Does this iteratively for all connections
Don't decent into control-dependent code.
Don't repeatedly diagnose the same thing.
Don't signal an error since we recovered.
Dummy handler to log unimplemented nodes.
Emit any shared case blocks we generated.
Emit code to release/destroy temporaries.
Emit diagnostics that say "no arguments".
Emit symbols for eliminated dead methods.
Ensure consistent state for vmfp and vmpc
Evaluate a target config call expression.
Expand R to 48 bits (simulate the E-box).
FIXME: Assert that this is never queried.
FIXME: Copied from TypeCheckProtocol.cpp.
FIXME: Module imports inside that header.
FIXME: PrintNameContext::GenericParameter
FIXME: Spare bits between struct members.
FIXME: Spare bits between tuple elements.
FIXME: This is missing implicit includes.
FIXME: hide individual custom completions
FIXME: update output ranges, if necessary
FIXME: update this to be a function pass.
FIXME: we could try to continue to parse.
FPushFunc consumes method name from stack
Fail if this isn't a copy-initialization.
Fail if we jitted more than 25kb of code.
Fall back to an unknown, indirect callee.
Fatal if the number of arguments is wrong
Fill depths with BFS over module imports.
Fill in the context pointer if necessary.
Filter out lexer errors for placeholders.
Finally, emit the epilog and post-matter.
Find a location that dominates all users.
Find out if we have any available values.
Find the _bridgeToObjectiveC requirement.
Find the builtin argument type we'll use.
Find the nominal type decl related to VD.
First move last chars to start of buffer.
First, type check the parent DeclContext.
First, we try to find the map from cache.
For each parameter in the old function...
For each store location, insert releases.
For everything else, convert to a double.
For simplicity, assume a single preheader
Force the resolution of the nested types.
Form the (favored, fallback) disjunction.
Format: a type, an operand and a decl ID.
Forward declaration for the MD5 algorithm
Forward the cleanup on the saved indices.
Found an apply that initializes the enum.
Free the out-of-line if we allocated one.
Fully set up the call frame for the stub.
GEP to the appropriate element and store.
Get or create an ObjC protocol reference.
Get the Swift type metadata for the type.
Get the allocation alignment of this box.
Get the exit blocks of the original loop.
Get the metaclass pointer as an intptr_t.
Get the reference to the existential box.
Get the tag bits from spare bits, if any.
Gets the base implementation of a method.
Gets the estimated definition of a value.
Give the cmd a bad type and send it over.
Go through all instructions of the block.
Gracefully drain any incomplete requests.
Handle "x.dynamicType" - A metatype expr.
Handle SILArgument for base invalidation.
Handle parameter type constraint failures
Handle privately visible modules as well.
Handle type-function if we have an arrow.
Here we only compute the number of bytes.
Hoist releases, but not epilogue release.
I probably could have just used strlen...
IRGen the modules this module depends on.
If generic, demangle the type parameters.
If it is addr cast then store the result.
If it's indirect, / grab its SILArgument.
If malformed, add replacement characters.
If that works, return it, otherwise none.
If the category is invalid, don't add it.
If the enum is empty, simply return zero.
If the function has captures, apply them.
If the information is on the AST, use it.
If the name matches, claim this argument.
If the types exactly match, this is easy.
If the user has specified an SDK, use it.
If there are no valid overloads, give up.
If there are substitutions, add them now.
If there's just an r_paren, consume that.
If this is an init, we're done searching.
If true, it may or may not be accessible.
If we are freezing this epilogue release.
If we can inline it, we can reference it.
If we fail, dump out some internal state.
If we failed, keep the ExprPattern as is.
If we found a decl for the UDE, check it.
If we found a non-legal user, bail early.
If we got any data, don't worry about it.
If we have an invalid case, bail out now.
If we have extra tag bits, zero them out.
If we need to infer 'dynamic', do so now.
If we reach a bad point, just return null
If we've already seen this object, return
Ignore the deallocation of the stack box.
Immediately stepping forward (fast path).
Import the constructor into this context.
Import the type of the underlying storage
Import the typedef-name as a declaration.
In this case, the data will be corrupted.
Inc or Dec for a string, depending on Op.
Indirect checked conversion instructions.
Indirect return of an address-only value.
Inform consumers that producers are done.
Initialize InlineAnalysis from an IRUnit.
Initialize Kind, uncurryLevel and IsObjC.
Initialize all streams up through `area'.
Initialize code block cb pointing to li64
Initialize one box containing whole space
Initialize the case and successor arrays.
Initialize the propagated errors to zero.
Inspect allocations and pointer literals.
Instructions marked in this set are dead.
Intersect in all predecessors' BBSetOuts.
Introduce variables to the current scope.
It found Tishri 1 at the end of the year.
It is Kislev - must find the year length.
It is okay to store into this AllocStack.
It is reset to ' ' by non-numeric formats
Just bail out on variadic tuples for now.
Keep on comparing from the current point.
Knott's relatively-prime secondary probe.
Lazy properties require special handling.
Less commonly used but valid nonetheless.
Load an r-value out of the given address.
Loads of loop invariant memory locations.
Look for an entry with this context name.
Look for the declarations with this name.
Lookup this base name in the module file.
Lower 'Self' as if it were the base type.
Lower the type if it is not a legal type.
MARK: Convenience functions for printing.
Make a pass over all the dependent types.
Make sure all the entries start out null.
Make sure that the raw type is Equatable.
Make sure there's no cyclic dependencies.
Make sure we are calling the same method.
Mangle this entity into the given buffer.
Mangle this entity into the given stream.
Map parsed parameters to a ParameterList.
Mark any unset elements as not available.
Members cannot be both dynamic and final.
Merge the summary graph into all callers.
Move the fallthrough case to specialized.
Move up to the innermost generic context.
NULL has a special meaning for each field
Nesting is set to the current VM nesting.
Never perform local lookup for operators.
Next command is active and we stepped in.
Next, add the fields for the given class.
No additional target locator information.
No opcodes have more than four immediates
No origPCs have more than four immediates
No transformation is applied to the name.
Non-typealias type declarations are okay.
None of the users capture the AllocStack.
Nor does casting to a more optional type.
Not interested in these instructions yet.
Not sure if there's a better one, though.
Note is a letter is a 'break' in the word
Note that we have resolved this overload.
Note: no support for reading array types.
Now emit the colormap index for this cell
Now generate code for the suffix portion.
OK, now we are ready to create a new one.
Ok, this instruction may have ref counts.
Ok, we have an apply site with arguments.
Okay, we found the correct witness table.
Okay, we have both the getter and setter.
Okay, we're naturally emitting to memory.
On success, returns number of bytes read.
On success, returns number of bytes sent.
Only building the gen and kill sets here.
Only root classes can have the attribute.
Only works for allocating initializers...
Optimize storage of the created TransRec.
Optional types are default-initializable.
Options for PHP7 features which break BC.
Otherwise, emit an error and return true.
Otherwise, give up on adjusting the name.
Otherwise, perform the heavy lifting now.
Otherwise, report the resolved overloads.
Otherwise, the name is a new declaration.
Otherwise, we are both index projections.
Otherwise, we break down the initializer.
Otherwise, we don't know why this failed.
Otherwise, we need to create a try_apply.
Otherwise, we need to emit a get and set.
Otherwise, we've got the r-value we want.
PID (assume max size, a signed 32bit int)
Parse the input and get split tokens info
Pass null to ContEnterDelegate initially.
Patches the Vptr, grab and save the data.
Peek ahead to check the gzip magic header
Peephole simplification pass for a Vunit.
Perform any adjustments needed to 'self'.
Perform the requested scanning operation.
Prefix for optional rounds specification.
Print the rest as synthesized extensions.
Process all types implementing protocols.
Process loops bottom up in the loop tree.
Process string output to make it nicer...
Process string, get positions and replace
Process the generic signature parameters.
Produce a specific diagnostic about this.
Produce the type when matching a witness.
Program flow is not changed by this pass.
Promote this alloc_box to an alloc_stack.
Propagate copies through stack locations.
Properties in this set cannot be removed.
Protocols never have a stored properties.
Push our null return value onto the stack
Put an invalid 'override' attribute here.
Read and validate the continuation bytes.
Record and return the simple conformance.
Record the constructor for future re-use.
Record the owner of the default argument.
Record this as the alternate declaration.
Recursively generate layout for the base.
Remember these for the binary ringbuffer.
Remember where the "data offset" will go.
Remember where this property is accessed.
Remove redundant checks in a basic block.
Remove the AllocRef and all of its users.
Replace the original copy with a destroy.
Requests that need semantic typechecking.
Restrict to VV-safe opcodes if necessary.
Resume printing comments from this point.
Retain of ThinToThickFunction is a no-op.
Retrieve the _bridgeToObjectiveC witness.
Return an array of all defined functions.
Return from here lets the opcode execute.
Return undef for blocks with predecessor.
Returns the frame of the callee's callee.
Round up to the alignment of the element.
Sanitizer runtime libraries requires C++.
Scalarize a load down to its subelements.
Scan the value from the temporary buffer.
See MessageFormat::cacheExplicitFormats()
See if there are any Tier-based overrides
See if there's a following argument type.
See task description for further details.
See the comments at the top of this file.
Set of indirect subclasses for the class.
Set up the substitutions, if we have any.
Side exit if the static property is null.
Simple case: we have the same identifier.
Simple enumerations conform to Equatable.
Simulate the demangling / parsing process
Size of the stack at the previous Concat.
Skip over "safe" and "unsafe" if present.
Skip unavailable superclass initializers.
SnapshotBuilder is not (yet) thread-safe.
So all we need to do here is set the name
So for now we just put it in both places.
So pushing a state here evens the stacks.
Some existentials use special containers.
Source inputs always need to be compiled.
Special case for superclass method calls.
Special case where no modulus is required
Specialized emitter for Builtin.condfail.
Start our worklist with NewBase and Root.
Starts profiling using the given profiler
States for each block, indexed by RPO id.
Static properties should never be Uninit.
Stay consistent with the readline library
Step doesn't care about this interrupt...
Strange things like "decltype(nullptr_t)"
Substitute into the witness function tye.
Synthesized are always after actual ones.
TODO: Add total count to snapshot header.
TODO: Avoid copies on address-only types.
TODO: Generalize this to general objects.
TODO: Need IntlCalendar implemented first
TODO: classes nested within generic types
TODO: make the sil location more precise.
TODO: structs nested within generic types
TODO: this would be useful for resilience
Tear down any side-table data structures.
The String conversion allows `NULL` to ""
The active scope is now the parent scope.
The block containing the checked_cast_br.
The class must be defined in Objective-C.
The collection object itself is increfed.
The depth of uncurries that we have seen.
The enum must not have associated values.
The function we are currently processing.
The initializer for an instance variable.
The lowest log level we get from JS is 0.
The main entry point of the optimization.
The main entry point to the optimization.
The native systemlibs: for now just skip.
The number of selector pieces we'll have.
The raw value is the enum element's name.
The result and argument types must match.
The top-level interface to the remangler.
The value-witness table for BridgeObject.
The value-witness table for raw pointers.
There are clearly better ways to do this.
There are no protocol conformance tables.
There are two different ways this can go.
There is no need to retain it separately.
There is no point in recording a new one.
There must be a property named "pointee".
Therefore, the default case is not known.
These four dual-inherit from DeclContext.
These is missing from cygwin ipc headers.
These methods use special implementations
They also make IOCtx calls look better...
They should go into RequestInjectionData.
Thin types have a trivial representation.
This assertion documents this assumption.
This can only remove from the line filter
This handles generically retains/release.
This is actually the SIL helper function.
This is only a BB local analysis for now.
This is the SILType of the memory object.
This is the default for the select_value.
This is the length of the matched pattern
This isn't a valid IPv6 address, so bail.
This isn't expected to change very often.
This one's default value changed recently
This should fail downstream healthchecks.
This should only be done in the prologue.
This will frequently become a dead store.
This will get default initialized to nil.
To apply the bridged casts optimizations.
Top-level code implicitly handles errors.
Try ordering based on module name, first.
Try splitting after the last preposition.
Try to find a single literal "true" case.
Try to replace the first pointer operand.
Type of the actual function to be called.
Update the alternate declaration as well.
Use the clang type for the receiver type.
Use the string instance we created above.
Values for TAG_PHOTOMETRIC_INTERPRETATION
Variable/function/subscript requirements.
Verify that the information still exists.
Visit the bridging header's lookup table.
Walk to the inherited class or protocols.
Warn on tuple splat, which is deprecated.
We always need a different success block.
We cannot handle such cases yet, so bail.
We collected the blocks in reverse order.
We couldn't find any normal declarations.
We currently do not handle address types.
We do not need to consider extra sources.
We do not need to do anything with these.
We do not support partial specialization.
We don't want to complain about it twice.
We need to allocate the object ourselves.
We need to open a new file under a mutex.
We only care about Objective-C protocols.
We only do this to remove dead arguments.
We only handle the simplest decl binding.
We want to know when it starts happening:
We want to remove "file://" if it exists.
We'll just pass undef in cases like this.
We've noticed that the socket has closed.
Whatever is depending on this, shouldn't.
While this function is quite general wrt.
Wrap a local or stack ID into a Location.
Wrap that up in a Selector and return it.
X: X, etc to allow for multiple instances
XXX NOT THREAD SAFE (is safe under win32)
XXX: Should respect ini_get("precision").
Zap any obvious duplicates along the way.
and add signature to the oauth parameters
and increment it so it becomes non-zero .
assumes we always have sendmail installed
br is a forwarding use for its arguments.
build map from function names to sections
calculate the length of the return buffer
can decref ExtraArgs or VarEnv and Locals
check session name for invalid characters
closes the connection an frees structures
component-wise summing-up of color values
copy the rest of p, the NUL is NOT copied
count the number of listed encoding names
creates a new per-prio queue if necessary
determine the status for the current cert
emit nop for a balanced li32 with 2 instr
error - print best error message possible
evaluate value expression passed to yield
falls through if that condition was false
fromType is a struct with fewer elements.
if first character, init BB corner values
if this is not the first one, add a comma
if we dont have buffered rows, fetch more
init methods are always instance methods.
io_file.c  Implements the file interface.
it as potentially ending a block comment.
iterate until both sweep lists are empty.
key MUST be a non-reference string or int
logic hacked from ext/standard/datetime.c
make sure to process initilized vars only
manipulate maxCount to match PHP behavior
normal delimiter: encoding scheme follows
num1 is set if str1 and str2 are strings.
only accept paths with the glob:// prefix
only here if we can't change the cwd back
populate oauth_args with given parameters
protocol compositions are order-invariant
register all the named locals of function
remove entry if destroy_addr got deleted.
replace default logger with thrift-logger
return array with the text's bounding box
rgb_line1, rgb_line2 - input rgba rows 3.
self::Constant inside trait or pseudomain
should not already exist in the map here.
skip first 4 bytes to leave room for size
so we don't have to fetch it all the time
tag and emit serialized version of object
the "Dominical number" - finding a Sunday
the Vreg that is used or def'd in the phi
this version takes exactly two arguments.
throw an exception if the doc was too big
uncorrected date of the Paschal full moon
val is false so we're passing tmp's type.
we didn't find any circularity, clean up.
we need to figure out which chunk to load
we've seen the same name before, uniquify
we've seen this before, so record address
zend_error() does not return in this case
"Captured" local types require no context.
"self" is always the first parameter list.
'_' and / variable patterns are wildcards.
'as' and 'is' casts have fixed precedence.
(SILGen should know how to peephole this.)
(The first condition is just a fast path.)
(but *not* T.type) - constructor calls T()
(charset is not null, see assertion above)
/ / Initially BBWriteSetIn is set to true.
/ Missing entries implicitly have value 0.
/ Splits all critical edges in a function.
0 for bgColor, nothing gets outside anyway
2.0.5: mode_mono fix from Giuliano Pochini
A TypeInfo implementation for empty types.
A direct reference to 'Self' is covariant.
A method call using class method dispatch.
A method call using super method dispatch.
A setter attribute can also override this.
A simple array of 32-bit masks for lookup.
A string whose data is globally-allocated.
Add a self clause to the substituted type.
Add image_info to associative array value.
Add it to the callee list and return true.
Add it to the module in a DerivedFileUnit.
Add padding to get up to the given offset.
Add the branch instruction with the block.
Add the character to the temporary buffer.
Add the current instruction to the region.
Add the old decrements to the delete list.
Add the old increments to the delete list.
Add the output file argument if necessary.
Add the requirement to the representative.
Add the requirements from the declaration.
Advance the iterator if that would happen.
All dispatch is done through objc_msgSend.
All the value types are basically similar.
Allocate a fixed-size buffer on the stack.
Allocate a new page if we haven't already.
Allocate the local variable for the inout.
Allocate the witness table and fill it in.
Allow silencing this warning using parens.
Always return something of the right type.
Always set remoteAddr, even if it is empty
An adapter for laying out struct metadata.
An array can hold at most INT_MAX elements
And attempt to find our matching argument.
Any bridgeable object type can be a class.
Any value bound here will just be dropped.
Apply generic arguments to the given type.
Apply the path to the given witness table.
Apply the solution to the pattern as well.
Assert that the optional value is present.
Assume missing because value is too large.
Assume the compiler knows what it's doing.
Async function has its own surprise check.
At the final ActRec in this nesting level.
Attempt to generate scanner automatically.
Attempt to read the default witness table.
Availability of elements within the block.
BB is either unreachable or not in a loop.
Base implementation for fixed-sized boxes.
Bit 0 is reserved as an 'initialized' flag
Build a new set of minimized requirements.
Calculate the inlining cost of the callee.
Called right after a function is finished.
Calls are not treated as basic-block ends.
Can't hoist allocation and dealloc stacks.
Cannot compare type declarations this way.
Category declarations by their signatures.
Cause the proxy to debug the given thread.
Check all the catch clauses independently.
Check for an existing mapping for the key.
Check if the merge is good for the callee.
Check if the merge is good for the caller.
Check if there is any input waiting on us.
Check if we are hitting a line breakpoint.
Check that the arguments and result match.
Check the next two values for correctness.
Check the signature of a generic function.
Check whether we can perform this binding.
Choose the Objective-C header output path.
Classify usages of Self in the given type.
Cleanup SIL to make it suitable for IRGen.
Clear annotations from the failed attempt.
Climb up to the top-most macro invocation.
Clone the existing generic parameter list.
Closures have an interal 0Closure variable
Collect captures if the accessor has them.
Collect requirements at the current depth.
Collect the stored properties of the type.
Collection iterator specialized functions.
Compare two sequences of SIL instructions.
Completely ignores sites that don't throw.
Compute the immediate-post-dominators map.
Compute the interface type of hashValue().
Compute the let properties of this struct.
Construct initial attributes from options.
Construct the left-hand reference to self.
Continue through the comma-separated list.
Convert a '_' expression to an AnyPattern.
Convert offsets into PCs, and sync the PC.
Convert the image src to a grayscale image
Copy the element list into the ASTContext.
Copy the extra prefix from the superclass.
Copy the second part of user declarations.
Copyright (c) 2015-present, Facebook, Inc.
Copyright (c) 2016-present, Facebook, Inc.
Couldn't find a suitable operand, so bail.
Create a constant with that integral type.
Create a new basic block and jump into it.
Create an empty parameter list to recover.
Create and register 'BreakIterator' class.
Create the AsyncFunctionWaitHandle object.
Create the appropriate messenger function.
Create the enum declaration and record it.
Create the initializer parameter patterns.
Create the selectors we'll be looking for.
Current algorithm: split at halfway point.
Decide whether some text looks like UTF-8.
Decompose the input types into parameters.
Default to implicitly unwrapped optionals.
Dependent types might be bound to classes.
Derive a pointer to the Objective-C class.
Derived types may conform to the protocol.
Deserialize all VTables in all SILModules.
Deserialize the literal raw value, if any.
Determine the kind of optional adjustment.
Determine the selector of the counterpart.
Determining this may be an O(N) operation.
Diagnose uses of unavailable declarations.
Dig out the ObjectiveCBridgeable protocol.
Disallow these chars outside option values
Discriminated union case without argument.
Do a dynamic cast on the instance pointer.
Do a lot of sanity checking on the result.
Do a single mutation pass over the blocks.
Do not process arithmetic overflow checks.
Document already exists, re-initialize it.
Don't crash if the location is a DebugLoc.
Don't emit the thunk if it already exists.
Don't print qualifiers for imported types.
Drill down on a single stage of component.
Drill down to the root normal conformance.
Dump a reference to the given declaration.
Each Litstr entry becomes a static string.
Each double-round is a series of 2 rounds.
Emit a call to the 'getEnumTag' operation.
Emit a instruction with invalid opcode 0x0
Emit abbreviation for RECORD_SOURCE_RANGE.
Emit the abbreviation for RECORD_FILENAME.
Emit the artificial error result argument.
Emit the create function for the template.
Emit the indirect return argument, if any.
Emit the metatype for the associated type.
Emit type and reffiness prediction guards.
Enable profiling and tracing if we need to
Encode type qualifier, 'in', 'inout', etc.
Encrypt one block, BF_N is hardcoded here.
Enter an initializer context if necessary.
Entry point to redundant load elimination.
Establish a default generic type resolver.
Everything is handled by the dependencies.
Existing connections, so find the last one
Expect intrinsics are 'free' instructions.
Extract a member from a struct/tuple/enum.
Extract the invocation pointer for blocks.
Extract the linker flags from the objects.
FIXME: Ambiguity detection and resolution.
FIXME: Crummy source-location information.
FIXME: Currently skipping generic classes.
FIXME: Deal with unsatisfied dependencies.
FIXME: Declaration validation is overkill.
FIXME: Doesn't work properly for generics.
FIXME: Handle "private(set)" requirements.
FIXME: Properly handle deployment targets.
FIXME: Remove this to save metadata space.
FIXME: Removing this triggers a linker bug
FIXME: Switch to a format other than YAML.
FIXME: This seems like an odd restriction.
FIXME: blocks should be Direct_Guaranteed.
FIXME: handle multiple direct results here
FIXME: implement fallback code completion.
FIXME: interface type should be passed in.
Fall back to just using the immediate LHS.
Fault entries have a few things to assert.
Figure out which field we're walking into.
Fill in the rodata reference in the class.
Finalize the lookup table, which may fail.
Find a strong iterator slot that is empty.
Find the AST node for the defining module.
Find the best witness for the requirement.
Find the last element with a known offset.
Find the maximum-sized builtin float type.
Find the point at which the depth changes.
First populate a worklist of predecessors.
First see if native getter is implemented.
First see if native setter is implemented.
First try to create a Projection for User.
First value is a string (our number value)
First, try to get user-specific magic file
For each predecessor with argument type...
For non-functions, just use the base name.
For now, all we have is swift_allocObject.
For now, all we have is swift_slowDealloc.
For now, that's just simply scalar values.
For this, we'll need special destinations.
Force the right-hand side to be an rvalue.
Forward results to the SourceKit consumer.
Frame pointers and stack depth must match.
Free the locals and VarEnv if there is one
Generate function info for this signature.
Generic tuple value witness for 'destroy'.
Generic type params are siblings to align.
Get everything else as option/offset value
Get the arguments in the proper registers.
Get the path through a tuple, if relevant.
Get the unbound generic type F belongs to.
Grab the request data and set up a step in
Grab the static properties from the class.
Guaranteed to exit, at least upon timeout.
Handle a nested optional case (see above).
Handle exception thrown by async function.
Handle per-connection termination cleanup.
If Ty is guaranteed, just pass it through.
If an old capacity was specified, use that
If any block is removed, reflow all types.
If either types are not unique return true
If it's a string of the next packed index,
If it's the same image, mapping is trivial
If no methods were overridden, we're done.
If so, strip that prefix off when present.
If so, the contextual type is the problem.
If stackT is a subtype of tcT, use stackT.
If the context is non-generic, we're done.
If the continuation block has no uses, ...
If the requirement is optional, it's okay.
If the successor is already dead, skip it.
If there's a comma, keep parsing the list.
If this is a deinit, we're done searching.
If this is the end of string, we are done.
If this is the variadic argument, note it.
If we already cached the metadata, use it.
If we are visiting our own field continue.
If we don't have a parent type, fast-path.
If we dropped the variadic, handle it now.
If we found a parameter to fulfill, do it.
If we found something specific, return it.
If we had semantic errors, just fail here.
If we have a default argument, keep going.
If we have a location, diagnose the issue.
If we have an AST node here, just cast it.
If we haven't seen this supertype, add it.
If we ran out of superclasses, we're done.
If we saw an ErrorExpr, take note of this.
If we're already materialized, we're done.
If we've already seen this object, return.
Ignore invalid and anonymous declarations.
Implements JSON::CodeError::ISerializable.
Implode into a maximally-abstracted value.
In Cygwin, swift_snprintf_l() is not used.
In other words, it's not "exception-safe".
In this case, eat any trailing whitespace.
Indicate that there is a global colour map
Indirect offsets are not valid at level 0.
Infer type witnesses from value witnesses.
Inform the target of the language options.
It does, however, entail an indirect jump.
It never promotes emptyish types, however.
It's closer to the LibEventServer behavior
Jump directly to parsing another operator.
Just handle this types as opaque integers.
Keep the same prediction as the src local.
Kill the branch to the now-dead epilog BB.
KindOfUninit is a dynamic system constant.
List of arrays in memory which are unsafe.
Locate the next offset that is not 0xffff.
Look for a class static singleton pattern.
Look for a static local singleton pattern.
Look for member types with the given name.
Look for potential type variable bindings.
Look up each protocol conformance we want.
Lookup the _ObjectiveCBridgeable protocol.
Make sure it actually is an AsyncIterator.
Make sure it's an object of a known class.
Make sure our end value is loop invariant.
Make sure we don't do this checking again.
Make sure we've validated the requirement.
Manually search for the generator witness.
Mark this as the cached metatype for Self.
Marking the boxed value as escaping is OK.
Mask the spare bits into the payload area.
Maybe we're lucky and this is an easy case
Member types don't get any representation.
Merge the edges and remove the constraint.
Modules can consist of more than one file.
Modules failing to load are commented-out.
MongoDB 1.8.x doesn't have the "me" field.
More information on: https://goo.gl/F1wrbO
Move remaining bytes into internal buffer.
NB: always correctly aligned for uint32_t.
NB: always correctly aligned for uint64_t.
Need to strip slashes before adding option
Never generate layout for countable types.
No arc use to the beginning of this block.
No cast is required if types are the same.
No warning is given here, just return null
No warning takes precedence over nullsafe.
Non-static variables are instance members.
Not supported except in __Native functions
Note: exclude s_Pair if we re-enable this.
Note: the result of Await does not matter.
Nothing matched the range, stop processing
Now convert the parameters to Clang types.
Now if we are asked to link all, link all.
ObjC super calls require dynamic dispatch.
Observe that we are processing REPL input.
Ok, we can now perform our transformation.
Ok, we have a predecessor inside the loop.
Okay, now we know we can remove the calls.
Okay, we have a body, and we can trust it.
On the next scan, YY_INPUT will be called.
Only allow one in the process at any time.
Only unwrap the paren sugar, if it exists.
Optimization for if no strip flags are set
Otherwise, do the dynamic dispatch inline.
Otherwise, metatypes aren't class objects.
Otherwise, propagateLVAK will handle this.
Otherwise, try to simplify the terminator.
Otherwise, we imported a single parameter.
Output states for the next and taken edge.
Parameters : format     The format string.
Parse 'case' value-ref ':' sil-identifier.
Parse an optional specifier after unowned.
Parse the assert configuration identifier.
Parse the condition of an 'if' or 'while'.
Parsing succeeded as a multi-byte sequence
Perform CopyForwarding on the current Def.
Perform a dynamic cast to a metatype type.
Perform name lookup into the global scope.
Perform the evaluation at the given depth.
Pick an arbitrary result from each module.
Point out the requirement that wasn't met.
Pointers are safe, do the real comparison.
Prepare child for establishing dependency.
Prepare the call to the underlying method.
Pretty-print the declaration we've picked.
Prevent other's destructor from asserting.
Print the block CFG above the actual code.
Promote the arguments that need promotion.
Propagate the bits to all successor nodes.
Propagate the element abstraction pattern.
Propagate the side-effects to all callers.
Push the successor blocks to the WorkList.
Put checksum in context given as argument.
Put the value into a stack slot at -Onone.
R/W lock for caching scopings of closures.
Raise warnings/errors and return InitNull.
Re-simplify AssertType if we produced any.
Receives a +1 reference of the connection.
Record the object under the original type.
Recursively check the transitive captures.
Refer to 'self' as the base of the lvalue.
Refuse if the cost exceeds our thresholds.
Refutable patterns shouldn't ever come up.
Reject non-default address space pointers.
Reject things like 0.1e5 and hex literals.
Reject this with a circularity diagnostic.
Release of ThinToThickFunction is a no-op.
Remember, preserve vowels at the beginning
Remove a layer of l-value type if present.
Remove critical edges for the SSA-updater.
Remove operands that are not used anymore.
Remove the breakpoint if it was temporary.
Repeatedly reverse translation components.
Replace input with uninitialized instance.
Replace primary file with original content
Represents a function or inlined function.
Represents an address of an unknown array.
Reset the collected best-path information.
Resolve the base to a potential archetype.
Respond to signal polling from the server.
Restore the saved filter and the next flag
Results: Returns the next format position.
Retain connection while we try to ping it.
Retain the objects that own section memory
Return control to the caller or scheduler.
Return the SIL-lowering of the given type.
Return the address of the global variable.
Return the family string of this selector.
Return the name to import a CF typedef as.
Return the starting address of the string.
Returns NULL if no splittable boxes remain
Returns TCA of "best" current translation.
Returns false and sets 'error' on failure.
Returns true if this succeeds, else false.
Returns true iff there is data to be read.
Reverse order to pop values off ctxt stack
Sanity check: obviously invalid arguments.
Save that aside while we explore the type.
Scan until we get to the end of the block.
Scan until we get to the top of the block.
Search in memory for matching certificate.
See how much of the value we can fit here.
Send the disconnect error as notification.
Set the inherited protocols of a protocol.
Set up something for FileCache to read in.
Set up the constraint system for matching.
Set up the throw destination if necessary.
Simple, our stored type is already bridged
Sink one of the copies of the instruction.
Skip by a closure capture list if present.
Skip declarations that are not accessible.
Skip nested types bound to concrete types.
Skip struct and tuple address projections.
Skip the decl if it cannot have a comment.
So, substitutions from AI are for class B.
So, we'll check for and handle both cases.
Some nullable parameters default to 'nil'.
Sort the protocols by their mangled names.
Source and target type sizes are the same.
Special-case diagnostics with no location.
Specialized emitter for Builtin.addressof.
Split every edge between two basic blocks.
Src is not optional, but dest is optional.
Start over with our newly-populated cache.
Stop CPU timer so we won't time out twice.
Store necessary bindings, if we have them.
Store the error to the foreign error slot.
Store the summary for parent loops to use.
Store the type-protocol pair in the cache.
Strdup StringRef S using the bump pointer.
Strip the 'ApplyFunction' off the locator.
Strip the file hash from the closure name.
Substitute into the witness function type.
SunOS 5.x hardware capability descriptions
System-wide ini settings -- PHP_INI_SYSTEM
TODO expose a function for base sig string
TODO: Develop a proper interface for this.
TODO: maybe inline manually (only caller).
TODO: try and force the stream to be FILE*
Take an argument at +0 and bring it to +1.
Take argument value from the dominating BB
Take cpu0's speed as a proxy for all cpus.
Taken: need to initialize the static local
Technically we don't need to do TStr case.
Temporary to hold the intermediate result.
The SourceMgr buffer ID of the REPL input.
The _ after the k seems to have an effect.
The __init__ method gets special treatment
The actual type witness that was inferred.
The applied function is the first operand.
The array is ok, so long as it is mutable.
The array value was stored or has escaped.
The context for reabstracting the r-value.
The dependency module could not be loaded.
The enum has the alignment of the payload.
The epilogue release matcher we are using.
The local variable decl being initialized.
The main entry point for the optimization.
The main execution loop of DebuggerClient.
The member ref expression we are emitting.
The number of elements must match exactly.
The optional evaluation is passed through.
The protocol self is implicitly decurried.
The relationship expressed in the builtin.
The source and destination do not overlap.
The source type is any other pointer type.
The standard metadata for the empty tuple.
The stored value is the new running value.
The systems are not considered equivalent.
The target metadata is the first argument.
The terminator might change from under us.
The total size includes space for the tag.
The wasted elements are never initialized.
The witness requires optional adjustments.
TheRawPointerType lowers as i8*, not i8**.
Then perform the basic block optimization.
Then, we convert the argument to a string.
Therefore, SSA guarantees no intersection.
These conventions replace the result type.
These letters are passed through unchanged
These may change across compiler versions.
They are now dominated by the check block.
This data is never touched by the scanner.
This file implements support for generics.
This file implements the ASTContext class.
This happens with the unowned conversions.
This is a generic function as noted above.
This is a no-op when asserts are disabled.
This is a perfect match for the arguments.
This is just the / default implementation.
This is set-only as far as we're concerned
This is the list of candidates identified.
This isn't likely to come up much, though.
This only / works for loadable enum types.
This parameter is always implicitly bound.
This would then create an additional copy.
Throws an error if the symbol is not found
Thus, we'll have at most two destinations.
Track when we are checking type witnesses.
Tracked just for an assertion in lookup().
Transform the guard expression if present.
Transform this now to simplify later code.
Translate the unit filepath and then break
Treat both open and close brackets equally
Trim exit traces off the front of the log.
Trivial removal of pin/unpin instructions.
Try looking up an enum element in context.
Try to open the module documentation file.
Try to recover if we've made any progress.
Try to replace the second pointer operand.
Try to resolve the behavior to a protocol.
Try to resolve the witness via derivation.
Try to strip "Mutable" out of a type name.
Try to typo correct to a nested type name.
TypeInfo for dynamically-sized enum types.
Unregister the top-level function emitter.
Unwrap one level of optionality from each.
Update all original uses by the new value.
Update the hash with the compiler version.
Uploaded file exceeded upload_max_filesize
Use a generic DOMNode as fallback for now.
Use specialized emitters for SIL builtins.
Use the alias name (the "Ref" name), only.
Use the start location for the ReturnKind.
Used to test splitBBArguments with sil-opt
Uses of inout argument values are lvalues.
Valid if the corresponding boolean is true
Various standard witness table for tuples.
Verify that the constraint graph is valid.
Verify that we don't have label shadowing.
Verify that we've checked types correctly.
Wait for one to be ready (in any context).
Wait for pending external thread events...
We also give up for array initializations.
We changed files in the middle of a scope.
We don't allow leading pluses to match PHP
We don't default-initialize anything else.
We don't specialize setting pair elements.
We have therefore abandoned that approach.
We haven't tried to import this macro yet.
We iterate from the back to the beginning.
We need to independently retain the value.
We need to look for a default constructor.
We only look at autogenerated copy_addr's.
We should only ever get function pointers.
We'll diagnose these in semantic analysis.
We'll just end up passing extra arguments.
We'll need to make this the first argument
We're scanning a new file or input source.
When inside a class, this state is active.
When the call returns, jump over the data.
Whether the function is marked 'rethrows'.
Whether to hoist releases or sink retains.
Will be simplified to a constant later on.
Working with generators requires Optional.
Write down the index of the address point.
Write out the code so far to the end of b.
X might not be strong_retain/release'able.
Zend returns true for random data types...
ZendCompat implies ActRec, no FCallBuiltin
Zero out the indices from here to the end.
`r' is free for the first part of current.
allocate a new stream for a particular ops
analyze until livein reaches a fixed point
append/set post data with oauth parameters
avail_outs all default construct to zeros.
both edges have same target, change to jmp
but the internal parameter name was right.
can't nuke structs until done with palette
coalesce per file arrays into a single one
converted string is longer than out buffer
copied from cmemory.h, which is not public
debugger and code coverage instrumentation
don't include ( and ) in the output string
emulate it by fetching and discarding rows
found a registered callback for this class
hard coding the name of 'HPHP::TypedValue'
if there are more accesses, keep resolving
ignore if the new value equals the old one
ignore leading spaces in the variable name
ignore some frames that are always present
ignore that field, but don't abort parsing
in case obStart was called without obFlush
it, and then it will call recordJumpTarget
just a shorter name for the current buffer
keep going until we have less than 24 bits
little bits about characters for metaphone
make it possible to quickly reuse the port
no need to explicitly clean either pointer
o Run the simplifier on every instruction.
only one of these should ever be specified
or moved into the ExtraArgs datastructure.
parse phase shouldn't handle anything else
php_getopt want to identify the last param
print silly verbose header for USG compat.
read values not stored in directory itself
remove oauth_signature if it's in the hash
requestShutdown has already been called 2.
requirements cannot spontaneously generate
samples that happen precisely at this node
scope for the zero variable initialization
seconds since the epoch (GNU non-standard)
self is the empty tuple outside of a type.
skipheader ---------- Skips the ExtHeader.
stat info has changed since it was cached.
stopped by the dummy sandbox thread itself
store parameters info (prepard stmts only)
the RefData constructor steals it's input.
the specified URI holds connection details
this command is processed entirely locally
used later for comparison with water marks
variant with the hash unrolled eight times
we check branch offsets in checkSection().
we don't add multipart files to the params
we just stay the course and keep stepping.
we perform the redundant load elimination.
"set" could have a name associated with it.
(The RPO ids are re-assigned per analysis.)
* The object literal has no contextual type
- HAS_STRET, if the invoke function is sret
- Main entry point must be the first block.
-- Allocate memory for our phoned_phrase --
/ Returns true if a diagnostic was emitted.
/ Returns true if the live out set changed.
/ i.e. the base of the location is changed.
1st attempt without offsetting base address
A callback which dispatches a failure case.
A list of CondFails that can be moved down.
A list of cond_fail instructions to remove.
A parameter outline: - Parameters: - x: ...
A protocol descriptor describes a protocol.
A thin function looks like a plain pointer.
A type info implementation for BridgeObject
A visitor for consuming tuples of l-values.
ASCII magic -- try to detect text encoding.
Adapt all known users of the partial_apply.
Add a new set of arguments to the function.
Add each named local to the returned array.
Add reachable instructions to our worklist.
Add the implicit 'self' parameter patterns.
Add the message node then send the response
Add this solution's binding to the results.
All canonical elts means this is canonical.
All of the objects will be added unmanaged.
All this cannot decrement reference counts.
Also note that no collection check is done.
Always a value, don't need to save category
Ambiguities should be ruled out by parsing.
Amount of stuff to slurp up with each read.
An RAII class to scope source file codegen.
An abstract class for working with results.
An empty parameter list gives an empty map.
An enum cannot be smaller than its payload.
Analyze the alloc_stack instruction's uses.
And then mangle the generic specialization.
Another thread stored subpat_names already.
Apply sanitizer attributes to the function.
Arithmetic ops that overflow ints to floats
Ask the ConformanceInfo to emit the wtable.
Associated type requirements handled above.
Attempt to simplify the ith argument of BB.
Attribute with no content in it's text node
Bitcast the temporary to the expected type.
Both source and target type are ObjC types.
Break down a struct expansion if necessary.
Build an AST for the subscript declaration.
Build lifetime intervals and analyze hints.
Builtins don't have a file and line number.
Called by one of the other *visit* methods.
Carry over the spare bits from the element.
Cast both addresses to opaque pointer type.
Change aggregate values into scalar values.
Check for conflicting warning control flags
Check for conformance to all the protocols.
Check for default arguments in the shuffle.
Check for the wildcard exception breakpoint
Check if the declaration had the attribute.
Check if there is a store to this property.
Check if we already have an equivalent phi.
Check if we are hitting a return breakpoint
Check if we require a re-abstraction thunk.
Check that the argument types are matching.
Check that we imported an initializer name.
Check to see if there is an argument label.
Check to see if we can DCE the instruction.
Check to see if we have an importer loaded.
Check whether the BBWriteSetIn has changed.
Check whether the string is processed well.
Check whether this selector already exists.
Clamping to allow for rounding errors above
Cleanup to destroy an initialized variable.
Clear any releases found for this argument.
Clone using a data-specific clone function.
Close the old socket, it may still be open.
Collect all of the generic parameter lists.
Collect all users of the address and loads.
Collect parameters for a call to a builtin.
Collect the constraints for this component.
Complain about any ambiguities we detected.
Compute a new 'arg', from the bits we have.
Compute a transfer function for each block.
Compute length of the concatenated literal.
Compute representation error for this pixel
Compute the arguments for our new function.
Compute the conformances for each protocol.
Compute the distances from the entry block.
Const cast is needed due to xdebug xml api.
Constants never require reference-counting.
Constraint imposed on the Vreg at this use.
Construct the leaf index to leaf value map.
Consume the contextual keyword, if present.
Consume tokens up to code completion token.
Context info used to emit FallthroughStmts.
Contirbution information for a single pixel
Contract the edges of the constraint graph.
Convert source string from UTF-16 to UTF-8.
Convert source string from UTF-8 to UTF-16.
Copies and loads on edges (between blocks).
Copy it to memory we can reference forever.
Copy the indices into the callback storage.
Copyright (c) 2005-2014 Rich Felker, et al.
Could not find the record in the aggregate.
Counts the number of words inside a string.
Create LLVM basic blocks for the other bbs.
Create a forward declaration for that type.
Create a method to witness the requirement.
Create a new function to contain our logic.
Create a non-parameter optional adjustment.
Create a temporary for the output optional.
Create an IRGenModule for each source file.
Create and insert the new backedge block...
Create the 'self' declaration and patterns.
Create the class declaration and record it.
Create the implicit memberwise constructor.
Debugger::Stop() needs an execution context
Declarations for Floyd-Steinberg dithering.
Default implementation always returns true.
Deinitializers are always called "dealloc".
Depth-first search for connected components
Determine if we need to unregister the line
Determine the opaque 'self' parameter type.
Determine the type of the generic function.
Determine whether there is a name conflict.
Diagnose for the member declaration itself.
Dictionary downcasts are handled specially.
Did we see any copies into the alloc stack.
Different stags, with non-overlapping bits.
Dig out the owner of the default arguments.
Discover which part we were last working on
Do not re-process already known properties.
Do the rest based on the opcode's dest type
Do we have placeholders but no bound params
Don't add unreachable blocks to the region.
Don't bother if the declaration is invalid.
Don't emit the magic AnyObject conformance.
Don't record multiple dealloc instructions.
Don't replace markers that are still valid.
Drop the initial weak retain of the object.
Each const cast is necessary due to xml api
Each subexpression is a (key, value) tuple.
Emit any default argument getter functions.
Emit the abbreviation for RECORD_DIAG_FLAG.
Emit the call and produce the return value.
Emit the indirect result arguments, if any.
Emit the prolog for the non-self arguments.
Emit the source metadata if we haven't yet.
End of a slash-star comment, so whitespace.
EndBlock means the end of this SILFunction.
Ensure the output expression is up to date.
Enter a cleanup to destroy the value there.
Enum global wrappers which are not disabled
Equivalent types are always ABI-compatible.
ErrorProtocol uses its own RC entry points.
Evaluate the getter into the result buffer.
Every return site should call through here.
Everything else should be unreachable here.
Explicit closures start their own sequence.
Exposed API, mainly static wrapper methods.
Expressions are always-refutable wildcards.
Extension methods don't get vtable entries.
Extract the base NormalProtocolConformance.
FIXME: Assumes the payload is word-chunked.
FIXME: Handle generic initializers as well.
FIXME: Implement once Swift has namespaces.
FIXME: Recursion into the old type checker.
FIXME: Refactor this into its own function.
FIXME: Support REPL on non-Apple platforms.
FIXME: The way we do this is really ugly...
FIXME: This will end up taking linear time.
FIXME: Turn this into an assertion instead.
FIXME: handle code completion in Arguments.
FIXME: macros FIXME: imported header module
FIXME: this should not require variant hops
FIXME: work this into the constraint system
Fail if this isn't a store to a stack slot.
Failing casts with take_always can release.
Fall into the next code completion handler.
Fall through to build the member reference.
Fast path: element 0 is always at offset 0.
Feed the object pointer to object_getClass.
Fill this special destination with a value.
Filter out declarations from other modules.
Final methods can be statically referenced.
Find a bridged type, which may be different
Find all of the named, unclaimed arguments.
Find msg and whether it contains "isdbgrid"
Find the metadata pointer for this element.
First char of hostname must be alphanumeric
First demangle any specialization prefixes.
First task, set up the value argument list.
For a default-value expression, do nothing.
For after seeing a T_INLINE_HTML, see below
For bool results, a zero value is an error.
For platforms with incomplete ANSI defines.
For use with the HackStrictOption settings.
Force the initializer to be materializable.
Form an expression pattern with this match.
Forward decl for prespecialization support.
Forward implicit closure context arguments.
Forward substitutions from the outer scope.
Free and maybe quarantine unmarked objects.
From timezone and locale (0 to 2 arguments)
Frontier and base of the persistent region.
Gather type variables from this constraint.
Generate code to invoke _bridgeToObjectiveC
Generate the search class object reference.
Generating the inlined call failed, bailout
Get an appropriately cast function pointer.
Get an appropriately-cast function pointer.
Get the metatype metadata from the runtime.
Get the requirement and witness attributes.
Get the user-defined data for this scanner.
Gets the entry for a struct or class field.
Give the enum element the appropriate type.
Give user a chance to reallocate the stack.
Go through all of our non local successors.
Grab the next constraint from the worklist.
Grab the operand of the release value inst.
Guard was relaxed to Gen---don't record it.
H if before a vowel and not after C,G,P,S,T
Handle accessors as part of their property.
Handle all builtins which can be optimized.
Handle exception thrown by async generator.
Handle sil-constant-kind-and-uncurry-level.
Handle some kind of instructions specially.
If I has no side effects, we can ignore it.
If guaranteed plus zero is not ok, we bail.
If it is not attached, check if we need it.
If it succeeds, there's nothing more to do.
If it's already been filled in, we're done.
If no ':' on the line, add to previous line
If the body is completely empty, reject it.
If the client changed the type, we're done.
If the conformance is complete, we're done.
If the inner pattern is a tuple, expand it.
If the nominal type doesn't, it's an error.
If the replacement string should be eval'ed
If the return type has nullability, use it.
If the tuple element has a label, parse it.
If the type is a class, try its superclass.
If the type is itself canonical, return it.
If there are no labels, use a null pointer.
If there aren't any candidates, we're done.
If there is a Phi definition in this block:
If there is a lookahead token, return that.
If there is no type, parse the simple form.
If there's an exact type match, we're done.
If there's an explicit name, just use that.
If this is a SIL-only attribute, reject it.
If this use cannot be analyzed, then abort.
If we already emitted the note, we're done.
If we already emitted this thunk, reuse it.
If we didn't find any matches at all, fail.
If we didn't find any side effects, we win.
If we don't do this, DI will miss the uses.
If we don't have a class or a struct, bail.
If we don't have the leading '(', complain.
If we don't insert anything, just continue.
If we have a nested disjunction, unwrap it.
If we have an overlay, look in the overlay.
If we have conformances we can load, do so.
If we hit the end of the string, that's it.
If we parsed an inout modifier, prepend it.
If we're not changing anything, we're done.
If we're within a case body, it's implicit.
Ignore, we already have a fall back message
Import protocols this protocol conforms to.
Import the type that this method will have.
In case the optimizer removed the function.
In either case, we need to change the type.
Include the encoding for 'self' and '_cmd'.
Indicates that the cell is (possibly) used.
Infer requirements from parameter patterns.
Infer the Objective-C name for this method.
Initialize the buffer as an empty optional.
Insert before the uncond branch and zap it.
Inst.clone() per instruction does not work.
Instructions which extract from aggregates.
Instructions without side effects are safe.
Introduce a variable to label the protocol.
Is there is no usable command, cmd is null.
It affects code generation on our platform.
It found Tishri 1 at the start of the year.
It is one of the last 6 months of the year.
It would be nice if this weren't discarded.
It's not usually an interesting difference.
Iterate over instructions in forward order.
Just convert the seconds field to a string.
Just copy the out-of-line storage pointers.
Just say the vague 'cannot use' diagnostic.
Keep the diagnostics array in source order.
Keep track of the new instructions emitted.
Let dlopen determine the best search paths.
Line separation as a factor of font height.
Load a specific witness from a known table.
Load, store, memcpy etc can't do a release.
Loop through unmatched function breakpoints
Make a plan that calls copyOrInitValueInto.
Make sure commands aren't be sent to slaves
Make sure no identifier has an offset of 0.
Make sure the PM knows about this function.
Make sure we always have a resolver to use.
Make sure we have the value witness marker.
Make the getter/setter methods unavailable.
Make the required changes to the call site.
Map FuncDecls directly to Func SILDeclRefs.
Map from dominator tree node to tree level.
Mark the accessor as transparent if we can.
Maybe we were equated to a concrete type...
Merging actually creates the summary graph.
Move the wait handle to the parent context.
Must always be called / before destruction.
NOTE: no need to lock with light processes.
NSError (TODO: and CFError) can be bridged.
Need to normalize of this commands succeeds
Never print anything for stored properties.
No jump-threading is possible in this case.
Not enough for block, just pass into buffer
Note that the decl was imported from Clang.
Note: This is a lookup into another module.
Note: this error case is difficult to test.
Notice: we scan the basic block in reverse.
Now apply any adjustments for control flow.
Now loop over all the hosts that were found
Now that we have all the types, do so here.
Now they shouldn't change either direction:
Null out each element before decreffing it.
Obvious cases that do not need pointer type
Ok, it is a closure we support, set Callee.
Okay, that's everything we know how to try.
Okay, we've found the best entry available.
Old style option, that needs to be removed.
Only instance properties can be 'IBOutlet'.
Only introduce 'dynamic' on declarations...
Optimize the access to globals if possible.
Or a conditional branch back to the header.
Other types are preserved through lowering.
Otherwise, allocate using Swift's routines.
Otherwise, assume that Inst can use Target.
Otherwise, copy the value into a temporary.
Otherwise, insert it into the global cache.
Otherwise, it can be referenced statically.
Otherwise, it is probably a missing member.
Otherwise, make sure we emit into the slot.
Otherwise, print the type, then each value.
Otherwise, require the state exactly match.
Otherwise, start all over with our new LHS.
Otherwise, this must be a get/set property.
Otherwise, verify the body of the function.
Otherwise, we need to destroy the argument.
Otherwise, we need to reabstract and store.
Otherwise, we're binding an open archetype.
Parse command line options using Options.td
Parse the middle expression of the ternary.
Pass a placeholder for thin function calls.
Pass manager, used to get various analysis.
Peephole away complementary reabstractions.
Perform the final lowering transformations.
Performs the compile requested by the user.
Perhaps init() synth should be moved later.
Pick the ValueDecl that has the right type.
Prevent warnings from -Wmissing-prototypes.
Print the ownership semantics, if relevant.
Process instructions in post-order fashion.
Process one of the nested IFDs directories.
Process truncation from unsigned to signed.
Produce the mangled name for this protocol.
Propagate the state to all successor nodes.
Protocol compositions have component types.
Provide a fixed type for the type variable.
Pull off the next indirect result argument.
Punt for now until we can figure out a fix.
Push a new cleanup to deallocate the array.
Push an empty string to get an xslt result.
Push return value of next()/send()/raise().
Reabstract back to the requirement pattern.
Read the default_* properties from the link
Read the generic signature, if we have one.
Reality check casts between concrete types.
Record the component of this type variable.
Record the curly braces but nothing inside.
Record the first argument for the variadic.
Record the location of the 'class' keyword.
Record the name of a record within a block.
Reemit the capture params as unsubstituted.
Rely on irgen to rewrite the function name.
Remember the blocks we are going to change.
Remember the global ivar offset if present.
Remove any retain and release instructions.
Remove clobbered loads we have seen before.
Remove the values before sending to client.
Replace all uses of Dest with a use of Src.
Replace any uses of them with undef values.
Replace the allocation call with an alloca.
Require the first row to be a non-wildcard.
Resolve the conformances for this protocol.
Resolve the conformances of the superclass.
Responsible for replying to an XPC request.
Retrieve the _BridgedToObjectiveC protocol.
Retrieve the superclass of the given class.
Return 0 for success, non-zero for failure.
Return false if not running in server mode.
Return null to indicate this to the caller.
Return the address as a Builtin.RawPointer.
Return the index of a parameter adjustment.
Return the resulting default witness table.
Return the size and alignment of this type.
Return true / if the ForwardSetOut changes.
Returns 1 if it worked, and 0 if it didn't.
Returns true if a diagnostic / was emitted.
Rewrite unknown retains into swift_retains.
Score this particular optional requirement.
Second is true if the insertion took place.
See comment there and t3879280 for details.
See if V2 after stripping casts aliases O1.
See whether the source value has a payload.
Set up Env, only visiting reachable blocks.
Sets all unknown elements to not-available.
Should've been handled earlier in union_of.
Simple case: Just change the reference kind
Single-element store results in repetition.
Sizeof always returns non-negative results.
Skip a leading 'k' in a 'kConstant' pattern
Slots may be null, which should be ignored.
So we can sync sp and fp by ourselves here.
So, we need to save these values for later.
Some special cases that also clobber flags:
Some test cases with optional wait handles.
Sort first by filter name (case-sensitive).
Sort imported declarations in source order.
Special case the "conversion to void" case.
Split at the first occurrence of "Mutable".
Split critical edges resulting from VirtAI.
Split the return block if it is nontrivial.
Stack depth should be 0 after RetC or RetV.
Start building a vtable if this is a class.
Stop wall timer so we won't time out twice.
Store the expr itself as a placeholder RHS.
Store the fetched result back to the cache.
Store the max payload size in the metadata.
Store the receiver and class to the struct.
Strip any leading space before an enclosure
Struct or enum type must have been bridged.
Substitute the base into the member's type.
Substitute the variable and function names.
Swift doesn't have write-only subscripting.
Switch over the tag bits for payload cases.
T must be an Objective-C class or protocol.
TBAA requirement for all address arguments.
TODO: A linear series of ifs is suboptimal.
TODO: Non-ErrorProtocol boxed existentials.
TODO: Or if the box is uniquely referenced.
TODO: Record all loads during collectUsers.
TODO: This should happen once per function.
TODO: We should compare generic signatures.
TODO: also handle other semantic functions.
TODO: let options dictate fuzzy matching...
TODO: the conformance might be conditional.
TODO: we're returning timestamps as strings
Take argument value from the dominating BB.
That "tuple" might not actually be a tuple.
The MD5 transformation for all four rounds.
The VarDecl or SubscriptDecl being get/set.
The YYSTATE alias is for lex compatibility.
The actual semantics are handled elsewhere.
The basic block this BlockState represents.
The block of the first input value compare.
The connection is the one we're looking for
The dead stores in the current basic block.
The decls-and-types block is lazily loaded.
The element type must conform to NSCopying.
The first list index given out is always 1.
The first type is a subclass of the second.
The float won't be larger than 1e15 anyway.
The given type should use opaque type info.
The handle, if non-null, is effectively +1.
The number of times we've refined returnTy.
The range of the complete default argument.
The record does not apply to a single type.
The right fix is to avoid doing that above.
The second type is a subclass of the first.
The semantic value of the lookahead symbol.
The set of inherited protocol conformances.
The set of methods with the given selector.
The source type is a function pointer type.
There are post-send functions that can run.
There is a function with the required name.
There is one of these for each block entry.
Therefore we have to define it as escaping.
Therefore, the current cast fails for sure.
These instructions do not use other values.
These keywords are only active in SIL mode.
These modes can be pushed on the PDA stack.
They are part of the variable or subscript.
This complexity should be lifted elsewhere.
This enables better recovery in the parser.
This enum_switch instruction is exhaustive.
This file implements AST-level diagnostics.
This file implements the DeclNameLoc class.
This happens e.g. if it is a generic class.
This includes the initial load of the file.
This is a 'let', so we can make guarantees.
This is dead code in NonFixedTupleTypeInfo.
This is done before KindOfContinue testing.
This is not space efficient for large text.
This is not the linkage we are looking for.
This is the first instruction in the block.
This is the first instruction, we are done.
This must be called while holding the lock.
This pass does not know how to do this yet.
This silly cast below avoids a C++ warning.
This way, debug_info is preserved at Onone.
This will also help us with self-recursion.
Thus the fields could be accessed directly.
To account for newlines in the T_WHITESPACE
To be safe in case we failed to get prevFp.
Track any inout arguments that are emitted.
Try to convert definition into declaration.
Try to find an element which doesn't exist.
Tuple types are subtypes of their optionals
Turn the error into an ErrorProtocol value.
Typo correction is handled in a later pass.
Unwrap optionals, but remember that we did.
Update keys to location in realloc'd buffer
Update the locations with available values.
Use "__ObjC" as default for implicit decls.
Use memcpy for large numbers of properties.
Use the first InputAction as our BaseInput.
Use the length of the non-empty identifier.
Use this as a general "out of stream" error
Value-to-optional and optional-to-optional.
VarDecl constants require an explicit kind.
Variables for accumulating image statistics
Verify the file and line of the diagnostic.
Virtual Hosts have to be iterated in order.
Void pointers aren't usefully indirectable.
Walk the updates backwards and "undo" them.
We can also count all of them as redefined.
We can conservatively see through the store
We can guarantee our own box to the callee.
We can only do this for the current thread.
We detect duplicates by marking freed stubs
We do not function signature specialize it.
We don't need to re-create the object file.
We don't really care if this worked or not.
We hit EOF, and not every brace has a pair.
We may have a SrcKey to a deleted function.
We need to create a semaphore and a thread.
We need to know that the cast will succeed.
We only care about designated initializers.
We parsed the brace statement as a closure.
We then try to remove the original closure.
We understood all terminators, return true.
We will compute the state of this loop now.
We won't know until we see the load though.
We'll increment it after all that finishes.
We're constructing a value of nominal type.
We're still at the closure definition site.
Worse, it throws it away without any check.
Wrap retainable struct fields in Unmanaged.
Wrap the bitstream in a module object file.
Wrappers for the different collection types
Write out a word to the I/O context pointer
Xenon needs to be started once per process.
Zero-extend the bool from a byte to a quad.
_silgen_name'd accessors don't need bodies.
add function name attribute to function DIE
add one, because Z is always NUL-terminated
ah illegal: char after COM section not 0xFF
all other servers invoke waitForEnd on stop
and we want to recover from this very well.
ask for a passive connection if we need one
callback for the passphrase (for localcert)
case T_I08: // same numeric value as T_BYTE
case-sensitive unicode can still early-exit
check for unparsed characters at end of exp
convert offset from milliseconds to minutes
create a sandbox info with no path for now.
create the file if it doesn't exist already
default implementation of virtual functions
defined/not-defined state of each iter var.
emit nop for a balanced li32un with 3 instr
empty callback url specified, treat as 1.0a
evaluate key passed to yield, if applicable
finish processing live ranges for constants
found what we needed to find, stop walking.
gdTcl_UtfToUniChar is borrowed from Tcl ...
get a lower-case version of the first token
go through the k/v pairs and serialize them
helper for getTypeConstants/hasTypeConstant
how often to display the warning (1 / rate)
if autoresume is wanted ask for remote size
invalid vptr means no syncvmsp was matched.
is an empty list, always conservative scan.
libnuma is only partially aware of taskset.
move entire register to reset higher 56bits
multiplexed connections are not implemented
num_rows_fetched's address was bound before
offset for ifd values outside ifd directory
parent::Constant inside trait or pseudomain
pass the entire chunk through the converter
php5 xdebug main function string equivalent
remove the proxy:type + :// from the start.
reserving 1, 2, 3 for STDIN, STDOUT, STDERR
return true if this block is inside a loop.
slaveOkay implicitly sets read preferences.
statics aren't part of individual instances
stick that last bit of string on our output
store the number of parameters in this stmt
tell the driver we just created a parameter
tell the main thread that pid has been set.
tested in test_pagelet_server_task_result()
the two slots are reserved for internal use
these commonly occur along with type guards
this returned type structure is unresolved.
try to transition from WAITING to non-empty
we expect at least one parameter in varargs
whether to enable trans-sid for current req
working in concert with the Clang importer.
wrapper around send/recv to handle timeouts
yyn is the number of a rule to reduce with.
(An extern alias would be an extern global.)
(Hoisted so it's not allocated in the loop.)
(I.e. this is a distributive FooInt opcode.)
/ / Returns null if no module can be loaded.
/ / Valid: InnerResultAddr, OuterResultAddr.
2.0.16: clipping rectangle, not image bounds
A class for non-trivial, address-only types.
A concrete type is better than an archetype.
A node is covered if any region contains it.
A reference to the Builtin.once declaration.
A structure for holding a r-value or l-value
Accept volatile and singlethread if present.
Add (match, offset) pair to the return value
Add an overload set that selects this field.
Add any autolinking scripts to the arguments
Add blockRegion's blocks and arcs to region.
Add the last argument, or the only argument.
Add this constraint to the constraint graph.
Address only 'let' values are passed by box.
Adjust for the std::reverse_iterator offset.
Advance bitstream cursor to the next record.
Alignof always returns non-negative results.
All doubles are implicitly less than arrays.
All of the cases project an empty explosion.
All reference count bounds are non-negative.
All the stub entrypoints share the same ret.
Allocate a new pattern that matches a tuple.
Allocate additional space for kDeleted part.
Allocate and fill in the error_limiter table
Alternatively, we can have a local variable.
An Objective-C protocol's name is unmangled.
An error source that bridges a native error.
And not because it has to be for overriding.
Any other failures relate to the index list.
Assumes Apply has already been type-checked.
Attempt to resolve a witness via derivation.
Avoid duplicate invalidations for non-links.
Avoid printing the code twice in such cases.
Backing storage for Swift.Process.arguments.
Bail out if current BB cannot be duplicated.
Beware this doesn't call PlainFile::sweep().
Bind the current process to a specified CPU.
Both source and target type are Swift types.
Break out if the line is no longer the same.
Break these apart and check them separately.
Bridgeable object types are interchangeable.
Bridging casts cannot be further simplified.
Bug 22630 - throw exception if no path given
Build a getelementptr operation declaration.
Build a sub-plan to emit into the temporary.
Build a user-comprehensible name for a type.
Build a zero initializer of the result type.
Build the trees for all top-level functions.
Build the type expansion for the leaf nodes.
Builtin extra args are not stored in varenv.
Cache the canonical type for future queries.
Calculate the hash of the whole llvm module.
Call the generic metadata accessor function.
Call the initialization callback if present.
Cannot use instance properties on metatypes.
Canonicalize the resulting set of protocols.
Chain inner failures onto the outer failure.
Change the context we're contextualizing to.
Change the type to include the noescape bit.
Check all cross-module dependencies as well.
Check all protocols implemented by the type.
Check all the pattern/init pairs in the PBD.
Check for an existing context we can re-use.
Check if it is a "let" in the parent struct.
Check if it is a call of a generic function.
Check if prop already declared as non-static
Check if the element type is a trivial type.
Check if this struct has any let properties.
Check if we have at least one complete line.
Check if we've already computed this result.
Check that the request matches the signature
Check that we didn't get any unknown values.
Check that we have a stored access strategy.
Check to make sure all inputs are containers
Check whether a type conforms to a protocol.
Check whether the ForwardSetOut has changed.
Check whether this is a release instruction.
Clang may have defined the variable already.
Clear the list of constraint on every block.
Clear them from the set we're scanning from.
Clone each of the instructions in the block.
Code completion for the generic type params.
Collect the BBArg index of each struct oper.
Collect the arguments to the implementation.
Collect the arguments to the uncurried call.
Complain about functions that aren't called.
Compute the elements of the resulting tuple.
Connect all case values to the result value.
Conservatively assume it's potentially live.
Consider static variable or MINIT in future.
Const variables should be imported as 'let'.
Constraints from which we can't do anything.
Consult the blacklist of macros to suppress.
Continue if we are accessing the same field.
Convert an empty bitset to big-integer mode.
Convert the SIL result type to a Clang type.
Convert the literal to the appropriate type.
Convert the metatype to objc representation.
Convert to the normal beginning of the year.
Count the fields we got from the superclass.
Create a CFG edge from NewRetBB to MergedBB.
Create destination blocks for all the cases.
Create the SILFunctionType for the callback.
Create the destructor function for a layout.
Create the parameter list(s) for the getter.
Create the struct declaration and record it.
Currying thunks always have freestanding CC.
DCE+SimplifyCFG runs as a post-pass cleanup.
Declaration references terminate the search.
DefInlineFP has some special treatment here.
Destination basic blocks for condfail traps.
Destroy overwritten value These are ignored.
Determine the Objective-C name of the class.
Determine the element type of the generator.
Determine the signature of this declaration.
Determine which of the candidates is viable.
Dig out the constructor we're delegating to.
Disable the API redefinition in sqlite3ext.h
Do not remove functions from the white-list.
Do nothing with code completion expressions.
Do the reassignment of the payload in-place.
Don't actually kill the exception's cleanup.
Don't complain about accessors in protocols.
Don't emit the thunks if they already exist.
Don't split anything that starts with "set".
Don't try to load all members re-entrant-ly.
Don't try to optimize incomplete aggregates.
Drop the Self argument clause from the type.
Dynamic 'Self' is only permitted on methods.
Each protocol is a substitution / candidate.
Each will handle 12 bits of the S-box input.
Elements of a noncounted array are uncounted
Emit a reference to the function to execute.
Emit a value of a certain integer-like type.
Emit an optional-to-optional transformation.
Emit any diagnostics that have been delayed.
Emit the debug info for the variable if any.
Emit the epilog into its former predecessor.
Encountering * completes/commits a component
EndBlock means the end of this WitnessTable.
Entering a recursive interpolated expression
Env vars defined in the hdf file go in first
Environment for the whole optimization pass.
Erase a global SIL variable from the module.
Erase those submodules that are not missing.
Error-temporary emission may need writeback.
Explicit closures are exempt from this rule.
Extracting from a zero class returns a zero.
FIXME: Default implementations in protocols.
FIXME: Provide a more meaningful debug type.
FIXME: Re-visit this to always do the check.
FIXME: Recursion into existing type checker.
FIXME: Should be able to handle this earlier
FIXME: Use target-independent linker option.
FIXME: better explosion kind, map as static.
FIXME: duplicated from NameBinder::getModule
Fail if this isn't a load from a stack slot.
Fail if we spent more than 0.5ms in the JIT.
Fail silently, continue running the request.
Fatal if any arguments are pass by reference
Fetch all the options from the options array
Fetch the declaration of a metaclass object.
Figure out /which/ dependencies are missing.
Figure out the interface type of the parent.
Figure out where this requirement came from.
Filesystem and Streams Configuration Options
Final functions never require ObjC dispatch.
Find the last preposition in the given word.
Find the list of entries for this base name.
Find the maximum-sized builtin integer type.
First include all other files in the module.
First, check if we already had a superclass.
First, gather the sorted list of base names.
First, get a function type for the constant.
Flush whatever access logs are still pending
For a computed variable, we want the getter.
For a protocol type, use its Self parameter.
For all users of the AllocStack instruction.
For each block in a Reverse Post Order scan:
For error-recovery, we mark them as invalid.
For l-value types, reset to the object type.
For native calls we don't use a return block
For nonblocking mode, temporary out of data.
For now, treat all archetypes independently.
For unsafe addressors, that's all we've got.
Form a reference to the superclass -dealloc.
Format: a type followed by a list of values.
Format: a type, an operand and a SILDeclRef.
Frame-based 'canonicalized' stack locations.
Free ProfTransRecs for Profile translations.
Functions that we've emitted a reference to.
Generic type parameters can inherit a class.
Get the cached witness table, if successful.
Get the index of the first non-reserved bit.
Get the transitive set of top-level imports.
Get the value witness table for the element.
Get the variable name as a cell, for the LHS
Give a tailored error message for this case.
Global properties have no base or subscript.
Grab the class decl from the alloc ref inst.
Grab the value part, except for an 'x' reln.
Grab the write lease before touching the TC.
Handle instance and type computed variables.
Handle this by performing a concrete lookup.
Hold ref here for later promoting the object
Identify gerunds, which always end in "ing".
If EnumValue is null, we deleted this entry.
If F is a declaration, first deserialize it.
If basic block has no successor, do nothing.
If both have the same position, choose `r1'.
If expected is not nullptr, it will be used.
If no default witness table was found, bail.
If no such instruction exists, returns null.
If so, we can't re-authenticate and bailout.
If that fails, try our runtime library path.
If the base type is an IUO, look through it.
If the closure requires captures, emit them.
If the destination is a discard, do nothing.
If the result was not ambiguous, we're done.
If the value already has a name, honor that.
If there's no super conformance, we're done.
If this is "db", return the parent database.
If this is an enum, get its type constraint.
If this piece is all ones, it has no effect.
If this successor allows for leaks, skip it.
If we already found an error, stop checking.
If we are not in canonical SIL return early.
If we could perform a bridging cast, try it.
If we got here, then we were already paused.
If we had a return type of 'Self', erase it.
If we have a swift_name attribute, use that.
If we have an address only type, do nothing.
If we see a closing parentheses, we're done.
If we see a closing parenthesis, we're done.
If we're directly at the top, it's implicit.
If we're shutting down the socket is closed.
If we're suppressing diagnostics, just fail.
If what remains is a verb, we have a gerund.
Ignore parentheses and implicit conversions.
Ignore this warning in this file, for CAAS()
Immediately perform global name-binding etc.
Implementation of a box for a specific type.
Import Clang attributes as Swift attributes.
Imports from C are never lazily initialized.
In other words, Get shouldn't append values.
In that case, create the payload enum/store.
In this case we must drop the unknown state.
Indicate which pass we are on (if interlace)
Infer requirements from the inherited types.
Initializations can only increase refcounts.
Initialize the profiler if it isn't already.
Input types can be contravariant (or equal).
Instantiate hoistable classes and functions.
Insufficient information to determine which.
Introduce a scope for this partial solution.
Invalidate all of the basic block arguments.
Invoke the intrinsic, which returns a tuple.
Isset, Empty, and type querying instructions
It does not correspond to a native argument.
It is always in the first argument position.
It makes sure you don't walk off the string.
It's only supported on 64 bit architectures.
Iterate to forward through chains of copies.
Iteratively mark cleanups dead and pop them.
Keep iterating if the worklist is not empty.
Lazily initialize the Blocks-to-IDs mapping.
Lets pretend we are the same version as PHP.
Load and store the VM registers from/to RDS.
Local function to populate the lookup table.
Look for macros imported with the same name.
Look through implicitly unwrapped optionals.
Look through ownership types, and optionals.
Lowercase the first letter, append the rest.
Make 'wa' a quick shortcut for 'where async'
Make sure IPv6 or IPv4 are handled correctly
Make sure that both base types are the same.
Make sure the exponent has at least 2 digits
Make the call and clear the arguments array.
Make the path relative to "." by flattening.
Map down to the semantics-providing pattern.
Map every basic block to its location state.
Map the type into the conformance's context.
Map this indirect field to a Swift variable.
Mapping from names to targetcache locations.
Mark a given object type pointer followable.
MayAlias, invalidate the location and value.
Might be not valid in this position, though.
Migrate the tests to this format eventually.
More than one element, must use bitset mode.
Move lexer to the start of the current line.
NOTE: before 7.17.0 strings were not copied.
Name not null and name differs with new name
Native accessor properties of mysqli_result.
Native calls end inlining before CallBuiltin
Next step is to display the completion list.
No more responses coming from worker threads
Non-function witnesses all have type size_t.
Note HHProf::HandlePProfSymbol() dependency.
Note that such modules may be heterogeneous.
Note that we'll have walked the members now.
Now remove instructions whose state is DEAD.
Number of characters so far in this 'packet'
OK, we've exhausted the entire actRec chain.
Observers don't get separate vtable entries.
Ok, we have a retain_value or strong_retain.
Okay, bind everything else from the context.
Okay, first thing, check the cache variable.
Okay, this is where the callee context goes.
On other targets, it seems to use --sysroot.
One iop* function exists for every bytecode.
Only building the gen and kill sets for now.
Only called for fn defs not on the top level
Only class protocols can have the attribute.
Only classes can have required constructors.
Only purge if ratio-based purging is active.
Only try and favor monomorphic initializers.
Open-code certain protocol witness "thunks".
Optionally also by adding a constant offset.
Or, Mutable can occur in the type name only.
Otherwise swap our true and false arguments.
Otherwise, fall back to code.main and retry.
Otherwise, infer based on the method family.
Otherwise, substitute the constrained types.
Otherwise, try the first and last parameter.
Otherwise, use the ObjC-specific entrypoint.
Otherwise, we do a direct load of the value.
Otherwise, we need a dynamic dispatch thunk.
Otherwise, we need to coerce through memory.
Otherwise, we're working with an expression.
Owns an ASTContext and the associated types.
PHP7 formally defines this case to return 0.
PHP_OUTPUT_HANDLER_START is included by PHP5
Parameters may be Uninit (i.e. no InitCell).
Parameters with defaults can be unfulfilled.
Parse a following trailing closure argument.
Parse productions that can only be patterns.
Parse the func-signature-result, if present.
Per basic block list of cond_fails to merge.
Perform a couple of sanity checks on scopes.
Perform a dynamic cast to an arbitrary type.
Perform any necessary requirement inference.
Perform median-cut to produce final box list
Perform structure layout on the given types.
Platform-specific sources can override this.
Populate our cache on the first name lookup.
Prepare a binary op that is not commutative.
Print out stats about what we ended up using
Print the module where extension is defined.
Process only non-static let properties here.
Project the value out of a box of this type.
Propagates the properties through the graph.
Property access within this Class's context.
Protocol declarations cannot be transparent.
Pull 32bit Big Endian words from an in6_addr
Pump the parser multiple times if necessary.
Push in all the predecessors to get started.
Push out the count and leave garbage behind.
Put the module next to the top-level output.
REMEMBER HDF WINS OVER INI UNTIL WE WIPE HDF
REPL mode should always use the REPL module.
Read a dummy bool until we rev the protocol.
Real and reported length should be the same.
Reason about whether all parts are released.
Recalculating ret from mcret avoids a spill.
Record that we've traversed this dependency.
Record the problem in the conformance table.
Redirect all FailurePreds to the copy of BB.
Redirect all SuccessPreds to the copy of BB.
Refer to a member of the archetype directly.
Register any fixes produced along this path.
Register the solution's disjunction choices.
Reject attempts to define builtin operators.
Relax typeParam with its current constraint.
Remember the cleanup that will be activated.
Resolve a (non-type) witness via derivation.
Resolve this nested type to this type alias.
Return early for the no-simplification case.
Return the new type with the old convention.
Return the rc-identity root of the SILValue.
Return the size of the standard heap header.
Return true if we do so and false otherwise.
Returns just the host and port from the hash
Returns the OutputKind for the given Action.
Returns true if any illegal IUOs were found.
Scan backward to find the start of the line.
Scan forward to see if we can find the 'in'.
Search for the section which holds the hash.
See EventHook::GetFunctionNameForProfiler().
See comment in tvCastToNullableObjectInPlace
Selector pieces beyond the first are simple.
Set the debug locations of all instructions.
Set the generic parameters and requirements.
Set the initializer type of the constructor.
Set up a cache and put this data file in it.
Set up a cleanup to write back to the inout.
Set up a fake frame here, in case of errors.
Set up the closure object and class context.
Skip arguments where the name doesn't match.
Skip deprecated or swift_name'd enumerators.
Skip over quote character in string literal.
Skip over trailing slash to the next segment
Skip the decl if it does not have a comment.
Skip through optional evaluations and binds.
Skip type aliases, which are just shortcuts.
Slow path: unblock all parents, then return.
So dont do anything if m_stack.top() is NULL
Sort enum into payload and no-payload cases.
Special case for PHP4 Backward Compatibility
Specialized emitter for Builtin.fixLifetime.
Split a hash back into its constituent parts
Splits the critical edges in `unit', if any.
Start with the substitutions from the apply.
Stick to a normal hhvm array for the wrapper
Store slab tail bytes (if any) in freelists.
Subtract truncated time from last_sample_tsc
Swap the literals with the next few results.
Swift runtime functions in support of enums.
THERE IS NO WARRANTY - USE AT YOUR OWN RISK.
TODO: Check that we've specified the target.
TODO: Lazy properties can't yet be observed.
TODO: consider using different layout rules.
TODO: need more test cases for this sniffing
TODO: tuples TODO: functions TODO: metatypes
Tail-recur to actually call the constructor.
Take indirect value arguments out of memory.
Target is right at the end of Node, mark it.
Temp register used only for breaking cycles.
Terminate token and skip trailing separators
Test copying from a default-constructed map.
Test the empty string, spelled various ways.
Test union for ranges with lower end points.
Tests that that actually clears out the map.
That is, if all hit conditions have been met
That's the last special case defined so far.
The "const" storage-class-modifier is valid.
The arguments which feed this tuple element.
The array must be a dictionary literal type.
The array must strictly dominate the header.
The array pointer we're currently adding to.
The body of topLevelDecl will get set later.
The builtin opaque Objective-C pointer type.
The caller/callee function which is tracked.
The first component uses unqualified lookup.
The general structure of a generic metadata.
The input is exploded and the output is not.
The length is lowered as an integer_literal.
The number of logical CPUs this machine has.
The original type isn't necessarily a tuple.
The overridden property must not be mutable.
The post-dominator tree level for this node.
The replacement type must be materializable.
The rotations are all by constant distances.
The sample belongs to the previous function.
The source type is a CF object pointer type.
The substitution gives the type of the load.
The substitution record is serialized later.
The temporary memory is +0 if the value was.
The two-byte opcode map (first byte is 0x0f)
The whole TV is stored in a single SIMD reg.
Then attempt to sink code from predecessors.
There is no need to hoist Destroy for these.
These are special and can't have extensions.
These instructions all read from the ActRec.
These will be assigned SIMD registers later.
They are:  (*) Ignore -- Scanner is trivial.
This also needs to happen for memory safety.
This file implements name binding for Swift.
This instruction does not block the release.
This instruction is specified to be a no-op.
This is a release on a guaranteed parameter.
This is believed to be the year of creation.
This is dead code in NonFixedStructTypeInfo.
This is in php5 xdebug, but not in the spec.
This is like a load from a ref_element_addr.
This is where the context parameter appears.
This isn't really complete, but good enough.
This might just / not be supportable at all.
This occurs when you have nested increments.
This only expands one level of the copyaddr.
This search will not modify the declaration.
This type is too large to fit in a register.
This will need revision if we ever add goto.
Top level merging function for predecessors.
Track the AST location of the new component.
Traverse the children in the dominator tree.
Treat a missing file as "no previous build".
Try to apply the bridged casts optimizations
Try to claim an argument for this parameter.
Try to get this table as a constant pointer.
Try to handle the builtin at the type level.
Try to load the function from other modules.
Try to put a new TypeCheckData into the map.
Type check any var decls in the initializer.
Type checking listener for for-each binding.
Unary operators also include prefix/postfix.
Unwrap closures with explicit capture lists.
Update SSA of use with the available values.
Update the requirement source appropriately.
Update to record all potential conformances.
Uppercase the first letter, append the rest.
Use Builtin.NativeObject just as a stand-in.
Use the parsed guard expression if possible.
Use the runtime to initialize dynamic cases.
Useless copies of references look like this:
Using Variant so exceptions will decref them
Verify that the encoded size is as expected.
Verify that we don't have a static function.
Verify the set of enum cases we dispatch on.
Visit all instructions of the current block.
Visits a SIL Function and generates LLVM IR.
Wait until all of our threads have finished.
Walk the expression, generating constraints.
We already had an entry for this bool value.
We always need two end-of-buffer characters.
We assume the new value is already retained.
We can localize the store to an alloc_stack.
We can't delete it while it's in use anyway.
We consider a null byte an invalid sequence.
We do a variant of Knuth's algorithm D (vol.
We don't compute SPA for another call-level.
We don't currently enforce the UIEvent part.
We know exactly what it is, so mark exactly.
We need to exclude interfaces like ConstSet.
We only handle load and copy_addr right now.
We only move instructions with a single use.
We pre-allocate a couple of important cases.
We should always be able to find the parent.
We should seek a more holistic fix for this.
We'll append the lowered capture types here.
We'll visit the EnumElementDecls separately.
We're dealing with three or more containers.
We're using some other instruction's output.
When we did see a colon, this is a selector.
Whether to consider protocol members or not.
Whether we will explode the argument or not.
Which can expose opportunity for simplifcfg.
Without jemalloc we have to do that by hand.
Witnesses that are currently being resolved.
_BridgedNSError is in the Foundation module.
a base computation that was already emitted.
acknowledge receipt so that client can quit.
add a reference to retval's internal counter
allocate memory and init the stream resource
append bytes to the end of a dynamic pointer
as is the end, so the line misses the window
below assumes this is already in local cache
can't use ARRAY because it's a reserved word
check for empty and invalid collection names
check if value exists, if yes append to that
copied and re-factored from demangle/c++filt
copy the part of the string before the match
create wbmp ----------- create an empty wbmp
dSYM actions are never treated as top-level.
data isn't an array or object, so we're done
delete the converter if it is the last feed.
delete the temporary directory if not needed
don't include : before ipv4 unless it's a ::
don't reuse addq and addqi as they need a SF
each catch target for eh is reachable from b
fill in the standard set of oauth parameters
get marker byte, swallowing possible padding
get pixel value and index into the histogram
has newline(s), make sure they are preserved
hex string, under UNIX strtod() messes it up
https://github.com/facebook/hhvm/issues/3331
if no suffix is found, just add the wildcard
if qualified name, prepend current namespace
inout is only valid for function parameters.
keep trying to consume before waiting again.
load a T value from *pc without incrementing
m_type is not KindOfPersistentString anymore
make sure that the temporary file is removed
may happen if scheduled in multiple contexts
may self-assign if size is 1, but that's ok.
must be called for Func-nulling side effects
not sure how to check for DARWIN's __Z here.
null if no sugar found, set when sugar found
only the entry block may have no ProfTransID
parseExprList - Parse a list of expressions.
parseInput will initialize cmd_str and args.
parser functions / static analysis functions
pc is measured in bits for monochrome images
phijmp/phijcc+phidef handled by resolveEdges
refcounting is only set in the else branches
relative path to containing file's directory
result of AwaitAllWaitHandle does not matter
skip (and measure) the data, but discard it.
so list command can default to current frame
some leading directories may be unaccessable
stackaddr is not base, but top of the stack.
start with the union of the successor blocks
strip off /EXTRA from prot://addr:port/EXTRA
these methods all spring from the base class
this is hacky, what we need is LValueWrapper
this optimization is only for 2 ints/doubles
throw exception if serialization crapped out
try to evaluate if thumbnail data is present
v /            EnumCase/ThreadedSuccessorIdx
valid response, time to get out of this loop
version Null-terminated augmentation string.
visitCLASS calls visitPARENT and checkCLASS.
volatile so we can gdFree them after longjmp
we really shouldn't get here, but who knows.
(Otherwise, in this case favoring is useless.
/ / The visitor argument is the witness type.
/ Otherwise return CapturedDiagnostics.end().
/ This makes iterating over the edges easier.
/ these stores come from partial dead stores.
3) All arcs involve blocks within the region.
4) Delete unnecessary blocks from the region.
8 NULL means undefined and should be ASCII...
@nonobjc can be used to silence this warning.
A Lempel-Zim compression based on "compress".
A TypeInfo implementation for opaque storage.
A map from each BasicBlock to its BlockState.
A potential reason why something might throw.
A retain must be released before make_unique.
Add a cleanup for the temporary we allocated.
Add each variable, filtering out superglobals
Add new decls if they provide a new overload.
Add private imports to the extra search list.
Add the implicit 'self' to Params, if needed.
Add the link from proto to base if necessary.
Add the parameter to our specialization list.
Add the subloop region to the subregion data.
Add this set of overload choices to the diff.
Aliases for Objective-C runtime entry points.
All other version components must be numbers.
Allocate a new locator and add it to the set.
Allocate scratch space to invoke the runtime.
Allocate the witness table and initialize it.
Allow an arbitrary number of trailing blocks.
Always use the same access kind for the base.
Apache adds character set for these two types
Apparently invariant, left over from compress
Array is always greater than everything else.
Ask the runtime to store an extra inhabitant.
Assume failure until we post-visit this node.
Bail if we couldn't find the method or __call
Bail out if we didn't resolve type witnesses.
Blocks should only take direct +0 parameters.
Bridge ErrorProtocol to a foreign error type.
Build a case type accessor for enum payloads.
Build a mapping from arguments to parameters.
Build a normal array slice type for recovery.
Build a timestamp and return a pointer to it.
Builtin functions get some extra information.
But only if the lowered type matches exactly.
Cache the uniqued set of transitive captures.
Call a helper that decrefs the first argument
Call the generator function we were provided.
Callees which are inlined into this function.
Cannot force initializers into class methods.
Canonicalize the parameters and requirements.
Check for literals that don't fit in 64-bits.
Check for mutations of the address component.
Check for string value ("majority", or a tag)
Check if the callee is passed as an argument.
Check if the function matches this breakpoint
Check if this file has already been included.
Check if this zval could be dtor()'ed somehow
Check that the declaration attributes are ok.
Check that the length of the list is correct.
Check that the type matches the pattern type.
Check that there is a payload at the address.
Check to see if the contextual type conforms.
Check whether Clang considers it an override.
Check whether the given type is Builtin.Int1.
Check whether the given type is Builtin.Word.
Check whether we have a valid selector piece.
Claim the foreign "self" with the self param.
Clear out the old value to avoid double-frees
Clone all instructions from Insns into DestBB
Close the dangling stack with the last entry.
ClosureExpr's evaluate their bound variables.
Coerce each parameter to the respective type.
Coercions from a type to an existential type.
Collect arguments from the apply instruction.
Collect constraints from the element pattern.
Complain if the adoptee is a non-final class.
Complete cmds should not be asked to do work.
Compute substitutions for the intrinsic call.
Compute the element shuffles for conversions.
Consider parameters to always have been read.
Conventions based on C function declarations.
Convert the pattern to a string we can print.
Convert ubuf to UTF-8 and try text soft magic
Copy a value from one object to a new object.
Copy flags over, adding HasEnumWitnesses flag
Copyright (C) 1991-2, RSA Data Security, Inc.
Create a ProtocolInfo object from the layout.
Create a module for the current compile unit.
Create a new argument with the promoted type.
Create a new basic block with the given name.
Create a substitution for the dependent type.
Create a temporary if the result is indirect.
Create an optional adjustment to a parameter.
Create plans for all the sub-initializations.
Create the archetype for the implicit 'Self'.
Create the new releases at each anchor point.
Currently we have no curried known functions.
Define the storage for the packet accumulator
Definitions of some builtin metadata objects.
Determine the depth our parameter list is at.
Determine the generator type of the sequence.
Determine whether this is a variadic witness.
Determine whether we have a default argument.
Diagnose it with a generic error message now.
Diagnose this and create the getter decl now.
Different enums cannot be cast to each other.
Dig out the declaration of the Selector type.
Dig out the initializer we're in (if we are).
Dig out the nominal type we're bridging from.
Do a derived-to-base conversion if necessary.
Do not capture frame for HPHP only functions.
Does this iteratively for all blacklist items
Don't allow critical edges from PredBB to BB.
Don't free the iterator for the current loop.
Don't produce any results in an enum element.
Don't recurse into default-value expressions.
Don't try to load conformances re-entrant-ly.
Done, don't do redundant work on destruction.
Easter as the number of days after 21st March
Emit a call to do a 'destroyArray' operation.
Emit constants for the checked version range.
Emit early stack overflow check if necessary.
Emit the initialization code into a function.
Emit the protocols the archetypes conform to.
Emit the result of this call to an explosion.
Encountered a try block, need to run finally.
Ensure that profiling is enabled in jemalloc.
Erase meta-data about these regions of the TC
Everything else should use the l-value logic.
Exception handling and the other opcodes (ex.
Exceptions will be thrown for any non-object.
Expanded data source object for gdIOCtx input
Extract a Bool from the resulting expression.
Extract locations from unknown memory / inst.
FIXME: ArrayElementType is a total hack here.
FIXME: Check whether this has already failed.
FIXME: Clang submodules are not handled here.
FIXME: Crawling all loaded modules is a hack.
FIXME: Derive spare bits from element layout.
FIXME: Establish that we need a type witness.
FIXME: Feels too early to perform this check.
FIXME: Hack to deal with recursion elsewhere.
FIXME: ImportDecl should store a DeclNameLoc.
FIXME: It also must not carry witness tables.
FIXME: Member constraint is still weird here.
FIXME: No way to express this in Objective-C.
FIXME: Some clients probably care about them.
FIXME: The problem may not be the OS version.
FIXME: There might be better ways to do this.
FIXME: This is wrong for observed properties.
FIXME: only show module part of RawAccessPath
Fast path changes that don't change the type.
Feed the cast result into the nonnull branch.
Figure out where to look for the counterpart.
Find 'key' in concurrent_unordered_map 'map'.
Find a default initializer in the superclass.
Find the appropriate object literal protocol.
Find the disjunction of fallback constraints.
Find the module the extension is declared in.
Find the name directly bound by this pattern.
Find the source range covering the full name.
First step: compute the length of the blocks.
First strip off RC identity preserving casts.
First try to look up R from the lookup table.
First, make sure the used trait is flattened.
Fix the AST and determine the insertion text.
Fold (T) into a type T with parens around it.
For C functions, create empty argument names.
For Self types, recur on the underlying type.
For each user U of the take_enum_data_addr...
For each user U of the unchecked_addr_cast...
For more details, see the help for CmdThread.
For non-error cases, the caller handles this.
For now -Oplayground is equivalent to -Onone.
For wildcard and name patterns, set the type.
Force next pass to zero the color index table
Form the textual path illustrating the cycle.
Forward the address of indirect value params.
Gather the conformances for the type witness.
Generally hasExtra() should be checked first.
Generate a bunch of operands of a given type.
Get function parameters and do error checking
Get location metadata for the inputs of `ni'.
Get or create a type metadata cache variable.
Get or create a witness table cache variable.
Get the address to which to store the result.
Get the contents of the original source file.
Get the next state from the transition table.
Get the type name by chopping off "Builtin.".
Go with PHP5 default behavior of allowing all
Grab the absolute path of the script filename
Grab the breakpoint message and do the break.
Grab the breakpoints matching the passed info
HAS TO BE UPDATED BEFORE calling sample_stack
Hack to stop the mangled name from showing up
Hack: These two are not really page specific.
Handle "exit" edges from the lifetime region.
Handle all moves that aren't part of a cycle.
Handle the special case of copying an lvalue.
Have not encountered a strong retain/release.
Hole and BigObj are skipped in ForEachHeader.
I don't really want to inline my arm, thanks.
I think we can probably handle more of these.
If FirstIV is not an enum, then we must bail.
If `f' is a static method, thiz must be null.
If any tag bits are present, they must match.
If c2 is an interface, see if c1 declared it.
If do_bind is true, update any bound columns.
If it is not a *_token global variable, bail.
If m_override is set, use it unconditionally.
If not from the same file, sort by file name.
If short_open is '-' this is the last option.
If so, we're done, otherwise keep converting.
If that fails, try it as an SUS integer type.
If the argument type is in error, we're done.
If the decls match, then this could conflict.
If the entry already exists, it won't change.
If the method is the wrong kind (instance vs.
If the name word is longer, there's no match.
If the next character is not uppercase, stop.
If the parent didn't change, we won't change.
If the payload is empty, so is the explosion.
If the ping failed, deregister the connection
If the protocol has a default type, check it.
If the requirements don't match up, complain.
If the two types are the same they may alias.
If the types are equal, the answer is simple.
If there are extra tag bits, test them first.
If there are no rows remaining, then we fail.
If there is a ':', this is a dictionary type.
If there were no local conflicts, we're done.
If there's no superclass, return a null type.
If this is a defer body, use the parent name.
If this is not a no-op, update semantic info.
If this resolved type is a class, we're done.
If we already computed the result, return it.
If we already have a conformance, we're done.
If we already saw an application, we're done.
If we are missing a parameter, diagnose that.
If we found some candidates, then we're done.
If we have a DebugDisplay prop saved, use it.
If we have extra optionals on the input type.
If we met a store before this one, delete it.
If we were asked to print Clang stats, do so.
If we're missing a semicolon, try to recover.
If we're really doing ArrayIdx, it's nullptr.
If we've already tried this binding, move on.
Ignore all instructions with no side effects.
Ignore any instructions without side effects.
Ignore blocks with more than one instruction.
Ignore typealiases found in protocol members.
Impose the anti-aliased drawing on the image.
In NDEBUG builds, bail out as soon as we can.
In this case some semantic calls can be CSEd.
Include the correct TaskQueue implementation.
Indicate whether json serializer is available
Infer the Objective-C name for this property.
Initialize ResultsInError as a None optional.
Insert all of the blocks that ASI is live in.
Insert instructions for creating spill space.
Instruction has a proper target type already.
Instructions that never do anything to memory
It also sets the guard-failure block, if any.
It's a right parenthesis in a string literal.
It's an "exit" edge from the lifetime region.
It's probably due to an incorrect prediction.
It's the top-most declaration (not a module).
Keep drilling down to the first element type.
Keep to zero when no symbol should be popped.
Keep track of all the uses that aren't loads.
Keep track of whether we've emitted an error.
LICM is a work in progress, disabled for now.
LZ4 functions Varint helper functions for lz4
Lazily create the standard fixed-buffer type.
Leave space for `self` to be filled in later.
Let's do alias checking based on projections.
Linux (tested on core from 2.4.x, short name)
Load the 'out' value as the destination type.
Load the saved frame pointer from the ActRec.
Location of current replacement in the result
Log random, interesting events in the client.
Look for a branch on EQ around the Preheader.
Look for a compare of induction variable + 1.
Look for a context with the given Swift name.
Look for a single other element on this enum.
Look for an Objective-C method in this class.
Look through attributed type representations.
Look up the breakpoint, ensure it's hittable.
Lower the capture context parameters, if any.
Make a duplicate copy of this parameter list.
Make sure the constructor is within Selector.
Make sure there is room to insert an element.
Make sure to check bounds, if we haven't yet.
Make sure we declare the referenced function.
Make sure we have a case for every ValueDecl.
Mangle DynamicSelf as Self within a protocol.
Mark them as unknown control flow boundaries.
Mask the tag bits out of the payload, if any.
Match will be set true once there is a match.
Merge the contexts from the respective spills
Merge the entries into null-separated string.
Move the cond_fail to the predecessor blocks.
Move the loadable value into a "source temp".
Much like deallocation, destroy addr is safe.
Mutate the Vinstr stream by inserting copies.
NULL will be returned if no document matches.
Native unowned references are just a pointer.
Neither they are in "could be" relationships.
Next command is active but we didn't step in.
Next: the static local is already initialized
No handlers were yet examined for this fault.
No interesting let properties in this struct.
No need to loop over the elements, we're done
Nodes that make up components of lvalue paths
Normalize incoming arc weights for each node.
Not inserted, caller needs to own the pointer
Note that the length can span multiple lines.
Nothing in this structure can ever be untrue.
Now attempt to simplify the remaining blocks.
Now that we've permuted things, complete f().
Now we get the full value, and show the rest.
Now we have a namespace, class and func name.
Null out or initialize the frame's ExtraArgs.
Okay, we need to walk the types and re-lower.
Olympus has this padded with trailing spaces.
Omit needless words based on parameter types.
Only check the trailing 'where' requirements.
Only try to correct very simple imbalances...
Opcode located at the 6 most significant bits
Operators and closures cannot have API names.
Otherwise it is defined to perform the merge.
Otherwise, assume we might break or continue.
Otherwise, pull the front value off the list.
Otherwise, this is a metatype-to-object cast.
Otherwise, we have a definite init or assign.
Otherwise, we inline a little operation here.
Otherwise, we need to cleanup subregion data.
Otherwise, we need to traffic through memory.
Palette image, or something coerced to be one
Parse 'case' sil-decl-ref ':' sil-identifier.
Pass through the values passed to -Xfrontend.
Pause the polling thread if it isn't already.
Perform MiscDiagnostics on Switch Statements.
Pimpl implementation of SwiftARCContractPass.
Place the proxy onto the retired proxy queue.
Possibly, skip spaces/tabs at the end of line
Potentially upgrade the error to E_USER_ERROR
Pre-scan operator arguments for nil literals.
Prepare the value slot in the optional value.
Previously, this class was backed by an imap.
Produce a tailored box metadata for the type.
Produce the concrete form of the opened type.
Project out individual elements if necessary.
Promote box allocations to stack allocations.
Promotes heap allocated objects to the stack.
Push a cleanup to destroy the local variable.
Push an empty projection path to get started.
Raw values cannot be automatically generated.
Record any optional adjustment that occurred.
Record the default witness for a requirement.
Recover by arbitrarily binding the first two.
Regionize func and translate all its regions.
Register our info with the runtime if needed.
Register the connection on successful pinging
Remember all the disjunction choices we made.
Remember if this pass didn't change anything.
Remove instructions that we are loading from.
Remove the breakpoint from the unmatched set.
Remove the old DeallocStackInst instructions.
Replace destroys with a release of the value.
Replace the placeholder if we were given one.
Require a non-trivial set of print functions.
Resolve a (non-type) witness via name lookup.
Resolve the locator to a specific expression.
Resources are always less than anything else.
Retain the result if this is copy-on-success.
Retrieve the constraints from fixed bindings.
Retrieve the member type with the given name.
Retrieve the node for the non-representative.
Return the debug location from a SILLocation.
Return true if changes were made, else false.
Returns None / if no such instruction exists.
Returns a random number from Mersenne Twister
Returns the address of a value-witness table.
Returns true if this AllocStacks is captured.
Rewrite unknown releases into swift_releases.
Rules for ICU's RuleBasedBreakIterator class.
Run an iteration of the mid-level SSA passes.
Scan only sections that were not scanned yet.
Scan the whole module and search Apply sites.
See the disjoint data function objects above.
Set of RPO ids that still need to be visited.
Set up a result buffer if desirable/required.
Set up scheduleCommandIfNecessaryAndPossible.
Setup the padding string values if specified.
Short version, display and type are the same.
Should only have one tuple extract after CSE.
Skip D-edges (edges that are dom-tree edges).
Skip if we don't need to reify this protocol.
Skip property freeing for the following types
Skip the decl if it's not visible to clients.
Skip the internal closure "0Closure" variable
Sort first by filter name (case-insensitive).
Special mangling for the first generic param.
Start out by classifying all the constraints.
Start scanning backwards from the terminator.
Strideof always returns non-negative results.
Strip slashes which came before the file name
Suppress warnings about useless try or catch.
Swap L and R because equality is commutative.
Swap it out for the full version if possible.
Switch this proxy to debug the given sandbox.
TBAA says that objects cannot be type punned.
TODO(dreiss): Make this timeout configurable.
TODO: Check this already at argument parsing.
TODO: We just check the block itself for now.
TODO: We should indirectly reference classes.
TODO: What is the right location to use here.
TODO: fixing this properly requires D1787768.
TODO: not sure this is the right thing to do.
Take the ClassHierarchyAnalysis into account.
Take the reference type argument and cast it.
Temporarily disable printing the diagnostics.
Temporary arena used for a constraint solver.
Test if this is a payload or no-payload case.
The actual file should be located in dumpDir.
The analysis result structure for rc_analyze.
The current token did not end with e.g. a "."
The data is gathered in thread local storage.
The first non indirect result is the closure.
The intrinsic takes its parameter indirectly.
The let/var pattern is part of the statement.
The matching alloc_stack must be in the loop.
The module pass, which runs the optimization.
The nearest ping time is in the first element
The newlocale() call already did that for us.
The overflow case is handled / in SILCombine.
The point is past an end of the line segment.
The prefix should normally always be present.
The rodata pointer will be instantiated here.
The set of specialized protocol conformances.
The thunk will call the specialized function.
The unresolved member itself is the function.
There is nothing more that we can do, return.
There is some type-specific hackery here for:
There's no corresponding Clang type for that.
These are mostly for the class creation path.
These should already have accessor functions.
These types cannot be expressed in swift yet.
They don't need protection by retain/release.
This character isn't allowed in Swift source.
This doc will be freed by xsltFreeStylesheet.
This file implements bridging to Objective-C.
This file implements the RemoteAST interface.
This handles parameter decls in ClosureExprs.
This helps generating the genset and killset.
This is UIAlertView's designated initializer.
This is a private or a module internal class.
This is an address type, take it object type.
This is dictated by a special file extension.
This is here for testing purposes via sil-opt
This is hit if -k is set or there is no match
This is the approximate beginning of a month.
This list must be kept in alphabetical order.
This may not be true by the end of a request.
This must happen before checking its members.
This raises an error, and so can't be folded.
Throw exception in case we have no connection
Thus we wouldn't want to make a substitution.
To be called when we enter a fresh namespace.
Translate from SMLoc ranges to column ranges.
Trigger delayed parsing, no need to continue.
Try closing the existential, if there is one.
Try to get by with floating-point arithmetic.
Try to sink it and move on to the next block.
Try user-provided library search paths first.
Type check the body of the getter and setter.
Type should be bound unless it's type erased.
Type visitor doesn't handle unresolved types.
Ugly, but behavior is different for serialize
Unfortunate special case for Systemlib units.
Unfortunately, not a good way to detect this.
Uniquing set to catch symbol name collisions.
Unnamed parameters don't require any storage.
Unordered and unknown values are not allowed.
Unregister request-specific wrappers entirely
Update SILDeclRef to point to the right Decl.
Update m_pos, now that compaction is complete
Update the condition with the backedge count.
Update the max store set for the basic block.
Update the owner to reflect inheritance here.
Update the parent fields in the instructions.
Use typedefs we set up for SIMD vector types.
Use typo correction to find the best matches.
Used only when debugging GIF compression code
Value is potentially in the ExtraArgs/VarEnv.
Vars are simply lvalues of their rvalue type.
Verify declarations without names everywhere.
Visit each function referenced by the VTable.
Warn about any property access in the getter.
We are either removing everything or nothing.
We assume the buffer is at least ndigit long.
We can always trust the dst type of the load.
We can guard on StaticStr but not CountedStr.
We can process the basic blocks in any order.
We currently don't serialize these locations.
We didn't find an existing value for the key.
We do actually mean exact type equality here.
We don't expose a non-inbounds GEP operation.
We don't have a guess for the current ActRec.
We don't have a mode, so determine a default.
We don't need to emit dependent conformances.
We don't want to jump-thread through headers.
We got a bad exponent ('e' and maybe a sign).
We have exactly the pattern that we expected.
We have to be careful with before/after here.
We have to eval now to emulate this behavior.
We know how to propagate through BBArgs only.
We know that all arguments are literal insts.
We know that main always comes from MainFile.
We must have originated at the call argument.
We need to unique by both size and alignment.
We only care about intra-module dependencies.
We preserve loop info and the dominator tree.
We should either have parentheses or a tuple.
We still need a discriminator, so keep going.
We use an auto-generated SILLocation for now.
Where 0 stands for Sunday, 1 for Monday, etc.
Work around a bug in headers on Digital Unix.
Wrap the source value into an optional first.
Wrapper fixes up negative starting positions.
Wrapper for sending and wrapping in a safe op
__attribute__((annotate(swift1_unavailable)))
allocate a new chunk of counters if necessary
allocating constructors have metatype 'self'.
also frees localCache and atomic-dec APCArray
always one delimiter less than count of items
and then any putenv() changes take precedence
because emitImmReg tries the xor optimization
cannot continue execution after deleting self
canonicalize asserts that we don't have nulls
check if bound parameter is already available
check whether this stmt generates a resultset
concatenate all adjacent text and cdata nodes
convert fields back to Strings to get lengths
create a bson regex  type: 11 cstring cstring
decref apc arrays referenced by this request.
decref apc strings referenced by this request
des submitted this bugfix: gdFree the memory.
determine whether we should compress response
elementToData() may need to modify the value.
expr-anon-closure-argument: /     dollarident
figure out where the message part starts/ends
fs points to the end of the threadlocal area.
if there are no elements, don't bother saving
ignore autoresume if autoseek is switched off
index_addr is only expected at the top level.
indexed by FuncId, keeps it's current cluster
ini settings settable anywhere -- PHP_INI_ALL
insert serialized variable into shared memory
materializeForSet has a funny type signature.
materializeForSet is final if the storage is.
may branch to scheduler and suspend execution
month as two digit number (with leading zero)
move strong iterators to the previous element
need to hook up a global variable to set this
no check necessary -- if NULL will fail ahead
no useful writeback diagnostics at this point
not a class, interface, trait, enum, or alias
not going to bother with string division etc.
only int and string values allowed for enums.
only use wordsame on 8-byte aligned addresses
output any remaining alerts at E_NOTICE level
perform copy propagation on every instruction
position and count for address part of a name
recall how many parameters have been provided
referenced from constructors and destructors.
remainder as described on divd documentation:
set current class as the first declaring prop
skip StackTrace methods and the Count() call.
the executor is unregistered on this queue 3.
this is technically a lie, since sleep failed
unconditionally keep this for later reference
value was converted to an int: match normally
wait for transition from WAITING to non-empty
we're about to hit image data, or are at EOF.
words per line corresponding to pixdata 3, 4.
"Adobe Photoshop Document Data Block": 8BIM...
"get" is implicit, so it can't be checked for.
'set' and 'willSet' can have an optional name.
(Later we'll determine the real liveOut sets.)
(We returned early if something didn't exist.)
- existential metatype to AnyObject conversion
/ / Returns true if an access can be replaced.
/ / We only use the instruction analysis here.
/ If target is an ObjC type, return this type.
/ The type must have dependent generic layout.
2.0.1: work around a gcc bug by being verbose.
A binary operator can be part of a SILDeclRef.
A class for expanding a polymorphic signature.
A helper class for emitting materializeForSet.
A helper for creating pointer-to-struct types.
A linear time algorithm for placing phi-nodes.
A local generic context is a generic function.
A pass for generating debug info on SIL level.
A return inst is always a non-failure exit bb.
A set of ad-hoc rules to process instructions.
A set used to ensure we only visit users once.
A tuple pattern propagates its tuple-ness out.
A tuple type is safe if its elements are safe.
A whitelisted type should be ignored entirely.
Actual implementation of TypeParser for DWARF.
Add a "(value : T, indices...)" argument list.
Add a conversion constraint between the types.
Add all of the constraints in the disjunction.
Add branch arguments to destination phi nodes.
Add the 'self' parameter to the function type.
Add the inner results (and don't filter them).
Add the value and create the evaluation string
Adding contexts such as class would make sense
Additional constants for use with loading html
Advance the source key past the cached prefix.
All remaining components use qualified lookup.
All successors are dead, so continue hoisting.
Allocate and initialize an input buffer state.
Allocate in the destination fixed-size buffer.
Allow anything that isn't bridged to NSNumber.
Already matching (as in, there are no labels).
Always an address, don't need to save category
An exploded parameter list: - parameter x: ...
An ordinary reference doesn't ignore anything.
An owned or 'in' parameter is passed in at +1.
And XOR with the next 8 characters of the key.
And of course this will affect backup programs
Any obviously useless copy will be eliminated.
Append the next path component and lstat() it.
Array, possibly for collection initialization.
As addErrorDomain above, but performs a lookup
Assign the next available spill slot to `ivl'.
Attempt to dig the apply out from this result.
Attempt to lookup the Vtbl from the SILModule.
Bail if we're trying to do a recursive count()
Base offsets must be monotonically increasing.
Boutell almost a simple global replace from T.
Bridge blocks back into native function types.
But it does not / create a SILFunction object.
By default UnicodeString isn't NULL terminated
C-compatible enums have scattered inhabitants.
Can't do much if we don't even know the types.
Cannot be extension, which is not a ValueDecl.
Cannot call static functions on non-metatypes.
Cannot use static properties on non-metatypes.
Capture the tuple expression, if there is one.
Check all of the subexpressions independently.
Check for a () suffix, which indicates a call.
Check for any errors while generating layouts.
Check for conformance to the literal protocol.
Check for methods that return 'DynamicResult'.
Check if breakpoint's exception is registered.
Check if the guy tries to do a -: kind of flag
Check if we are converting a constant integer.
Check immediately for an existing cache entry.
Check other expected properties of the C type.
Check that it is a dominating checked_cast_br.
Check that requirements are semantically valid
Check that there are no accidental collisions.
Check the Dest expression in a setter context.
Check the default definition, if there is one.
Check the given explicit protocol conformance.
Check the representation of the function type.
Check to see if the range is in reverse order.
Check whether all operands are loop invariant.
Check whether any needless words were omitted.
Check whether the declarations are in a class.
Check whether the extension is in the overlay.
Check whether this is a supertype requirement.
Check whether we already have a cached answer.
Check whether we already imported this method.
Check whether we have a specified result type.
Check whether we've seen this protocol before.
Choose the serialized diagnostics output path.
Choose the side further along in the sequence.
Clear up at the beginning of each SILFunction.
Closure expressions always have function type.
Closures are currently never natively generic.
Coerce the subpattern to the destination type.
Collect all of the methods with this selector.
Collect all of the stores into the AllocStack.
Collect the complete set of generic arguments.
Collect virtual calls that may be specialized.
Common implementation for empty box type info.
Complain about unresolved entries that remain.
Complain that the type does not conform, once.
Compute the distances for the function itself.
Compute the interface type of the initializer.
Computerized output has a line for exit events
Conditional bindings must have an initializer.
Consider paths starting at the given protocol.
Continuation switch: no bounds checking needed
Contract binding edges between type variables.
Convert indirect to direct parameters/results.
Convert the pointer argument to a SIL address.
Copy the active members into the entries list.
Copyright (c) 1997-1998 Sun Microsystems, Inc.
Create a tuple containing all of the segments.
Create an Objective-C selector string literal.
Create either a static or an uncounted string.
Create the disjunction of favored constraints.
Create the protocol declaration and record it.
Current token encompasses our source location.
Cygwin does not add "begin" and "end" objects.
DI will make sure it is only assigned to once.
Dataflow needs multiple iteration to converge.
Declarations in SIL don't require definitions.
Define macros that Swift bridging headers use.
Deserialize the method and add it to the list.
Determine the failability of this initializer.
Directly capture storage if we're supposed to.
Disable JIT for PPC64 - Port under development
Disjunction constraints are never solved here.
Do not count referenced values after the first
Do the assignment as for a refcounted pointer.
Don't skip it twice if there's an empty tuple.
Doug Claar: watch out for NaN in atan2 (2.0.5)
Duck out early if we have nothing to register.
Each witness marker starts a new substitution.
Eagerly coalesce adjacent conservative ranges.
Easy case: all pointer arguments are non-null.
Easy case: we want to pass exactly this value.
Eat an invalid token in an expression context.
Eat any UTF-8 BOM we find in the first 3 bytes
Either BEmpty or more than one bit set in rep.
Emit a call to do a 'destroyBuffer' operation.
Emit a call to do a 'projectBuffer' operation.
Emit any delayed definitions that were forced.
Emit any lazy function definitions we require.
Emit external definitions used by this module.
Emit raise-warnings for any missing arguments.
Emit the l-value, but don't perform an access.
Emit the operation at a concrete packing kind.
Emit the protocol conformance to the behavior.
Emit top-level cleanups into the epilog block.
Emitting RATAs isn't supported here right now.
Empty payload addresses can be left undefined.
Enter a scope for any bound pattern variables.
Enumerate members of archetype's requirements.
Equate it to the other type in the constraint.
Error, because the label is crossing a finally
Expand replacement range for trailing closure.
Expect `c' after possible whitespace/comments.
Explicit cases that have explicit pointer name
Extend the logical size if we seek beyond EOF.
Extract locations from SIL DebugValueAddrInst.
FIXME: Assert this token is after the last one
FIXME: Customize message to the kind of thing.
FIXME: Import C++ member functions as methods.
FIXME: Locator when anchored on a declaration.
FIXME: Need an AST to represent this properly.
FIXME: There might be a better way to do this.
FIXME: This should be an API on clang::Module.
FIXME: We can provide better diagnostics here.
FIXME: collect attributes in the CallEmission.
Fall though to the call to PARSE_ERROR() below
Fallback, callers will handle this as an error
Fast path the common case that elems is mixed.
Fill in the rodata reference in the metaclass.
Fill in the substitution and conformance maps.
Find all of the named, unfulfilled parameters.
Find the conformance to _ObjectiveCBridgeable.
Find the molad of Tishri closest to this date.
First argument is inout but no lvalue present.
First, get a mangled name for the declaration.
Flags that can be used to control name lookup.
For abstract caches, we need to follow a path.
For each "subrecord" of agg in the worklist...
For each RegionID in our reverse post order...
For generic types, this uses the unbound type.
For now all ref counting insts have 1 operand.
For now, all type metadata is directly stored.
Foreign metadata has an additional header that
Form a reference to the destroying destructor.
Form the set of generic substitutions required
Free ProfTransRecs for Proflogue translations.
Free any values that may be on the eval stack.
Free the memory allocated to an longopt array.
Function on same line, insert with semi-colon.
Function types do not satisfy allowsOwnership.
Gather a list of CopyDest users in this block.
Generate more specific messages in some cases.
Get function parameters and do error-checking.
Get or create a global UTF-16 string constant.
Get the function to reference from the vtable.
Get the lowered AST types: - the original type
Get the operator, if appropriate to this pass.
Go through and convert all the entries to i8*.
Grab the precomputed frame data for this level
Grab the region associated with the subloop...
Handle all the integer types as opaque values.
Handle local and top-level computed variables.
Handle optional unwrapping of the cast source.
Handle protocol 'Self', which is an archetype.
Handle the possibility of nested existentials.
Heap allocations are at least pointer aligned.
If Op is a part of ROp or Rop is a part of Op.
If any of the updates fails an error is thrown
If basic block has no predecessor, do nothing.
If compared against a bool, convert to a bool.
If it's a Clang declaration, try to import it.
If it's an llvm intrinsic, fold the intrinsic.
If no bits are demanded, we trivially succeed.
If size was given take minimum of len and size
If so, it is / consumed and false is returned.
If that happens, there's nothing to constrain.
If the block has already been created, use it.
If the declaration is unavailable, we're done.
If the destination is '_', queue up a discard.
If the element type is empty, it adds nothing.
If the element was is in the cache, return it.
If the function has a dynamic Self, it's okay.
If the kinds of overload choice don't match...
If the left-hand-side is a 'try', hoist it up.
If the name didn't actually line up, complain.
If the pattern already has a type, we're done.
If the scores are different, we have a winner.
If the type changed at all, make a note of it.
If the type is not an lvalue, this is a no-op.
If the variable is already unnamed, ignore it.
If there are extra tag bits, set them to zero.
If there are multiples they will be diagnosed.
If there is no explicit 'required', print one.
If there's no type yet, come back to it later.
If this is an imported CF type, use that name.
If this is an in-parameter, it is like a load.
If this is an operator declaration, handle it.
If toType has more elements, it may be larger.
If user asks for ordered dither, give him F-S.
If we already have a type witness, do nothing.
If we can't represent the Swift name in Clang.
If we cannot update the type, we have to fail.
If we didn't, we'd have a chicken-egg problem.
If we found a straight-quote, then we're done.
If we have NS(U)Integer or CGFloat, return it.
If we have a collection, get the element type.
If we have a reader, enumerate its base names.
If we have an implicit force, look through it.
If we have something to complain about, do so.
If we're not emitting diagnostics, we're done.
Ignore any accesses inside addressors for SILG
Ignore equality constraints to concrete types.
Ignore the thick_to_objc_metatype instruction.
Implementations of the metadata ABI functions.
In all other cases, a ReqBindJmp is generated.
In either case, it's the last thing in 'args'.
In reality, retLocal is an immediate argument.
In this case the size of UniqueLocations is 1.
Increase the reference count to keep it alive.
Index into the cache with adjusted pixel value
Initialize IDs so our IDs are in RPOT as well.
Initialize our per-diagnostic state to default
Initialize the storage immediately, if we can.
InstrIsPHI - Check if an instruction is a PHI.
Instructions that explicitly manipulate locals
Instructions which (potentially) write memory.
Invert the S-boxes, reordering the input bits.
It is important that cond_br keeps an i1 type.
It is only applied with constant shift counts.
Later, readVTable requests an enclosing scope.
Lazily compute blocks that may reach the loop.
Load a clang argument expansion from a buffer.
Load the error (taking responsibility for it).
Local function to create the alias, if needed.
Local function to mark the setter unavailable.
Local variables don't otherwise get accessors.
Look at lines above and below and start paints
Look at the witness table for the conformance.
Look for precomputed callees based on vtables.
Look through an implicitly unwrapped optional.
Lower the interface type in a generic context.
Machine information that we collect just once.
Make a copy of the string for use with strtok.
Make sure it's of an appropriate builtin type.
Make sure that the index types are equivalent.
Make sure the input pointer is the right type.
Map a generic parameter type to its archetype.
Map unbound types into their defining context.
Mask the bits into the pointer representation.
Match in order, but allowing interjected words
Match the argument of a call to the parameter.
Match up the call arguments to the parameters.
Module inputs are okay if generating a module.
Move items with non-zero hotness to the end...
Must-alias base and identical projection path.
NB: this may miss a race with deleting a Func.
Next read in the generic requirements, if any.
No children of this tuple, make an empty tuple
No need to store specific arrays in this case.
Normal cases should continue, KindDone returns
Note that an explicit 'infix' is not required.
Note that we pass down the original bit-width.
Nothing to do if there's already a descriptor.
Now add the new argument to each incoming Jmp.
Now we know that I should not have any uses...
Objective-C classes use the ObjC class object.
Objective-C object types, including metatypes.
Offsets of key fields in the metadata records.
Ok, we have a release_value or strong_release.
Okay, it looks like this value doesn't escape.
Okay, just erase the function from the module.
Only Branch and CondBranch may have arguments.
Only consumes the reference to its input array
Only full initializations make something live.
Only the payload case has anything to project.
Optimize the placement of global initializers.
Other kinds of types don't have class objects.
Otherwise check if we have a non-trivial type.
Otherwise we need to store, bitcast, and load.
Otherwise, either call a function or curry it.
Otherwise, emit as a single independent value.
Otherwise, follow the Eval.JitAMaxUsage limit.
Otherwise, it was returned as a direct result.
Otherwise, project out the value and carry on.
Otherwise, raise a warning and serialize null.
Otherwise, resume into the continuation block.
Otherwise, simultaneously emit and reabstract.
Otherwise, specialize on the necessary column.
Otherwise, this is the real end of the buffer.
Otherwise, this result should be filtered out.
Otherwise, transitively capture the accessors.
Otherwise, use the standard SwiftObject class.
Otherwise, we can access all instance members.
Otherwise, we have an unterminated /* comment.
Otherwise, we're consuming this as a +1 value.
Otherwise, we're ok to type check the subexpr.
Otherwise, we're still consistently Yes or No.
Outdent if the line looks like a 'case' label.
Parameters for push/pop and keep stack aligned
Pass 'nil' as the return value to the exit BB.
Perform a dynamic cast to an existential type.
Perform classic SSA optimizations for cleanup.
Perform the actual redundant load elimination.
Perform the layout required for a heap object.
Perform the server-side work for this command.
Persistent font cache until explicitly cleared
Pop the buffer stack, destroying each element.
Prefer the actual storage size over the DbgTy.
Print a string containing C character escapes.
Print users, or id for valueless instructions.
Process all instructions in the current block.
Process nested IFDs directories in Maker Note.
Produce all combinations of partial solutions.
Project out the payload on the success branch.
Propagate 'required' to subclass initializers.
Propagate l-value use information to children.
Propagate liveness and users through the tree.
Properties need some special validation logic.
Push a cleanup to destroy the let declaration.
Reabstract the value if the types don't match.
Reabstract to the substituted type, if needed.
Record the change, if there are active scopes.
Record the namespace in the scope and recurse.
Record this extension so we can find it later.
Register this thunk as an external definition.
ReleaseValueInst of a trivial type is a no-op.
Remangle that into a new type mangling string.
Remember this init for the PatternBindingDecl.
Remember whether this is a function parameter.
Remove a copy for which canNRVO returned true.
Remove checks we have seen for the first time.
Remove pointless reabstraction thunk closures.
Remove the DynamicSelfType from OrigType, too.
Replace it with a branch to the failure block.
Report a call to an unimplemented initializer.
Report a message to any forthcoming crash log.
Report a message to system console and stderr.
Require the carried type to be materializable.
Result of the select_enum should be a boolean.
Return a callee list for a given class method.
Return the newly allocated nbytes-sized block.
Return the next character without claiming it.
Return the value as +1 if the optional was +1.
Return true if k is one of AHM's magic values.
Returns old property if removed otherwise null
Returns the database response for the command.
Returns true if a function is marked as alive.
Rewind to the beginning of the top-level code.
Rotate subkeys and do compression permutation.
Run an iteration of the high-level SSA passes.
Run the iterative data flow until convergence.
SILGen the module and produce SIL diagnostics.
Said class methods must be in an actual class.
Same if one of the 2 types is an optional type
See icu/Tokenizer.cpp for definition of types.
See if we have a cached projection we can use.
Selector for unimplemented_static_var message.
Semaphore functions using System V semaphores.
Set of let properties in a given nominal type.
Set the ODBC version we are going to use to 3.
Set up error conformance to be lazily expanded
Setup the input buffer state to scan a string.
Shared code to read color tables from gd file.
Should not have any newlines at the beginning.
Show exactly where this constructor came from.
Simplify a select_enum on an enum instruction.
Skip files that don't use dependency analysis.
Skip the generic parameter's context entirely.
So we just merge the effects from all of them.
So, a scanner for T will be generated as well.
Specialized emitter for Builtin.castReference.
Splits the critical edges between from and to.
Store that we have modified the self argument.
String literal conversion function to be used.
Substitute in the appropriate type for 'Self'.
Success must be at least as strong as failure.
TODO: Handle some of the llvm intrinsics here.
TODO: t5284137 add some tests for abortRequest
TODO: use the correct SILLocation from module.
Tack it on for consistency with other members.
Take the init of the last pattern in the list.
Target is right at the start of Node, mark it.
Temporarily deactivate the main array cleanup.
Test 1: Move a file over its parent directory.
The 'Self' type must be bound to an archetype.
The ArrayIter destructor will decRef the array
The PMBuilder only knows about LLVM AA passes.
The REPL prompt string for line continuations.
The Software shall be used for Good, not Evil.
The array must match get_element_addr's array.
The basic value-witness table for empty types.
The block is implicitly emitted and filled in.
The call is like a struct(buffer) instruction.
The callback gets the address of 'self' at +0.
The compare function for instruction operands.
The current stored values at memory addresses.
The default driver kind is determined by Name.
The destination BB must not have BB arguments.
The empty tuple type has a singleton metadata.
The error convention provides the result type.
The first thing we have to do is get the type.
The helper function will populate indexChains.
The immediate is 32 bits, sign-extended to 64.
The pattern and guard aren't allowed to throw.
The payload is initialized, now apply the tag.
The prof-counters are collected independently.
The result of attempting to resolve a witness.
The spare bits shared by all payloads, if any.
The string must not be an integer-like string.
The user is the unpin we are trying to remove.
The value-witness table for UnsafeValueBuffer.
The whole TV is loaded into a single SIMD reg.
There is one anonymous class per closure body.
These kinds are only similar to the same kind.
These modes have no frontend-generated output.
This block is copied from yy_switch_to_buffer.
This can occur for extensions to ObjC classes.
This could be for a breakpoint, stepping, etc.
This does not affect the methodNames() vector.
This file implements the Identifier interface.
This includes if we hit the timeout set below.
This is a blocking instruction for the rcroot.
This is a guess to the size of the info array.
This is called when we store into a BoxedCell.
This is done / so that we do not bloat SIL IR.
This is only required for ObjC interoperation.
This is the case for the function entry block.
This is the special "imported headers" module.
This is weird but required by sema apparently.
This label is used only to access EOF actions.
This method implicitly adds a null terminator.
This should always be true, so just assert it.
This should be filtered out earlier right now.
This var may be unused depending upon options.
This will make sure we produce an error later.
Throws XDebugError::EvaluatingCode on failure.
To have a parameter name here, we need a name.
Trace start of perform sema call, returns OpId
Track printed names to handle overlay modules.
Trim the completion list to the terminal size.
Try adding an "e" and look for that as a verb.
Try and guess for non-wsdl clients and servers
Tuple construction is simply tuple conversion.
Type implementation for non-fixed-size tuples.
Unfortunately, we don't have any of that data.
Unknown drilldown cases that need pointer type
Unresolved member: find the resolved overload.
Update current value with the converted value.
Update our internal state for this being gone.
Update result to point to relocated reference.
Update the base's location with the new array.
Update the instructions that touch the memory.
Use RValue's forward-into-initialization code.
Use different rules for types imported from C.
Use the first successor as the base condition.
Use this if the `len' is expected to be small.
Used to serialize the on-disk decl hash table.
Used to serialize the on-disk func hash table.
Usually zero, but sometimes a very low number.
Value types only have allocating initializers.
Verify that the encoding was actually minimal.
Verify that the pragma had the desired effect.
Verify that this method came from this module.
Verify we have enough data to match magic type
Walk into tuples to update the subexpressions.
Walk up through the chain of current contexts.
We also support nullable objects for the base.
We can just null it out since we're fatalling.
We can not prove the 2 locations do not alias.
We could also make this configurable if needed
We could not find a visible declared property.
We don't actually consume them in writeback().
We don't support nested types in generics yet.
We don't want to modify the CFG in SILCombine.
We don't want to sink instructions into loops.
We handle decReffing obj in fPushObjMethodImpl
We have the final values for our ini settings.
We need at least one case to have a raw value.
We only handle a single SILBasicBlock for now.
We only support NEAREST for MULTIPLE right now
We only want to look at explicit constructors.
We should be looking at the SDKSettings.plist.
We shouldn't get two synthesized conformances.
We skipped over the only VM frame, we're done.
We still model these specifiers as attributes.
We use null to represent a synthetic wildcard.
We'll clean this up when the old pass is gone.
We've already seen at least part of this base.
Write the input parameters into the temporary:
XXX: This should respect ini_get("precision").
You can't call this function from MINIT, sorry
`pos' must be a valid position for this array.
add the original filename for flattened traits
and here it means "this thing does not exist".
at least one 0xff is needed before marker code
autoload, and it writes part of the new actrec
builtins/systems always have a user of anybody
can't use xchg if one of the registers is SIMD
cancel the previous alarm if not triggered yet
code in trail, and vowels unless they separate
conditionallyUnreachable is a no-op by itself.
contains INI value of whether to use trans-sid
continue with the received result on the stack
createNominalType - Create a new nominal type.
delete files/directories that are only in dest
destroy_addr is a release of the entire value.
e.g., -1 means start with the last code point.
even position requiring a copy must be on edge
executes a query and returns an ODBCCursor obj
fetch zend object from zval "object" into "to"
final on classes marks all members with final.
gd 2.0: we support this rather thoroughly now.
if any base is volatile, the class is volatile
if there is only one branch left, return stmt.
implemented in runtime/ext/ext_hotprofiler.cpp
io_ss.c  Implements the Source/Sink interface.
isAscii flag for UTF8-encoded string literals.
just return if the converter is not activated.
lazy is not allowed on a protocol requirement.
load extension constants, classes and dynamics
mini hack: the parser sometimes relies in this
mysql connection from ext/mysql/mysql_common.h
nbytes passed for regularity, maybe need later
non-persistent check below will always succeed
not safe to continue after we delete ourselves
now the rest, first see if it becomes an array
offset of fpush (can get num_params from this)
prepareAccessorArgs will copy it if necessary.
proxy any URLs that not specified in ServeURLs
return the number of the rows in the resultset
safeRangeUnderApprox now holds the safe range.
set_sockaddr raises its own warning on failure
so the definition of dummy isn't optimized out
status holds the string size, or SQL_NULL_DATA
the images are meant to be the same dimensions
this is not really an error, so it is allowed.
ures_getByKeyWithFallback is a silly function.
valid as single byte character or leading byte
we're only guaranteed uniqueness of the class.
"require implements" is only allowed on traits.
'Self' is only a dynamic self on class methods.
'cur' is the method we're currently looking at.
'sh' if -CIA- or -CH, but not SCH, except SCHW.
(We need to allow for cases like (Int, Int32).)
(apply (thin_to_thick_function f)) to (apply f)
(implying its okay to clobber TypedValue.m_aux)
* 4 is for octal representation, + 1 is for NUL
...or it was synthesized into an imported type.
...unless we're supposed to replace it with ().
/ / *NOTE* This occurs in the same module as F.
/ Otherwise, return a (nullptr, nullptr) tuple.
/ Otherwise, we do a direct store of the value.
11) nextRetrans and prevRetrans are consistent.
2) Each block in the region has a different id.
2.0.16: clip to clipping rectangle, Matt McNabb
2.0.21: we don't reallocate memory we don't own
31 is the encoded register number for zr and sp
@objc existential types are okay Nothing to do.
@objc protocols do not have conformance records
@param size The character buffer size in bytes.
A CRTP layout class for foreign class metadata.
A local context is needed for parsing closures.
A lower bound is therefore always non-negative.
A pretty-stack-trace node for demangling trees.
A reference to storage from within an accessor.
Add a bunch of numbers to the map concurrently.
Add a temporary forward declaration for a type.
Add signature elements for the source metadata.
Add the 'self' parameter to the function types.
Add the decrement to the decrement to move set.
Addresses consist of a single pointer argument.
Adjust line and char if it's not small stepping
Adjust the result type for a throwing function.
Allocate a new cache slot and drill down to it.
Allocate the histogram/inverse colormap storage
And the StoreInst writes to the GlobalAddrInst.
And this is the entry block to the CFG pattern.
AnyPatterns (i.e, _) don't require any storage.
Apply primitive translation to the given value.
Are the getter and the setter in the same type.
Ask the runtime whether this is class metadata.
Assert that we copied the subclass suffix data.
Assume that it's a libmemcached behavior option
Assume that we don't need to reabstract 'self'.
Backpatch instances of __COMPILER_HALT_OFFSET__
Bail out if we didn't resolve method witnesses.
Be less specific about the previous definition.
Begins an MD5 operation, writing a new context.
Build a default initializer for the given type.
Build a demangled type tree for a nominal type.
Build the SILFunctionType for the vtable thunk.
But don't even trust 'throws' for autoclosures.
Bytecode instructions that must be interpreted.
CURLE_PARTIAL_FILE is returned by HEAD requests
Call the inline-assembly marker if we need one.
Call the witness that builds the array literal.
Camel case matches should have higher priority.
Cannot be more code points than bytes in input.
Captures at nonlocal scope are order-invariant.
Case where the input type is an exploded tuple.
Change the type to include the autoclosure bit.
Change uses in different basic blocks to undef.
Check and fold binary arithmetic with overflow.
Check for circular inheritance of the raw type.
Check that requirements are semantically valid.
Check that the given type is a legal SIL value.
Check that there is nothing preventing removal.
Check the module file's last modification time.
Check whether the source and destination alias.
Check whether this protocol conforms to itself.
Check whether we have a simple identifier type.
Claim the next inner result from the plan data.
Claim the next outer result from the plan data.
Classes don't fallback to the global namespace.
Cleanup any proxies in our retired proxy queue.
Clear tag bits out of the payload area, if any.
Code motion that hoists releases into diamonds.
Collect all uses that are calls to array.count.
Collect global variables for static properties.
Collect references to the protocol descriptors.
Collect the reserved and invoke pointer fields.
Common case is that we actually find the alias:
Comparison function for pending priority queue.
Complete the next completion stem in the cycle.
Compute insertion point within the basic block.
Compute the conformance for the inherited type.
Compute the flags to pass to swift_dynamicCast.
Compute the underlying type of the enumeration.
Concrete witness thunks get a special mangling.
Consequently, these must not be phi nodes (aka.
Constant fold extraction of a constant element.
Constrain the sources of an Assert instruction.
Construct a ConstantFP from a FloatLiteralInst.
Converge the BBSetOut with iterative data flow.
Convert the indirect result to a direct result.
Convert thick metatype to Objective-C metatype.
Create a basic block destination for this case.
Create the cache directory if it doesn't exist.
Create the extension declaration and record it.
Create the mangled name of our witness table...
Create the pointer struct from the raw pointer.
Curl SSL Version constants (CURLOPT_SSLVERSION)
Curl TIMECOND constants (CURLOPT_TIMECONDITION)
Decode a base 8 number up to 3 characters long.
Dependencies which go in the reverse direction.
Determine whether this type is known to be POD.
Determine whether we have the getter or setter.
Diagnose or defer a diagnostic, as appropriate.
Diagnose syntactic restrictions of expressions.
Different implementation is used by a subclass.
Different structs cannot be cast to each other.
Dig through the optionals in the from/to types.
Do a quick test before grabbing the write lease
Do not allow the entry block to be cloned again
Do not create any new specializations at Onone.
Do not prepend "hhvm." to these when accessing.
Do not walk into function or type declarations.
Do nothing for non-trivial non-reference types.
Do the first stack promotion on high-level SIL.
Do the second stack promotion on low-level SIL.
Doing so means redundant work in the best case.
Don't emit the jump if it would be unreachable.
Don't know how to duplicate these properly yet.
Don't log attributes of "self" in a constructor
Each chained call gets its own writeback scope.
Early exit if we're given the same two strings.
Either a Metadata* or a NominalTypeDescriptor*.
Either way, delete the instruction and move on.
Emit a comparison against an object and string.
Emit a single protocol witness table reference.
Emit an invocation of the specialized function.
Emit the appropriate call instruction sequence.
Emit the body of the field type accessor later.
Emit the definition for the given SIL constant.
Emit the immediate into the instruction stream.
Emit the initial value into the initialization.
Emit the witness table right now if we used it.
Emit the witness thunk and add it to the table.
Emits SIL instructions to create an enum value.
Ensure that the result cannot change in future.
Expand the packed bits to the destination type.
Explicitly add Transfer-Encoding: chunked here.
Express the relationship with a new constraint.
Extend current path to include next, then loop.
FIXME: Protect against broken standard library.
FIXME: The diagnostics here should be improved.
FIXME: This doesn't handle implicit properties.
FIXME: We could probably optimize this case too
Fall back to the normal deterministic ordering.
Figure out the context we're substituting into.
Figure out the instance type used for the base.
Figure out the string type we're converting to.
Figure out which buffer contains this location.
Filter window size (of affecting source pixels)
Finally generate calls to all custom functions.
Find all blocks reachable from the entry block.
Find an arc with max weight and merge its nodes
Find based on selector within the current type.
Find blocks associated with exception handlers.
Find the initializer and the SILGlobalVariable.
Find the local history of this macro directive.
Find the lookup table entry for this base name.
Find the microseconds that need to be truncated
Find the string interpolation protocol we need.
Finished iterating---we need to free the array.
For each class declaration in our V-table list:
For each user U of the alloc_existential_box...
For every indexed type, we generate its layout.
For functions, we need to form a complete name.
For large arrays, do a naive pre-check for OOM.
For now ignore functions with indirect results.
For now, add it if it wasn't set by the caller.
For parameter adjustments, dig out the pattern.
For relational constraints, match up the types.
Function takes no arguments and returns refType
Generic tuple value witness for 'destroyArray'.
Get ProtocolConformance for a replacement type.
Get or create a global Objective-C method name.
Get the method dispatch mechanism for a method.
Get the non-self parameter from the Clang type.
Gets the estimated integer constant of a value.
Global information about importing clang types.
Go ahead and initialize the substitution entry.
Grab the SILLocation and the new managed value.
Grab the file, use the current if none provided
Guard the inner type before we call the helper.
Handle SILArgument, SILArgument can invalidate.
Handle any attribute-specific processing logic.
Handle results of XXX_with_overflow arithmetic.
Handle stacks specially to be less pessimistic.
Handle subtype conversions involving optionals.
Handle the case of a promoted capture argument.
Handle the cases covered by each tag bit value.
Handling these is part of C++ interoperability.
Helper template for dispatching pre-visitation.
Here's an example from emitEnumElementDispatch:
Hoistable checks if we're willing to side-exit.
Holds a set of subpatterns after a global match
I guess the user can call dead() on the cursor.
I'll admit I didn't try to measure it though...
If any arguments are not objects, return false.
If any of the children were errors, we're done.
If false, this method is definitely accessible.
If it is not possible, then None / is returned.
If it's not a string or a MongoBinData, give up
If no alternate name is found, returns nullptr.
If no inferred types remain, skip this witness.
If not present, that type is implicitly "void".
If not, thread out through a bunch of cleanups.
If our argument is of trivial type, continue...
If t contains Uninit, replace it with InitNull.
If that's zero, go ahead and short-circuit out.
If the file contents are the same, we are done.
If the list is empty, always conservative scan.
If the next word is a plural suffix, add it on.
If the other state's value is blotted, skip it.
If the result is a tuple, we need to expand it.
If the result is invalid, don't cascade errors.
If the tuple element has a label, propagate it.
If the type variable is fixed, look no further.
If the type variables are the same, do nothing.
If the value is 0, the diagnostic prints 'foo'.
If there are generic arguments, apply them now.
If there are no valid captures left, then stop.
If this is the case, replace by a simple apply.
If we already have this information, return it.
If we are to filter out this result, do so now.
If we can just split the initialization, do so.
If we cannot find either of them, return false.
If we do have a non-trivial type, return false.
If we get to a release of the object, zap both.
If we have a '*', then this is an address type.
If we have a ':', this is a dictionary literal.
If we have a decl identified, refine the match.
If we have a name for this declaration, use it.
If we have a superclass bound, recurse on that.
If we have a superclass, invoke its destructor.
If we have already visited this user, continue.
If we have spare bits, pack tag bits into them.
If we saw no operators, don't build a sequence.
If we started with a metatype, it's a metatype.
If we succeed return the deserialized function.
Ignore _ObjectiveCBridgeable conformances in C.
Ignore any other decl-name productions for now.
Ignore non-same-type requirements in this pass.
Immediately switch to a different input stream.
In this case, nothing further needs to be done.
In-place cast decrefs the function call result.
Initialize the extra tag bits, if we have them.
Initializers cannot be found by dynamic lookup.
Insert a spill after the def-position in `ivl'.
Inspired by ext/standard/html.c:get_next_char()
Introduce a variable to reference the protocol.
It is ok to eliminate various retains/releases.
It is ordered *after* the locks in s_linkTable.
It might be an uninitialized property/constant.
It's not clear why writing an object file does.
Its ok to process the live ones more than once.
Jump over the self parameter in the Clang type.
Just dump the superglobals as specified via ini
Just in case the callee is a noreturn function.
Just use the most feature-rich C language mode.
Just zap the incorrect explicit specialization.
Keep track of the last StoreInst that we found.
Leave only the first / load and the last store.
Let IVE be the edge for the non-payloaded enum.
Likely case is that there was no break command.
Lines where source listing should start and end
Load the metadata reference at the given index.
Look for moves into r10 and keep r10val updated
Look through identity expressions, like parens.
MBR must not be live across control flow edges.
Make a first pass to get all the type metadata.
Make a setter if the behavior property has one.
Make it public, so that others can refer to it.
Make sure F has a linkage that we can optimize.
Make sure lhs's ptr kind is a subtype of rhs's.
Make sure we aren't duplicating history entries
Make sure we can reference ObjectiveC.Selector.
Make sure we have odd number of sequence exprs.
Make sure we've loaded a valid underlying type.
Map a cache entry to a result for this specific
Map the Clang attributes onto Swift attributes.
Map the convention to a runtime metadata value.
Map the parent of any non-generic nominal type.
Map the values for the duplicated header block.
Maps default witness table identifier to an ID.
Mark all CFG arcs within the region as covered.
Mark box addresses as captured for DI purposes.
Mark each of the listed parameters as non-null.
Mark this as the cached witness table for Self.
Match each of the witnesses to the requirement.
Maybe LLVM will be able to simplify it further.
Metadata caches are stored at negative offsets.
Move the foreign "self" argument into position.
Move this call to the outermost loop preheader.
NUL terminate, as every buffer is handled here.
No conversion: re-use the original result info.
No hit value means the breakpoint is always hit
No signs or inner parentheses are allowed here.
No splits found, can't produce this diagnostic.
None of the rest of these require deallocation.
None of the sanitizers work on Linux right now.
Nope, just whine to the user and let it through
Not necessarily /   an appropriate caching key.
Note that we are checking this conformance now.
Nothing interesting from the source expression.
Offset of a different type this type refers to.
Ok, at this point we know we have a terminator.
Okay, we have non-trivial initialization to do.
Okay, we need to insert the continuation block.
Okay, we're naturally emitting to an explosion.
One example is the overloaded member functions.
Only specialize functions in their home module.
Only used to look for callers by function name.
OpenCL types that don't have Swift equivalents.
OpenMP types that don't have Swift equivalents.
Opened existential types use a separate layout.
Other existentials use standard representation.
Other things can be captured if they are local.
Otherwise add the increment to the delete list.
Otherwise generate the thunk body just in case.
Otherwise remove the commented code completely.
Otherwise this is a read and write of the base.
Otherwise try and lookup a witness table for C.
Otherwise, diagnose this as an invalid capture.
Otherwise, move the constant over to the right.
Otherwise, put it next to the swiftmodule file.
Otherwise, recursively descend into the tuples.
Otherwise, the closure implicitly forms a call.
Otherwise, visit the representative of the set.
Otherwise, we have always have a valid payload.
Otherwise, we may be retaining something scary.
Otherwise, we need to use a fixed-sized buffer.
Otherwise, we treat it as unknown control flow.
Our return address was smashed by the debugger.
Output all the needed C++ forward declarations.
PERF_TYPE_HW_CACHE hw_cache_op, hw_cache_result
PHIs are always emitted with maximal explosion.
Parse an optional type annotation on a pattern.
Parse the leading boolean condition if present.
ParseState indicates the value we just handled.
Pass the function signature to code completion.
Personality routine address format and address.
Place the '.dynamicType' right before the init.
Preliminary support for .sil debug information.
Prepare to start translating this region block.
Pseudomains inherit the context of their caller
Push the return value of next()/send()/raise().
Push uninitialized nulls for missing arguments.
Put the header next to the primary output file.
RESILIENCE: this could be an opaque conformance
Read and instantiate the specialize attributes.
Recalculating apcStr from mcret avoids a spill.
Record the first method that has this selector.
Recover from the 'if let case' typo gracefully.
Reference storage types propagate the decision.
Regardless of the command loop result, we exit.
Register PHP function given in string argument.
Register PHP functions given in array argument.
Relax guards and record the ones that survived.
Remove this optional requirement from the list.
Replace checked_cast_br by branch to FailureBB.
Replace the 'self' parameter in the given type.
Replace the placeholder value with the new GEP.
RequestBodyReadLimit is int64_t and could be -1
Require that the given condition evaluate true.
Requirements of ObjC protocols don't need this.
Resolve a number reference into the tuple type.
Retain motion is a forward pass over the block.
Retrieving the results for all executed queries
Return / true if it is an erroneous code point.
Return the full source range of this parameter.
Return updated scan pointer as function result.
Returns nullptr if the key is not in the array.
Returns the xml node for the given stack frame.
Rewind to the first token of the accessor body.
Run the data flow to move retains and releases.
SSL terminated (but socket may still be active)
See AnalysisResult::collectFunctionsAndClasses.
Self is a curried argument and thus comes last.
Set flag before recursing to catch circularity.
Set of all ThreadInfos for the running process.
Set the destinations for 'break' and 'continue'
Should never get here or the buffer was invalid
Side exit if the static local is uninitialized.
Simple case: direct reference to a declaration.
Simple memory accesses cannot reduce refcounts.
Skip gyb comments that are line number markers.
Skip instructions that don't have side-effects.
Skip over a parenthesized argument, if present.
So that the optimization has a positive effect.
Some systems don't have the BFD_DECOMPRESS flag
Somehow, we managed not to find a return value.
Sort the m_blocks vector in reverse post order.
Special long value case for SIG_DFL and SIG_IGN
Split the text into context name and base name.
Split up the call to prevent template explosion
Stack depth should be 0 when entering a DV init
Start from the elementwise-canonical signature.
Start with the spare bit mask for all pointers.
Static assertions are an implementation detail.
Stay within bounds of both yycheck and yytname.
Store PHP source code for constant initializer.
Store a clang argument expansion into a buffer.
Store appropriate value inside the state local.
Strdup a raw char array using the bump pointer.
Subtract an uncurry level for captures, if any.
Such a load might be optimized away if inlined.
Suppress diagnostics in the presence of errors.
Suppress unused-variable warnings by "using" E.
Swift classes are objects in and of themselves.
TODO 6900503: consider making this thread-safe.
TODO: Handle substitutions and indirect results
TODO: Just change this into a partition method.
TODO: Ought to support captures in block funcs.
TODO: This can be fixed by extending DIBuilder.
TODO: This is a really trivial local algorithm.
TODO: Track lifetime markers for function args.
TODO: Type should be either integer or function
TODO: figure out right value for isKnownPrivate
TODO: refactor this code outside of the method.
TODO: try with cast(), get() to obtain a number
TODO: use "tinycc" on platforms that support it
Take care of formal indirect returns ourselves.
Take the list of unresolved entries to process.
Taken: retrieve the result from the wait handle
The ArrayIter destructor will decRef the array.
The base is passed at +0, so it isn't consumed.
The basic blocks are visited in a random order.
The box won't affect loadability or fixed-ness.
The common case: there is a single output file.
The context into which the subscript should go.
The current token is no valid hexadecimal digit
The depth of this currently-opened existential.
The destination must be the header of its loop.
The else branch does *not* see these variables.
The entry block must not have any predecessors.
The entry is keyed by the least derived method.
The load must be post-dominated by the builtin.
The main server will be stopped asynchronously.
The module value should never actually be used.
The ns argument selects which namespace to use.
The order of function parameters is as follows:
The original function has no direct result yet.
The pass is strictly for testing that analysis.
The receiver accepts ownership of the response.
The return value is known to be at least a Gen.
The simple case: just a single literal segment.
The source line used for the function prologue.
The string was already proved to be valid UTF-8
The target anchor is the function being called.
The type to which the imported type is bridged.
The uniquing structure for tuple type metadata.
The value requirement that triggered inference.
Then g() is evaluated and then the set happens.
There are some instructions besides the branch.
There can only be one of these per object type.
There is nothing special about the source type.
There must be a generic type with one argument.
There's only one such position, because of SSA.
Therefore the sign bit of a result is always 0.
These are only meaningful after we do dataflow.
These builtins don't care about their argument:
These can't appear on overridable declarations.
These don't have any extra implicit parameters.
This / helps generating the genset and killset.
This also determines whether it is a leap year.
This avoids creating a spurious _: () argument.
This does not discard the current input buffer.
This handles returns, suspends, and exceptions.
This is UIActionSheet's designated initializer.
This is currently only associated with structs.
This is included only for createLazyResolver().
This is not the right way to get output size...
This is only allowed on a single direct result.
This is only legal when debugger support is on.
This is the last loop level to continue out of.
This release for sure is not the final release.
This seems unlikely to affect real-world usage.
This should make our test results less verbose.
This should never happen, but handle it anyway.
This should take care of initializer with flags
This version performs Floyd-Steinberg dithering
This was using the implicit Variant(bool) ctor.
This way, we get rid of pass dependence on DCE.
This will also cause the runtime to lay us out.
This would invalidate a plain ValueUseIterator.
Try to demangle a child node of the given kind.
Try to find a unique inout argument in a tuple.
Try to load the dependencies file for this job.
Try to look up the state for the first pred BB.
Try to lookup insertion points for this region.
Turn off debugging while parsing other modules.
Two variants of each instruction are generated.
Unlink and redirect the outgoing pointsTo edge.
Until then, only promote to a heap object dest.
Update the callsite information for the callee.
Update the current funcd, if we have a new one.
Update the linkage of shared functions/globals.
Use the child node value if the child is alive.
Use the first Job's BaseInput as our BaseInput.
Validate the given pattern binding declaration.
Verify stack depth along all control flow paths
Verify that a witness table follows invariants.
Wait until the main thread is ready to join us.
Walk the TypeRepr to find the type in question.
We allow it here so that emitted code is valid.
We can always switch over to using a StringMap.
We can match a tuple pattern with a tuple type.
We can only break down an associated-type path.
We can uncomment later if we want this feature.
We can't set breakpoints in generated functions
We cannot import this as an initializer anyway.
We cannot open it, but we were able to stat it.
We consider global functions to be "type level"
We currently have no mechanism to reclaim this.
We don't allow inlined functions in the region.
We don't have anything else to do in this case.
We don't need the cached block offsets anymore.
We don't support adding non-static strings yet.
We have a chain in progress, but it's not done.
We just need to give up our retain count on it.
We know how to handle cond_br and switch_enum .
We know that self is a box, so get its address.
We know we're working with a lowered type here.
We may not execute the cond_fail speculatively.
We need the block argument of the DomSuccessBB.
We need the orinal image with each safe neoghb.
We need to change the calling convention later.
We need to make sure they have the right scope.
We need to put this where the first argument is
We only have tag bits if we spilled extra bits.
We only know how to split structs and tuples...
We only need to perform this check for classes.
We only support a maximum 32-bit instance size.
We tried to override a convenience initializer.
We use projection path to analyze the relation.
We use this lazily-filled SmallVector to do so.
We want to print a newline before doc comments.
We're not mapping this as a member of anything.
We've copied all the data out, so close it out.
adjusted stk addresses (sp+offset on each path)
an IntlCalendar was provided to the constructor
another test involving a 3-cycle plus one leaf.
anything, or overrides something that complain.
can't happen now without bigger problems before
can't use FUNCTION because it's a reserved word
check for dates before SDN 1 (Jan 2, 4713 B.C.)
check for soft line break according to RFC 2045
column is only valid if an input buffer exists.
decref after we hold reference to the exception
discard the part that has been already decoded.
dom_import_xml() is one way for this to happen.
end anonymous namespace / The main entry point.
ensure that there's no request-allocated memory
extract the address part of the content-id only
extracts the error msg from a particular handle
finish current transaction (commit or rollback)
fromType's overlapping elements are compatible.
if we have a cursor_id, we should have a server
indicate error if an empty command was received
just to be safe while subtracting unsigned ints
kinda weird this is on the wrapper not the file
libedit needs this to ensure correct allocation
lineno is only valid if an input buffer exists.
listAssignmentVisitLHS should have handled this
lookup qualified name in thread-local constants
make sure the map is left in a consistent state
mayDecrement reference count stops code motion.
number of antialised colors for indexed bitmaps
passing in nullptr would do the correct checks.
recursively move all wait handles blocked by us
retrieve kerning distance and move pen position
search, replace, and subject can all be arrays.
separator may contain multiple separator chars.
set sign for everything, including 0's and NaNs
softmagic - interpret variable magic from MAGIC
some defines for the different JPEG block types
specifies row-wise and the size of a single row
the string was already proved to be valid UTF-8
there's no support for relative time in ICU yet
this is used for creating images in main memory
unresolvable paths are all considered as unsafe
using chown() isn't portable if it is a symlink
walk the descriptor spec and set up files/pipes
'sh' in -TIA- or -TIO- else 'th' before H else T
/ Returns the address of the destination object.
/ This avoids intermediate closure construction.
/ This is not really something we need to track.
10000 is a magic value to indicate a host error.
2.0.16: thread safety (the font cache is shared)
@NSManaged properties must be written as stored.
@return the newly allocated buffer state object.
A helper function to add an outer direct result.
A helper function to return the depth of a type.
A type implementation for existential metatypes.
A type implementation for loadable struct types.
Abuse CovariantReturnConversionExpr to fix this.
Accept loads from the unowned-referenced object.
Acquire a cryptographic provider context handle.
Add the diagnostic the expected number of times.
Add to the breakpoint filter and the line filter
Add top-level potential archetypes to the stack.
Additional functions we might need to serialize.
All block types look like Builtin.UnknownObject.
All levels of class metatypes support subtyping.
AllocBox introduce their container result at +1.
Allocate Floyd-Steinberg workspace if necessary.
Allocate opaque storage for the callback to use.
Also adjust the affected char range accordingly.
Always strip the auto-closure and no-escape bit.
An assignment isRefable, but the rhs may not be.
An example of such an operation would be append.
Append the first argument name to the base name.
Append the prefix for constant propagation 'cp'.
Apply this transformation to an arbitrary value.
Archetype builders are stored on the ASTContext.
Are all available values identicalTo each other.
Assign the cleanup location to this instruction.
Assumes that 0 bytes will be missing in the end.
At -O0, create an alloca to keep the type alive.
BS2000 uses the EBCDIC char set instead of ASCII
Begins an SHA1 operation, writing a new context.
Bind local type data from the metadata argument.
Bonus if the match is the first or second token.
Both the key and value types need to be bridged.
Breakpoint displays the current file/line number
Build a TypeRepr from the head of the full path.
Build a result plan for the results of an apply.
Build the resulting (non-generic) function type.
Callers must cope with dependent types directly.
Cannot reference enum elements on non-metatypes.
Cast a generic argument to its specialized type.
Casting to a less-optional type can always fail.
Check for circular dependencies in our requests.
Check for the literal series of tokens (void*)0.
Check if it is legal to perform the propagation.
Check if the source is a subclass of the target.
Check if this escape can reach the current loop.
Check if this is the member we were looking for.
Check if two width constraints have any overlap.
Check if we have allocated a region for this BB.
Check if we have any more conversions remaining.
Check of this escape can reach the current loop.
Check that argument counts and convention match.
Check that the argument is passed as an in type.
Check that this is actually the response we want
Check the extra inhabitant cases if we have any.
Check the requirements on the generic arguments.
Check to see if it is in the request-local cache
Check to see if there is anything going on here.
Check to see if this is an impossible candidate.
Check to see if we had this expected diagnostic.
Check whether the given function is non-generic.
Check whether the property already got imported.
Check whether the return type is dynamic 'Self'.
Check whether there is a swift_bridge attribute.
Checks to see if it is time to sample the stack.
Claim and return all the rest of the characters.
Clone the component without cloning the indices.
Combine the values and store to the destination.
Common preconditions for Equatable and Hashable.
Compatibility with old code that looked in .mime
Complex cases involve unnamed local temporaries.
Compute layouts for the protocols we ascribe to.
Compute the edit distance between the two names.
Compute the explosion schema for the given type.
Compute the final release points of the closure.
Compute the linear position range of each block.
Computed captures should have been lowered away.
Construct the instance from the input arguments.
Contexts in which a guarded pattern can appears.
Convert a string containing C character escapes.
Convert the value back to a +1 strong reference.
Converts an internal token ID to a user token ID
Convience function around the MD5 implementation
Copies into the alloc_stack live range are safe.
Copy the existing selector pieces into an array.
Create a reference cast, forwarding the cleanup.
Create a single aggregate alloca for explosions.
Create a temporary base for relative references.
Create a variable to store the underlying value.
Creates a proxy and threads needed to handle it.
Currently we only accept enums as result values.
Currently, let's use the breadth-first strategy.
Cygwin uses the default BFD linker, even on ARM.
Decode the ordering argument, which is required.
Default cases for cleaning up as we exit a node.
Derive a 'hashValue' implementation for an enum.
Describes the relationship between the operands.
Describes the result of checking a type witness.
Deserialize all WitnessTables in all SILModules.
Destroying an array of trivial types is a no-op.
Destructure the buffer into per-element buffers.
Determine the accessibility of this conformance.
Determine the selector of the overridden method.
Determine the setter's element type and indices.
Diagnose an override for potential availability.
Dig out some of the fields from the conformance.
Do an exact match if no archetypes are involved.
Do not annotate references to unavailable decls.
Does this value escape anywhere in the function.
Don't need to dynamically calculate this offset.
Don't put DefLabel in a block with a BeginCatch.
Don't try to fill the buffer, so this is an EOF.
Drop a single newline character from the buffer.
Dumps the reductions of set of memory locations.
Each swift_once should synchronize on the token.
Eagerly chop a skipped parameter off either end.
Either we did a decref, or the value was static.
Emit a boolean comparison against two constants.
Emit a call to do an 'allocateBuffer' operation.
Emit a call to do an 'assignWithCopy' operation.
Emit a call to do an 'assignWithTake' operation.
Emit a cascading sequence of type checks blocks.
Emit a protocol witness table for a conformance.
Emit a witness table for a protocol conformance.
Emit an error, but do not discard the attribute.
Emit the access function for this witness table.
Emit the block header into a block storage slot.
Emit the case body into the predecessor's block.
Emit the jmp target into the instruction stream.
Emit the new method that handles the memoization
Enables the breakpoint at the given stack level.
Ensure that we restore the parser state at exit.
Enum case constructor references are open-coded.
Environment variables the idekey is grabbed from
ErrorStruct is currently opaque to the compiler.
Evaluate and discard the side effect if present.
Even that has never been tested according to DB.
FIXME: Could handle inherited conformances here.
FIXME: Eventually, deal with multiple overrides.
FIXME: Implement once Complex is in the library.
FIXME: Map over source ranges in the diagnostic.
FIXME: This is a bug in the SIL deserialization.
FIXME: This is not an aggressive implementation.
FIXME: This is only really needed for debugging.
FIXME: This is supposed to be a short-term hack.
FIXME: Types that can be mapped, but aren't yet.
FIXME: handle pointers and fields of atomic type
FIXME: hphpd can be initialized this way as well
FIXME: suggestPotentialOverloads should do this.
Fall through to the trivial-implementation case.
Figure out what type the constraints decided on.
Figure out what we're actually required to pass:
Finally, instantiate object and call constructor
Finally, load the submodule and make it visible.
Find all the predecessors before the SSA update.
Find out whether this sandbox is being debugged.
Find the "best" constructor with this signature.
Find the conformance information for a protocol.
Find the substitution info for the witness type.
Find top-level declarations with the given name.
First resume is always next() which pushes null.
First, satisfy any associated type requirements.
For a forced cast, force the required optionals.
For anything else, the object is always greater.
For arrays, this will return an array of values.
For each entry in the regex array, get the entry
For imported classes, use the ObjC class symbol.
For member variables, this access is done w.r.t.
For now, just skip anything that's an interface.
For now, just use a generic word-chunked schema.
For sub-decls, all extensions should be printed.
Force standard library to be loaded immediately.
Force the r-value into its context if necessary.
Force the value into the temporary if necessary.
Forward just the specialized argument right now.
From here on, we only handle members of classes.
Function: gdAffineScale Set up a scaling matrix.
Generate a code to invoke the bridging function.
Generators don't support returning by references
Generic tuple value witness for 'allocateBuffer'
Generic tuple value witness for 'destroyBuffer'.
Generic tuple value witness for 'projectBuffer'.
Get a list of SerializedModules from ASTContext.
Get or create an Objective-C selector reference.
Get parent's equivalent property, if one exists.
Get the SIL subtypes of the returned tuple type.
Get the type used to initialize the existential.
Given an AST type, load its value witness table.
Go down our PAs until we find the referenced PA.
Goes through the buffer sending 4K byte batches.
Grab the monetary grouping data out of the array
Handle class 'Self', which is just a class type.
Handle symbols marked as explicitly unavailable.
Handle the case when the payload has no storage.
Helper function to convert from Type to SILType.
Helper functions for collection style iterators.
Helper template for dispatching post-visitation.
Here, both source and destination have payloads.
Holds the entire state of the reentrant scanner.
If F is a declaration, it has no body to emit...
If a declaration has already been bound, use it.
If a defaulted type witness failed, diagnose it.
If a retain is found outside the loop ignore it.
If all SILValues have been set, we are complete.
If any entries were superseded, remove them now.
If asked to skip overrides and witnesses, do so.
If copy is true, we also copy the data to stdout
If it was invalidated, then don't bind the jump.
If its Nullptr, we need to DecRef the old value.
If nullability is available on the type, use it.
If only the width matches exactly, do a bitcast.
If our call does not have guaranteed self, bail.
If signed less than zero, we have a valid value.
If terminator instruction can block the RC root.
If that's the case, just skip this optimization.
If the best method was from a protocol, keep it.
If the condition fails, jump to the CondFalseBB.
If the element changed, rebuild a new ParenExpr.
If the enum case has no bound value, we're done.
If the property is already settable, we're done.
If the set changes, reschedule that predecessor.
If the tag indicates a payload, then we're done.
If the value type cannot be bridged, we're done.
If there was an explicit arg for this, claim it.
If there was no previous value, start from zero.
If they are textually the same, don't show them.
If this instruction is not a release, skip it...
If this is an "uninteresting picture" ignore it.
If this is an accessor for something, ignore it.
If this is an out-parameter, it is like a store.
If this is an union, use the first union member.
If this is the first requirement, take its name.
If this is the first result we found, record it.
If this type variable has a fixed type, skip it.
If we already found an unbound type, we're done.
If we already have a reference, it's not unique.
If we already saw a class requirement, complain.
If we didn't bail out, do post-order visitation.
If we fail, we found an unreachable block, bail.
If we have a definition already, just return it.
If we have a setter, rectify it with the getter.
If we have a substitution for this type, use it.
If we have too many generic arguments, complain.
If we need to use Objective-C allocation, do so.
If we're coercing to an rvalue type, just do it.
If we're in a nominal type, just query the type.
If we're out of colors, go for the closest color
If we've resolved to an associated type, use it.
If were decremented, insert the insertion point.
If what we found is a plural suffix, keep going.
Ignore it unless the type itself is interesting.
Ignore protocols that don't have witness tables.
In JIT mode these are manually registered above.
In PHP 7 mode handling of null types is stricter
In a similar manner, insert conservative ranges.
In the future attempt to recursively strip here.
In the success path, emit the body of the while.
In this case some semantic calls can be hoisted.
In this case, no external initializer may exist.
In this case, we can't move the release past it.
Initialize a variable of reference-storage type.
Inputs are contravariant, results are covariant.
Insert a debug intrinsic into the current block.
Insert empty syntax map data for replaced lines.
Instead of the address we pass the loaded value.
It isn't valid to fall off into the normal flow.
It must be the same type as LoadTy if available.
It will list only the parameter types as guards.
Iterate through all files in the cert directory.
Just construct the enum directly in the context.
Just use the generic signature from the context.
Keep generated code identical without randomness
Keep track of some information about a variable.
Keep track of which elements have been "merged".
LLVM will eventually remove unused declarations.
Lazy var should not have explicit getter/setter.
Leave a zero placeholder to be filled at runtime
Link anonymous closure params of the same index.
Load a module referenced by an import statement.
Loads the "XDEBUG_CONFIG" environment variables.
Lock in this index chain and deal with this exp.
Look for a conformance to _ObjectiveCBridgeable.
Look for a safe mark_dependence instruction use.
Look for parent constructor other than 86ctor().
Look for the constructor or enum element to use.
Look up the state associated with I's operand...
Look up the state associated with its operand...
Lookup the required function in the Target type.
Magic contexts I took from assignment expression
Make a table of all the constants on this class.
Make sure all the expected diagnostics appeared.
Make sure opaque values are uniquely-referenced.
Make sure that we skip past any dead successors.
Make sure the condition comes from a select_enum
Make sure the whole thing is a valid identifier.
Make sure we release later if we received at +1.
Make the error-limit table if we didn't already.
Map vector types to the corresponding C vectors.
Mark all remaining deferred commands as skipped.
Merge in the state of the successor basic block.
Minified versions of nativeDataInstanceCtor/Dtor
Minimize the set of protocols composed together.
Multiple return values are returned as a struct.
No copyright info was found in the original bdf.
No mangled parameters means we have exactly one.
No need to add storage for zero-width bitfields.
No need to continue scanning after deallocation.
Non-nullable pointers can't be zero-initialized.
Non-payload cases project to an empty explosion.
Not ideal but better than weird space alignment.
Not worth presizing or otherwise optimizing for.
Note that it doesn't count the space for itself.
Note that we only tell the server to break once.
Note: this may trigger merging of content nodes.
Now that we've inlined some functions, clean up.
Ok we have a function ref inst, grab the callee.
Ok, now we know that we have a back edge region.
Okay, start processing the parameters explosion.
Okay, the getter is done, create the setter now.
On Darwin the linker ignores the __LLVM segment.
Only F-S dithering or no dithering is supported.
Only instance members of classes can be dynamic.
Only instance properties can be 'IBInspectable'.
Open up the generic parameters and requirements.
Operand is outside the loop or marked invariant.
Operand of the existential_metatype instruction.
Operators cannot use these implicit conversions.
Other kinds of metadata don't cast to AnyObject.
Otherwise, apply the mask to the existing value.
Otherwise, classify the function implementation.
Otherwise, insert a retain_value on the payload.
Otherwise, it is an RC user that our user wants.
Otherwise, just move the IP to the return block.
Otherwise, we have a statically-dispatched call.
PHP7 uses the IEEE definition (+/- INF and NAN).
Packing the TV type and data into two registers.
Parse a generic parameter list if it is present.
Parse substitutions for specialized conformance.
Parse the digit sequence into an argument index.
Parse the opened existential ID string in parens
Patterns use the pattern type and no adjustment.
Pointer to the log entry which pushed this frame
Pop the SIL TypeConverter's generic context too.
Prepare a new tuple to hold the shuffled result.
Primary entrypoint for the debugger from the VM.
Print other types as their Swift representation.
Push a cleanup to deallocate the local variable.
Ranges and uses were generated in reverse order.
Record that we depend on the type's conformance.
Record the component of each of the constraints.
Recurse to satisfy any unsatisfied dependencies.
Recursively look at all uses of this definition.
Recursively move all wait handles blocked by us.
Recursively visit all the descendants of Parent.
Redefine yyless() so it works in section 3 code.
Reject 'destructor' functions outside of classes
Reject generic parameters with a specific error.
Remove any constraints that were generated here.
Remove implicit conversions from the expression.
Remove the constraint from the constraint graph.
Remove the declarations we temporarily inserted.
Replace the loaded value with our running value.
Require two function types to be ABI-compatible.
Reserve the r2 TOC register to avoid changing it
Reset the currently-active set of substitutions.
Reset them to UnresolvedTypes for safe measures.
Resolve the type declaration to a specific type.
Restore type metadata bindings, if we have them.
Return an existing specialization if one exists.
Return the DIFile that is the ancestor of Scope.
Return the address of a nominal type descriptor.
Return the instance type or null if not set yet.
Return the required SpillState coming into inst.
Return the size reported by the variable's type.
Return the start of the location's source range.
Returns a metadata reference for a nominal type.
Returns the address of a value-witness function.
Retype destinations of the label if we had args.
Reuse our cached list of imports if we have one.
Reverse to get a path from base to most-derived.
Rewrite darwinX.Y triples to macosx10.X'.Y ones.
Rewrite to another register if it's just a copy.
Run the devirtualizer, specializer, and inliner.
Runs a command and gets the first line of output
Runtime typechecking for IRInstruction operands.
Save the locator we're using for the expression.
Save the type-checked expression in the pattern.
Schedule it for final cleanup on another thread.
See first if the entire repr resolves to a type.
See notes in update_box about scaling distances.
Set the destinations for 'break' and 'continue'.
Set the lowered explosion for the self argument.
Set up a "catch" block for when an error occurs.
Set up the value for redundant load elimination.
Sets up an initialization for the allocated box.
Should never happen (Attr::Static check in ctor)
Skip potential zero-extend if we know the value.
Special headers that are not prefixed with HTTP_
Specialized emitter for Builtin.reinterpretCast.
Start tracing, then grab the current begin frame
Start with an empty image information structure.
Stash this in the ASTContext for later emission.
Steady state, its probably already in the cache.
Stop the sandbox thread, and wait for it to end.
Store the conformance and record the dependency.
Store the discriminator for the no-payload case.
StrideofNonZero always returns positive results.
Strip off any non-argument instructions from IV.
Switch to a phplogue context to enter the catch.
TODO(9755792): Ensure APCFileStorage is enabled.
TODO: MCAST_* constants and logic to handle them
Table with characters for base64 transformation.
Tabulate the strings for each column, row-major.
Take over XPC's UINT64 to mean SourceKitD's UID.
Take some bits off of the bottom of the pattern.
Take that result and inject it into an optional.
Tends to be less accurate as distance increases.
The ABI-passed type will still be mixed/Variant.
The adjustment index, for parameter adjustments.
The argument is either a ParenExpr or TupleExpr.
The arguments need not already / be of i8* type.
The array value returned by the allocation call.
The assumed execution length of a function call.
The call is a buffer allocation, e.g. for Array.
The call node should still be marked as explicit
The cast loads directly from the source address.
The code requires a 32-bit integer type, though.
The command failed, try to find an error message
The constructors are only found on the metatype.
The entry block starts with a DefFP instruction.
The event queue overflowed, so all bets are off.
The factored exit list contains unique elements.
The function containing the initialization code.
The getter selector is the property name itself.
The index of this child, used to project it out.
The interesting cases are already handled above.
The locations where the error started and ended.
The message is only valid for the first subexpr.
The metaclass pointer will be instantiated here.
The outer columns before the specialized column.
The parameters which go into this tuple element.
The payload case gets its native representation.
The raw type should be the first inherited type.
The record is followed by the substitution list.
The reference to Self occurs in the result type.
The result is converted from indirect to direct.
The result type is the type we're converting to.
The rules are different from normal conversions.
The simple case: check if it is a "cond_fail 1".
The three output values will always be modified.
Then for each exiting region ER of the Loop L...
There are several reasons this loop can execute:
There shouldn't be anything interesting in them.
These conventions leave the formal result alone.
They don't participate in the ordering relation.
This array lists the candidate colormap indexes.
This assert just makes sure they don't overflow.
This block is copied from hphp_switch_to_buffer.
This code should not be touching BBIDs directly.
This file implements dumping for the Swift ASTs.
This file implements the GenericSignature class.
This is a variadic template, so sanity check it.
This is actually "wrong" for bools, but it works
This is bad, only one self.init call is allowed.
This is basically just for assertions right now.
This is for historical reasons from libmemcached
This is out of line so the debugger can find it.
This is the first class that declares the method
This is the first class to declare this property
This is the general purpose conversion function.
This is the main entry point for the use walker.
This puts complete items at the end of our list.
This record is not part of the GenericParamList.
This should really only happen during debugging.
This stub is hot, so make sure to keep it small.
This switch was never executed during profiling.
This table is mutable as well since its a cache.
This will load if the value is not address-only.
Thus, EmptyArray::IterRewind() is not reachable.
Too bad C++ doesn't have nice Swift-style enums.
Track the AST location of the generic arguments.
Truncated back to the same bits we started with.
Try to load it while we're not holding the lock.
Try to mangle the entire name as a substitution.
Try to receive finished events without blocking.
Tuples are ABI compatible if their elements are.
Type aliases don't have requirements themselves.
Typed access based TBAA only occurs on pointers.
Types cannot be defined in a protocol extension.
Unnamed entities cannot be found by name lookup.
Unnamed parameters must be written as "_: Type".
Unreachable blocks don't matter to the analysis.
Unsettable storage decls always produce rvalues.
Until we reach the top of the class hierarchy...
Update the callee information for this function.
Update the method type with the new result type.
Update the size and alignment of the aggregate..
Usage: (gdb) call phpbreak("idx") (gdb) continue
Use the extra inhabitants mask from the payload.
Use the singleton param info we prepared before.
Verify that all types match the overload filter.
Verify we have a single integer or pointer type.
Visit the protocols in the order we established.
Vptr struct supports fancy x64 addressing modes.
Walk down to the base NormalProtocolConformance.
Walk the Dom tree in search of a defining value:
We can safely handle anything else as an escape.
We can't look at the request locals then, as: 1.
We depend on having resolved the inherited type.
We don't actually want to "yield" anything here.
We don't know how to handle this specialization.
We emit these as part of the PatternBindingDecl.
We handle all other instructions conservatively.
We have already checked that the operands match.
We have an exit for Foo(), but we were in Bar().
We have copied the threaded block into the edge.
We have either no matches or an ambiguous match.
We have to construct this generic function type.
We know from the lexer that this is all-numeric.
We might have added internal control flow above.
We need to cleanup the MatchedRelease on return.
We only need materializeForSet in type contexts.
We return ints (and, sometimes, actual doubles).
We should really just have a PatternBindingStmt.
We should retain the associated type throughout.
We shouldn't be inlining profiling translations.
We sometimes want to inline this slow path, too.
We take bits starting from the most significant.
We thus take an optional of the properties type.
We treat the condition as part of the true args.
We want to inline away as much of this as we can
We will inline the original function as a thunk.
We will need to delete the instruction later on.
Whatever is the last value is what should be set
Where nullability information should be printed.
Whether this type variable has literal bindings.
Witness methods have some extra parameter types.
Wraps a dot node label string to multiple lines.
Write out whether or not the image is interlaced
XXX validate that this is a lossless conversion.
You can get this if you cast an array to object.
__set takes 2 args, so it uses its own function.
apache rewrite rules don't require initial slash
as is the end, so the line never cuts the window
assert_impl already defined in util/assertions.h
called from the verifier so m_cls is not set yet
can't be converted to an int: match default case
can't happen know without bigger problems before
check for dates before SDN 1 (Nov 25, 4714 B.C.)
check that exp starts with a file or method name
checkForForbiddenPrefix is for testing purposes.
clear all the sub levels and mark all slots NULL
content_length is a reasonable nonnegative size.
couldn't/wouldn't detect tag type, assume string
create an entry for each column of the resultset
currently letting libxml2 set the version string
delete mismatched types so to copy over new ones
dont allow leading : without another : following
draw_bitmap - transfers glyph bitmap to GD image
enabling mutex profiling, but it's not turned on
exit without an expression is treated as exit(0)
filter jumps to prologues of other funcs for now
flags are not used by MemoProfiler::MemoProfiler
for each block after start, in reverse postorder
for internal use by copyStatic() and copyMixed()
for php_memnstr, used by php_stream_get_record()
guarantee our math with kLi64InstrLen is working
hack to get LLC counters on perflab frc machines
handle any left overs of files without new lines
if we find a semicolon, then it's not just a DSN
ignore sequences of consonants with same soundex
is "interesting" (see below), conservative scan.
lseek instead of seek to be consistent with read
m_op is null if this object is directly created.
main entry didn't match, flush its continuations
mark the object at p, return true if first time.
match is at start of string, return empty string
no point in continuing if we can't open the file
non-methods (which only happens with operators).
offset to next ifd (points to thumbnail or NULL)
or it should be UnicodeScalarLiteralConvertible.
parseStmtThrow / / stmt-throw /   'throw' expr /
path outside document root or / is document root
project_box of captured boxes can be eliminated.
put down forbidden flag since we are redirecting
re-enters to call getInstanceKey() in some cases
rely on opendir failing for nondirectory objects
repo litstrId is checked on load then discarded.
return false if a callback has already been set.
set keyCount to 1 if an invalid string is passed
shouldn't happen, but keep the code here anyway.
so it is not seen as "unused" in release builds.
so this means "I just gave you compressed data".
so we don't have to decompress during sendImpl()
special case for years, because of leading zeros
starting a new format specifier, reset variables
static handlers delegating work to instance ones
this order must match the conversion table below
update proxy's sandbox info from what is on file
use read instead of fread to handle EOL in stdin
visit each tmp, assign 1 or 2 registers to each.
within cell range so no contribution to min_dist
'catch' is terminated with a brace and so cannot.
(An ObjC class type wouldn't be const-qualified.)
(Setting up module output will be handled below.)
(Such as a chain of binary operator invocations.)
- Each fault or catch entry point begins a block.
- HAS_COPY_DISPOSE unless the capture type is POD
/     * Contains offsets into CHUNKS and STRINGS.
/ This function is modeled after readSILFunction.
/// The amount to copy from the pattern in words.
7) All blocks are reachable from the entry block.
@param b a buffer created with yy_create_buffer()
A 'public' typealias can have an 'internal' type.
A copy_addr is like a 'store (load src) to dest'.
A direct call to a ClosureExpr makes it noescape.
A reference to a member found via dynamic lookup.
A type implementation for non-fixed struct types.
A type implementation for resilient struct types.
AFrame and AStack can contain multiple locations.
Absorb integer comparisons against constant zero.
Add a note describing why we need an initializer.
Add an entry to the table so we don't look again.
Add entropy to s2 by calling gettimeofday() again
Add the children in the dom-tree to the worklist.
Add the payload value to the shifted payload tag.
Add this request to the stack of active requests.
Additional length to account for loop iterations.
Alloc refs always introduce new references at +1.
Allocate the concrete value inside the container.
An action is a negative number between -1 and -9.
An argument is converted from indirect to direct.
And modules don't come with SourceLocs right now.
And we also need to kill `last', to update preds.
AnyObject only requires that the type be a class.
As a precaution, bail out if we have a self-loop.
Ask the Objective-C runtime to name ObjC classes.
Assign all of the member variables appropriately.
Assume at least two args because of PHP signature
Assumes that scopes contains no duplicate entries
Attempt to merge Other into this ref count state.
Bail if this address is stored to another object.
Bail out if we couldn't find the method or __call
Basic layout and common operations for box types.
Be conservative and return that V1, V2 may alias.
Beyond that, this is identical to headers_list().
Bind local type data from the metadata arguments.
Block pointer types are mapped to function types.
Bridge a native function to a block with a thunk.
Build a Substitution vector from the conformance.
Build the bitfield getter and setter using Clang.
Build the field type vector if we didn't already.
But for input(), there's no matching to consider.
But we default to 1 second for historical reasons
CR_NEW_STMT_METADATA makes the statement unusable
Cache of the analysis whether a loop is safe wrt.
Cannot merge irSPOff state, so assert they match.
Canonicalize and lower the l-value's object type.
Canonicalize the determined sign bit on the left.
Casts to archetypes thus must always be indirect.
Check conversion from iterator to const_iterator.
Check for alternations whenever we fail to match.
Check for special constraints on llvm intrinsics.
Check if Start can use Op in an ARC relevant way.
Check if name conflicts with a reserved typehint.
Check if the function has any 'owned' parameters.
Check if we were the last request on this channel
Check that T conforms to all inherited protocols.
Check that the argument is passed as an out type.
Check whether an expression pattern is satisfied.
Check whether this type conforms to the protocol.
Check whether we already know about the property.
Check whether we recursively imported this method
Check whether we've created the function already.
Classes are represented as DW_TAG_structure_type.
Cleanup to destroy an initialized 'var' variable.
Coerce each tuple element to the respective type.
Coerce the then/else branches to the common type.
Collect property names from the class definition.
Compositions of special protocols aren't special.
Compute insertion point generated by SILArgument.
Compute the reference to the generic constructor.
Compute the set of member substitutions to apply.
Configure thread.prof.active for the main thread.
Conservatively assume that an overflow can happen
ContEnter pops a cell and pushes a yielded value.
Context is the DeclContext used / for the lookup.
Convert 4 bytes of input to 2 * 3 bytes of output
Copy counted types correctly, especially RefData.
Copy of CheckedCastBrJumpThreading::FailurePreds.
Copy of CheckedCastBrJumpThreading::SuccessPreds.
Copy the edge values overwriting the edge at Idx.
Copy the rest of the data from the derived class.
Copy valid bytes found so far as one solid block.
Create a call to Swift._unimplemented_initializer
Create a lexer that cannot go past the end state.
Create a local variable to capture the generator.
Create an empty body for the default constructor.
Create prefix string literals used in Options.td.
Create the logic for calling a throwing function.
Create unique temporary directory for these tests
Deal with possible promotion to stdClass or array
Deallocate the source temporary if we needed one.
Deallocation is also okay, as are DebugValueAddr.
December 4, 1999  Ported to libgd by Pierre Joye.
Decide whether to show the desugared type or not.
Default implementation: Treat as empty container.
Default witness thunk or concrete implementation:
Defined out of line to break circular dependency.
Delete the corresponding entry from m_watch2Node.
Derive the summary graph of the current function.
Determine how we match up the input/result types.
Determine the module and Swift declaration names.
Determine what kind of diagnostic we're emitting.
Determine whether this is a parameter adjustment.
Determine whether we have a suitable return type.
Determine whether we should drop the preposition.
Determine which blocks the value can escape from.
Diagnose expected diagnostics that didn't appear.
Diagnose this, and recover as if they wrote that.
Dig out the fixed type to which this type refers.
Dig out the parameter tuple for this constructor.
Disables the breakpoint at the given stack level.
Discard all PHP exceptions pending for this frame
Do format conversion placing the output in buffer
Do this first so other methods can overwrite them
Does not inline functions with defined semantics.
Don't bind REPL metavariables to simple declrefs.
Don't leave anything around in vm they could use.
Duplicate subject string for repeated replacement
Each round is a set of 4 parallel quarter-rounds.
Either read annotation from file or print inline.
Emit a call to do a 'deallocateBuffer' operation.
Emit an lvalue that refers to the given property.
Emit it as global variable of the current module.
Emit the call target into the instruction stream.
Emit the protocol conformance list and return it.
Enable backtracing through PHP frames (t9814472).
Encoding is 0x11110aaa 10bbbbbb 10cccccc 10dddddd
Ensure that we don't get tok::code_complete here.
Ensure the variable is at least forward-declared.
Enter a cleanup to deallocate the given location.
Evaluate the subject once and stash it in a local
ExitException is fine, no need to show a warning.
Expand this node into an llvm::coverage::Counter.
Expanded data destination object for stdio output
Expect to display as their stringified classname.
Expected types of the code completion expression.
Explode the tuple into individual managed values.
Expression type checking listener for conditions.
Expressions cannot affect a function's signature.
Extract the arithmetic operation from the Branch.
FIXME(thread-safety): lock the whole AST context.
FIXME: Better location info for both diagnostics.
FIXME: Collapse this check into the second check.
FIXME: Default argument expression, if available.
FIXME: Does not respect visibility of the module.
FIXME: Implement remaining enum layout strategies
FIXME: InterruptedConnectionHandler will go away.
FIXME: Make sure this table is complete, somehow.
FIXME: Not knowing what went wrong is pretty bad.
FIXME: Put the error message in the crash report.
FIXME: Submodules don't get sorted properly here.
FIXME: Swift diagnostics currently have no flags.
FIXME: The diagnostics here should be improved...
FIXME: This algorithm has quadratic memory usage.
FIXME: This could likely be implemented directly.
FIXME: This is not working well for decl parents.
FIXME: should have a semantic context for groups.
FIXME: should warn about unexpected keyword kind.
FIXME: this is wrong, we should try to sub-group.
FPassV is a no-op when the callee expects by ref.
Fast case: copy from a known address in the Class
Fast path for classes with no declared properties
Fault and catch protected region starts in order.
Feed the corresponding result into the phi nodes.
Figure out the class in which this method occurs.
Figure out what kind of constructor this will be.
Figure out what types the constraints decided on.
Figure out where to finish removing this element.
Figure out where to start removing this argument.
Fill in the pointer from the metadata to the VWT.
Filter out designated initializers, if requested.
Finally, compute the proper type for the closure.
Finally, perform the redundant load replacements.
Find all the epilogue releases for this argument.
Find some Decl that contains the reference range.
Find the ARC Users and the final retain, release.
Find the Clang module unit that stores the class.
Find the foreign error convention if we have one.
Find the getter indices and make sure they match.
Finds the specified field of the specified class.
First read in the parameter counts at each depth.
Fix up the EmitterVisitor's table of jump targets
Fold LHS and RHS together and declare completion.
Fold the dependent member types within this type.
For NSError**, take ownership from the qualifier.
For arrays, we fall back on the Variant machinery
For each increment in our list of new increments.
For forward jumps, we store information about the
For more information, see rdar://problem/18499385
For non-JIT'd code, the linker will do it for us.
For owned results, the value is already retained.
For purposes of Type equivalence, NaNs are equal.
For really long matches, we'll give a high score.
For value members, look at their type signatures.
Force immediate writeback to the error temporary.
Foreign classes cannot conform to objc protocols.
Foreign entry points shouldn't appear in vtables.
Forward any field extracts to the new allocation.
FramePtr/StkPtr-typed tmps may live across calls.
Gather the generic parameter types at all levels.
Generic tuple value witness for 'assignWithCopy'.
Generic tuple value witness for 'assignWithTake'.
Get lowered formal types for callback parameters.
Get the NewAggregateBuilder associated with Node.
Get the context as a PrintStructureKind, or None.
Get the context generic parameters for an entity.
Get the least common ancestor across both states.
Get the value we're testing, which is a function.
Go through uses of the memory allocation of AI...
Guard doesn't allow labels, so no break/continue.
Handle special abstraction differences in "self".
Hoist loop invariant code out of innermost loops.
Identify individual checks that appear hoistable.
If `ivl' contains its def, try a coalescing hint.
If false was returned, we should skip the callee.
If it is known to have swift metadata, just load.
If it wasn't used in any fulfillments, remove it.
If it's a value reference, refer to the metatype.
If it's of a managed object type, it is (retain).
If it's some kind of keyword, it can't be mapped.
If moving the declaration can help, suggest that.
If the BB is in the worklist, null out its entry.
If the base is a protocol, enumerate its members.
If the caller gave us a cache to use, check that.
If the cast failed, we can't resolve the pattern.
If the conversion type contains no info, drop it.
If the declaration is const, consider it audited.
If the extended type is generic or is a protocol.
If the file/line combo is invalid, throw an error
If the load yielded null, emit the type metadata.
If the names don't match, we may have a conflict.
If the type isn't actually dependent, we're okay.
If the underlying type was validated, we're done.
If there is a didSet, it will take the old value.
If there is no colon, we have a nullary selector.
If there is no getter, there's nothing we can do.
If there is no log file open then open a new one.
If there was no type declaration, synthesize one.
If there's a foreign error parameter, fill it in.
If there's no abstraction difference, we're done.
If they weren't, we'd have a chicken-egg problem.
If this is a "high" UTF-8 character, validate it.
If this method comes from Objective-C, ignore it.
If this type is parenthesized, remove the parens.
If value names are globally disabled, honor that.
If we already have this specialization, reuse it.
If we are done succeeded, use the coerced result.
If we can't ignore the instruction, return false.
If we cannot get the previous frame, default to 1
If we don't have to shuffle anything, we're done.
If we find an UnresolvedPatternExpr, return true.
If we found a function pointer statically, great.
If we found no results at all, mention that fact.
If we had more than one expression, form a tuple.
If we have a load, then this is a use of the box.
If we have a tuple expression, form a tuple type.
If we have no arguments, it's a nullary selector.
If we have undef, just add the case and continue.
If we hit the beginning of the string, that's it.
If we resolved the constructor member, return it.
If we're supposed to drop the preposition, do so.
If we're suppressing the check, just don't check.
If we've drained the entire sequence, we're done.
Ignore reference counting and debug instructions.
Imported static vars are handled solely in IRGen.
In case the object's address is stored in itself.
In reality the following three calls are a no-op.
In this case, the array will already be incref'd.
InOutExprs can be wrapped in some implicit casts.
Incref the collection object during construction.
Indicate whether igbinary serializer is available
Infinity or NaN, convert to inf or nan with sign.
Init w/ 1 to avoid div by 0 when all counts are 0
Initialize all the specialized base conformances.
Initialize the Values array with empty SILValues.
Initially, we need each entry block in this list.
Insert EagerSyncVMRegs at the end of catch traces
Insert new instructions to the appropriate block.
InternalPageServer: Server + allowed URL checking
Invalid parameters were passed to ldap_explode_dn
Is this a unary transitive safe user instruction.
It does not mean that the replicaSet name is "1".
It needs to be closer to other bytecode.cpp data.
It should be only an integer literal instruction.
It's pointless to match character encodings here.
Iterate over all numbers and mark each one found.
Jump to the label and free any pending iterators.
Keep track of acceptable DiscardAssignmentExpr's.
Keep track of that successfully inserted chunk id
Keeps a list of basic blocks that have LoadInsts.
Keeps all the locations for the current function.
Length of the eval'ed or function-returned string
Link the static initializer for global variables.
Load the Class's propInitVec from the targetcache
Load the pointer and turn it back into a pointer.
Load the settings passed in environment variables
Load up any dynamic extensions from extension_dir
Locals known to be live at a point in a DCE walk.
Look ahead to parse the parenthesized expression.
Look at all of the suspicious optional injections
Look for Objective-C members with each base name.
Look for bridging attributes on the clang record.
Look for calls of a constructor on self or super.
Look through the destination key and value types.
Loop over existing connections and compare hashes
Make a stacktrace file to prove we were crashing.
Make sure that we have no other non-trivial elts.
Manually append the args for the PHP application.
Map 'throws' to the appropriate error convention.
Map a type within the signature of a declaration.
Mark the protocol as having missing requirements.
Marks a function as alive if it is not alive yet.
Merge all nominal types from the structural type.
Most local type data kinds are already canonical.
Most output kinds want a formatted output stream.
Most return void, though a few return a jit::TCA.
Move the function to this position in the module.
Must ensure there is a type prior to calling this
NB: after we know the value of RepoAuthoritative.
NOTE: clang also does check for shared instances.
Negative means omit last abs(length) code points.
New block is reachable from old block so link it.
New minstrs are handled extremely conservatively.
Next try calling user-level `__get` if it's used.
Normalize a unicode string depending on its type.
Note that this cannot be the start of a new line.
Nothing to do in SILGen for other external types.
Now iterate over all the compilation units again.
Now that we're done with it, remove the delegate.
Now try to discover other details about the file.
Number to return, has to be -1 for admin commands
Okay, emit any definitions that we suddenly need.
Okay, we found the correct default witness table.
Okay, we need to perform one or more conversions.
Omit needless words from the beginning of a name.
On failure, returns 1 and populates error_message
One of the new instructions produced the new dst.
Only properties of simple types can be optimized.
Only replace the disjunctive overload constraint.
Open in binary mode if we're doing binary output.
Other existentials have standard representations.
Other instructions can be moved to the preheader.
Otherwise, branch to the next iteration's header.
Otherwise, carry out the command and return true.
Otherwise, it failed, which emitted a diagnostic.
Otherwise, it might come from a default argument.
Otherwise, make sure the value is in the context.
Otherwise, return the stored canonical signature.
Otherwise, this is some sort of c-style for loop.
Otherwise, we have no idea if they are identical.
Otherwise, we're referring to a member of a type.
Output VPX string is placed in the *p_out buffer.
Parse a pattern with an optional type annotation.
Pass the optimization level down to the frontend.
Perform the lookup in all imports of this module.
Pettis-Hansen code layout algorithm reference: K.
Pop out of the anonymous closure variables scope.
Prep work before beginning the compaction process
Preprocess format into formatcodes and formatargs
Print the (for now) non-null terminated string s.
Process each of the currently-unresolved entries.
Promotes a single AllocStackInst into registers..
Property exists, is accessible, and is not unset.
Prove that RCIdentityBB dominates IncomingEdgeBB.
Pull out the parameter value and its formal type.
Pure red always maps to 6 in this implementation.
Put the disjunction constraint back in its place.
Put the predecessors of BB into the Preds vector.
Quickly skip to the first character that matches.
RAII helper for tracking seen arrays and objects.
RFC 3492 Section 5: Parameter values for Punycode
Re-add it back unless this is a chunked response.
Rechain prev's forward pointer from pred to last.
Record the substitutions in a bound generic type.
Record the variables that we're trying to set up.
Register the solution's opened existential types.
Remaining code will be emitted to the next block.
Remap the ParamDecls inside of the ParameterList.
Remember the unique result in the invasive cache.
Remove an unused global token used by once calls.
Remove this disjunction constraint from the list.
Rename all the source SSATmps that need renaming.
Replace switch_enum_addr by a branch instruction.
Report the declarations we found to the consumer.
Require the copy dest to be a simple alloc_stack.
Reset the name lookup cache so we find new decls.
Resolve the type declaration within this context.
Resolve this nested type to this associated type.
Retain the argument as the callee may consume it.
Retrieve the visibility information from the AST.
Return the cast result with the original cleanup.
Return the value pointer from 'map' if it exists.
Returns the thick metatype for the given SILType.
Returns true if any content was added to Builder.
Returns true if file is a suffix path of fullPath
Returns true if we read any characters into name.
Returns true if we read any characters into word.
Returns true iff at least one event was received.
Returns true on success, false if codegen failed.
Running variables for the current/previous piece.
Sanity check that we did see the OpaqueValueExpr.
Satisfy the default implementation (bookkeeping).
Scheduled blocks for the fixed point computation.
Search for the program and use the path if found.
Search the witness table in the ConformanceCache.
Second line of defense: Look up the mangled name.
Second, try to get a magic file from Common Files
See also ClangImporter.cpp's canImportAsOptional.
See comments with init_error_limit for rationale.
Set of lifetime endpoints for this partial_apply.
Set the debug info location for I, if applicable.
Set up the value witness table if it's dependent.
Short-cut for the most common (and simplest) case
Simplify at this index until no changes are made.
Skip until we get the start of another character.
Skip whitespace backwards until we hit a newline.
So we do nothing here and are at the mercy of Dr.
Sometimes acoldStart is the same as afrozenStart.
Sort N1 after N2 if N1 is complete and N2 is not.
Sort true before false instead of alphabetically.
Special-case the various types we might see here.
Split the preheader before the first instruction.
State transition from Mode::Shared to Mode::Flat.
Static are alive for the lifetime of the process.
Static properties use the metatype as their base.
Step 3: replace get-property calls with literals.
Stepping forward to visit the remaining elements.
Stop if we simplified away the tail of the block.
String is okay because it is bridged to NSString.
Subtract a constant from a builtin integer value.
Such allocations may missing their final release.
Synthesize and type-check the body of the getter.
Synthesize and type-check the body of the setter.
TODO: This isn't plumbed through all the way yet.
TODO: Warn on unreachable user code here as well.
TODO: if the base is +1, break apart its cleanup.
TODO: improve the handling of RuntimeIncludePath.
Temporary hack to reject literals with ud-suffix.
Test 2: Move a file into a nonexistent directory.
Test 3: Move source over non-empty-but-different.
The SILGenFunction that we are emitting SIL into.
The archetype describing this opened existential.
The basic idea is: length is bad, loops are good.
The basic value-witness table for function types.
The breakpoint is deleted, so this has to be last
The cache of identifiers we've already looked up.
The caller must check for and / handle this case.
The character after the slash is nothing special.
The copy's dest must be an indirect SIL argument.
The deinit of a box does not capture its content.
The dest's will be erased at the end of the pass.
The entity is mangled in its own generic context.
The enum has the worst alignment of its payloads.
The exception is C functions imported as methods.
The expression type must conform to the Sequence.
The first argument is the object being destroyed.
The function's formal parameters are on the stack
The kinds of TypeInfos implementing struct types.
The main entry point is also a basic block start.
The method is removed by dead method elimination.
The next witness is an out-of-line base protocol.
The object type is an lvalue if the optional was.
The padding is done by printing the character ch.
The params and requirements cannot both be empty.
The returned char* is exactly what was passed in.
The src type is at least as good as the new type.
The substitution determines the destination type.
The tab_suffix table needs 2**GIFBITS characters.
The type of a TypeExpr is always a metatype type.
The type to which the type variable can be bound.
The unconditional path avoids some failure logic.
The witness throws, but the requirement does not.
Then append the unique identifier of our literal.
Then until we find a node that is not complete...
There's no point in trying to emit anything else.
These conventions make the formal result type ().
These instructions are ok but count as mutations.
These shouldn't occur in expandable struct types.
They are only mutable in designated initializers.
They'll be rechained to go to the new pre-header.
They're all going to be the same, but still, ick.
This also applies to nextRetrans and prevRetrans.
This can only happen at the function level scope.
This can result in arcWeight to be negative here.
This case is querying the init function as member
This ensures that the generic params are visible.
This file implements printing for the Swift ASTs.
This handler also cleans and syncs vmRegs for us.
This is a leaf node, we must have a value for it.
This is bad, only one super.init call is allowed.
This is easy if we're not currently at an offset.
This is generated using the table in ir-opcode.h.
This is only meaningful in an IPC implementation.
This is really only useful for writing testcases.
This is the message string with escapes expanded.
This is true in structs and for final properties.
This makes sure that we properly handle Array vs.
This might be a one, two, or three-byte encoding.
This profiler uses a very large amount of memory.
This result is converted from indirect to direct.
This should probably be split into two methods...
This simplifies later dominance based processing.
This tends to produce less IR, but might be evil.
This will ensure that it is considered ambiguous.
Throw exception - error code is 20 + above value.
To attach the line number to for error reporting.
Transcode the string to UTF-16 to get its length.
Translate a single value and add it as an output.
Treat tmps defined by DefConst as always defined.
Try and construct a FixIt for the argument label.
Try to preserve the PatternBindingDecl structure.
Type aliases may not have an underlying type yet.
Type assertions can't currently handle Init-ness.
Types and properties can only have nullary names.
Unpinning takes responsibility for the +1 handle.
Update all servers with user, password and dbname
Update the last known number of sections to scan.
Update use counts for to-be-removed instructions.
Use Optional(nullptr) to represent more than one.
Use a special IR type for passing block pointers.
Use branch information for eliminating condfails.
Use special representation for special protocols.
Validate the type of this inherited clause entry.
Verify that a global variable follows invariants.
Verify that all of our uses are in this function.
Verify that the field type is valid as an outlet.
Verify that there is no non_condbr critical edge.
Visitor class to format the operands of a Vinstr.
Wait for the server socket thread to stop running
Walk the arrays of base classes until they match.
Warn about stores in the setter, but allow loads.
Was a change made while running the optimization.
We can always capture the storage in these cases.
We can't apply indirect offsets without metadata.
We can't reliably call such things, so error out.
We cannot devirtualize unbound generic calls yet.
We did not find this type, thus it is not mapped.
We don't allow binary operators to combine specs.
We don't handle inner-array types with unset yet.
We don't know which memory is read in the callee.
We don't yet support raw values on payload cases.
We filter out some cases to avoid too much noise.
We handle our own overriding/shadowing filtering.
We ignore the values of statically nullish types.
We may be stopped at a place with no source info.
We need to turn on InSILBody to parse SILDeclRef.
We reduce the benefit if the caller is too large.
We resolved this type witness one way or another.
We use the third and fourth as scratch registers.
We want to avoid full typechecking for all files.
We want to recognize most of these types by name.
We'll make the IR entry block jump to this block.
We'll visit nested types separately if necessary.
When asserts are disabled, this should be a NoOp.
When the buffer fills up empty it and start over.
When there are any characters after the first NUL
When we do that, all of this code will disappear.
Whether we have found any types that are bridged.
Wrap all Clang imports under a Swift import decl.
Write the globals-as-members table, if non-empty.
YYFINAL -- State number of the termination state.
YYRHS -- A `-1'-separated list of the rules' RHS.
Zero-parameter initializers with a long selector.
apply the Miyaguchi-Preneel compression function:
bit 16 set iff "diff" was non-zero (on non-match)
can't do a near jmp - use rip-relative addressing
canonicolize path Grab and 0-index the begin line
close() can be called twice in some circumstances
consistent with php_mysql_do_query_and_get_result
convert to the encoding number and check encoding
delete on a null pointer is defined to be a noop.
esstsett, thorn, n-tilde, c-cedilla, s-caron, ...
even if it's empty, still need to call for warmup
gd 2.0.11: gdSeek returns TRUE on success, not 0.
if it's already an object, we don't have to worry
in a manner that could cause us to change states.
init methods must be classified as such by Clang.
intermediate results do not have headers and code
invalid search type, but no need to complain here
just to be paranoid, make sure dbname is a string
keyed off a tca, so there needs to be exactly one
lookup unqualified name in thread-local constants
make a fresh copy each time - strtok corrupts it.
move the non-benign sign extension flag to bit 16
need to sync vmpc() to pc for backtraces/re-entry
newTc shouldn't be any more specific than origTc.
nextLookahead skips over whitespace and comments.
no need to calloc it, we overwrite all pxl anyway
now walk the charset map and look for the codeset
register line number information for function: 1.
remove all inserted chunks and main file document
run through the whole string, converting as we go
sbs url encoded so XSS shouldn't be an issue here
simplifyArgs does use the dominator tree, though.
successfully forked, so don't join until waitpid.
swift_dynamicCast performed no memory management.
the bug is that uenum_next doesn't set the length
the first null is the last character in char_list
this needs extra checks, so skip the optimisation
treat implicit pointers the same as real pointers
unless there are uninitialized stored properties.
vcallarray can only appear at the end of a block.
we always do pre/post opt no matter the opt level
we need to initialize pcre cache table very early
we use file cache's file name to make stat() work
which runs in type context, not instance context.
will start a second server, which should takeover
(We've already stripped one layer of parentheses.)
(has a number of static buffers that are rotated).
(noreturn isn't really reified at runtime though.)
- consumes reference of the given Exception object
- if there are no connections, simply return false
...which may allow us to go on and do later tasks.
/ / Returns false if optimization is not possible.
/ / StructLoads records loads of the struct value.
/ / This is also used to import enum case aliases.
3) for a mutating method, the base has inout type.
A + 1 does not trap if A is smaller than anything.
A cleanup that deallocates an uninitialized array.
A helper function to claim an inner direct result.
A list of blocks that will require new Phi values.
A local availability overrides the incoming value.
A stack maintains the states of nested structures.
A stored property cannot be moved to an extension.
A tolerance has been implemented using GD_EPSILON.
ARM currently can't handle floating point returns.
AST Walker shouldn't go into the type recursively.
Action number for EOF rule of a given start state.
Active clauses are handled by the normal AST walk.
Add an unconditional jump at the end of the block.
Add dominator tree nodes for the new basic blocks.
Add protocol declarations to the enum declaration.
Add requirements for each of the associated types.
Add the hits in the discarded tail to m_untracked.
Add the retired constraints back into circulation.
Adjust cursor to the start of the potential label.
Align with Func start instead of with param decls.
All the top-level code will be lowered separately.
Also suppress name changes if there's a collision.
Always extract the argument as a "char *" pointer.
Amount of text matched not including the EOB char.
An index of zero will return a zero length string.
An initializer declared in a protocol is required.
Another content node to actually load the element.
Another record means the end of this WitnessTable.
Any writebacks for this access are tightly scoped.
Any writebacks should be scoped to after the load.
Append this extraction to the target locator path.
ArgBB is not the entry block and has predecessors.
Assigns ids to all of the local variables eagerly.
At some point the parser hack may have to go away.
Attempt to lookup our name from the output module.
Avoid indirect call, as we know it is a MixedArray
Bail if this class_method cannot be devirtualized.
Base cases for the various stages of verification.
Be careful not to delete the region's entry block.
Begins an SHA256 operation, writing a new context.
Begins an SHA384 operation, writing a new context.
Blame conformance failures on the containing type.
Bonus for matching the beginning of the candidate.
Break out to handle the actual construction below.
Buffer for error messages, and its allocated size.
Build a field type accessor for stored properties.
Build an l-value for the storage of a declaration.
Build the rawValue getter for an imported NS_ENUM.
Build the type of a function transformation thunk.
Builtins without side effects also do not release.
But if it may have been altered, we can't rewrite.
But this happens less often with canonicalization.
Calculate the correct bound-generic extended type.
Call breakpoints add function + class (optionally)
Call getAbsolutePath() on the returned File object
Call/return hand-shaking is a bit funny initially.
Candidate must be incorrect for some other reason.
Canonicalize inserted phis to avoid extra BB Args.
Capture value parameters by value, consuming them.
Case label items in a case statement are siblings.
Cast the witness to the appropriate function type.
Check for literals that fit, but set the sign bit.
Check for this situation and handle it gracefully.
Check if BB is reachable from multiple enum cases.
Check if a checked trunc instruction can overflow.
Check if a given type conforms to _Error protocol.
Check if both nodes may point to the same content.
Check if it is a cast between bridged error types.
Check if out predecessor has any other successors.
Check if there are enough bytes left in the buffer
Check if this class is implemented in its adapter.
Check if we found a superclass we are looking for.
Check if we need to emit a body for this function.
Check if we've already computed the TBAA relation.
Check that the type, if explicitly spelled, is ok.
Check that the update region is still well-formed.
Check this type against the protocol requirements.
Check to see if we have any incorrect diagnostics.
Check to see if we've already computed the market.
Check whether the other conforms to that protocol.
Check whether we've already performed this lookup.
Clean up the old collection that we no longer need
Cleaning up just in case they have been set before
Clients can do what they want in walkToTypeLocPre.
Coerce the pattern, in case we resolved something.
Collect the conformances that need witness tables.
Collect the lowercase letters up to the next word.
Collect the type infos for the context parameters.
Collect the value witnesses for a particular type.
Common implementation for non-fixed box type info.
Common implementation for single-refcounted boxes.
Complain if we didn't reach the end of the inputs.
Compute the shortest-path analysis for the callee.
Compute the shortest-path analysis for the caller.
Construct an empty constraint system and solution.
Consume tokens until we hit the corresponding ')'.
Could not find exact match, now try wildcard match
Count the existing alloca sizes against the limit.
Crash when a deleted method is called by accident.
Create a heap object to contain the self argument.
Create a new cond_fail using the merged condition.
Create a new partial apply with the new arguments.
Create a pattern binding to describe the variable.
Create a re-abstraction thunk for a partial_apply.
Create a temporary file to write the results into.
Create an emission for a call of the given callee.
Create an initialization which will initialize it.
Create an inline scope for the cloned instruction.
Create and register 'IntlGregorianCalendar' class.
Create the retainN call right by the first retain.
Create witnesses for requirements not already met.
Curl Http Version constants (CURLOPT_HTTP_VERSION)
Current BB can be re-used instead as their target.
Currently tracked locations, indexed by their ids.
Currently, there is no restriction on overloading.
Deactivate all the cleanups for the result values.
Declare constants that are defined in the C header
Declared extern "C" LLVM_LIBRARY_VISIBILITY above.
Derive SILType for InOutType from the object type.
Detail about how an object conforms to a protocol.
Detect this and simplify the generated code if so.
Determine the Objective-C name of the declaration.
Determine the appropriate context for the element.
Determine the bits we're going to use for the tag.
Determine the foreign representation of this type.
Determine the formal type of the 'self' parameter.
Dig out the module that owns the class definition.
Do a memoized witness-table layout for a protocol.
Do appropriate processing given the current state.
Do the initialization as for a refcounted pointer.
Don't cause a recursive type-check of the witness.
Don't do any work for the vastly most common case.
Don't emit a witness table if it is a declaration.
Don't insert prefix operators in postfix position.
Don't support indexing within an interior address.
Don't try to do anything with an invalid location.
Don't use any immediates that don't fit in a byte.
Drill down on the operand until it's non-optional.
Dummy class to get some code to run before main().
E.g. ordered equal FCMP_OEQ(Nan, Nan) is not true.
Eagerly save VM regs and realign the native stack.
Elements in the local cache must not be KindOfRef.
Emit the ObjC-compatible class symbol for a class.
Emit type metadata for the fields into the vector.
Emits an invocation of / the specialized function.
End of option value (if EOF is reached before EOL)
Ensure that the function is visible for debugging.
Ensure that weak captures are in a separate scope.
Ensure we interpret all code at the given offsets.
Even then, only find complete object initializers.
Eventually, this will have its own helper routine.
Everything else cares about the (rvalue) argument.
Excluding AllocStackInst (which is handled above).
Extract the box and value address from the result.
FIXME: Add something for this record or remove it.
FIXME: Case-insensitivity in non-ASCII characters.
FIXME: Figure out if this can be migrated to LLVM.
FIXME: Handle 'self' like any other argument here.
FIXME: Ignore submodules, which are empty for now.
FIXME: Reabstract the result value as substituted.
FIXME: Setup dependencies on the included headers.
FIXME: This is a current limitation, not inherent.
FIXME: This is an awful way to get the current OS.
FIXME: This representation is actually quite awful
FIXME: generic signature dumping needs improvement
FIXME: set ObjCClassFlags::Hidden when appropriate
Factor the extra tag value from the payload value.
Fail early to avoid further execution of PHP code.
Failure may not release because no store occurred.
Figure out the tag and payload for the empty case.
Finally swap the number of arguments that we have.
Find Self references within the given requirement.
Find the ValueDecl given a type and a member name.
Find the best default witness for the requirement.
Find the conformance and dig out the type witness.
Find the indentation used on the indentation line.
Finds the specified method of the specified class.
First 32 bits are reserved for ICU-specific flags.
First comparison already proves they are different
Fix the types when we've imported into a protocol.
Fixed-layout global variables don't get accessors.
Flow control commands only belong to sticky thread
For a member, "self" indicates the self parameter.
For address-only sequences, the base is in memory.
For c_Map, postSort() handles rebuilding the hash.
For initializers, compute the first argument name.
For ivar destroyers, the decl is the class itself.
For now, we just pick a random server from the set
For objects, we fall back on the Variant machinery
For recovery purposes, accept an oper_binary here.
For the rest, just generator chunks one at a time.
For types and properties, build member references.
Forced bridged casts can be still simplified here.
Form an abstraction pattern for bridging purposes.
Format: a type followed by a list of typed values.
Free functions are always statically dispatched...
From GDB: (gdb) call HPHP::Trace::dumpRingBuffer()
From here on, we'll be working with scratch space.
Generate an exit for the rare case that r is zero.
Get the ObjC metadata for the type we're checking.
Get the line and indent position for this context.
Get the sub expression argument as a managed value
Get the type of a global variable getter function.
Given a variant, coerce it into a EVP_PKEY object.
HACK: 'NSUInteger' suggests both 'UInt' and 'Int'.
Handle cases where one or the other name is empty.
Helper machinery for jemalloc-stats-print command.
Hence we may check for equality with that boolean.
Hoisting some but not others is not as beneficial.
Hook called on request shutdown after main() exits
If "done" is true make sure we don't increment "e"
If an initial value was given, copy or take it in.
If compared against a double, convert to a double.
If compared against a double, promote to a double.
If document in the context is the same, return it.
If fn is empty, we failed to deserialize its body.
If imported as member, the member should be final.
If it is not a tuple which is a simple type, bail.
If it starts with the magic string, then skip that
If it's not a tuple, it could be a unary function.
If our TEDAI has no users, there is nothing to do.
If so, that's really unfortunate in a lot of ways.
If the base is +1, we want to forward the cleanup.
If the base is a primitive type, SetM pushes null.
If the base type was an optional, look through it.
If the character was incorrectly encoded, give up.
If the characters aren't all printable, reject it.
If the destination wants a non-address value, load
If the field is empty, its address doesn't matter.
If the known type fits the constraint, we're done.
If the last component is logical, just emit a get.
If the node is a leaf and is not a live, continue.
If the reference needs to be converted, do so now.
If the representatives are equivalent, do nothing.
If the rethrow destination isn't used, we're done.
If the second type is a protocol type, we're done.
If the types already match, there's nothing to do.
If the types are obviously equivalent, we're done.
If the underlying type is private, don't print it.
If the var is marked final, then so is the getter.
If the warning couldn't be suppressed, don't warn.
If there are no constraints remaining, we're done.
If there are no inherited protocols, produce null.
If there are other users to the box then bail out.
If there is a returns_nonnull attribute, non-null.
If there is already an argument label, do nothing.
If there is not a current instance, cc trumps cls.
If there's only one generic param, mangle nothing.
If this element is not required, don't fill it in.
If this function is a method, we found our result.
If this is 'unowned', check to see if it is valid.
If this is a class type, it may be the superclass.
If this is a static method, get the instance type.
If this is a store *to* the object, we can zap it.
If we are not tracking any state transitions bail.
If we are using a default argument, handle it now.
If we can't free the stub, enqueue again to retry.
If we didn't compute any new bindings, we're done.
If we do not understand one of the exit BBs, bail.
If we do, it has to be nominal one way or another.
If we don't have a default definition, we're done.
If we end up looking for ourselves, don't recurse.
If we found a closing quote character, we're done.
If we found more than two methods, it's ambiguous.
If we have a class type, look into its superclass.
If we have a single match (exact or not), take it.
If we have an address only type don't do anything.
If we have an alias name, make it private as well.
If we have variadic arguments to check, do so now.
If we haven't found the type yet, look for it now.
If we should attempt fixes, add those to the list.
If we should call an accessor of some kind, do so.
If we won't be able to provide a result, bail out.
If we're already in memory for some reason, great.
If we're debugging, we probably don't have a main.
If we're emitting to an address, just manage that.
If we're not allowed to try this binding, skip it.
If we're shutting down do not write any more data.
If we've already determined this witness, skip it.
Ignore instances of the type with this type index.
In Cygwin, dlopen() returns PE/COFF image pointer.
In either case, it corresponds to a single result.
In immediate modes, use the SDK provided by xcrun.
In other words, it will not be lowered afterwards.
Increment the max so the range is inclusive of max
Infers the availability required to access a type.
Infinity or Nan, convert to inf or nan like printf
Initialize the basic block maximum refcounted set.
Initializers always use the nil result convention.
InstanceOfD is always false if it's not an object.
Instead, we create the LSValues when we need them.
Instructions that explicitly manipulate the stack.
Introduce accessors for a property with behaviors.
Ints stay ints unless they can overflow to doubles
Invalidate SrcDB's entries for all func's SrcKeys.
It also does not copy any extension-specific data.
It doesn't make sense to specify keys for Vectors.
It dominates all other blocks in this CFG pattern.
It's not safe to call this function more than once
Iterate over all loads and replace them by values.
Its uses will be replaced by the promoted address.
Just leave this as an unresolved member reference.
Just stop if we've already applied this attribute.
Keep track of what subelement is being referenced.
Keeps a list of basic blocks that have StoreInsts.
Leave space for register spilling and MInstrState.
Load any abbrev records at the start of the block.
Load argc and argv from the entry point arguments.
Load the systemlib unit to build the Class objects
Look for a builtin "unsafeGuaranteed" instruction.
Look for anything at all that's fulfilled by this.
Look through implicit open-existential operations.
Loop until the end of the basic block inclusively.
MONGODB-CR is the default authentication mechanism
Make sure BlotMapVector works with StringRef keys.
Make sure function enter hook is called if needed.
Make sure we /used/ the last module filter we got.
Make sure we have an identifier for the base name.
Make sure we have not seen this witness table yet.
Make sure we have the complete list of extensions.
Make sure we leave the array in a consistent state
Make sure we map the archetypes if we haven't yet.
Mangle a StringRef as an identifier into a buffer.
Map the upper portion of the RDS to a shared area.
Mapping of object types to their computed actions.
Mark the EndCatch safe, since we're eager syncing.
Match pattern components until there are none left
Maximum number of local initializations to unroll.
Merge in the state of the predecessor basic block.
Metatypes that can be thin would never be classes.
Might as well create the error-limiting table too.
Move the insertion point to the throw destination.
Move the new record to the placeholder's position.
Native Swift function types bridge to block types.
Negative offset counts from the end of the string.
No conversion: re-use the original parameter info.
No debug messages are output if it is set to NULL.
No other types include throwing functions for now.
Non-native types are just wrapped in various ways.
Non-void values get registered in the value table.
None of these types have sugar at the outer level.
Not overlapping, just add the new token to the end
Note that the header fields are all pointer-sized.
Note: this mimics ImportHint::canImportAsOptional.
Nothing else is statically just a class reference.
Nothing to do if this wasn't a normal conformance.
Now delete the clone as we only needed it operand.
Objective-C metatypes are trivially representable.
Ok, we have a matching BB and a matching enum tag.
Okay, it looks like we want to do this and we can.
Okay, now it should be safe to coerce the pattern.
On success *data_buffer is set and must be free()d
Only call this if the variable has an initializer.
Only one pointer-to-address is allowed for safety.
Only set 'sret' if this is also the formal result.
Only the encoded type+index pair will be compared.
Only top-level func decls are currently supported.
Only worry about classes that can be instantiated.
Other ASCII control characters should get escaped.
Other TypeDecls don't need their types mangled in.
Other accessors are never selector family members.
Other types get substituted into context normally.
Otherwise return the PBD in "Decls" to the caller.
Otherwise this is not a context-sensitive keyword.
Otherwise we want to try and link in the callee...
Otherwise, create a new witness table declaration.
Otherwise, just add the expression as a candidate.
Otherwise, just record the need for this metadata.
Otherwise, load and return the final 'self' value.
Otherwise, produce a temporary and copy into that.
Otherwise, we can't produce a specific diagnostic.
Otherwise, we may need to fill in the conformance.
Otherwise, we should have just one Unicode scalar.
Otherwise, we should have some sort of subcommand.
Otherwise, we switch directly to the payload case.
Parent class constructor if it isn't named 86ctor.
Parse generic params for the protocol conformance.
Parse the 'class' keyword for a class requirement.
Parse the command and store it as the last command
Pass large arguments as indirect value parameters.
Perform an operation for each field of two tuples.
Prime the new lexer with a '(' as the first token.
Primitive heuristics to get the user-written type.
PrintDecl - Visitor implementation of Decl::print.
PrintExpr - Visitor implementation of Expr::print.
PrintStmt - Visitor implementation of Expr::print.
Prints regular comments from clang module headers.
Process an JPEG APP12 block marker used by OLYMPUS
Process the basic blocks for the gen and kill set.
Process until we run out of items in our worklist.
Produce the result as an integer literal constant.
Project down to the destination fixed-size buffer.
Protocol compositions are currently never special.
Rank things by their kind as the highest priority.
Rather, the type is mapped to the underlying type.
Reads a quoted string with typical escaping rules.
Recast strcpy to handle unsigned chars used below.
Record the current line number of the instruction.
Record whether they come from re-exported modules.
Recurse to check the parent type, if there is one.
Recursively specialize and emit the clause matrix.
Ref to raw pointer consumption of other ref casts.
Regular locations are allowed on all instructions.
Reject 'subscript' functions outside of type decls
Remember all direct subclasses of the current one.
Remove tracked state for the actrec and array arg.
Renumber the old components to the new components.
Replace branch to BB by branch to TargetFailureBB.
Replace branch to BB by branch to TargetSuccessBB.
Replace it by a retain/release_value on X instead.
Replace the computed type with the suggested type.
Replace the dummy values with new block arguments.
Replace the name with the name of the requirement.
Replace the trailing release with a check_unowned.
Represents a value in integer constant evaluation.
Resumable::setResumeAddr(resumeAddr, resumeOffset)
Return a callee list for the given witness method.
Return the tuple - the result + the overflow flag.
Return the tuple: (the result, the overflow flag).
Return this function pointer, bitcasted to an i8*.
Return true if we *might* remove this instruction.
Return with an error if the posted data is garbled
Returns a pointer to a place for a property value.
Returns the current basic block we are processing.
Returns the difference (in dB) between two images.
Returns the epilogue release matcher we are using.
Returns the index of the origin protocol we chose.
Rotates an image by 90 degrees (counter clockwise)
Run the iterative DF to converge the BBWriteSetIn.
RuntimeOption::EvalVMStackElms-sized and -aligned.
Safely translates JSValues to an array of doubles.
Same-type requirements require exact name matches.
Sanity check that we actually found a path at all.
Save the return of handleResume(), then sync regs.
Scan an instruction and build dependencies for it.
Search for the section we hold autolink entries in
See if it is reached over Success or Failure path.
See if the given name matches the function's name.
See if the value matches the payload type exactly.
Seed the type map with pre-existing substitutions.
Set it to implicit to disable printing it for SIL.
Set new used value (we've removed any tombstones).
Single entry, single exit (aside from exceptions).
So we need to IncRef here if it is being returned.
Some countries did not accept it until much later.
Some fixes need more information from the locator.
Sort entries by increasing hotness before priming.
Special case for "unistd.h", since it is non-ANSI.
Stack depth should be 1 after resume from suspend.
Standard says more types possible but skip them...
Start all the threads and do the LLVM compilation.
Start by finding the decls for 'self' and 'value'.
Start layout from the given instance start offset.
Stop merging at side-effects or reads from memory.
Stop when we hit a parameter at a different depth.
Store the new direct parameter to the alloc_stack.
Store top-level binary exprs for further analysis.
Stored properties in SIL mode don't get accessors.
Submodules share lookup tables with their parents.
Support for systemlib functions implemented in PHP
Swift supports three representations of functions:
Switch over the extra inhabitant patterns we used.
Switching on a singleton does not require a value.
TODO check for a "yamlSerialize()" instance method
TODO request-local cache to avoid hashtable lookup
TODO: CanGenericSignature should be const-correct.
TODO: Erase from module if there are no more uses.
TODO: Have Callee encapsulate the captures better.
TODO: coalesce into a single convention attribute.
TODO: incomplete tuple patterns, with some syntax.
TODO: proxygen only supports downstream keep-alive
Take advantage of the empty version being 0.0.0.0.
Take local ownership of the optional result value.
Takes can be done by primitive copy in these case.
Tell the type checker not to touch this extension.
Test containment for ranges with lower end points.
The branches must be convertible to a common type.
The context where the constant will be introduced.
The elements are returned as an / AvailabilitySet.
The first character in the file is not left-bound.
The first time we don't need to check for release.
The generic signature is complete and well-formed.
The implicit 'self' argument if in a type context.
The inout arguments which feed this tuple element.
The input value or null if it is the default case.
The main scanner function which does all the work.
The parameter did not specify a separate API name.
The source must be convertible to the destination.
The string key must not be an integer-like string.
The superclass should be the first inherited type.
The transport take precedence over the config file
The uniquing structure for function type metadata.
The uniquing structure for metatype type metadata.
The value we provide is the one we've already got.
Then grab the previous instruction (if it exists).
Then perform any updates to the arguments of NewF.
There are no spare bits in an opaque storage type.
There are some unknown users of the partial_apply.
There is no need to bitcast from the enum address.
These constants are mainly used with ImagickPixel.
These operate only on `this' and not its children.
They should all happen after self.init is invoked.
This AI is a strong entrance for its return value.
This can only remove from the function exit filter
This file implements a verifier of AST invariants.
This file implements the DiagnosticConsumer class.
This file implements the DiagnosticVerifier class.
This function / returns true if a change was made.
This happens if we have a cycle in the call-graph.
This helps in generating / the genset and killset.
This is a partial_apply of a re-abstraction thunk.
This is an abstract class constant or typeconstant
This is correct: we want to /disprefer/ the mplus.
This is needed to determine the delta memory usage
This is the / maximum number of iterations we run.
This may be a deserialized or clang-imported decl.
This means they must be defined not just declared.
This means we need to be able to insert phi nodes.
This operation is only valid after name / binding.
This pass prints the tree of inlined instructions.
This pass sinks instructions close to their users.
This should always be called under the mutex lock.
This should cause the proxy to disconnect from us.
This trick lets us avoid special-casing unordered.
This will be ignored in the rest of the optimizer.
To be implemented when we have more image formats.
To prevent this, compute the actual masks up front
Transfer the results to the local breakpoint list.
Translates operator fixity to demangler operators.
Tries to evaluate the integer constant of a value.
Truncate name to next format code or end of string
Try to get the size and alignment of this element.
Try to unwrap implicitly unwrapped optional types.
Turn the formal SIL parameters into IR-gen things.
Uncurry the arguments in calling convention order.
Update the current sandbox in the current machine.
Update the dominator tree after rotating the loop.
Update the numbers if we change CapCode::Threshold
Updates the dominator tree with the cloned blocks.
Use the lowered return type of the foreign getter.
Used for calculating the start of the next period.
Used to be m_pendingJump, but that's been removed.
Used to test critical edge splitting with sil-opt.
Validate the generic parameters for the last time.
Variadic arguments never contribute to 'rethrows'.
Visit now, so we can both eval LTR and assign LTR.
Wait until polling thread gets the memo and exits.
Walk the use list of the pointer, collecting them.
We are going to bluntly remove these instructions.
We can fold if the value being cast is a constant.
We can't assume anything about external functions.
We currently only support static invoke functions.
We do not care about trivial parameters (for now).
We don't accumulate the benefit instead we max it.
We don't care which failure it was, it just failed
We emit the epilog at the current insertion point.
We found a place to insert the stack deallocation.
We have a few special names that we form on entry.
We have already seen an entry for this index bail.
We just removed the last token from the last slab.
We need to advance the start offset, and continue.
We need to pad the strings out like a real matrix.
We only allow a single trailing closure on a call.
We pass the Offset in the third argument register.
We statically know whether we have extra tag bits.
We're converting between C function pointer types.
We've encountered a redeclaration of the property.
Whether any block in the loop contains a php call.
Which we should be able to turn into just "inc-2".
Which would cause us to report the TypeRepr twice.
Will delete itself when it gets a closing callback
Write out a Zero-length packet (to end the series)
Written (or, at least, moved) 1999, Philip Warner.
XXX maybe find a better way to generate a nonce...
YYLEX -- calling `yylex' with the right arguments.
Zero means it was monomorphic (or never executed).
__lambda_func will be the only hoistable function.
_direct type metadata for Swift._EmptyArrayStorage
according to ICU sources, this should never happen
adjust how many args we have left and restart loop
and make sure they have no unsubstituted generics.
arg is the (constant) type of a known-typed value.
associated_type AssociatedTypeName: ConformingType
b) T2 is the head (first translation) of a region.
but it is not apparent how to do that for schema's
copy each element of our input array to the buffer
drop ownership by pending event (see initialize())
end tables serialization structures and prototypes
ensure that we free any previous unfetched results
fcallHelper asserts native stack alignment for us.
gd 2.02: whoops, was - b (thanks to David Marwood)
get the public keys we are using to seal this data
getLoc - Return the caret location of the pattern.
hzhao: not sure how we support class serialization
i.d is not Vreg but Vreg16, so it can't be a SIMD.
id of the RDS bit for whether the Unit is included
if name is an absolute filename then test directly
if no display name has been given, use the address
if we pass a widening type to a label, loop again.
io.c  Implements the simple I/O 'helper' routines.
io_dp.c  Implements the dynamic pointer interface.
it will be swept Don't bother running the dtor ...
like fwrite(), fclose() can error when fflush()ing
make sure it doesn't work on some non-doubles/ints
no need to check the rest of options and arguments
no need to do the initialization for a second time
not a X509 certificate, try to retrieve public key
nothing to queue since strings don't have pointers
only get here if both points are inside the window
overload resolution will prefer the static method.
phpprof is enabled, don't let PHP code override it
postSort() runs after the sort has been performed.
prepares a query for further binding and execution
search for a string in a fixed-length byte string.
supportsProfiling() can be called from any thread.
teleport the references in here so we don't incref
the actual work is done in move_forward and rewind
the first null is the first character in char_list
the native error code, specific to the data source
this method is only meaningful in a pagelet thread
unless we can delete *that* entire object as well.
unpack operator and/or still remaining in argArray
update the max store set using the bit / position.
wait() is always safe to call regardless of thread
want to destroy both even if destroying one fails.
we don't have a timer, and we don't have a timeout
well that didn't work out, so let's check out _ENV
will be printed in its source location, see above.
*NOTE* Associated types of self are not valid here.
- the callee in 'T(...)' is a struct or class type.
-- The first phoneme has to be processed specially.
/ / A scope is either a loop or the whole function.
/ / The substitutions must carry origTy to substTy.
/ / This class evaluates true if an error occurred.
/ / We must only replace uses of this copy's value.
/ Propagation of the count of one array allocation.
/ Resolve each type in the list to a concrete type.
/ Returns null if no such declaration can be found.
/ The template subclasses do target-specific logic.
/ used to facilitate fast RC roots to index lookup.
/ used to facilitate fast location to index lookup.
2.0: much easier when the destination is truecolor.
A bit used as a payload tag bit is not a spare bit.
A lowering for loadable but non-trivial enum types.
A new option which is prefixed with "-" is expected
A switch_enum can implicitly pass the enum payload.
A type implementation for 'weak' existential types.
A vector consisting of closures that we propagated.
Accept weak, volatile, and singlethread if present.
Accumulate the layout requirements of the payloads.
Add a fixit to replace '.dynamicType' with '.self'.
Add an operation to finish the enum initialization.
Add any variable declarations to the current scope.
Add implicit conformances to the given declaration.
Add the buffers for the indirect results if needed.
Add the given offset to the free list for its size.
Add the match sets to the output array and clean up
Add the requirement, if we haven't done so already.
Add this option / argument pair to the result hash.
Add this solution's overload choice to the results.
Adjust for the foreign-error argument if necessary.
Advance the offset and align it for the next piece.
All found calls to get-property semantic functions.
All nodes: top level functions + inlined functions.
All other functions are not inlined in cold blocks.
All the indirect conventions pass a single pointer.
Also at this point we know what locations are dead.
Also fail if our predicted position exceeds bounds.
Also ignore RuntimeOption::DisableStructArray here.
Always canonicalize to the outermost frame pointer.
Always occurs as part of some other stmt / or decl.
An abstract interface for producing bridged errors.
An optional requirement might not have a witness...
An unconditional cast instruction is finished here.
And then override the linkage with the new linkage.
Any other type is would be a valid type in the AST.
Append an additional argument to represent varargs.
Append string to buffer - check if to be encoded...
Applies an array of tagsets to the read preference.
Arguments are section name, cookie, and stage name.
At this point we are executing as the child process
At this point, we know we have a closure signature.
Atomically rename the file into its final location.
Attempt to lookup the witness table from the table.
Autorelease the 'self' value to lifetime-extend it.
Bind a refutable wildcard pattern to a given value.
Bind the 'Self' type variable to the provided type.
Both names were provided, so pass them in directly.
Build a buffer with the pretty-printed declaration.
Build a doubly-null-terminated list of field names.
Build property accessors for the ivar if necessary.
By default, use the astNode to create the location.
Calculate metonicCycle * HALAKIM_PER_METONIC_CYCLE.
Called by the VM when a class definition is loaded.
Called when the ctor was terminated by an exception
Canonical signatures store the ASTContext directly.
Canonicalize the loops, invalidating if we need to.
Cast the callee pointer to the right function type.
CatchMaker makes catch blocks for calling builtins.
Characters are mapped into these 32 symbol classes.
Check and simplify binary arithmetic with overflow.
Check for circular inheritance within the protocol.
Check if it's a boolean inversion of the condition.
Check if the type conforms to _BridgedToObjectiveC.
Check invariants about the metadata for this Block.
Check that the argument is passed as an inout type.
Check the SILLLocation attached to the instruction.
Check to make sure that all blocks are well formed.
Check whether any path leads to a non-trivial type.
Check whether the source is bridged to Objective-C.
Check whether the target is bridged to Objective-C.
Check whether this macro has already been imported.
Class existentials are represented as record types.
Cleanup to destroy an uninitialized local variable.
Clear the existing value's name so we can steal it.
Clone a new, non-DWARF Mangler for the DeclContext.
Clone the closure with the given promoted captures.
Coalesce Nodes if possible with adjacent free nodes
Collect all uses of the value at the given address.
Compute the BBSetOut at the end of the basic block.
Compute the appropriate LLVM type for the function.
Compute the expression that advances the generator.
Compute the short and full name of the passed value
Computed and static properties are not initialized.
Consider paths starting from a new origin protocol.
Construct a ConstantInt from an IntegerLiteralInst.
Construct a constraint system from this expression.
Consume the code completion token, if there is one.
Continue on to diagnose any argument label renames.
Conversions to C function pointer type are limited.
Convert fragile tag index into resilient tag index.
Convert resilient tag index into fragile tag index.
Convert the initializer to the type of the pattern.
Convert to the appropriate address type and return.
Copy any extra prefix bytes in from the superclass.
Copyright (c) 2012 Bryan Davis All rights reserved.
Create a member reference to the given constructor.
Create a value for an ifd from an info_data pointer
Create an initialization to initialize the element.
Create and register 'CodePointBreakIterator' class.
Create and register 'RuleBasedBreakIterator' class.
Create the releaseN call right by the first retain.
Create the releaseN call right by the last release.
Currently we only convert non-function-like macros.
Decide whether some text looks like UTF-8 with BOM.
Decodes input (unsigned char) into output (uint32).
Decodes input (unsigned char) into output (uint64).
Derive the ObjC selector family from an identifier.
Describes an optional adjustment made to a witness.
Determine whether the given Clang entry is visible.
Determine whether the given declaration is favored.
Determine whether the innermost context is generic.
Determine whether the set of bindings is non-empty.
Determine whether we require in-class initializers.
Different line braces, so use RBrace's indentation.
Discard numbers over the limit to avoid modulo bias
Do not JIT this unit, we are using it exactly once.
Do some backup logic for foreign type declarations.
Do we know how to hoist the arguments of this call.
Don't do it for two of the same in a row, though...
Don't inline into thunks, even transparent callees.
Don't spend too much time with constant evaluation.
Drop debug_value_addr of uninitialized void values.
Drop everything functions in this module reference.
Drop our references to anything we've deserialized.
Dump the func guard in the TC before anything else.
Each entry is a pair of SILDeclRef and SILFunction.
Either add the breakpoint or store it as unmatched.
Emit SIL functions for all the members of the type.
Emit a commuted version of the specified operation.
Emit any lazy ObjC protocol definitions we require.
Emit the enum directly into the context if possible
Emit the result expression into the initialization.
Encodes input (uint64) into output (unsigned char).
Enter a cleanup to deallocate the callback storage.
ErrorProtocol has a special runtime representation.
Exception for 'failure' which should be a callable.
Exit to interpreter if resume address is not known.
Expand all of the direct and indirect result types.
Extract the arithmetic operation from the condfail.
FIXME: This implementation is woefully inefficient.
FIXME: This should go into llvm/ADT/StringExtras.h.
FIXME: This should work without an output file map.
FIXME: When we can import C++, use Clang's mangler.
FIXME: also include user-defined attribute keywords
FIXME: only if the class itself is not marked final
FIXME: peek into capture lists of nested functions.
FIXME: rdar://14883575 Libcompiler_rt omits muloti4
FIXME: replace with std::optional, when we have it.
FIXME: we may not wish to put this in a destructor.
Fail statements are only permitted in initializers.
Find the store instruction and turn it into return.
First grab the NonPayloadedEnumBB and RCIdentityBB.
First, the effects of PureStores on memory support.
Flush the packet to disk, and reset the accumulator
For a build without mutexes, no-op the mutex calls.
For a major decl, we print an empty line before it.
For backward jumps, we simply call recordJumpTarget
For each of the type variables, get its fixed type.
For now, native weak references are just a pointer.
Form a set of case_tag:result pairs for select_enum
Form the body of a chaining designated initializer.
Forward the incoming arg from a single predecessor.
Found a use of the struct at the given access path.
Function id is added to the breakpoint once matched
Function used to construct the left string literal.
Furthermore, a DIE can have other DIEs as children.
Gather generic arguments from a bound generic type.
Gather instruction counts if we are asked to do so.
Generic tuple value witness for 'deallocateBuffer'.
Get an estimate of the number of aliased functions.
Get current options, unsetting the NO_TLSv1_* bits.
Get the Swift metadata for the type we're checking.
Get the arg, which should be in a paren expression.
Get the camel-case words in the name and type name.
Get the first level projection of the current type.
Get the next client and their address (as a string)
Handle nominal types that are not directly generic.
Handle the extensions that we have not yet visited.
Handle weird, encoded offset, used by cgLdObjMethod
Hansen, "Profile Guided Code Positioning", PLDI '90
Helpers for recovering context of this instruction.
Hence exactly one of (0 OP b) and (1 OP b) is true.
Hence the default is now to store 32 bits per Long.
Iden is the basic block containing the direct call.
If Clang's expansion schema matches Swift's, great.
If IV is a no payload enum, we don't care about it.
If SIL parsing succeeded, verify the generated SIL.
If `l' can't record the update, save it to scratch.
If an 'inout' marker was specified, build the type.
If both operands are constants, constant-fold them.
If it exists, move it into position in the diamond.
If it fails, loop around as if 'continue' happened.
If it is not a struct which is a simple type, bail.
If not, remember the / instruction and return true.
If parsing produced an error, don't run any passes.
If replace is an array and not a callable construct
If the case is indirect, then the payload is boxed.
If the closure had an expected result type, use it.
If the edit distance would be too long, we're done.
If the from value is loadable, move it to a buffer.
If the generic signature is empty, this is a no-op.
If the parameter is of function type, it's vacuous.
If the record applies to a specific type, cache it.
If the two values equal, quickly return must alias.
If the value isn't address-only, go ahead and load.
If there is a superclass, it is a direct supertype.
If there is no ID, use session module to create one
If there is no base name, there is nothing to find.
If there is no function body, just suggest removal.
If there's a catch trace for this block, return it.
If there's no interference, we can kill this store.
If this changes, please change PrintAsObjC as well.
If this function is not fragile, don't do anything.
If this global is internal or private, it should be
If this instruction is a skip-barrier end the scan.
If this is a 'mayAppear' diagnostic, then we're ok.
If this is a retain instruction, it also generates.
If this is not ARC-inert, do not do anything to it.
If this type supports a UID, enter it to the cache.
If we already diagnosed this injection, we're done.
If we aren't performing dynamic lookup, we're done.
If we don't have a rethrow destination, we're done.
If we don't have one, skip this release value inst.
If we found a generic parameter, try to resolve it.
If we found a method and its static, null out this_
If we had a best solution, keep just that solution.
If we have a definition already, don't do anything.
If we have a parent type, it's the first parameter.
If we have a requirement/witness pair, diagnose it.
If we have an address, just bitcast, don't explode.
If we have an alternate name for this type, use it.
If we have an lvalue coming in, we expect an inout.
If we have nothing to optimize, / it returns false.
If we haven't run out of solutions yet, we're done.
If we succeeded, get ready to do the member lookup.
If we're aborting we already wrote the end request.
If we're appending to the file, start a new section
If we're in a defer, produce a tailored diagnostic.
If we're referring to an invalid declaration, fail.
Ignore the PBD and just handle the individual vars.
Ignore the error code for removing temporary files.
Implicit conversions are better than checked casts.
Imported type metadata always requires an accessor.
In its usual use as a type, this gets a prefix 'P'.
InOutExpr's are allowed in argument lists directly.
Increase the buffer to prepare for a possible push.
Infer the Objective-C name for a given declaration.
It is useful to show inout for function parameters.
It may still be dynamically the same object though.
Just create the objc_to_thick_metatype instruction.
Just create the thick_to_objc_metatype instruction.
Just decode all IR pointers to unsafe pointer type.
Just use the reference type as a primitive pointer.
Kill the continuation block if it's not being used.
Later, readSILFunction tries to force module scope.
List of all indexed types in the debug information.
Loading a set of default colors for better display.
Local function to record a missing associated type.
Look for any instructions accessing let properties.
Look through the paren expression, if there is one.
Lookup this base name in the module extension file.
Make a copy of the const version of zend_ini_entry.
Make sure corresponding realpath's are also allowed
Make sure our property init vectors are all set up.
Make sure that the function has a Void result type.
Make sure that the protocol list is fully expanded.
Make sure the direct and indirect results are sane.
Make sure we can access the field without crashing.
Make sure we do ARC contraction under optimization.
Mark blocks where the self value has been consumed.
Mark the method to be final, implicit, and private.
Match a word within a name to a word within a type.
Match the result type to the beginning of the name.
Memory Threhsold callback should also be fired here
Merge duplicate loads, and forward stores to loads.
Move argArray to where the second argument belongs.
Mutable lvalue and address-only 'let's are LValues.
NB: This doesn't work for IndirectFixup situations.
Need to let pgm process this and the following args
Need to reverse the backtrace to match php5 xdebug.
Negative offset to the CIE, relative to this field.
No additional bridging needed for native functions.
No options require a module, so don't generate one.
Non-required constructors may not be not inherited.
Non-variadic arguments may follow the variadic one.
Not fully covered switches will be diagnosed later.
Not interested in going outside a basic expression.
Notes:  - You can crash hhvm very easily with this.
OK in the invoking frame when running a destructor.
Okay, allow the binding (with the simplified type).
Okay, pull the next result off the list of results.
On failure, / this leaves the candidate list empty.
On the off chance we were given nothing but crap...
One candidate: produce an error with a fixit on it.
Only Struct and Enum extensions can be transparent.
Only allow CFA opcodes when we're writing an entry.
Only for archetypes, and not for opened archetypes.
Only intended for use by lookupOperatorDeclForName.
Only use the cache if it is not the current module.
Otherwise closure must be a thin_to_thick_function.
Otherwise this is the start of a class declaration.
Otherwise, fall through into the 'other decl' case.
Otherwise, it'll have been separately type-checked.
Otherwise, mark it uninitialized for DI to resolve.
Otherwise, only public functions can be referenced.
Otherwise, skip forward by the size of the element.
Otherwise, we can just take the exploded arguments.
Otherwise, we do support specializing this closure.
Otherwise, we have an abstract storage declaration.
Otherwise, we're casting to SomeProtocol.Type.Type.
Pass the +1 value down into the sub initialization.
Perform a dynamic cast of a metatype to a metatype.
Populate the type bindings with the first solution.
Possibly shrink the string, then add it to the node
Prefer to use a hint from a corresponding phi node.
Pretty-print the declaration so we can point to it.
Prevent bit 6 (CURSOR_FLAG_EXHAUST) from being set.
Process each basic block with the gen and kill set.
Process the basic blocks with the gen and kill set.
Propagate the C++ exception to the outer VM nesting
Propagate the false-value to the dependent entries.
Property decls in type context must bind variables.
Provide special indent/completion behavior for tab.
ProxygenTransport must be released in worker thread
Pseudo-main returns the integer value 1 by default.
Put the call's return address in the link register.
RCIdentityBB must have a valid dominator tree node.
Raise a diagnostic if we run into a prohibited IUO.
Rather, they are understood from the module itself.
Re-use an existing initializer context if possible.
Read failed, error message populated by recv_header
Read the class name from between the two NUL bytes.
Rebuild the sequence from the type-checked version.
Record the caller-side default argument expression.
Record the failure, if we haven't seen one already.
Record the subscript as an alternative declaration.
Redirect f's result's retains/releases to affect x.
Regardless of refCount, this Class is now unusable.
Register copy resolutions for livein sets and phis.
Register the class as the main class in the module.
Reject it on global functions, structs, enums, etc.
Remove redundant checks on a per basic block basis.
Remove this constraint from the constraint mapping.
Remove this when PolymorphicFunctionType goes away.
Replace the load with the definition that we found.
Reset block state before reentering irGenRegionImpl
Retrieve the protocols to which this type conforms.
Retrieves the current source location (file, line).
Return a Context for every function in the Program.
Return control to the next()/send()/raise() caller.
Return false to wait for next interrupt from server
Return infix data representing the precedence of E.
Return the availability context for the given spec.
Return the dispatchable length of the given column.
Return true if we do not need optimistic data flow.
Returns a Variant representing the serialized data.
Returns false if the breakpoint is not well formed.
Returns the location vault of the current function.
Returns the place where to insert the deallocation.
Returns true if the AllocStack is only stored into.
Returns true if there was a match, false otherwise.
Returns true if we successfully read one, or false.
Rotates an image by 180 degrees (counter clockwise)
Rotates an image by 270 degrees (counter clockwise)
SILVTable contains one element declared in Entries.
Scan a string up to width characters or whitespace.
Schedule each predecessor if the input set changed.
Search the type of this context and its supertypes.
See the TBAA section / in the SIL reference manual.
See through implicit conversions of the expression.
Set a flag if the class uses Swift 1.0 refcounting.
Set up a dummy global to stand in for the constant.
Set up the C underlying type as its Swift raw type.
Set up the RegionContext for the tracelet selector.
Since it does not equal our record, we can skip it.
SingleBufferInitializations always have an address.
Skip the case where we find the select_enum element
Skips whitespace (including newlines and comments).
So use a stublogue and "convert" it manually later.
Sort the worklist so that complete items are first.
Source type is always smaller than the target type.
Space wasted by alignment is tracked in these maps.
Specialize the inherited conformance, if necessary.
Specialized emitter for Builtin.bridgeToRawPointer.
Specialized emitter for Builtin.castToBridgeObject.
Specialized emitter for Builtin.castToNativeObject.
SrcRec::newTranslation() makes this code reachable.
Stack depth should be 0 when entering a catch block
Start removing right after the opening parenthesis.
Store info about the default value if there is one.
Store the RefData but do not increment the refcount
Strip extraneous whitespace from vasm code strings.
Success, store the breakpoint and increment the id.
Support for multiple channels added (argb for now).
Swift Varargs are not representable in Objective-C.
TODO(gut) use Decoder, but for now, do it hardcoded
TODO: Arrays currently lower-bound the stride to 1.
TODO: Check that EI is really an IntegerLiteralInst
TODO: Closure contexts should always be guaranteed.
TODO: Support parameter closure with multiple vars.
TODO: add ini setting to turn 'y'/'n' checks on/off
Tables that the pass uses when walking the domtree.
Targets of jmps on x64 must be aligned to 16 bytes.
Tell the type checker not to touch this destructor.
Test intersection for ranges with lower end points.
Test that pointers and indices compare differently.
That matches how we want to use them in most cases.
The 'isascii' bit is lowered as an integer_literal.
The / former latch now dominates the former header.
The block will capture the original function value.
The branch emitted during irgen will deal with this
The callback is a BB argument from the switch_enum.
The compiler should already have initialized these.
The default initial size is a power-of-two minus 1.
The effect an instruction can have on array bounds.
The function in the current module will be changed.
The line number is assumed to be valid in the unit.
The number of tag values used for no-payload cases.
The old basic block is left / without a terminator.
The physical register assigned to this subinterval.
The possible uses are: 1) The initialization store.
The primary motivation is to help with SDK changes.
The quality parameter for gd2 stands for chunk size
The requirement was explicit and required, keep it.
The requirement was inferred or redundant, drop it.
The second time, we do, but we can type-specialize.
The set of archetypes that are currently available.
The specialized function is always a thin function.
The string `key' may not be an integer-like string.
The subexpression must be either 'self' or 'super'.
The witness is less available than the requirement.
The year is divided into 12 months of 30 days each.
Then just as many characters of the MD5(pw,salt,pw)
Then perform the function signature specialization.
There might also be a class with this name already.
There's ABSOLUTELY NO WARRANTY, express or implied.
These are conditions independent of the call graph.
These asserts make sure that the startedCheck work.
They should all happen after super.init is invoked.
Thick metatypes look like pointers with spare bits.
Thin to thick function has no non-callee arguments.
This assumes that the SIL / is already in SSA form.
This can involve chasing a chain of such type DIEs.
This can only remove from the function entry filter
This check is really hinky, but it's what PHP does.
This creates the right type for a getter or setter.
This file implements IR generation for class types.
This file implements the Decl class and subclasses.
This file implements the Expr class and subclasses.
This file implements the Stmt class and subclasses.
This file implements the Type class and subclasses.
This function will allocate the stack if necessary.
This has to happen before we write the first param.
This is available iff it's available in both states
This is not efficient, but this is graphing code...
This is particularly common when testing optionals.
This is straightforward if the superclass is Swift.
This is the white-list of accepted syntactic forms.
This kernel fixed a panic when using MADV_HUGEPAGE.
This maps a module to all its imports, recursively.
This will be a dataflow error if we can reach here.
This will make comparison between locations easier.
This will remove this instruction and all its uses.
Tishri 1 must never be Sunday, Wednesday or Friday.
To mimic PHP5 should return empty array at failure.
Treat unannotated declarations as always available.
True if any instructions were changed or generated.
Try each of the constraints within the disjunction.
Try open the log file and error if it's not working
Try to avoid checking for flags, width or precision
Try to lookup a VTable for Class from the module...
Try to solve for the actual type of the expression.
Two reasons for converting a try_apply to an apply.
TypeInfo for fixed-layout, address-only enum types.
Unfortunate collision with access control keywords.
Update the SILLinkage here if this is a definition.
Update the entry now that we've resolved the macro.
Use "admin" as the default db if none selected yet.
Use our own map to find it and answer the question.
Use parse_url - if it returns false, we return NULL
Use the most significant result from the arguments.
Use the name of the action to determine what it is:
Use this for commenting out debug-print statements.
Verify class name before passing it to __autoload()
Verify we don't have both mutating and nonmutating.
Virt is the block containing the slow virtual call.
WH becomes H, WR becomes R W if followed by a vowel
Walk the expression to associate labeled arguments.
We can get back V if our analysis completely fails.
We can have native-to-foreign thunks over closures.
We can only subtract paths that have the same base.
We didn't find the cursor so we add it to the list.
We do this in dominance order for the constTracker.
We don't allow 'where' guards on a 'default' block.
We don't know how to deserialize this kind of decl.
We don't know how to deserialize this kind of type.
We found an opening curly quote in the source file.
We have a suffix, so determine an appropriate name.
We just buffer them up / until the end of the file.
We might not have interesting initialization to do.
We need to process it _only_ if we decide to break.
We now that the block is guaranteed to be executed.
We split these out into alteredAnt, and alteredAvl.
We want to parse them anyways for proper diagnosis.
We'll copyProp and get rid of this in a later pass.
When we didn't see a colon, this is a nullary name.
Witnesses in classes never have mutating conflicts.
YYINITDEPTH -- initial size of the parser's stacks.
Yet, the previous php_rand only returns 31 at most.
alpha 0 is opacity, so be sure to invert at the end
and it has a return type which is itself a function
automatic allocateable buffer for additional header
bring the palette colors in im2 to be closer to im1
codepage 1252 is a Windows extension to iso-8859-1.
const char *fn: list of magic files and directories
debug_file is the file to output debug messages to.
do nothing but avoid the toString conversion notice
don't treat strings ending with a period as numbers
eh is the innermost fault funclet reachable from b.
else we have negative limit and delimiter not found
for HardBreakPoint, default the frame to the caller
for now, we don't bother with the address whitelist
gcc 4.9 has a bug where it will spit out a warning:
get the significant edge points affecting the pixel
if there was an error in the fetch then don't cache
indicate that we didn't push a value onto the stack
initialize nodes by iterating over PtrMap's regions
keep it in the unknown retain/release list for now.
load glyph image into the slot (erase previous one)
load next chunk to return the exact requested bytes
may happen if wh was scheduled in multiple contexts
may not be initialized if file could not be created
needs to be null-terminated before the reserve call
parameter number validation / variant determination
parseExprArray - Parse an array literal expression.
php5 xdebug doesn't do anything, so we just cleanup
prepareArrayArgs will push arguments onto the stack
pushClsMethodImpl will take care of decReffing name
qualify the filename to prevent extraneous searches
running MethodCreateHook may add methods to builder
scanners can tell us where the pointers are seated.
set, it will fix up any instructions that reference
some drivers might need to describe the columns now
this was the default read timeout in LibEventServer
tok::unknown is a sentinel that means "don't skip".
volatile so we can gdFree it on return from longjmp
widening a branch makes the dest instruction bigger
'Self' in protocol extensions is not dynamic 'Self'.
- The implicit 'self' argument if in a type context.
/ / If Arg is replaced, return the cast instruction.
/ Defines an implicit cast operator on the iterator.
/ In this case we know that the callee cannot throw.
/ This enables debugging and profiling on SIL level.
11) Successors and predecessors sets are consistent.
12 (STOP): no data Marks the end of a LIST or a MAP.
12/13/887605, greater value raises interger overflow
2.0.5: can't use gdTrueColorGetRed, etc with palette
2.0.9, Thomas Winzig: apply simple full transparency
4 bytes or less and value is in the dir entry itself
A lowering for loadable but non-trivial tuple types.
A reference to a subscript found via dynamic lookup.
A reference to the lazily-allocated children vector.
A simple helper interface for buildStorageReference.
API to call from object-data at property resolution.
Accessor for the non-fixed offsets of a struct type.
Accumulative amount of allocated bytes on the stack.
Add a setter to a stored variable unless it's a let.
Add argument labels, then fallthrough to get values.
Add it as a derived global decl to the nominal type.
Add keywords even if type checking fails completely.
Add or remove functions from the debug-set from gdb.
Add the extensions produced by importing categories.
Add the literal instruction to represent the result.
Add the superclass to the list of inherited classes.
Adjust the start of TC relative to hot runtime code.
Advance by the field's size to start the next field.
All non-degenerate affine transforms are invertible.
All vtable entries must be decls in a class context.
Alloc ref dynamic always introduce references at +1.
Allocate match sets array and initialize the values.
An actual segment, append it to the destination path
An explicit graph data structure for the call graph.
Analyze each block to compute its transfer function.
Anything within the inout isn't a parameter anymore.
Apply may only come from a string.concat invocation.
Apply the solution to the iteration pattern as well.
As an example, consider PtrToRMembInt - PtrToRefStr.
As append, but skip a repeated word at the boundary.
As stated above, the linkage of templates is tricky.
Attempt to emit code for the given IRUnit to `code'.
Attempt to hoist a destroy point up to the last use.
Avoid running PHP code when unwinding C++ exception.
Begins a ripemd128 operation, writing a new context.
Begins a ripemd160 operation, writing a new context.
Begins a ripemd256 operation, writing a new context.
Begins a ripemd320 operation, writing a new context.
Blocks change in all sorts of ways, due to bridging.
Both are bitsets, including cases when one is empty.
Builder to be used for creation of new instructions.
But, it's exactly the same as the error noted below.
Call the witness that builds the dictionary literal.
Call-context sensitive return types are cached here.
Can only access private properties via the debugger.
Can't take from a box since the value may be shared.
Cannot have an implicit getter after other accessor.
Check each of the tuple elements in the destination.
Check each of the unsatisfied optional requirements.
Check for an existing context created by the parser.
Check for collisions among Objective-C initializers.
Check if the target is supported for this sanitizer.
Check if the unknown type is in the type remappings.
Check now to ensure that they meet our expectations.
Check the argument types for each of the parameters.
Check to see if we can instsimplify the instruction.
Check whether there's some special method to import.
Check whether this entry matches any existing entry.
Check whether we inherited from the same type twice.
Check whether we've already cached this information.
Check whether we've already created the constructor.
Checking and caching of Swift protocol conformances.
Chop off a "lib" prefix if we're building a library.
Claim the correct number of inout arguments as well.
Claim the next N inner args for this inner argument.
Clone the arguments from header into the pre-header.
Coerce an 'is' pattern by determining the cast kind.
Collect any builtin types referenced from this type.
Collect the complete set of generic parameter types.
Collect the increment insertion point if it has one.
Collect values defined in the loop but used outside.
Combine the whitespace after ':' into the type name.
Commands elements in ExecutionContext::getCallerInfo
Compare each declaration to every other declaration.
Completely ignore attributes that aren't serialized.
Compute dominator tree node levels for the function.
Compute the distances for all loops in the function.
Compute the genset and killset for this instruction.
Conformance loaders for declarations that have them.
Conservatively return that it might be inaccessible.
Consider all alloc_box instructions in the function.
Constant fold indexing insts of a 0 integer literal.
Constants for seconds per minute, hour, day and week
Context could be either a this object or a class ptr
Copy the call result to the destination register(s).
Copy the two apply instructions into the two blocks.
Crawl through our uses and look for a physical hint.
Create a string buffer and append the directory name
Create a struct with the underlying type as a field.
Create a stub body that emits a fatal error message.
Create an optimized version of the current function.
Create the closure expression and enter its context.
Create the root node of the tree with our base type.
Currently ObjC enums always have integer raw values.
Currently inferred information about a PHP function.
DV entry points must be in the primary function body
Decompose the parameters for subscript declarations.
Define the global variable for the conformance list.
Deprecated IDE uses this, so keep it around for now.
Derive the storage type from the initStorage method.
Detaches the xdebug profiler from the current thread
Determine if the method is a property getter/setter.
Determine the semantics of a checked cast operation.
Dig out the StringInterpolationConvertible protocol.
Dig the open-existential expression out of the list.
Don't apply this to single-expression-body closures.
Don't do anything else if we don't have a parameter.
Don't optimize callees that should not be optimized.
Don't visit CoerceExpr with an empty sub expression.
Don't write anything if there are no generic params.
Dynamic cast the object to the resulting class type.
Eat the code completion token because we handled it.
Either the storage itself was imported from Clang...
Emit a Protocol* value referencing an ObjC protocol.
Emit a call to do an 'initializeWithCopy' operation.
Emit a call to do an 'initializeWithTake' operation.
Emit a call to the 'storeExtraInhabitant' operation.
Emit a concrete implementation of materializeForSet.
Emit a conformance error through conformsToProtocol.
Enter a new generic context if this type is generic.
Enter a new scope for the type witnesses hash table.
Enumerates the optimization kinds that we do in SIL.
Eval stack depth should be the same at merge points.
Everything else goes into its redeclaration context.
Everything else requires a shared accessor function.
Expect the option value's first character to follow.
FIXME: Basically the same as SerializedModuleLoader.
FIXME: Handle 'self' along with the other arguments.
FIXME: It'd be nice not to need a runtime call here.
FIXME: Swift diagnostics currently have no category.
FIXME: The outer parentheses may be superfluous too.
FIXME: The source location here is completely bogus.
FIXME: This should not take down the entire process.
FIXME: This should use ExprWalker to print children.
FIXME: We'd prefer to keep what the user wrote here.
FIXME: more robust way to determine the option type.
FIXME: non-first character matches are all the same.
Failure block: branch out to the continuation block.
Fast path: avoid an unnecessary temporary explosion.
FastCGITransport doesn't run in the same event base.
Figure out the class in which this subscript occurs.
Find compiled pattern matcher in hash map or add it.
Find instruction boundaries and branch instructions.
Find the top-level ValueDecl or Module given a name.
Find the unique declaration that has the right kind.
Finish emitting guards, and emit profiling counters.
First check for an existing connect, and reuse that.
First get the path to a state where we don't have ..
First remove any block not reachable from the entry.
Fix up the string parameters to have the right type.
Fold the result into the optional evaluation or try.
For a protocol, substitute the base object directly.
For most types, we can just emit the usual metadata.
For peek/poke instructions, this function returns 0.
For pinning addressors, we have to push a writeback.
For resources, we fall back on the Variant machinery
For the nodes corresponding to each type variable...
Force load adapter modules for all imported modules.
Forget any information about stack values in memory.
Forward references are not allowed at the top level.
Forward the existing return argument to a new BBArg.
Function used to construct the right string literal.
Gaining control of these threads is the intention...
Generic Parameters are visible in the function body.
Get headername for tag_num or nullptr if not defined
Get the REPLInput object owned by the REPL instance.
Get the expected type of a dynamic method reference.
Get the file-name to group map if parsing correctly.
Get the fragile type information for the given type.
Given a type, determine if it is pointer followable.
Global DCE can change types of locals across blocks.
Go through the string and quote necessary characters
HACK: don't type-check the same function body twice.
Hack to deal with unannotated Objective-C protocols.
Handle switch / case, indent unless at a case label.
Handle the case where the constraint is a type alias
Has only an effect if the -gsil option is specified.
Hash and lookup the type-protocol pair in the cache.
Helper function for whether to emit a function body.
Host (string) and port (max 5 digits) + 2 separators
If F is transparent, we should always emit its body.
If a decimal point/exponent is found, it's a double.
If a dependency went unsatisfied, just return false.
If address-only, make a +1 copy and operate on that.
If any of the types changed, rebuild the tuple type.
If both types are vectors, look through the vectors.
If compared against a boolean, convert to a boolean.
If file doesn't look like any sort of text, give up.
If file is null, opening the passed filename failed.
If it's the same requirement, we can derive it here.
If its not persistent, we must make sure its loaded.
If no generator/element pair exists, solve for them.
If not, we may have an implicit conversion going on.
If one parameter is variadic and the other is not...
If that failed, convert the type, cache, and return.
If that field is trivial, we do not care about it...
If the outer is indirect, force it into the context.
If the parameter is consumed, we have to emit at +1.
If the parent is directly at the top, it's implicit.
If the reference isn't to a constructor, we're done.
If the source type isn't a metatype, the cast fails.
If the trigger has already been claimed, do nothing.
If the witness is 'throws', the requirement must be.
If the witness is invalid, record that and stop now.
If there already is a result, check it for conflict.
If there are extra tag bits, switch over them first.
If there are no prefixes, just dump all the results.
If there are no tokens, there is nothing to convert.
If there is a basic block argument list, process it.
If there is any such data, it will be uninitialised.
If there's no representation difference, we're done.
If this argument is live, but we cannot optimize it.
If this class needs an implicit constructor, add it.
If this is a boxed variable, we can use it directly.
If this is a release instruction, it also generates.
If this is an accessor, use the name of the storage.
If this is an enumeration, use the first enumerator.
If this is testing for one case, do simpler codegen.
If this pass invalidated anything, print and verify.
If toType is not an enum, handle it like a singleton
If we actually solved something, record what we did.
If we are tracking leaks, stop tracking this object.
If we delayed emitting this witness table, force it.
If we did any string manipulation, cache the result.
If we do not have a release_value or strong_release.
If we do not have a retain_value or strong_retain...
If we don't, we must have a single source parameter.
If we emitted into the provided context, we're done.
If we found a store, record its source and erase it.
If we have a binding for this parameter, we're done.
If we have a callback to report dependencies, do so.
If we have a context, make sure it is an identifier.
If we have a lookup table, add the new member to it.
If we have an existential, look at its dynamic type.
If we have an optional type, try to force-unwrap it.
If we're supposed to visit submodules, add them now.
Ignore pieces of the range that go onto other lines.
Ignore retains of the struct/enum before the return.
Implicitly break out of the pattern match statement.
Implode into a maximally-abstracted indirect buffer.
In Cygwin, it is defined as wchar_t which size is 2.
In other words X * -1 does not does not guard X * 1.
In that case, we perform fewer serialization checks.
In the success path, emit the 'then' part if the if.
Index into the layout table for the assigned layout.
Initially assign each region block to its own chain.
Instructs the JNI environment to throw an exception.
Invalidate analysis information related to branches.
It converts a gd Image to bw using a threshold value
It is Adar II or later - don't need the year length.
It is meant to be fast, but not as fast as possible.
It is ok if we store into the alloca pointer though.
Iterator over the arguments (phis) of a basic block.
JPEG do we have the data area and what to do with it
Just make sure that the actual conventions match up.
Keep the number of LSLocations in the LocationVault.
Keep track of the fact that we're inside of an enum.
Known mapping of archetypes in all arguments so far.
Label source of conditional branches with "T" or "F"
Lastly, BC markers are updated in all callee blocks.
Lazily print any debug locations used in this value.
Leave a cleanup to deinit the existential container.
Lengths can be sent as either bytes or double words.
Like the Prop* instructions, but for array elements.
Line and column where highlight should start and end
Link in all protocol conformances that this touches.
Local function to add properties from the given set.
Local variables: tab-width: 4 c-basic-offset: 4 End:
Look for a matching imported or deserialized member.
Look through one level of optionality on the source.
Look to the referenced member in a self-application.
Main loop to parse JPEG2000 raw codestream structure
Major version 0 does not have stable minor versions.
Make a local copy and adjust rve to be in terms of s
Make sure code completion is on the right hand side.
Make sure the instruction itself is tagged properly.
Make sure to return something of the requested type.
Make sure we bracket all notes as "sub-diagnostics".
Map each global initializer to a list of call sites.
Map the argument number into an argument expression.
Map the remaining SIL parameters to LLVM parameters.
Mark the bits we'll use as occupied in both bitsets.
Mark the vardecl to be final, implicit, and private.
Mark the wait handle as failed due to PHP exception.
Match up the parents, exactly, if there are parents.
MaxStoreSet is optimistically set to true initially.
Mem2reg/load forwarding will clean things up for us.
Member functions need some special validation logic.
Merge the old latch with the old header if possible.
Methods from extensions don't go into vtables (yet).
Must have at least one protocol to be class-bounded.
NB: We don't report the SweepNode size in the stats.
NOTE: do not use primary file NOTE: do not use files
Need this to prevent "bad pass by reference" errors.
Need to make sure keys and values are all uncounted.
Next token is a comment, which counts as whitespace.
No "visit" since TypeLocs are not a class hierarchy.
No actual getter or setter, pass 'pseudo' accessors.
No parameter passed, this means we should autodetect
No-payload elements do not affect address-only-ness.
Non-async generators always return Generator object.
Non-member observing properties need an initializer.
Non-pointer and nativeArg args, are passed by value.
Not a union type and not a special case: 1 register.
Not supported yet (not easily computable for APInt).
Note that APCLocalArray can never return KindOfRefs.
Note that the constructor leaves this uninitialized.
Note that we don't recurse into any child DIEs here.
Now iterate over the BBs and fix up the terminators.
Now we know that CSDesc is profitable to specialize.
Now we know that Right is None and Left has a value.
Number of bits in the value, ignoring leading zeros.
OK, we don't have enough memory, let's do something.
ObjC protocols need no layout or witness table info.
Objects can raise a warning about converting to int.
Obtain the unbound variant of the current superclass
On each subsequent predecessor, check the arguments.
Only classes can appear directly in "use" statements
Only instance methods returning () can be IBActions.
Only visit the members for a class defined natively.
Other types should not structurally contain lvalues.
Otherwise just propagate through the parameter info.
Otherwise, assemble the tuple value and manage that.
Otherwise, continue looking for more arc operations.
Otherwise, if a comma exists consume it and succeed.
Otherwise, insert at the end of the current section.
Otherwise, query specifically for the original type.
Otherwise, return a dataflow result containing a +1.
Otherwise, store to the destination and return true.
Otherwise, the following line sets YYVAL to garbage.
Otherwise, we can't default initialize this binding.
Otherwise, we don't know what happened, return none.
Otherwise, we must have imported a single parameter.
Otherwise, we need to build up a new parameter list.
Our assumption on how many times a loop is executed.
Our insert point is going to be the terminator inst.
Overwrite the body of the existing TopLevelCodeDecl.
PHP5 xdebug returns false if the callee is top-level
Parameters are handled specially in addParameters().
Params' OuterParameters will point to contextParams.
Parse the inherited type (which must be a protocol).
Per must-alias-set state information for rc_analyze.
Perform iterations until we do not make any changes.
Perform name lookup for the first and second pieces.
Perform semantic annotation/loop base optimizations.
Perform top-down type coercion on the given pattern.
Point to the beginning of the (possibly new) buffer.
Populate the may-alias-sets for each must-alias-set.
Pretty-print the SILModule to the designated stream.
Print out the lookup tables for the various modules.
Produce a tailored diagnostic for structs and enums.
Protocol extensions cannot have inheritance clauses.
Put the constraints back into their original bucket.
Raise offset is set to the offset of the current PC.
Random examples to stress option types, values, etc:
Reabstract it to the substituted form, if necessary.
Rechain the predecessors to go to the new preHeader.
Record the fact that we're opening this existential.
Reference the next uncurrying level of the function.
Relabel the indices according to the subscript name.
Relocate STACK from its old location to the new one.
Remember that we have this type metadata concretely.
Remove all instructions following the noreturn call.
Remove any location filter that may have been setup.
Replace by unconditional_cast, followed by a branch.
Retrieve the interface type for this inherited type.
Retrieve the nearest enclosing nominal type context.
Retrieve the symbol by treating it as an expression.
Return breakpoints add function + class (optionally)
Return the full source range of this parameter list.
Return true if we moved or deleted any instructions.
Returns the current type expansion analysis we are .
Returns the expected input flavor of stack slot idx.
Returns true if any inlined frames were marked dead.
Returns true iff provided wait handle was abandoned.
Rewrite the branch operand for each incoming branch.
Rotate loops recursively bottom-up in the loop tree.
Round the physical size up to the next power of two.
SILArgument blocks if it defines the released value.
SMA data model is defined in 'swift::sma' namespace.
Save the size into the Objective-C metadata as well.
Search the pathlist for any of a list of font names.
Second step: create defer-edges for block arguments.
See if spare bits fit into the 31 bits of the index.
See the GNU General Public License for more details.
Separate forward declarations from the class itself.
Set our BB list to have this function as its parent.
Skip components that have no unbound type variables.
Skip past the stuff we saved for the intercept case.
Some methods are forced to be statically dispatched.
Source is native, so we can convert signature first.
Special case for specifying no fixits should appear.
Specializations of private symbols should remain so.
Specialized emitter for Builtin.castToUnknownObject.
Store the data pointer, if any, transferring the +1.
Store the return value on the top of the eval stack.
Strip off a single level of uncurried function type.
Systemlib files were all parsed by hphp_process_init
TESTING  This algorithm has been tested in two ways.
TODO(9604438): Protect against script does not exist
TODO: This is only valid for arithmetic expressions.
TODO: Update for EnumPayload implementation changes.
Take the address argument and cast it to RawPointer.
Takeover didn't complete in 30s, stop the old server
Tell the type checker not to touch this constructor.
The FP from the DefInlineFP we're seeking to remove.
The HHVM ini option becomes the standard PHP option.
The adjacency information has something extra in it.
The affected range starts from the previous newline.
The callback storage parameter on materializeForSet.
The candidate-specific matching data and algorithms.
The cast can't change the representation at runtime.
The cleanup we pushed to destroy the local variable.
The compiler and execution environment for the REPL.
The defaulted protocol associated with this binding.
The destination block for a 'fallthrough' statement.
The epilogue release matcher we are currently using.
The final result will be added to the first context.
The heavy lifting happens when visiting expressions.
The identifying information for a generic parameter.
The isa is the metaclass pointer for the root class.
The normal case here is an overridden public method.
The object is / uninitialized except for its header.
The offset from the beginning of a box to its value.
The operand must be a function type or a class type.
The other known protocols aren't special at runtime.
The outermost list appears first in the module file.
The pointer in the slot should still have been null.
The remaining bits in the extra tag bytes are spare.
The remaining lookups will be in the parent context.
The required attribute only applies to constructors.
The set of locals that were ever live in this block.
The string `key' must not be an integer-like string.
The total number of LLVM instructions in the module.
The type can serve as its own / abstraction pattern.
The type witness is still missing: create a new one.
The user has a chance to override it with an option.
The witness is less accessible than the requirement.
The witness is not rethrows, but the requirement is.
Then add the BB as a subregion to its parent region.
Then create the pre-header and connect it to header.
There isn't a really strong reason for this, though.
There may be only one instruction before the branch.
There's no need to incref since it came from m_this.
These / may indirectly access the struct's elements.
These are all of the variables that we are tracking.
These are tests for some unrepresentable bit combos.
These array semantics calls do not capture anything.
They all should be loads, so that we can replace it.
This also allows a faste implementation of getText()
This can originate if the client initiated shutdown.
This drops the empty list from the doc comment body.
This file implements IR generation for struct types.
This file implements the Lexer and Token interfaces.
This functions would simplify the code as following:
This is a pseudo-copy of the logic in sync_regstate.
This is a shallow size function, not a recursive one
This is a stronger guaranteed than we actually need.
This is very similar to transparency of expressions.
This means that we can only look through cond_br/br.
This pass tries to merge blocks and cleanup the CFG.
This suggests the debugger client has made an error.
This will free the locals for us in the normal case.
Tishri           The first month of the Jewish year.
Track whether we've added any storage to our layout.
Translate the owning declaration into a DeclContext.
Trim off anything that follows a non-space character
Try to find a tracked free block of a suitable size.
Try to resolve the witness via explicit definitions.
Try to see if enum_switch covers all possible cases.
Try to split outgoing edges of each reachable block.
Try to strip off the RCIdentityPreservingArg for IV.
Turn on optimizations and remove all runtime checks.
Type check the body of each of the function in turn.
Typechecking arrays can blow up the stack currently.
Unconstrained protocol extensions are always usable.
Unreachable code could result in a null return here.
Unused, to keep memory and peak_memory the same size
Update the class extents on the new metadata object.
Use a given cdecl name for native-to-foreign thunks.
Use it as the initializer for an anonymous constant.
Use the StackPromoter as a wrapper for the function.
Use the header from the transport if it is available
Used to limit the / size for stack promoted objects.
Used to test SimplifyCFG::simplifyArgs with sil-opt.
Useless copies of address-only types look like this:
Value parameter pointers can't alias or be captured.
Value witness methods for an arbitrary trivial type.
Values of mode other than 0-9 are treated as mode 0.
Verify consistency of all of the nodes in the graph.
Visit all the instructions, looking for apply sites.
Wait until all of our workers threads have finished.
Walk an inout expression, checking for availability.
We are not interested in handling that case anyways.
We assume that cold block take very long to execute.
We could further optimize by storing more type info.
We don't have the class or the typedef, so autoload.
We don't know how to deal with other extended types.
We don't need more bits than the size of the result.
We don't require a prefix or pattern for the default
We don't want to visit blocks outside of the region.
We generate initializers specially for unions below.
We have extra inhabitants if the first element does.
We know all Objective-C protocols have unique names.
We must not acquire a reference if it in that state.
We need an extra incref for the push onto the stack.
We now know closest, but first try to allocate exact
We only handle strong_release and destroy_addr here.
We should never have null func pointers to deal with
We should never see the OpenCL builtin types at all.
We should only ever const prop for FPassL right now.
We should treat both open and close brackets equally
We use null patterns to mean artificial AnyPatterns.
We will emit a diagnostic about the property itself.
We're all done with the tails now, so throw them out
We're synced up, mark the affected range and return.
We've already walked all the children we care about.
We've split critical edges so we can't preserve CFG.
Whether the expr is of statically inferred metatype.
Will be diagnosed as an unterminated string literal.
Write an .eh_frame section that covers the whole TC.
Write functions until we reach the LineLimitPerFile.
adapted from Zend php_var_export and php_addcslashes
an unidentified / store) is classified as mayModify.
assign ids to 0Closure and use parameters (closures)
build the old simple array for imap_listsubscribed()
cached to avoid locked map lookup in the common case
cast tests Bad types and null pointers should throw.
churn through str, generating array entries as we go
default implementation scans for ambiguous pointers.
dyn_cast_or_null Bad types and null pointers are ok.
emitBuiltinCall - Emit a call to a builtin function.
event has finished, but process() was not called yet
exponent has 7 bits, but 8 is the right value in b2d
extract lower byte clear lower 32bits on destination
find out which PHP function to call with what params
for cleaner valgrind output when gethostname() fails
http method not explicitly given, choose default one
if first instruction is a li, it's using 16bits only
image width and height respectively Output: 5, 6, 7.
initialize font library and font cache on first call
must be in this order (or have the cal adopt the tz)
no static context class, so this will raise an error
now, perhaps, adjust the far end of the line as well
only looks at the interfaces if the method is public
reached end of stream without finding what we wanted
reserve workspace for building each individual field
return true iff the pseudomain needs to be executed.
returns TRUE if a is an ID separator FALSE otherwise
since Zend auto allocates space for vars, this is no
skipUntil also implicitly stops at tok::pound_endif.
strtod for IEEE-, VAX-, and IBM-arithmetic machines.
super.init() already called, just release the value.
super.init() has not been called yet, proceed below.
this function has side effects, and it's supposed to
this is a hack to preserve some dynamic entry points
this isn't thread-safe, but probably not a huge deal
we already scanned p's body as part of scanning RDS.
we could go nuts here, but it's likely not worth it.
'_' cannot be a type, so it must be a parameter name.
'continue' with no label ignores non-loop structures.
(Admittedly these are the same as Swift's right now.)
(overwrite previously computed value if there is one)
/ / Create a single preheader and single latch block.
/ A value of -2 means: not known and not visited yet.
/ TODO: this should be cached in RCIdentity analysis.
/ This tests the expand function in LSLocation class.
3) An assign to the box, which happens at super.init.
@objc enums and protocols always have a fixed layout.
A convenient method for succeeding at a dynamic cast.
A declaration that can become a witness has shown up.
A lowering for loadable but non-trivial struct types.
A moment of convenience, a lifetime of compatibility.
A same named function is not a constructor in a trait
A type that is properly aligned for any stack member.
A utility function for cloning the apply instruction.
A value of class type is a single retainable pointer.
A wrapper has already been registered for that scheme
Access the base as inout if the accessor is mutating.
Add a suffix node if there's anything left unmangled.
Add internal analysis passes from the target machine.
Add operator methods from the given declaration type.
Add the last (match, offset) pair to the return value
Add type variable for the code-completion expression.
All cast operations currently return null on failure.
All implementations of derived classes may be called.
An alloc_box returns its address as the second value.
And now, just to make sure things don't run too fast.
Apply and return the closure in the function context.
Arguments of the new StringLiteralInst to be created.
As currently written, it also works on non-ssa input.
Asserts / that there are at least so many characters.
Assume whoever's doing this knows what they're doing.
Async generators always return AsyncGenerator object.
At least one operand to OR must have the top bit set.
Avoid indirect call, as we know it is a packed array.
Avoid later argument label fix-its for this argument.
Await child and suspend the async function/generator.
Be conservative if the dest may be the final release.
Because v1 was shared, we know this won't release it.
Bitcast to swift.refcounted*, and retain the pointer.
Block ourself until we are released to start working.
Both input and output are exploded tuples, easy case.
Build the conformance record, if it lives in this TU.
Bump the 'curx' and 'cury' to point to the next pixel
But it could just happen by bad luck, so just log it.
But: this might be not the case if BB is unreachable.
Calculate the names to search for: fqdn and wildcard.
Callers are not designed to deal with PHP exceptions.
Calls with a depth other than default should be rare.
Can't hoist instructions which may have side effects.
Can't resolve this to a literal name at emission time
Careful: this isn't necessarily the real entry point.
Carry the rvmfp to VM stack around on all vasm calls.
Check for this and recover nicely if they wrote that.
Check if Inst is located before (or at) the last use.
Check if Start can decrement or check Op's ref count.
Check if any jump-threading is required and possible.
Check if the name conflicts with a reserved typehint.
Check if the next instruction is an acceptable FCall.
Check if the partial_apply has generic substitutions.
Check if this invocation should execute a subcommand.
Check if this protocol is implemented in its adapter.
Check if we already have a pre-exit block, return it.
Check if we have 'didSet'/'willSet' after attributes.
Check that a normal protocol conformance is complete.
Check that the use of an Array element is safe w.r.t.
Check that this alloc_stack is initialized only once.
Check the context, introducing the default if needed.
Check to make sure we are dealing with a regular file
Check to see if we've already seen this tuple before.
Check whether any of the substitutions are dependent.
Check whether there are any unsatisfied requirements.
Check whether we already know about this conformance.
Check whether we have a macro defined in this module.
Check whether we have an apply initializing the enum.
Check whether we've already translated this protocol.
Checks if we don't need to import the typedef itself.
Clang expects this to be like an actual command line.
Classes and Objective-C existentials bridge verbatim.
Classes with separate class hierarchies do not alias.
Classify the type according to its stored properties.
Cleanup any created chunks from the chunks collection
Clear the cache if we haven't refreshed it in a while
Clone the given generic parameters in the given list.
Coercion from archetype to its (concrete) superclass.
Collect the decrement insertion point if we have one.
Collect the native arguments, which should all be +1.
Compare specializations only if `rhs' is specialized.
Compute the genset and killset for every basic block.
Compute the interface type of the given enum element.
Compute the options we want to use for type checking.
Computes the length of a concatenated string literal.
Conversion instructions (and others of similar form).
Convert a semantic rvalue to a value of storage type.
Convert strings in the specified array back to UTF-8.
Convert the array mutably if it's being passed inout.
Convert the indirect parameter to a direct parameter.
Convert the inverted S-boxes into 4 arrays of 8 bits.
Convert to a symbol name by replacing the USR prefix.
Copies that are required at a given position or edge.
Copy the captures from the source to the destination.
Copy the location information into permanent storage.
Create a 'let' binding to stand in for the RHS value.
Create a gd-format image from the JPEG-format INFILE.
Create a pattern binding to initialize the generator.
Create a potential archetype for this type parameter.
Create an Initialization for an uninitialized buffer.
Create direct outer results for each of the elements.
Create the pattern binding decl for the storage decl.
Create the thin function type for the cloned closure.
Create the type variables for the generic parameters.
Currently only AAWH utilizes this to handle failures.
Custom GETCFN to reset completion state after typing.
DeallocStackInst do not use reference counted values.
Decide between the binary, prefix, and postfix cases.
Decodes input (unsigned char) into output (uint32_t).
Default number of rounds if not explicitly specified.
Defined at top level, in the same unit as the caller.
Describes the kind of string literal we're importing.
Deserializes a CmdBreak from the given Thrift buffer.
Detaches the xdebug profiler if it's no longer needed
Determine if this is a copy *from* or *to* "Pointer".
Determine the module name from the Clang declaration.
Determine the options associated with the given type.
Determine the type and generic args of the extension.
Determine what the user has asked the frontend to do.
Determine which kind of array semantics call this is.
Diagnose a class that does not have any initializers.
Do key permutation and split into two 28-bit subkeys.
Do not remove bodies of any functions that are alive.
Don't allow cleanups to escape the conditional block.
Don't inherit (non-convenience) factory initializers.
Don't outdent if we weren't at the start of the line.
Drop the value and don't bother with precise effects.
Dynamic 'Self' in the result type of a function body.
Early check to avoid scanning unrelated instructions.
Emit a checked cast, starting with a value in memory.
Emit a copy of this value with independent ownership.
Emit an 'initializeBufferWithCopyOfBuffer' operation.
Emit an 'initializeBufferWithTakeOfBuffer' operation.
Emit the native deallocating destructor for -dealloc.
Enable address top-byte ignored in the ARM64 backend.
Encodes input (uint32_t) into output (unsigned char).
End recursion if we found a concrete associated type.
Ensure the result is null-terminated after the strcpy
Erase the local conflicts from the list of conflicts.
Everything before is assumed to be the command string
Everything from here on is some kind of pointer type.
Everything is defined in the naming environment here.
Existential metatypes do not contain type parameters.
Exit the scope introduced for the generic parameters.
Extract port number from a host in case it's inlined.
FIXME -- offer a fixit to explicitly specify the type
FIXME(thread-safety): the walker is mutating the AST.
FIXME: Check base/member types through substitutions.
FIXME: Egregious hack to set an 'override' attribute.
FIXME: It seems like this should be easier to detect.
FIXME: Need a better locator for a pattern as a base.
FIXME: Short-circuit if any of the constraints fails.
FIXME: Should be the interface type of the extension.
FIXME: The naming and documentation here isn't ideal.
FIXME: This is a general property of the type system.
FIXME: This stack operation is painfully inefficient.
FIXME: cache the physical field index in the VarDecl.
FIXME: file type bonus if we're checking a file path.
FIXME: this should distinguish between key and value.
Fallthrough transfers control to the next case block.
Fetch the error result slot received from the caller.
Figure out if we need the value to be in a temporary.
Figure out the representative for this type variable.
Figure out what stream we are supposed to write to...
Figure out what we're actually still required to pass
Fill out an array with the field type layout records.
Fill the first block predictions with the live types.
Find out how many processes are using this semaphore.
Find the code that performs the initialization first.
Find the first identifier bound by the given binding.
Find the layout metadata pointers for these elements.
Find the nearest containing function or nominal decl.
Find the underlying condition value of the cond_fail.
First arg is pointer to storage for that return value
First attempt to get the BB where this value resides.
Fix up any forward jumps that reference to this Label
Fixup SSA form for loop values used outside the loop.
For HTTP/1.1 conforming clients and the rest (MSIE 5)
For each of the archetypes, compute the substitution.
For example consider bit-casting a pointer to an int.
For example we could have an IterPos and an IterBoth.
For now, all control flow instructions are essential.
For static/class members, drop the metatype argument.
For unconditional jumps, just set env.sk to the dest.
Force the given result into the given initialization.
Foreign overrides currently don't need reabstraction.
Fortunately this doesn't actually matter in practice.
Fortunately, this code is very x86 specific anyway...
Frame pointer (CFA) for previous frame is in RBP + 16
Gather the value witnesses for the given requirement.
Generate specific error messages for unary operators.
Generate the closure function, if we haven't already.
Generate the genset and killset for each basic block.
Generic tuple value witness for 'initializeWithCopy'.
Generic tuple value witness for 'initializeWithTake'.
Get a pointer to the storage type for the given type.
Get metadata for the dynamic Self type if we have it.
Get substitutions, if source is a bound generic type.
Get the field offset vector from the struct metadata.
Get the set of let properties defined by this struct.
Get weight of this magic entry, for sorting purposes.
Given the bit, get the LSValue from the LSValueVault.
Go through list of global variables in the SILModule.
HEADER Metadata required for reading the completions.
Handle atomic ops on pointers by casting to intptr_t.
Handle contextual type, result type, and returnsSelf.
Handle this by diagnostic various cases that come up.
Heap metadata for runtime-instantiated generic boxes.
Here we just emit the behavior witness table, if any.
Hoist bounds check in the loop to the loop preheader.
Hook called on request start before main() is invoked
I am squinting at you simplifySwitchEnumToSelectEnum.
If DestroyPoint is a block terminator, we must hoist.
If `rhs' is a constant, we must be the same constant.
If all such instructions cannot use Op, return false.
If any of AI's arguments must alias Ptr, return true.
If both ops are not constants, we cannot do anything.
If it doesn't, / issue a diagnostic and return false.
If it's a php-exception, we'll go to the taken block.
If necessary, add delayed members to the declaration.
If so, we can fold this into the copy_addr as a take.
If the PUE is not a negation expression, return false
If the base names are different, they can't conflict.
If the conformance is resilient, this is always true.
If the decl ref is nil, just insert at the beginning.
If the decl ref was emitted, emit after its function.
If the field is the one we are extracting, skip it...
If the name we found matches, report the declaration.
If the name word is shorter, try for a partial match.
If the next token is '_', parse a discard expression.
If the origin *is* the destination, we can stop here.
If the param is not a 'let' and it is not an 'inout'.
If the piece is zero, this doesn't affect the switch.
If the property has storage, emit the ivar name last.
If the type conforms to this protocol, we're covered.
If the type involves a type variable, don't cache it.
If the type is not dependent, there's nothing to map.
If the type is simple, just print the tuple elements.
If the value being stored is a call to self.init()...
If there are no substitutions, return an empty array.
If there was a foreign error convention, consider it.
If there was no such argument, leave the argument unf
If there's no superclass, there's nothing to inherit.
If this Objective-C class has a supertype, import it.
If this instruction can not read or write any memory.
If this is a getter/setter for a funcdecl, ignore it.
If this is a read from a global let variable, map it.
If this is a reference to a type, produce a metatype.
If this is a resilient conformance, copy in the rest.
If this is a simple PatternBinding, use its location.
If this node has a parent and that parent is alive...
If we actually resolved the member to use, return it.
If we already had an error, don't repeat the problem.
If we are not exiting, check pointers using HeapGraph
If we can bridge through an Objective-C class, do so.
If we can't lower the original storage type, give up.
If we cannot seek, it must be a pipe, socket or fifo.
If we don't want to emit now, remember how for later.
If we fail to do so, blot this SILValue and continue.
If we fail, blot this ref counted value and continue.
If we found a property accessor, import the property.
If we found an explicit ClosureExpr, update its type.
If we have a successor, add ourself to its prev list.
If we have a trailing where clause, deal with it now.
If we haven't made progress, don't add the parameter.
If we see any lowercase characters, we can lowercase.
If we want member types only, use member type lookup.
If we were able to move the retain down, move it now.
If we're not in a local context, this is unnecessary.
If we've bound names already, verify as a bound node.
If you have an implicit location, use createImplicit.
Ignore let values captured without a memory location.
Import an NS_ENUM constant as a case of a Swift enum.
In CapCode encoding, we always minimize the exponent.
In both cases, we need to expose a materializeForSet.
In such a case, the SILArgument must be rc-identical.
Index of the first non-inherited field in the layout.
Index will be None so the Projection will be invalid.
Indicate this fact by setting ignore to true as well.
Inform the context that we have external definitions.
Initialize structure containing state of computation.
Integrate the chunk of payload into the result value.
Intentionally higher in case ICU adds more constants.
It also performs some branch/setcc fusion as it goes.
It is Tishri or Heshvan - don't need the year length.
It's changed everywhere except here in xdebug's code.
It's not really the closest* molad that we want here.
It's up to the callee to constrain further if needed.
Iteratively simplify while there is still work to do.
Jump threading is expensive so we don't always do it.
Just invoke its accessor function to get its address.
Keep GC from asserting on freed string in debug mode.
Lex things like 4.x as '4' followed by a tok::period.
List of fields in the object which should be ignored.
Local function that simply produces a failing result.
Local function that skips over any claimed arguments.
Look for the disjunction that binds the overload set.
Look through TryExpr or ForceValueExpr, but not both.
Low bits are made available by heap object alignment.
Lower the parameters in the callee's generic context.
MMC values must match pecl-memcache for compatibility
Make a pass to find if we can kill any of the frames.
Make a second pass for all the protocol conformances.
Map the base value to its substituted representation.
May be a scalar on iOS/watchOS (because of WatchKit).
May be top bit is not set in the value being shifted.
Member subscripts need some special validation logic.
Merge the basic block with its successor if possible.
ModuleWrapInvocation should share its implementation.
Modules and file units can always handle name lookup.
More than one arc with unknown weight, so can't infer
Must be a method within a class or extension thereof.
Must be a value that dominates the start basic block.
Native Swift class metadata is also the class object.
Native Swift super calls to final methods are direct.
Never add materializeForSet to readonly declarations.
New Rule: never repair potential malicious user input
No context for arg, so make assupmtion based on value
Note that File + Dir need not result in a valid path.
Note that both function arguments must be identified.
Note that this function could be called concurrently.
Note that this method is not used for all decl kinds.
Note: the only flag which is implemented is FLUSHABLE
Nothing to clean up after taking the class reference.
Nothing to do: these have the curried 'self' already.
Notice that we need to handle underflow and overflow.
Now that we know we have an inst, grab the decrement.
Now the partial apply /    will own those ref counts.
Now we need to build up the list of function records.
Now, check the inheritance clauses of each parameter.
Null out temp local, to invoke any needed refcounting
O(n + m log m) for n keys total and m in the hotlist.
Object that frees a buffer when it goes out of scope.
Objective-C protocols do not have any witness tables.
Ok, TargetInst is after all of the interesting insts.
Older OSs' libobjcs can't handle class property data.
On OS X and iOS, swift_once is implemented using GCD.
Only Objective-C classes can violate this assumption.
Only extract linkage information from the definition.
Only predict objectness, not the specific class type.
Only works for a module interface document currently.
Open the connection and get the first set of results.
Open up the generic parameter list for the container.
Optimistic case: the object might already be created.
Optimize readonly functions with no meaningful users.
Optional's payload is currently maximally abstracted.
Other thread must have inc/dec ref'd since we got cur
Otherwise if we have no witness table yet, create it.
Otherwise it would clobber the ActRec we just pushed.
Otherwise this is a getter/setter/etc for a variable.
Otherwise, className will be used to look up a class.
Otherwise, get information from our superclass first.
Otherwise, it is a structural problem, diagnose that.
Otherwise, it is a subscript, check the index values.
Otherwise, it should be one of the builtin functions.
Otherwise, print all the concrete defining accessors.
Otherwise, queue up a scalar assignment to an lvalue.
Otherwise, the archetype needs to be from this scope.
Otherwise, the attribute is always ok on an operator.
Otherwise, this really is some unhandled instruction.
Otherwise, we might need to establish the invariants.
Otherwise, we need to produce a unified return block.
Otherwise, we only run phase 4 and 5 on the function.
Our cast succeeded and gave us this abstracted value.
Override the maximum client TLS version if necessary.
P-box and S-box tables initialized with digits of Pi.
PHP5 xdebug returns false if the callee is top-level.
Parent should come before, and must enclose this guy.
Parse the substitution list for an apply instruction.
Parse through the options, setting appropriate flags.
Plant spare bit tag bits, if any, into the new value.
Pointers to non-pointer followable types are ignored.
Prepare the option character and the argument string.
Priority queue where the smaller elements come first.
Process each basic block with the genset and killset.
Process loops recursively bottom-up in the loop tree.
Process opcode's effects on the EvalStack and emit it
Produce the current fields as an anonymous structure.
Produce the type metadata pointer for the given type.
Propagate the reachability up the control flow graph.
Protocol compositions do not contain type parameters.
Push a cleanup to execute the writeback consistently.
Re-write the single-expression closure to return '()'
Record that this type conforms to the given protocol.
Record the variables that we're trying to initialize.
Recover by using the brace statement as a 'for' body.
Recursively merge the associated types of T2 into T1.
Refutable patterns that we'll handle in a later pass.
Regardless of thinness, metatypes are always trivial.
Register Swift protocol conformances if we added any.
Removal of cond_fail (overflow on binary operations).
Removes and deletes the top of the stack, if present.
Replace all uses of the old apply with the new apply.
Replace all uses outside of I's basic block by undef.
Replace the "return nil" with a new 'fail' statement.
Replace the covariant result type in the opened type.
Replace the failed fixit with what actually happened.
Replace the inferred source with the protocol source.
Replace the rest of the old arguments with constants.
Represents a map with arbitrary int64 or string keys.
Resolve the extension, if we haven't done so already.
Retrieve the potential archetype for the nested type.
Return a user-comprehensible name for the given type.
Return information about the single failing argument.
Return list of sectionnames specified by sectionlist.
Return the closest split position on or before `pos'.
Return the next len characters without claiming them.
Return the smallest size int that can store the value
Return true if inlining this call site is profitable.
Return true if this is an implicit reference to self.
Return true if this type is known to be an ArrayType.
Returns a pointer to a specific value in MInstrState.
Returns the ForwardValIn for the current basic block.
Returns the adjusted base, which may point to tvRef2.
Right now we don't try to optimize in this situation.
Round base up to align, which must be a power of two.
Run GLE, just to ensure all the data has been written
Search the duplicated instruction in the predecessor.
See ../core/BridgeObjectiveC.swift for documentation.
See Func::finishedEmittingParams and Func::numParams.
See whether we lowered a type equivalent to this one.
Serializes this command into the given Thrift buffer.
Set up linkage with the top VM frame in this nesting.
Set up the disjunction for the array or scalar cases.
Setup the input buffer state to scan the given bytes.
Skip comment markers at the beginning and at the end.
Skip the implementations of all local declarations...
Skip white space and pick up leading +/- sign if any.
So here we check if a username and password are used.
Sort the callees for each decl and remove duplicates.
Special action meaning "start processing a new file".
Specialized emitter for Builtin.bridgeFromRawPointer.
Specialized emitter for Builtin.castFromNativeObject.
Split `ivl' at `cur_start' and spill the second part.
Stack depth should be 0 at the end of a function body
Stack depth should be 0 when entering a fault funclet
Store a copy of the name so that we own the lifetime.
Stored properties and variables can't be transparent.
Stored properties of reference types produce lvalues.
Strings are less than anything else (usually arrays).
Substitute in better value witnesses if we have them.
TBB: move this up so include files are not brought in
TODO (t7832883): DTRT when we have exception pointers
TODO: Add support for determining control dependence.
TODO: Find out what to do with the error message here
TODO: obviously we need to handle many more patterns.
TODO: we should probably mark dependence on the base.
Tell LLVM the lifetime of the allocated stack memory.
Test if stream is EOF if the flag is not already set.
Testify that there's a fulfillment at the given path.
Thanks to Frank Warmerdam for pointing out the issue.
That doesn't serve any direct purpose, but it's neat.
That is the largest legal value, divided by the base.
That method assumes that no backtracking is possible.
The actual closure has a closure expression as scope.
The alpha channel is where it's really at these days.
The blockAnalysis vector is indexed by post order id.
The catch body just happens in the enclosing context.
The condition of a foreach loop can be parenthesized.
The copy_addr instruction is both a load and a store.
The deallocating destructor is always auto-generated.
The default assumption is that inouts are read-write.
The first Pred must have at least one non-terminator.
The following two lines are equivalent to popm lower.
The identifier could be a name or it could be a type.
The index of the subscript is evaluated as an rvalue.
The initializer is just a pointer to the method name.
The larger it is the more important it is to / inline
The number of nonzero histogram cells within this box
The number of symbols on the RHS of the reduced rule.
The offset of the block, if we've already emitted it.
The padding can be used as spare bits by enum layout.
The payload is currently always at the address point.
The raw value must be syntactically a simple literal.
The refcount is positive, so the value is refcounted.
The relative address is the difference between those.
The self application might be a DynamicMemberRefExpr.
The uniquing structure for existential type metadata.
The value is not live in any of the successor blocks.
There are no spaces, the entire string is the command
There's no harm in doing this even if the cast fails.
These are keywords that we accept as attribute names.
These asserts ensure that the state transition works.
These cases should be handled by clients of this API.
These instructions don't have any effect on escaping.
These just help propagate exceptions so ignore those.
These values must go toward their conservative state.
Third, try to get magic file relative to dll location
This API does /not/ actually guarantee a copy occurs.
This LoweredValue corresponds to a SIL address value.
This case is only hit for non-Int input types anyway.
This closure returns the length of a called function.
This error will be extremely rare in general, though.
This extra info is / used to enhance the diagnostics.
This file implements IR generation for dynamic casts.
This file implements the Module class and subclasses.
This file implements the TypeRefinementContext class.
This how we recognize which colors are actually used.
This is based only on the type of the representative.
This is computed once for each unit and stashed here.
This is only needed if we have guaranteed parameters.
This is the case e.g. if the class has no subclasses.
This is the end frame, write it then return its index
This is the entry point to the swift compiler driver.
This loads from a file, a stack of x509/crl/pkey sets
This maps to the structure on how mongos expects them
This may not be desirable and should be re-evaluated.
This means that for now we do not handle early exits.
This was the 'else' case, we can't really 'detect' it
This would be a great place to verify the checksum...
Try to find the contextual type in a variety of ways.
Try to restore access, modification times if read it.
Try to simplify irrelevant details of function types.
Tuple types are ABI-compatible if their elements are.
Type check the function that contains the expression.
Type-check the initializer, then flag that we did so.
UncheckedTakeEnumDataAddr is additionally a mutation.
Until we no longer have a type node, keep demangling.
Update `inl' and return the region if it's inlinable.
Update the BlockState based on the given instruction.
Update the callsite to pass in the correct arguments.
Update the predecessors / successors if things change
Upon return both will converted to KindOfNull anyway.
Use the Clang importer to mangle a Clang declaration.
Use the `self` space we skipped earlier if it's time.
Use the declaration name if we still have that sugar.
Use the generic parameters from the substituted type.
Use the sugared version of the type, if there is one.
Useful for pushing an Objective-C type through swift.
Uses of values with lvalue type produce their rvalue.
Valid pointers are 8-aligned, so test the low 3 bits.
Validate 'static'/'class' on functions in extensions.
Validate the nominal type declaration being extended.
Variable scope so that goto doesn't cross definitions
Verify that our type variable map/vector are in sync.
Verify there was only a single predecessor to ContBB.
Wait until all of our producer threads have finished.
Warn if we reach a return inside a noreturn function.
We are applying generic parameters to a generic type.
We are getting the element type from a compound type.
We can only create a value projection from an object.
We can't inherit from a non-class, non-protocol type.
We check if the value is present as a key in the map.
We do continue tracking the types in locals, however.
We don't want to specialize on arg types for builtins
We have already summarized all subloops of this loop.
We must hoist them so that we preserve memory safety.
We must store the requested locale on object creation
We need the file path, so there has to be a location.
We need to figure out the left/right padding lengths.
We only have a single instruction, so just become it.
We rotated a loop if it has the following properties.
We serialize shared_external linkage as shared since:
We were looking up __construct and failed to find it.
We're creating a dense map for a single substitution.
We're not getting a DeclContext everywhere we should.
When interface types prevail, this should be removed.
While we see non-uppercase letters, keep moving back.
Work around this by referring to the aliasee instead.
XED callback function to get a symbol from an address
Zero the histogram or inverse color map, if necessary
analyzed, but we know nothing (m_everything_bad case)
binary number syntax "0b" is not supported by strtoll
can be delayed and combined with surprise flags check
chdir failed, the working directory remains unchanged
connection timeout: set in ms (current default 1 sec)
copy_addr without initialization can cause a release.
curFunc is null when called from conjureBeginInlining
day of the month (with leading space -- non-standard)
do nothing and continue to conservative scan for now.
extend the sign bit if the comparison is to be signed
flag SP offset as unknown for all but the first block
initial live set is the union of successor live sets.
iplist's destructor is going to destroy the InstList.
is_tar() -- figure out whether file is a tar archive.
lazy getters are mutating on an enclosing value type.
libiconv disagrees with glibc iconv on some charsets.
manipulate m_jobs timestamp to simulate time passing.
multiple options specified as one (exclude long opts)
not counted but marked when embedded object is marked
only Jmp can branch to a join block expecting values.
otherwise there may be huge holes between two entries
overwrite Windows GDI define in case of windows build
private key resource from openssl_get_privatekey() 2.
returns the next CRLF terminated line from the client
runtime/base threw an exception, perhaps bad operands
stat is used, if it made here then the link is broken
tclUtf.c --  Routines for manipulating UTF-8 strings.
there was an error related to the compiler arguments.
these are jump offsets, but must be handled specially
these functions operate on in-memory dynamic pointers
this is the innermost fault funclet reachable from b.
trim pointer so that its real and logical sizes match
type predictions should be added in order of location
unlimited (0) is the default, if max_persistent is -1
we should never emit this bytecode for non-waithandle
we work backwards so that we can use atoi more easily
works for both resolved and unresolved TypeStructures
writes result into dest without decreffing old value.
'void' can only be imported as a function result type.
(So in this case we'll skip the fcallKnownImpl stuff.)
(This is used in test.mk when building/running tests.)
*_SECONDARY is a higher constant value than *_PRIMARY.
/ / At the core of DSE, there is the LSLocation class.
/ / At the core of RLE, there is the LSLocation class.
/ / Set Oper to the Apply operand that passes Address.
/ / Subclasses should only have to define visitScalar.
/ Casts from NSArray, NSDictionary and NSSet may fail.
/ Only dumps if the compiler is built with assertions.
/ Returns true if function was erased from the module.
/ The result has the appropriate type for the witness.
10) The block-retranslation chains cannot have cycles.
A convenient method for failing out of a dynamic cast.
A field-info implementation for fields of Clang types.
A new underlying object is created, with a new handle.
A non-exhaustive catch within a non-throwing function.
A version of the above where the tag value is dynamic.
APE sets CONTENT_TYPE and CONTENT_LENGTH without HTTP_
Abort if the array value / could escape or be changed.
Access to Impl.SyntaxInfo is guarded by Impl.AccessMtx
Add a bit for the percentage of the candidate matched.
Add a pointer to the given type as the next parameter.
Add an element at a non-fixed offset to the aggregate.
Add protocols for any synthesized protocol attributes.
Add the compound function name for the given function.
Add the member constraint for a subscript declaration.
Add to the breakpoint filter and the func entry filter
Adding 24 bytes so that we can copy in 32-byte groups.
Adjust checksum to count the "chksum" field as blanks.
Allow bridged conversions to CVarArg through NSObject.
Allow the result of the subexpression to be an lvalue.
An ASTWalker that maps ASTNodes to profiling counters.
An ArrayRef that we use in our SILParameterList queue.
An operation that escapes or modifies the array value.
Analyze a single BB for refcount inc/dec instructions.
And must be representable either an object or bridged.
Arbitrarily sort by name to get a deterministic order.
As a special case, assume NSObject has a fixed layout.
Ask the runtime to extract the dynamically-placed tag.
Assign an even numbered position to every instruction.
At Onone, consider all uses, including the debug_info.
At the moment this handles only the identity function.
Attempt to find a superclass for the given CF typedef.
Attempt to forward, then backward propagate this copy.
BUG: should also map here accented letters used in non
Bind an irrefutable wildcard pattern to a given value.
Bitcast the incoming class reference to ErrorProtocol.
Break the dependency chain by zeroing out the XMM reg.
Build the representation of the Clang module in Swift.
Build up an IdentTypeRepr and see what it resolves to.
But if we are, we need to be constantly mixing values.
By default, put the preposition on the argument label.
By setting to 0xAA, we expose bugs in yy_init_globals.
Call an associated-type witness table access function.
Callback used to get a type member of a type variable.
Called by the VM when a function definition is loaded.
Can convert from an ABI-compatible C function pointer.
Change 'foo' to 'fog' by replacing the last character.
Check both the native stack and VM stack for overflow.
Check if any casting is required for the return value.
Check if any of the operands will become dead as well.
Check if the inhabitant has any reserved low bits set.
Check that all of the values are initialized properly.
Check that different values don't give the same index.
Check that nodes marked invalid have the correct type.
Check that the discriminator is unique in its context.
Check to see if the given function application throws.
Check to see if we have a global by this name already.
Check whether the name can be found in the superclass.
Claim the foreign error with the method formal params.
Class ends with a dynamically sized array, m_classVec.
Class type or existential that inherits from NSObject.
Cleanup any created chunks from the chunks collection.
Clear any added tagsets to avoid an inconsistent state
Clear non-request-local state without deleting `this`.
Clear the state if the basic block has no predecessor.
Clear tracked information for slots pushed and popped.
Clearing these lets us merge together more duplicates.
Collect together all the instructions after this point
Collection of all instructions that should be deleted.
Common type implementation details for all archetypes.
Compute real pat length if it was initially unknown/-1
Compute real str length if it was initially unknown/-1
Compute the MaxStoreSet at the end of the basic block.
ConditionWaitHandle may finish before its children do.
Constant fold extraction of a constant struct element.
Convert the current character into hexadecimal digits.
Convert the source to the simplified destination type.
Convert to bitset mode if needed, and use upper range.
Copy BodyNodes and ParamFields into the MarkupContext.
Create a caller-side default argument, if we need one.
Create a name for the declaration from the field name.
Create a new temporary at the beginning of a function.
Create the meta-variable, let the typechecker name it.
Create the rest of the type tree lazily based on uses.
Default for members that don't require vtable entries.
Default-initialization always allowed for conversions.
Determine the input and result types of this function.
Determine whether the witness will be mutating or not.
Determine whether this type is bridged to Objective-C.
Determine whether we performed a coercion or downcast.
Diagnose a missing override of a required initializer.
Didn't find a match based on SNI, fallback to default.
Didn't find a match, just return the raw function type
Dispatcher for the second argument for disjointDataFn.
Display a warning if we encounter an unknown modifier.
Doing demangling just for this check is just wasteful.
Don't handle normal optional-related conversions here.
Don't recursively delete the pointer we're getting in.
Don't use a method representation if we modified self.
Dump source and reset any / colorization before dying.
Dynamically cast a class object to a Swift class type.
Either grab the passed filename or get the current one
Eliminate this AssertType if the src type won't relax.
Emit a unary call to perform a ref-counting operation.
Emit an explosion of phi node(s) to receive the value.
Emit them here, since they won't appear anywhere else.
Empty entries also get their parent directories added.
Ensure that it has the full / complement of accessors.
Ensure that the type of our TypeLoc is fully resolved.
Eventually we'll allow optionals to carry abstraction.
Expect a check_subscript call or the empty dependence.
FIXME: BridgesTypes.def is almost sufficient for this.
FIXME: Figure out what to do with superclasses in C++.
FIXME: Handle self along with the other body patterns.
FIXME: Implement once we can pretty-print expressions.
FIXME: Jump through hoops to maintain syntactic sugar.
FIXME: Search imported modules to resolve the context.
FIXME: They never should have been in the type anyway.
FPushCuf when the callee is not known at compile time.
Fetch the cache for a generic witness-table structure.
Find MemberRefExprs that have an implicit "self" base.
Find all functions which are alive from the beginning.
Find any entries that are superseded by other entries.
Find the close bracket so we can overallocate the set.
Find the closest matching unfulfilled named parameter.
Find the last * in pat and count chars needed after it
Find the member used to satisfy the named requirement.
Find the nominal type declaration and its parent type.
Finish building an optional Some in the given address.
First is character offset, second is its token offset.
First record added should be for bytecode offset zero.
First, bail out if there are no local captures at all.
First, check for the static local singleton pattern...
Flush the cache if the size of the cache is too large.
For a deep equality constraint, only perform equality.
For all other entities, prepend "__" to the base name.
For each predecessor of the header of the loop: / / 1.
For generic functions, build a new generic function...
For now just don't handle loops containing such exits.
For other nominal types, print the generic parameters.
For tiled fill, the use of a flag buffer is mandatory.
For user exceptions, invoke the user exception handler
Form the dependent type that refers to this archetype.
Function attributes require a syntactic function type.
Function: gdAffineIdentity Set up the identity matrix.
Functions are special because they might be operators.
Generate the genset and killset for every basic block.
Get the message property from the Exception if we can.
Get the type of a reference to the second declaration.
Give the prologue a TransID if we have profiling data.
Handle a special case, where ArgBB is the entry block.
Handle archetype-to-super and derived-to-base upcasts.
Handle edits that occurred after we processed the AST.
Handle it specially to avoid unnecessary control flow.
Handle the likely case someone typed 'case X, case Y'.
Having real source locations would be far, far better.
Helper function to update ListOfValues for MethodInst.
I do not know the significance of the constant 0xf000.
If "this" is already partial, we won't learn anything.
If ObjC interop is disabled, we have a Swift refcount.
If T already has a superclass, make sure it's related.
If a file was removed, we've lost its dependency info.
If compared against an integer, convert to an integer.
If d is +-Infinity or NaN, then *decpt is set to 9999.
If it does, then pick one of those cases as a default.
If it failed and diagnosed something, then we're done.
If it matches FirstIV, we may be able to succeed here.
If it's an object, retain and enter a release cleanup.
If it's not a tagged pointer, mask off the spare bits.
If it's not present, inject 'nothing' into the result.
If it's some other keyword, grab an identifier for it.
If no member type was provided, use the member's type.
If none of the declarations were shadowed, we're done.
If the argument type exactly matches, this just works.
If the block has never been named yet, just create it.
If the cursor_id is 0, the db is out of results anyway
If the diagnostic is local, flush it before returning.
If the function doesn't throw at all, we're done here.
If the implicit load's value is available, explode it.
If the kinds are different, there's nothing we can do.
If the number of parameters doesn't match, we're done.
If the outer type is not a tuple, it must be optional.
If the parameter has a default argument, it's vacuous.
If the payload is indirect, project it out of the box.
If the request has already been satisfied, we're done.
If the select is non-exhaustive, we require a default.
If the shuffle is invalid, then there is a type error.
If the switch is non-exhaustive, we require a default.
If the type has a fixed size, allocate static storage.
If the types are the same, forward the existing value.
If the user explicitly wrote the wrong name, complain.
If the witness is a free function, drop it completely.
If there are any errors in doing so, return 'nullptr'.
If there are no empty cases, don't need a conditional.
If there are no uses of the catch block, just drop it.
If there is an alternate declaration, also look at it.
If there is only one list of substitutions, return it.
If there were no unsatisfied dependencies, we're done.
If there's a single best solution, keep only that one.
If there's one that's a complete definition, use that.
If this function is a constructor or destructor, bail.
If this is an allocation, try to remove it completely.
If this is an argument conversion, handle it directly.
If this line is _longer_ than MAXLINELEN, remember it.
If this not an identifier, the attribute is malformed.
If true, this is a "real" function not an inlined one.
If we already added implicit initializers, we're done.
If we already failed finding a unique sugar, bail out.
If we are not tracking a ref count, just return false.
If we can cast two types, we can cast their metatypes.
If we can't consume the specified word, returns false.
If we couldn't flatten this expression, don't explode.
If we didn't find any declaration at all, we're stuck.
If we didn't find anything, mark the result as "None".
If we didn't simplify anything, just return the input.
If we do not have any argument, kill the retain_value.
If we failed to load, we should have already diagnosed
If we fell through the switch, mangle the requirement.
If we find a dealloc_stack of the right memory, great.
If we find the word, check whether it's a valid match.
If we found a rebind target, note the insertion point.
If we get here, we couldn't simplify the path further.
If we have a release, make sure that AI is guaranteed.
If we have any unfulfilled parameters, check them now.
If we have no contextual type, there is nothing to do.
If we have no filter text, add all non-hidden results.
If we never executed then we fall back to generic get.
If we only want types and we didn't get one, bail out.
If we saw any default arguments before this, complain.
If we're here, then the only things left are sleepers.
If we're in a generic context, set the interface type.
If we've already created this type witness, return it.
If we've already diagnosed this attribute, keep going.
Implementations of mangler hacks for Interface Builder
Implementations of the dynamic cast runtime functions.
In this case the list in UnsafeArrays is not relevant.
In this case the new function is not a method anymore.
In threadStats() we wish to solve for cactiveLimit in:
In which case, call that and use the array it returns.
Indicates that the cell is (unconditionally) not used.
Information for transforming a single checked_cast_br.
Information needed during processing of a single loop.
Initialize state for each one of our BB's in the RPOT.
Initialize the bitvectors for the current basic block.
Initialize the default location before parsing starts.
Initialize the request-local context from the trigger.
Instead of passing the address, pass the loaded value.
Instead, we just check once at the end and accumulate.
Instructs the JNI environment to throw an IOException.
Int to accommodate truecolor single-color transparency
Intersect key_files and crt_files to find valid pairs.
Invalidate any location this instruction may write to.
It also ignores functions which return "small" things.
It does not support ExtHeaders as defined in the spec.
It is assumed you will get that right in calling this.
It is possible that locals have already been decref'd.
JCE: Arrange HAVE_LIBPNG so that it can be set in gd.h
Just ignore it, it will be cleaned up by simplify-cfg.
Just stop if we've already processed this declaration.
Keep rotating at most until we hit the original latch.
Keep the data and stag from this, but change its bits.
Left string literal operand of a string concatenation.
Lets diagnose it as a conversion or ambiguity failure.
Local nicknames or unqualified names MUST NOT be used.
Look for a single instance method with the magic name.
Look for namespace-scope entities with each base name.
Look through the conversions and find the real callee.
Loop until request has completed or there is an error.
Low-numbered payload tags correspond to payload cases.
MULTI_QUERY support - eat up all unfetched result sets
Make a stack range big enough to contain both of them.
Make any breakpoints that have passed breakable again.
Make sure that none of the nested types are dependent.
Make sure that the protocol conformances are complete.
Make sure we have loads for all of the stack elements.
Make sure we have the appropriate bridging operations.
Map all blocks to BBEnumTagDataflowState in RPO order.
Map over to the inferior design of the LLVM intrinsic.
Mark any _ObjectiveCBridgeable conformances as 'used'.
Mark any functions for which loops have been analyzed.
Modified to use Winsock (NOVSOCK2.H), at least for now
Move the trap basic blocks to the end of the function.
NB: join boundaries are represented by an empty array.
NOTE: Legacy punctuator for old object literal syntax.
NOTE: this is to detect the old object literal syntax.
NULL *IS* the value, without we get undefined warnings
Need the previous frame in order to get the call line.
Next character to consider is at the end of the fixit.
Next, see if include path was set in the ini settings.
No need to propagate anything into the callee operand.
Non-scalar, so we have to output PHP from the AST node
Note / that this only applies to irrefutable patterns.
Note that this is a blacklist rather than a whitelist.
Note: it will clobber the Aux area of a TypedValueAux.
Nullable trailing closure parameters default to 'nil'.
O1, O2 are getUnderlyingObject of V1, V2 respectively.
Offsets, value witness tables, and protocol witnesses.
Ok, now we know that our tuple has non-trivial fields.
Okay, otherwise we pull one destination off the queue.
Okay, we're now positioned to make the NUL transition.
One break level has been taken care of by this region.
Only handle branch or conditional branch instructions.
Other functions have argument labels for all arguments
Otherwise add all non-debug uses of I to the worklist.
Otherwise the base will be left alone and we'll fatal.
Otherwise we're stuck and have to separately allocate.
Otherwise, access via indirect "resilient" interfaces.
Otherwise, add this case to our predecessor case list.
Otherwise, it may not dominate all uses of the source.
Otherwise, just remember that this value is available.
Otherwise, this is some other sort of incompatibility.
Otherwise, we don't have a specific issue to diagnose.
Otherwise, we have a conditional branch to the header.
Otherwise, we must be able to hoist the function call.
Passes should not merge invalidation kinds themselves.
Payloads are all placed at the beginning of the value.
Perform a naive memcpy of n tuples from src into dest.
Perform basic matching of the requirement and witness.
Perform diagnostics for func/init/deinit declarations.
Perform specialized dispatch on the particular column.
Place the next struct field at its appropriate offset.
Place the return-to BB after all the other mapped BBs.
Populate the overload choices with the first solution.
Pre-process partial_apply arguments only once, lazily.
Pretty-print the SILFunction to the designated stream.
Pretty-print the superclass initializer into a string.
Prints the members of a class, extension, or protocol.
Process conditional branches with constant conditions.
Progressively perform lookup into matching containers.
Project the address of the contained value from a box.
Projection path will indicate which field is accessed.
Propagate the elements an of array value to its users.
Protocol method arguments may not have default values.
Public visibility depends on the target object format.
Pull the generic param decl out of the imported class.
Record a (non-type) witness for the given requirement.
Replace any still-remaining uses with undef and erase.
Replace the base of the call with the "self argument".
Replace the lowered value with an ObjCMethod lowering.
Replace the uses with one of the (identical) operands.
Report the declarations we found to the real consumer.
Reposition iterators possibly invalidated by mutation.
Retrieve the jump destination for a shared case block.
Return 1 for different classes to match PHP7 behavior.
Return the ID of the current sandbox, if there is one.
Return the next, or nullptr if it doesn't have a next:
Returns false if the confirmation message send failed.
Returns the ForwardValOut for the current basic block.
Returns true if User must use Ptr in a guaranteed way.
Revert the requirements of the generic parameter list.
Roll back, drop the unit and region, and clear fixups.
SIL scalar conversions which never change the IR type.
Same name and external linkage means they're the same.
Same thing as the above regarding TUninit and TBottom.
Scan the function for any calls to noreturn functions.
Search the given filename in the list of evaled files.
See if this input should be passed with -primary-file.
See the comment for SelfTypeVar in ConstraintSystem.h.
Set the decl context of any vardecls to this FuncDecl.
Set the initializer interface type of the constructor.
Set up a diagnostics engine that swallows diagnostics.
Sets changed to true if anything was moved or deleted.
Silence operator, eval, preincrement, and predecrement
Simple case: protocols don't form bound generic types.
Skip over random instructions that don't touch memory.
Some modules don't specify a triple, and this is okay.
Spawn a thread to call it and callback when it's done.
Special case: the base type of an overloading binding.
Specialized emitter for Builtin.castFromUnknownObject.
Specialized emitter for Builtin.load and Builtin.take.
Split all critical edges from non cond_br terminators.
Stacks slots are marked as being needed or not needed.
Start with the fields we were given, if there are any.
Start with the time of the first molad after creation.
Strip off the requirements of a generic function type.
Strip the context type from the base name of a method.
Subscripts cannot be renamed, so handle them directly.
Subtract number of payload cases from the payload tag.
Synthesize a call to _undefined() of appropriate type.
Synthesize materializeForSet in non-protocol contexts.
TODO if you are clever you can make the macro do these
TODO: Randomize the set of extra inhabitants we check.
TODO: This should only ignore *unresolved* archetypes.
TODO: we eventually want to return seqid to the caller
The "length" is an / estimation of the execution time.
The 'q' introducer is thus left off of generic params.
The InlineReturn instruction that defines this region.
The SSA updater we use to materialize covering values.
The base of a subscript cannot be an existential type.
The basic value-witness table for Swift weak pointers.
The basic value-witness table for thin function types.
The box tracks the offset to the value inside the box.
The common cause is that the operand is not an lvalue.
The conditional expression must conform to LogicValue.
The const_cast is safe because we escalated the array.
The constructor for this class, if we know what it is.
The contextual inout marker is part of argument lists.
The enumeration was simply mapped to an integral type.
The final 7 bits of all VEX/XOP prefixes are the same:
The first not indirect result argument is the closure.
The format of this hash is md5(PID,PASSWORD,USERNAME).
The function type for swift_bufferDeallocateFromStack.
The libxml_streams_IO_nop_close callback does nothing.
The loadInst can be either a real load or a copy_addr.
The password first, since that is what is most unknown
The refinement below will clean this approximation up.
The returned StringRef is a slice of the "a" argument.
The returned mixed array is guaranteed not to be full.
The source type is an Objective-C object pointer type.
The stacks and their tools: `yyss': related to states.
The subexpression consumes the current 'self' binding.
The sync_sp temporary will be eliminated by vasm-copy.
The total size and address point of a metadata object.
The type of a function that merges two version tuples.
The uint32_t is used to hold RDS offsets for constants
The value is not live in some of the successor blocks.
The witness method CC passes Self as a final argument.
The worklist of arguments that we still need to visit.
Then figure out what was actually constant propagated.
There must be an output filename for each source file.
There seem to be cases where we lower them as unowned.
There shouldn't be any other parameters at this depth.
There were no forward jumps that referenced this label
Therefore we bail if there are any writes in the loop.
These have names and linkages, so we must record them.
These instructions do not cause the address to escape.
They do not, however, necessarily have any spare bits.
This file implements IR generation for types in Swift.
This file implements diagnostics for the type checker.
This file implements semantic analysis for attributes.
This file implements semantic analysis for statements.
This file implements the ConformanceLookupTable class.
This file implements the Pattern class and subclasses.
This file implements the TypeRepr and related classes.
This handles import directives and forward references.
This is a class constant that needs an 86cinit to run.
This is the only ABI we currently support for Android.
This means the block contains a last use of the value.
This reflects the order in which code will be printed.
This should be constant-initialized, but this is safe.
This should never be the type of an argument or field.
This will live / only until a proper mapping is added.
Transmute the checked cast into a coercion expression.
Try to cast the object to the destination existential.
Try to find a type to add this as a static property to
Try to print user-visible types if they are available.
Try to run single RescheduleWaitHandle from the queue.
Two-byte-character lead-byte followed by a trail-byte.
Use Appending linkage so it doesn't get optimized out.
Use protected visibility for public symbols we define.
UserAttributes are stored exclusively on the PreClass.
Visit the top-level expression generating constraints.
Walking the C++ stack doesn't work in simulation mode.
We allow strong on optional-qualified reference types.
We are busy whenever we are actively serving a request
We call get_server_flags to the maxBsonObjectSize data
We can access the isas of pure Swift classes directly.
We can ignore retains, cond_fails, and dealloc_stacks.
We can in /    the future by introducing alloc_stacks.
We can share box info for all single-refcounted types.
We can still delete instructions in such cases though.
We can store into an AllocStack (but not the pointer).
We can't use the empty type as an index into DenseMap.
We didn't find an 'in', backtrack to where we started.
We don't have a type witness for this associated type.
We don't want to recurse into most local declarations.
We failed to prove that the two objects are different.
We hit an application, find the constructor reference.
We override this function to avoid assertion failures.
We raise the refcount around the call to __destruct().
We should have one canonical representation of Bottom.
We should never try to initialize one in the compiler.
We still want to allow unavailable references, though.
We want to add a new use of `t1' and delete the LdLoc.
We want to get bb2 as immediate post-dominator of bb1.
We will definitely be consuming at least one operator.
We will insert release of the captured arguments here.
We won't emit this until after we've emitted the body.
We're conservative with unsets on array types for now.
We're exiting, so there should not be any live faults.
When a local may be read, it is added to the live set.
When we find it, substitute the appropriate base type.
Without profiling data, we assume destroy is unlikely.
Wrap the interface type in the right kind of optional.
YY_LOCATION_PRINT -- Print the location on the stream.
a / result or value type adjustment (no index needed).
a static string is passed in, resolve with a constant.
amai: Darrel Hankerson did the changes described here.
argPos controls the position of the constant argument.
assume a VarEnv* is a unique ptr, and scan it eagerly.
can throw, otherwise - true means the map was updated.
can't be converted to an int: match first nonzero case
caution: the Hebrew format produces non unique result.
check for dynamic constant and volatile function/class
child succeeded, pass the result to the async function
compile the regular expression from the supplied regex
convert chars to upper case and strip non-letter chars
could get here and we only have parts of an SSL packet
endian neutral extractions of RGBA from a 32 bit pixel
gdAffineexpansion: Find the affine's expansion factor.
give entry an extra predecessor to prevent cloning it.
has to be before zend_API since that defines getThis()
http://sourceforge.net/p/icu/mailman/message/27427062/
if file cannot be found, resolve it using search paths
if it is useful, keep a pointer to it in the mime part
if the quote is escaped, remain in ParseState::QUOTED.
ini_get() is now enhanced to return more than strings.
look ahead to determine if we are dealing with a group
namespaceURI argument is unused in PHP5 XSL extension.
note that we really just look for LF terminated lines.
o Insert phis iff it allows us to do any of the above.
only need to call traverseData() on the toplevel array
php5 xdebug does this, the spec does not specify this.
release/destroy and deallocate introduced temporaries.
ret will be false if varname isn't a valid ini setting
retrieve the number of column in the current resultset
some drivers return a a new line at the end of the msg
start of line is right of window - complement of above
std::is_constructible doesn't test what we want it to.
store information about data types the db is expecting
store, memcpy, memmove *to* the object can be dropped.
string concat to avoid space at end of line after retq
super, which is dependent if the superclass is generic
takenBlk is in a zombie now, it will be removed later.
treat it as kBase to avoid a kIndex_Disp asm handling.
triggers acceptStopped/sets acceptor state to Draining
value is either a single ref or a simple array of refs
visible externally, we mark the whole method as alive.
we have an explicit time zone or a non-object calendar
we rely on other passes to clean up unreachable block.
windows gives a WSAEFAULT if you try to get more bytes
(try_apply (thin_to_thick_function f)) to (try_apply f)
- When that happens, exit hook sets localsDecRefd flag.
/ / Consider any potentially mutating operation unsafe.
/ / The return value enables an analysis to bail early.
/ / This is guaranteed to always emit an error message.
/ / This string is suitable for display in diagnostics.
/ / This will print the type as bridged to Objective-C.
/ If it is found, it tries to link this specialization.
/ Note that (unlike in C) block comments can be nested.
/ Returns nil for universal or generic type references.
/ The result is always a GlobalValue of ObjCClassPtrTy.
A ParenType wrapping a TupleType is a single parameter.
A class which lays out a witness table in the abstract.
A helper function to return the depth of a requirement.
A list of optional injections that have been diagnosed.
A map from textual .sil scope number to SILDebugScopes.
A physical component which involves calling addressors.
A side effect free instruction cannot mutate the array.
A suffiently smart imm-folder could handle this for us.
A switch is needed since there are more than two cases.
A template for computing the size of a metadata record.
A tuple type metadata record has a couple extra fields.
A visitor that does delayed parsing of function bodies.
Add a dependency from the field to the extracted value.
Add a string value to image_info MUST BE NUL TERMINATED
Add some notes that the conformance is behavior-driven.
Add that to the result, further expanding if necessary.
Adjust down to the defining subclass type if necessary.
Adjust size to reflect that we're adding a new element.
Advance to the position right after the last full match
After an entry, we know more about the node as a whole.
All of the complexity here is tied up with class types.
All other mutable pointers map to UnsafeMutablePointer.
All the retains or releases originally in the function.
Allocation ABI Shims While the Language is Bootstrapped
Also NDIG must be reasonable smaller than NUM_BUF_SIZE.
Also, no backtracking will occur unless a rule applies.
An abstract conformance can be bound to a concrete one.
An accessor for the non-fixed offsets for a tuple type.
Analyse the current loop for reads that can be hoisted.
And initialize it with a call to swift_initStackObject.
Another SIL_VTABLE record means the end of this VTable.
Append each function's regions into the encoded buffer.
Apply the omit-needless-words heuristics to both names.
As a result, put the frontend into EmitModuleOnly mode.
Assume WMO, if a -primary-file option was not provided.
At this occasion we record additional weight increases.
Back to analyzing the candidate list with self applied.
Bail if we have multiple "once" calls in the addressor.
Bail out early if we don't have polymorphic parameters.
Basic block of the current checked_cast_br instruction.
Borrow the parameters from the requirement declaration.
Both of these allocations/projections should be no-ops.
Both, key and value can also be copy_addr instructions.
Boxes themselves can be contained within "super-boxes".
Bridge an optional foreign error type to ErrorProtocol.
Build a list structure from the given array of objects.
Build a mapping from subpattern numbers to their names.
Builtin.UnknownObject requires ObjC reference-counting.
But magic setters are only possible in define contexts.
But we do want to signal that we specialized a closure.
C-style variadic functions cannot be called from Swift.
Call the global accessor to get the variable's address.
Can't constprop yet because of no INS_1 support in bc.h
Can't constprop yet because of no INS_2 support in bc.h
Carefully move iterator to avoid invalidation problems.
Check for type variables that escaped the type checker.
Check safety of error-handling in the declaration, too.
Check that the fixed layout matches the runtime layout.
Check that this literal is only used by the terminator.
Check the ObjC protocol conformances if there were any.
Check the callee, looking through implicit conversions.
Check the stack depth, abort if we've reached the limit
Check to see if we already have an entry for this decl.
Check to see whether we are seeing a redundant release.
Check whether one declaration is better than the other.
Check whether the back-edge block is just a split-edge.
Clone the instructions to the exit before specializing.
Closure argument lists are allowed to be missing types.
Collect all reachable blocks by walking the successors.
Collect the context generic parameters for the witness.
Compare each of the bound arguments for this parameter.
Compat function for systems that do not have strndup().
Compute captures for functions and closures we visited.
Compute the facet (static/non-static + public/private).
Compute the type of indices for the subscript we found.
Compute true coordinates of update box's origin corner.
Constant and APC priming (always with compressed data).
Constrained extensions cannot have inheritance clauses.
Construct a Job which produces the right CommandOutput.
Convert num to a base X number where X is a power of 2.
Copying the block will create an independent reference.
Create a DceAnalysis for each block, indexed by rpo id.
Create a getter function from the initializer function.
Create a map from canonical check to hoist destination.
Create hash map key by concatenating pattern and flags.
Create table mapping all options defined in Options.td.
Current algorithm: mean weighted by pixels (not colors)
Decode the context data for lazily-loaded conformances.
Default to a module named "REPL" if we're in REPL mode.
Delete all parts those are not in the "parts" attribute
Derive the effects of the apply from the known callees.
Deserialize all DefaultWitnessTables in all SILModules.
Determine the optionality of the given Clang parameter.
Determine whether the method is dynamically dispatched.
Determines whether the optional adjustment is an error.
Disable sending the 100 Expect header for POST requests
Do not cause slowness on startup -- except for Facebook
Does not attempt to reconnect nor throw any exceptions.
Don't consume cleanups on the base if this isn't final.
Don't emit struct arrays for a collection initializers.
Don't expand type variables into the current namespace.
Drill down to the concrete type on the right hand side.
Emit a call to the 'getExtraInhabitantIndex' operation.
Emit a checked unconditional downcast of a class value.
Emit records for the protocol requirements on the type.
Emit the closure for the defer, along with its binding.
Emit the implicit import of the swift standard library.
Emit witness tables for conformances of concrete types.
Encode the context data for lazily-loaded conformances.
Ensure this command is valid in the given server status
Ensure we have no residuals left over from the HDF run.
Enumerate the supertypes of each of the types we tried.
Erase the local unsatisfied requirements from the list.
Evaluate arguments and begin any inout formal accesses.
Expand certain kinds of type within the entity context.
Extract from the same struct as the first extract_inst.
Extract the argument used to initialize this parameter.
FACEBOOK Bogus values for non-facebook libmysqlclients.
FIXME: Add static witness tables for type conformances.
FIXME: Clang defines max_align_t in stddef.h since 3.6.
FIXME: Clang module config macros are not handled here.
FIXME: Consider lazily encoding the string when needed.
FIXME: Linear search is not great for large enum decls.
FIXME: Really this should look at availability instead.
FIXME: The rest of the hack for restating requirements.
FIXME: These can't be controlled from the command line.
FIXME: This use of getSwiftType() is extremely suspect.
FIXME: We could recover by looking at later components.
FIXME: We should build a sidetable cache in the module.
FIXME: replace this condition with something more sane.
Factor the case index into payload and extra tag parts.
Failure to read the file, just use filename to recover.
Fall back to old-style constructor: same as class name.
Fallthrough should signal a normal exit by returning 0.
Figure out the declaration of the existing conformance.
Figure out which arena this conformance should go into.
Fill in offsets for the first non-zero case and default
Fill out an array with the field type metadata records.
Final properties can always be direct, even in classes.
Finally materialize and return the forwarding SILValue.
Find a witness to the fact that a type is a value type.
Find out if we are dealing with Builtin.staticReport().
Find out where the next varargs element is coming from.
Find the code-completion expression and operator again.
Find the representatives for the member type variables.
First check if it is possible to convert all arguments.
First consider if we've got internal breakpoints setup.
For MixedArray, postSort() handles rebuilding the hash.
For a type, strip off the 'self' we artificially added.
For capture lists, we typecheck the decls they contain.
For details see the comments for the SIL StackPromoter.
For each of the overload sets, get its overload choice.
For error recovery, also parse "for in ..." as foreach.
For indirect arguments, we just need to pass a pointer.
Force the existing dst type to match that of `res.dst'.
Found another designated initializer in the superclass.
Generate lowered explosions for each explicit argument.
Get out of here if we are something else like an array.
Get the class name as a string using NSStringFromClass.
Get the generic signature from the surrounding context.
Get the maximum possible capacity without reallocation.
Get the type of the function for substitution purposes.
Given an existential object, returns the payload value.
Given the address of an existential object, destroy it.
Global stored properties don't get a materializeForSet.
Global systemlib extensions implemented entirely in PHP
Globals of type NSString * should be imported as 'let'.
Handle method calls with a specific diagnostic + fixit.
Helper for function entry, including pseudo-main entry.
Here is what we do to obtain the number's magnitude: a.
Hold the break mutex while we update the proxy's state.
However, it appears that Foo() was the caller of Bar().
IIS sets this value but sets it to off when SSL is off.
If a datatype was passed, add the appropriate type cast
If a substitution is in play, just bitcast the address.
If alias analysis is disabled, always return may alias.
If anything remains of the string, it's not a selector.
If evaluating, do it and add the return string's length
If it does / not, then we can eliminate the destructor.
If it does not have a basic block associated with it...
If it points to whitespace return the SourceLoc for it.
If less than zero, it's a valid value of the enum type.
If no context was provided, use the declaration itself.
If no name was specified, the name defaults to 'value'.
If not localized, use standard mysql functions on m_res
If not passed in we use the default swift module cache.
If one is a static/class method and the other is not...
If rhs isn't specialized no further checking is needed.
If so, propagate the type out to the ParenExpr as well.
If that doesn't work, make a new memory block and copy.
If that fails, let dlopen search for system frameworks.
If that's not present, this must be an associated type.
If the argument is a match, then check the result type.
If the base type is not optional, the constraint fails.
If the cast failed, destroy the input and return false.
If the class is an enum, pull out the actual base type.
If the coercion type is a struct, we need to expand it.
If the cursor_id is 0, the db is out of results anyway.
If the destination is a tuple, recursively destructure.
If the eval stack is empty, then there is no work to do
If the expression feeding them is false, they are dead.
If the nested type was not already resolved, do so now.
If the next thing isn't an arg-type then assume string.
If the next token is not a binary operator, we're done.
If the parameter is a thick metatype, bind it directly.
If the payload is empty, there's only one case per tag.
If the property is dynamic, propagate to this accessor.
If the target type can't throw, neither can the source.
If the type has a statically fixed offset, return that.
If the type is fixed-layout, emit a copy of its layout.
If the witness is dynamic, go through dynamic dispatch.
If there are multiple equally-good candidates, we fail.
If there are no enumers, there is no prefix to compute.
If there is a Clang declaration, use it's runtime name.
If there is a declared result type, check that as well.
If there's no reader, we've found all there is to find.
If they fail, they fail inside the conversion function.
If this candidate has no arguments, then we're a match.
If this is a tuple, it is always recursively flattened.
If this is indexing into a field of 'self', look it up.
If this is the dealloc_stack, just zap the instruction.
If true, we're not done with our dataflow analysis yet.
If we already recorded this witness, don't do so again.
If we didn't find a match, then just return tok::pound.
If we don't have an actrec, the stack depth was invalid
If we find a fallthrough, then we got what we came for.
If we have a contextual type, it must be an inout type.
If we have a type reference, look through the metatype.
If we have an init method, import it as an initializer.
If we have an override for this constructor, it's okay.
If we have no fixits to apply, avoid touching the file.
If we just visited the FunctionTypeRepr, end traversal.
If we know the offset won't change, make it a constant.
If we still haven't claimed all of the arguments, fail.
If we're adjusting the name, erase the error parameter.
If we're not done type checking, build the getter body.
If we're not supposed to attempt any fixes, we're done.
If we're returning from a function, it's ReturnEffects.
If we've already emitted this witness table, return it.
Imported value types require foreign metadata uniquing.
In Zend, the json_parser struct is publicly accessible.
In anonymous contexts, only public methods are visible.
In such case, we would miss a dead store / opportunity.
In this case we can NewPackedArray to create the array.
Indent another level from the outer context by default.
Indicate to the IR that it should take even slower path
Indirect parameters are bridged as Clang pointer types.
Info rather than error, since probing the format is OK.
Initialize the worklist with the function level region.
Invoke iterator() to get an iterator from the sequence.
It is a series of struct_element_addr followed by load.
It is possible that we had processed this user already.
It is used by the XML callback that destroys a context.
JCE: arrange HAVE_LIBJPEG so that it can be set in gd.h
Just initialize the options for the subsequent request.
Keep track of the start offsets for all fault funclets.
Keeps all the loadstorevalues for the current function.
Killing the fp if there are still uses would be --bad--
L is positive (because double negative can overflow) 2.
Label source of switch edges with the associated value.
Later phases will handle scopes like module-scope, etc.
Let's remove the retain/unsafeGuaranteed/release combo.
List of base classes to apply the custom bases scan to.
List of immediate base classes which should be ignored.
Load and retain the destination value if it's loadable.
Load it into a temporary 'let' so we have it for later.
Load the fixed-size representation and derive the tags.
Load the fixed-size representation and switch directly.
Load the instance pointer, which is unknown-refcounted.
Load the value from the stack and store into the array.
Local function that (recursively) adds inherited types.
Look for a repo that contains a unit with matching MD5.
Look for an operator declaration in the current module.
Look up the witness table for protocols that need them.
Lower all the floating-point values by their semantics.
Make sure jdmaster didn't give me a case I can't handle
Make sure the signature can't match by dumb luck -- TBB
Make sure the thread is gone after hphp_process_exit().
Make sure there won't be 2 constructors after importing
Make sure there's a matching ':' after the middle expr.
Make sure we are referring to a designated initializer.
Make sure we only unwrap at most one layer of optional.
Mangle local declarations with a numeric discriminator.
Map each global let variable to a set of loads from it.
Match the beginning of the name to the given type name.
May or may not be boxing it, depending on the refiness.
Merge src into dst, returning true iff dst was changed.
More information at: http://en.wikipedia.org/wiki/YCbCr
Move the existing elements to make element 0 available.
Multiple counter object to the same underlying counter.
NOTE: pad_char may be set to '0' because of the 0 flag.
Native function-local declarations have shared linkage.
No need to keep track of the clang module dependencies.
Normal form variable, safe to read all data into memory
Not a mangled name Copy the result to an output buffer.
Note that conversions to and from block require a thunk
Note that these are in parallel with 'prefixes', below.
Note that we haven't resolved this associated type yet.
Note: anything else is an error, to be diagnosed later.
Now fix up the type based on we're concretely using it.
Now insert the region for tid in the front of m_region.
Now scan remaining volume of box and compute population
Now the hard part -- adjusting rv to the correct value.
Now we know that both Left and Right must have a value.
Number of entries by which start-condition stack grows.
Offset the index to skip the extra inhabitants we used.
Omit needless words based on the type of the parameter.
On failure, sets errmsg to errno string and returns -1.
Only allow OP opcodes when we're writing an expression.
Only arrays that cannot be backed by NSArrays are safe.
Only class types properly initialize their parent type.
Only close the connection if it matches the current PID
Only include callers which we are actually recomputing.
Only reference the witness if the protocol requires it.
Only show colors if both stderr and stdout have colors.
Only work if the instruction does not have side effect.
Operation previously started with startXXX has finished
Or if we get any error other than the file not existing
Otherwise emit our diagnostics and then return nullptr.
Otherwise it will happen when the object is swept later
Otherwise, branch to it if the current IP is reachable.
Otherwise, do a memcpy of the dynamic size of the type.
Otherwise, for now, always use an opaque indirect type.
Otherwise, put the module next to the top-level output.
Otherwise, skip the lookup to avoid infinite recursion.
Otherwise, the error is that the result types mismatch.
Otherwise, we can use a direct-referencing conformance.
Otherwise, we can't remove the deallocation completely.
Parameters that can be directly passed through to hhvm.
ParserPositionRAII needs a primed parser to restore to.
Perform a dynamic cast to an existential metatype type.
Perform a naive memmove of n tuples from src into dest.
Perform string literal encodings adjustments if needed.
Pick the hotter phidef as the hint, else prefer `next'.
Potentially add a leading sigil for the value category.
Prepare to start translation of the first region block.
Print the given declaration context (with its parents).
Print the relevant parameters and return the new index.
Propagate the current late bound class if there is one,
Properties need to be collected in the properties list.
Put result from CTX in first 32 bytes following RESBUF.
Put result from CTX in first 64 bytes following RESBUF.
QueryMNewElem will always throw without doing any work.
Reconstruct the address of the call from the saved RIP.
Recover by setting the raw type as this element's type.
Recursively move all the parents to the parent context.
Reformat the specified line with the calculated indent.
Remember all the access kinds we needed along the path.
Remove the adjacencies for all adjacent type variables.
Require Main and REPL files to be the first file added.
Required initializers are always considered designated.
Requires that middle has no other nodes attached to it.
Restore the return value and perform the actual return.
Return non-zero to indicate symbol lookup is supported.
Return the fully qualified dotted path for DeclContext.
Return the max valid depth of firstType and secondType.
Return the witness table that's been set for this type.
Returns 0 if all options were processed without errors.
Returns nullptr if it's an unknown key or not a string.
Returns the resolved path on success, or "" on failure,
Returns true if we have at least two values to compare.
Rewrite dynamic self to the appropriate interface type.
Right now, our smashable calls are always a known size.
Right string literal operand of a string concatenation.
Round up the memory size and alignment to a power of 2.
Run the external emitter, sending the code to its stdin
SSLv2 protocol might be disabled in the OpenSSL library
Scan forward until we find the word as a complete word.
Scan the users in search of a deallocation instruction.
Scope any further writeback just within this operation.
See if any instructions in the block can be eliminated.
See if the payload types have any spare bits in common.
See if we have all loads from this unchecked_addr_cast.
See the extern "C" declaration of this function, above.
See whether we already emitted this protocol reference.
Set the first argument name to be the name we computed.
Set the foreign error convention for a throwing method.
Set the hash entry we found to point to element slot 0.
Set to zero so we can't do it if the req counter wraps.
Set up the context into which to emit the outer result.
Setup a typechecker for protocol conformance resolving.
Simple case: use the nominal type's generic parameters.
So, it is not guaranteed to be found in the thread-map.
Some reads could raise warnings and run arbitrary code.
Some type was specified, might be simple or complicated
Store the compiled pattern and extra info in the cache.
Store the direct result to the original result address.
Sync VM regs for the TC frame represented by `context'.
Sync return regs before calling native assert function.
TODO: Enums with Equatable/Hashable/Comparable payloads
TODO: Expand this to handle *any* guaranteed parameter.
TODO: Final class metatypes could in principle be thin.
TODO: Other numeric literals (complex, imaginary, etc.)
TODO: let's remove gratuitous mallocs and copies please
TODO: optimize this if there are no specializes in play
Tell the constraint system what the contextual type is.
Temporarily copy the first result to temporary storage.
The AliasAnalysis Cache must not grow beyond this size.
The SSAUpdater can't handle critical non cond_br edges.
The TypeExpansion Cache must not grow beyond this size.
The assert() clause above should prevent that, however.
The cond_fail must post-dominate the predecessor block.
The constraint is valid blocks dominated by this block.
The load can only be a take if the base is a +1 rvalue.
The number of milliseconds has to be greater than zero.
The offset of the tail-allocated dependent VWT, if any.
The origin should either be a metatype or an alloc_ref.
The regex below is based on a regex by Michael Rushton.
The requirement to which the first witness was matched.
The second not indirect result argument is the closure.
The second version component isn't used for comparison.
The similar effect on local bases is handled in miBase.
The stride of a Swift type may not match its LLVM size.
The string is "OrpheanBeholderScryDoubt" on big-endian.
The third element is the method implementation pointer.
The type part of a NamedTypeRepr will get the callback.
The underlying text is kept alive by an CompletionSink.
The uniquing structure for ObjC class-wrapper metadata.
Then we redirect those preds to those new basic blocks.
There were no lowercase letters, so this is an acronym.
There's only a no-payload element if the type is empty.
Therefore, we can perform a completely naked load here.
These are somewhat dubious, and shouldn't really occur:
These declarations are only included in the debug info.
These may be due to the return from turning tracing on.
They shouldn't prevent us form forming a complete call.
This affects how unqualified identifiers are processed.
This file defines data structures for API availability.
This file does ugly things with macros so include last.
This file implements the interface to the Builtin APIs.
This file provides support for reasoning about CF types
This implies that all implementing functions are alive.
This instruction does not block the retain code motion.
This is all blocks that aren't part of a fault funclet.
This makes sure it's emitted before 'str' is destroyed.
This map is flattened across the inheritance hierarchy.
This method is used to support get_defined_functions().
This must stay in sync with diag::generic_param_access.
This prevents assignments from becoming infinite loops.
This requirement doesn't have a default implementation.
This returns a global reference (JNIEnv::NewGlobalRef).
This returns the / true, false, and continuation block.
This should theoretically have no effect on the caller.
This under-represents any functions still on the stack.
This will handle freeing the locals in the normal case.
This works only for Arrays but not e.g. for ArraySlice.
Thread Sanitizer only works on OS X and the simulators.
Thus we pass in a lambda that performs the work for us.
Thus, this implementation just accepts php expressions.
Track all users that extend the lifetime of the object.
Track those type variables that the caller cares about.
Transliterator to convert UnicodeStrings to lower case.
Try to / combine those applies with this partial_apply.
Try to construct a SILValue for the current LSLocation.
Try to find the point where to insert the deallocation.
Try to hoist all releases, including epilogue releases.
Try to resolve the type witness via this value witness.
Try to use common type layouts exported by the runtime.
Try to use the constraint to remove the overflow check.
Try to use this information to remove other cond_fails.
UTF-16 surrogate pair values are not valid code points.
Unknown - Something potentially crazy is going on here.
Unless we've already stopped, send the shutdown message
Until we hit the last '_' in our specialization info...
Update FP's in all blocks reachable from the exit heads
Use the singleton element's storage type if fixed-size.
Users typically don't want to specify these parameters.
ValueUses records the uses of CopySrc in reverse order.
Variant of the above used in constructor failure paths.
Verify that a default witness table follows invariants.
Verify that it isn't the super.init marker that failed.
Visit only SubstitutableTypes, skipping DependentTypes.
Walk backwards in BB looking for last use of the value.
Walk the given expression in the member access context.
We are only dealing with options that have a - in them.
We are only interested in types implementing protocols.
We can still do something more sophisticated with this.
We cannot have additional cases after a default clause.
We don't track those, so it's returning AEmpty for now.
We emit a special native allocating constructor though.
We handle decReffing obj and name in fPushObjMethodImpl
We know s_HTTP_RAW_POST_DATA is the last system global.
We make a simple difference and add the needed elements
We model destroy_addr as a release of the entire value.
We need to check for a dynamic property with this name.
We need to construct a linked list of GenericParamList.
We need to initialize it before anyone tries to use it.
We need to run the iterative data flow on the function.
We only care about required or designated initializers.
We only need to schedule the string.concat invocations.
We use the selected database to construct the namespace
We're just using swift_once to guarantee thread safety.
We've modified the original result, so build a new one.
While we have a constraint in the worklist, process it.
With the main cursor, skip over the block and continue.
You can also easily create Units with illegal metadata.
`deallocateStack` emits the lifetime.end marker for us.
an exception was thrown that prevented proper shutdown.
based on test_demovfs.c and test_multiplex.c in sqlite3
calist is an array containing file and directory names.
check function parameter that can occur in lval context
child succeeded, pass the result to the async generator
count the variables(separators) contained in the "res".
delete any other parameter registered with this number.
end anonymous namespace / Emit a global initialization.
ensure that localized results don't have another result
for specialized object tests to get some real VM::Class
fork again, to avoid blocking because both pipes filled
gdImageStringFT -  render a utf8 string onto a gd image
got expect 100-continue, but content_length is too big.
i.e. the 2 / releases must have the symmetric property.
if its not highly profitable to optimize this function.
if we realloc, we need an offset, not an abs pos (phew)
increment, check for overflow and undo increment if so.
init with -MAX_WBITS disables the zlib internal headers
initialize the FreeNode header on all freelist entries.
inject_enum_addr is modeled as an initialization store.
keep the arg as binary, since the encoding is not known
last position in input that hasn't been copied over yet
libproxygen will only add it for keep-alive connections
looks like some other type to us, make sure it's quoted
merge the clusters by append the blocks in dstC to srcC
or _ or numeral is just output with no special behavior
parseTypedValueRef - Parse a type/value reference pair.
parseValueRef - Parse a value, given a contextual type.
php5 xdebug returns false when tracing already started.
register line number info for each tracelet in function
remove everything before the first / which is host:port
since we don't support multibyte chars other than utf-8
sleep handle was cancelled, everything is taken care of
some files have their values in other parts of the file
start takes milliseconds, Period is a double in seconds
stmt-guard: /     'guard' condition 'else' stmt-brace /
store the new resource type in the resource sizes table
takenBlk is probably still reachable from other blocks.
the fd is now owned by the main process, close our copy
the first instruction is a vasm ldimml, which is a li32
the value and header are written together in writeField
this is not an error -- we let opendir call stat for us
turn free blocks into holes, restore original freelists
valgrind treats memory from RAND_bytes as uninitialized
we compute the real forwardable value at a given point.
we don't support openbasedir so you can access anything
'self' may need to be taken during an 'init' delegation.
(We should actually try to resolve that method, though.)
- The SIL diagnostic in the first function will be gone.
...in extensions that don't override other declarations.
/ / Populates the CallArgs with the converted arguments.
/ / Propagation of the elements of one array allocation.
/ / This will be its index in the list of substitutions.
/ / Valid: reabstraction info, InnerResult, OuterResult.
/ Inspired by ProtocolConformance::getTypeWitnessByName.
/ Therefore there is no need for a liveness computation.
A callback which redispatches a set of specialized rows.
A class designated initializer must never be delegating.
A helper class to collect all nominal type declarations.
A helper class to sneak around C++ access control rules.
A list of all functions forward-declared by a sil_scope.
A prior failed lookup of bt already triggered a rebuild.
A special mangling for the very first generic parameter.
A vector containing all of the archetypes, expanded out.
Accessor  methods (get/set functions) to struct members.
Add Fix-Its that correct the optionality in the witness.
Add Swift decls if we are printing the top-level module.
Add a real (highly compressible) file for it to read in.
Add pc to the breakpoint filter and the func exit filter
Add target-cpu and target-features if they are non-null.
Add the members of the nominal declaration to the table.
Add trivial accessors to a Stored or Addressed property.
All added together, they still cannot cause an overflow.
All args after this are intended for the PHP application
All instructions with these properties are handled above
All other types should be imported in a non-bridged way.
Alloc box introduces a ref count of +1 on its container.
Allocate Floyd-Steinberg workspace if we didn't already.
Allocate a StaticMethodFCache and return its RDS handle.
Allow l-value contractions when binding parameter types.
Always carries polymorphic parameters for the Self type.
Always set a flag saying that this is a Swift 1.0 class.
An extern variable expected by LLVM's hashing templates.
An implied conformance is better than a synthesized one.
And its destination block has more than one predecessor.
Apply arguments from call sites, innermost to outermost.
Assign the same IDs to SILValues as the SILPrinter does.
Attempt to load the VTable from the SerializedSILLoader.
Avoid "Possible bad confg node" warning for unused keys.
Avoid indexing the indices, only walk the getter/setter.
Bail out if our parent isn't the swift standard library.
Bind the declaration's generic context for nested decls.
Bitcast to swift.refcounted*, and hand to swift_release.
Both operands to AND must have the top bit set for V to.
Bridge Bool to ObjCBool or DarwinBoolean when requested.
Bridge the base to its corresponding Objective-C object.
Bridging from a value type to an Objective-C class type.
Bridging from an Objective-C class type to a value type.
Build a declaration for an Objective-C subscript getter.
Build a declaration for an Objective-C subscript setter.
Build an identity mapping with the derived conformances.
Build the field type vector accessor for a nominal type.
Build the property attribute string for a property decl.
Builtin floating-point types are always valid SIL types.
Calculate output length and upper bound while processing
Calculate the aliasing result and store it in the cache.
Calculates the nesting depth of the current application.
Canonicalize the retain so that nothing uses its result.
Casts between the same types can be always handled here.
Check all of the types listed in the inheritance clause.
Check for an access to the base class through an Upcast.
Check if it's a store to a stack location in the caller.
Check if the common predecessor block has a switch_enum.
Check if the instruction is already in the user's block.
Check if the value is not live anywhere in Inst's block.
Check that we don't have any missing or extra arguments.
Check that we have the needed symbols in the frameworks.
Check to see if we have a function by this name already.
Check whether any of the associated types are dependent.
Check whether the first type is a subtype of the second.
Check whether the type conforms to _BridgedToObjectiveC.
Check whether this method is in the class we care about.
Check whether we already found a value for this element.
Check whether we have a typedef for "BOOL" or "Boolean".
Check whether we've created the global variable already.
Checks if a given global variable is assigned only once.
Choose an appropriate hint for the (sub-)interval `ivl'.
Claim the next argument with the name of this parameter.
Class-constrained and boxed existentials are refcounted.
Clear the ref count state in preparation for more pairs.
Clone and fixup the load, retain sequence to the header.
Compute the BBSetIn at the beginning of the basic block.
Compute the BBWriteSetOut at the end of the basic block.
Copy generic signature from derived to the override type
Create a defer-edge from the loaded to the stored value.
Create a new archetype builder with the given signature.
Create an Initialization for an uninitialized temporary.
Create the storage property as an optional of VD's type.
Create the throw destination at the end of the function.
Currently this results in spurious work in the debugger.
Define a global symbol referring to this implementation.
Describe why the witness didn't satisfy the requirement.
Destructively specialize the rows of this clause matrix.
Determine where the explicit conformance actually lives.
Determine whether the given type is an opened AnyObject.
Determine whether this location is some kind of closure.
Determine whether this type requires an indirect result.
Determine which members, specifically are uninitialized.
Do any post-sweep cleanup necessary for global variables
Don't complete optional operators on non-optional types.
Don't emit descriptors for properties without accessors.
Don't perform early attribute validation more than once.
Don't use 'tvRef2' here so that we don't reuse the temp.
Don't walk into the LHS of the assignment, only the RHS.
Dumps the memory behavior of instructions in a function.
Dynamically cast a class instance to a Swift class type.
Each SSATmp starts out as the canonical name for itself.
Either both types should be tuples or neither should be.
Emit SIL functions for all the members of the extension.
Emit a call to the 'destructiveInjectEnumTag' operation.
Emit a destroy value for each captured closure argument.
Emit a load from the given metadata at a constant index.
Emit the argument variables in calling convention order.
Emit the failure destination, but only if actually used.
Emit the private data (RO-data) associated with a class.
Emit the type metadata or metadata template for a class.
Encoding to be used for the concatenated string literal.
Ensure that the entry isn't better than the fulfillment.
Ensure the replacement dominates the original call site.
Enumerate all locations accessed by the loads or stores.
Enumeration constants may have common prefixes stripped.
Even builtin swift types usually come boxed in a struct.
Expand and collect the newly created forwardable values.
Extract elements, cast each of them, create a new tuple.
FIXME: Allow indirect field access of anonymous structs.
FIXME: Doesn't handle scoped testable imports correctly.
FIXME: Find a way to have this continue to happen after.
FIXME: Handle 'self' along with the other body patterns.
FIXME: Nonsense, but we shouldn't need this code anyway.
FIXME: Specialize for implicitly-generated constructors.
FIXME: The "hasClangNode" check here is a complete hack.
FIXME: This constant should be vended by LLVM somewhere.
FIXME: This is an awful hack to handle Clang submodules.
FIXME: how to pass method name if style is SOAP_DOCUMENT
FIXME: swiftcall / func printType(forMetadata: Any.Type)
Factor the spare and occupied bit values from the index.
Fatal if protected/private or if the staticness is wrong
Fetch a global reference to the given Objective-C class.
Figure out the declaration context we're importing into.
Find anchors in vtables and witness tables, if required.
Find the depth of the function's own generic parameters.
Find the shared object embedded within a custom section.
Find the splittable box with the largest (scaled) volume
First attempt to lookup the Object in our internal maps.
First attempt to lookup the origin for our class method.
First fill the request local method cache for this call.
First map the callee parameters to the caller arguments.
First step: collect all the functions we want to inline.
First strip off any RC identity preserving instructions.
Fix didn't work, let diagnoseFailureForExpr handle this.
Fix this by replacing 'Self' with the nominal type name.
For a protocol or extension thereof, the type is 'Self'.
For all practical usage we should be fine with 20 bytes.
For now, just emit a switch and phi nodes, like a chump.
For some purposes, a truncated host name is good enough.
For vinvoke, `inst' is no longer valid after this point.
Force dominator recomputation since we modified the cfg.
Form a string describing the associated type deductions.
Format: destination basic block ID, a list of arguments.
Forward-declare this, but define it after swift_release.
Function: gdAffineTranslate Set up a translation matrix.
Generate IR for each bytecode instruction in this block.
Get or create an LLVM function with these linkage rules.
Get the captured native function value out of the block.
Get the function generic params, including outer params.
Get the getter and setter extended encodings, if needed.
Get to the last dot part and get its value, if it exists
Gets the estimated integer constant result of a builtin.
Gets the producing instruction of a cond_fail condition.
Global vars are definitions if they have an initializer.
Go through the whole list, stopping if you find a match.
Hardcode a particular annoying case in the OS X headers.
Haven't registered the control target with region r yet.
Here we don't know if it is going to be a cell or a ref.
If "global_addr token" is used more than one time, bail.
If 2 locations may alias, we can still keep both stores.
If LookupTy is a non-archetype, look up its conformance.
If TRACE env var is not set, nothing should be traced...
If a string is static it better be the one in the table.
If a type was explicitly specified, use its opened type.
If both types are builtin types, handle them separately.
If casting between address-only types, cast the address.
If either fail to be found, then it isn't a valid split.
If either type is address only, do not do anything here.
If leak tracking is enabled, start tracking this object.
If no scope is specified, scope it to the Closure class.
If our list of extensions is out of date, update it now.
If the class declares its own ObjC runtime base, use it.
If the ending delimiter is not found, display a warning.
If the field requires no storage, there's nothing to do.
If the first parameter list is (self), mark it implicit.
If the inner result is indirect, plan to emit from that.
If the outer result is indirect, plan to emit into that.
If the parent is non-mutable, it's okay to be covariant.
If the representatives are already the same, we're done.
If the return is in a defer, then it isn't valid either.
If the types are equivalent, there's nothing more to do.
If there are any attributes, we are going to parse them.
If there are substitutions, add them, always at depth 0.
If there is an existing subscript operation, we're done.
If there might be replacement constraints, get them now.
If they're both numeric, the result is at least numeric.
If this class has a superclass, we set up self as a box.
If this is a skippable suffix, skip it and keep looking.
If this is an UnresolvedType in the system, preserve it.
If this isn't a tuple or struct, it is a single element.
If this path is part of the covered path, then continue.
If this piece is zero, it doesn't affect the comparison.
If we are not run as 'swift', don't do anything special.
If we can't find the depth of a type, return ErrorDepth.
If we didn't find anything, expand implied conformances.
If we found a member, try to find its offset statically.
If we found the end of the line, we can do great things.
If we had multiple viable types, diagnose the ambiguity.
If we have a builtin type, canonicalize it on the right.
If we haven't allocated the lookup table yet, do so now.
If we know we don't have any type variables, we're done.
If we needed a cast, wrap the pattern in a cast pattern.
If we're at the start of a case label, don't add indent.
If we're inheriting a default argument, mark it as such.
If we've already validated this type, don't do so again.
If you change this value then also change bug24640.phpt.
Ignore results from the Objective-C "Foundation" module.
Ignore the materializeForSet callback storage parameter.
In either case there can't be an alias of the container.
In general, RaiseDebuggingFrequency should be kept at 1.
In that case we'll always just miss the in-TC fast path.
Initial size of the input buffer + how much to expand it
Initialize best-distance for each cell of the update box
Initialize metadata table, used before init() is called.
Initialize the runtime options with their default values
Input must be (Builtin.Word, Builtin.Word, Builtin.Word)
Insert the alloc_stack at the beginning of the function.
Install the self type on the Parameter that contains it.
Instead of casting the input, we cast the function type.
Instead, we'll just try to take the "better" of the two.
It also can't change anything about an inner array type.
It cannot be defined by an extension or a derived class.
It will be INT32_MAX on exits from the compilation unit.
It would be good to eventually be able to analyze these.
Iterate on live out states until we reach a fixed point.
Iterate over arguments and dump their epilogue releases.
Iterate to a fix point, two times for a topological DAG.
JIS should be tanslated to MB or we leave it to the user
Just in case the algo has internally allocated resources
Just pass in the address to fix lifetime if we have one.
Just using setter/accessor functions to get around that.
Keep a stack of the currently-live optional evaluations.
Keep track of all the uses that aren't loads or escapes.
Keys have been copied, so don't need that part any more.
Labels are function-local, and therefore never imported.
Leave a null pointer placeholder to be filled at runtime
Load standard library so that Clang importer can use it.
Load the payload value, to distinguish no-payload cases.
Local function to return the location of the superclass.
Look up witness tables for the protocols that need them.
Lookup module references, as on some_module.some_member.
Loop over all mutations to possibly invalidate captures.
Make a new caller node and link it into n's caller list.
Make result independent of the hashtable implementation.
Make sure the main file is the first file in the module.
Make sure we found the same operand as prior iterations.
Make sure we have the right number of generic arguments.
Make sure we know how to map the selector appropriately.
Map any projections of the box to the promoted argument.
Map the Clang swift_bridge attribute to a specific type.
Merge comments if they are on same or consecutive lines.
Metatypes preserve their instance type through lowering.
Module types get an M prefix, but module contexts don't.
Move the function to its proper place within the module.
Must load this before FreeActRec, which adjusts fp(env).
Must use gd_strtok_r becasuse strtok() isn't thread safe
NB: We collect the arguments under the substituted type.
No idea which type of event it needs, ask for everything
No need to coerce when passed a null for a nullable type
Nominal types are always preserved through SIL lowering.
Not enough room in dst, add NUL and traverse rest of src
Note that "continue" is not valid out of a labeled 'if'.
Note that the function also may not contain any retains.
Note that the source file is fully parsed and verify it.
Note that these includes are shared between PHP and HHVM
Note: chunk data must be padded to multiple of 2 in size
Nullary methods still take a formal () parameter clause.
Number of tokens to shift before error messages enabled.
Odds are, the code is not trying to find a member of it.
Ok, this is the first time that we have visited this BB.
Once we get rid of all the callsites, make this an error
Only eagerly emit functions that are externally visible.
Only full apply sites can require a guaranteed lifetime.
Only traverse into basic blocks that dominate all exits.
Optimize the checked_cast_br instructions in a function.
Otherwise make the ret instruction part of the cleanups.
Otherwise we do not know how to handle this instruction.
Otherwise, advance through the completion state machine.
Otherwise, assign this input to the next output element.
Otherwise, complain about use of instance value on type.
Otherwise, if iteration is finished we just return null.
Otherwise, it was the last thing we added to the layout.
Otherwise, the use is something complicated, it escapes.
Pack tag into spare bits and tagIndex into payload bits.
Parse the Yaml file that contains the group information.
Parse them and produce a specific diagnostic if present.
Pass all the arguments necessary for the given function.
Pointer ownership is shared between container and caller
Pop the address projections of the store from the stack.
Prefer to place the FuncRef immediately before the call.
Pretty-print a global variable to the designated stream.
Pretty-print the SILBasicBlock to the designated stream.
Prevent circular referenced objects/arrays or deep ones.
Print the part that should be merged with the type decl.
Probably we don't have the right abstraction boundaries.
Profiler factory- for starting and stopping the profiler
Project the buffer and apply the 'typeof' value witness.
Propagate dead-in blocks upward via PostOrder traversal.
Push a writeback onto the current LValueWriteback stack.
Push the address projections of the load onto the stack.
RAII helper for incrementing/decrementing indent levels.
REPL mode expects no input files, so suppress the error.
Reabstract input value to the type expected by the enum.
Reabstract the base type against the array element type.
Read field, leaving bptr pointing at start of next field
Reads a file into the OS page cache, with rate limiting.
Recompute the summary flags if we had any to begin with.
Record that we are assuming that the eval stack is empty
Record the arc if dstBlockId was included in the region.
Record the name of this Objective-C method in its class.
References to the param should have lvalue type instead.
Register the opaque value for the projected existential.
Remap to the palette available in the destination image.
Remove any superseded conformances from AllConformances.
Remove retain/releases based on Builtin.unsafeGuaranteed
Remove the instructions that are not potentially useful.
Replace all calls of an addressor by calls of a getter .
Replace all uses of the ApplyInst with the new argument.
Replace all uses of the original arg with the new value.
Replace loads from a global variable by the known value.
Replace the use of the argument with the cloned literal.
Resilient enum types lower down to the same opaque type.
RetainValueInst of a reference type is a strong_release.
RetainValueInst of an unowned type is an unowned_retain.
Retrieve the name for an integer type based on its size.
Return 1 if generator state is not in the Created state.
Return a TupleType or ParenType for this parameter list.
Return nil so that the object will be deallocated later.
Return the number of parameters required for this block.
Return the statically-known offset of the given element.
Returning since PPC64 specific code is under development
Returns false if an exception occurs during these steps.
Returns whether decrefing a type could run a destructor.
Same-type requirements aren't recorded in substitutions.
See comments about `GeneralEffects' in memory-effects.h.
See how many bytes we need to cover all the empty cases.
See if we have a retain of some sort, if we don't, bail.
See the IJG JPEG library documentation for more details.
Set the type of the TypeAlias to the right MetatypeType.
Setter's arg type should be same as getter's return type
Shrink it to actually-used volume and set its statistics
Simple case: it's a scalar value so we just serialize it
Since we are not dead, make sure our parent is not dead.
Single-element labeled tuples are not permitted, either.
Skip QD entries, they're only used by dn_expand later on
Skip functions that are marked with the 'no import' tag.
Skip over LBox (Which includes both TBox and LBox itself
So now let's actually ask for compressed data this time.
So we cannot safely invoke alloca (N) if N exceeds 4096.
So, we need to load the superclass metadata dynamically.
Something we depend on still isn't resolved, try another
Specializes a generic function for a concrete type list.
Spill `ivl' from its start until its first register use.
Splitting critical edges should hoist BeginCatch for us.
Start the spare bit set using all the common spare bits.
Store zero directly to the fixed-layout extra tag field.
Substitute the storage type into the conforming context.
Successfully scanned the body of the expression literal.
Swallow any exceptions that escape the __destruct method
Switch to a new external colormap between output passes.
THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC.
TODO: Could handle many other members more specifically.
TODO: Implement the SILGen fixes so this can be removed.
TODO: Its important to make this as precise as possible.
TODO: Should be able to hand it off at +0 in some cases.
TODO: Structs with Equatable/Hashable/Comparable members
TODO: We can probably handle other partial applies here.
TODO: We could be more precise with the bridged-to type.
Take direct value arguments and inout pointers by value.
Take the initializer from the PatternBindingDecl for VD.
Targets of jmps on ppc64 must be aligned to instruction.
Teardown the frame we erected by enterDebuggerDummyEnv()
The / rows should not be used in this matrix afterwards.
The DRE argument is a reference to a noescape parameter.
The MemoryBehavior Cache must not grow beyond this size.
The above is not the case for pinit, so we need to load.
The argument type must be convertible to the input type.
The assert() clauses above should prevent that, however.
The basic value-witness table for ObjC unowned pointers.
The basic value-witness table for Swift object pointers.
The breakpoint might have been removed while I'm waiting
The cache should never fill up since tzinfos are finite.
The callee function my be a bitcast constant expression.
The calls to Array.count that use this array allocation.
The children are just the elements of the lowered tuple.
The conformances should be all abstract or all concrete.
The declaration we found must be exposed to Objective-C.
The default behavior in PHP is to auto-prime generators.
The destructor in turn can cause arbitrary side effects.
The function calls an unconditionally throwing function.
The marker for BeginCatch must match the marker on inst.
The new block corresponding to `startBlock' is returned.
The other instructions are just cloned to the preheader.
The pointer must be defined outside of this basic block.
The replicaset verification is done next step (setName).
The requirement to which the second witness was matched.
The result value must match the type of the instruction.
The return value is a string representation of the code.
The size of the pascal string length (sz) is 1, 2, or 4.
The source and destination cleanups will be independent.
The values to use to initialize the arguments structure.
The variable was filtered out on the server, using text.
The variables in this pattern have not been initialized.
Then add the parent to NewNodes to be added to our list.
Then parse any conformances until we find an underscore.
These are conservative, but we're testing them that way.
These methods are not mutating and pass the array owned.
They all affect some locals, but are otherwise the same.
Thick metatypes are represented with a metadata pointer.
This allows us to perform typo correction on the labels.
This assumes that the chunk size is the same as APInt's.
This can happen when there is a load of an empty struct.
This file implements IR debug info generation for Swift.
This file implements declaration name mangling in Swift.
This file implements semantic analysis for declarations.
This file implements the entrypoints into IR generation.
This file implements the playground transform for Swift.
This function's data flow would converge in 1 iteration.
This has the effect of performing a use and a decrement.
This is / really only useful when writing prologue code.
This is a little tricky, because "unordered" is a thing.
This is lame, but gcc doesn't optimize U8_NEXT very well
This is the entry point for offline bytecode generation.
This is the output of the optimization's analysis phase.
This may not be consistent with other numbering schemes.
This means that isRhsFirst() has no effect in PHP7 mode.
This pass looks for shadow allocations and removes them.
This should be used only for debugging/logging purposes.
This should get the original (unexpanded) location back.
This should never call the magic methods __get or __set.
Thus we drop all instruction references before we erase.
Thus, a proactive measure like this self-test is needed.
To do what PHP 5.x in these cases, use the RuntimeOption
TrackVtsc means: require clock_gettime, or else no data.
Transfer ownership of the MemoryBuffer to the SourceMgr.
Traverse the dominator tree starting at the loop header.
Treat 'unavailable' implicitly as if it were 'optional'.
Tries to infer stream type based on getsockopt() values.
True if the discriminator matches the specified element.
True if this is a completely unapplied super method call
Try some easy cases, then bail back to the general case.
Try to link existing specialization only in -Onone mode.
Try to load all libraries until we stop making progress.
Try to match a cond_fail on "XOR , (SLE Start, End), 1".
Try to remove StrongUnpinInst if its input is available.
Try to strip off pointer casts and reference forwarding.
Trying to close the active existential, if there is one.
Trying to consume a value without a precise enough type.
Turn this into a stored property with trivial accessors.
Two boxed cells can generally refer to the same RefData.
Type checking listener for pattern binding initializers.
Type-indices are handed out on a per indexed type basis.
Update strong iterators now that compaction is complete.
Use the pointer/pointer and pointer/int casts if we can.
Using the new protocol, so variables contain only names.
Valid synchronous values: 0 (OFF), 1 (NORMAL), 2 (FULL).
Verify that the member types haven't gotten out of sync.
We always need a default block if the enum is resilient.
We can handle "conflicts" where one form is unavailable.
We can now convert cond_br(select_enum) into switch_enum
We can't do this on MSVC, it's all debug or all release.
We can't make that assumption about imported ObjC types.
We did not find a value in the cache for our destructor.
We don't attempt to hoist non-class element type arrays.
We don't have to destroy the source, because it was nil.
We don't know how to deserialize this kind of attribute.
We don't need to NUL terminate here, printing handles it
We got an illegal character so we are done accumulating.
We have to load the returned value from the alloc_stack.
We just do a quick loop to try to bail out of this case.
We just do it to be absolutely sure that we don't crash.
We matched some text prior to the EOB, first process it.
We must avoid that we are going to change a block twice.
We need a bitcast if we're dealing with an opaque class.
We need at least two overloads to make this interesting.
We need one pointer for each archetype or witness table.
We returned from the top VM frame in this nesting level.
We should have set up the conformance during validation.
We use a do-while loop so that we write at least 1 digit
We've been told to write canonical SIL, so write it now.
Weird one-off case where CGFloat is bridged to NSNumber.
What really matters is a number of 2MB pages in-between.
When surprise flag is set, the slow path is always used.
Whether we're storing a ResourceData or a Zend resource.
Witness tables are pointers and have pointer spare bits.
Wraps calling an (autoload) PHP function from a CufIter.
Write the return value to the stack and the AFWH object.
XXX: we may be sweeping- so don't create a smart pointer
accepts the data connection, returns updated data buffer
acquire: also returns true if we are already the writer.
an array can be passed to prime special oauth parameters
and we already have an archetype for that ID, return it.
assert that we will make some progress in this iteration
avoid contamination of the value that was strongly bound
bind data arrays to the parameters in the prepared query
check whether its last access was more than maxlifet ago
did not receive "expect" header, but too much post data.
empty variable name, or variable name with a space in it
extern "C" function should not be throwing exceptions...
flatten continuation StatementList into MethodStatements
for all other already-processed predecessors p2 of block
http://www.linuxinsight.com/proc_sys_vm_drop_caches.html
if one or the other is an interface return true for now.
if the function was invoked dynamically we can't be sure
keep in mind that image_info does not store editor value
leave it alone if we don't understand the representation
mostly here to catch the degenerate case of `.` as input
order by instruction index, area then instruction range.
redeclared classes/interfaces are automatically volatile
register above rules in a CIE (common information entry)
return the size of the data buffer needed by this column
returns the type metadata for the type named by typeName
returns the type metadata for the type named by typeNode
skip over the rest and go directly to additional records
specification is found at http://yaml.org/type/int.html.
strip out namespaces for func_get_args and friends check
tell the ODBC driver how many rows we have in the array.
this is the first body if it wasn't set and buf is unset
trimExtraArgs is called from the prologue of the callee.
try possible families (v4, v6) until we get a connection
try receive external thread events without grabbing lock
use_realpath is 0 in the call below coz path is absolute
we compute the genset and killset for every basic block.
when flattening traits, their requirements get flattened
x86 uses objc_msgSend_fpret but not objc_msgSend_fp2ret.
zend has a -m flag but we're already using it for --mode
"return nil" is only permitted in a failable initializer.
'super.' must be followed by a member or initializer ref.
(One conditional branch based on password length remains.
(Renumbering keys is not done by this routine currently.)
(The type might still not have a statically-known layout.
(This is also a restriction in PHP7 for similar reasons.)
- Copyright (c) 2008 Christos Zoulas All rights reserved.
- We emulate an or'ed type mask by querying type by type.
/ / * It has an exiting header with a conditional branch.
/ / If a full type is being printed, use print() instead.
/ / NOTE: this handles both objc_retain and swift_retain.
/ / TODO: May not be fixed-layout if we capture generics.
/ / The formal alignment of the opaque storage will be 1.
/ / Valid: reabstraction info, InnerAddress, OuterResult.
/ / Valid: reabstraction info, InnerResult, OuterAddress.
/ Functions need to preserve their abstraction structure.
/ The basic value-witness table for ObjC object pointers.
/ This can be empty in cases like calls to closure exprs.
7) All blocks are reachable from the entry (first) block.
A collision occurred, so we don't need our strdup'ed key.
A concrete witness table, together with its known layout.
A deallocating parameter can always be accessed directly.
A modified link is logically equivalent to IN_MOVED_FROM.
A release instruction may deallocate the pointer operand.
A timeout of 0 indicates an infinite timeout that blocks.
A type witness has shown up, and will have been recorded.
A visitor class which walks an entire l-value expression.
According to the information I was using, 2 measn meters.
Add an extra empty tuple level to represent the captures.
Add dependencies from array elements to the tuple itself.
Add requirements placed directly on this associated type.
Add the "(value)" and subscript indices parameter clause.
Add the given global value to the Objective-C class list.
Add the method, possibly including any default arguments.
Add variable bindings from the pattern to the case scope.
Adjust a function type to have a slightly different type.
Adjust m_pos so that is points at this new first element.
All of these cases initialize 'length' chunks in newData.
Allocate storage for the completed colormap, if required.
Allow for a custom global symbol name and implementation.
Allow for close braces to appear in the replacement text.
Also map the original argument to the cloned instruction.
Always look at the parameters in the last parameter list.
An expect of an integral constant is the constant itself.
An indexed type is a combination of a type and an action.
Analyse one potential induction variable starting at Arg.
Any bytes are allowed except three quotes in a row (""").
Any other interesting mapped types should be hinted here.
Append version, passes, digest length, and message length
Apply instructions used to construct left string literal.
As a hack, assume class archetypes never have spare bits.
As above, assume that we don't need to reabstract 'self'.
Asserts that / there is at least one remaining character.
Asserts that there is at / least one remaining character.
Associate the loop body's closing brace with this branch.
Assume "internal", which is the most common thing anyway.
Attempt a conditional cast without destroying on failure.
Attempt to resolve a type witness via member name lookup.
Bail out if we found an instruction that we can't handle.
Based on the status, we pick a different exception class.
Be sure not to consume the cleanup for an inout argument.
Begin the formal accesses to any inout arguments we have.
Bindings specify the arguments that source the parameter.
Both TrackVtsc and TrackCPU mean "do CPU time profiling".
Break if region would be larger than the specified limit.
Bridging from an ErrorProtocol to an Objective-C NSError.
Build a declaration for a binary operation with overflow.
Build a default initializer string for the given pattern.
Build a partial application of the delegated initializer.
Builtins and generators don't have a file and line number
Builtins must be fully applied at the point of reference.
But they can optionally ask for it, in case it is needed.
But we can't do it if the Class* or Func* might be freed.
Canonicalize the loop for rotation and downstream passes.
Change any aggregate stores into extracts + field stores.
Check for a CFString literal of the form CFSTR("string").
Check for any uses of basic blocks that were not defined.
Check for special case that d is a normalized power of 2.
Check if a given SILFunction can be a static initializer.
Check if a given let property can be assigned externally.
Check if it's a load from a stack location in the caller.
Check if the optimizer knows how to cast the return type.
Check if we know more about the type from our whitelists.
Check that no two status-flag register lifetimes overlap.
Check that we can actually derive Hashable for this type.
Check the base the array element address is dependent on.
Check the retain/release around the check_subscript call.
Check whether the argument is a dynamic member reference.
Class type operations here are very conservative for now.
Classify an argument being passed to a rethrows function.
Clean up the given declaration type for display purposes.
Clean up the given requirement type for display purposes.
Cleanup that always has to occur after the function call.
Clear each time we run so that we can run multiple times.
Clone the function the existing partial_apply references.
Collect all summary of all sub loops of the current loop.
Collect property access information for the whole module.
Collect the direct and indirect subclasses for the class.
Collect the set of witnesses that came from this context.
Compute insertion point generated within the basic block.
Compute the connected components of the constraint graph.
Conformance needs one default requirement to be filled in
Construct the right-hand call to Builtin.zeroInitializer.
Construct the set of parameters from the list of members.
Convenience initializers do not require special handling.
CopyOnSuccess values should not have / attached cleanups.
Create a defer-edge from the content to the stored value.
Create a new argument which copies the original argument.
Create a sorted list of nodes according to numTotalInsts.
Create location expression defined w.r.t DW_AT_frame_base
Create the entry basic block with the function arguments.
Create the missing import decls and add to the collector.
Create the new destination of the DefLabel at this block.
Creating a single-element mixed array with a integer key.
Deactivate any cleanups we made when splitting the tuple.
Decide whether we should suppress default initialization.
Declarations are added under their full and simple names.
Decode the record, pulling the version tuple information.
Decodes input (unsigned char) into output (unsigned int).
Decompose function types into parameters and result type.
Delete dead code and drop the bodies of shared functions.
Dependent types should be contextualized before visiting.
Destroy the successor records to keep the CFG up to date.
Determine the parameter index at which the error will go.
Determine the parameter type of the implicit constructor.
Determine whether the given text matches a property name.
Determine whether we are (still) inheriting initializers.
Determine whether we need to introduce a super.init call.
Devirtualize the apply instruction on the identical path.
Disable its cleanup, forcing a copy if it was emitted +0.
Do some type checking / name binding for the parsed type.
Do this before anything else has a chance to deadlock us.
Don't close like the parent, 'cause that's what zend does
Don't optimize function that are marked as 'no.optimize'.
Dumps the expansions of SILType accessed in the function.
EUI-64 format: Four hexadecimal digits separated by dots.
Emit a call to a function with a loadWeak-like signature.
Emit a call to do an 'initializeArrayWithCopy' operation.
Emit a global variable storing the constant field offset.
Emit a reference to the type metadata for a foreign type.
Emit a retain of the loaded value, since we return it +1.
Emit a store of a native error to the foreign-error slot.
Emit the type metadata or metadata template for a struct.
Encodes input (unsigned int) into output (unsigned char).
Encoding/Decoding of WebP still image compression format.
Enter the continuation block and add the PHI if required.
Enumerations with a raw type conform to RawRepresentable.
Error result types must have pointer-like representation.
Evaluates the breakpoint's conditional clause if present.
Everything contains AEmpty, but AEmpty can't be anything.
Existential metatypes always use metatype representation.
Explicit port param overrides the implicit one from host.
Explode a managed tuple into a bunch of managed elements.
Extract struct elements from fully referenceable structs.
FIXME: 'deinit' is being used as a dummy identifier here.
FIXME: Call classifier should identify the object for us.
FIXME: Get the generic parameters from the function type.
FIXME: Once we support private conformances, update this.
FIXME: Remap the parsed context types to interface types.
FIXME: Technically, we only need very basic name binding.
FIXME: We could gather the requirements on these as well.
FIXME: We could handle generic thunks if it's worthwhile.
FIXME: We could support explicit function specialization.
FIXME: We need the Swift equivalent of Clang's FileEntry.
FIXME: We're not tracking the colon locations in the AST.
FIXME: don't need to check hasStorage, already done above
FIXME: mangling 'self' in destructors crashes in mangler.
FPushFuncD doesn't support class-method pair strings yet.
Figure out the source location to emit the diagnostic to.
Finally, generate new retains and remove the old retains.
Find and set the parent loop for each loop, if it exists.
Find or insert 'key' into concurrent_unordered_map 'map'.
Find pattern binding declarations that have initializers.
Find the release to match with the unsafeGuaranteedValue.
Find the splittable box with the largest color population
Find the tentative type witness for this associated type.
First in stack is the top-level "key.entities" container.
First make sure that both of our base types are the same.
First make sure that we are actually a function argument.
First see if we find it in the registered memory buffers.
First we check for the global (connection string) default
First, collect all the properties we'll need to match on.
First, handle the effects of the store on memory support.
Fold a tuple expr like (T1,T2) into a tuple type (T1,T2).
Fold constant division operations and report div by zero.
For a payload case, store the tag after the payload area.
For fixed-sized types, we can emit concrete box metadata.
For non-subscript getters, this degenerates down to "()".
For now ignore generic functions to keep things simple...
For now, just focus on cases where there is a single use.
For now, just use extra inhabitants from the first field.
For static methods, give handler the name of called class
Found a use of an aggregate containing the given element.
Get analysis results that let us build the rc flowgraphs.
Get the associated type reference from a child archetype.
Get the bit representing the LSValue in the LSValueVault.
Get the generation number under which this lookup failed.
Get the referenced expression from the failed constraint.
Get the squares of the lengths of the segemnts AC and BC.
Get the type without the first uncurry level with 'self'.
Gets the parameter in the caller for a function argument.
Given the bit, get the LSLocation from the LocationVault.
Grab Target and find the RC identity root of its operand.
Grow to the smallest allowed capacity that is sufficient.
HAVE_LIBBFD Basically everything in here requires libbfd.
Handle optional operands and results in an explicit cast.
Haven't registered the control target in this region yet.
Helper for stepping after we've created a MemRefAnalysis.
However, CLI overrides still win the day over everything.
If ResultsInError is some, we use it as our return value.
If UserInst cannot be analyzed, Oper is set / to nullptr.
If adding 'private' or 'internal' can help, suggest that.
If all predecessor edges are 'not set' this is a new phi.
If any of them cannot be ignored, we bail for simplicity.
If basic block has no successor, simply reset and return.
If compared against a bool, convert the string to a bool.
If errors were produced during SIL analysis, return true.
If hoistDestroy returns false, it was not worth hoisting.
If it didn't, check to see if it provides something else.
If it is an empty / declaration, we fill in the contents.
If it's fixed, emit the constant size and alignment mask.
If it's indirect, we should be emitting into an argument.
If only conforms to AnyObject protocol, nothing to print.
If our expression already has the right type, we're done.
If resolve_include() could not find the file, return NULL
If so, we should deallocate and destroy at the same time.
If so, we stop here, instead of producing an error on it.
If the Objective-C selectors match, always call it exact.
If the base type was an optional, try to look through it.
If the base was a subtype of Null this will give newBase.
If the caller is fragile but the callee is not, bail out.
If the dest started with a landingpad, copy it to middle.
If the first selector piece ends with "Error", it's here.
If the fulfilled value is type metadata, refine the path.
If the innermost cast fails, the entire expression fails.
If the instruction is a matched release we can ignore it.
If the parent was unchanged, return the original pointer.
If the payload is loadable, forward its explosion schema.
If the payload value is vacant, the mask can't change it.
If the pointer cannot escape to the function we are done.
If the subscript kinds don't match, it's not an override.
If the table entry is null, the resource has been closed.
If the type isn't fixed, we have to do something dynamic.
If the type witness was unchanged, just copy it directly.
If the value is taken from a default argument, ignore it.
If the witness is a free function, there is no Self type.
If there are no disjunctions, we can't solve this system.
If there are no more hooks attached, clear the blacklist.
If there is no necessary column, just emit the first row.
If these are simply redeclarations, they do not conflict.
If this adjacency is last in the vector, just pop it off.
If this has a PatternBindingDecl parent, use its pattern.
If this instruction traps then it must have side effects.
If this is a statement parent, dig the pattern out of it.
If this is a typealias, it does not need a witness check.
If this is in a resolvable scope, diagnose redefinitions.
If this is not the only release of the box then bail out.
If this is not the only store into the box then bail out.
If this list is empty, don't actually bother with a copy.
If this method overrides another method, mark it as such.
If this parameter is the foreign error slot, pull it out.
If this satisfied all of the demanded values, we're done.
If we cannot examine the function body, assume the worst.
If we didn't reach the end of the type name, don't match.
If we emitted the "done" check inline, join the branches.
If we fail to match anything, just rethrow the exception.
If we fail to process it, just move on to the next match.
If we found a stored property, add a default constructor.
If we got here, we should have claimed all the arguments.
If we had a cleanup, create a cleanup at the new address.
If we had a parse error, don't attempt to parse suffixes.
If we have a superclass, produce a superclass requirement
If we have an out-of-order argument, diagnose it as such.
If we have any unclaimed arguments, complain about those.
If we return true, we deserialized at least one function.
If we want to perform lookup into all classes, do so now.
If we wrap over the end of the page, allocate a new page.
If we're at 'else', take the indent of 'if' and continue.
If we're generating a profile, add the lowering pass now.
If we're looking into an instance, skip static functions.
If yes, return / the SILGlobalVariable that it writes to.
If you call it for one that doesn't, you'll get an abort.
If you hit this, you popped a rank that was never pushed.
Imported as a static method, no real self param to claim.
In case of a witness method, / the class pointer is null.
In the sense of "non-union type", not the sense of TPrim.
Insert a block into the worklist and set its stack depth.
Insert the instruction into our InvolvedInstructions set.
Instead of casting the inputs, we cast the function type.
Instead of casting the output, we cast the function type.
Instructs the JNI environment to throw an AssertionError.
Introduce each of the type witnesses into the hash table.
Invalidate all analysis that's related to the call graph.
IsASCII is true only if IsASCII of both literals is true.
Issue a warning on unsupported type in case of HH syntax.
It is specifically NOT correct to do something like this:
It is used to know when loads can provide memory support.
It's up to the caller to make sure it is a legal literal.
Jump to the continue label and free any pending iterators
Just accept the ")" and build the tuple as we usually do.
Keep a map we can use to check for duplicate case values.
Keep the operand, not the instruction in the visited set.
Link a specialization for generating prespecialized code.
Loads of the box produce self, so collect uses from them.
Look to see if the candidates found could possibly match.
Lookahead token as an internal (translated) token number.
Loop starting after the space until the end of the string
Magic getters/setters use tvRef if the property is unset.
Make any abstraction modifications necessary for casting.
Make sure colormap indexes can be represented by JSAMPLEs
Make sure that the value is laid out correctly in memory.
Make sure the "getLastError" also gets send to a primary.
Make sure the parent protocols have been fully validated.
Make sure to at least record the braces range in the AST.
Map DestructorDecls to the Deallocator of the destructor.
Match a type in the requirement to a type in the witness.
Merge LocationStates, returning whether anything changed.
Merge TypeSourceSets, returning whether anything changed.
Merge equivalence classes until a fixed point is reached.
Move the epilog block to the end of the ordinary section.
Must use bitset mode for single integers below BitsetMax.
NB: the machine is running, so can't send a real CmdQuit.
NB: this function must be nothrow when `seconds' is zero.
NOTE: called from FastCGIAcceptor::onConnectionsDrained()
NSManaged properties on classes require special handling.
Next go over all instructions after I in the basic block.
Next: the wait handle is not finished, we need to suspend
Nominal kinds are always sorted before non-nominal kinds.
Non-external global variables are definitions by default.
Non-null if the entry represents a struct or class field.
Not really sugar, but the actual diagnostic text is fine.
Note that the current pre_header jump may have arguments.
Note: errorptr points to *previous* column's array entry.
Note: there is a gap in between that we use for keywords.
Notwithstanding the foregoing, the authors grant the U.S.
Null out this_ for static methods, unless it's a closure.
ObjC initializing constructors and factories are foreign.
Off by default to keep the test running fast normally ...
Ok, it is a valid attribute, eat it, and then process it.
Ok, we have a ref count instruction that *could* be sunk.
Once GCC version 2 has supplanted version 1, this can go.
One continue level has been taken care of by this region.
Only specify the module map if that file actually exists.
Only the source's payload needs to be taken or destroyed.
Only white-listed flags below are allowed to be embedded.
Optimize branches of a conditional expression separately.
Original cache behavior: an empty entry is also a "file".
Other instructions are assumed to capture the AllocStack.
Otherwise return the data associated with this successor.
Otherwise we do not understand this instruction, so bail.
Otherwise, favor native entry points for direct accesses.
Otherwise, just fall back to emitting a switch to decide.
Otherwise, just remember the next non-fixed offset index.
Otherwise, move the block to after the first predecessor.
Otherwise, the result will / have type WitnessTablePtrTy.
Otherwise, this definition is the first use of this name.
Otherwise, this is an implicit optional binding "if let".
Otherwise, we would be creating irreducible control flow.
Otherwise, we'll need to derive it at instantiation time.
Our little 7-bit alpha channel trick costs us a bit here.
Override to always use a fill op instead of a relocation.
PDO error (if any) has already been raised at this point.
Parse the list of name bindings within a let/var clauses.
Partial applications of functions that are not permitted.
Pass a pointer to the objc_super struct to the messenger.
Perform the root -dealloc operation for a class instance.
Pointers to member functions aren't represented in DWARF.
Print var declarations separately, one variable per decl.
Produce a specific diagnostic + fixit for this situation.
Push the new instruction and any users onto the worklist.
Read the cached results, failing if they are out of date.
Read typed data from an offset relative to a base address
Recursively cast into the layout compatible payload area.
Reenable the cleanup for the optional on the normal path.
RefData objects contain at most one ptr, scan it eagerly.
Reference semantics: need to preserve the cleanup handle.
References to boxed existential containers may be shared.
ReleaseValueInst of a reference type is a strong_release.
Removes all dead methods from vtables and witness tables.
Replace any references to Arg in IncomingValues with Agg.
Resolve the function type directly with these attributes.
Restore rvmfp() and return to the callee's func prologue.
Return a copy of the Unit's line to OffsetRangeVec table.
Return the Pattern involved in initializing this VarDecl.
Return the name (like "autoclosure") for an attribute ID.
Return the start offset of the nearest enclosing section.
Return true if the data flow can converge in 1 iteration.
Returns true if it is expected that the macro is ignored.
Returns true if the given variable name is a superglobal.
Revert the signature and type-check it again, completely.
Right now SetInt is used for the AddInt entry point also.
Same decl should always either have or not have a parent.
Scan the vector looking for this instance of ServerStats.
Scatter spare bits from the low bits of an integer value.
See if there's anything we can do to fix the conformance:
See the comment in AbstractionPattern.h for a discussion.
Sends a ping command to the server and stores the result.
Set the Clang resource directory to the path we computed.
Set the delegate to the result of visiting our expression
Set the new end index to the last value of the induction.
Set up this emitter afresh from the current callee specs.
Simplify a pattern of integer compares to a select_value.
Simplify aggregate instructions into scalar instructions.
Skip this designated initializer if it's in an extension.
Sneak into the module and get all of the local type decls
So convert the EOB_ACT_LAST_MATCH to EOB_ACT_END_OF_FILE.
So we have to create an array and then iterate over that.
Some stuff related to Array and Function type is missing.
Source is foreign, so do the representation change first.
Space for the eventually created colormap is stashed here
Special case for when the property is known to be an int.
Split and spill other active intervals after `cur_start'.
Start a new IR block to hold the remainder of this block.
Steal the branch argument as the return value if present.
Step 2: propagate the flags through the dependency graph.
Strip an inner layer of potentially existential metatype.
Strip off struct_extract_refs until we hit array address.
Strip reference storage qualifiers like unowned and weak.
Such an edge "short-cuts" a loop if it is never iterated.
Superclass requirements aren't recorded in substitutions.
Suppress value names for values with opened existentials.
Suspending can go anywhere, and doesn't even kill locals.
TODO: IRGen wants substitutions for secondary archetypes.
TODO: Implement this more generally for arbitrary values.
TODO: Linear search through the payload elements is lame.
TODO: Maybe we could provide prefabs for 1 witness table.
TODO: This instruction could in principle be generalized.
TODO: don't load-and-retain if the value is passed at +0.
TODO: inout apply's should only clobber pieces passed in.
TODO: it'd be nice to be able to do this without copying.
TODO: this could use a fancier dominance analysis, maybe.
Take some load off the CPU when polling thread is paused.
That covers the local, so incref once more for the stack.
The Builtin reference types can alias any class instance.
The Builtin.NativeObject metadata can stand in for boxes.
The IfConfigDecl is ahead of its members in source order.
The Initializer will be added later when/if it is parsed.
The SILValue IDs which are printed as edge source labels.
The actual operand will sort out which result idx to use.
The actual weight including a possible weight correction.
The alignof value is one greater than the alignment mask.
The allocator used for all allocations within this arena.
The arguments to the func are defined in their own scope.
The associated types inferred from matching this witness.
The basic value-witness table for Swift unowned pointers.
The block where we assume we can insert the deallocation.
The conditional cast still needs its branch destinations.
The constructor must be declared within the class itself.
The extra args are the request type and the stub address.
The first causes a transition to the end-of-buffer state.
The following kinds correspond to SIL non-address values.
The generation count at which this list was last updated.
The length of the transcoded string in UTF-8 code points.
The method's depth starts below the depth of the context.
The number of non-trivial protocols for this existential.
The pattern from this row which we are specializing upon.
The pointer to the returned array element buffer pointer.
The required type is not defined in the standard library.
The set of optional adjustments performed on the witness.
The sort of thing you need when you're avoiding v-tables.
The stack depth at the label depends on the current depth
The targeted usecase is debugging and testing SIL passes.
The value must be fully initialized at all escape points.
Then try to lookup the innermost loop that BB belongs to.
There are arguments following the filename, so copy them.
There isn't much value in caching more than one of these.
Therefore assumes `this` has been request-heap allocated.
This are a list of exnNodes that inherit from each other.
This ensures that any uses of them get appropriate types.
This enum represents a relationship between two operands.
This file implements support code for ClusteredBitVector.
This handles "falling off the end of the function" logic.
This happens, for example, when constructors are inlined.
This is an easy way to cope with cycles in the SSA graph.
This is not a formal parameter, so it's in the ExtraArgs.
This is represented by returning an empty ProjectionPath.
This isn't valid, and most implementations can't read it.
This must stay in sync with diag::associated_type_access.
This pass relies on having no critical edges in the unit.
This reference must outlive the uses of nameToPopularity.
This should really be described as a DW_TAG_variant_type.
This situation is represented by GroupContext.isEnable().
This structure is used to store a section of a Jpeg file.
This type check should have created a non-dependent type.
This will ensure we can do indentation inside the braces.
To copy in 32-byte chunks, we add 24 bytes to the length.
To do this, we need the metadata for the associated type.
Try to get the ObjC type which is bridged to source type.
Try to get the ObjC type which is bridged to target type.
Type check each VarDecl that this PatternBinding handles.
UTF8 can encode these, but they aren't valid code points.
Uncommon, asked for more than 64 chars worth of precision
Unless there were bad matches, prefer camel case matches.
Unless we're looking at a nonmutating existential member.
Update the entry now that we've resolved the declaration.
Update to record all explicit and inherited conformances.
Use UnqualifiedLookup to look through all of the imports.
Use access specifiers from the declarations, if possible.
Use the VAX insv instruction to insert each code in turn.
Used to deserialize the on-disk globals-as-members table.
User-provided base type for LookupKind::Type completions.
Verify that a purpose was specified if a convertType was.
Verify that method is not abstract within concrete class.
Visit part of a type, such as the base of a pointer type.
Visit the closure itself, which produces a function type.
Walk an assignment expression, checking for availability.
Walk each parameter's decl and typeloc and default value.
Walk the inheritance hierarchies of all of the protocols.
We came across a try region, need to run a finally block.
We can not find a retain in a block with no predecessors.
We can share box info for all similarly-shaped POD types.
We cannot express how to forward variadic parameters yet.
We cannot import when the base name is not an identifier.
We could potentially be dropping a type, but that's okay.
We currently provide no mechanism for this to be audited.
We do need to be careful with uses with ref count inputs.
We don't actually demangle the function or types for now.
We don't want to recurse into declarations or statements.
We have potentially cloned a loop - invalidate loop info.
We know for sure we're going to be in an object property.
We make use of this fact to increase object lower bounds.
We might need an extra bit to check if self was consumed.
We must not move initializers around availability-checks.
We need to fixup the parameter numbers on the parameters.
We only emit one error per location as a policy decision.
We only substitute into archetypes for now for protocols.
We really don't like matches that don't start at a token.
We recommend keeping 6 bits for G and 5 each for R and B.
We scheduled all of the files that have actually changed.
We should bring it back when we have those optimizations.
We should never have any registered RequestEventHandlers.
We should not be doing more serious work along this path.
We support having either a SourceLocTable or a LineTable.
We try every route and assert they are all the same here.
We use UnboundGenericType to find the normal conformance.
We're at the end of the level "cont_level" continuations.
We're entirely before the edited range, no update needed.
We're not actually going to modify it, so this is "safe".
We've run out of replacement strings, so use an empty one
When synthesizing extensions, this is the target nominal.
When we see a variable binding, emit its global accessor.
Without ObjC interop, ErrorProtocol is native-refcounted.
X/Y/Z often used as coordinates and should be the labels.
XXX: verify that overlapping address come from jmp fixups
Zend have some extra that is just maps to some other type
__dtoa() doesn't allocate space for 0 so we do it by hand
and one of the automatically-created "directory" entries.
assign id to 86metadata local representing frame metadata
character appears in non-ISO extended ASCII (Mac, IBM PC)
close() may destroy() us, so we have the destructor guard
condfail instructions that obviously can't fail are dead.
create a bson date  type: 9 8 bytes of ms since the epoch
does not have an explicit constructor with __construct 2.
eg: when describing a table that contains an enum column.
for now only store TypeAnnotation info for type constants
func _unimplemented_initializer(className: StaticString).
gd_security.c  Implements buffer overflow check routines.
gets the next CRLF terminated line from the input buffer.
helpers for usage logging Log the execution of a command.
leading '..' must not be removed in case of relative path
len is garbage if EOF but the loop below will quit anyway
main loop to parse JPEG 2000 JP2 wrapper format structure
move lower byte to destination and keep the other 56 bits
offset functions: cannot inline these due to dependencies
otherwise use the class given by this instruction's input
output any remaining errors at their original error level
overflow in same direction, comparison will be inaccurate
p is a static local, initialized by RefData::initInRDS().
r2,e2 span the tail of other that might intersect current
remove xinclude processing nodes from recursive xincludes
reset path_translated back to the transport if it has it.
return the size of the whole buffer needed by this column
save ptr before aligning it align up to (extra + 1) bytes
swiped from ext/curl/interface.c to help with consistency
the destination weighting is substantially reduced as the
the same or the hdf option associated with this name does
this buffer, and we should throw it away when we're done.
this gives us a better chance of getting a scalar result.
this is a hard limit in the db server (util/messages.cpp)
todo: t2539893: check if value is already a static string
totalSubs  The number of variables that will be required.
turn a Op b Op c, namely (a Op b) Op c into a Op (b Op c)
we convert numbers to integers and treat them as a string
we're serving real traffic now, start batching log output
x86-64 has every objc_msgSend variant known to humankind.
yy_c_buf_p now points to the character we want to return.
zero for the background color, nothig gets outside anyway
"Color Image Quantization for Frame Buffer Display", Proc.
(E.g. two adjacent AStack ranges, multiple AFrame locals.)
(It might have paused itself if it read a "break" command)
(The choice of 16 is arbitrary, but let's stick to it now.
- The start of each fault-protected region begins a block.
...but remember to ignore it when we need the actual size.
/ / For the first element in the enum, the raw value is 0.
/ / This function first calls expand on a memory location.
/ / This means that we can simply fix up those BB regions.
/ / This returns the alloc_stack if found, or null if not.
/ / Valid: reabstraction info, InnerAddress, OuterAddress.
/ Returns nullptr if the value witness table is dependent.
/ This is invalid for irrefutable pattern initializations.
1) for a "static" / "type" method, the base is a metatype.
2) pgoLayout() is enabled for Optimize, PGO-based regions.
A RAII object to save and restore BindOptionalFailureDest.
A convenient class for parsing characters out of a string.
A failable initializer cannot override a non-failable one.
A physical path component which returns a literal address.
A typedef to a typedef should get imported as a typealias.
A value is expressed by 2 IDs: ValueID, ValueResultNumber.
A vector of the declared interfaces class info structures.
Abstract base class for refutable pattern initializations.
Add a materializeForSet accessor to the given declaration.
Add its knowledge to knownType before doing anything else.
Add substitution for the dependent type T._ObjectiveCType.
Add the Self type back to the interface and context types.
Add the pattern, possibly including any default arguments.
Advances the builder to the successful type check's block.
After a fatal error subsequent diagnostics are suppressed.
All other values need to have contextual archetypes bound.
All the following invariants only apply to non-interfaces.
All we really need to do is use a single TopLevelCodeDecl.
Also track whether DC is just a type ancestor of the decl.
An abstract class for transforming first-class SIL values.
An initializer that conforms to a requirement is required.
An operation to be performed for various kinds of packing.
An outer-scope source always overrides an existing source.
Analyze a function expr and break it into a candidate set.
Anonymous functions currently always have Freestanding CC.
Anything without a fix is better than anything with a fix.
Append order doesn't matter here (unlike in setMethods()).
Apply instructions used to construct right string literal.
Applying a function does not cause the function to escape.
Are the arguments to this block used outside of the block.
Asserting in these situations doesn't add any information.
Assign a unique ID to each basic block of the SILFunction.
At the moment we can only add arguments to br and cond_br.
At this point, we know that we have *some* NoPayloadEnums.
Auxiliary macros to handle vasms with different attributes
Avoid sprintf, as that infringes on the user's name space.
Avoid trying to generate a USR for some declaration types.
Bind to a random cpu so that we can use rdtsc instruction.
Bitcast an arbitrary pointer to be a pointer to this type.
Blocks may be visited multiple times if loops are present.
Borrow the context archetypes from the enclosing function.
Building a fixed-size tuple doesn't require type metadata.
Builtin.NativeObject uses Swift native reference-counting.
But if this is 'self', consider passing an extra metatype.
But the error case noted above is quite difficult to test.
But this always gets the uncompressed size no matter what.
Bypass RepoQuery, in order to avoid triggering exceptions.
Cast the instance pointer to an opaque refcounted pointer.
Change the type to the appropriate reference storage type.
Chase down the box value to see if there are any releases.
Check compatibility vs interface and abstract declarations
Check for OOM before doing a potentially large allocation.
Check if profiling has been enabled before trying to dump.
Check if the decl has an explicit accessibility attribute.
Check out all of the type variables lurking in the system.
Check that the instructions match cases in the same order.
Check that the two l-value expressions have the same type.
Check that we can actually derive Equatable for this type.
Check the generic arguments against the generic signature.
Check the retain/release around the get_element_addr call.
Check to see if we've maybe got a local reference already.
Check whether mmap(2) supports the MAP_UNINITIALIZED flag.
Check whether we have an overload choice in this solution.
Check whether we have seen this destination block already.
Claim --driver-mode here, since it's already been handled.
Clean up anything that we've placed into a stack to check.
Cleanup instructions/builtin calls not suitable for IRGen.
Closures have an m_this but they aren't in object context.
Cluster the blocks based on weights and sort the clusters.
Coerce the given 'isa' pattern via a conditional downcast.
Collect all of the Objective-C methods with this selector.
Collect information about the retain count result as well.
Collect the same-type constraints by their representative.
Compiles the given evaluation string and returns its unit.
Compute the CanSILFunctionType for the optimized function.
Compute the edit distance between matching argument names.
Compute the substitutions used to reference the subscript.
Concat all of the primitive types in the custom union type
Condition used by the current checked_cast_br instruction.
Conditions are exactly the same, without any restrictions.
Conservatively assume classes need unique implementations.
Construct the invocation arguments for the current target.
Consume an extraneous '.' so we can recover the case name.
Convert T_HASHBANG to T_INLINE_HTML for Zend compatibility
Convert the Swift import path over to a Clang import path.
Convert the base to an rvalue of the appropriate metatype.
Convert the destination pointer argument to a SIL address.
Convert whatever is on the right to a boolean and compare.
Create a clause matrix from the given pattern-row storage.
Create a connection to all of the servers in the seed list
Create a map of the destination blocks for quicker lookup.
Create a single linked chain if From has multiple targets.
Create takes care of copying local variables and itertors.
Create witness markers for all of the generic param types.
Ctor or dtor are for immediate class, not a derived class.
Current allocation frontier for the non-persistent region.
Currently we only use the first field's extra inhabitants.
Currently, all our optimizations are only relevant on x64.
Default to the current year if year parameter is not given
Define test functions for all of our abstract value kinds.
Delay issuing the diagnostic until we parse the attribute.
Delete all uses of the dead array and its storage address.
Depending on how we matched, produce tailored diagnostics.
Determine if the overloads all share a common return type.
Determine the optionality of the given Objective-C method.
Determine whether 'super' would have made sense as a base.
Determine whether the callee has any needless words in it.
Determine whether the rhs behaves normally, or abnormally.
Determine whether this declaration is suppressed in Swift.
Determine whether this is an unparenthesized closure type.
Dig out the effective Clang context for this nominal type.
Discard all units that were created via create_function().
Discard the class, preserving the RHS value if it's there.
Do dominator based simplification of terminator condition.
Do formal evaluation of the underlying existential lvalue.
Do not specialize functions that are available externally.
Do the transition now to avoid doing it in N places below.
Do this last so it can overwrite all the previous settings
Do various optimizations based on the instruction we find.
Dominance and post-dominance info for the current function
Don't add implicit constructors for an invalid declaration
Don't care about pointers to non-pointer followable types.
Don't count costs in blocks which are dead after inlining.
Don't put the cleanup in a state we can't restore it from.
Don't set the time here because it will throw if it is bad
Don't trace through too many jumps, unless we're inlining.
Don't try/catch - We want the exception to be passed along
Emit a call to a function with a storeWeak-like signature.
Emit a call to the 'destructiveProjectEnumData' operation.
Emit a check for whether the given object is a collection.
Emit a checked cast to a protocol or protocol composition.
Emit a copy-like call to perform a ref-counting operation.
Emit a reference to the heap metadata for the target type.
Emit a string encoding the labels in the given tuple type.
Emit an unconditional scalar cast that's known to succeed.
Environment variable that can be used for certain settings
Estimation of the memory needed till the next check point.
Everything externally visible is considered used in Swift.
Everything that needs to be on the stack gets spilled now.
Executed by m_mainThread to run the command-line debugger.
Explode out multi-index subscripts to find the best match.
FIXME: Avoid string comparison by caching this identifier.
FIXME: Check container/member types through substitutions.
FIXME: Prohibits some user-defined conversions for tuples.
FIXME: Rectify these the same way we do for element types.
FIXME: Remove null data altogether rdar://problem/18801263
FIXME: This might need to be changed to STR_EMPTY_ALLOC().
FIXME: We need to undef 'defer' when including Tokens.def.
FIXME: We should persist this information between lookups.
FIXME: these should all be modeled with a DynamicSelfType.
FIXME: this should be the scope of the type's declaration.
FIXME: we currently emit _CocoaArrayType: _CocoaArrayType.
FIXME: we should detect if offset is required but not set.
Fetch the metadata cache for a generic metadata structure.
Fetch the object (without resetting its last error code ).
Figure out the curried 'self' type for the interface type.
Fill the entire 16-byte space for a TypedValue with trash.
Find the _unconditionallyBridgeFromObjectiveC requirement.
Find the best dominating 'open' for each open existential.
Find the conformance for the protocol we're interested in.
Find the final tailcnt chars of str, accounting for UTF-8.
First, check for attributes that denote the classification
First, check if there is a Phi value in the current block.
Floating literals must have '.', 'e', or 'E' after digits.
For ObjC or mixed classes, we need to use object_getClass.
For a constructor, we only care about the parameter types.
For a heap variable, the box is responsible for the value.
For a pattern of unknown type, create a new type variable.
For anything with a Clang node, lazily check conformances.
For each subpattern, insert it into the appropriate array.
For each subpattern, insert it into the subpatterns array.
For initializers, prepend "__" to the first argument name.
For now, use the same condition as requiresIndirectSchema.
For unsafe addressors, we have no owner pointer to manage.
Force fmt to a valid value since we don't return anything.
Forward declare this first because types may be recursive.
Gather the constraints associated with this type variable.
Generate a module, but treat it as an intermediate output.
Generate the conversion from the enums to integer indices.
Generic tuple value witness for 'initializeArrayWithCopy'.
Get 16 bits motorola order (always) for jpeg header stuff.
Get and validate the ordering argument, which is required.
Get and validate the suboperation name, which is required.
Get the innermost enclosing declaration for a declaration.
Get the original type of the witness from the conformance.
Get the unsubstituted capture types for a closure context.
Get/Create intermediate arrays for multidimensional arrays
Given a full struct explosion, project out a single field.
Go through all users of the constant and try to fold them.
Grab the next non-invalidated node for the next iteration.
Guess whether a global entry is a definition from this TU.
Handle associated type lookup as a special case, horribly.
Handle metatype references, as in "some_type.some_member".
Helper that checks if the given breakpoint has been "hit".
Here we just convert external definitions to declarations.
However, exit blocks of the original loop are still valid.
If "w" was *not* set as an option, then assign the default
If CalleeFunction is a declaration, see if we can load it.
If ResultsInError is None, we do not emit any diagnostics.
If a type was provided, create the type for the parameter.
If cdata tags are in the text, then we must base64 encode.
If className is present, it already includes the namespace
If it doesn't succeed, we put it back and try again later.
If it is before, it produces the value we are looking for.
If it's an existential, we need to check for conformances.
If negative, reduce the rule which number is the opposite.
If run in cli mode, print nothing in the lowest pseudomain
If so, nuke the space afterward to keep things consistent.
If specialization isn't required, just return immediately.
If that fails, fall back on importing the underlying type.
If the base is a boxed existential, we will open it later.
If the buffers are the same, use source location ordering.
If the class is unique, there will only be one resolution.
If the declaration is unavailable, note that in the score.
If the override is ABI compatible, we do not need a thunk.
If the rethrow block wasn't actually used, just remove it.
If the user explicitly wrote the incorrect name, complain.
If the variable is immutable, we can bind the value as is.
If there is an expr-call-suffix, parse it and form a call.
If there's a new case value in the module file, ignore it.
If this access is for a read, we can just call the getter.
If this happens again it's a programmer error, so blow up.
If this instruction is unrelated to the memory, ignore it.
If this is a parameter explicitly marked 'var', remove it.
If this is a type argument, we've fully updated sourceKey.
If this is an argument look up the value in the value map.
If this is the last instruction, handle block transitions.
If this succeeds, argument A will have no uses afterwards.
If true, all arrays in memory are considered to be unsafe.
If we already failed, or simplification fails, we're done.
If we are not the first instruction in this basic block...
If we are now at () we skip over it and terminate the loop
If we aren't a class or type alias, nothing special to do.
If we didn't find multiple methods, there is no ambiguity.
If we don't allow unresolved dependent member types, fail.
If we don't succeed, throw away the inference information.
If we found a valid connection check if we need to ping it
If we found the single argument being initialized, use it.
If we got a good PID, then we can exit the parent process.
If we got here, we didn't throw, so we can pop the inputs.
If we had a name with no type following it, finish it now.
If we had all invalidated nodes, this will return nullptr.
If we had an Objective-C match, this is a serious problem.
If we had conditional ObjC checks, join the failure paths.
If we have a section, enqueue the conformances for lookup.
If we have a single argument, look through the paren expr.
If we have addressors, at this point mark it as addressed.
If we have an initializer, we can also have unknown types.
If we have any type-adjusting attributes, apply them here.
If we have more than one solution, do some simple ranking.
If we have multiple candidates, then we have an ambiguity.
If we know the associated type, look in the witness table.
If we return indirectly, that is the first parameter type.
If we're able to do an unscoped lookup, we see everything.
If we're initializing the varargs list, use its base type.
If we're not supposed to visit our supertypes, we're done.
If we're polymorphic, we'll also fall back to generic get.
If we're skipping forward and were running, the run ended.
If we're suppressing the check, just do an unchecked take.
If we've gotten here, it's an unsupported expression type.
Ignore classes that are at the top of the class hierarchy:
Ignore the first item, since it can't have preceding ones.
Implementation strategy for native Swift no-payload enums.
Implicitly leave the owner managed and return the pointer.
In PHP5 mode, we visit the LHS elements of the list() now.
In both enums and structs, the parent index is at index 2.
In case we crash again in the signal handler or something.
In neither case do we need to continue the *current* walk.
In that case, we don't want to reset the lineno or column.
In this case we can just skip the existing re-abstraction.
Index can never be used directly if shifting is necessary.
Infer requirements from the parameters of the constructor.
Information about spills generated by register allocation.
Inidcates the distacne the autofocus camera is focused to.
Initialize a bit vector to be equal to the given bit-mask.
Instantiate the storage next to us in the enclosing scope.
Instead, call the appropriate setters (set() or setRef()).
Instructs the JNI environment to throw a RuntimeException.
Introduce the beginning part of the Selector construction.
It contains the total overhead of inlining / the function.
It only handles load, store and deallocation instructions.
It seems like we shouldn't see FunctionType at that point.
It's logically const, because we're using DataTypeGeneric.
Just set global escaping in the caller node and that's it.
Large blocks are immediately passed back to libc via free.
Let through all arguments not related to a promotable box.
Lifetime endpoints that don't allow the address to escape.
LineModule will get destroy by the following link process.
Load the witness tables and copy them into the new object.
Local function that releases the source and returns false.
Local function to create a pattern for a single parameter.
Locations may-moved always should also count as may-loads.
Look at the uses of the load to find out more information.
Look through identity, force-value, and 'try' expressions.
Look up the header in the includes of the bridging header.
Lookup the conformance of the superclass to this protocol.
Make a second pass to split the inner arguments correctly.
Make sure "tokenizer" gets added to the list of extensions
Make sure that this reference does not get optimized away.
Make sure the element is checked out before we poke at it.
Make sure to apply the fix at the right application level.
Make sure to reset our dst's inst pointer, if we have one.
Make sure we have an acceptable FPush and non-null callee.
Make use of the fact that some of these casts cannot fail.
Mangle the name of a protocol as a substitution candidate.
Map the LLVM arguments to arguments on the entry point BB.
Mark all predecessor blocks with the sentinel undef value.
Mark each unresolved associated type witness as erroneous.
Mark the generator as finished and store the return value.
Method calls through ObjC protocols require ObjC dispatch.
NB: We can't directly mutate the register-mapped `reg_fp'.
NOTE: This is for migrating the old object literal syntax.
Needle doesn't occur, shortcircuit the actual replacement.
No need to eagerly emit Swift metadata for external types.
Nominal steps between cell centers ("x" in Thomas article)
Non-generic structs, enums, and classes are special cases.
Note that 'self' has been fully initialized at this point.
Note that we have a literal constraint with this protocol.
Note: right now abstract functions are part of the family.
Notify the client that semantic functionality is disabled.
Now that we have a SILFunction parse the body, if present.
Now, each interval in blockStarts delinates a basic block.
ObjC classes mangle as being in the magic "__ObjC" module.
ObjC metatypes are represented with an objc_class pointer.
Objective-C partial applications require a different path.
Ok, we know that the elt we are extracting is non-trivial.
On Success use the allocated memory for the thread's stack
On loop exit, the terminating value will be in the buffer.
Only bail out if the next token is at the start of a line.
Only class objects can be weak-retained and weak-released.
Only consider "with" or "using" to be potentially vacuous.
Only if the definition is alive, the user itself is alive.
Only methods in the 'init' family can become constructors.
Only one of the operands to XOR must have the top bit set.
Oops, we have too many smaller stores generated, bail out.
Otherwise compute it if we have a __toDebugDisplay method.
Otherwise just type check the subexpression independently.
Otherwise the dataflow solution could be too conservative.
Otherwise the local will start uninitialized, like normal.
Otherwise, data may be invalid when DecodeRfc1867 returns.
Otherwise, look for a global with this name in the module.
Otherwise, the bound value for the enum case is available.
Otherwise, the final context is the reabstraction context.
Otherwise, the only hard case left is the identifier case.
Otherwise, this must be a typedef mapped to a strong type.
Otherwise, try finding it after the "unsafeGuaranteedEnd".
Otherwise, update our state given the potential decrement.
Otherwise, we need to move or copy values into a +1 tuple.
Parse extraneous parentheses and remove them with a fixit.
Parse the substitution list for a specialized conformance.
Perform specialized dispatch for a sequence of IsPatterns.
Preserve module expr type data to prevent further lookups.
Process all sleep handles that have completed their sleep.
Property is not declared, and not dynamically created yet.
Provide an empty 'args' array to be consistent with hphpc.
Prune out cases where it is acceptable to have a conflict.
Put buffered data together with inbound for a single block
Raise a warning and return a pointer to init_null_variant.
Read cwd symlink directly if it leads to the deleted path.
Recompute elms, in case resizeIfNeeded() had side effects.
Record that the given optional requirement has no witness.
Recursively walk the SIL value being assigned to the SILG.
Redeclared prop, make sure it matches previous declaration
Redirect the HeaderBlock target to the unrolled successor.
Redirect the backedge blocks to BEBlock instead of Header.
Register ObjC protocols, classes, and extensions we added.
Relative addresses can be 32-bit even on 64-bit platforms.
ReleaseValueInst of an unowned type is an unowned_release.
Replace a block argument if all incoming values are equal.
Replace the switch with a branch to the TheSuccessorBlock.
Replace the type metadata pointer with the class instance.
Requirements in class-bound protocols never 'mutate' self.
Reset fields manually in case the move constructors don't.
Retrieve the _unconditionallyBridgeFromObjectiveC witness.
Retrieve the set of protocols the given protocol inherits.
Return 0 if we don't have a quick way to get a better cap.
Return an estimate of the method count of all used traits.
Return the value that is written into the global variable.
Revert the inherited clause of the generic parameter list.
Rough check to see whether this is a numeric string or not
SILGenLValue - An ASTVisitor for building logical lvalues.
SSAUpdater cannot handle multiple defs in the same blocks.
Save the failure for this type-protocol pair in the cache.
Save the original token, in case code-completion needs it.
Scan the body of the function, looking for anything scary.
Search for function-exiting blocks, i.e. return and throw.
See whether the payload case's type has extra inhabitants.
Send CmdSignal over to the client and wait for a response.
Should be removed when these features are no longer gated.
Similarly reusable stubs will still point to the old code.
Skip if merged cluster would be bigger than the threshold.
Skip the synthesized 'self' input type of the opened type.
Skip type aliases, which are just shortcuts down the tree.
Skip value requirements that have corresponding witnesses.
So that this iterator / can be used in the SSAUpdaterImpl.
So we don't know for sure if return hook should be called.
So, we make it const here to make sure we don't misuse it.
Some constants / are also defined in ShortestPathAnalysis.
Special case for NSZone*, which has its own Swift wrapper.
Special-case backslash for line continuations in the REPL.
Special-case dynamic packing in order to thread the jumps.
Specially handle checking if an uninit var's type is null.
Stack containing all of the potential archetypes to visit.
Stacktrace logging is controlled by xdebug.default_enable.
Step through the list of requirements in the generic type.
Stop the proxy, and stop execution of the current request.
Store result into the AFWH object and unblock all parents.
Store the FPIEnt's index in the FuncEmitter's entry table.
Stored properties imported from Clang don't get accessors.
Structural mismatches imply that the witness cannot match.
Swift runtime functions in support of lazy initialization.
Synthesize trivial conformances for each of the protocols.
System units are merge only, and everything is persistent.
TODO: Function types go through a more elaborate lowering.
TODO: Look through static method applications to the type.
TODO: Peek through struct element users like COWArrayOpts.
TODO: Support parameter requirements in non-type contexts.
TODO: These are free if the metatype is for a Swift class.
TODO: attempt to specialize this based on the known types.
TODO: include the module in the onceToken's name mangling.
TODO_4: if we don't end up with a use for this, remove it.
Take the information about the forward ref out of the map.
Takes the same inputs as the linker, but doesn't own them.
Temporary debugging flag until this pass is better tested.
The Builtin.once token guarding the global initialization.
The Cursor creation should be done through an init method.
The `base' register is not necessarily a virtual register.
The actual result value just needs to be bridged normally.
The function return type is the first element in the list.
The input is exploded and the output is an optional tuple.
The last component of the path *could* be a database name.
The length of the transcoded string in UTF-16 code points.
The limit for passing a list of files on the command line.
The longest property name we use in an uploaded file array
The normal case - we were called via FCall, or FCallArray.
The number of empty cases representable by each tag value.
The only difference being the specification of leap years.
The only non-member decl that can be an lvalue is VarDecl.
The owner of the function's Name is the FunctionTable key.
The parser generated a unique name for the class, use that
The patterns which should replace the specialized pattern.
The pointer back to the AST node that produced the callee.
The receiver accepts ownership of the notification object.
The single terminator instruction is part of the frontier.
The structure of ObjC class ivars as emitted by compilers.
The type is the type of the actual result, not the prefix.
The type will be walked as a part of another TypedPattern.
The type-checker doesn't care about how these are grouped.
The upper two digits for control characters are always 00.
The value witnesses selected by this step of the solution.
The various invokeFoo functions are the entry points here.
The witness could be removed by dead function elimination.
Then for each (SILValue, Enum Tag) that we are tracking...
Then sends the command back to the client as confirmation.
There is a slight redundancy here but we can live with it.
There may still be threads in existing interrupts, though.
There's at least one non-default param which wasn't passed
These are for settings/callbacks only settable at startup.
These entrypoints don't modify any compiler-visible state.
They are only used when generating profiling translations.
They make the systems different, but don't affect ranking.
This also adds a connection to "servers" for each new node
This constructor moves values, no inc/decref is necessary.
This file defines all of the diagnostics emitted by Swift.
This file defines the SwiftTargetInfo abstract base class.
This file implements IR generation for protocols in Swift.
This file implements algorithms for laying out structures.
This file implements declaration name demangling in Swift.
This file implements the PrintingDiagnosticConsumer class.
This handles skipping over null entries in the / worklist.
This has to be inactive until the variable is initialized.
This implements partial-redundancy elimination for stores.
This is helpful when there's several things wrong at once.
This is how tuples with "interesting" types are described.
This is not the case with the regular post-dominator tree.
This is the first compilation unit to begin printing from.
This is the priority order in which we handle constraints.
This is weird, but this is also what PHP does, so *shrug*.
This module contains an assembler implementation for HHBC.
This really just provides us a structure to match against.
This tracks how close the candidates are, after filtering.
This will be ignored for the rest of the ARC optimization.
This will let us reach the fixed point in less iterations.
This will only be called on strategies for loadable types.
This will walk the frames upward until we find a TC frame.
Time spent in children Iterate until we find the end frame
Too many weak uses for us to know we can optimize it away.
Treadmill solution for the SharedVariant memory management
Try to create missing directories on the path of filename.
Try to find if the function have __Native("VariadicByRef")
Turn the parameter clause into argument and body patterns.
Type-check the for-each loop sequence and element pattern.
Unpause the polling thread when we leave the command loop.
Use 86ctor(), since no program-supplied constructor exists
Use depth-first recursion to get the output order correct.
Use the archetype's parent relationship first if possible.
Use the common basic header info to make the image object.
Use the runtime to allocate a box of the appropriate size.
Validate the generic arguments and capture just the types.
VarDecls get added / to this when the declaration is seen.
Verify that meth has at least as many parameters as imeth.
Wait for the notification that semantic info is available.
Warn about 'try' expressions that weren't actually needed.
We already emitted a diagnostic about the bridging header.
We are being more conservative than most likely necessary.
We converted the block-end instruction to a different one.
We do not support nested indexed data types in native SIL.
We do not support this case since canonicalization failed.
We do not want type constants to be available at run time.
We don't need to capture anything from non-local contexts.
We have proven that they do not protect anything of value.
We have three thread modes: Normal, Sticky, and Exclusive.
We know the mod-ref behavior of various runtime functions.
We need a : prefix to resolve a name to a parameter number
We need to set /some/ target for them, so point them here.
We perform dead store elimination in the following phases.
We print all comments before the first line of Swift code.
We really want to eliminate unchecked_take_enum_data_addr.
We separate the work in two phases: analyse and transform.
We use "index chains" to deal with nested list assignment.
We want all our pointers to be kMinBytes - 1 byte aligned.
We will be doing an intersection with all of the other BB.
We've already completed the request at this point anyways.
We've been asked to skip the function body (fb_intercept).
We've been told to emit SIL after SILGen, so write it now.
We've come across a protocol that is in our original list.
We've constructed a concrete value for the covering value.
Weak storage types are handled with their underlying type.
When printing a type interface, this is the type to print.
When we leave a synthesized extension, clear target's USR.
Whether this is a parameter adjustment (with an index) vs.
Whether we're considered to be at the beginning of a line.
Whitespace it out to the same column as the previous item.
Will use the static empty mixed array to avoid allocation.
Write our local statistics back to the overall statistics.
XXX: OSX doesn't support realtime so we ignore which_clock
added by gerrit thomson to fix ldap_add using ldap_mod_add
allocate space for the values as part of this modification
before beginning of unix epoch or behind end of unix epoch
call by loading the address using rip-relative addressing.
check if onIOWaitEnter callback unblocked any wait handles
check static contents that were generated by dynamic pages
clear extended sign that should not be set (32bits number.
consume a code point, or fail if there was none to consume
convert the 7-bit alpha channel to an 8-bit alpha channel.
could be POLLERR or POLLHUP but can't tell without probing
default to 'openssl.cnf' if no environment variable is set
defined here because memory-manager.h includes sweepable.h
determine whether token should be used to sign the request
filter out types that should not be exposed to the runtime
han2zen() was derived from han2zen() written by Ken Lunde.
has to happen before zend_API since that defines getThis()
if there are no conformances, don't hold this handle open.
initialize a few bytes in the case the next function fails
let's see if this string has a matching dsn in the php.ini
lexCharacter - Read a character and return its UTF32 code.
materializeForSet is mutating and static if the setter is.
no break here, so we can continue to match more overwrites
no external thread events received, synchronization needed
otherwise file is actually a file, so we actually extract.
realpath will return an empty string for nonexistent files
return the next outermost handler or 0 if there aren't any
so we can assign values to them, instead of seeing CVarRef
subtract Move word to d and do not touch the higher 32bits
the executor is only destroyed after it is unregistered 2.
the replacement was constructed during the recursive walk.
the stuff from start_tok to i - 1 is the display name part
treat this as more likely unrelated to the previous crash.
try still use relative path to containing file's directory
use the original file or directory name as it wasn't found
visitSILBasicBlocks checks BBMap before it clones a block.
we differ here with the TCL implementation in allowing for
"InstallerPlugins", "InstantMessage", "JavaFrameEmbedding",
'is' patterns are only similar to matches to the same type.
(*m_cactive) consistency is achieved via atomic operations.
(Otherwise, the typeParam will be used as the `knownType'.)
(Quite possibly there is only one such image in existence.)
(Switching or masking will also require a cast to integer.)
- PHP5 semantics for such operations are machine-dependent.
- PHP7 defines negative shifts to throw an ArithmeticError.
- Sub-expressions and sub-statements should be replaceable.
./ (safe to drop iff there is something before or after it)
/ / A store is dead if after the store has occurred: / / 1.
/ / Currently this only implements typed access based TBAA.
/ / PerformDSE - Perform the actual dead store elimination.
/ / Returns a new instruction if optimization was possible.
/ / We classify instructions wrt to their effect on arrays.
/ We pattern match the first dimension's array access here.
40 Bytes should be more than enough for this format string.
512KB written, but file is not 1 MB large yet so no fadvise
A - 1 does not trap if A is greater than some other number.
A CallArray pops the ActRec, actual args, and an array arg.
A call that's rethrowing-only can be handled by 'rethrows'.
A fix_lifetime instruction acts like a read on the operand.
A fixed-size buffer is always 16 bytes and pointer-aligned.
A potential solution to the set of inferred type witnesses.
A set of apply inst that we have associated with a closure.
Access to Element node is implemented as a convience method
Add any defined macros to the bridging header lookup table.
Add any function attributes and set the calling convention.
Add literal completions that conform to specific protocols.
After our first pass, note that we've explored these types.
All C++ builtins can do this but many hot functions do not.
All centennial years are leap years in the Julian calendar.
All methods which take one UChar32 argument and return bool
All methods which take one UChar32 argument and return same
Also insert release_value in the normal block (done below).
Also need to add a zlib.output_handler ini setting as well.
An alloca may only be described by exactly one dbg.declare.
An anonymous context won't have access if it wasn't public.
Analyze the destructor to make sure it has no side effects.
And the states match, the enum state propagates to this BB.
Another 512KB, after one more byte a fadvise will be called
Arbitrarily pick one of the predecessor's branch locations.
ArgSpecialDest isn't copyable, so we can't just use append.
Assert that the indirect results are set up like we expect.
Assumption : low and high water mark are power of 2 aligned
At each initialization, mark the initialized elements live.
At the top of the hierarchy, no more finally blocks to run.
At this point, we must have a type with the builtin member.
AttrPublic bits are not valid on class (have other meaning)
Available since 7.37.0, PHP doesn't currently support these
Bare functions and thunks should not have any line numbers.
Begin all the formal accesses for a set of inout arguments.
Bind the error result by popping it off the parameter list.
Bridge the given object from Objective-C to its value type.
But callers can disable this by passing a null result type.
But if we do, advise the programmer that it's 'repeat' now.
But this is how Zend does it and there is no other good way
But we assume that in-place gets aren't all that important.
Caches an estimate of the number of named entities we have.
Calls through opaque protocols can be done with +0 rvalues.
Can convert a literal closure that doesn't capture context.
Cast the callback to the correct polymorphic function type.
Casts between a value type and a class cannot be optimized.
Casts to/from existential types cannot be further improved.
Check for empty() after wait(), in case of spurious wakeup.
Check if I is a sequence of projections followed by a load.
Check if at least one of the successors contains user code.
Check if comment is on same line but after the declaration.
Check if the Nth argument in all predecessors is identical.
Check if this callee is a candidate for DefInlineFP sinking
Check if we can statically predict the outcome of the cast.
Check if we need to wrap the bridged result in an optional.
Check the default arguments that occur within this pattern.
Check to see which tuple elements this instruction defines.
Check whether a reference for this selector already exists.
Check whether any of the inherited protocols are dependent.
Check whether there is already a method with this selector.
Check whether this nominal type derives conformances to the
Collect all case infos from the merge block's predecessors.
Collect the set of protocols inherited by this conformance.
Compare the whole object, not just the array representation
Complain about l-values that are neither loaded nor stored.
Compute (square of) distance from minc0/c1/c2 to this color
Compute alternate SHA256 sum with input KEY, SALT, and KEY.
Compute alternate SHA512 sum with input KEY, SALT, and KEY.
Compute the BBWriteSet at the beginning of the basic block.
Compute the genset and killset for the current basic block.
Configures target-specific information for arm64 platforms.
Constrain over-approximates intersection of version ranges.
Constrain the typeParam and sources of a Check instruction.
Contains an entry for each checked_cast_br to be optimized.
Continue by emitting the extra inhabitant dispatch, if any.
Convert a 16 bit signed value from file's native byte order
Convert a 32 bit signed value from file's native byte order
Convert a paren expr to a pattern if it contains a pattern.
Convert s to wchar_t* and null-terminate for el_winsertstr.
Convert the resulting expression to the final literal type.
Copy ourself, and embed the repo as a section named "repo".
Copy whatever the last rule matched to the standard output.
Create takes care of copying local variables and iterators.
Currently the debugger has no action to take at such sites.
Currying and calling convention thunks have shared linkage.
Default implementations for when a method isn't overridden.
Default visibility should suffice for other object formats.
Default-initialize optional types and weak values to 'nil'.
Delete all syntax map data from start line through end line
Destructor of IntrusiveListHook will automatically unlink()
Determine required destination buffer size (pre-flighting).
Determine the appropriate generic parameters at this level.
Determine the superclass bound on the given dependent type.
Determine whether one module takes precedence over another.
Determine which type we looked through to find this result.
Diagnose ".foo" expressions that lack context specifically.
Do not attempt to inline an apply into its parent function.
Do not specialize the signature of always inline functions.
Do not use the 4 neighbors implementation with small images
Does not skip any whitespace before looking for the string.
Don't expect to extract values once we've taken an address.
Don't hoist destroy_addr globally in transparent functions.
Don't print qualifiers for types from the standard library.
Drop requirements rooted in the applied generic parameters.
Either both types should be functions or neither should be.
Either both types should be metatypes or neither should be.
Eliminate bodies of external functions which are not alive.
Emit a destroy on each CFG edge leading to a dead-in block.
Emit a direct parameter that was passed under a C-based CC.
Emit an Objective-C method descriptor for the given method.
Evaluate the condition as an i1 value (guaranteed by Sema).
Every reachable use of a particular inlined fp in the unit.
Extensions always exist in the same group with the nominal.
FIXME: Assert that there is a native entry point available.
FIXME: Everything here brazenly assumes little-endian-ness.
FIXME: Failing here should not take down the whole process.
FIXME: If we already set the inherited protocols, bail out.
FIXME: If we do this late enough, there will be no failure.
FIXME: Multi-file compilation may cause group id collision.
FIXME: Only when experimental patterns are enabled for now.
FIXME: Pattern initializers at top-level scope end up here.
FIXME: Probably should be more general, as mentioned above.
FIXME: The proper way to do this depends on the decls used.
FIXME: This isn't actually used for anything at the moment.
FIXME: This seems like a hack, there must be a better way..
FIXME: Verify that these aren't circular and infinite size.
FIXME: We should not be relying on the global LLVM context.
FIXME: We're just using CompilerInstance::createOutputFile.
FIXME: dyn_cast_null does not work with IntrusiveRefCntPtr.
FIXME: rename from RemoveCondFails to RemoveRuntimeAsserts.
Figure out the (non-builtin) argument type if there is one.
Final case is the default, and must have a litstr id of -1.
Finally, delete the dead stores and create the live stores.
Find all dealloc instructions for AI and then chop them up.
Find the EHEnt for the fault funclet that off is inside of.
Find the Md5 for this path, and then the unit for this Md5.
Find the SILFunction for the ivar initializer or destroyer.
Find the declaration that derives the protocol conformance.
Find the innermost generic context and stash it in DeclCtx.
First try and grab the single predecessor of our parent BB.
For a declaration, check whether the declaration is hidden.
For a protocol extension, build the generic parameter list.
For debugging, print the final input states for each block.
For debugging, print the final state of the class analysis.
For each use of a specific result value of the instruction.
For empty types, we don't really need to allocate anything.
For example aliasing information is not taken into account.
For now just look at the previous instruction if it exists.
For now, just use extra inhabitants from the first element.
For now, we mark the cell popped with a Use::UsedIfLastRef.
For these machines you must define RIGHT_SHIFT_IS_UNSIGNED.
Force jemalloc to update stats cached for use by mallctl().
Form pixel value + error, and range-limit to 0..MAXJSAMPLE.
Generic tuple value witness for 'initializeBufferWithCopy'.
Generic tuple value witness for 'initializeBufferWithTake'.
Get or create SILGlobalVariable for a given global VarDecl.
Get the bit representing the location in the LocationVault.
Get the current used size of the three stacks, in elements.
Given a full tuple explosion, project out a single element.
Global variables can be accessed directly with global_addr.
Go hunting for an unclaimed argument whose name does match.
Handle this by rewriting the arguments to UnresolvedType().
Handle tuple destinations by destructuring them if present.
Helper function to find a SILGlobalVariable given its name.
Helper used when looping through the unmatched breakpoints.
Here, the source has a payload but the destination doesn't.
Hint metadata that doesn't fit into the `variables' vector.
Hold an AstUnit so that the Decl* we have are always valid.
However, we do allow Optimize translations past that limit.
I changed it to only consider routeable addresses as valid.
I don't care what the ini_ret was if it isn't equal to what
I haven't been able to confirm that this is correct either.
If Arg is not ignorable, it will be now and we will not be.
If `rhs' is a big integer, the following will return false.
If an error is signalled by a non-zero result, return zero.
If an error is signalled by a zero result, return non-zero.
If any nested types remain unresolved, produce diagnostics.
If anything about the TupleExpr changed, rebuild a new one.
If basic block has no predecessor, simply reset and return.
If function is marked as "keep-as-public", don't remove it.
If it is something else, then this is the end of the token.
If it's a type reference or it's a module type, we're done.
If not already recovering from an error, report this error.
If rename didn't work, fall back to copy followed by unlink
If requested, look into the superclasses of this archetype.
If the 'self' parameter is a metatype, we'll throw it away.
If the bases do not alias, then the locations cannot alias.
If the buffer alignment is good enough for the type, great.
If the constant is a thunk we haven't emitted yet, emit it.
If the decl ref requires captures, emit the capture params.
If the element carries no data, neither does the injection.
If the entry was already present, we may need to update it.
If the function wasn't delayed, then we're emitting it now.
If the internal pointer points to this element, advance it.
If the list is empty, the custom scanner is always invoked.
If the member has weak or unowned storage, convert it away.
If the metatype matches a dependent type, it must be thick.
If the parent is dependent, create a dependent member type.
If the payload is POD, then we can use POD value semantics.
If the payload is larger than the value, zero out the rest.
If the pointee is a record, consider creating a class type.
If the result isn't a metatype, there's nothing else to do.
If the top of stack is a loc that is not marked, do nothing
If the type isn't loadable, the explosion size is always 1.
If the whole pattern is implicit, the user didn't write it.
If there are no program arguments, always invoke as normal.
If there aren't any coverage maps, there's nothing to emit.
If there is an 'objc' attribute with a name, use that name.
If there is no first argument, create one for this purpose.
If there is no opportunity on the signature, simply return.
If this instruction is unrelated to the element, ignore it.
If this is 0b10XXXXXX, then it is a continuation character.
If this is a DEBUG build, use pretty names for the LLVM IR.
If this is a bottleneck it can be converted into a hash-map
If this is a failable initializer, project out the payload.
If this is a reference to a module, produce an undef value.
If this resolved inherited type is existential, keep going.
If this succeeds, someone raced us to scoping the template.
If two types are checked-cast-able, so are their metatypes.
If typo correction renamed this type, get the renamed type.
If we 'break' out of the switch, break out of the loop too.
If we already have a nested type with this name, return it.
If we are no longer on the active line breakpoint, clear it
If we aren't in a closure, no diagnostics will be produced.
If we can emit the base witness table as a constant, do so.
If we do not support this instruction kind, then just bail.
If we don't have a nominal type, there are no conformances.
If we don't have any data to read (POLLIN) then we're done.
If we don't need generic parameters, just build the result.
If we don't need to look up any witness tables, we're done.
If we fail to match anything, we can just emit unreachable.
If we found a decl that is being assigned to, then mark it.
If we had an exact match, throw away any non-exact matches.
If we have a section, enqueue the type metadata for lookup.
If we have a target function, only print that function out.
If we have a terminator instruction, see if it can use ptr.
If we have all invalidated nodes, this will return nullptr.
If we have an indirect return slot, initialize it in-place.
If we have no name or no type name, there is nothing to do.
If we have not seen this protocol before, record its index.
If we have the terminating "`", it's an escaped identifier.
If we reached this point, then this type has no subrecords.
If we've already done this check, return the cached result.
If we've checked types already, do some extra verification.
Impl data structure is a singleton and globally accessible.
In a class metadata, the first field is the class instance.
In most cases it will have only one element, a return inst.
In non-strict mode we may be able to coerce a type failure.
In this case we don't need to do any work to use the value.
Incomplete requests in the I/O thread will not be executed.
Indicate that the existing cast cannot be further improved.
Initialize necessary things to run the iterative data flow.
Instructs the JNI environment to throw an OutOfMemoryError.
Integer literals can be treated as floating point literals.
Is this interesting to the last iteration of the data flow.
It is Tevet, Shevat or Adar I - don't need the year length.
It's always a metatype type, so use the instance type name.
Iterate through the globals, filtering out non-superglobals
JITing pseudo-mains requires extra checks that blow the IR.
Just keep inserting / being unreachable right where we are.
Keep scanning in case the copy_addr appears multiple times.
Keeps a map between the accessed SILValue and the location.
Known generalized cases that don't really need pointer kind
LdStk is the one exception, so we compensate for that here.
Line breakpoints add a file, line, and possibly a condition
Log the translation's size, creation time, SrcKey, and size
Look for all methods in the module file with this selector.
Look through base-ignored exprs to get to the function ref.
Lookup the index of the property based on ctx and baseClass
Lower it, being careful to use the right generic signature.
Lower the type at the abstraction level of the existential.
Lvalues are captured as a box that owns the captured value.
Macro to check whether a cursor is dead, and if so, bailout
Magic IV for 64 Blowfish encryptions that we do at the end.
Make a copy of it to be able to correct produce DumpModule.
Make a generic type repr that's been resolved to this decl.
Make an APC table with some things primed for tests to use.
Make sure eval stack is correct at start of each try region
Make sure immediate loc after loc is not before target loc.
Make sure the SynthesizeSugarOnTypes option is functioning.
Make sure to keep handling of both of these errors in sync.
Make sure to release and destroy any owned or in-arguments.
Make sure we at least set the 'is Swift class' bit, though.
Make sure we don't search in Clang modules for this method.
Make sure we still remove A.init from the set in this case.
Make the debug information stored in the AllocBox explicit.
Make the property the alternate declaration for the getter.
Mangle this as if it were a closure within the requirement.
Map protocol conformances to their root normal conformance.
Mark the variable as used if doesn't have external linkage.
Mask in junk to make sure the runtime correctly ignores it.
Need to ensure we don't delete breakpoints on the same line
Never do this if it's the first parameter of a constructor.
Not a collection, just emit the code given by the callable.
Note that ordering is maintained of retains within this BB.
Note that the parameter and result must also have type i8*.
Note the constraint within the node for that type variable.
Notify the listener that we've built the constraint system.
Now create the new partial_apply using the cloned function.
Now erase the old argument since it does not have any uses.
Now iterate over the callee BBs and fix up the terminators.
Okay, we have a failed lookup of a multicharacter operator.
Only applies to method and it's always false for functions.
Only functions with bodies can be analyzed by the analysis.
Only indent if it is pending and if it is not an empty line
Only look through the current module if it's not top-level.
Op must implement the interface described for cellIncDecOp.
Open the existential value into the opened archetype value.
Operators and normal function calls are just (CallExpr DRE)
Operators implementations may only be defined as functions.
Optional and IUO are interchangeable if their elements are.
Other final member operations pop their first immediate + 1
Otherwise we can just overwrite the most recent begin frame
Otherwise, build a struct value directly from the elements.
Otherwise, it must be a failure BB where we leak, continue.
Otherwise, it should be parented by the innermost function.
Otherwise, just remember the fact we used this conformance.
Otherwise, the first declaration is shadowed by the second.
Otherwise, the parent has a single parameter with no label.
Otherwise, this is something else that is using the memory.
Otherwise, use the default attributes for the dynamic type.
Otherwise, we can not compare the projections as sequences.
Otherwise, we're talking about the formal parameter clause.
Packed arrays don't need renumbering, so don't make a copy.
Parse a type after the 'is' token instead of an expression.
Perform CSE of existential and witness_method instructions.
Perform a dynamic cast of a class value to a metatype type.
Pick one of the arguments that are expected as an exemplar.
Placement initialize the ParameterList and the Parameter's.
PostConditions of a block are our local transfer functions.
Prefer loads and stores if we won't make a million of them.
Prefer the declaration that comes first in the source file.
Preflight to avoid allocation if the entire input is valid.
Process LEN bytes of BUFFER, accumulating context into CTX.
Produce a class_method when thunking imported ObjC methods.
Produce a deterministic ordering of the given declarations.
Produce a diagnostic if it doesn't make sense to ignore it.
Produce the heap metadata pointer for the given class type.
Propagate DestroyLoc for any destroy hoisted above a block.
Propagate to parents so we can link inherited static props.
Protocol initializer arguments may not have default values.
RAII guard for temporarily overriding an Emitter's location
Raise error if we parse an IUO type in an illegal position.
Read whether the associated types are dependent archetypes.
Really no point optimizing here as there is no dead stores.
Record the incrementally constructed reffiness predictions.
Record the overflow check and try to optimize other checks.
Redeclared prop, make sure it matches previous declarations
Register a cleanup to invoke the closure on any exit paths.
Register with the conditional dominance scope if necessary.
Release the value that was stored into the existential box.
Rematerialize the projection if needed by simply moving it.
Remove any solution that is worse than some other solution.
Remove redundant runtime calls for stack allocated buffers.
Remove shadowed declarations from the list of declarations.
Remove the load to look at the address we are loading from.
Remove tracked state for the slots for args and the actrec.
Replace already-emitted aliases with external declarations.
Replace archetypes and type parameters with UnresolvedType.
Retains are safe as long as they are not inside the / Loop.
Retrieve all of the globals that will be mapped to members.
Return 'true' if there was an error, and 'false' otherwise.
Return a concrete type or archetype we've already resolved.
Return an initialization address we can emit directly into.
Return the substituted, unlowered AST type of the argument.
Return true if this function name is a comparison operator.
Return true if this pattern (or a subpattern) is refutable.
Return true if we printed out / either an id or a use list.
Return whether there are at least len characters remaining.
Same enum elements don't necessarily imply same enum types.
Save the final size and alignment into the metadata record.
Save time if we already know we processed this AST version.
Scan past simple instructions that cannot reduce refcounts.
Schedule users of the new instruction for constant folding.
Search the subtree if the target range is inside its range.
Search the whole function for stack promotable allocations.
See whether this is a payload or empty case we're emitting.
Set the unnamed "state" local to the appropriate identifier
Set up TargetOptions and create the target features string.
Set up inlining context, but disable it for profiling mode.
Set up the builder we use to insert at our insertion point.
Should only include this default if not explicitly ignored.
Shouldn't happen where we have requirement representations.
Silence downstream errors referencing this associated type.
Since the task signalled, unconditionally set result to -2.
Since we unwrapped constraints before, add this constraint.
Skip the first 3 bytes to emulate the file type examination
Skip the overflow check here because the int will be small.
So we force to serialize it as 13 bit unsigned int instead.
So we steal one bit from the memory field to use as a flag.
Sort the protocols so that we get a deterministic ordering.
Special diagnostic for protocols and protocol compositions.
Split up opaque operations (copy_addr, retain_value, etc.).
Splitting this way might give us an empty string at the end
Start calculating offsets from the last fixed-offset field.
Start layout by appending to a standard heap object header.
Start looking for fixup entries at the current (C++) frame.
Stop the proxy and ensure that no new uses of it can occur.
Superficially verify that the input is a swift module file.
Synthesize accessors for the protocol witness table to use.
TODO(10152762): Run this concurrently with non-disk warmup.
TODO: Handle non-protocol constraints ('class', base class)
TODO: Mapper needs to calculate a function hash as it goes.
TODO: When data handles are introduced, print that instead.
TODO: this should be consume-ordered when LLVM supports it.
Take the reference type argument and cast it to RawPointer.
Test is a little different, so we have this BASIC_OP stuff.
That pattern guarantees a monotonically increasing counter.
The "-z" option of "file" is the reason for this ugly code.
The Optional is just to avoid copy constructing MArrayIter.
The argument isn't pushed until the final member operation.
The asyncRetCtrl stub takes the return TV as its arguments.
The basic implementation of the RemoteASTContext interface.
The boxed value can't be assumed to be uniquely referenced.
The conformance must be complete, or we can't serialize it.
The easy path here is if we don't need to use an addressor.
The following constants define the cost model for inlining.
The formal type is just that with the right representation.
The generic function signature is complete and well-formed.
The kinds of overload choice match, but the contents don't.
The last pcre error code is available for the whole thread.
The loop below will correct for any error in this estimate.
The next three routines implement inverse colormap filling.
The node whose end marks the end of the refinement context.
The number of generic witnesses in the type we're emitting.
The offset of the address point in the type we're emitting.
The old branch instructions are no longer used, erase them.
The order that we visit uses for a given def is irrelevant.
The pointer element type must be void or a byte-sized type.
The regions in the following copy operation cannot overlap.
The remaining Unicode characters should be mapped to S_ETC.
The setcc should now be dead and will be cleaned up by dce.
The structure of ObjC class rodata as emitted by compilers.
The witness from which the first type witness was inferred.
The witness handles 'nil', but won't ever be given a 'nil'.
The witness must not be more mutating than the requirement.
Then print dependencies we've picked up during compilation.
There's no way to change them without creating a new cursor
These are the list of SILValues that are actually released.
These layouts can exist in both decl blocks and sil blocks.
These opcodes require an object descending from WaitHandle.
They are listed below and how we work around / them: / / 1.
They better be ABI-compatible, since we can't emit a thunk.
This can be an early release for a conditional initializer.
This could be handled in processNonTrivialRelease some day.
This doesn't handle Unicode symbols, but maybe that's okay.
This ensures that we record all known protocols in the AST.
This file contains code from MurmurHash, by Austin Appleby.
This file implements REPL-specific semantic analysis rules.
This file implements interfaces for performing name lookup.
This file is part of the Independent JPEG Group's software.
This is also an error, but the code below will diagnose it.
This is because the driver can't handle this at the moment.
This is required for correctness by the x64 code relocator.
This is the label to jump to if the pattern fails to match.
This iteration order is nondeterministic but has no impact.
This needs to be kept in sync with getTypeMetadataStrategy.
This regex does not handle comments and folding whitespace.
This should be called after filtering the candidate / list.
This should have been overwritten by the creation function.
Three-byte-character lead byte followed by two trail bytes.
Track whether we had parentheses around the string literal.
Try to apply the string literal concatenation optimization.
Try to determine the size of the object we're deallocating.
Try to keep it such that we do not have to resize the array
Try to speed up the trivial case of single release/dealloc.
Type implementation for fixed-size but non-loadable tuples.
Until this is fixed, we need to / also hash the ArgNo here.
Update it in the ForwardSetIn of the / current basic block.
Used to deserialize entries in the on-disk decl hash table.
Used to deserialize entries in the on-disk func hash table.
Values imported / from Clang can also appear in any module.
Verify that all of the variable were assigned exactly once.
Verify that the loop variable is invariant inside the body.
Verify the file to be extracted is actually in the zip file
Visit each of the requirements, adding them to the builder.
Walks up from a potential callee to the enclosing CallExpr.
We / simplify each argument recursively one step at a time.
We already found the destination node through another path.
We cache this because we might repeatedly need the bitcast.
We cannot call operators with a postfix parenthesis syntax.
We do not specialize strings with a length greater than 32.
We do not want to visit that loop subregion multiple times.
We don't vend the runtime name for generic classes for now.
We emit a completely different pattern for foreign classes.
We force mustBeRef() to return false for array_multisort().
We found an open instruction that DominatingOpen dominates:
We found some potential reference decrementing instruction.
We hash the enum by hashing its kind, element, and operand.
We have multiple non-trivial types violating our condition.
We haven't implemented type-level storage in some contexts.
We ignore patterns that aren't similar to the head pattern.
We know enough about the property to perform direct access.
We must treat the boxed value as +0 since it may be shared.
We need to lower function and metatype types within tuples.
We only care about nested types that haven't been resolved.
We reset it as not all options set a string as replset name
We shouldn't have anything else left in our name for typeID
We still want the fallthrough and prediction logic, though.
We use this workQ containing (prev, cur) to delay one side.
We will not do anything to it so nothing bad should happen.
We won't emit the block until after we've emitted the body.
We'll satisfy this via our handling of default definitions.
We'll visit blocks with lower reverse post order ids first.
We're already running a magic method on the same type here.
We're going to capture this, compute flags for the capture.
What we save in GlobalVars is actually the offsetted value.
With slave_okay being false, the RP is switched to PRIMARY.
XDebugThreadBreakpoints Implementation Adding a breakpoint.
XXX 5.14 at least introdced 100 ns intervals, this is to do
XXX: This changes the refcounts of the object's properties.
Zend puts the number of args as the last thing on the stack
a character width specification, to be more consistent with
a label inside a loop cant be reached from outside the loop
a static variable at global scope is the same as non-static
add a range covering the whole block to every live interval
after our pointer arithmetic jump back to the first element
all vector methods should work w/out touching the hashtable
always emit 'tok::equal' to avoid trickle down parse errors
arm64 has no special objc_msgSend variants, not even stret.
assumes specialized conformance is always fully specialized
case T_TRAIT_C: Note: T_TRAIT_C is translated at parse time
check that headers have a "sensible" state during sweeping.
child failed, raise the exception inside the async function
compute dest types of each instruction in forwards order 3.
convert cmpli to cmpqi or ldimmq + cmpq by cmpqi's lowering
converts jpeg/png images to wbmp and resizes them as needed
don't need this till we fully implement error reporting ...
endCatchHelper only expects rvmtl() and rvmfp() to be live.
eof if we are out of bytes, or if we hit the final boundary
extend byte sign compare immed only with the byte extracted
flush so if php crashes us we still have this output so far
forget the source for systemlib.php unless we are debugging
fp1 should only be NULL if fp0 is the top-level pseudo-main
free stuff without running destructor or decrefing contents
get the id from a specified key or create new shared memory
if this reference contains a db name, we have to switch dbs
macro for commonlizing X-/D-form of load/store instructions
now clear the inst.d if the CR's EQ bit is set, else set it
now set the inst.d if the CR's EQ bit is set, else clear it
now we have the directory we can look how long it should be
o Some situations with loads from memory (described later).
otherwise we just have one last element to add to the array
parameterType can be null, and isEqual doesn't handle this.
parseExprOperator - Parse an operator reference expression.
parseStmtDefer / /   stmt-defer: /     'defer' brace-stmt /
preface the message with the name of the offending function
private helper method since C++ does not have extensions...
safe to clear used elements after we've forked the document
search for the lowest position covered by current and other
since we have metadata for it, it must have a valid header.
split on commas, search and bind ini settings for each pool
the final case - the start of the line is inside the window
treat it as kBase_Disp to avoid a kIndex_Disp asm handling.
we don't perform any cleanup, if dirdepth is larger than 0.
we don't use chunk encoding to send anything pre-compressed
we only do variable inspection on continuation wait handles
wrapper of realloc, the original buffer is freed on failure
write out the PNG header info (everything up to first IDAT)
'class' is a modifier on func, but is also a top-level decl.
'rethrows' is only allowed on function declarations for now.
/ / - Convert trivial initializers to static initialization.
/ / The SILBuilder is left at the start of the ContBB block.
/ / This is necessary to handle C's awful declarator syntax.
/ / This logic should be similar to checkSafeArrayElementUse
/ For example, functions which may be referenced externally.
/ Returns the new EndBlock or null if no one could be found.
/ StructValueUsers records direct uses of the loaded struct.
/ TODO: give this some reasonable name and possibly linkage.
/ The argument is appended at the end of the argument tuple.
/ The type must be dynamically known to have enum witnesses.
2.0.16: Paul den Dulk found an occasion where total can be 0
2/  Only one instruction in the original stream is modified.
A class which lays out a specific conformance to a protocol.
A map from a Job to the commands it is known to be blocking.
A single-element tuple can be a trivial subtype of a scalar.
A single-expression body contains a single return statement.
A store or assign is ok if the alloc_box is the destination.
A typesafe union of contexts that the printer can be inside.
A variable used in a pseudomain only need to do this once...
A witness method always provides the witness table for Self.
AST stream printer that adds extra indentation to each line.
Add all of the inherited protocol requirements, recursively.
Add an `unreachable` to be the new terminator for this block
Add in the partial applies function name if we can find one.
Adds a function which implements a vtable or witness method.
All entries of the dependency graph, which represent fields.
Allow it to default to () if there are no return statements.
Allowances for daylight saving time changes and leap second.
Also don't forget to update mangleUnitPHP7Options if needed.
Also remember the first pattern which matched that property.
Alternate "loose" transition table to support unquoted keys.
Always consider cond_fail instructions as potential for DCE.
An implementation of DynamicPackingPHIMapping for Addresses.
Appending empty file to -c options to avoid loading defaults
Apply the fixes, building up a new buffer as an std::string.
Architectures with no complicated addressing modes supported
As eval_const, but don't divide/mod by zero at compile time.
As such, the string will be freed at the end of the request.
Asked for more than whole string, treat like len.isNull case
At this point, both t1 and t2 are of the same type category.
At this point, the arguments of the first BB will not match.
At this point, the layouts in the indexed types are correct.
Attempt to omit needless words from the given function name.
Autoclosures need to be numbered and potentially reparented.
Automatically register FastCGIServerFactory on program start
AwaitAllWaitHandle::fromArray() always returns a WaitHandle.
Bail if string literal concatenation could not be performed.
Basic relationship between the class types and object types.
Besides, if it is corrupt, the size might be messed up, too.
Bind all the fulfillments we can from the formal parameters.
Bindings are only necessary at all if the type is dependent.
Build a sub-plan that doesn't know about the initialization.
Build lookup maps for the short options and the long options
But if they are different print it out so we find the error.
Calculate string length based on imap's rfc822_cat function.
Called to clear out the tracked local values at a call site.
Carries out commands that change the status of a breakpoint.
Casts involving non-bound generic types cannot be optimized.
Change the DeclContext of any parameters to be this closure.
Check each of the conformances associated with this context.
Check for a few common cases that can cause missing members.
Check for value arguments that need to be passed indirectly.
Check if Right's lexicographical order is greater than Left.
Check if the value is the this-argument of the array method.
Check if we already reported a decl with the same signature.
Check that all storage users are in the Array's live blocks.
Check that all stored properties have in-class initializers.
Check the substitutions passed to an apply or partial_apply.
Check what was the value stored in the allocated stack slot.
Class that performs enum tag state dataflow on the given BB.
Classes can never be initialized statically at compile-time.
Combine into the interval already at the back of the vector.
Combine the header, function records, and mappings together.
Compile pattern and display a warning if compilation failed.
Compute error fractions to be propagated to adjacent pixels.
Compute insertion point generated by MayUse terminator inst.
Compute the AvailSetMax at the beginning of the basic block.
Compute the representative color for each box, fill colormap
Compute the set of substitutions we'll need for the witness.
Configures target-specific information for x86-64 platforms.
Consider disabling this when debugging the fast return path.
Construct a new instruction by copying all the case entries.
Convert back from internal Unicode to original character set
Convert strings in the specified array from UTF-8 to UTF-16.
Count the number of possible case tags for a given enum type
Create a "dest temp" to hold the reference after casting it.
Create a connection to every of the servers in the seed list
Create a new Explosion corresponding to the given SIL value.
Create a new specialized function if possible, and cache it.
Create a relative symlink to logs under linkname's directory
Create the condition unit if a condition string was supplied
Create the decl for the func and add it to the parent scope.
Create the stores that are alive due to partial dead stores.
Currently we don't allow the address+set combination either.
Cut edge points to fit in filter window in case of spill-off
Data structures used to perform name lookup of basic blocks.
Data that is kept per request and is only valid per request.
Delete all syntax map data from start line through end line.
Deliberately reload `attrs' to check for dynamic properties.
Depending on read preference type, run the correct algorithm
Deserialize a SILFunction if it is not already deserialized.
Determine the type that the requirement is expected to have.
Determine whether the given context is generic at any level.
Determine whether we're searching from a protocol extension.
Determine which attribute it is, and diagnose it if unknown.
Different payloads have different reference counting styles.
Disable logging to suppress harmless errors about setrlimit.
Discussion: The guaranteed self call sequence is as follows:
Do a fast path for ASCII characters that don't need escaping
Do a primitive copy of the enum from one address to another.
Do make sure that it does not effect any other instructions.
Don't keep external functions from stdlib and other modules.
Don't stop emitting messages if we ever can't load a module.
Don't warn if we're in UNSET state (ie between queries, etc)
Dumps the escape information of all functions in the module.
Dynamically cast a class metatype to a Swift class metatype.
Emit a service request stub of type `sr' at `start' in `cb'.
Emit a type check and dispatch to each specialized function.
Emit an ambiguity diagnostic about the specified expression.
Emit call to _stdlib_isOSVersionAtLeast(major, minor, patch)
Emit debug info for a function argument or a local variable.
Emit service request to smash address of SrcKey into 'addr'.
Emit the forwarding stub function for a partial application.
Empty the output buffer --- called whenever buffer fills up.
Encoding -- determine the character encoding of a text file.
Ensure we don't convert an array to a void pointer this way.
Everything else is just a pure type-system boxing operation.
Extend the lifetime of 'Arg' to the lifetime of the closure.
Extract the instance pointer from a class existential value.
Extract the metatype pointer from a class existential value.
FIXME: Also allow types bridged through Objective-C classes.
FIXME: Lame to rely on archetypes in the substitution below.
FIXME: Layering violation to use the ClangImporter's define.
FIXME: Notion of depth is reversed from that for archetypes.
FIXME: Possibly should extend to more availability checking.
FIXME: Remove altogether rather than injecting a NULL value.
FIXME: Ugly hack: remove the .Builtin from the element type.
FIXME: We could avoid imploding and reexploding tuples here.
FIXME: avoid this duplication of the behavior of isLoadable.
FIXME: consider whether CCOpts has changed since the 'open'.
FIXME: get the parameter from the init, and plug it in here.
Facts about a Func's current frame at various program points
Fall through to merge it with following T_INLINE_HTML tokens
Fetch a global reference to the given Objective-C metaclass.
Figure out the protocol, requirement, and potential witness.
File may not exist, continue and recover as if it was empty.
Fill the input buffer --- called whenever buffer is emptied.
Find the type variable associated with the function, if any.
First forward any copies that implicitly destroy CurrentDef.
Fixed-size enums don't need dynamic metadata initialization.
Flattens one level of optional from a nested optional value.
For all basic blocks in the function, initialize a BB state.
For calls, we try to figure out the destination symbol name.
For catch handlers, add an edge to each handler entry point.
For closures, update the parameter types and check the body.
For default implementations, Self is the protocol archetype.
For every character in the password add the entire password.
For everything else, just get it from the generic parameter.
For example, it may have generic / arguments substituted in.
For fatal errors and unknown exceptions, we raise a warning.
For funcIsMagic prologues, this is just a possible prologue.
For long strings it falls back to the non-inlined slow path.
For now we only need dependencies for function return types.
For now, only do anything if there's a single direct result.
For some reason gcc won't capture MinPrintLevel without this
For the next steps we need our parentDC to be a type context
Fortunately, SEEK_SET is defined to be zero by the standard.
Forward local substitutions to a non-generic local function.
Function: gdAffineRotate Set up a rotation affine transform.
Functions with inout parameters cannot be partially applied.
Generate the new layout for this type, including any suffix.
Get the first level projection for the struct or tuple type.
Give back the default-argument context if we didn't need it.
Given a filename, finds the corresponding unit if it exists.
Given a symbol name and a depth, returns the symbol's value.
Given a type metadata pointer, load its value witness table.
Helpers These are used a lot, prevent unnecessary verbosity.
Here are typical scenarios: (1) AST reads decl, get's scope.
However, some of the indexed types may have the same layout.
However, this can be changed by setting the PCRE_UCP option.
IEEE 802 format: Six hexadecimal digits separated by colons.
If 'inout' was specified, turn the type into an in-out type.
If / no swap has occurred, these methods will work the same.
If 0 is returned, *error_message is set and must be free()d.
If RTy is a builtin raw pointer type, it can alias anything.
If `f' is a method, either `thiz' or `cls' must be non-null.
If `f' is a regular function, `thiz' and `cls' must be null.
If a depth was provided, we're only interested in that depth
If a duplicate breakpoint already exists, it is overwritten.
If a label is recgonized, we want the cursor pointing at it.
If any simplification happened to this instruction, drop it.
If everything matched, all remaining properties are dynamic.
If isn't legal to declare something both inout and variadic.
If it doesn't belong to any other instruction then print it.
If it doesn't have function type, we must have invalid code.
If it has an initializer expression, this is trivially true.
If it is the only instruction in our BB, it is a failure BB.
If it's an integer key, check if it's the next packed index.
If necessary insert an overflow for this induction variable.
If not, it locks up if you hit ctrl-Z then "bg" the program.
If setting the flag failed, it's because it was already set.
If the Unbox ended up being a noop, don't bother refcounting
If the base is a module type, just use the type of the decl.
If the base is currently an address, we may have to copy it.
If the class exists, we can verify that the method is valid.
If the decl was captured from us, it isn't captured *by* us.
If the declaration is dynamic, there's no materializeForSet.
If the declaration was not global to start with, we're done.
If the enum is already indirect, its cases don't need to be.
If the enum is trivial, then there is no cleanup to disable.
If the extension is already known to be invalid, we're done.
If the input SILFunction is / null, we create a SILFunction.
If the method isn't defined in the requested class, skip it.
If the path length is 1 the type directly references itself.
If the preposition is "of", look for a previous preposition.
If the property isn't from Clang, we can't safely update it.
If the result is unitialized, the property must be undefined
If the source of a cast should be destroyed, emit a release.
If the source type is bridged to Objective-C, try to bridge.
If the start or end is a partial word, don't scan that word.
If the subexpression was in error, just propagate the error.
If the target type is bridged to Objective-C, try to bridge.
If the type wasn't optional, an array, or unowned, complain.
If the value is not definitively initialized, emit an error.
If there are substitutions, specialize the generic accessor.
If there is new temporary for this argument, use it instead.
If there is no subinitialization, then we are done matching.
If there was an error, ignore it and just let the exec fail.
If there were no local unsatisfied requirements, we're done.
If there's no abstraction difference, we just need to store.
If there's no code in 'a', then the entry must be in 'aCold'
If these are both function types, then they are near misses.
If this is a delegating initializer, collect uses specially.
If this is a global imported as a member, record is as such.
If this is an enum inheritance clause, check for a raw type.
If this is the case we have a single block switch_enum loop.
If this is the first error, complain about the missing 'in'.
If this is the source of the copy_addr, then this is a load.
If we are asked to serialize everything, go ahead and do it.
If we are concatenating, just create and return a new block.
If we are supposed to override the target triple, do so now.
If we can't represent the Swift name in Clang, bail out now.
If we didn't find any exact matches, accept any type aliases
If we don't have anything that we can simplify, don't do it.
If we found an Objective-C-defined class, continue checking.
If we have a concrete type, produce a same-type requirement.
If we have a constructor member, handle it as a constructor.
If we have a name to import as, add this entry to the table.
If we have not seen this color before, find nearest colormap
If we haven't seen this type variable before, record it now.
If we make the function better later we'll remove the tests.
If we matched anything above, update the name appropriately.
If we opened up any type variables, record the replacements.
If we see any continuations at a higher level, process them.
If we're extending a protocol, check the generic parameters.
If we're within an implicit brace context, don't add indent.
If we've already checked this at a higher level, we're done.
If x is not modified in the closure body and is only loaded.
Ignore instructions which don't write to the stack location.
Imported structs and enums are trivially representable in C.
In case we want to encode the relative of InstID vs ValueID.
In particular, it does *not* check for overlong / encodings.
In the end, though, we're okay with any hint from the group.
Information about the IR-level signature of a function type.
Initialization is the same as for the non-reentrant scanner.
Initialize the worklist to all of the constant instructions.
It / will be a tradeoff between utility of the attribute vs.
It has to *syntactically* have a tuple type as its argument.
It requires a TupleType to compute the mapping from argExpr.
It will be cleaned up and destroyed later by another thread.
Iteration is stopped early if any of the calls return false.
Its contents will be uninitialized by the point it executes.
Its not an error for an abstract function to have zero size.
Its not safe to destroy the globals, or run atexit handlers.
Kegacy hphpd code expects no failure if no hook is attached.
LLVM can treat this as equivalent to the global's GOT entry.
Left and right operands of a string concatenation operation.
Like choose_closest_after(), but iterates through `pos_vec'.
Load the 'isPOD' valueWitness from the given table as an i1.
Loading classes or metatypes doesn't require their metadata.
Local function that handles the "inherited" list for a type.
Looking through the pattern, go to each arg_start part type.
Make a 1-to-1 mapping of all arguments and the return value.
Make a copy of the fields list into ASTContext owned memory.
Make sure that even if we have an ini value, that if we also
Make sure that the Closure is invoked in the Apply's callee.
Make sure that the incoming edge bb is not the RCIdentityBB.
Make sure that the overriding property doesn't have storage.
Make sure that the return has the same type as the function.
Make sure we record any files that still need to be rebuilt.
Many (perhaps most) of these colors will remain marked open.
Map all address modes that Vptr can be so it can be handled.
Map each let property to a set of instructions accessing it.
Map type parameter names with their instantiating arguments.
Match a call to a trap BB with no ARC relevant side effects.
Merge inputs and generic parameters from the uncurry levels.
Merging InitCell is correct, but very conservative, for now.
Missing features (partial list):  - line number information.
Module initialization routine for 2-pass color quantization.
Move the existing elements to make element slot 0 available.
Must be a tuple literal, function arg list, collection, etc.
Must not be called until its safe to run the relocated code.
NB: If there are any pending writes they will all be failed.
NUL-terminated: Scan for length and supplementary characters
Need to grab the breakpoint to send back the breakpoint info
Not the best thing, but in practice it should be good-enough
Note that this is the reverse of what we do in pre-checking.
Now add any names the DebugClient knows about to the lookup.
Now propagate liveness backwards until we hit the alloc_box.
Ok, we have a release on a SILArgument that is direct owned.
Okay, everything else is built from a Swift metadata object.
On way to solve this is to just re-allocate the buffer size.
Once all the instructions are copied, we can nuke BI itself.
Only consider standalone declarations in the Builtin module.
Only look at some conditional branches with no side effects.
Only thing we need to check is that the element is the same.
Only wait ServerPreShutdownWait seconds for the page server.
Or are part of an identified loop but are not a loop header.
Otherwise, call emitCGet to convert the top of stack to cell
Otherwise, flatten one level of tuple elements on each side.
Otherwise, just return the info we have about the parameter.
Otherwise, just update the existing reachabilities in-place.
Otherwise, look for a function with this name in the module.
Otherwise, lookup the ID and Type and store them in the map.
Otherwise, perform substitutions to create this witness now.
Otherwise, t.toString() will be used as the expected string.
Otherwise, the true/false result types must not be matching.
Otherwise, this is not the semantic call we are looking for.
Otherwise, we can jump directly to the ultimate destination.
Overloaded and unresolved cases: find the resolved overload.
Parameters are / sliced off of the front as they're emitted.
Perform prechecking of a ClosureExpr before we dive into it.
Preincrement iterator to avoid iteration issues in the loop.
Prints out information suitable for checking with filecheck.
Private migration help for overrides of Objective-C methods.
Process the current basic block with the genset and killset.
Produce tailored diagnostic for if/let and other conditions.
Promote a DebugValueAddr to a DebugValue of the given value.
Propagate relevant compiler-specific options to the runtime.
Protocol extensions do not contribute protocol conformances.
Put the serialized diagnostics file next to the output file.
Quick and dirty attempt at dtrace -F style function nesting.
Recover by injecting the force operation (the first option).
Reduce the number of load/stores in the function to minimum.
Remove last checked_cast_br, because it will always succeed.
Replace all loads from the / property by its constant value.
Replace an array.props call by the 'fast swift array' value.
Responses are big, print them out with info medium priority.
Restart iteration before the earliest instruction we remove.
Retain 'self' because the partial apply will take ownership.
Retrieve the requirements of this polymorphic function type.
Return false if there is underflow or if the modes mismatch.
Return one of the two values we computed based on the above.
Return the effect this instruction has on the value of `sp'.
Returns TCRegion containing addr if any, TCRCount otherwise.
Rotation is separate from addition to prevent recomputation.
SILCombine can expose further opportunities for SimplifyCFG.
Save the best color numbers (plus 1) in the main cache array
See https://github.com/webscalesql/webscalesql-5.6/issues/23
Set deepInit if the property requires "deep" initialization.
Set the current fields as the body of the given struct type.
Set the new start index to the first value of the induction.
Set the nextRetrans blocks according to the computed chains.
Set up the bitvector of elements being demanded by the load.
Shift the most significant bits of the tag value into place.
Simple pass for testing the new loop region dumper analysis.
Simplest way of expressing aperture, so I trust it the most.
Since the function is non-void, we need to return something.
Single character pattern matching should be simple and fast.
Skip over the value of the global, embedded in mergeableData
Skip stored variables, unless they came from a Clang module.
Skip tvCoerceParamTo*() call if we're already the right type
Slow path: unblock all parents, and return to the scheduler.
So bottom up for such a parameter, we are always known safe.
So define(FOO, 'bar') is equivalent to define('FOO', 'bar').
So, we rebind it here, to match what invokeFunc will expect.
Some may read or write to that pointer while some only read.
Sort the constraints into buckets based on component number.
Specs dictate that they are both type XML_DOCUMENT_TYPE_NODE
Splice together the parts before and after the matched type.
Split the case index into two pieces, the tag and tag index.
Store that to the appropriate slot in the new witness table.
Stores - Keep track of all of the store instructions we see.
Substitute in better common value witnesses if we have them.
Substitute the requirement type into the conforming context.
Substitute the substitutions in the specialized conformance.
TODO(7657500): in the runtime, resolve this type to a class.
TODO: For now, disallow tyvar, archetype and function types.
TODO: Narrow this to the sourceClass being exactly NSObject.
TODO: Remove the let property, because it is never accessed.
TODO: Support storage-backed behaviors in non-type contexts.
TODO: The QoI could be improved in many different ways here.
TODO: Use the witness entry instead of falling through here.
TODO: take advantage of protocol conformances already known.
TODO: use a custom CC that returns three scalars efficiently
The "weight" for the benefit which a single loop nest gives.
The AST representation for a defer statement is a bit weird.
The actual computation according to FIPS 180-2:6.2.2 step 3.
The actual computation according to FIPS 180-2:6.3.2 step 3.
The alias analysis that we will use during all computations.
The base expression is simply the metatype of the base type.
The block is not / automatically inserted into the function.
The body result cannot be 'none' unless it's an autoclosure.
The boxed value may be shared, so we always have to copy it.
The cache entries in a generic cache are laid out like this:
The code is generated according to the following principles:
The conformance to _BridgedToObjectiveC is statically known.
The default conventions for Swift initializing constructors.
The element will be resolved when we type-check the pattern.
The following may re-enter, and also deal with a stack slot.
The handshake is different when entering at a func prologue.
The initializer must have a single, non-empty argument name.
The inout must reference dereferenceable memory of the type.
The names 'init'/'deinit'/'subscript' are actually keywords.
The names to use are the stringified versions of pass kinds.
The ordering of implicit nodes isn't particularly important.
The result is the object type of the optional subexpression.
The returned color is always in the ARGB format (truecolor).
The routine below is shamelessly, gloriously floating point.
The sentinel at the end of the array is the max index value.
The source type can be checked-cast to the destination type.
The submodule of the extension is encoded in the extra data.
The substituted types must match up in tuple-ness and arity.
The witness from which the second type witness was inferred.
Then count the number of rows with the same kind of pattern.
Therefore generate a simple unconditional_checked_cast_aadr.
These are a list of basic blocks that we actually processed.
These aren't distinguishable from unowned for trivial types.
They include context about why and where the error occurred.
Thick functions (TODO: conditionally) get bridged to blocks.
This can actually happen both before and after LoadModules()
This file defines routines relating to abstraction patterns.
This file implements IR generation for tuple types in Swift.
This file implements general IR generation for control flow.
This file implements the SerializedDiagnosticConsumer class.
This function is called repeatedly by rl_completion_matches.
This ignores statements and other non-expression / children.
This is better to be attribute driven, a la rdar://15587352.
This is really the entire point of having the dummy sandbox.
This is safe, because the bool src is not reference counted.
This is the beginning of a child frame, recursively write it
This is used to / diagnose 'autoincrementing from' messages.
This is where we create the actual specialized BB Arguments.
This makes them good candidates for mapping with huge pages.
This must be set after recording the constructor in the map.
This returns its first argument just so we can tail call it.
This usually happens if it thinks the template isn't "used".
This way the Last-Modified header will not show in response.
This will tell the connection to begin listening for events.
Thomas in chapter III.1 of Graphics Gems II (James Arvo, ed.
Trailing closures are not considered siblings to other args.
Translate values and store them to a result tuple in memory.
Traverse the children in the dominator tree inside the loop.
True if the storage is dynamic or imported from Objective-C.
Try searching the metadata for a member with the given name.
Try to avoid calling bzero by specializing for these values.
Try to coalesce the EH regions we create for in those cases.
Try to convert the first indirect result to a direct result.
Try to convert the source into the expected ObjC type first.
Try to emit the given application as initializer delegation.
Try to produce a specific error message about the inout use.
Try to solve the system with this option in the disjunction.
Try to translate the given Clang declaration into a context.
Tuneable horizontal and vertical resolution in dots per inch
Turn any debug-info-only function declarations into zombies.
Until we see the code completion token, collect identifiers.
Update SSA form for values that are used outside the region.
Update the locations with available values and their values.
Update the types of parentheses around the tuple expression.
Use SILOneOperandLayout to specify the type and the literal.
Used to serialize the on-disk Objective-C method hash table.
Verify source ranges if the AST node was parsed from source.
Wait for commands from the debugger client and process them.
Wait until this thread is the one this proxy wants to debug.
Wakeup the sandbox thread so it will notice the stopped flag
Walk through and promote all of the alloc_box's that we can.
We also need to visit the index expressions as loads though.
We always set the low bit to indicate this is a Swift class.
We append our own newline so ignore any newlines in the msg.
We are about to modify header names for the SERVER variable.
We are not allowed to do load promotion in an escape region.
We can also hit this when code-completing in a closure body.
We can assume the once predicate is in the "done" state now.
We can either have a split backedge as our latch terminator.
We can only produce a fixit if we're talking about ++ or --.
We can't change the state of an array / through a value use.
We could load an arbitrary type using some extra bitcasting.
We don't need to do anything fancy if we don't have a label.
We found a visible property, but it might not be accessible.
We have a trivial move constructor, so we copy when we move.
We have already visited all of its potential children loops.
We may not have TombHash at the end if the chunk is used up.
We need a try_apply to call a function with an error result.
We need to look at the destination block to figure this out.
We need to see a store back to the inout on every exit path.
We only handle simplification of static function references.
We should have skipped this conditional destroy by now, oops
We spell normal metatypes of existential types as .Protocol.
We still need to consume the original block if it was owned.
When processing the first predecessor, record the arguments.
When this restriction is removed, the assert here will fire.
When we break from a loop, we need to adjust the exit count.
Whether this variable is a constant, and its constant value.
Work out the lowered function type of the SIL witness thunk.
XXX We're probably not getting warnings totally correct here
Zero is returned when the input date is detected as invalid.
_PROTOCOL_METHOD_TYPES_ does not have the first two entries.
acronym, lower casing because could just be capitalized word
block order doesn't matter, but only visit reachable blocks.
case nil is equivalent to .None when switching on Optionals.
child failed, raise the exception inside the async generator
compression is better then 2:1, need to allocate more memory
data wrapper can come with or without a double forward slash
differs from upstream where gdGetBuf return 0 instead of EOF
don't canonicalize to the right, OP might not be commutative
don't use cmpqim because of smashableCmpqImm implementation.
dynPropTable is a req::hash_map, so this will req::free junk
dyn_cast tests Bad types are ok, null pointers should throw.
figure out which Vregs are constants and stash their values.
find instruction boundaries and make sure no branches escape
gd_gd2.c  Implements the I/O and support for the GD2 format.
have an hdf value, that it maintains its edge as beating out
if between watermarks, free based on request count and usage
if it starts with file:// interpreted as path to key file 4.
if the call just passes back ini_ret because either they are
if the document root isn't in the url set document root to /
init_existential_addr is modeled as an initialization store.
is returned back from from an HDF get call, which it will be
its maximum squared-distance to any point in the update box.
kill the local to which this instruction stores iter's value
let the compiler know we won't reach the end of the function
main Execute the initial connection protocol with a machine.
minstrBaseIdx returns the src index for inst's base operand.
no supplementary characters, build jstring from input buffer
pack() returns false if there was an error, String otherwise
page in read-only segments that correspond to a file on disk
parseExprCollection - Parse a collection literal expression.
parseExprDictionary - Parse a dictionary literal expression.
parsed the last (perhaps only) call in a function call chain
php5 xdebug allows 'special' semantics to select the symbol.
printwbmp --------- print a WBMP to stdout for visualisation
produce the clang type INTF * if it is imported ObjC object.
retrieves parameter value from the _GET or _POST superglobal
return statements are never emitted as conditional branches.
skip to the branch instruction in order to get its condition
specifies the number of rows returned in a single fetch call
the various stores all had the same inputs so nothing to do.
this can return FAILED if there is just no more data from db
unless it was from a factory method, for historical reasons.
use temp in32_t because ostream thinks int8_t is a character
we are in a generator, skip CreateCont / RetC / PopC opcodes
we are not having a cache for file stats, so do nothing here
we don't use d30 and d31 because BitSet can't represent them
we only bump it up when we're in the middle of a transaction
we will wait forever until DebuggerClient sends us something
yy_hold_char holds the character lost when yytext is formed.
*pbuf is a malloc()ed buf, but we need it emalloc()ed, *sigh*
- In case of PHP_DNS_ANY we use the directly fetch DNS_T_ANY.
- Record out-state for the block and propagate to successors.
/ / Array.append for example can capture another array value.
/ / Our goal as a result of this transformation is to: / / 1.
/ / TODO: Consider doing retain hoisting and release sinking.
/ / TODO: Replace this with a simple RPOT and use GraphUtils.
/ / The blocked jobs should be scheduled as soon as possible.
/ All such operations return a tuple (result, overflow_flag).
/ Does not include any direct subclasses of given base class.
2.0.12: detect bad truecolor .gd files created by pre-2.0.12.
2.0.12: support truecolor properly in .gd as well as in .gd2.
2.0.22: very basic support for reading CMYK colorspace files.
@pinstr should be pointing to the beginning of the li64 block
A common level of optionality doesn't affect the feasibility.
A designated or required initializer has not been overridden.
A list of constraints that represent the value relationships.
A new inferred source will never override an existing source.
A new month was started when the new moon was first observed.
A protocol cannot conform to itself if it has static members.
A stack of opened existentials that have not yet been closed.
A type-info implementation suitable for an ObjC pointer type.
A un-rewritten URL is always relative, so remove prepending /
A value bound to _ is unused and can be immediately released.
According to php-fpm, some servers don't set SCRIPT_FILENAME.
Account for the 'kConstant' naming convention on enumerators.
Adapter providing a common interface for a SourceFile/Module.
Add a non-fixed-size element to the aggregate at offset zero.
Add fix-t to insert '()', unless this is a protocol metatype.
Add information to track a value field at the current offset.
Add protocol conformances and synthesized protocol attributes
Add the RawRepresentable conformance implied by the raw type.
Add the new tuple element, with the new type, no initializer,
Additional records associated with authoritative name servers
Adjust the relative reference to the nominal type descriptor.
Aliases for Swift runtime entry points for Objective-C types.
All classes have eagerly-emitted metadata (at least for now).
All nominal types can derive their ErrorProtocol conformance.
All scalar values are cast to a string before being returned.
Always use this to ensure we don't miss out on NRVO anywhere.
And finally initialize the object by calling the constructor.
Append another backpath, including trailing slash if present.
Append values by moving -- Caller assumes we update refcount.
As a special case, functions can have manually mangled names.
Ask for uncompressed data (a holdover from the original API).
Asserts if an instruction mutates `sp' in an untrackable way.
Assign each indexed type its appropriate index into the list.
Assume the error parameter doesn't have interesting lowering.
Attempt to discover the size and alignment of the given type.
Attempts to attach the xdebug profiler to the current thread.
Automatically register ProxygenServerFactory on program start
Bail if there is no external implementation of this function.
Bail out conservatively if this isn't a function declaration.
Bail, if this struct is known to contain nothing interesting.
Base value still unknown, this will need to be updated later.
Because of same-type requirements, these aren't well-ordered.
Because v1 was shared, we know this won't release the string.
Bind the member's type variable as a type member of the base.
Bitcast indirect argument pointers to the right storage type.
Build the conformance entry (if it hasn't been built before).
Build the list of case names, payload followed by no-payload.
But silence the warning if the base was explicitly qualified.
Calculate how many times a callee is called from this caller.
CallBuiltin doesn't count because it is not a php-level call.
Canonical ordering for dependent types in generic signatures.
Chase up the dominator tree and see if we find a parent loop.
Check all predecessor values which come from non-cold blocks.
Check for cases that are obviously better or obviously worse.
Check if the loop iterates from 0 to the count of this array.
Check if the object itself can escape to the called function.
Check if the select_enum's result is a single integer scalar.
Check that all of the values that we inserted are in the map.
Check that the arguments are the same and in the right order.
Check that the member "name" is a valid index into the tuple.
Check the profitability of specializing the closure argument.
Check to make sure we are not going to go past the ExifLength
Check to see if this constraint came from a cast instruction.
Check whether the first parameter is a subtype of the second.
Check whether there are needless words that could be omitted.
Check whether we need to bridge through an Objective-C class.
Check whether we've already dealt with this dependent member.
Claim the self argument from the end of the formal arguments.
Clamp the rest to final out value (which is (MAXJSAMPLE+1)/8)
Classes can have subclasses, so the metatype is always thick.
Coercion to an autoclosure type produces an implicit closure.
Collect all of the Objective-C selectors in the method table.
Collect all of the constraints known to the constraint graph.
Collect any early sources and bind local type data from them.
Common base class for enums with one or more cases with data.
Compute the ForwardSetIn at the beginning of the basic block.
Compute the SILParameterInfo list for the new cloned closure.
Conservative scan instances of the type with this type index.
Consider all the associated type relationships we know about.
Construct a parent map for the expr tree we're investigating.
Convert a 16 bit unsigned value from file's native byte order
Convert a 32 bit unsigned value from file's native byte order
Convert a metatype 'self' argument to the ObjC Class pointer.
Convert to an Objective-C metatype representation, if needed.
Copy and spill points for resolving split lifetime intervals.
Copy everything from `adIn' to `ad', including refcount, etc.
Create a conditional branch on the fast condition being true.
Create a copy of the BB as a landing BB for all FailurePreds.
Create a node if the specialization is externally inlineable.
Create an address value without a container (the usual case).
Create an implicit AnyPattern to represent the default match.
Create an unreachable branch for unreachable switch defaults.
Create the appropriate cast instruction based on result type.
Create the evaluation string buffer and store the symbol name
Currently this only works for caps within CapCode::Threshold.
Data consists of brief comment length and brief comment text,
Data structures used to perform name lookup for local values.
Deal with the corner case of having more than 4 nested loops.
Declarations imported from Clang modules have shared linkage.
Default implementation: Iterate over elements via a for-loop.
Delete all the values from a STL style associative container.
Describes an opened existential that has not yet been closed.
DetectKanjiCode() derived from DetectCodeType() by Ken Lunde.
Detects multiple/malformed multiple newlines in mail headers.
Determine if the given invocation should run as a subcommand.
Determine if there exists a name mangling for the given type.
Determine whether the field we're touching is a let property.
Determine whether the given requirement was left unsatisfied.
Determine whether this nominal type is _ObjectiveCBridgeable.
Determines if a builtin type falls within the given category.
Diagnose a declaration that doesn't match a previous pattern.
Diagnose for appropriate accessors, given the access context.
Diagnose uses of operators that found no matching candidates.
Disable the use of sret if we have multiple indirect results.
Do not specialize apply insts that take in multiple closures.
Does not do / any caching or drill down to implied protocols.
Don't move instructions that are sensitive to their location.
Don't rebridge if the source is already some kind of NSError.
Don't step into generated or builtin functions, keep looking.
Don't throw here because GD might need to do its own cleanup.
Dynamic lookup can find functions, variables, and subscripts.
Emission of l-value expressions and basic operations on them.
Emit a store of a live value to the given retaining variable.
Emit the ObjC class symbol to make the class visible to ObjC.
Enable or disable ObjC interop appropriately for the platform
Ensure that we don't have multiple threads racing to do this.
Enter the context of the closure when type-checking the body.
Everything is a subclass of AUnknown and intersects AUnknown.
Execute the interactive command loop for the debugger client.
FF, GG, HH, and II transformations for rounds 1, 2, 3, and 4.
FIXME: Highlight the offending node/constraint/adjacency/etc.
FIXME: Loses potentially better alignment info we might have.
FIXME: Remove even the null value per rdar://problem/18801263
FIXME: Should restrict this to the source file we care about.
FIXME: These are going to come out in nondeterministic order.
FIXME: This should happen before we attempt shadowing checks.
FIXME: Tighten up checking for conversions to protocol types.
FIXME: We should be able to tell if this is a private lookup.
FIXME: only the private imports from the current source file.
FIXME: register property metadata in addition to the methods.
Fail the async generator and let the C++ exception propagate.
Figure out if the value of this variable is statically known.
Finally, print out the result, by referring to the repl temp.
Find functions in cold blocks which are forced to be inlined.
Find the foreign error convention and 'self' parameter index.
Find the nearest post-dominator that has useful instructions.
Find the overload choice used for this declaration reference.
Finding the first day of the year is the most difficult part.
Finish off any diagnostic we were in the process of emitting.
First instruction is always either li or lis, both are D-form
Fix the intrinsic call here by pointing it to the correct GV.
For an archetype, we substitute the base object for the base.
For any nominal type reference, look at the type declaration.
For better recovery, we just accept a label on any statement.
For each terminator instruction I in BB visited in reverse...
For globals we currently do not support available_externally.
For recovery, skip elements that didn't have a name attached.
Forward archetypes and specialize if the function is generic.
Fully qualified names aren't represented explicitly in DWARF.
Gather the values we will switch over for this payload chunk.
Get or create an accessor function to the given generic type.
Get the bit representing the LSLocation in the LocationVault.
Get the next argument and use it as the 'self' type metadata.
Get the next argument as a pointer to the given storage type.
Give the context the list of search paths to use for modules.
Given a list of direct results, form the direct result value.
Given a subpath of an old locator, compute its summary flags.
Given a value witness table, load one of the value witnesses.
Global variable decls must bind variables, except in scripts.
Globals and superglobals can be fetched by finding the symbol
Go through all instructions and find candidates for inlining.
Handle an opaque lvalue that refers to an opened existential.
Handle literals, which are a call to the conversion function.
Handle special arg '*' for all codes and check argv overflows
Hint at missing 'self.' or 'super.' then skip this statement.
Hopefully lots of requests won't require any new translation.
IEEE 802 format: Six hexadecimal digits separated by hyphens.
If `other' is a big integer, the following will return false.
If all such instructions cannot decrement Op, return nothing.
If any constraints were added here, create a new disjunction.
If auto-apply fixits is on, rewrite the original source file.
If compared against a double, convert the string to a double.
If either Op1 or Op2 is not a literal, we cannot do anything.
If it is the destination, then this is an unknown assignment.
If it matches an existing declaration, there's nothing to do.
If it's missing, we will stop right here, with compiled code.
If its bigger than 4 bytes, the dir entry contains an offset.
If neither has a position after `pos', choose the higher one.
If not, we're importing globals-as-members into an extension.
If only a part of a type is being printed, use / visitPart().
If only the width matches exactly, we can still do a bitcast.
If our enum type is address only, we cannot do anything here.
If possible, emit the enum directly into the indirect return.
If recursive type checking failed, then an error was emitted.
If subpatterns array has been passed, fill it in with values.
If the bases are not must-alias, the locations may not alias.
If the conformance is generic, mangle its generic parameters.
If the debugger is attached, only allow single-block regions.
If the element index is the one we are extracting, skip it...
If the initializers in the PBD aren't checked yet, do so now.
If the name ends in the CF typedef suffix ("Ref"), drop that.
If the offset is inside an interpolated expr segment, re-lex.
If the parser has a message, prepend it to the given message.
If the printed Decl is not the top-level one, reset analyzer.
If the protocol itself is invalid, there's nothing we can do.
If the reference is indirect, flag it by setting the low bit.
If the string base is empty, it will be promoted to an array.
If the temporary is non-trivial, we need to release it later.
If the test must be extended, don't check for the same class.
If the type is known to have Swift metadata, this is trivial.
If the typeloc has a valid location, use it to end the range.
If the use is a load, keep track of it for splitting later...
If the xdebug profiler is attached, ensures we still need it.
If there is a witness, record it if it's within this context.
If there is an alternate declaration for this member, add it.
If there's no cache variable, just perform the direct access.
If there's no type representation, there's nothing to revert.
If they have the same stag, try to merge them with unionData.
If this declaration isn't from a source file, don't check it.
If this is a member in a capture list, just say it is unused.
If this is a reference to a var, produce an address or value.
If this is an implicit TypeExpr, don't validate its contents.
If this is the first call site, use its formal type directly.
If this location does have an available value, then clear it.
If this variable is in the left-hand side, it is fully bound.
If we are not a mutator, there is nothing further to do here.
If we did and self is not actually passed at +0, retain Self.
If we have a raw value, make sure there's a raw type as well.
If we have a trailing closure, it maps to the last parameter.
If we have any direct results, receive them via BB arguments.
If we know this is a designated initializer, mark it as such.
If we know what type declaration we're referencing, store it.
If we ran out of solutions at the first position, we're done.
If we re-enter bt_handler while already crashing, just abort.
If we're allowed to bind to subtypes, look through optionals.
If we're already assigned a component for this node, skip it.
If we're importing a specific decl, validate the import kind.
If we're in a protocol, the getter thunk will be polymorphic.
If we're in an IfStmt and at the 'else', don't add an indent.
If we're not in a type context, just grab the interface type.
If we've already checked this declaration, don't do it again.
If we've collected redundant cond_fails then remove them now.
If you add new imm types, you must add a printer for it here.
Ignore compiler-generated patterns but not optional bindings.
Ignore results that aren't actually from the defining module.
Import that instead, looking through any implicit submodules.
In a case statement, search for the pattern that contains it.
In a non-empty vector, we could have duplicates or conflicts.
In non-bridged contexts, drop the typealias sugar for blocks.
In the future we should get this from the Parser if possible.
In this branch, the eventual return value is mostly invented.
Initialize all the data flow bit vector for all basic blocks.
Initialize the "isa" pointer, which is _NSConcreteStackBlock.
Initialize the BBWriteSetMid to BBWriteSetOut to get started.
Insert a new Load of the enum and extract the data from that.
Insert the specified decl into the DeclContext's member list.
It can't be a trailing closure unless it has a specific form.
Just make a guess about the import kind, we cannot do better.
Just reprint the original mangled name if it didn't demangle.
Just to make sure the prototypes match the actual definitions
Keep this assert even if you change the representation above.
L * R already known to not trap at this point in the program.
L + R already known to not trap at this point in the program.
L - R already known to not trap at this point in the program.
Length of the concatenated literal according to its encoding.
Load the correct virtual function for the given class method.
Load the protocol witness table reference at the given index.
Local function used to finish up processing before returning.
Make sure cookie names do not contain any illegal characters.
Make sure that column sizes has an entry for all our columns.
Make sure that our region has a pred list without duplicates.
Make sure that there are no archetypes in the interface type.
Make sure the witness is of the same kind as the requirement.
Map a dependent member to the corresponding nested archetype.
Map from offset to label names we should use for that offset.
Mark the memory as uninitialized, so DI will track it for us.
Mark through the parameters, binding them to their arguments.
Merge the liveIn into the liveOut of each normal predecessor.
MixedArray needs a higher threshold to avoid false-positives.
Move any remaining active constraints into the inactive list.
Move the appropriate inner arguments over as outer arguments.
No more client operation is possible, so drop the connection.
No need to do anything, it was freed from the persistent_list
Note that failureInfo is already set correctly for that case.
Note that this node is part of this component, then visit it.
Note that we bury the inout locator within the named locator.
Note that we can't actually compute the type here until Sema.
Note: the key is not already incref'd, but the value must be.
Notice that we need to check all of the values of the object.
Notice that we will skip all of the newly inlined ApplyInsts.
Now we know that the block is in a loop and is a loop header.
Nullify the pointers to be safe since this is a captured heap
On failure, we'll clean up everything and return nil instead.
Only ever permit this if the source type is a reference type.
Only introduce for an AbstractStorageDecl if it is not local.
Only process partial apply if the callee is a known function.
Only reference cast to simple single pointer representations.
Optimized for sequential read: see AssetManager.java for docs
Otherwise merge the current state into the existing snapshot.
Otherwise, flatten one level of struct elements on each side.
Otherwise, keep going up the VM stack for this nesting level.
Otherwise, require the last parameter to be an out-parameter.
Otherwise, simply substitute the parent type into the member.
Otherwise, the last line of the file does not have a newline.
Otherwise, we just need to capture the failure-depth binding.
Otherwise, we might have a reference-counted context pointer.
Parse the names, with trailing colons (if there are present).
Perform an operation on a type that requires dynamic packing.
Perform print only in case what's left is not an empty string
Perform unqualified name lookup to find out what the UDRE is.
Perhaps the caller will want to call strcmp to break the tie.
Point the increment call to the right function name variable.
Pop of virtual "locs" on the stack that turn into immediates.
Pop the current (potentially not-yet-optimized) function off.
Preserve the Clang type in the resulting abstraction pattern.
Preserve type information from the original type if possible.
Process Instruction which writes to memory in an unknown way.
Process UnresolvedDeclRefExpr by doing an unqualified lookup.
Process all the continuations of that match before returning.
Produce a Fix-It replacing 'Self' with the nominal type name.
Produce a witness_method when thunking ObjC protocol methods.
Produce an error that this generic parameter cannot be bound.
Push an extra zero index node for the first interior address.
Qualify storage declarations with an lvalue when appropriate.
Read the substitution list and construct a SILSpecializeAttr.
Record number of times a globalinit_func is called by "once".
Record the children cost, then push it onto the children list
Record the generic type parameter types and the requirements.
Record the remapping using the name of the Clang declaration.
Recursively search for other loads in the instruction's uses.
Refuse if the variadic parameter actually captures something.
Register a busy handler to avoid spurious SQLITE_BUSY errors.
Register a null catch trace to indicate this to the unwinder.
Remember the result value used to branch to this instruction.
Remember this in our cache in case it's a recursive function.
Removing any newly inserted arguments that are actually dead.
Replace all uses of the old instruction by a new instruction.
Replace any still-remaining uses with undef values and erase.
Replace the 'self' parameter type in the method type with it.
Require an access kind to be set on every l-value expression.
Require the copy dest value to be identified by this address.
Retrieve the nested type from the representation of this set.
Retrieve the nominal type and resolve it within this context.
Return 0 if input contains any illegal encoding, otherwise 1.
Return a value for an optional ".None" of the specified type.
Return the bit position of the given Val in the LSValueVault.
Return the formal type that we would use for +allocWithZone:.
Return the range of indexes for the given tuple type element.
Return the total size and address point of a metadata record.
Return true if we advance the sequence / and false otherwise.
Returning null since PPC64 specific code is under development
Revert all of the types within the signature of the function.
Right now, this / must always be for purposes of defining it.
Right now, we never allocate fields before the address point.
Rosh Ha-Shanah   The first day of the Jewish year (Tishri 1).
Scan inside out until we find something with the right label.
See if we triggered deserialization through our conformances.
See swift::performTypeChecking for TopLevelCodeDecl handling.
See the code in utf8ToModifiedUTF8 for what's happening here.
See the comments in CGetS about constprop for public statics.
Set each bound variable in the pattern to have an error type.
Set the low bit of the value to indicate "compiled by Swift".
Set up a conformance to represent the behavior instantiation.
Should have handled the conversion in one of the cases above.
Similarly, destructors refer to the instance method -dealloc.
Similarly, the last 6 months do not change from year to year.
Simplify invocations of builtin operations that may overflow.
Simply setup a "step out breakpoint" and let the program run.
Since sunset varies, the day is assumed to begin at 6:00 P.M.
Sink it down into type resolution when it is actually needed.
Skip over any uppercase letters at the beginning of the word.
So we just always give real seconds, which is "close enough".
So, we strip out all prefixes and detect the bases ourselves.
Sometimes GCC and Clang will emit invalid function addresses.
Start with any pending exception that might be on the thread.
StaticArr/StaticStr may be promoted to CountedArr/CountedStr.
Step 1: scan the whole module and build the dependency graph.
Store an r-value into the given address as an initialization.
Stores either a this pointer or a Cctx -- statically unknown.
Strip off one layer of application from the covariant result.
Strip the last path component except when we have single "/".
Subscripts should probably be collected in extended metadata.
Subsequent calls to ProxygenServer::stop() won't do anything.
TODO make these PHP_INI_ALL and thread local once we use them
TODO: Integrate has empty non-symmetric difference into here.
TODO: When serialization is reworked, this should be removed.
TODO: support percentage frequency is a percentage, not bytes
Take the reference type argument and cast it to BridgeObject.
Test comparison in between invalid and valid PointerIntEnums.
The 0 digit has special meaning at the beginning of a number.
The FPInvOffset of the stack slot is just its 1-indexed slot.
The argument to the has-member block is the uncurried method.
The assumption is that every / initializer has the same size.
The base of a member reference cannot be an existential type.
The best we can do is assert that it's a subclass of Closure.
The count is always 1 unless the substituted type is a tuple.
The easiest way to do this is include a hash of the filename.
The exact static type of the instance should be tested first.
The full metadata object is private to the containing module.
The input type is (T.Type, Builtin.RawPointer, Builtin.Word).
The load instruction must have no more uses left to erase it.
The m_savedRip will be set during the call to doFCallArrayTC.
The maximum length of any particular string in the whitelist.
The metatype may carry additional witness tables we can drop.
The namespace only or the namespace and class might be empty.
The real RHS is the type parameter stored in the node itself.
The return inst needs to load the value from the alloc_stack.
The shortest distance from the block entry to the scope exit.
The source type created a new Swift type, using swift_newtype
The type of the capture list is just the type of its closure.
The user must be the terminator we are trying to jump thread.
The value of the object's address at the point of allocation.
The value was already consumed so there's nothing to release.
Then recursively process it first before trying to inline it.
There is more then one assignment to a given global variable.
There is no known better way to extract this information out.
Therefore, there is no need to clone the BB for SuccessPreds.
These are defined in ext_socket, but Zend has them in network
These are the same kind of type, we need to disambiguate them
They are marked mutable so that getObject() can remain const.
This allows us to avoid materializing copies of existentials.
This block could be empty if it's terminator has been folded.
This can explode copy_addrs, so the use list may change size.
This can only be done after binding all the value parameters.
This cannot be an overridden property, so just eat the token.
This decl attribute has been moved to being a type attribute.
This emits a diagnostic with a fixit to remove the attribute.
This file implements the platform kinds for API availability.
This is HH-specific as well but code depends on the old name.
This is NOT a leaf node, we need to construct a value for it.
This is a fall through into BB, emit the fall through branch.
This is the class reference downcasted into subclass SubType.
This is the difference - make a file based on size of chunks.
This is the smoothest way to get overridden properties right.
This is to handle object types with "flexible array members".
This is usually not what HHBC opcodes do, and could be a bug.
This isn't consistent with general class resilience, however.
This literal type must conform to the (non-builtin) protocol.
This must stay in sync with diag::access_control_setter_more.
This object type is done, so recurse into any nested classes.
This only cares about declarations of noescape function type.
This only happens when we call define on a non static string.
This source file is part of the Swift.org open source project
Throwing functions must map to a particular error convention.
Trait method typehints, self and parent, need to be converted
Translate the given operator character into its mangled form.
Translate the unit filename to match xdebug's internal format
True if CheckedCastBrJumpThreading::numUnknownPreds is not 0.
Try all three types of maps, but start with the specified one
Try lvalue qualification in addition to rvalue qualification.
Try to find a property offset for the given key in baseClass.
Try to lookup the SILFunction implementation from the VTable.
Tuple representations are limited outside of function inputs.
Type-check each top-level input besides the main source file.
TypeExpr's that produce the same metatype type are identical.
Unblock parents and possibly take fast path to resume parent.
Unfortunately, PHP returns "NULL" (upper case) for gettype().
Union in the effects of doing the set if the array was empty.
Unlike the above, this only searches the already loaded ones.
Update SSA form for values used outside of the copied region.
Update the lookup table to introduce members from extensions.
Update the stack depth if we didn't set it yet for the block.
Use custom function to get replacement string and its length.
Use the copy constructor if no clone() function was supplied.
Use userspace rand() function because it handles auto-seeding
Variadic tuple elements match the rest of the input elements.
WATCH OUT: unlike php5, a Mode is not necessarily a bit mask.
Walk the given basic block to find all the epilogue releases.
Walk the members of any context that can have nested members.
Walk up the dom tree until we reach the same loop nest level.
We also have to check the method declaration's accessibility.
We also need to look up the types of use vars from the index.
We always report the dependencies, even if the hash is known.
We are not freeing *rp itself, as that's not always a pointer
We are only invalidating the analysis that we use internally.
We can only get source orders from deserialized module files.
We can only handle the simple cases of lvalue++ and ++lvalue.
We can share a type info for all dynamic-sized heap metadata.
We can trivially create substitutions for Array and Optional.
We don't even need keep the init bit for the element precise.
We don't have enough information to find the associated type.
We don't support getting the runtime name for nested classes.
We hit this case e.g. if a table is imported from the stdlib.
We know their size, and pass them as values in SIL and IRGen.
We might side-exit inside the callee, and interpret a return.
We need to create an executable with the repo embedded in it.
We need to spill the return registers around the assert call.
We need to turn on InSILBody to parse the function reference.
We processed this succ and its fp is already the same as pred
We successfully translated the instruction, so update env.sk.
We use it to test for regressions in the deserialization API.
We use these later to dynamically load certs, so make copies.
We want to treat distinct but IEEE-equal values as not equal.
We'd like to look at the elements of arrays and dictionaries.
We'll manually manage the argument's lifetime after the call.
We're trying to produce the same bytecode as runtime parsing.
We're unwilling to unify with interfaces, so just return Top.
When called from the jit, populate the correct return address
Whether it is the same pointer value or not is not specified.
Without truecolor this results in far too many color indexes.
XML_XINCLUDE_END node will be a sibling of XML_XINCLUDE_START
Yield is followed by the label where execution will continue.
argument_unpacking RFC dictates "containers and Traversables"
closure function's variable table (not containing function's)
continue resolution anyway but don't save result in the cache
create a fake palette and check for single-shade transparency
don't let bfd_cache_ptr malloc behind the scenes in this case
else ignore the dependency...it'll show up as a linker error.
entity is 16 bytes, allocated statically below default in PHP
find a caller node with the given address, or make a new one.
free error string received during previous iteration (if any)
gd_getin -------- Wrapper around gdGetC for use with readwbmp
get the user-entered settings for this pool, if there are any
getEffects would assert since these haven't been lowered yet.
getSourceRange - Return the full source range of the pattern.
hacky, but transforming to a single token is quite convenient
hash as used in CA directories to lookup cert by subject name
how many bytes are not included in capacity()'s return value.
i.e. a store the struct followed by a load from the / struct.
i2 can be unallocated if the tmp is a constant or is spilled.
if we want to support finfo as a resource as well, do it here
immediate has only low 16 bits set, use simple load immediate
iterate funcs in offset order, checking for holes and overlap
just in case long path gets truncated and not null terminated
libevent is not exposing this data structure, but we need it.
load the palette and mark all entries "open" (unused) for now
nProp should include the current property being unserialized.
namespace Return true if the callee has self-recursive calls.
number of fonts cached before least recently used is replaced
outside_error may be NULL (for static functions/constructors)
parse the heap once to create a PtrMap for pointer filtering.
phonize one letter We don't know the buffers size in advance.
valuePtr's object will get destroyed when we go out of scope.
wait until the user-specified timeout for an available handle
we've validated start, we can return empty_string_variant now
( -- not really an operator, but treated as one in some cases.
(This will get triggered when the epilog logic is simplified.)
- This function logically decrements the weak reference count.
/ /   - Module values may only occur as part of qualification.
/ / This returns true if it promotes away the shadow variable.
/ / This routine should only be used for bridging value types.
/ StructAddressUsers records other uses of the struct address.
2.05: remap to the palette available in the destination image.
4) Potential escapes after super.init, if self is closed over.
@objc metatypes are representable when their instance type is.
A class for collecting information about rethrowing functions.
A class for finding a field offset in a class metadata object.
A redefinition is a hit in the scoped table at the same depth.
A string that describes the Swift version number, e.g., "1.0".
A tuple with a single, unlabelled element is just parentheses.
A visitor class for emitting a reference to a metatype object.
AST walker that infers requirements from type representations.
Account for the 'EnumName_Constant' convention on enumerators.
Add a file_section to image_info returns the used block or -1.
Add a format string value to image_info MUST BE NUL TERMINATED
Add only exit block successors by skipping blocks in the loop.
Add storage for an (optional) Swift field at the given offset.
Add the constructor, possibly including any default arguments.
Addressed storage gets a setter if it has a mutable addressor.
All GeneralEffects instructions are assumed to possibly do so.
All other compilation modes perform specialization themselves.
All other specializations currently have exactly one location.
All users of these functions start with the flags set to Warn.
Allowing us to perform the same optimization as for the store.
Already in the sweep list from init call, no need to add again
An implementation of packing operations based around a lambda.
And if we are not asked to report errors, just return nullptr.
Another SIL_FUNCTION record means the end of this SILFunction.
Any functions or closures defined in it will not be hoistable.
Applying the inverted matrix will restore the original values.
Assume no part of the uname string will be more than 128 chars
Assumes that inst.source and inst.unit have been properly set.
Async function wait handles may have a source location to add.
Attempt to forward CurrentDef to all uses of the copy's value.
Attempt to refer to 'Self' within a non-protocol nominal type.
Attempts to load the default idekey from environment variables
Avoid confusion from exponents so large that e might overflow.
Bail if the source type is not a class reference of some kind.
Based on GD.pm code by Lincoln Stein for interfacing to libgd.
Boxes have to be deallocated even if the payload was consumed.
Build a value witness that initializes an array back-to-front.
Build a value witness that initializes an array front-to-back.
Build completions by doing visible decl lookup from a context.
Build the init(rawValue:) initializer for an imported NS_ENUM.
But if the expression didn't type-check, suppress diagnostics.
Cache the mapping so we don't need to troll imports next time.
Call unprotect to ensure that the memory is marked executable.
Called by the IJG JPEG library upon encountering a fatal error
Can not find an epilogue release instruction for the argument.
Capture lists need to be reparented to enclosing autoclosures.
Careful: from here 're' needs to be freed if something throws.
Check conversions from non-protocol types into protocol types.
Check for any members in lhs.m_bits that aren't in rhs.m_bits.
Check if predecessor and successor edges are linked correctly.
Check if two addresses can potentially access the same memory.
Check return type, free pending iterators and actually return.
Check that conditions are the equivalent in this case as well.
Check whether this instruction blocks any RC root code motion.
Checking that benefits from having the whole module available.
Checks if the interrupt type and site matches this breakpoint.
Choose split point along selected axis, and update box bounds.
Coercions from an lvalue: load or perform implicit address-of.
Collect a separate set of copies that can be removed via NRVO.
Collected information for a select_value case or default case.
Compute the number of elements to track in this memory object.
Construct a constraint system to compare the two declarations.
Convert all of the variadic arguments to the destination type.
Convert the value to the expected result type of the function.
Copy the current value of ref count state into the result map.
Create a parameter pattern containing the anonymous variables.
Create a temporary within the closure to provide this address.
Create enum with OPT_xxx values for each option in Options.td.
Data flow has not stabilized, do not perform the DSE just yet.
Declare a helper for escaping file names for use in Makefiles.
Default permissions for files and directories that are created
Despite spec, line and conditional are the same in php5 xdebug
Determine whether an instruction may not have a SILDebugScope.
Determine whether the given declaration requires a definition.
Diagnose any conflicts attributed to this declaration context.
Dig through the inherited entries to find a non-inherited one.
Do not initialize JIT stubs for PPC64 - port under development
Do the first-time ping to record the latency of the connection
Don't produce these diagnostics for implicitly generated code.
Don't specialize Apply instructions that return the Self type.
Each table contains data for 128-255 symbols from ASCII table.
Elements without payloads are numbered after the payload elts.
Emit the type and reffiness predictions for this region block.
Ensure that vmfp() points to the only frame on the call stack.
Enums are mapped to Swift enums, Options to Swift option sets.
Evaluate number, be it int, rational, or float from directory.
Execution will resume at this function later after the opcode.
FIXME: Could recover better if we "know" it's a compound name.
FIXME: If we already looked at this for this generation, skip.
FIXME: It's wrong to use the uncurried types here for methods.
FIXME: Report the memory cost of the overall CompilerInstance.
FIXME: Resilience: could write out vtable for fragile classes.
FIXME: This requires a traversal of the whole file to compute.
FIXME: can we 'log' SwiftDemangleNodeKindToCString(node_kind))
FIXME: need to know if this is a NativeObject or UnknownObject
FIXME: the generic parameter types list should never be empty.
Figure out if a declaration should be exported to Objective-C.
Figure out which one we have here by inspecting the next byte.
Find the final releases of the alloc_box along any given path.
Find the implementation of the member which should be invoked.
Find the implementation of the named type in the given module.
Finish the mangling of the symbol and return the mangled name.
First try to find exact match, afterwards try wildcard matches
First we try "w", and if that is not found we check for "safe"
First, pick the region starting at the lowest bytecode offset.
First, type check the nominal decl that contains the function.
For SCI you encode the S, then have to remember to skip the C.
For a parameter, map back to its parameter to get the TypeLoc.
For an addressed property, consider the appropriate addressor.
For concrete metadata, declare the alias to its address point.
For details, see ClassScope::importUsedTraits in the compiler.
For each eliminated method symbol create an alias to the stub.
For example, _swift_isDeallocating is required by Instruments.
For fault handlers, add an edge to the fault handler and stop.
For literal-convertible types, form the corresponding literal.
Force the result into the temporary if it's not already there.
Function that traverses objects and counts metrics per strings
GIF(sm) is a Service Mark property of CompuServe Incorporated.
GP regs are now full, bring tmp back to fill the initial stack
Generate a new parameter list with deleted parameters removed.
Get additional server params from the transport if it has any.
Global-init functions should not be inlined GlobalOpt is done.
Go up archetype parents until we find our containing protocol.
Hack--We emit a static thunk for ObjC allocating constructors.
Handle a specialized emitter operating on evaluated arguments.
Here's some things still to look at:  o More is_pure_licmable.
However, using ProjectionPath does / lead to more memory uses.
I.e., the caller must still be able to filter directories out.
Identical values are known to be equal, or less than or equal.
Identify any solutions that are worse than any other solution.
If advance the state's sequence appropriately for a decrement.
If any of the specialization cases is refutable, we must copy.
If compared against null or bool, convert both sides to bools.
If dominance / information or loop info is non null update it.
If invokeGet fails due to recursion, it leaves the KindOfNull.
If it is settable, then the base must be the problem, recurse.
If it matches an existing macro, overwrite the existing entry.
If it's not an overflow, it was probably a surprise flag trip.
If not, lay out the protocol's witness table, if it needs one.
If only one location is valid, the valid location comes first.
If so, we consider it to be part of the proceeding expression.
If so, we may be able to lower this sequence to a select_enum.
If that didn't succeed, and we allocated, free the allocation.
If the Node is not complete, then we have reached a dead lock.
If the adjacency is not empty, leave the information in there.
If the base is an lvalue, then a reference produces an lvalue.
If the builtin is read none, it does not read or write memory.
If the call is curried, emit a direct call to the curry thunk.
If the canonical declarations are equivalent, we have a match.
If the character following the prefix is a '_', eat that, too.
If the client can't handle a +0 result, retain it to get a +1.
If the condition wasn't of boolean type, diagnose the problem.
If the element is not a condition, walk it in the current TRC.
If the function pointer is dynamic, include it in the context.
If the instruction is not dead and force is false, do nothing.
If the key maps / to true, we want to emit a declaration only.
If the leaf node is not alive, do not add it to our leaf list.
If the name has leading underscore then it's a private symbol.
If the payload is indirect, emit it into a heap allocated box.
If the requirements match up, move on to the next requirement.
If the sequence is an implicitly unwrapped optional, force it.
If the string contains only ASCII, force a UTF8 representation
If the two projections do not equal exactly, return Unrelated.
If the variable has no storage, it never needs an initializer.
If there are any substitutions for the callee, apply them now.
If there are multiple solutions, try to diagnose an ambiguity.
If there are no requirements left, we're missing requirements.
If there is no result computed for this subelement, record it.
If there were no signature collisions, there is nothing to do.
If there's data in the read buffer, then we're clearly not EOF
If there's just one element, we can always coerce as a scalar.
If this entry has a conformance associated with it, note that.
If this function does not have a caller in the current module.
If this inherited type has not been resolved, we depend on it.
If this is a failing lookup, it has no viable candidates here.
If this is a root class, use SwiftObject as our formal parent.
If this is final, we can consume the owner (stored as 'base').
If this is obviously not the start of a decl, then we're done.
If this starts with fence, we have special suffixes to handle.
If user requests interlace, translate that to progressive JPEG
If we are at conditions, take the indent of 'if' and continue.
If we came from a scalar, create a scalar-to-tuple conversion.
If we didn't parse a type, fill in an error type and bail out.
If we do not have any argument, just delete the release value.
If we don't have 'self', we don't need to do anything special.
If we don't know any better, assume that the cast may succeed.
If we fail, don't even look for the module documentation file.
If we found the state but the state is for a trap BB, skip it.
If we get to a retain or allocation of the / object, zap both.
If we had a circular dependency, the superclass may not exist.
If we have a declaration, do not attempt to serialize entries.
If we have a dependent value witness table, emit its template.
If we have an unbound generic bridged type, get the arguments.
If we have no argument, the candidates must have expected one.
If we haven't computed the canonical signature yet, do so now.
If we haven't resolved the element type, generate constraints.
If we're at the open brace of the switch, don't add an indent.
If we've already seen this node in this component, we're done.
If we've found a 'try', record it and terminate the traversal.
If you don't pass a namespace uri, then you can't set a prefix
In case of an external function, the RHS may have 0 arguments.
In either case this is a subclass, so we can just return true.
In php5 xdebug this just means the user cannot input commands.
In sourcekitd, the receiver accepts ownership of the response.
In the fetch block, bind the archetypes and evaluate the body.
In this case, don't check setter accessibility, it is not set.
Initialize a relative indirectable pointer to the given value.
Initialize this Region with the state of the successor region.
Insert dealloc_stack instructions at all function exit points.
Insert the new enum_select instruction right after enum_switch
Instructs the JNI environment to throw a NoClassDefFoundError.
It could be that the argument doesn't conform to an archetype.
It has space only for witnesses to the ErrorProtocol protocol.
It is left uninitialized so that multiple parsers can coexist.
It's not possible to mangle the context of the builtin module.
Iterate on the ppIn/ppOut states until we reach a fixed point.
Its straightforward to prove that / retain sinking is correct.
JPEG 2000 components can be vastly different from one another.
Keep going up as long as this expression is the parent's base.
Keep in sync with order in hphp/runtime/ext/asio/wait-handle.h
Keep track of the fact that we're inside of a var/let pattern.
Keep track of this so that we don't emit multiple diagnostics.
Load the loadable value, and retain it if we aren't taking it.
Load up any dynamic extensions from dynamic extensions options
Look at the failed constraint and the general constraint list.
Lots of random cases to skip just to keep this simple for now.
Lower the RegionDesc to an IRUnit, then lower that to a Vunit.
MD5C.C - RSA Data Security, Inc., MD5 message-digest algorithm
Magic method flags should be consistent with the method table.
Make sure to print type variables if we can get to ASTContext.
Make sure we end the region before trying to print the IRUnit.
Make sure we only process instructions we know how to process.
Making FURC_SHIFT bigger also makes furc_hash modestly slower.
Mark reachable, essential, instructions live and enqueue them.
Mark some classes as volatile since the name is used in switch
Maybe revert to the original cleanups during failure branches.
Members of a nominal type often try to refer back to the type.
Members of protocol extensions have special overloading rules.
Merge conditions and remove the merged cond_fail instructions.
Metatype self captures don't extend the lifetime of an object.
Might as well spill on a block boundary, as early as possible.
Most exprs remain exprs and should be wrapped in ExprPatterns.
Most type metadata depend on the formal linkage of their type.
Need a conditional branch that guards the entry into the loop.
Needs to be at least 3 chars for private/protected properties.
Next check if we are the target of a default switch_enum case.
No callee means we're resuming in the middle of a TC function.
No extra indentation level for getters without explicit names.
Non-escaping lvalues are captured as the address of the value.
Non-truecolor case, restored to its more or less original form
Not done by PHP5/7, but using SSL nowadays is a very bad idea.
Note that this has no support for resolving generic types yet.
Note that we arrange blocks so that we fall through into this.
Note that we might have cached a null marker, and that's fine.
Now we can go ahead and add in the right number of extra bits.
Number of inlined instructions of this function in its caller.
Objective-C categories and extensions map to Swift extensions.
On the other hand, casts can decrease optionality monadically.
Only clone the arguments that remain in the new function type.
Only continue members in the same submodule as this extension.
Only provide a TypeLoc if it makes sense to allow diagnostics.
Only the function pointer value is used for extra inhabitants.
Otherwise remove the dead live range that is only copied into.
Otherwise, forcibly emit into the initialization if it exists.
Otherwise, it is partially live, save it for later processing.
Otherwise, map the dominator structure using the mapped block.
Otherwise, strip it off so that we can optimize the body more.
Otherwise, they yield rvalues (and the access must be a load).
Otherwise, walk the 'inherited' list to identify requirements.
Otherwise, we need to use the general indirect-cast functions.
PHP5 xdebug returns 0 when it can't determine the line number.
Parse a "(value)" specifier for "set" or "willSet" if present.
Parse the first part, either a var, let, expr, or stmt-assign.
Partition by actual code area without changing relative order.
Perform a speculative devirtualization of a method invocation.
Perform an upcast to convert self to the indicated super type.
Pick the nearest break target that matches the specified name.
Place internal breakpoints to get out of the current function.
Polymorphic function types should never be explicitly spelled.
Pre-populate the foreign-representable cache with known types.
Print CFG in dot format, coloring the blocks based on hotness.
Propagate back types for simple patterns, like "var A, B : T".
Propagate the count of array allocations to array.count users.
Property accessors should be generated alongside the property.
Protocol types are existential and do not have witness tables.
Purposefully fake name to avoid confusion with an actual type.
Put all the unique and sorted layouts into the m_layouts list.
Put the 64-bit file length in *bits* at the end of the buffer.
Put the auxiliary output file next to the primary output file.
RValue has an invariant that loadable values have been loaded.
Reachable catch blocks and fault funclets have an empty stack.
Real length of string literals computed based on its contents.
Record the block of the first user and move on to other users.
Recover with an infinite-precedence left-associative operator.
Recursively invalidate the cached paths rooted at "node/name".
Recursively process its uses with the adjusted element number.
Reduce conventions for trivial types to an unowned convention.
Remember the start of the token so we can form the text range.
Remove internal functions that are not referenced by anything.
Remove the current AAWH from the parent chain of all children.
Replace any DynamicSelf types with their underlying Self type.
RepoAuthoritative has been raptured out of runtime_option.cpp.
Reset the socket to non-blocking mode and setup socket options
Resiliently-sized metadata access always requires an accessor.
Resolve specialization attributes after setting ContextParams.
Retrieve a dynamic result signature for the given declaration.
Retrieve the declared type of a type declaration or extension.
Return the bit position of the given Loc in the LocationVault.
Return the current string ref without claiming any characters.
Return the referenced node, or null if this is not a Ref type.
Returning false since PPC64 specific code is under development
Returns 1 when it worked, and 0 when an error was encountered.
Returns true if LHS and RHS contain identical set of releases.
SIL exposes a greater number of conventions than Swift source.
Save off the forwarded indirect return address if we have one.
Save the conformance and 'value' decl for later type checking.
Search for allocation- and deallocation-calls in the function.
Second step: add the source graph's defer edges to this graph.
Serialize all the params into something we can use for the key
Set PC so logging code in getTranslation doesn't get confused.
Set this declaration as invalid, then break the cycle somehow.
Sets the wire protocol flag to allow reading from a secondary.
Setting it to PRIMARY when it already is PRIMARY doesn't hurt.
Shallow-dump a pattern node one level deep for debug purposes.
Simple soundex algorithm as described by Knuth in TAOCP, vol 3
Simplify the given type for use in a type property constraint.
Since it is an addr cast, only address types are handled here.
Skip malformed unreachable blocks that can appear transiently.
So if we have a scalar or a different sort of aggregate, bail.
Someone else pulled in new conformances while we were waiting.
Sometimes curried method parameter lists get default arg info.
Sort by enumeration number so that clients get a stable order.
Sort the list of class vtables so the largest ones come first.
Special case builtins because they are meaningless to the user
Specialize the given column to the given array of new columns.
Specialized emitter for Builtin.castReferenceFromBridgeObject.
Store the native error in the appropriate location and return.
String streams for writing to the CHUNKS and STRINGS sections.
Strip off the projection path from base to the accessed field.
Strip the arguments and rewire the branch in the source block.
Substitution for the same archetype as in a previous argument.
TODO: Give these predictable mangled names and shared linkage.
TODO: could expand this to make a callback into PHP user-space
TODO: perform some preflight checks to ensure the file exists.
TODO: reconsider whether having a default case is a good idea.
Test that pointer enums with the same case and data are equal.
That is, if a particular import is a top-level import, add it.
The PreClass runtime structures require knowing these offsets.
The Self type is abstract, so we must pass in a witness table.
The VWT pointer always immediately precedes the address point.
The action influences the behavior of that particular scanner.
The baseList is non-empty, and the last element is this class.
The body block must end in a noreturn call, return, break etc.
The calls to Array get_element that use this array allocation.
The elements are assigned discriminators in declaration order.
The following getContentNode() will create a new content node.
The inout self is just loaded to produce a value in this case.
The lvalue or rvalue representing the argument source of self.
The map does not contain succ, we have not processed it before
The original normal result of the try_apply is an empty tuple.
The result value is passed as a parameter to the normal block.
The runtime uses dlopen to look for the protocol conformances.
The second return value is the owner / pointer, if applicable.
The server will have checked the breakpoint list for validity.
The shortest distance from the scope entry to the block entry.
The specified instruction is a use of some number of elements.
The tab_prefix table is the same size and type as the codetab.
The top-level node for the function appears first in the list.
The type for a generic TypeAliasDecl is an UnboundGenericType.
The type we got should be lowered, so lower it like a SILType.
The uniquing structure for existential metatype type metadata.
Therefore we can simply ask SSAUpdater for the reaching store.
Therefore, we need to ensure they appear in the dynamic table.
They may be attached to an operator declaration or a function.
This block must be the only successor of all the predecessors.
This exposes the copy that the function does to the optimizer.
This file implements semantic analysis for Swift declarations.
This file implements the protocol conformance data structures.
This happens for properties and global variables in libraries.
This includes all writes of the sub loops and the loop itself.
This is 1:1 with php::Class iff the php::Class has AttrUnique.
This is a candidate for a callee, along with an uncurry level.
This is a common case for functions returning multiple values.
This is always true until the slow exits below are implemented
This is cheating, assuming server has same list of extensions.
This is only used for diagnostics, so always use KnownPrivate.
This is populated by the flow-sensitive analyze_physical pass.
This is the first non-prologue instruction in the entry block.
This isn't a control character, so we don't need to escape it.
This keeps track of the weights of blocks and arcs in a Vunit.
This makes diffing large sections of SIL significantly easier.
This more than covers the period when the calendar was in use.
This operation creates a callback to write / the l-value back.
This should always be called once we're attached to a machine.
This should always be the case, but let's be on the safe side.
Too many arguments passed, raise a warning ourselves this time
Top of the region hierarchy - allocate a fresh control target.
Treat keywords that could be the start of a pattern specially.
Trie node representing a sequence of unsigned integer indices.
True if a pattern is a wildcard, meaning it matches any value.
True if analysis has concluded that deshadowing cannot happen.
Try move retains either to the next BB, or the end of this BB.
Try to determine a hint via the first phi use in the interval.
Try to diagnose the first missing type witness we encountered.
Try to do this without making cache entries for obvious cases.
Try to find a clang method declaration for the given function.
Try to put the constant in a position that can get imm-folded.
Try to remove the cond_fail based on previous overflow checks.
Turn an OptionalTypeKind into an index into one of the caches.
Type check the type parameters in an UnresolvedSpecializeExpr.
Unconditionally destroy existing arrays -- possible dirty data
Update linkage for global addressors to make it pass verifier.
Update the string pointer to point just after the number read.
Use the constant's underlying value as its raw value in Swift.
Use the first string label which references a registered type.
Utility class for building values that contain witness tables.
Validate 'static'/'class' on properties in nominal type decls.
Walk a member reference expression, checking for availability.
Warning to rewrite it to _ is more annoying than it is useful.
We *do* allow these if they are escaped with backticks though.
We always create generic type parameters with a depth of zero.
We can skip the incref for static closures, which have a Cctx.
We can skip the rest, since their contained Vregs are untyped.
We can't delete the object if its destructor has side effects.
We consider popping an ActRec and args to be synced to memory.
We do not care about local IDs, we only process non-local IDs.
We don't know the name, but we know something about the class.
We don't need full flow-sensitive analysis for SILGen-ed code.
We don't try to cache negative responses for generic patterns.
We either have extra inhabitant 0 or no extra inhabitant (-1).
We expected SetElem's base to not be a Str but might be wrong.
We have already visited this node and it is in our dfs search.
We have no valid positions---no one should call this function.
We have to re-abstract payload if its a metatype or a function
We ignore ud2 so spill space is still allocated in core files.
We just pass in the address since archetypes are address-only.
We just put a C on the stack, so we need to get it to be an F.
We need to convert the source element to the destination type.
We perform redundant load elimination in the following phases.
We populate this set when / we compute the genset and killset.
We should only ever get ObjC pointers, not underlying objects.
We treat ref_element_addr like a load (see NodeType::Content).
We want to decompose the parameters to handle them separately.
We've just been told to perform a parse, so we can return now.
When Pack_32 is not defined, we store 16 bits per 32-bit Long.
When there are archetypes, recurse to profile the type itself.
Whether any of the given optional adjustments is an error (vs.
Whether the row will be irrefutable after this specialization.
Windows doesn't accept POSIX as a valid locale, use C instead.
Write real header, as we are confident the output is complete.
YYCHAR is either YYEMPTY or YYEOF or a valid lookahead symbol.
Yep, throwing away const here (for now) for API compatibility.
a non IntlCalendar was specified, we want to keep the timezone
a space or some other separator character, we simply skip over
armv7k has opaque ISAs which must go through the ObjC runtime.
assigned to the return value for this call when nothing exists
booleans in arithmetic and bitwise operations get cast to ints
caller has already incremented pos but encountered a tombstone
checking whether the following line is part of a folded header
dispatch arbitrary declaration to relevant circularity checks.
generally not thread safe, but it *is* thread safe under win32
go back to dirty (see the comments of sync_regstate_to_caller)
if the current position is reachable, emit code to return null
if we are applying case conversions on column names, do so now
kill unreachable code and remove any traces that are now empty
namespace / If this is a call to a global initializer, map it.
no instructions conservatively using rcid in a manner that ...
not mod_php, look in _SERVER and _ENV for Authorization header
numVars    The number of variables passed to the scan command.
o More kinds of checks for hoisting (CheckType, CheckTypeMem).
pad due to the spaces between the inode number and the mapname
parseToken - The parser expects that 'K' is next in the input.
php5 xdebug adds "constant" facet, but this is not in the spec
reads an ftp response, returns true on success, false on error
reallocate into a smaller buffer so that we don't waste memory
removes all empty text, comments and other insignoficant nodes
restore the old signal mask, thus unblock those that should be
returns 1 if you need to copy result, 0 if it's already a copy
sends an ftp command, returns true on success, false on error.
single string parameter, used by xbox to avoid any en/decoding
str1 is string but not numeric string just convert it to utf8.
syminitialize and symcleanup should really be once per process
the taken branch is the fall-through block, invert the branch.
the version of the high frequency function that is not inlined
trash the native data but leave the header and object parsable
use temp uin32_t because ostream thinks uint8_t is a character
visit instructions to find tmps eligible to use SIMD registers
we are priming, so we are not checking existence or expiration
we have perfect doc comment blocks, so we can re-adjust spaces
xpgSize is guaranteed to be at least one larger than objIndex.
"old"-style: setting - 2 chars of salt key - up to 8 characters
(I.e. it'll be the canonical() tmp, or the first LdCtx we saw.)
...but only until the next sleeper (from any context) finishes.
/ /  availability-spec: /     '*' /     version-constraint-spec
/ / Don't do lookup into superclasses or implemented protocols.
/ / For now, it performs a lookup only in the standard library.
/ / If anything was found it will be added to DecToIncStateMap.
/ / NOTE: Canonicalization does not solve the problem entirely.
/ / PerformRLE - Perform the actual redundant load elimination.
/ The unsubstituted result must be naturally returned directly.
/**/ comments can be nested, keep track of how deep we've gone.
2) A Hack-specific reserved typehint while in the HH namespace.
@param uint32 cpu_id, the id of the logical cpu to be bound to.
A LSLocation is an / abstraction of an object field in program.
A class member is always better than a curried instance member.
Add all of the requirements of the archetype to the given type.
Add any constraints that aren't already active to the worklist.
Add for any character in the key one byte of the alternate sum.
After all this, the instance type fields should still be valid.
All YAML scalar types found at http://yaml.org/type/index.html.
Ask the runtime for the unique metadata record we've canonized.
Assert that we copied the shared prefix data from the subclass.
Assign counters for cases so they're available for fallthrough.
At least one of the values must be a non-escaping local object.
Attempt to resolve a type witness via a specific value witness.
Awkwardly munge absolute filenames into a vector of StringRefs.
Blocks are not imported (although block types can be imported).
Build the appropriate TypeLowering subclass for the given type.
Bump the reference count of functions referenced by this table.
Cache the value under both its compound name and its full name.
Calling isResilient() with this scope will always return false.
Canonicalize all switch_enum and switch_enum_addr instructions.
Cast the storage to the block type to produce the result value.
Check any generic parameters for something with the given name.
Check each non-covered literal protocol to determine which ones
Check for an existing forward declaration of the address point.
Check for protocol conformances and fill in the witness tables.
Check if the inhabitant is below the least valid pointer value.
Check if the type is an enum and check the constraint if it is.
Check invariants about the bytecode instructions in this Block.
Check section 6 of rfc 822 http://www.faqs.org/rfcs/rfc822.html
Check that the argument is passed as an inout or by value type.
Check that the input type can be value cast to the output type.
Check the generic parameters for something with the given name.
Check whether a locator with this anchor + path already exists.
Check whether the constraint graph knows about this constraint.
Check whether we need to run an optimistic iteration data flow.
Cleanup that writes back to an inout argument on function exit.
Clear the debugger blacklist PC upon last detach if JIT is used
Collect the requirements placed on the generic parameter types.
Compute a new substituted type if we have a base type to apply.
Compute insertion point generated by the edge value transition.
Compute the formal type that we expect +allocWithZone: to have.
Compute the insertion point where each RC root can be moved to.
Configures target-specific information for powerpc64 platforms.
Consider each of the constraints related to this type variable.
Constrain the allowable registers for `ivl' by inspecting uses.
Construct a proper inline scope pointing back to the call site.
Continue simplifying any active constraints left in the system.
Couldn't actually import it as an error enum, fall back to enum
Create OptTable class for parsing actual command line arguments
Create a LocalVariableInitialization for the uninitialized var.
Create a basic block to jump to for the implicit 'self' return.
Create a copy of the BB as a landing BB / for all FailurePreds.
Create a flat list of loops in loop-tree postorder (bottom-up).
Create a new explosion for potentially reabstracted parameters.
Create a normal return, but leaving the return value undefined.
Create a single CompileJobAction and a single BackendJobAction.
Create and insert the EnumCaseDecl containing all the elements.
CreateAFWH takes care of copying local variables and iterators.
CreateCont takes care of copying local variables and iterators.
Deactivate the element cleanups and activate the tuple cleanup.
Declare cached declarations for each of the known declarations.
Default to the representative, unless we find something better.
Define common set of rules for unwinding frames in the VM stack
Dependent members can appear in lowered position inside tuples.
Determine if we have leading decorations in this block comment.
Determine the liveness state of the element that we care about.
Determine the type to which we'll bind the overload set's type.
Determine whether the given request has already been satisfied.
Determine whether we can derive a witness for this requirement.
Determine whether we know anything about this nominal type yet.
Diagnose recursive use of properties within their own accessors
Dig the original user's body of the defer out for AST fidelity.
Disable the use of sret if we have a non-trivial direct result.
Do not add a semi as it is wrong in most cases during migration
Do not remove* any bits that are already on the closure though.
Do not translate functions from units marked as interpret-only.
Do the single call to the custom bases scanner if there is one.
Do this before setting up the timeout to avoid potential races.
Don't free malloc-ed allocations even if they're not reachable.
Don't handle any apply instructions that involve substitutions.
Don't introduce an empty options default arguments for setters.
Don't step out to generated or builtin functions, keep looking.
Don't walk into it though, it may not even be type checked yet.
Drop the reference count of functions referenced by this table.
DynamicSelf has the same representation as its superclass type.
Each corresponds / in order to a "hole" (a null value) in Args.
Each local id referred to in the type prediction list is valid.
Eagerly pull records for nondependent witnesses into our cache.
Emit a fixit hint to rewrite to the correct do/catch construct.
Emit a note specifying where this came from, if we can find it.
Emit testb when possible to enable more optimizations later on.
Emit the 'iterator' variable that we'll be using for iteration.
Emit the body, which is always evaluated the first time around.
Emit the sub-expression tuple and destructure it into elements.
Ensure that this marker is SIZ (as is mandated by the standard)
Enum values that while merging we found conflicting values for.
Existing step outs should be cleaned up before making new ones.
Extend the lifetime of a captured argument to cover the callee.
Extra inhabitants of the various scalar existential containers.
FIXME: Distinguish errors from "file removed", which is benign.
FIXME: Do not report if we are within a template instantiation.
FIXME: If we ever allow argument reordering, this is incorrect.
FIXME: Merge this with diagAvailability in MiscDiagnostics.cpp.
FIXME: Right now this works only with access paths of length 1.
FIXME: Should also be able to do this for forced class methods.
FIXME: We actually do have things to enforce for versioned API.
FIXME: non-matches are the same as non-first-character matches.
FIXME: this code is largely duplicated with the previous block.
Fetch the type metadata access function for a non-generic type.
Figure out previous argument names from the parameter bindings.
Fill in the provided part of the requirements from the pattern.
Find the conformance of the value type to _BridgedToObjectiveC.
Find the function that's actually got an entry in the metadata.
First generate calls to the scanner to record all the pointers.
First, see if the field type vector has already been populated.
For a default witness, use the requirement's context archetype.
For abstract methods, simply return if method already declared.
For an Objective-C class, import all of the visible categories.
For each possible dest type, determine if its type might relax.
For migration purposes, distinct Map types should compare equal
For non-ObjC closures, assume the type metadata is always used.
For non-repo mode, where they are added at Class-creation time.
For now we only interop with Int8 pointers using UTF8 encoding.
For perfect rounding, must get sin(a + pi/4) and sin(a - pi/4).
For quality and type, -1 means that the argument does not exist
For structs, external extensions may initialize let properties.
Forward references only live here if they have a single result.
Gamma is ignored, and there is no support for text annotations.
Gather spare bits into the low bits of a smaller integer value.
Get memory for full buffer, including space for trailing EOB's.
Get or create an LLVM global variable with these linkage rules.
Get the best known type information about the destination type.
Global state for this pass, visible while processing any block.
Grab the block pointer and make it the first physical argument.
Handle output being an exploded tuple when the input is opaque.
Handle the mechanical aspects of removing an unreachable block.
Handles properly formed UTF-8 characters between 0x01 and 0x7F.
Helper function to find a SILFunction, given its name and type.
However, it is very common for someone to write something like:
However, such address casts cannot be converted to value casts.
I've also made it reentrant and made a number of other changes.
If II is not a closure that we support specializing, skip it...
If Ptr has reference semantics itself, create a strong_release.
If a dependent member refers to an associated type, replace it.
If it is not, emit the generic error that we would emit before.
If not this is a bad expression, and a potential security hole.
If one entry is fixed and the other is not, we have our answer.
If one of the types is a type variable, we leave this unsolved.
If one type is convertible to of the other, but not vice-versa.
If so, propagate the sugar to the curried result function type.
If that didn't turn up an issue, then we don't know what to do.
If the block is in the dom tree (dominated by the entry block).
If the class is generic, we'll instantiate its name at runtime.
If the copyaddr is of a non-loadable type, we can't promote it.
If the first thing we found is a fix, add a "don't fix" marker.
If the input instruction has no dest, this will return nullptr.
If the molad occurs on or after noon, Tishri 1 must be delayed.
If the next token is 'catch', this is a 'do'/'catch' statement.
If the result type is address-only, get a result buffer for it.
If the table builder doesn't take this one, we have to free it.
If the type info hasn't been added to the list of types, do so.
If the type is already materializable, then we're already done.
If the type isn't existential, then there is no representation.
If there are a different number of argument labels, we're done.
If there are no modifiers, buildAttrs() defaults to AttrPublic.
If there aren't any more inputs, we can use a default argument.
If there is an unbound generic type involved in the cast, bail.
If there's a trailing arrow, parse the rest as the result type.
If these checks were performed already, no need to repeat them.
If this decl in the result list isn't a close match, ignore it.
If this function returns it means the process is running again.
If this initializer is required, add the appropriate attribute.
If this is a class member, mark it final if the class is final.
If this is a tuple expression, recursively ignore its elements.
If this is a variable that was only written to, emit a warning.
If this is an LLVM IR intrinsic, lower it to an intrinsic call.
If this is the first instruction in the block then we are done.
If this isn't the protocol we're looking for, continue looking.
If this score matches the (possible new) best score, record it.
If this triggered a recursive validation, back out: we're done.
If this value is zero, it has nothing to add to the spare bits.
If we already have a viable result, it's ambiguous, so give up.
If we already recoded this type witness, there's nothing to do.
If we can solve the solution, the protocol extension is usable.
If we can't find a constructor then assume it has side effects.
If we couldn't emit ArraySet, fall through to the generic path.
If we didn't find a retain to fold this into, emit the release.
If we don't have an error result, we can make a simple 'apply'.
If we don't pass a name, then we just use the raw config as-is.
If we found a backedge, add ER's ID to LRegion's Backedge list.
If we have a covariant result type, perform the conversion now.
If we have generic parameters, check the generic signature now.
If we have no contextual type, there is no way to resolve this.
If we hit the last requirement, record and check this solution.
If we saw more than one identifier, there's a ':' missing here.
If we're "constructing" a tuple type, it's simply a conversion.
If we're going to recurse, record this expression on the stack.
If we're referring to an invalid declaration, don't type-check.
If we're supposed to remove overridden declarations, do so now.
If we've already agreed upon an overloaded return type, use it.
If you change this, also change TRY_KIND_SELECT in diagnostics.
Ignore function calls which do not write to the stack location.
Images with more than 8 bits per channel are reduced to 8 bits.
Implementation for palette images can be done at a later point.
Implicit decls may be delayed if they can't be used externally.
Import-as-member declarations are always statically referenced.
Imported accessors are foreign and only have objc entry points.
In a class, this prevents it from being dynamically dispatched.
Increment the ref count to make sure it will not be eliminated.
Info from: http://sc.openoffice.org/compdocfileformat.pdf  N.B.
Inherited methods will be inserted in the recursive call later.
Initialize the error-limiting transfer function (lookup table).
Initialize this BB with the state of the successor basic block.
Inject that into the result type if the result is address-only.
Inlined calls normally skip the function enter and exit events.
Insert I into its location in the interesting instruction list.
Inserting in an empty array creates a packed array of size one.
Instructions that compute a subelement are handled by a helper.
It only splits new critical edges it creates by jump threading.
Key is no longer valid as we cleared the AliasValueBaseToIndex.
L and R are the righthand and lefthand sides of the constraint.
Lastly, check whether all the successor blocks are retain-free.
Leaving out of bounds to be thrown by the vector in case needed
Length of string literals as reported by string.make functions.
Let's relax and pretend they said they were mime 1.0 compatible
Limit tree to search based on the DeclContext of the reference.
Load the 'isInline' valueWitness from the given table as an i1.
Load the 'size' value witness from the given table as a size_t.
Load the next parent in the chain, and unblock the whole chain.
Load the value as swift.refcounted, then hand to swift_release.
Local function to combine the result of a recursive invocation.
Look for __construct() declared in either this class or a trait
Look for the "begin " sequence that identifies a uuencoded file
Look in the protocols to which the archetype conforms (always).
Look up the top-level module first, to see if it exists at all.
Lookup using dladdr() failed, so this is probably a PHP symbol.
Lower away type trait builtins when they're trivially solvable.
Make sure that our parent tuple has only one non-trivial field.
Make sure that setcc/xor with an non-1 xor constant is skipped.
Make sure the current process gets scheduled to the target cpu.
Make sure the new size of the string wouldn't overflow int32_t.
Make sure the reference to 'self' occurs within an initializer.
Map all the outer initializations to their appropriate targets.
Map each address projection of this object to a list of stores.
Map the callee argument effects to parameters of this function.
Match a Value associated type requirement to the property type.
May throw C++ exception that may leave some events unprocessed.
Methods need to be collected into the appropriate methods list.
Most functions are just 'wrappers' for standard file functions.
Must be called for each instruction visited in dominance order.
Negative means first character is start'th code point from end.
Next, open any new protected regions that start at this offset.
No instruction can "kill" flags, since flags are SSA variables.
No need to check if there is a dynamic property with this name.
No received events means the next-to-wake sleeper timed us out.
Normally, this is just the Class*s that might not be hoistable.
Not that FunctionRefInsts may be shared by multiple ApplyInsts.
Note carefully: we're emitting a warning in the /Clang/ buffer.
Note that we don't need to sync the return registers to memory.
Note that we'll be doing a shuffle involving default arguments.
Notify the delete handlers that this BB argument is going away.
Notify the delete handlers that this argument is being deleted.
Notify the delete handlers that this instruction is going away.
Now that tvCbRet is live, make sure to decref even if we throw.
Now we know that RCIdentityBB and IncomingEdgeBB are different.
Objective-C retain and release can have arbitrary side effects.
Often, the rules will want to "reprocess" by backing up a node.
On OSX 10.9, we are lied to about the main thread's stack size.
On the other hand, the sub-pattern can be explicit or implicit.
Once Swift has a native notion of submodules, this can go away.
Once the following block runs the guards should be unreachable.
One valid split found, it is almost certainly the right answer.
Only returns nullptr if the callee is the top level pseudo-main
Optimize retain/release pairs based on Builtin.unsafeGuaranteed
Otherwise leave the original cleanup and retain the cast value.
Otherwise we'll promote this when we deal with hooking up phis.
Otherwise, all we need to do is register with the ObjC runtime.
Otherwise, ignore the base and return the static thin metatype.
Otherwise, the member needs to be convertible to the base type.
Otherwise, using the object as a source (or size) is an escape.
Otherwise, we have reached something that we do not understand.
Our current rank is the most recent ranked lock we've acquired.
PHP 7 allows user defined constants as parameter default values
Parse frontend command line options using Swift's option table.
Perform subtype check on the possibly-bridged-through key type.
Pointer to the underlying php::Func this has information about.
Pop the current state because it cannot handle the error token.
Populate AllValues, AddressProjectionTrie, and StoredLocations.
Populates AllUsers, AddressProjectionTrie, and StoredLocations.
Process basic blocks to perform the redundant load elimination.
Provide some common bindings to complement editline's defaults.
Punt if the given base type isn't known to be boxed or unboxed.
Put the 128-bit file length in *bits* at the end of the buffer.
Put the inputs in the order expected by the calling convention.
Read-only lookup failed to find item, we may need to create it.
Rectify the setter element type with the getter's element type.
Recursively emit a decision tree from the given pattern matrix.
Reference types are only permitted as function parameter types.
Register the end of the init as the end of the delayed parsing.
Release the semaphore if it has been acquired but not released.
Remaining cases should only come up when we're re-typechecking.
Remember that this alloc_ref allocates the object on the stack.
Replace allocateBuffer and destroyBuffer with logging versions.
Replace an existing external declaration for the address point.
Replace the switch_enum_addr by select_enum_addr, switch_value.
Replace the unit with an empty one, but preserve its file path.
Report a fatal error to system console, stderr, and crash logs.
Report diagnostic if the first argument has been folded to '1'.
Resolve the associated type and merge the potential archetypes.
Resolve the declaration signature when we find the declaration.
Result is -1 if the field is invalid (all blank, or non-octal).
RetainValueInst of a trivial type is a no-op + use propagation.
Retrieve the Clang node for the given extension, if it has one.
Retrieve the set of substitutions to be applied to the witness.
Retrieve the type to use for a method found via dynamic lookup.
Return as soon as possible if we are not producing diagnostics.
Returns an IR block corresponding to the given bytecode offset.
Returns the alias analysis we will use during all computations.
Returns the connected (or connecting) socket, or -1 on failure.
Returns true if / a diagnostic was emitted and false otherwise.
Rule out multiple version specs referring to the same platform.
Scan the memory buffer looking for expected-note/warning/error.
Schedule taken for later, and continue doing the next path now.
Search for the phidef in block `b', then return its dest tuple.
See below for the implementations of the Op template parameter.
See if we've cached the lowered capture list for this function.
See if we've produced a block copy helper for this type before.
See whether the current value at the destination has a payload.
Self and super requirements must also be checked and diagnosed.
Serializes a Variant, and truncates it to a limit if necessary.
Server note has to live long enough for the access log to fire.
Setters declared in reference type contexts are never mutating.
Setup the builder we will use to insert at our insertion point.
Short-hand to get the rpoId of a block in a given FuncAnalysis.
Should be a type followed by a series of protocol conformances.
Should only be one conformance, for the ErrorProtocol protocol.
Silence error messages about testably importing a Clang module.
Skip declarations with an invalid 'override' attribute on them.
Skip this declaration, because we prefer the overridden method.
So we have to say the call destroys locals, to be conservative.
Sort the module names so we can print in a deterministic order.
Split all critical edges such that we can move code onto edges.
Structs and enums imported from C *always* have a fixed layout.
Substitute context parameters out of the "from" and "to" types.
TESTING  This algorithm has been tested from the year 4713 B.C.
TESTING  This algorithm has been tested from the year 4714 B.C.
TODO(9755792): Add real execution mode for snapshot generation.
TODO: Add support for working around control dependence issues.
TODO: add swift_error attribute Initialize at the alloca point.
TODO: evaluate the effect of sync() and uncomment if desirable.
TODO: the IR would be more legible if we made a struct instead.
TODO_4: evaluate when these can throw, non-constant type stuff.
Taken: LdClsPropAddr* returned Nullptr because it isn't defined
That will cause SameType requirement to have Archetypes inside.
The / text is inserted immediately *after* the token specified.
The API routine is partially broken on filenames ending ".com".
The AbstractClosureExpr or AbstractFunctionDecl being analyzed.
The Builtin module declares no operators, nor do derived units.
The chunks themselves get copied into the CodeCompletionString.
The final null terminator is provided by getAddrOfGlobalString.
The last witness is computed dynamically at instantiation time.
The list of first level projections that Arg can be split into.
The raw value is the previous element's raw value, incremented.
The replacement is for the corresponding archetype by ordering.
The result type would not have a single-refcounted-pointer rep.
The strong reference count should be +1 -- tear down the object
The struct alignment is the max of the alignment of the fields.
The structure of ObjC class ivar lists as emitted by compilers.
The value is live in the block but not at the end of the block.
The value may need truncation if its type had an abstract size.
There is no Any equivalent since they keys need to be hashable.
These are functions that we don't want to copy from the module.
This assumes the data section is near the current code section.
This avoids somewhat more complicated logic in the inner loops.
This builds argument values for all the inner indirect results.
This class implements support for -verify mode in the compiler.
This could happen when we are at a known leaf of a config node.
This ensures that we always propagate the empty set from loops.
This file defines function pointer symbols for runtime entries.
This file implements IR generation for function types in Swift.
This function clears the read preference before adding tagsets.
This function may not be called without first calling Escalate.
This function returns the File associated with the given token.
This is always a GEP of a GlobalVariable with a nul terminator.
This is necessary since the functions may reference each other.
This is not a leaf node, reduce the next level node one by one.
This is similar to what we do with instancetype in Objective-C.
This is useful, e.g. for rawValue or hashValue of C-like enums.
This just wraps vmodify() with some accounting logic for `env'.
This limitation allows us to recover from common errors though.
This means we don't need a ton of redundant entries in the map.
This method is used when no profiling information is available.
This might help users who are refactoring code by adding names.
This only applies to immediate imports of the top-level module.
This re-enters to call extension-defined instance constructors.
This value could be NULL if there are / multiple deallocations.
This value is beyond our precision, so rounding it is pointless
This will be the proper successor block set by setSuccIRBlocks.
This will enable us to recover the original edge if we need to.
This won't be set until we write the actual file data later on.
To keep DI happy, initialize stored properties before computed.
Track all stores of refcounted elements per address projection.
Tracks the depth of the stack in a given block of instructions.
Tracks the potential version range when the condition is false.
Translate implicitly unwrapped optionals into strict optionals.
Try to transitively deserialize everything referenced by NewFn.
Types in this set should not be processed by this pass anymore.
U8_NEXT() advances sourceBytePos by 1-4 each time it's invoked.
Unlike opening code completion, this is not a semantic request.
Unused tag bits in the physical size can be used as spare bits.
Update a lookup table with members from newly-added extensions.
Use relaxed memory order because we don't need memory barriers.
Use the SM to figure out the actual line/column of a SourceLoc.
Use the appropriate map according to the object type's linkage.
Use the context generic parameters of the original declaration.
Verify that any expected fix-its are present in the diagnostic.
Verify the validity of the current character as a base-2 digit.
Visitor for Defs and Uses used to compute liveness information.
We can only bridge from class or Objective-C existential types.
We can't just bitcast if there's an error parameter to forward.
We can't use parseMatchingToken if we're in just-checking mode.
We do not want to split arguments with less than 2 projections.
We do this here so we can process the resulting / loads/stores.
We don't know how to serialize decls represented by sub-blocks.
We don't know how to serialize types represented by sub-blocks.
We have internal breakpoints setup, but we haven't hit one yet.
We have to do a retain because we are returning the pointer +1.
We know it is stdClass, and everything is public (and dynamic).
We know that at this point we have at most one store per block.
We may have unnecessarily allocated an ExtraData, but whatever.
We reuse this variable, it iterates over all pixels in the row.
We should fall back to display the original PHP text, if there.
We will probably need a struct type for that at some point too.
We would need to be smarter in our moving to handle such cases.
When a header has multiple values, we always take the last one.
When a local is definitely-written, it is removed from the set.
When mirroring an initializer, make it designated and required.
Whether the bindings of this type involve other type variables.
With jemalloc, the usage can go negative (see memory_get_usage)
Workaround this by using a slow path through Java in that case.
Write out extension for transparent colour index, if necessary.
a LSLocation is an / abstraction of an object field in program.
an incref is needed to compensate for discarding from the stack
check that every allocation in heap has been freed before reset
code wasn't correctly set by http client, treat it as not found
dtoa for IEEE arithmetic (dmg): convert double to ASCII string.
emitBBMapForSelectEnum set up a phi node to receive the result.
enum elements and function parameters are not instance members.
getValue - Return the APInt for the underlying integer literal.
if the pointers match then only subtract the length of the path
if we are setting constants, we must be setting system settings
in order to use strcspn, remove all null byte(s) from char_list
insert the inc right before succ if we advanced any instruction
l_in, r_in, l_out, and r_out are in pseudo-"big-endian" format.
li64 always emits 5 instructions i.e. 20 bytes of instructions.
m_dwarfProducer is the handle used for interaction for libdwarf
maybe add scan() to tsrm_resource_type in addition to ctor/dtor
number of characters read, or YY_NULL, is returned in "result".
o Both of these things may be relevant to the same catch block.
php_magic_database is a const, performing writes will segfault.
s0 must be a different register than s1 so we don't clobber it.
see if it makes sense to use simple division to round the value
set the individual row_pointers to point at the correct offsets
set this flag so that no diagnostics will be emitted on delete.
since 5.0.3, the default for this option is 0 if not specified.
stLoc needs to IncRef the value so it may constrain it further.
vasm-xls can fail if it tries to allocate too many spill slots.
void Release(ArrayData*)  Free memory associated with an array.
we should be already be in non blocking mode for network socket
yylex_destroy is for both reentrant and non-reentrant scanners.
"Destructure" an ignored binding into multiple ignored bindings.
/   - '_' may only exist on the LHS of an assignment expression.
/ Returns false if it can be proven that no overflow can happen.
/ Returns true if there's no point in considering other origins.
10 (LIST_MAP): followed by serialized values until STOP is seen.
14 (VECTOR): followed by n serialized values until STOP is seen.
@param user_defined The data to be associated with this scanner.
A delegating initializer does not initialize instance variables.
A layout can currently contain three different types of actions.
A non-throwing function can be a subtype of a throwing function.
A normal value, represented as an exploded array of llvm Values.
A parent loop must contain all the blocks in its children loops.
A pretty odd if statement, but consider the following situation.
Actually we only add instructions which may release a reference.
Add a dependency from the tuple itself to the extracted element.
Add the counts from jumps directly to the label (such as breaks)
Add the default-entry of the original instruction as case-entry.
Add the fields for the standard heap header to the given layout.
Add the literal instruction to represent the result of the cast.
Add the member to the list of declarations without notification.
Advance YYPTR to a properly aligned location for the next stack.
Allocate the request-local one-way method cache for this lookup.
Allow multiple non-recursive references to the same array/object
Allow the substituted type to add thick-ness, but not remove it.
Apply any ABI-compatible conversions before doing thin-to-thick.
Apply omit-needless-words to the given declaration, if possible.
Array/Dictionary elements are siblings to align with each other.
As a sop to error cases, allow the name to have an empty string.
Assert that we copied the extra prefix data from the superclass.
Assume the current eval stack matches that of the forward branch
At this point, we can perform general name lookup into any type.
Avoid 'this' pointer overwriting by reserving it as an argument.
Avoid a weird leak warning in debug mode when freeing the stream
Bind the generic parameters from the given list and its parents.
BlockState summarizes how LSLocations are used in a basic block.
Bound variables all get their initial values from the generator.
Build a reference to the init(stringInterpolation:) initializer.
Build regex matcher from compiled pattern and passed-in subject.
Build the value to be assigned, reconstructing tuples if needed.
But we do want to walk into the initializers of local variables.
CALENDAR OVERVIEW  Julias Ceasar created the calendar in 46 B.C.
Cache the result, so we don't perform string manipulation again.
Calculate the time of the starting molad for this metonic cycle.
Calls that time out (try 1 ms) should return a status code of -1
Can be either a call to _adoptStorage or _allocateUninitialized.
Cast expressions 'x as T' get resolved to checked cast patterns.
Casts from class existential into a non-class can never succeed.
Catch any other implicit uses of self with a generic diagnostic.
Check for 'throws' and 'rethrows' after the type and correct it.
Check if a given type conforms to _BridgedToObjectiveC protocol.
Check if it is already created, and update linkage if necessary.
Check if this block is post dominated by ARC unreachable blocks.
Check if this file contains raw hip hop bytecode instead of php.
Check if we have a runtime function with the buffer as argument.
Check that all of the operands are extracts of the correct kind.
Check that it returns two size_t's and takes no other arguments.
Check that setcc/xor pair is collapsed with different condition.
Check that the generic requirements line up with the archetypes.
Check that the incoming value is identical to the first literal.
Check that the new and old offset still point to the same token.
Check to see if we've already emitted an error at this location.
Check whether the previous declaration had a semicolon after it.
Check whether we've already looked for and cached this protocol.
Class-constrained generic parameters, from ObjC generic classes.
Classify the provided optionality issues for use in diagnostics.
Code completion was inside the signature, don't attach the body.
Collect the locations and their corresponding values into a map.
Condition is the same if BB is reached over a pass through Pred.
Configure all vars with attributes, 'static' and parent pattern.
Configures target-specific information for 32-bit arm platforms.
Configures target-specific information for 32-bit x86 platforms.
Conformance to RawRepresentable is implied by having a raw type.
Copy the attributes, since we're about to start hacking on them.
Copy the flags from the original cursor and apply it to this one
Create a single CompileJobAction for all of the driver's inputs.
Create a temporary lexer that lexes from the body of the string.
Current algorithm: by population for first half, then by volume.
Currently there are no operator attributes for prefix operators.
Decompose the function's name into a builtin name and type list.
Derive the connection graph of the apply from the known callees.
Destructors are alive because they are called from swift_release
Determine the declaration selected for this subscript operation.
Determine the number of iterations the loop is at most executed.
Determine which extensions should be treated as php source code.
Determine which instructions from this function we need to keep.
Diagnose a '_' that isn't on the immediate LHS of an assignment.
Diagnose a previous declaration that is missing in this pattern.
Dig out the UnresolvedValueMember constraint for this expr node.
Dispatch in a struct/enum or to a final method is always direct.
Don't apply module-shadowing rules to members of protocol types.
Don't bother adding external declarations to the function order.
Don't bother if the replacement wouldn't make the string longer.
Don't expose objc properties for function types we can't bridge.
Don't keep looking if the user didn't indicate it's an override.
DynamicSelfType is also sugar as far as debug info is concerned.
Each entry point for a DV funclet is the start of a basic block.
Emit a reference to the Swift metadata for an Objective-C class.
Emit the unsubstituted result of this call to the given address.
Emit the witness table for the base conformance if it is shared.
Encountered a finally block, jump and free any pending iterators
Ensure that void return types original from a tuple instruction.
Events are duplicated so we can use the non-generic perf events.
Except see the bug regarding a race condition php_sysvsem_get().
Extension shutdown could have re-initialized some request locals
Extract the self types from the declarations, if they have them.
FIXME: Builtin and qualified types in LLVM have no parent scope.
FIXME: Cache a bit indicating when qualified lookup is possible.
FIXME: Customize diagnostic to mention types and compound names.
FIXME: Eventually, this should itself be a verification failure.
FIXME: Hard-coded list should move into the module map language.
FIXME: If the decl is in error, we get no information from this.
FIXME: If we want keyword arguments for closures, add them here.
FIXME: It'd be nice to be able to return a SIL address directly.
FIXME: Much of this was copied from visitOptionalEvaluationExpr.
FIXME: Pass this down instead of getting it from the ASTContext.
FIXME: Per the comment on DelayedExtensionDecls, this is insane.
FIXME: Read file names and sort them to prevent non-determinism.
FIXME: This depends on the buffer IDs chosen by llvm::SourceMgr.
FIXME: This should really be the linkage of the parent function.
FIXME: We shouldn't need to encode this for /all/ private decls.
FIXME: Weak, Unowned references have different extra inhabitants
FIXME: When we can import C++, use Clang's mangler all the time.
FIXME: Work around an apparent reentrancy problem with the REPL.
FIXME: specialize diagnostic when there were closure parameters.
FIXME: this should be a placement new but that adds a null check
FIXME: try each submodule chain starting from the most specific.
Fast path: if this isn't a subscript, just use whatever we have.
Figure out the initializing sequence for each of the properties.
Find all of the declarations with this name in the Swift module.
Find the generic type that implements this syntactic sugar type.
Find the globalinit_func by analyzing the body of the addressor.
Find the location at which we should insert the new initializer.
First do a basic check, mainly based on the type of instruction.
First, make sure that parent classes have their traits imported.
First, the terminals, then, starting at YYNTOKENS, nonterminals.
For inlined functions, we need to rewrite the inlined call site.
For non-address-only structs, we emit a struct_extract sequence.
For now this is restricted to opcodes that do literally nothing.
For now, it's separate as this was pulled originally from xdebug
For now, we don't support the observing accessors on subscripts.
For places where it is not supposed to include simple_counter.h.
For this implementation we'll use the highest depth encountered.
For this we use a cubic function on the number of caller blocks.
Force any delayed members added to the nominal type declaration.
Form the mapping from base names to entities with their context.
Forward all of the split element cleanups, assuming we made any.
GC will ignore pointers to freed memory gracefully in prod mode.
Gather the substitutions from dependent types to concrete types.
Get the ObjC selector family a SILDeclRef implicitly belongs to.
Gets the estimated definition of a value if it is in the caller.
Given a call to a helper function, set attributes appropriately.
Given a symbolic element number, return the type of the element.
Given an object type, return the matching Object representation.
Go over the collected calls and try to insert speculative calls.
Hack to handle thunks eagerly synthesized by the Clang importer.
Helper class storing HDF raw pointer and reference counts on it.
Helper for emitPropSpecialized to check if a property is Uninit.
Hoist the overflow check of induction variables out of the loop.
Ideally we should handle the void case in TypeConstraint::check.
If F is an external declaration, there is nothing to specialize.
If cannot find the synthesized USR, find the actual USR instead.
If class is abstract final, its constants should not be abstract
If expr is not the target, do the default constraint generation.
If it does not, return None so we keep searching up the domtree.
If it is a forward reference, it should be in our undefined set.
If it's a subclass, rTestClass must be at the appropriate index.
If neither class is an interface, their intersection is trivial.
If no Objective-C methods were defined in this file, we're done.
If one protocol remains, its nominal type is the canonical type.
If our superclass isn't default constructible, we aren't either.
If reading entire image is requested, read the rest of the data.
If some value is not available at this load point, then we fail.
If the Objective-C value isn't optional, wrap it in an optional.
If the builder has an empty path, just extract its base locator.
If the callee is not polymorphic, no substitutions are required.
If the class has no methods, no need to loop through breakpoints
If the current constructor is not failable, force out the value.
If the decl is monomorphically a stored property, allow aliases.
If the enclosing category is invalid, suppress this declaration.
If the error value is non-null, branch to the error destination.
If the last pattern had no init, we take the end of its pattern.
If the location is invalid, do not emit source ranges or fixits.
If the member isn't settable, then it is the problem: return it.
If the member type maps to an archetype, resolve that archetype.
If the name is an operator name, also look for operator methods.
If the protocol requires a class, non-classes are a non-starter.
If the type is a type variable itself, don't permit the binding.
If there are other users to the box value address then bail out.
If there is no next available integer key, no value is appended.
If there was more than one uppercase letter, this is an acronym.
If there were no spare bits in this part, it has nothing to add.
If there's no Objective-C runtime, we have to do this ourselves.
If there's only one no-payload case, we can jump to it directly.
If these functions are called we cannot elide the inlined frame.
If this fails, it's because we didn't lay out padding correctly.
If this instruction is in a dead region, don't report the error.
If this is a CopyAddr, verify that the element type is loadable.
If this is a reference type a specialized type, form a TypeExpr.
If this is a release or dealloc_stack, then remember it as such.
If this is an allocation of an unrelated object, just ignore it.
If this is an argument, attach it to the current function scope.
If this is the only breakpoint on this line, unregister the line
If this isn't the name of an Objective-C collection, we're done.
If this starts with cmpxchg, we have special suffixes to handle.
If this wasn't type checked correctly then don't worry about it.
If we already checked the inheritance clause, don't do so again.
If we already found a candidate without a fix, we can't do this.
If we already have an rvalue, we're done, otherwise emit a load.
If we are drawing this AA, then redraw the border with AA lines.
If we are in XenonForceAlwaysOn, do not clear the Surprise flag.
If we aren't allowed to have a class requirement here, complain.
If we delayed emitting this function previously, we need it now.
If we didn't evaluate into the initialization buffer, do so now.
If we didn't find the first word in the name at all, we're done.
If we didn't reach RCIdentityBB, keep processing up the DomTree.
If we ever reach an unreachable point, stop emitting statements.
If we find a member, then all of the results aren't non-members.
If we found a non-implicit declaration, use its source location.
If we found any names of overridden methods, return those names.
If we hadn't removed anything before, this is the first removal.
If we have a local name for the parameter, pass in that as well.
If we have a non-local id, just return the parent region's data.
If we have a parent type, we need to build a compound type repr.
If we have an existing function, verify that the types match up.
If we have any non SEI, TEI instruction, don't do anything here.
If we have locations for the parens, then they define our range.
If we haven't seen anything significant, avoid useless hoisting.
If we hit the end of line, then zap whitespace leading up to it.
If we imported a submodule, import the top-level module as well.
If we're in a DoCatchStmt and at a 'catch', don't add an indent.
If we're looking up a dependent type, we can't cache the result.
If we've found a 'throw', record it and terminate the traversal.
If we've seen a declaration with this signature before, note it.
Ignore entries for instructions that got expanded along the way.
Ignore these, we'll get to them when we walk the parameter list.
In PGO mode, we free all the profiling data once the TC is full.
Infer associated type witnesses for the given value requirement.
Initialize the AvailSet and AvailVal of the current basic block.
Instructions in the dead block may be used by other dead blocks.
Instructs the JNI environment to throw an IllegalStateException.
Invalidation is handled by a callback inside the cast optimizer.
Invariant: All elements at even indices are operator references.
Invoke the boost command line parser to parse the args for HHVM.
It's type needs to be convertible to the function's return type.
Iterate on the antIn/antOut states until we reach a fixed point.
Just fill in null here if the type can't be statically laid out.
Keeps track of what blocks we change the terminator instruction.
Limit the error using transfer function set by init_error_limit.
Literal exprs are contextually typed, so store them off as well.
Local function that actually emits the dynamic member reference.
Local function that recurses on the given set of type variables.
Local function to handle the parsing of the base name + context.
Look at all users of agg and see if we can simplify any of them.
Look at the get_element calls and match them to values by index.
Look at the protocols to see what representation is appropriate.
Lower the witness type with the requirement's abstraction level.
Make sure that setcc with no xor doesn't cause a buffer overrun.
Make sure we get consistent overrides for the accessors as well.
Make sure we've resolved implicit constructors, if we need them.
Map case values to Labels, filling in the blanks as appropriate.
Map of field names to symbols of custom scanners for that field.
Mark the async function as succeeded and store the return value.
Merge one FrameState into another, returning whether it changed.
Merge the trailing where clause into the generic parameter list.
Metadata for Clang types should be uniqued like foreign classes.
Might be possible to only merge a TArrE, but for now this is ok.
MongoTimestamp (17) 8 bytes total: - sec: 4 bytes - inc: 4 bytes
NB this routine will return a single null entry for a blank line
NB: this function can't yet be used for unset or isset contexts.
Not missing because filtered out, assume the value is too large.
Nothing to do for this profiler since all work is done as we go.
Of course, such / a vector couldn't be passed to 'satisfiesAll'.
Ok, it is legal for us to sink this increment to our successors.
Okay, everything else should be forwarded, build the expression.
Only do that here if we can't move the store to the error block.
Only qualified lookup ever finds anything in the builtin module.
Optimize `region's retranslation chain rooted at block `rootId'.
Or kill it and reset the return value if the ping somehow failed
OrdStr depends on a string as input for its vasm implementation.
Ordinary Gen values with a known DataType only get one register.
Other branch instructions send the same state to all successors.
Other representations are reserved for future use by the stdlib.
Other uses of the container are considered escapes of the value.
Otherwise emit a diagnosis error and set ResultsInError to true.
Otherwise, it's postfix if left-bound and prefix if right-bound.
Otherwise, splice it in to the parameters at the right position.
Otherwise, this attribute cannot be applied to this declaration.
Otherwise, update the ref count state given the guaranteed user.
Otherwise, we evaluate it once and store it in an unnamed local.
Perform peephole simplification at instruction `i' of block `b'.
Plan the emission of a call result from an inner result address.
Plan the emission of a call result into an outer result address.
Preincrement the iterator to avoid invalidation and out trouble.
Project the ownership semantics of 'self' to the super argument.
Promote select_enum_addr to select_enum if the enum is loadable.
Promote switch_enum_addr to switch_enum if the enum is loadable.
Propagate the concrete type into the callee-operand if required.
Pseudo-functions for (de-)allocating array buffers on the stack.
Push an empty string, so that we at least have an xslt result...
Re-register the object with the cache to update its memory cost.
Reallocate a file section returns 0 on success and -1 on failure
Recursively check that the uses of the instruction don't escape.
Regenerate all prologues of func that were previously generated.
Register the new block as the start of the postmatter if needed.
Register with the active ConditionalDominanceScope if necessary.
Reject use of "T.dynamicType", it should be written as "T.self".
Relational constraints: break out to look for types above/below.
Remember where we started so that we can find the comment range.
Rename the method and create a new method with the original name
Replace debug_value_addr with debug_value of the promoted value.
Replace dependent types with their archetypes or concrete types.
Replace the archetypes with their corresponding dependent types.
Resolve a (non-type) witness via default definition or optional.
Results should be checked in case we process a conditional case.
RetainCodeMotionContext - Context to perform retain code motion.
Retrieve the type of the property that is implied by the getter.
Return a new instruction and do not erase the old / instruction.
Return a value for an optional ".Some(x)" of the specified type.
Return the / instruction with the unexpected use if we find one.
Return true if the array satisfies requirement on the ArraySpec.
Returns the empty string if the input doesn't match that format.
Returns the source range which should be refined by declaration.
Returns the truncated result, and the number of bytes truncated.
Returns true if this attribute can appear on the specified decl.
Revert all of the types within the signature of the constructor.
Round Integer-Of-Unusual-Size types up to their allocation size.
Save the duplicated instructions in case we need to remove them.
Save the position, write the index, restore position (paranoia).
Scan the function / and remove in-block usage of the AllocStack.
Scan to see if we have a disjunction constraint for this callee.
See if we already have a version of this function in the module.
See whether we have a deferred fixed-size buffer initialization.
Set non-empty errno if afdt_send_fd_msg doesn't set one on error
Set of arguments that need to be released after each invocation.
Set the primary file to the code-completion point if one exists.
Set up an optional-failure scope (which cannot actually return).
Simple tuple-like class used to order instructions for printing.
Since major is a function on SVR4, we cannot use `ifndef major'.
Since we don't add the type, also don't add the space after ':'.
Some constant users may indirectly cause folding of their users.
Some server commands pre-formatted texts with color for clients.
Sometimes in the stdlib due to hand offs, we will see code like:
Sort imported declarations in source order *within a submodule*.
Sort the combined samples, then copy the top hits back into `l'.
Split any critical edges in between exiting block and succ iter.
Split the base name after the last preposition, if there is one.
Stop the scan if we've reached the highest level of side effect.
Struct and enum constructors do everything in a single function.
Structure to hold cache meta data Same definition in ext_apc.cpp
Structure to save state of computation between the single steps.
Swift native classes never have a tagged-pointer representation.
Swift restriction: init methods must start with the word "init".
Switch to the interpreter before even beginning the instruction.
THOUGHT:  It would be nice if, rather than having things like...
TODO handle conflict with FORM auth and anything but POST or PUT
TODO: Replace this with a check on the computed subseq relation.
TODO: This is where we'd plug in some global algorithms someday.
TODO: clang puts this in __TEXT,__objc_methname,cstring_literals
TODO: clang puts this in __TEXT,__objc_methtype,cstring_literals
TODO: we can avoid creating entries for some obvious cases here.
Tell the inner variant to skip the nesting check for data inside
The GenericTypeParamDecls might be from a different module file.
The SIL type encodes conventions according to the original type.
The XML context is owned by the native data attached to 'this_'.
The call to super.init has to either be an apply or a try_apply.
The caller / handles this case and does recovery as appropriate.
The context field of a thick function is a Builtin.NativeObject.
The distance can be zero due to the "with" transformation above.
The exact naming is Y'CbCr, following the ITU-R BT.601 standard.
The existential conforms to AnyObject if it's class-constrained.
The first instruction of the exit-block is part of the frontier.
The following comes from malloc_extension.cc in google-perftools
The function/enum case must be callable with the given argument.
The initializer is its own entity whose context is the variable.
The next instruction after the last use is part of the frontier.
The offset will always be the same for converting to title case.
The output stack uses the rest of htab, and contains characters.
The parameter must reference dereferenceable memory of the type.
The prologues are sorted in ascending order of profile counters.
The result has ownership semantics, so retain it with a cleanup.
The source string contains an ill-formed subsequence at the end.
The store to pointer is not used along any path to program exit.
The type expansion analysis we will use during all computations.
Then we check the options array that could overwrite the default
There are only two distinct booleans - false and true (0 and 1).
There must not already be a class method with the same selector.
These instructions can only get at tvRef when given it as a src.
These instructions do read or write memory, get memory accessed.
These instructions never load tvRef, but they might store to it.
These strings should stay in sync with the types in type-scan.h.
They still can't be captured without doing unsafe stuff, though.
This allows operations with underscores in them, like "icmp_eq".
This also enforces that SIL bodies can only be at the top level.
This disambiguates the dynamic uncertainty with a runtime check.
This does not affect correctness, but it's worth being aware of.
This doesn't copy them yet, but will do COW if they are modified
This file hasn't been included yet, so we need to parse the file
This file implements IR generation for archetype types in Swift.
This file implements IR generation for type metadata constructs.
This file implements IR generation for value witnesses in Swift.
This file implements constraint generation for the type checker.
This file implements the availability specification AST classes.
This function changes any boxed local into a BoxedInitCell type.
This includes uses of objects where the allocation is stored to.
This instruction may release something, bail out conservatively.
This is a hack for callers that don't have access to the module.
This is a separate function so that it shows up in stack traces.
This is borrowed from FreeBSD's strndup.c, with minor CS changes
This is not supported since nominal types cannot capture values.
This is the same check that PHP5 performs, no validation needed.
This is well-typed but may cause code to be emitted redundantly.
This may be the first character of a range, so don't add it yet.
This would just cause a confusing definite initialization error.
To do so would force the type variable to be adjacent to itself.
To tell whether a property is declared as private in the context
Track the stack depth while emitting to determine maxStackDepth.
Translate LLVM function attributes to Swift function attributes.
True if the global stored property requires lazy initialization.
Try to classify the dynamic-cast relationship between two types.
Try to find a better dominating 'open' for the i-th instruction.
Try to find the location of the 'var' so we can produce a fixit.
Uncounted are not ref counted but will be deleted at some point.
Unknown sub-block, which this version of the compiler won't use.
Unlink the predecessors and redirect the incoming pointsTo edge.
Unqualified lookup can find operator names within nominal types.
Update `region' based on the optimization result in `blockData'.
Update the active and inactive lists for the start of `current'.
Value users - this happens if we start with a value object in V.
Verify that the adjacency map/vector haven't gotten out of sync.
Verify that the extra inhabitant representations are consistent.
Visit all blocks reachable from the entry block of the function.
Walk all dom tree children of Root, inspecting their successors.
Walk into parenthesized expressions to update the subexpression.
Walk the type recursively to look for substitutions we may need.
We already provided a definitive completion--nothing else to do.
We also decrement ArgOffset since we have one less argument now.
We assume that / Start and End are both in the same basic block.
We assume that Start and End / are both in the same basic block.
We assume that Start and End are both in the / same basic block.
We can't build SSA for method values that lower to objc methods.
We can't move retains before them and they aren't "interesting".
We could in theory handle assembly or LLVM input, but let's not.
We couldn't resolve the locator to a declaration, so we're done.
We do not create a retain if this ApplyInst is a self-recursion.
We don't care about source ranges on implicitly-generated decls.
We don't currently do anything different for nullsafe query ops.
We found this declaration via dynamic lookup, record it as such.
We know that V1 is a GEP, but we don't know anything about / V2.
We need to produce the value at +1 if it's going to be consumed.
We need to throw an exception, so this needs to be sent manually
We only consider the argument effects if the argument aliases V.
We only know how to hoist inout, owned or guaranteed parameters.
We should explicitly add the swift AA pass after the other ones.
We use this to compute whether classes are defined at top-level.
We will need a phi at this block if we want to reuse this value.
We'll allocate it in the request local rds::s_constants instead.
We've changed the pre-header and invalidated the dominator tree.
We've strengthened the bound, so update superclass conformances.
When gd 1.x was first created, floating point was to be avoided.
When looking at the current node, of course we want to enter it.
When regions exactly overlap, the parent is less than the child.
When the base is a tuple rvalue, the member is always an rvalue.
When the base of a tuple lvalue, the member is always an lvalue.
Whether there is a range that includes `pos', or a use at `pos'.
Wrap a type in the Optional type appropriate to the import kind.
Wrappers for generating test cases for various addressing modes.
accept the rare collision on keys (requires probe collision too)
all remaining bits on the current unsigned char are set to zero.
avoid div by 0 Print contents of all blocks in pure text format.
break down type that "contains" other types and check them each.
cast_or_null tests Bad types should throw, null pointers are ok.
convert_function is required to be an ABI-compatible conversion.
destructors of value types always have an implicitly inout self.
else we've reached the end of the enum, nothing more is required
ensure that if we clear any spill frame bits, we clear them all.
freewbmp -------- gdFrees up memory occupied by a WBMP structure
gd_putout --------- Wrapper around gdPutC for use with writewbmp
if fg is specified by a negative color idx, then don't antialias
if it does not, return None so we keep searching up the domtree.
isa and enum-element patterns are refutable, at least in theory.
ldimmb is for Vconst::Byte, which is treated as unsigned uint8_t
lhs contains the encoding rhs, if it exists, contains the qvalue
methods (object oriented style) and functions (procedural style)
pad with zero bits to complete (N*WBLOCKBITS - LENGTHBITS) bits:
re-enqueue changed scopes, regardless of rescheduling exception.
return value of function types is the first element of type list
s_saved_defaults should be clear at the beginning of any request
string_data_hash and string_data_same both crash/assert on null.
support windows drive letters as in: file:///c:/somedir/file.txt
the fully qualified name for this function exists, nothing to do
the print helpers decref their arg, so don't decref pop'ed value
there are cases where the length reported by mysql is too short.
there is a race condition in the first call to makeStaticString.
throws on context depth level overflows and cross-context cycles
tuple_element_addr P, 42 indexes into the current tuple element.
we dont support V in M-vectors, so leave it as an R in that case
we need to determine if the enclosure is 'real' or is it escaped
we run the data flow for the last iteration and perform the DSE.
y_width: width of the Y image plane (aka image width) Output: 5.
"identifier ':' for/while/do/switch" is a label on a loop/switch.
'case' and 'default' are only valid at the top level of a switch.
'exit' has the same effect as crashing but without the crash log.
(A Sig node may be a predecessor of the same Phi more than once.)
(As the array type table itself is not associated with any unit.)
/ / Every basic block keeps a map between LSLocation and LSValue.
/ / Return true if the instruction destroys the value at Address.
/ / This also does some trivial peep-hole optimizations as we go.
/ Destroys the stream position if the next entry is not a record.
/ Returns true if the return block is reachable, false otherwise.
/ The sequence is traversed starting from the load / instruction.
/ The unsubstituted result must be naturally returned indirectly.
/ These are used to ensure that we don't issue duplicate reports.
/ This is very useful for certain classes of variant diagnostics.
/ We always want a void function returning a tuple _instruction_.
2) Loads of the box, which have uses of self hanging off of them.
3/  The modified instruction does not cross a cacheline boundary.
A CRTP helper class for loadable but non-trivial aggregate types.
A TypeAliasDecl might have type set, but not the underlying type.
A call to _allocateUninitialized has the count as first argument.
A dynamic_method_br passes the function to the first basic block.
A good example of a control flow op that invokes PHP is IterNext.
A mapping from requirements to the set of matches with witnesses.
A visitor class for emitting a reference to a type layout struct.
According to c-client docs (internal.txt) this shouldn't be used.
Actually, the input type is either a single type or a tuple type.
Add the new allocations to the worklist for recursive processing.
Add the phi use of `r' at `pos' to the phi group given by `pgid'.
Add the result to the phi, creating it (unparented) if necessary.
Advance the address point to the end of the private storage area.
All things equal, we can merge the tyvars for the function types.
Allocate enough space to cache all possible timezones, if needed.
As long as DefInlineFP exists, FramePtr SSATmps aren't truly SSA.
As specializations are created, the attributes should be removed.
As stated above, layout is a description of a particular scanner.
Ask the runtime to set up the metadata record for a dynamic enum.
Ask whether Builtin.UnknownObject uses native reference counting.
Assign fixed types to the type variables solved by this solution.
At a first sight, a 100 rows at a time seemed a good start point.
At least one value feeding the specified SILArgument is a Struct.
Avoid running PHP code when exception from destructor is pending.
Bail out so the general ambiguity diagnosing logic can handle it.
Base the plan on whether the single result is direct or indirect.
Before the memory allocation, store zero in the control variable.
Break the inheritance cycle for an enum by removing its raw type.
Bug 17545 - segfault when zval_dtor is attempted on this argument
Build an initialization which recursively destructures the tuple.
Callers depending on fields of this structure will probably fail.
Cast a value into the expected, ABI compatible type if necessary.
Catch nested types and emit their definitions /after/ this class.
Certain llvm intrinsic require constant values as their operands.
Changes that we wish to apply to a row which we have specialized.
Check if the next expected diagnostic should be in the same line.
Check whether any of the substitutions are refer to dynamic self.
Check whether this literal type conforms to the builtin protocol.
Clang extensions (categories) are always printed in source order.
Class values are currently never metatypes in the native runtime.
Closure classes must be defined before anything else in the Unit.
Coerce the input to whatever type is specified by the CoerceExpr.
Collect any concrete type metadata that's been passed separately.
CompilerInvocation doesn't own the buffers, copy to a new buffer.
Compute the cost of the best entry if we haven't done so already.
Compute the requirement and witness types we'll use for matching.
Compute true coordinates of update box's upper corner and center.
Constructors with stub implementations cannot be called in Swift.
Contains function calls in the loop, which only read from memory.
Create a PatternBindingDecl to bind the expression into the decl.
Create a generic parameter list with multiple generic parameters.
Create a new StaticFunction corresponding to the given SIL value.
Create a set of type substitutions for all known associated type.
Create all the blocks up front, so we can set up our switch_enum.
Create the end dest first so that the loop dest comes in-between.
Create the swift_initStackObject function and all required types.
Creates the external declaration for swift_bufferAllocateOnStack.
Currently there are no operator attributes for postfix operators.
Deallocations and retain/release don't affect the value directly.
Declarations are always accessible externally, so they are alive.
Deserialize all VTables inside the module and add them to SILMod.
Destructors need to be collected into the instance methods / list
Determine if we are doing code completion inside a static method.
Determine the declaration selected for this overloaded reference.
Determine the liveness states of the elements that we care about.
Do it now so the printDeclPre callback happens after the newline.
Do not try to enumerate if we are not hoisting epilogue releases.
Don't generate a descriptor for a property without any accessors.
Don't worry about commands that finished or weren't going to run.
Due to NaN only equality comparisons with doubles can be negated.
Dumps the alias relations between all instructions of a function.
Dumps the side-effect information of all functions in the module.
Either node may be an NT::Phi, but the new node may not be a Phi.
Eliminate local copies of either address-only or reference types.
Emit a branch to the return block and set the insert point there.
Emit a call into the runtime to get the current enum payload tag.
Emit a call to the type metadata accessor for the given function.
Emit a default witness table for a resilient protocol definition.
Emit the body of a case statement at the current insertion point.
Emit the body of a metadata accessor function for the given type.
Emit the type layout by projecting it from dynamic type metadata.
Enter a fresh default-argument context with a meaningless parent.
Entries can be added or removed from either list during sweeping.
ErrorProtocol always has a single-ObjC-refcounted representation.
Evaled units have a footprint in the TC and translation metadata.
Everything colliding in that regard is assumed to possibly alias.
Expose TypeChecker's handling of GenericParamList to SIL parsing.
Extract 'self' if it needs to be passed as the context parameter.
Extract the next path component and adjust `left' and its length.
FIXME: And there are more compact ways to encode a 16-byte value.
FIXME: Banned for operator parameters, like user conversions are.
FIXME: Build a superclass conformance if the superclass conforms.
FIXME: Context params should be independent of the function type.
FIXME: Do something more clever based on the decl's mangled name.
FIXME: Do the print-completions-below-the-prompt thing bash does.
FIXME: It'd be nice not to have to call through the runtime here.
FIXME: Iterating over LoadedModules is not a good way to do this.
FIXME: Somewhat duplicated from Implementation::importAttributes.
FIXME: Upcasts between existential metatypes are not handled yet.
FIXME: We need to be passing the buffers from the open documents.
FIXME: getting attributes here without setting them does nothing.
FIXME: some locale free implementation is really required here,,,
FIXME: we need a more uniform way to handle operator completions.
Fall though from the currently active block into the given block.
Fast case sensitive comparison, unrolled to do 8 bytes at a time.
Favor an UnsafeMutablePointer-to-UnsafeMutablePointer conversion.
Figure out the declaration context to use when opening this type.
Fill the inverse-colormap entries in the update box that contains
Find a dominating checked_cast_br, which performs the same check.
Finish the check for one value being a non-escaping local object.
First make sure that IncomingEdgeBB dominates NonPayloadedEnumBB.
Fixed-size enums don't need dynamic witness table initialization.
For Swift classes, get the method implementation from the vtable.
For an unconditional dynamic cast, use forceBridgeFromObjectiveC.
For debugging, count how many times basic blocks get interpreted.
For each request, make sure we start with the default error code.
For every block, add edges to reachable fault and catch handlers.
For literal we disregard RuntimeOption::AlwaysPopulateRawPostData
For optional reference results, a nil value is normally an error.
For repo mode, where trait methods are flattened at compile-time.
For these definded in php fopen but C stream have different modes
From here on out, we're creating a new class to hold the closure.
Function: gdImageThresholdCrop Crop an image using a given color.
Functions have reference semantics, but are not class references.
Functions that use ICU to do unicode normalization and collation.
Generate a getter only if there are any loads from this variable.
Get and validate the ordering arguments, which are both required.
Get information about a potential select_value case (or default).
Get the fp and pc of the top frame (possibly skipping one frame).
Get the subcommand name and remove it from the program arguments.
Given a metatype pointer, produce the value-witness table for it.
Given that a method returns a CF type, infer its method / family.
Handle C pointer arguments imported as indirect `self` arguments.
Handle initializers, they have their own approach to name lookup.
HasFallthroughTo - True if there is a fallthrough into this case.
Helper function to perform SSA updates in case of jump threading.
Hold onto the original payload, so we can pass it on as the copy.
If Ptr is refcounted itself, create the strong_retain and return.
If a thread doesn't stop, return false so we can try again later.
If any of the protocols are class-bound, then it must be a class.
If captured directly, the variable is captured by box or pointer.
If edge is critical, split it by inserting an intermediate block.
If it returns false, we just skip entering subnodes of this tree.
If it's present, apply the recursive transformation to the value.
If left bound but not right bound, handle some likely situations.
If not null, *rve is set to point to the end of the return value.
If not, return a default-constructed instance of f's return type.
If so advance the state's sequence appropriately and return true.
If someone really wants to use them they can write them directly.
If that successfully emitted into the initialization, we're done.
If the block has a cond_fail, try to move it to the predecessors.
If the block isn't empty, check if we need to create a new block.
If the builtin is side effect free, then it can only read memory.
If the class requirement was not the first requirement, complain.
If the conformance is dependent in any way, we need to unique it.
If the destination is a class, walk the supertypes of the source.
If the expression was deemed "too complex", stop now and salvage.
If the index is 0xffff, then there are no nodes for the property.
If the input is a native type with a bridged mapping, convert it.
If the original type was an archetype, check the conformance map.
If the property name is known, try to look it up and get its RAT.
If the requirement is settable and the witness is not, reject it.
If the source and destination types match, there's nothing to do.
If the source type is existential, project out the class pointer.
If the type is dependent, substitute it into our current context.
If the type isn't a leaf type, also check it as an inexact match.
If the value is an ObjC tagged pointer, pass it through verbatim.
If there are extra inhabitants, see whether the payload is valid.
If there are null bytes in the path, treat it as the empty string
If there aren't any generic parameters at this level, we're done.
If there is a single constraint, this isn't a disjunction at all.
If there is no corresponding parameter, there is nothing to omit.
If there is only one case (the fall-through case) then we're done
If there's a listener, notify it that we've applied the solution.
If there's only one case to test, do a simple compare and branch.
If this fails (picked up above) we advance to the next character.
If this is a VarDecl, then add it to our list of things to track.
If this is a method application, produce a nice, specific, error.
If this is an expr-basic, then a trailing closure is not allowed.
If this is not a nominal kind and Other is nominal, return false.
If this succeeds, the caller will be responsible for clearing it.
If this was a negative number, record that and strip off the '-'.
If we can't find it, diagnose and then just don't store anything.
If we don't have a witness table list, we can't look anything up.
If we don't have attributes, then it cannot be an accessor block.
If we have already seen it, then don't reprocess all of the uses.
If we have an absolute or relative path, just try to load it now.
If we have extra tag bits, pack the remaining tag bits into them.
If we have more than 2 predecessors, we do not have a pre-header.
If we passed the last concat, just append the remaining bytecode.
If we require a dynamic allocation of the object here, do so now.
If we see a tuple-to-tuple conversion that succeeded, we're done.
If we're default-initializing this member, there's nothing to do.
If we're monomorphic, we'll emit a check for that specific Shape.
If we're not in immediate mode, pick up inputs via the -- option.
If we're supposed to create a varargs array with the rest, do so.
If we're using the scalar strategy, handle the consumption rules.
If we're working with non-optional types, we're forcing the cast.
Implicit InOutExpr's are allowed in the base of a subscript expr.
In "x.y", this returns the expr for x and the source range for y.
In a similar way to fb_setprofile storing in m_setprofileCallback
In all those cases we can walk them via the pattern binding decl.
In most conditions, this will be optimized out by the simplifier.
In our recursive parse, remember that we're in a var/let pattern.
Informs the client of all strings that may follow a list command.
Init information about the checked_cast_br we try to jump-thread.
Inner generic parameter of the requirement -- fall through below.
Instructions that can re-enter the VM and touch most heap things.
Internal builds embed tzdata into HHVM by keeping timelib updated
Introduce a new scope to contain any var decls in the init value.
Invariants:  All arrays are either in a mode, or in zombie state.
Just ignore the call result if we're suppressing the error check.
Kill the existing lowered value for the bb arg and its phi nodes.
Last operand is the metatype that should be used for dispatching.
Load the 'stride' value witness from the given table as a size_t.
Load the existing storage and store it into the 'tmp1' temporary.
Local function to compute the default type of an associated type.
Local function used to infer requirements from the extended type.
Look for a member type with the same name as the associated type.
Lower raw-sil only instructions used by this pass, like "assign".
Make sure that solution is better than any of the other solutions
Make sure that we decided to emit its body the first time around.
Make sure the terminal color gets restored when the REPL is quit.
Make sure we have a single GlobalAddrInst and a single StoreInst.
Make the constructor transparent so we inline it away completely.
Making this larger will sacrifice a modest amount of performance.
Manually create the IO context to support custom stream wrappers.
Map an array to a hoisted make_mutable call for the current loop.
Map some rows of pixels to the output colormapped representation.
Map the generic parameters to their corresponding type variables.
Maps from BlockIds to accumulated post conditions for that block.
Mark all outgoing arcs from the region to a head node as covered.
Mark any block that this pass has determined to be inside a loop.
Mark this node as part of this connected component, then recurse.
Match the actual induction variable buried in the integer struct.
Maximum number tries for in-range result before just returning 0.
Modify should only ever be called once with a non-null new_value.
No E box is used, as it's replaced by some ANDs, shifts, and ORs.
No explicitly defined function, no __call() magic method Give up.
No-payload cases are represented with the remaining payload tags.
Note that we have already claimed an argument with the same name.
Note: m_methods includes methods from parents/traits recursively.
Now that definite initialization / checking is done, remove them.
Now that we have a boolean test as a Builtin.i1, emit the branch.
Now, match from the first word up until the end of the type name.
On failure, the calling function is responsible for disconnecting
Once the parser handles this correctly, the R and C cases can go.
One entry in the log, representing a function enter or exit event
Only allow allocation of Decls using the allocator in ASTContext.
Only allow allocation of Types using the allocator in ASTContext.
Only used for phi nodes, to avoid processing them more than once.
Opaque existential containers uniquely own their contained value.
Ordinary non-builtin object subclass, or IDL-style native object.
Otherwise emit the appropriate diagnostic and set ResultsInError.
Otherwise ties are broken by biased rounding (add half and chop).
Otherwise, ask the runtime to extract the dynamically-placed tag.
Otherwise, boolean true is returned if the document is not empty.
Otherwise, conservatively stick it at the beginning of the block.
Otherwise, emit the uncurried arguments now and perform the call.
Otherwise, just emit the injected value directly into the result.
Otherwise, the other part of the discriminator is in the payload.
Otherwise, true is returned and / the safe arrays can be queried.
Otherwise, we have a common base and perhaps some common subpath.
Our custom signal handler that calls the appropriate php_function
Paren, Typed, and Var patterns are noops, just look through them.
Parse optional inheritance clause within the context of the enum.
Perform all the bindings necessary to emit the given declaration.
Perform subtype check on the possibly-bridged-through value type.
Plan to leave the tuple elements as a single direct outer result.
Pointer arguments can be converted from pointer-compatible types.
Populate the generator's value with retval to support `getReturn`
Preset error values: no error propagated to first pixel from left
Process the base classes first to maintain rough offset ordering.
Produce a singular RValue for a load from the specified property.
Propagate constants into closures and convert to static dispatch.
Pull SIMD types of size 2...4 from the SIMD module, if it exists.
Push an extra zero index node for a store to noninterior address.
Quasi-lexicographic order: string length first, then string data.
Read a lookahead token if we need one and don't already have one.
Really no point optimizing here as there is no forwardable loads.
Record that we want to emit its body, and add it to the worklist.
Recursively resolve the associated types to their concrete types.
Reference cast from representations with single pointer low bits.
Remove any shadowed declarations from the found-declarations set.
Remove runtime asserts such as overflow checks and bounds checks.
Remove the matching isNativeTypeChecked and check_subscript call.
Replace the call with a call to the regular swift_bufferAllocate.
Replacing a copy with a destroy+init is not by itself profitable.
Resolve path relatively to state and put the real path into state
Resolve the inheritance clauses for each of the associated types.
Restore the error reporting level and then either return or throw
Restore the previous active count in the active-selector mapping.
Results: Returns non-zero if the character matches the given set.
Retrieve and sort all of the base names in this particular table.
Retrieve the node for the representative that we're merging into.
Return YYSIZE_MAXIMUM if overflow occurs during size calculation.
Return the number of days between jan 01 1601 and jan 01 of year.
Return the number of rvalue elements in the given canonical type.
Returns true if we completely accounted for removing the support.
Scan ahead until we / find and end-curly-quote (or straight one).
Search for the inherited conformance among our immediate parents.
Second, we propagate the use-point information through the graph.
Set a bit in the control variable at the current insertion point.
Set m_nextKI to 0 for now to prepare for renumbering integer keys
Set the store bit for stack slot deallocated in this basic block.
Set up the code completion consumer to pass results to organizer.
Setup server-side usage logging before accepting any connections.
Short-circuit out if we already emitted the import for this decl.
Since we return to the entry of the function, reset the location.
Skip abstract methods, if the method already exists in the class.
Skip pattern bindings that consist of just one computed variable.
Skip the check for UnreachableInst, if explicitly asked to do so.
Slam that information directly into the generic arguments buffer.
Slower case: we have to load the src address from the targetcache
So fast path is never reached in that case (e.g. when debugging).
So its callee signature will be the same as its return signature.
So that we ignore them for upcoming checked_cast_br instructions.
So we need to patch it to avoid ppc64el unsuported address modes.
So we only want to turn on profiling if collection is now needed.
Some imported expressions don't have types, even in checked mode.
Sort the Objective-C selectors so we emit them in a stable order.
SortALlowedDirectories might add something and remove duplicates.
Special magic to handle inout exprs and tuples in argument lists.
Start by decomposing the input types into sets of tuple elements.
Start with / folding the operations used by the standard library.
State numbers can be reused once all the references are released.
Substitute a context archetype if we have context generic params.
TODO: Dynamic thunks could conceivably require reabstraction too.
TODO: Some convenient way to override the code if that's desired.
TODO: The noescape bit could be of interest to SIL optimizations.
Take from an indirect inner result into an outer indirect result.
Take the arguments for special processing, in place of the above.
Temporarily swap out the parser's current lexer with our new one.
That behavior is preserved when CookieDeduplicate is not enabled.
The ErrorProtocol existential has a special boxed representation.
The MUI must be used on a project_box or alloc_stack instruction.
The Variable whose (sub-)lifetime this (sub-)interval represents.
The archetype builder is associated with the canonical signature.
The argument of the dominating checked_cast_br's successor block.
The box is going away so we need to release the stored value now.
The branch may not be a Jmp, in which case there won't be a label
The call to the builtin should get removed before we reach IRGen.
The final two values in the list are the basic block identifiers.
The merge of deprecated and obsoleted versions takes the minimum.
The most general resilience scope where the enum type is visible.
The systemlib name must match the name used by the build process.
The two most common values for numExtraTagBytes are zero and one.
The typedecl of the base expression of the member ref expression.
The value can actually be a tuple if the / abstraction is opaque.
The web request may have timed out while we were waiting for I/O.
Then check if the required specialization can be found elsewhere.
Then communicates with the server to retrieve source information.
There may be only a single block whose predecessor we didn't see.
Therefore it is safe to make a negative decision at compile-time.
These are made visible to non-reentrant scanners for convenience.
These conventions don't require changes to the formal error type.
These conventions wrap the result type in a level of optionality.
These remaining instructions are ok and don't count as mutations.
They can all re-enter the VM and access arbitrary heap locations.
They'll only be visited if there are no other possible solutions.
Thin metatypes are empty, so they look like the empty tuple type.
This can happen if two threads were racing to create the counter.
This cannot happen on a top-level call, so AI should be non-null.
This case handles all types other than "array", "var" and "enum".
This closes and deletes the File associated with the given token.
This const version is static const in the compiled php extension.
This ensures that filters do not corrupt areas of constant color.
This file implements routines for working with extra inhabitants.
This file implements routines relating to declaration attributes.
This file implements the Substitution class and operations on it.
This file implements utilities associated with default arguments.
This happens, for example, with ambiguous OverloadedDeclRefExprs.
This is a metadata accessor for a fully substituted generic type.
This is for big-endian machines only, PPC and Sparc specifically.
This makes sure that the project_box dominates the partial_apply.
This may not / be the innermost declaration containing the range.
This pass collects the count of all instructions and reports them
This prevents potential ambiguities with trailing closure syntax.
This solution might be worse than the best solution found so far.
This way SILCombine will visit from the top of the function down.
This would happen if we delete the instruction it is pointing to.
Thus we check here / that no mutating struct_extract users exist.
TrackCPU means: prefer clock_gettime, but fall back to getrusage.
Transient state for the current Def valid during forwardCopiesOf.
Translate values and collect them into a single optional payload.
Treating this as a successful operation, turn a CMV into a +1 MV.
Try to convert indirect incoming parameters to direct parameters.
Try to sink values from each of the arguments to the basic block.
Turn off commits, because we don't want systemlib to get included
Turn the layouts into C++ code, writing to the specified ostream.
Unknown index kind, which this version of the compiler won't use.
Unmanaged types have the same spare bits as managed heap objects.
Unowned types have the same extra inhabitants as normal pointers.
Unresolved member syntax '.Element' forms an EnumElement pattern.
UnresolvedTypes propagated their unresolvedness to any witnesses.
Update it in the MaxAvailForwardSet of the / current basic block.
Update it in the genset and killset of the / current basic block.
Use a specialized diagnostic if we couldn't find any such member.
Use the generic type parameter types for an unbound generic type.
Verify that the constraint map/vector haven't gotten out of sync.
Verify we have a single integer, floating point, or pointer type.
VisitNodeFunction gets used for Function, Variable and Allocator:
Walk up the context stack to find the topmost applicable context.
Walks through address projections and (optionally) collects them.
We are going to add a new check instruction in front of the Load.
We can only get group information from deserialized module files.
We can only move instructions if we know that we are not partial.
We cannot code complete anything here -- we expect an identifier.
We couldn't import the member, so we can't reference it in Swift.
We create the set by / sorting, uniquing at the appropriate time.
We didn't find a visible declared property in this's property map
We don't know which parameter to the thunk was originally 'self'.
We have a debugger guard, so all jumps to us funnel through this.
We just cleared our BB State so we have no more possible effects.
We may have cached the fully resolved type in a previous request.
We need to expand and resolve all conformances to enumerate them.
We only have to do that if it's a type from another file, though.
We only populate s_funcIdToClassMap when EvalPerfDataMap is true.
We remember the applyinst as the super.init site, not the upcast.
We remove common factors of powers of 2 from relevant quantities.
We should have checked earlier that AI has an owned result value.
We simply return as a OF_CLASS with class name set to 'callable'.
We visit all instructions starting at the allocation instruction.
We want to break any ties in favor of green, then red, blue last.
We'll emit a Parent opcode because it can handle this error case.
We'll generate the getter and setter when we see their FuncDecls.
We'll reconstruct the support_map vector after merging each aset.
We're after the edited line range, let's test if we're synced up.
We're more likely to see new, modern headers added to OSServices.
When building the stdlib we intend to serialize unusual comments.
When the base of a "." expression is ignored, look at the member.
When there are no names, recover as if there were no parentheses.
When we return, we may need to adjust some loop condition counts.
When we're doing a function or method body, this state is active.
Write up generic parameters and check the generic parameter list.
YYTRANSLATE(YYLEX) -- Bison symbol number corresponding to YYLEX.
You can specify a range like 'a..z', it needs to be incrementing.
allocate storage for the parameter, keyed by its "canonical" name
and now go through the instructions in the block in reverse order
concrete classes should already have all of their methods present
const-cast is okay since we are not freeing the passed attribute.
copied from ProtocolConformanceRecord::getCanonicalTypeMetadata()
do nothing here, as everything will be collected by MemoryManager
end anonymous namespace / Skips a single record in the bitstream.
ensure that any reusable stubs are updated for the relocated code
fclose() should prevent this from being called on a closed stream
helper classes for setting/resetting globals within a method call
hopefully m_counters set is small, so a linear scan does not hurt
hphplex_destroy is for both reentrant and non-reentrant scanners.
i.e. a joint block with 1 predecessor being an unreachable block.
if allow_self_signed is set, make sure that verification succeeds
if we can't tell which redec class, then don't use the redec name
in any case, this disables it, and generates no code in O3 builds
increment the result length by how much we've added to the string
init_existential instruction used to initialize this alloc_stack.
inspectArgs contains addImage*Block function and the section name
invert the true/false parameters, as only the bp.bi field is used
isStriclyInteger() puts the int value in newVal as a side effect.
last character cannot be -, unless explicitly allowed by the user
ldimml is for Vconst::Long, which is treated as unsigned uint32_t
libbfd on cygwin is broken, stub dgettext to make linker unstupid
m_worker.wait is always safe to call from any thread at any time.
mark_uninitialized just becomes a noop, resolving to its operand.
movb r,r is a nop, however movl is not since it zeros upper bits.
negate the condition and swap t/f operands so we dont clobber i.t
new self() inside a trait or code statically not inside any class
not thread safe - needs a lock when called from the main process.
parseValueName - Parse a value name without a type available yet.
reads a line the socket , returns true on success, false on error
see implementation of RuleBasedBreakIterator::createBufferClone()
setlocale(): The implementation uses newlocale() and uselocale().
special case for main() frame that's only ended by endAllFrames()
store_weak doesn't take ownership of the input, so cancel it out.
we compute the max store set at the beginning of the basic block.
will clear all extra logging when this function goes out of scope
'--cc-args' separates swift-ide-test options from clang arguments.
'rethrows' functions are a subtype of ordinary 'throws' functions.
(Adapted from an algorithm from the comp.graphics.algorithms FAQ.)
-Ounchecked might also set removal of runtime asserts (cond_fail).
/    Those calls are lowered by the LLVM SwiftStackPromotion pass.
/ / - For global "lets", generate addressors that return by value.
/ / Dead store elimination (DSE) eliminates such stores by: / / 1.
/ / Generally, whether the parameter is +1 is handled before this.
/ / If the property is an override, we call the superclass setter.
/ / TODO: If this sticks around, maybe we'll make a BitMatrix ADT.
/ / The list of operations we constant fold might not be complete.
/ / This does not apply to addresses of elements within the array.
/ Used for viewing the callgraph as dot file with llvm::ViewGraph.
/ We always use the most overridden function to describe a method.
/ the returned constant will not actually be a relative reference.
0xff is legal padding, but if we get that many, something's wrong.
4 for slashes at start, after root, and at end, plus trailing null
A Use refers to the position where an interval is used or defined.
A class for finding the 'parent' index in a class metadata object.
A cond_fail is only alive if its (identifiable) producer is alive.
A fancier test would sometimes let us do this for larger i values.
A helper function that pulls an element off the front of an array.
A mock protocol descriptor with some default witnesses at the end.
A non-fragile function may not be inlined into a fragile function.
A result of trait flattening, as with the is_implements case above
Accessibility attr may only be used on value decls and extensions.
Add 2 to the loop variable because we can only scale by at most 8.
Add interface methods that the class may not have implemented yet.
Add opaque storage for bitfields spanning the given range of bits.
Adds conditional or watch clause to the breakpoint info if needed.
All alloc_ref instructions which allocate the object on the stack.
Also provides utility methods for creating the new empty function.
An inout parameter is +0 and guaranteed, but represents an lvalue.
Anything Clang imported is trivially representable in Objective-C.
Apply instructions that may read from memory can read the pin bit.
As the tile image can contain the same color as the color to fill.
Ask the lexer to interpret the entire string as a literal segment.
Assign a level number to each node in the post-dominator tree, and
Assume no promotion for string bases and promotion in other cases.
At this point, we are performing a partial dead store elimination.
Atomically compare-exchange a pointer to our vector into the slot.
Bind operator functions to the corresponding operator declaration.
Bridge retain may modify the input reference before forwarding it.
Build a Set of the keys that were present in all of the containers
Builds the type refinement hierarchy for the body of the function.
Can be overridden by subclassers to emit other dependent metadata.
Can't checkInvariants yet, since we haven't populated the payload.
Captured parameters are always appended to the function signature.
Change any aggregate loads into field loads + aggregate structure.
Check all of the designated initializers in the direct superclass.
Check if all the predecessors supply the same arguments to the BB.
Check if we have a consistent value for all non-cold predecessors.
Check to see if D and PrevDecl are valid in the same overload set.
Check whether we've already created a node for this type variable.
Checks if Start to End is the range of 0 to the count of an array.
Classify the given Clang enumeration to describe how to import it.
Cleanup the builder and return whether or not we made any changes.
Closures are implemented by anonymous classes that extend Closure.
Code mostly swiped from folly, but with significant modifications.
Collect the set of visible Objective-C methods with this selector.
Compute the message schedule according to FIPS 180-2:6.2.2 step 2.
Compute the message schedule according to FIPS 180-2:6.3.2 step 2.
Contains a map between RC roots to their index in the RCRootVault.
Convert to mixed, reserving space for at least `neededSize' elems.
Create a dummy Emitter, so it's possible to emit jump instructions
Create a nested array if there is more than one of the same header
Create a new Address corresponding to the given SIL address value.
Create a new extension for this nominal type/Clang submodule pair.
Create a writeback scope for the access to the existential lvalue.
Create an enum element by extracting the operand of a switch_enum.
Create the appropriate bitcast based on the source and dest types.
Currently only fixed-layout types should be known bitwise-takable.
Define the substituted function type for partial_apply's purposes.
Determine the effective Clang context for this Swift nominal type.
Determine the nominal type through which we found the declaration.
Determine the score between two potentially-matching declarations.
Determine the score when trying to match two identifiers together.
Determine whether this debug scope belongs to an explicit closure.
Determine whether this is a representable Objective-C object type.
Determine whether we have an imbalance in the number of optionals.
Determine whether we'll need to use an allocating constructor (vs.
Diagnose 'self.init' or 'super.init' nested in another expression.
Diagnose empty collection literals that lack context specifically.
Do nothing if the read location NoAlias with the current location.
Do salting for crypt() and friends, and XOR with the permuted key.
Do simplifications that require the dominator tree to be accurate.
Do some special-case code completion for the start of the pattern.
Do the simplification that requires both the dom and postdom tree.
Don't parse any function bodies except those that are transparent.
Dumps the expansions of memory locations accessed in the function.
Dup pushes a cell that is guaranteed to be not the last reference.
Emit a ConcatN if we hit the limit, or if we hit the final Concat.
Emit a call to do an 'initializeBufferWithCopyOfBuffer' operation.
Emit a call to do an 'initializeBufferWithTakeOfBuffer' operation.
Emit a materializeForSet operation that calls a mutable addressor.
Emit a type metadata reference without using an accessor function.
Emit only declarations if it is a module with pre-specializations.
Emit the condition bindings, branching to the bodyBB if they fail.
Evaluate the AsyncIterator object and store it into unnamed local.
Exists purely to mirror PHP5's invalid arg logic for this function
FIXME: Except for optionals, which get bit-packed into an integer.
FIXME: If we're not planning to run SILGen, this is wasted effort.
FIXME: Implement using AvailableAttr::getMinVersionAvailability().
FIXME: Largely copied from SILGenFunction::emitOptionalToOptional.
FIXME: This is a language change -- for now, keep the old behavior
FIXME: This is also computed when the constraint system is set up.
FIXME: this always chooses the first operator with the given name.
Fetch the declaration of the ivar initializer for the given class.
Figure out the type that's explicitly conforming to this protocol.
Figure out whether we need an explicit 'class' in the inheritance.
Find and dump the epilogue release instructions for the arguments.
Find the index of the argument corresponding to our partial apply.
Find the unsatisfied requirements with the nearest-matching names.
Finding an element not in the map would therefore never terminate.
First set ArgValue to a used albeit invalid, empty ArgumentSource.
For a getter or setter, go through the variable or subscript decl.
For a typed pattern, simply return the opened type of the pattern.
For a witness call, add the Self argument metadata arguments last.
For all other async functions, we leave m_retTypeConstraint empty.
For each of the partial solutions, subtract off the current score.
For hoisting bounds checks the block must dominate the exit block.
For multipart messages, the final newline belongs to the boundary.
For now we encode collections keys in m_refs using a null pointer.
For verbose output, print out each command as it begins execution.
Forbid redefining constants from interfaces, but not superclasses.
Function types are interchangeable if they're also ABI-compatible.
Gather the constraints affected by a change to this type variable.
Generic types are trickier, because they can require conformances.
Get a compatible Class, and add it to the list of defined classes.
Get a stack slot, looking through mark_uninitialized if necessary.
Get the aggregate member based on the top of the projection stack.
Get the next level projections based on current projection's type.
Get the simplified type of each element and rebuild the aggregate.
Get the type metadata from the ObjC class, which may be a wrapper.
Getting the dynamic type of a class doesn't require type metadata.
Given a substituted explosion, re-emit it as an unsubstituted one.
Go perform the resolution again now that we have more information.
Go through our sorted list creating new GEPs only when we need to.
Handle argument label mismatches when we have multiple candidates.
Handle builtin types by importing them and getting the Swift name.
Handle special case write when we're returning the entire transfer
Handle the leading byte, based on the number of bits in the value.
Helpers that diagnose failures when generic requirements mismatch.
However the methods are not declared in the core brotli libraries.
IMAGE_FILETYPE_JPEG2000 is a userland alias for IMAGE_FILETYPE_JPC
If "from" position is negative, count start position from the end.
If an error is signalled by a nil result, inject a non-nil result.
If it changes the PC, InterpOneCF will get us to the new location.
If it does, we need to / rerun the data flow to reach fixed point.
If it's not a local object we don't know anything about the value.
If knownCls is not null and is safe to use, that will be returned.
If no abstraction is required, try to honor the emission contexts.
If our payload has reference semantics, insert the strong release.
If right-hand side is a type variable, the constraint is unsolved.
If the Clang module is null, use the bridging header lookup table.
If the accessed field is stored, emit a StructExtract on the base.
If the base is a +1 r-value, just borrow it for materializeForSet.
If the base type isn't specialized, there's nothing to substitute.
If the conformance is resilient, we require runtime instantiation.
If the constraint represents a protocol, use the shorter mangling.
If the current ast context has no type checker, create one for it.
If the default case is unreachable, don't bother branching at all.
If the enum isn't fixed-layout, get the runtime to do this for us.
If the forward reference was of the wrong type, diagnose this now.
If the hint was the last in the parent context's chain, update it.
If the instruction is an alloc stack inst, add it to the worklist.
If the line doesn't contain any part of the range, then ignore it.
If the operator's precedence is lower than the minimum, stop here.
If the overridden method has a foreign error convention, adopt it.
If the platform doesn't use ObjC tagged pointers, we can go crazy.
If the shapes were nontrivial and equal, the specs would be equal.
If the type is floating-point, then we need to bitcast to integer.
If the types are already equivalent, we don't have to do anything.
If the value is always directly accessed from this context, do it.
If there are no abstraction changes, we can just forward normally.
If there is a name, check whether the kind of name is appropriate.
If there is a single viable candidate, form a substitution for it.
If there is a store (that must come after the phi), use its value.
If there is a subpattern, push the enum element type down onto it.
If there is a superclass bound, then obviously it must be a class.
If there is a value associated with this setting in the hdf config
If there's a semantic conversion necessary, do a load then assign.
If there's no abstraction difference, it's just returned directly.
If this instruction does not read or write memory, we can skip it.
If this is a computed variable, we don't need to do anything here.
If this is a memset/memcpy/memmove *to* the object, we can zap it.
If this is a method in a protocol, generate it as a protocol call.
If this is a simple property access, then we must have a conflict.
If this is an end curly quote, just diagnose it with a fixit hint.
If this is an inout marker in an argument list, consume the inout.
If this is not a SILArgument, maybe it is a part of a SILArgument.
If this is not a delegating constructor, emit member initializers.
If this is the script-mode file for the module, create a toplevel.
If this starts with atomicrmw, we have special suffixes to handle.
If this type is already immutable, it has no immutable superclass.
If this was Selector(("selector-name")), suppress, the diagnostic.
If this was built with forRethrowsArgument, return the expression.
If we are using Objective-C allocation, the caller can return nil.
If we are, no interesting information can be extracted, so bail...
If we cannot explode this value, handle callee release and return.
If we didn't manage to import the declaration context, we're done.
If we don't have to do any cleanup work, just exec the subprocess.
If we emit a deprecation diagnostic, produce a fixit hint as well.
If we enumerated any dependencies, we can't complete this request.
If we found an accessible method in cls's method table, return it.
If we got a cached negative response, check the generation number.
If we got a fully valid type, then this is a nominal type pattern.
If we have a bridged type, we found this declaration via bridging.
If we have a target anchor, build and simplify the target locator.
If we have not seen this color before, find nearest colormap entry
If we haven't seen this type result yet, add it to the result set.
If we hit a macro with invalid or predefined location, we're done.
If we merged blocks, there could be new optimization opportunities
If we see whitespace in the format, skip whitespace in the string.
If we're assigning to a discard, just emit the operand as ignored.
If we're at the bottom-most level, collect depthless requirements.
If we're missing the module we're shadowing, treat that specially.
If we've claimed all of the arguments, there's nothing more to do.
If we've collected more redundant cond_fails then remove them now.
If we've imported this variable as a member, it's a static member.
If we've started shutting down then don't start the transport job.
If you don't set returnSeen things relating to hoistability break.
Imported initializers also sometimes get "withFooBar: ()" clauses.
In addition, there are two forms of (non)-transparency for stores.
In command line mode, we want the xbox workers to output to STDOUT
In our recursive parse, remember that we're in a matching pattern.
In practice, we're probably looking for something recently pushed.
In the case of an exception, the VM unwinder will take care of it.
Informs the client of all strings that may follow a break command.
Initialize the +1 result buffer without taking the incoming value.
Initialize the parent-metadata field if it wasn't done statically.
Initializer for a let property of a class cannot exist externally.
Insert a new load from our source and bitcast that as appropriate.
Intentionally not returning, the exception is checked a line later
It also enables loop canonicalizations to be tested via FileCheck.
It doesn't matter if we ever actually clean up that retain though.
It is not always possible to fold an instruction in case of error.
It looks like php5 xdebug used to consider "temporary" as a state.
Iterate over all immediate predecessors of the target basic block.
Iterate through the region, checking its suitability for inlining.
Its subexpression should be convertible to a tuple (T.Element...).
Jump to the break label and free any pending iterators on the way.
Lazily declare the ObjC runtime base class for a Swift root class.
Leave the constraint around if the first variable is still opaque.
Let's see if we should serialize the body or just the declaration.
Look through one level of optional type, but remember that we did.
Make T1 the representative of T2, merging the equivalence classes.
Make a copy of the block list so it can be mutated by the visitor.
Make sure a 'let' property is only overridden by 'let' properties.
Make sure that any level 0 "default" line is last (if one exists).
Make sure that the OEA instruction has exactly two expected users.
Map EnumElementDecls to the EnumElement SILDeclRef of the element.
Mark the wait handle as failed due to unexpected abrupt interrupt.
Match an index pointer that is fed by a sizeof(T)*Distance offset.
Maybe this should also require the scalars to have a fixed offset.
Merge equivalence class from the non-representative type variable.
Merge the state from a predecessor block into the OutAvailability.
Metatypes are ABI-compatible if they have the same representation.
Move the old header to after the old latch as it is now the latch.
NB: parser assumes that the header has two bytes of NUL terminator
Need to store the direct results to the original indirect address.
NewInst can grow as this iterates, so we can't use a foreach loop.
No-op we are supposed to ignore the keys that we don't understand.
Not sure if this is correct (never seen float used in Exif format)
Note that this does not include the first operand (the condition).
Note that we can't just call m_expMap.erase(intptr_t(vpkey)) here.
Note that we cannot get a value of inout type as an lvalue though.
Note: this error case is easily tested, and we have a test for it.
Note: this stops any flow control command we might have in-flight.
Now get result of this (32 bytes) and add it to the other context.
Now get result of this (64 bytes) and add it to the other context.
Now mark all of these functions as public and remove their bodies.
Now that we have finished processing the loop, summarize the loop.
Null guard block for globals because we always punt on pseudomains
Obtain the protocol whose which should be used by the conformance.
Offset of the bytecode stack top relative to the IR stack pointer.
Offset of the callee's return value relative to the frame pointer.
Okay, the lowered type didn't change anything from the subst type.
Okay, the wrong number of arguments was used, complain about that.
Okay, this is the first time we've seen this instruction, proceed.
Only blend with different colors that aren't the dont_blend color.
Only use the new calling conventions on platforms that support it.
Open the type of the generic function or member of a generic type.
Optimize Copy-On-Write array checks based on high-level semantics.
Other types (i.e. Int and Double) must be handled outside of this.
Otherwise be conservative and return that the two types may alias.
Otherwise, add normal instructions to the worklist for processing.
Otherwise, call the memoized func, store the result, and return it
Otherwise, create it and remember that this is a forward reference
Otherwise, if this is a subscript, validate that covariance is ok.
Otherwise, it must match the corresponding expected argument type.
Otherwise, lowercasing will either be a no-op or we have ALL_CAPS.
Otherwise, the set of solutions will at least have been minimized.
Otherwise, use an indirect aggregate schema with our storage type.
Otherwise, we don't know if the current cast will succeed or fail.
Overwrite the passed-in value for subpatterns with an empty array.
PHP5 xdebug returns the top-level file if the callee is top-level.
Pack the service request args into a svcreq::ReqInfo on the stack.
Parse optional inheritance clause within the context of the class.
Pick a value witness table appropriate to the function convention.
Pointers to pointer followable types are enqueued inside scanners.
Poll a socket seeing if there is any input waiting to be received.
Precondition: Builder's current insertion block is not terminated.
Print a collection element type using Objective-C generics syntax.
Promote stack allocations to values and eliminate redundant loads.
Pull out the prospective RHS and slice off the first two elements.
Pushing for object method when we don't know the Func* statically.
Put socket in non-blocking mode so we can use poll() for timeouts.
Quickly determine if a debugger is attached to the current thread.
Record this as a conformance within the given declaration context.
Records any type/reffiness predictions we depend on in the region.
ReleaseCodeMotionContext - Context to perform release code motion.
Remove dead instructions by doing a traditional liveness analysis.
Remove llvm.ident that ClangCodeGen might have left in the module.
Remove the 'self' type from the given type, if it's a method type.
Remove the entry if its name or context does not match the filter.
Removes available pins that could be released by executing of 'I'.
Replace an application of a cast composition f_inverse(f(x)) by x.
Replace assert_configuration instructions by their constant value.
Replace the base type so we perform the appropriate subtype check.
Retrieve the instance type of the given Clang declaration context.
Retrieve the value witness corresponding to the given requirement.
Return a union type containing all the types in the argument list.
Return affected line range, which can later be more than one line.
Return the appropriate discriminator set for a closure expression.
Return the tuple: (the result (same as input), the overflow flag).
Return true if the instruction blocks the Ptr to be moved further.
Returns false if the instruction may change the size of any array.
Returns the callee of an apply_inst if it is basically inlineable.
Returns the sum of the weights of the arcs going from srcs to dst.
Returns true if the translation was relocated and false otherwise.
Reverse the args because cmpq can only have a constant in the LHS.
SOAP client calls this function to parse response from SOAP server
Save the storage property and the initStorage reference for later.
Scan past simple instructions that cannot reduce strong refcounts.
Scan through Clang attributes and map them onto Swift equivalents.
See further discussion in the doc comment at the top of this file.
See if we've produced a block destroy helper for this type before.
See the related issue https://github.com/facebook/hhvm/issues/5244
Set of block reverse post order ids that still need to be visited.
Should be after FunctionSignatureOpts and before the last inliner.
Simple division can't be used since that will cause wrong results.
SimpleXMLElement is the only class that has custom double casting.
Simplify terminators that could have been simplified by threading.
Simplifying other blocks might have resulted in unreachable loops.
Since these values are part of the hash, it should never be wrong.
Skip dst if we already generated a region starting at that SrcKey.
Smash callers of the old prologue with the address of the new one.
So we mark exiting blocks as visited by putting them in the BBMap.
Some extra esoteric options that aren't exposed in --help for now.
Sort callback for sorting entries by "strength" (basically length)
Special handling for yields from generators and awaits from async.
Split all critical edges from all or non only cond_br terminators.
Split tail into preallocations and store them back into freelists.
Split up operations on stack-allocated aggregates (struct, tuple).
Squash important frontend options into a single argument for LLDB.
Stores which functions implement a vtable or witness table method.
Suppress all diagnostics when there's an un-analyzable throw site.
Swift Enums can be both like DWARF enums and discriminated unions.
TODO: "Nondependent witness table" probably deserves its own flag.
TODO: Handle non-protocol requirements ('class', base class, etc.)
TODO: Not handling various string conversions or void conversions.
TODO: be less conservative about what destructors might be called.
TODO: reactivate the linker mode if it is supported in llvm again.
TODOs: Implement DeltaE instead, way better perceptual differences
Take the raw pointer argument and cast it to the destination type.
Test a bit in the control variable at the current insertion point.
Test copy constructor method where SmallBlotMapVector isn't small.
That is the only case where we support pattern matching a release.
The "/test" of "/test/name" should have been added as a directory.
The 'self' variable to use when rebinding 'self' in a constructor.
The change would only be tracked through one of / the allocations.
The class has fixed size, so the field offset is known statically.
The common spare bits actually used for a tag in the payload area.
The corresponding load-projection must match the store-projection.
The current instruction being simplified is always at insts.top().
The deinit of an array buffer does not capture the array elements.
The distances for a block in it's scope (either loop or function).
The else branch, if any, is outside of the scope of the condition.
The enum constant goes into the redeclaration context of the enum.
The first is to report the value of a pointer at a certain offset.
The first metonic cycle starts with Jewish year 1, or 3761/60 B.C.
The killBeforePEI set is the set of variables killed before a PEI.
The nesting depth of stack allocation instructions for each block.
The number of value witnesses that occur in protocol / extensions.
The partial application takes ownership of the context parameters.
The remaining code is the reference MD5 code (md5c.c) from rfc1321
The request thread will unpause us when it exits its command loop.
The returned array is mixed, and is guaranteed not to be isFull().
The second param should be the ini setting name after "hhvm.hack."
The set of nominal type declarations we should (and have) visited.
The small data set should use inline storage on any pointer width.
The threshold method works relatively well but it can be improved.
The type is simply inout of whatever the lvalue's object type was.
There is an edge from node to next, and next has not been visited.
There is some sort of control flow here that we do not understand.
These are rare situations, and so we just punt to the interpreter.
This allows us to heuristically filter large overload sets better.
This cannot be fixed until the attributes are correctly specified.
This could be generalized in the future, but needs further design.
This file implements IR generation for existential types in Swift.
This file implements support for loading Clang modules into Swift.
This helper is reached via call from the various freeLocalHelpers.
This is a little trickier than the getters in Mongo and MongoDB...
This is a macro rather than a lambda because it contains a return.
This is at best a getter with an implicit fallthrough off the end.
This is needed to keep track of which elements have been inserted.
This is the last iteration, compute BBWriteSetOut and perform DSE.
This is undocumented in Zend, and several extensions get it wrong.
This mode is not supported: Displacement will be embedded on Index
This must stay in sync with diag::access_control_setter_read_only.
This starts to prevent inlining at about 800 - 1000 caller blocks.
This structure gets fed into build_graphs to create our RC graphs.
This takes a little digging, so compute on first use and cache it.
This thread is now the one the proxy considers the current thread.
This timer has been removed from the pool by one of the callbacks.
This will probably error elsewhere, but there's nothing we can do.
Thunks are always emitted by need, so don't need delayed emission.
To make our output deterministic, we sort local successor indices.
True if the value is valid, i.e. could be evaluated to a constant.
Try next offsets, in case this match is in the middle of a string.
Try to create a new debug_value from an existing debug_value_addr.
Try to devirtualize a witness_method if it is statically possible.
Try to get the list of substrings and display a warning if failed.
Try to insert the property in the map at the next available index.
Try to sink identical arguments coming from multiple predecessors.
Update semantic info for open editor documents of the same module.
Use BytesPtr to avoid a range check subscripting on the StringRef.
Use the current array key to give a little help in the log message
Using eager vmreganchor for all helper calls is a perf regression.
Validate that the 'mutating' bit lines up for getters and setters.
Visit each of the types in the inheritance list to find protocols.
Walk up m_classVec for both classes to look for a common ancestor.
We can consider sharing the header files to avoid this copy-paste.
We can just borrow the enclosing one if we're in a nested context.
We can just primitive-store the representation for the empty case.
We don't have StMem in here since it sometimes stores to RefDatas.
We don't link any LLVM libs into the runtime, so define this here.
We ignore empty witness table without normal protocol conformance.
We may be parsing this closure expr in a matching pattern context.
We may wind up with a NULL here if there simply aren't any results
We must be processing an unreachable part of the cfg with a cycle.
We need to form an argument label, despite there being no argument
We need to replace this with the *value* of the incoming block(s).
We need to update the callsite to pass in the correct / arguments.
We ran off the end of the buffer, but no end label has been found.
We reuse these variables, they iterate over all pixels in the row.
We should have visited all its children when we marked it as dead.
We should understand what effect that may have on code completion.
We still have to add the last parser host/port combination though:
We subtract the number of parameters with default value at the end
We use 'constexpr' to verify that this is / emitted as a constant.
We use the RPO number of a BB as its Index in our data structures.
We walk the use chains of the self MUI to find any accesses to it.
We want the flow command to complete on the thread that starts it.
We want to recompile if the llvm pipeline of the compiler changed.
We're already checking this protocol, which means we have a cycle.
We're paused if the request thread is handling commands right now.
What actually matters is whether it can be an empty string at all.
Whether we remove the cached AST from libcache, by default, false.
With IEEE arithmetic, ties are broken by the IEEE round-even rule.
XXX: This can take the lock even when we want to pause the thread.
XXX: Zend does not allow isset() on the result of a function call.
Zap BI and move all of the instructions from DestBB into this one.
and return true so that we can stop the epilogue walking sequence.
and this should probably be handled by the normal cycle detection.
assumes not all bits are used patterns is already ordered by hash.
break the recursive cycle, so the elements can be freed by the MM.
check that type from object and type are the same (obnoxious test)
child replace stdin or stdout with the appropriate end of the pipe
create a section for the preamble that precedes the first boundary
departure from PHP: we got rid of dependencies on spprintf() here.
destroy_addr(p) is strong_release(load(p)), try to promote it too.
dropping double_encode parameters and see runtime/base/zend-html.h
emitConversionToSemanticRValue always produces a +1 strong result.
end anonymous namespace / Plan the reabstraction of a call result.
figure out the best c data type based on the sql data type we have
for apc, we know the key can't exist, but ignore that optimization
free heap space freed nodes are stored in address ordered freelist
ftello is 64-bit by default under OSX, and ftello64 doesn't exist.
getASTContext() doesn't actually mutate an already-canonical type.
if the key is null it will not be found so just return the default
map from the dests of StringGet instructions, to the list of uses.
memrchr is a GNU specific extension Emulate for wide compatibility
non-int-string assertions should go upstream of the ArrayData api.
now that we've inserted the chunks, use them to calculate the hash
numSelfInsts + the callee-instructions inlined into this function.
pending onComplete() received Check if we were waiting to shutdown
removes the "zombie" process, so not to interfere with later waits
sections_str DOES start with , and SPACES are NOT allowed in names
so that curl_global_init() is called ahead of time, avoiding crash
this is to shrink the allocation, since we probably over allocated
we allow 1-arg calls and we allow the params to come in any order.
we don't reserve(), because we don't know how selective fn will be
we just confirmed that the executor hasn't been unregistered above
we only just allocated this id, which is supposedly process unique
'case' is terminated with a colon and so allows a trailing closure.
(It will call a C++ helper and we can push/pop around it normally.)
(Normally we want to though because they can be encoded different.)
(Note: only unset can call ToMixed when we aren't about to insert.)
(Pointer, Scalar): A pointer to a pointer can never alias a scalar.
(This will happen for side-exits from method regions, for example.)
(This will probably kill most of the type-checking, but maybe not.)
(Unchecked) each stack offset in the type prediction list is valid.
(iOS/watchOS only) Two arguments, the second of which is a UIEvent.
- Failing any of the above, pop the frame for the current function.
/ / The object pointer may be a tagged pointer, but cannot be null.
/ / This drives scoreCandidateTrial by trying the possible matches.
/ / We use this when Clang code generation might populate the list.
/ / When we handle more types of casts, this can become a template.
/ return true if it is possible to devirtualize, false - otherwise.
1 means we just handled Kind, 2 means we just handled uncurryLevel.
101 is the highest priority allowed by the init_priority attribute.
2.0.15: moved down below declarations to satisfy non-C++ compilers.
3) Finally, try to find a class to put this on as a static function
A arguments must be passed reference count neutral except for self.
A class for merging a particular kind of value across control flow.
A container for declarations contained in some declaration context.
A convenience initializer cannot chain to a superclass constructor.
A dependent member type begins with a non-index, non-'d' character.
A helper class to translate the inner results to the outer results.
A parse error will be reported at the signature's declaration site.
A stored ASTContext indicates that this is the canonical signature.
A structure for conveniently claiming sets of uncurried parameters.
A type implementation for non-loadable but fixed-size struct types.
Add a dependency from the value at the address to the loaded value.
Added support for reading as well as support for 'tell' and 'seek'.
Adds an optimized FCallBuiltin for max with 2 operands to SystemLib
Adds an optimized FCallBuiltin for min with 2 operands to SystemLib
Adjust jemalloc otherwise we'll double count the direct allocation.
Advance to the first case without a custom name, deprecated or not.
All function vtable entries must be at their natural uncurry level.
All the unique refcount roots retained or released in the function.
All these methods only exist in Mongo, and no longer in MongoClient
Allocate `bytes' from the current slab, aligned to kSmallSizeAlign.
Allocate a TypedValue array and copy 'a' and the contents of 'argv'
Allocate a multiple of s_pageSize, and no less than m_minChunkSize.
Allows the guarantee that any instance of an xdebug server is valid
Always mark through the starting node, even if it's already marked.
An 'unavailable' requirement is treated like optional requirements.
An exponent is not allowed until there has been at least one digit.
And we are not asked to produce diagnostics, just return nullptr...
Anything deprecated in iOS 7.x and earlier is unavailable in Swift.
Anything else we do at least potentially adds storage requirements.
Append target's USR if this is a member of a synthesized extension.
Assume that the member only partially projects the enclosing value.
At each failure block, mark the self value as having been consumed.
At this point, there is not enough information to attach a sandbox.
Bail if there is any unknown (and potentially writing) instruction.
Be robust against manually crafted inputs with conflicting elements
Bind an incoming address value to a SILArgument's LLVM phi node(s).
Break the inheritance cycle for a class by removing its superclass.
But each one can be omitted if no entries exist in the module file.
Call the init(stringInterpolation:) initializer with the arguments.
Canonicalization will promote to loads and releases if appropriate.
Capture generic parameters from the enclosing context if necessary.
Check if a predecessor BB terminates with a switch_enum instruction
Check if code-bloat would be too big when this BB is jump-threaded.
Check if the memory addressed by the argument may alias any writes.
Check that we have an array initialization call with a known count.
Check whether an unknown class instance is actually a class object.
Check whether this instruction will invalidate any other locations.
Check whether we already have an entry in the set of lookup tables.
Check whether we have a direct substitution for the dependent type.
Checks if the given function breakpoint matches the given function.
Clear any tag bits stored in the payload area of the given address.
Clear the worklist-flag for the next call to computePredsLiveOut().
Collect blocks for which we have to calculate the out-availability.
Collect loops for a recursive bottom-up traversal in the loop tree.
Commit units individually if an error occurred during batch commit.
Compute the capture list, now that we have analyzed the expression.
Compute the cutoff value between legal numbers and illegal numbers.
Compute the genset and killset for every root in every basic block.
Compute the liveness of each element according to our predecessors.
Compute the offset from `sp' to the spill area at each block start.
Conformance info for a witness table that is (or may be) dependent.
Constructors and methods returning DynamicSelf return instancetype.
Continue, pretending that the source value was an (optional) value.
Create a dummy node to represent it until we see a real definition.
Create an assignment into the storage or call to superclass setter.
Create the args for the thunk's apply, ignoring any dead arguments.
Deactivate all the element cleanups and activate the tuple cleanup.
Deduce associated types from dependent member types in the witness.
Delete the debug info of the instruction that we are about to sink.
Detect this pattern so we can consider / it a 'return' use of self.
Determine the class type to which the target value type is bridged.
Determine the type of the value, opening up that type if necessary.
Determine whether the given conformance entry kind can be replaced.
Determine whether to escape the given keyword in the given context.
Determine whether we're handling a favored constraint in subsystem.
Did not find a retain in this block, try to go to its predecessors.
Different addressor safety kinds still count as the same addressor.
Don't print a redundant 'final' if we are printing a 'static' decl.
Don't print empty curly braces while printing the module interface.
Don't record the fix until we successfully simplify the constraint.
Don't try to check the behavior if we already encountered an error.
Drill through tuple shuffles, ignoring non-default-argument inouts.
Drop generic parameters and requirements from the method's context.
Drop the initial buffer/value parameter in accessors that have one.
Drop the optionality of the result type of the given function type.
Early return if either sil block or sil index block does not exist.
Emit an initialize of a live value to the given retaining variable.
Emit locationless intrinsic for variables that were optimized away.
Ensure that Objective-C does layout starting from the right offset.
Every case after this point requires knowing things about knownCls.
Everything else we see here ought to be a translation of a builtin.
Export getMap() so we can workaround constructing ReadableNativeMap
Extend to include the extra tag bits, which are always significant.
FIXME: Also exclude the type alias that has already been specified.
FIXME: Disable checks that the protocol witness carries debug info.
FIXME: ProtocolConformanceRef should have an "error" representation
FIXME: Record (via type sugar) that this was referenced via baseTy.
FIXME: Swift does not have static variables in structs/classes yet.
FIXME: This should use the generic signature, not walk the members.
FIXME: Use llvm::CountPopulation_64 when that's declared constexpr.
FIXME: Use the same type-substitution approach as lookupMemberType.
FIXME: We could do something crazy, like try to fix up the witness.
FIXME: Workaround for strange anchor on ConstructorMember locators.
FIXME: the fact that this could resolve in the local scope is dumb.
Failure already diagnosed, above, as part of applying the solution.
Fast path for bridging types in a function type without uncurrying.
Fetch the type metadata access function for the given generic type.
Fetch the witness table access function for a protocol conformance.
Find the implementation for the given "intrinsic" library function.
First rewrite predecessors of the loop header to point at the loop.
First, we deal with  platform-specific or compiler-specific issues.
Fold 'T.Type' or 'T.Protocol' into a metatype when T is a TypeExpr.
For an example, see "hphp/test/slow/hhbbc/return-type-opt-bug.php".
For an override of a base member property, it chains up to / super.
For each of the primary potential archetypes, add the requirements.
For mutable value type methods, we need to dig through inout types.
For now just check for a single copy_addr that destroys its source.
For now we're ignoring the type information, and only using offset.
For now, don't inline when we'd need to adjust ObjectData pointers.
For some reason I am running into compile issues when I try it now.
Generate a forward declaration of the runtime entry implementation.
Generate a getter from InitF which returns the value of the global.
Generic tuple value witness for 'initializeBufferWithCopyOfBuffer'.
Generic tuple value witness for 'initializeBufferWithTakeOfBuffer'.
Get all interesting uses of the object (e.g. release instructions).
Get number of code points assuming we substitute invalid sequences.
Get or create an accessor function to the given non-dependent type.
Given the address of an existential object, load its witness table.
Global variables require an initializer (except in top level code).
Helper for creating a single-element mixed array with a string key.
Helper method from converting between a PHP function and a CufIter.
If 'case n:' appears multiple times, only the first will ever match
If a contextual type exists for this expression, apply it directly.
If a fatal occurs during emission, some extra cleanup is necessary.
If both sides of the requirement are open archetypes, combine them.
If container1 is empty, we can stop here and return the empty array
If it turns out there are no uses of the catch block, just drop it.
If it's a literal token, we might be able to translate the literal.
If it's a projection of a promoted parameter, drop the instruction.
If it's an identifier that is itself a macro, look into that macro.
If level is non-zero, offset is the current offset within the frame
If loading from memory, set the base reference uri for the document
If projection paths are different, then the locations cannot alias.
If return_value is not null, store values into it according to HOW.
If so advance the state's sequence / appropriately and return true.
If so, call `f' on the specific instruction, and return the result.
If so, return true, if nothing obvious / is possible, return false.
If that changed anything, check for a lowering at the lowered type.
If the actual argument count is 1, it can match a tuple as a whole.
If the class is generic, we need to give it a name for Objective-C.
If the contents cannot be retrieved m_code will be an empty string.
If the given method is a factory method, import it as a constructor
If the inner result is a tuple, we need to expand from a temporary.
If the input and result types are canonical, then so is the result.
If the instruction was modified, it's possible that it is now dead.
If the key begins with a NUL, it's a private or protected property.
If the member is not part of a type, there's nothing to substitute.
If the nested type has been resolved to an associated type, use it.
If the next token is obviously not the start of a decl, bail early.
If the parameters depended on the context, consume the context now.
If the template class has already been scoped to `ctx', we're done.
If the type is known to be empty, don't actually allocate anything.
If the type references the type variable, don't permit the binding.
If the user is a tuple_extract, just substitute the right value in.
If there are any path components left, then append them to symlink.
If there was an error type checking this argument, then we're done.
If this attribute doesn't apply to the active platform, we're done.
If this constructor overrides another constructor, mark it as such.
If this declaration shouldn't be visible, don't add it to the list.
If this designated initializer wasn't overridden, we can't inherit.
If this instruction was a barrier then we can't sink anything else.
If this is a complex leaf closure, there is nothing more we can do.
If this is a global variable, force the accessors to be serialized.
If this is not the first entry in the inheritance clause, complain.
If this is the first match against the sugar type we found, use it.
If this state is not tracking anything, there is nothing to update.
If we already have a cached copy of the substitutions, return them.
If we already validated this extension, there's nothing more to do.
If we are the only user, then take this opportunity to set the max.
If we aren't currently working with a completion set, generate one.
If we can't find the member constraint in question, then we failed.
If we cannot find it in the module, we attempt to / deserialize it.
If we continued, get the value out as the result of the expression.
If we couldn't parse the result type, clear out the arrow location.
If we do not have any decrements to attempt to match up with, bail.
If we encounter an error validating the parameter list, don't bail.
If we ended up with a vacuous name like "get" or "set", do nothing.
If we fell out of the catch clause, branch to the fallthrough dest.
If we find another element, then we must have more than 2, so bail.
If we find any loads or any escape sites of the object, we give up.
If we find unresolved pattern, diagnose this as an illegal pattern.
If we found some unviable results, then fail, but without recovery.
If we had a loadable "next" generator value, we know it is present.
If we have a superclass, start from its size and alignment instead.
If we have any conflicting values, don't bother searching for them.
If we have arrays of arrays, this can try to hash the inner arrays.
If we reach here then an error occurred (typically a missing path).
If we see a potential argument label followed by a ':', consume it.
If we wanted a continue destination, it would probably be out here.
If we're inlining into a try_apply, we already have a return-to BB.
If we're printing recursively, find all of the submodules to print.
If we're supposed to ignore this macro, return an empty identifier.
If you change this, change manageBufferForExprResult below as well.
Implementations Cygwin specific functions needed for running Swift.
Implementations of runtime functions for looking up a type by name.
In addition, its the only simple way to make this work lock free...
In other words we could get infinite recursion if the mutex errors.
In such a case, check if any predecessors have a smaller PO number.
In that case you'll probably want to tweak the histogram sizes too.
In the repl, the parent top-level context may have been re-written.
Incomplete types are useless for our purposes, so just ignore them.
Inform the lexer that we're lexing the body of the SIL declaration.
Instead of emitting a bogus fixit, only emit the fixit for 'func's.
Instead of updating the literal expr in place, allocate a new node.
Instructs the JNI environment to throw an IllegalArgumentException.
Interrupts may execute some PHP code, causing another interruption.
Invoke the conversion intrinsic to convert to the destination type.
It can also adopt class references of bridged error types directly.
Just / apply the substitution on the AST level and then lower that.
Just leave this as whatever type of member reference it already is.
Keep track of the innermost closure we see that we're jumping into.
Lambda to check if CGetL and StaticLocInit refer to the same local.
Leaving the debugger hook attached encurs a large performance cost.
Link primary body blocks to exception handler blocks as follows: 1.
List of a parameter ids that use this label for its DV initializer.
Literal content nodes never have start/end column line information.
Local function used to remove this entry when the reader goes away.
Logical components always re-abstract back to the substituted type.
Look for members with the same name and matching types as this one.
Lower a few abstractions to facilitate straightforward x64 codegen.
MSVC doesn't require the characters to be the last 6 in the string.
Make space in the direct-results array for all the entries we need.
Make sure that all of the allocations were promoted into registers.
Make sure the bind is to the OptionalEvaluationExpr we're emitting.
Make sure the directory path to extract to exists or can be created
Make sure to recontextualize any decls in the capture list as well.
Mark the function transparent so that we inline it away completely.
Merge the equivalence classes corresponding to these two variables.
Metadata *(*CreateFunction)(GenericMetadata*, const void * const *)
Methods returning bool/UChar32 and taking a single UChar32 argument
Mix class subs with method specific subs from the AI substitutions.
Modify a GeneralEffects to take potential VM re-entry into account.
Move the current projection and memorize it for the next iteration.
Move the instruction from the successor block to the current block.
NOTE: Evaluation of the c argument should not have any side-effects
NOTE: if you change this, change Type::usesNativeReferenceCounting.
NativeNode is a link in the NativeData sweep list for this ND block
Needed so that the new elements are accounted for when GC scanning.
Next, call the failure callback for 'type' if we didn't do so above
Non-escaping stored decls are captured as the address of the value.
Not reachable since HHVM_FN(pow) deals with these base cases first.
Note that this also begins the formal accesses in evaluation order.
Note: translation units are handled specially by importDeclContext.
Now emit the a cast from the casted ObjC object into a target type.
Now into new section that parses buf for delimiter/enclosure fields
Now loop over all cells in box, updating distance per Thomas method
Now that we've got the storage squared away, synthesize the getter.
Now, attempt to diagnose the failure from the info we've collected.
Number of Blowfish rounds, this is also hardcoded into a few places
Ok so we're in a `yield from` situation, we know our ar is garbage.
Ok, we found a constructor that can be invoked with an empty tuple.
On Darwin, Clang uses -isysroot to specify the include system root.
On error, get our closeness from whatever problem the listener saw.
Once open sourced, the client will be detectable via its own ifdef.
Only allow allocation of Modules using the allocator in ASTContext.
Only set regstate back to dirty if an exception is not propagating.
Only unserialize CPP extension types which can actually support it.
Optimize this case for unsigned and equality comparisons: cmp_*_T .
Otherwise be conservative and return that we may have side effects.
Otherwise, check to see if the current byte is a control character.
Otherwise, create a new argument which copies the original argument
Otherwise, linkage is determined by accessibility at the AST level.
Otherwise, split the caller's basic block to create a return-to BB.
Otherwise, the next outer result must be either opaque or optional.
Otherwise, we need to scan up the CFG looking for available values.
PackedArray always has a valid m_size so it's an error to get here.
Parse and return this as an UnresolvedPatternExpr around a binding.
Parse optional inheritance clause within the context of the struct.
Perform a foreign error check by testing whether the error was nil.
Perform retain/release code motion and run the first ARC optimizer.
Perform specialized dispatch for a sequence of NominalTypePatterns.
Plan the emission of a call result as a single outer direct result.
Please put all checks in visitSILFunction in SILVerifier, not here.
Pointers to either the frame or object will be mapped to the frame.
Pretty large but small enough to add something without overflowing.
Process specialized loop-nests in loop-tree post-order (bottom-up).
Propagating the bits in might have satisfied the entire conversion.
Protocol witnesses are called using the witness calling convention.
Read in the raw-archetypes buffer, but don't try to consume it yet.
Really we should move that one optimization out of simplifyArgs ...
Recurse to mark adjacent nodes as part of this connected component.
Recursively search for other (non-)loads in the instruction's uses.
Refine the value for `state' to `newVal' if it was set to `oldVal'.
Remember the first type decl context in the hierarchy for later use
Remember the new SSATmps (the dests) which will need to be renamed.
Remove any overridden declarations from the found-declarations set.
Replace the content covered by the fixit with the replacement text.
Reset profiler otherwise it might recurse further causing segfault.
Resolve all associated types before trying to resolve this witness.
Retrieve the source file for the given Objective-C member conflict.
Retry the command with version 1, in which case values are omitted.
Returns true if an error occurred, without recording the base name.
Revert the dependent types within the given generic parameter list.
Revisit this block now that we've changed it and remove the DestBB.
SIL type lowering only does special things to tuples and functions.
Save off the string we have so far, re-fill the buffer, and repeat.
Scan past any values marked with the Elem, NewElem, or Prop markers
Scan to see if we are in any non-switch labeled statements (loops).
See "Weakening DecRefs" in the doc comment at the top of this file.
Seed the stack with the protocol declarations in the original list.
Set the IR global's initializer to the constant for this SIL tuple.
Set the predicted type for `l', discarding any previous prediction.
Set the proxy for this thread to be the localProxy we just created.
Set up a continuation BB and phi nodes to receive the result value.
Shared thunks and Clang-imported definitions can always be delayed.
Short circuit portscan, we're dealing with an IPv6 embedded address
Simple case: the property type of the getter is in the return type.
Simplify a condition branch to a block starting with "cond_fail 1".
Simply take care of the vasm's Vptr, reemmiting it if patch occured
Since the user can stop the trace at any time, this isn't an error.
Since we successfully processed at least one function, return true.
Since x is captured by-ref by the closure, x must live on the heap.
Skip any whitespace This is much faster than the isspace() function
Skip initializer contexts, we will not find any declarations there.
Skip materializeForSet -- it won't be used with a dynamic property.
So for any string here we can assume it promoted to an empty array.
So, looks like it's not cycle, but the word I started typing first.
Some other simple field, including "returns" (see SimpleFields.def)
Start YYX at -YYN if negative to avoid negative indexes in YYCHECK.
Stored properties in protocols are converted to computed elsewhere.
String wants a null, and dereferences one past the size we give it.
Synthesize accessors for lazy, all checking already been performed.
TODO: Handle secondary 'where' constraints on the associated types.
TODO: Remove this when failable initializers are fully implemented.
TODO: This should handle tuple member lookups, like x.1231 as well.
TODO: We should run this at -Onone even though it's not diagnostic.
TODO: add support for other algorithms instead of OPENSSL_ALGO_SHA1
Take a prefix of rows that share the same semantic kind of pattern.
Teleport the reference from the destroyed stack cell to the ActRec.
The "availability" semantics attribute is treated like global-init.
The "self" parameter should not get bridged unless it's a metatype.
The adapted closure value might outlive the block's original scope.
The archetype may come from the explicit type in a cast expression.
The call to the builtin should be replaced with the constant value.
The cleanup we pushed to destroy and deallocate the local variable.
The entry point builder that is used to construct ARC entry points.
The final two entries in the list are the basic block destinations.
The found init value is different from the already seen init value.
The frame may span a call if it could have done so in either state.
The functions below with names "couldBeIn*" detect the second case.
The generic context is currently re-specified by the type mangling.
The implementation here / depends on the underlying reference type.
The initial size is arbitrary, we just guess 80 characters per line
The input / SILFunction can either be an empty declaration or null.
The lifetime ends if we have a live block and a not-live successor.
The mode flags in stat are different from the flags used by access.
The most general resilience scope where the enum's layout is known.
The no-payload cases are distributed between multiple payload tags.
The notional context in which we're writing and type-checking code.
The number of possible values for the extra tag bits that are used.
The only thing left to do is synthesize storage for lazy variables.
The opposite of a projection instruction: composing a struct/tuple.
The outgoing edge carries the value on which we switch/cond_branch.
The parameter has an explicitly-specified API name, and it's wrong.
The period of this function is equal to the product of both primes.
The polymorphic type will start with any arguments from the parent.
The protocol and conforming type are in the same resilience domain.
The protocol name is mangled as a type symbol, with the _Tt prefix.
The remaining case is when the lower bound before an incref is one.
The second result is a RawPointer to the base address of the array.
The size of the maximum gap between one aligned stack and the next.
The substitution determines the type of the thing we're destroying.
The superclass of the metaclass is the metaclass of the superclass.
The text to display when the debugger client processes "help list".
The text to display when the debugger client processes "help quit".
TheMemory - This is either an alloc_box or alloc_stack instruction.
Then recursively add direct subclasses of already added subclasses.
There was a sign extension bug in older revisions of this function.
There were no digits at all so scanning has failed and we are done.
There will (currently) never be spare bits embedded in the payload.
These 4 rules can delay the start of the year by as much as 2 days.
Thick and ObjC metatypes look like pointers with extra inhabitants.
This array holds the actually closest colormap index for each cell.
This binop was synthesized when typechecking an expression pattern.
This breaks infinite recursion, which will be diagnosed separately.
This ensures that we don't lose it when generic types get reverted.
This file contains implementations of parts of the compiler driver.
This file defines the logic to pretty-print SIL, Instructions, etc.
This file implements a recursive traversal of every node in an AST.
This file implements declaration specialized name mangling for SIL.
This file implements name mangling for IRGen entities with linkage.
This file implements the caching mechanism using darwin's libcache.
This function refines, rather than invalidates, the old prediction.
This function will return the / required buffer length as a result.
This ignores type prefixes for acronyms, e.g., the 'NS' in 'NSURL'.
This implements the lattice merge operation for 2 optional DIKinds.
This is done to reduce the amount of IO from the swift module file.
This is the list of traits that this transformation might preserve.
This is the non-typechecked AST for the generated interface source.
This isn't really needed until pass 2, but again it is FAR storage.
This module contains code to perform both local DCE and global DCE.
This module provides completions to the immediate mode environment.
This pass prints all the callsites of every function in the module.
This should be the last option, for convenience in checking output.
This will need to change if we ever start using it in an hhas file.
This will reject some things, but allow other things we don't want.
Thus we allocate one slab and divide it between the various blocks.
Thus we need to check the field/struct decl which are not operands.
To do not bloat normal filling code I added a 2nd private function.
Transitive module imports are not handled at the declaration level.
Trust that the witness table template already has the correct size.
Try to devirtualize the static class of instance if it is possible.
Trying to consume a boxed value without a guess for the inner type.
Types that cannot be mapped into Swift, and probably won't ever be.
Uncommon case: after calling the return hook, follow the slow path.
Unlike UnsafeRefBitCast, this also supports raw pointers and words.
Unroll 1 to 3 byte UTF-8 sequences, use loop to handle longer ones.
Update constants to their real values and sync some runtime options
Use a builtin to produce a zero initializer, and assign it to self.
Use a hash of the basename of the source file as our discriminator.
V is the incoming value for the SILArgument A on at least one path.
Validate availability spec list, emitting diagnostics if necessary.
Variables in this set should not be processed by this pass anymore.
Verify some basis structural stuff about an instruction's operands.
We added the sizes of all members of the group to the group leader.
We already parsed the right operand as part of the 'is' production.
We are abusing the fact that a block can only be a local successor.
We are done once the current projection dominates the insert point.
We can unroll a loop if we can duplicate the instructions it holds.
We can't keep a's data, since it contains unknown non-empty arrays.
We compute the squared-c0-distance term, then add in the other two.
We could in theory support these if they come up but it'd be messy.
We currently only support explicit specialization of generic types.
We don't care about source ranges on implicitly-generated patterns.
We don't know if the user just forgot a label on a defaulted value.
We don't need to do anything if we have no protocols to conform to.
We don't want to convert to strings if either was already a string.
We forward declare the mangled names, wrapped in an extern C block.
We have a bit of state for each physical register this pass tracks.
We have a found multiple type aliases that refer to the same thing.
We have a value for the parent, remove all the values for children.
We have not processed any extensions yet, so there's nothing to do.
We have to lie and say we're done with parsing to make this happen.
We must have the same context archetypes as the unthunked function.
We mustn't destroy any callbacks until we're done with all of them.
We need an alloc_stack as a replacement for the indirect parameter.
We need an initStorage extension method to initialize this storage.
We need to be able to perform qualified lookup into the given type.
We need to consider how reachability from the heap can affect this.
We should just implement visitOverloadedDeclRefExprs and nuke this.
We shouldn't emit value witness symbols for generic type instances.
We still get correct behavior in these cases, so it works out okay.
We were able to fold, so all users should use the new folded value.
We will warn on conflicting non-private declarations in both files.
We'd like to take a look at implicit closure params, so store them.
We're passed the affected range and already synced up, just return.
We've done a lot of optimizations on this function, attempt to FSO.
When an instruction is removed from a BB, clear the parent pointer.
Work out which enum element is the true branch, and which is false.
XXX disabling default magic loading so the compiled in data is used
XXX: this needs to be optimized to work with blocks of 'safe' chars
address instances where the session read fails due to an invalid id
at least one of charListData chars was null, so there must be room:
calculate pow(long,long) in O(log exp) operations, bail if overflow
case CURLOPT_DNS_USE_GLOBAL_CACHE: not thread-safe when set to true
check if we have a valid host, if we don't reject the string as url
either else branch or if (true) branch without further declarations
empty region Modes that create a region by inspecting live VM state
gd 2.0.2: watch out for negative indexes (thanks to David Marwood).
getBBForReference - return the SILBasicBlock of the specified name.
getElementTypeRec - Return the swift type of the specified element.
if the query isn't supported by the protocol, fallback to emulation
make mongoclient object uncloneable, and with its own read_property
mark the ResumableFrame prefix, but enqueue the ObjectData* to scan
match on the end of filename instead of the beginning, if necessary
need to silence even with the AlwaysLogUnhandledExceptions flag set
parameters copied and re-factored from clearsilver-0.10.5/cgi/cgi.c
prevRegion is already huge, so bump the region we're hugening by 1.
raise_warning_unsampled can help when migrating warnings to errors.
skip the name string and the sequence ID, we don't care about those
strtod() will return the nearest possible FP value for that string.
super.init() may or may not have been called yet, we have to check.
the sandbox indicated by newId is already attached by another proxy
use a cur pointer so we still have ai to be able to free the struct
we are not touching a file that was not successfully loaded earlier
with ioctlsocket, a non-zero sets nonblocking, a zero sets blocking
wu manber cost is mostly in preprocessing the patterns into tables.
/ / "Specialized" is essentially a form of subtyping, defined below.
/ / In any other case, a metadata accessor should be called instead.
/ / Return true if the instruction initializes the value at Address.
/ / This returns true if the load has been removed from the program.
/ / This routine only examines the state of the instruction at hand.
/ / We test it to catch any suspicious things in the earliest point.
/ TODO: Cache the "simple" flag for types to avoid repeating checks.
/ This is a shallow one-step search and not a deep recursive search.
11 (MAP): followed by serialized key/value pairs until STOP is seen.
3) For all other cases we need to create a new re-abstraction thunk.
@objc enums can explicitly derive their _BridgedNSError conformance.
A reference to the lazily-allocated array of non-trivial enum cases.
A sub-layout is used to insert a layout into another layout N times.
A type implementation for loadable record types imported from Clang.
A whitelist of protocols allowed to be use in xml external entities.
A wrapper around a MapVector with generalized operations on the map.
ARM requires marker assembly for objc_retainAutoreleasedReturnValue.
Actually very simple, but do a lot of sanity checking on the result.
Add a dependency from the operand to the value at the store-address.
Add dependencies from the array operands to the struct array-fields.
Add the conversion from the argument to the function parameter type.
Add the literal instruction to represent the result of the division.
After invalidation the old index must not be equal to the new index.
All the retain block state for all the basic blocks in the function.
Allow non-materializable tuples to be bound to anonymous parameters.
Also, if we have a lazy definition for it, be sure to queue that up.
An array of sets of matches for each subpattern after a global match
An output stream which calculates the MD5 hash of the streamed data.
And memory locations that we saw check instructions for in the loop.
Any copy from the inout outside of an exit block fails the analysis.
AnyObject is implicitly conformed to by anything with a class bound.
Array address uses are safe if they don't store to the array struct.
Assign consecutive subindices for nodes which map to the same value.
Branches can be handled trivially and CondBranch edges can be split.
Build a Set of the values that were present in all of the containers
Build a substitution map to replace `self` and its associated types.
Build the CFG, then the dominator tree, then use it to validate SSA.
But usually / it is the less frequent case and we want to ignore it.
But we can't, the cycles are detected and avoided at blockOn() time.
But we don't need a loop block unless the 'do' statement is labeled.
C functions imported as members should be referenced as C functions.
Calculate the size of the offsets array, and allocate memory for it.
Can't constprop at this eval_cell, because of the effects on locals.
Canonical swift requires all non cond_br critical edges to be split.
Check if a buffer was created in the middle of the snapshot updates.
Check if conditions are equivalent along a subset of reaching paths.
Check if the normal and error blocks are empty, except the ARC uses.
Check if the normal and error blocks have a common single successor.
Check if this specialization should be linked for prespecialization.
Check that we have an array initialization call with known elements.
Check to see if a function of this name has been forward referenced.
Check to see if we've already seen this protocol composition before.
Check whether we're importing an Objective-C container of some sort.
Clone constructor, allocates a new ParamDecl identical to the first.
Close main() with the final data from when profiling was turned off.
Collect and analyze all functions to recompute, starting at Initial.
Collect the block arguments, which may have nonstandard conventions.
Collect the set of associated types rooted on Self in the signature.
Common implementation for POD boxes of a known stride and alignment.
Compute the partial solutions produced for each connected component.
Compute the type of indices for our own subscript operation, lazily.
Compute whether this gives us an apparent payload or dynamic layout.
Conformance info for a witness table that can be directly generated.
Constructors need to be collected into the appropriate methods list.
Consult API notes to determine whether this initializer is required.
Consume the value being stored, not the thing it's being stored into
Contains a map between location to their index in the LocationVault.
Contains all nodes of UnsortedChildren, but sorted by numTotalInsts.
Continue cannot be used to repeat switches, use fallthrough instead.
Convert a floating point number to a string formats 'f', 'e' or 'E'.
Count the number of entries up to and including the last null entry.
Create a new basic block in the edge, and insert it after the SrcBB.
Create a new property, or overlay ancestor's property if one exists.
Currently we add all stack sizes even if life ranges do not overlap.
Debugging of the archetype builder and generic signature generation.
Declarations provided by a C module have a special context mangling.
Default cases for whether we should verify within the given subtree.
Determine the number of source-level Swift of a function or closure.
Determine whether the given locator is for a witness or requirement.
Determine whether the given type variables occurs in the given type.
Determines the kind of array bounds effect the instruction can have.
Each entry is three values long, one value for each color component.
Emit a call to do an 'initializeArrayWithTakeBackToFront' operation.
Emit a call to do an 'initializeArrayWithTakeFrontToBack' operation.
Emit a field l-value by applying the given offset to the given base.
Emit a reassignment sequence from an enum at one address to another.
Emit the continuation block and generate a PHI to produce the value.
Emit the same diagnostic, but include a fixit to move the attribute.
Emit the sub-expression into the tuple initialization we just built.
Emit the unsubstituted result of this call into the given explosion.
Enable implicit module maps (this option is implied by "-fmodules").
Enter the arguments for the function into a new function-body scope.
FIXME: Could collect these from the conformance requirements, above.
FIXME: Disable memberwise initializer if a property uses a behavior.
FIXME: Long-term, we clearly need a specialized runtime entry point.
FIXME: Map to a real fixed-size Swift array type when we have those.
FIXME: This check is unneeded if the type is known to be pure Swift.
FIXME: TupleExpr doesn't preserve location of keyword name or colon.
FIXME: We're not recovering (in the AST), so the Fix-It should move.
FIXME: this has a super-inefficient extraneous simplifyType() in it.
FPassM final operations have paramId as imm 0 and stackCount as imm1
Failing inits create critical edges, where all 'return nil's end up.
Figure out which basic blocks contain back-edges to the loop header.
Finally, update m_instanceBits on every Class that currently exists.
First try to decide what to do without reference to lookahead token.
Follow derived types until we reach a type that reports back a size.
Follow the chain of projections and check if it ends up with a load.
For PopV and PopR currently we never know if can't run a destructor.
For example: Consider d register with the value "0x44582C24A50CAD2".
For non-failable initializers, store to the return address directly.
Force the driver into batch mode by specifying "swiftc" as the name.
From http://devzone.zend.com/303/ "hello" was renamed to "dso_test".
FurcHash -- a consistent hash function using a binary decision tree.
GET request means to extend the url, but not for redirects obviously
Gather all of the substitutions for all levels of generic arguments.
Generally called when the reference count on an array drops to zero.
Get a map from basic blocks or the original loop to the cloned loop.
Get the bytes behind the string literal, dropping the double quotes.
Get the single byte that remains after the file type indentification
Gets or creates the MethodInfo for a vtable or witness table method.
Grab all uses looking past RCIdentical uses from RCIdentityAnalysis.
Grab the BBState associated with it and set it to be the current BB.
Handle properties and subscripts, anchored by the getter's selector.
Handle the case where the callee of the apply is a load instruction.
IN assertion: the stream s has been successfully opened for reading.
If ARC optimizations are disabled, don't optimize anything and bail.
If BBSetIn changes, then keep iterating until reached a fixed point.
If Func* is from a PreClass, it doesn't know about base classes etc.
If a generic type name was given without arguments, allow a match to
If an error is encountered, the read preference will not be changed.
If both metatypes are class metatypes, check if classes can be cast.
If either of our types are raw pointers, they may alias any builtin.
If either type is an address only type, bail so we are conservative.
If it doesn't throw, this argument does not cause the call to throw.
If it has template parameters, the conservative scan is conditional.
If it intersects with the remove range, ignore the whole diagnostic.
If it throws an exception, catch it and return the exception object.
If it was replaced with a new translation, then bind to the new one.
If it's a retain of a promoted parameter, just drop the instruction.
If it's a wrapper, load from the 'Class' field, which is at index 1.
If loop `loopId' already contains a `preExit' block, then return it.
If neither or both are protocol types, consider the bases unrelated.
If new_iter_array does not create an iterator, it decRefs the array.
If one is noescape but the other isn't, then the result is escaping.
If our successor iterator has reached the end of the successor list.
If tcT could be an interface or trait, we upcast it to TObj/TOptObj.
If that is true we clear all the state since we cannot hoist safely.
If the address of an array-field escapes, we give up for that field.
If the base might be a str, the result wil be CountedStr or Nullptr.
If the base was an opened existential, erase the opened existential.
If the candidate has the same name, its probably the right function.
If the current bb is terminated then the epilog is just unreachable.
If the generator is done, just copy the return value onto the stack.
If the index type is an integral type, we have an indexed subscript.
If the initializer we found is a designated initializer, we're okay.
If the key could be an illegal key type, the array may remain empty.
If the last component is physical, just drill down and load from it.
If the parent is a dependent type, the member is a dependent member.
If the parent is a type parameter, the member is a dependent member.
If the parent is a type variable, retrieve its member type variable.
If the parser returned null, it is an already diagnosed parse error.
If the switch did a break, we made some progress moving this retain.
If the terminator is a cast instruction then use the pre-cast value.
If the tuple is address only, we need to do the operation in memory.
If the type is complete we can just retrieve it and use it directly.
If there are no cleanups to run, this just / returns the dest block.
If there are no edges to the return block, we never want to emit it.
If there is no corresponding argument in the first parameter list...
If there's a Clang node, see if it comes from an explicit submodule.
If there's a default case it will be emitted immediately after this.
If this is a decl that we have an lvalue for, produce and return it.
If this is an always matching 'is' pattern, then it isn't refutable.
If this is an argument label mismatch, then diagnose that error now.
If this value is already defined, check it to make sure types match.
If we are asked to emit sorted SIL, print out our BBs in RPOT order.
If we are still a subregion, increment the SubregionIter and return.
If we do, load the original type and create the appropriate bitcast.
If we don't actually need an entry point for the getter, do nothing.
If we don't have an Objective-C method table, there's nothing to do.
If we get to a release, we can generally ignore it and scan past it.
If we got here, we read the appropriate number of accumulated bytes.
If we had a thumbnail in a SUB_IFD we have ANOTHER image in NEXT IFD
If we have a Swift import of this type, use our lowered information.
If we have a cache, remember this in the cache at the next position.
If we have a declaration, convert the witness table to a definition.
If we have a reader, deserialize all of the globals-as-members data.
If we have a source range and an ASTContext, print the source range.
If we have an assignment expression, scout ahead for acceptable _'s.
If we have an unambiguous reference to a type decl, form a TypeExpr.
If we have no input buffered, read from socket, store into m_buffer.
If we know that this terminator is not an exit terminator, continue.
If we reach here, this is an equality comparison against a constant.
If we're at the open brace of a no-name getter, don't add an indent.
If we're passing multiple parameters, then this isn't a tuple splat.
If we're supposed to remove shadowed/hidden declarations, do so now.
If we've reached this point, the optimization is valid, so optimize.
Implementation strategy for singleton enums, with zero or one cases.
Import functions without prototypes as functions with no parameters.
In PHP7 garbage at the end of a numeric string will trigger a notice
In most cases the "self" parameter is lowered as the back parameter.
In strict mode this will always fail, in weak mode it will be a noop
In the meantime, just assume that all stores of trivial type are ok.
Infer associated type witnesses for all relevant value requirements.
Instead of a true 3-D array, we use a row of pointers to 2-D arrays.
Invalid escapes are accepted by the lexer but diagnosed as an error.
It consists of a base and a / projection path to the field accessed.
It has been modified to return the converted value as a * parameter.
It's there without values, and gone with values, so it is too large.
Iterate over the tuple type fields, corresponding to each parameter.
Iterate the IdMap to find the argument type of the given param name.
Jump to the finally block and free any pending iterators on the way.
Keep track of whether we found a better path than the previous best.
Keep types for stack and frame locations, and throw away the values.
Keep working on the current block until no further changes are made.
LayoutError will be thrown if an ambiguous construct is encountered.
Load type metadata for the source's static type and the target type.
Local function to determine if the given declaration is an accessor.
Look for results within the current nominal type and its extensions.
Look in the generic parameters after checking our local declaration.
Look through RebindSelfInConstructorExpr to avoid weird sema issues.
Make sure that we have space to round up to the start of a huge page
Make sure that we propagate out whether or not nesting was detected.
Make sure to run at least one round of the ARC optimizer after this.
Map ConstructorDecls to the Allocator SILDeclRef of the constructor.
Map from class id to the function containing its DefCls instruction.
Match the last words in the type name to the last words in the name.
Maximum number of default-value parameter initializations to unroll.
Metadata with a non-trivial parent node always requires an accessor.
NOTE(cjiang): use hash code to fend off most of call-stack traversal
No hidden escapes: check if the Node is reachable from the UsePoint.
No platform allows an action signature with more than two arguments.
Non-trivial C++ types would be Indirect_Inout (at least in Itanium).
Nonmutating methods on structs and enums pass the receiver by value.
Nontrivial kind /and/ type unions would imply equal kinds and types.
Now that we have them, mark them as being initialized without a PBD.
Now, if the destination has no payload, check if the source has one.
Ok, we need to actually compute an Alias Analysis result for V1, V2.
Ok, we now know that one of the paths is a subsequence of the other.
Omit PCs which have opcodes that don't pass the given opcode filter.
Only allowed to overrun the signature if we have somewhere to put it
Only handle single operands for simple recursion without a worklist.
Only load the HDF value if it was specified, don't use the defaults.
Otherwise gcc notices that it is empty, and optimizes away the call.
Otherwise record the operand with the earliest use last in the list.
Otherwise we need to split the current block at the insertion point.
Otherwise, add all of User's uses to our list to continue searching.
Otherwise, apply these arguments to the result of the previous call.
Otherwise, just diagnose starting at the storage declaration itself.
Otherwise, update our step given that we have a potential decrement.
Otherwise, we have a metatype subtype conversion of thick metatypes.
Partial dead store - stores to some locations are dead, but not all.
Pass the class to the type checker to create an implicit destructor.
Perform abstract conversion, ignoring how the type is actually used.
Perform optimizations based on flags liveness, then do some cleanup.
Perform preoptimization and simplification on the input instruction.
Perform the actual replacement of the get_element call by its value.
Positions between instructions are used to insert copies and spills.
Prepend the class that declared the private property if it isn't us.
Private and (unversioned) internal types always have a fixed layout.
Properties in this set should not be processed by this pass anymore.
Protocol composition types are not nominal, but we name them anyway.
Rebuild inherited conformances based on the root normal conformance.
Record that contains the list of Objective-C category/extension IDs.
Reference storage types with witness tables need open-coded layouts.
Region-selector that unintelligently takes a whole method at a time.
Reject accessors on 'let's after parsing them (for better recovery).
Remember this pattern/init pair for our ultimate PatternBindingDecl.
Remove archetypes from this scope from the set of active archetypes.
Represents a statically-known function as a SIL thin function value.
Restore cleanup states in the opposite order in which we saved them.
Result type of a function producing the concatenated string literal.
Retains can move after it but the last release can't move before it.
Retrieve the type of a reference to the specific declaration choice.
Return a monotonically increasing time given the last time recorded.
Return all the WorkItems we'll need to start analyzing this program.
Return the index of the parent metadata pointer for the given class.
Returns the TargetMachine instance or zero if no triple is provided.
Returns the default http method to use with the different auth types
Returns true if the repl should continue, / false if it should quit.
Returns true if the two paths have a non-empty symmetric difference.
Returns true if this breakpoint is enabled at the given stack level.
Sack of inputs and pre-computed data used by the main XLS algorithm.
See bytecode.specification for CreateCl for the relevant invariants.
Set the IR global's initializer to the constant for this SIL struct.
Set up PHP frame linkage for our parent by copying our ActRec's sfp.
Set up the datastructure used to collect the uses of the allocation.
Shed the 'self' type and generic requirements from method manglings.
Should not wait for the new AST, it should give the previous answer.
Should run before aggregate lowering since that splits up copy_addr.
Shove in the T_ELSE and T_WHITESPACE, then return the remaining T_IF
Shrink the min/max bounds of a box to enclose only nonzero elements,
Simply importing the categories adds them to the list of extensions.
Skip over random instructions that don't touch memory in the caller.
Skips whitespace, then populates name with valid extname characters.
So we need to the remember the addresses of the global ivar offsets.
Sort Swift declarations so that we print them in a consistent order.
Sort the list of interfaces so the biggest conflict sets come first.
SourceRoot has been default to: Process::GetCurrentDirectory() + '/'
Special case: an empty string should continue to be an empty string.
Spill space is needed and must be allocated at or before this point.
Split the version string into tokens separated by the '.' character.
Squash the innermost concat stream if we consumed its concat result.
Store the current exception object in the appropriate local variable
Store the data as the current value of this extension's ini setting.
Symbol of the custom scanner function which handles the entire type.
Temporarily ignore the justOne option while cleaning the data by _id
Test copying from an empty map where SmallBlotMapVector isn't small.
That mostly means we need to be good at not marking things external.
That said, this function is reasonably efficient for most use cases.
The ArrayAdd helper decrefs its args, so don't decref pop'ed values.
The Objective-C thunk was never even declared, so it is not defined.
The TypedValue may be a non-scalar, but it must have a static value.
The arguments then form a tuple pattern matching the element's data.
The calling convention and function representation can't be changed.
The end of the postmatter section is always the end of the function.
The enumeration was mapped to a struct containing the integral type.
The getter checks the optional, storing the initial value in if nil.
The instance type of a metatype is always abstract, not SIL-lowered.
The maximum length of an e-mail address is 320 octets, per RFC 2821.
The new rows are placed using / the column-specialization algorithm.
The object type is incomplete, but has internal or external linkage.
The only way to represent a small integer is to use the bitset mode.
The plan here is that each thread starts with s_thisThreadIdx as -1.
The private routine to ultimately emit a call or invoke instruction.
The runtime ignores these fields if the IsResilient flag is not set.
The runtime provides a value witness table for Builtin.NativeObject.
The same instruction may theoretically have different types of uses.
The server continues accepting until RequestType::TERMINATE is seen.
The source base type must be a subtype of the destination base type.
The source type an Objective-C class type bridged to a Swift / type.
The source type can be explicitly converted to the destination type.
The start line is not the same, see if this is at the 'else' clause.
The text to display when the debugger client processes "help break".
The trailing arguments are now propagated through the partial apply.
The type will be a polymorphic function if the Self type is generic.
The types may not be compatible in the presence of unreachable code.
The value we are attempting to discover memory behavior relative to.
The value-witness table for pointer-aligned unmanaged pointer types.
The worklist of the constants that could be folded into their users.
There should always be at least one release for an allocated object.
These are the only interesting cases where we could be doing better.
These could be thrown into a macro, but there aren't very many cases
These instructions should not reach here based on the pass ordering.
These only apply to the generic type if they don't start a new line.
These only occur in traits, so we don't need to do better than this.
This can only happen if the array is backed by an Objective-C array.
This check relies on the fact that we cannot have nested extensions.
This code does the right thing for R,G,B or B,G,R color orders only.
This does some type checking to validate that the call will succeed.
This file implements IR generation for global declarations in Swift.
This file implements parser state persistent across multiple parses.
This file implements the constraint solver used in the type checker.
This includes scopes for values and loads as well as the generation.
This is a tool for reading sil files and running sil passes on them.
This is an initialization for an address-only existential in memory.
This is the list of new interface parameters of the cloned function.
This leaves us in the unenviable position of having to support both.
This means that we'll continue to just conservative scan everything.
This opens dead-function-removal opportunities for called functions.
This should be called after calling relocate on all relevant ranges.
This shouldn't be necessary, but emitOrigToSubstValue can get upset.
This type should be ignored (used for system types we can't modify).
This will be used to exit early in later control-dependence queries.
This will prefer the SDK alongside the Swift found by "xcrun swift".
Thus, the cursor_id is set to 0, so no more results will be fetched.
To do everything in integer math, we must use integer scale factors.
To get this behavior, we have to bind and then re-inject the result.
To pick a mongos we therefore simply pick the "nearest" mongos node.
To prevent extra large output files, e.g. when compiling the stdlib.
To save space, we don't include the source trait in the requirement.
Translate a single value and initialize the given temporary with it.
Try to create an optimized function based on the signature analysis.
Try to satisfy the protocol requirements from the property's traits.
Type check the destination first, so we can coerce the source to it.
Type of the actual function to be called with substitutions applied.
Update use counts and def instructions for to-be-added instructions.
Use the ForwardValIn as we are currently processing the basic block.
Use the current offset to form the this pointer for the method call.
Use the non-repr external type, but reuse the TypeLoc printing code.
Use the remangler to generate a mangled name from the type metadata.
Used to deserialize entries in the on-disk Objective-C method table.
Useful only for detecting the presence of the pprof/symbol endpoint.
Utility to just extract the kind field from an arbitrary Header ptr.
VAX exponent range is so narrow we must worry about overflow here...
Validate the argument tuple elements as nominal type pattern fields.
We / leave those connections in place for our parent loop to fix up.
We also don't want to change the convention of the original closure.
We also insert retains here at the location of the original closure.
We are conservative in the case of / multiple open_existential_addr.
We check for additional information as well, in the "wnote" property
We don't know the value of the alloca until we find the first store.
We don't want to propagate parens from arguments to the result type.
We got an explicit content-type header, trust if it says soap or xml
We have something function-like, so we want to strip off the 'self'.
We know we must have at least one result and it must be on the Left.
We need to merge the type for every property in the class hierarchy.
We need to perform a final type analysis before we do anything else.
We need to split the critical edge to create a frontier instruction.
We only need to set this flag so Repo::global will let us access it.
We reject putting a label on something inappropriate in parseStmt().
We represent this with the PostElem base location with locType TTop.
We save m_file in m_prevFile and leave it open for an entire period.
We the unresolved member has an argument, turn it into a subpattern.
We use a dummy type since we don't have a convenient type for 'nil'.
We will have to list them all here for proper static initialization.
We'll treat this like a liveness problem where the value is the def.
We're only interested in the porperty name that points to our target
We've already marked the blocks reachable from the main entry point.
We've been told to emit a module, but have no other mode indicators.
What to ideally do for truecolor images depends, alas, on the image.
When unserializing an element of a Set, we use Mode::ColKey for now.
When we see control flow splits, we need want to process both paths.
When we're emitting a standard implementation, use direct semantics.
Whether this type variable is fully bound by one of its constraints.
Whether this type variable is only bound above by existential types.
Whether to try to fill the input buffer when we reach the end of it.
Which connection we return depends on the type of connection we want
While this data is still in the the map we consider this data dying.
apprentice - make one pass through /etc/magic, learning its secrets.
check for the old child and whether the new child is already a child
cmd is now part of cursor, so it shouldn't be dtored until cursor is
combinedLCG() returns a pseudo random number in the range of (0, 1).
don't bother copying the character iterator, getText() is deprecated
emitInitializeFieldOffsetVector will do everything in the full case.
erase unreachable blocks and get an rpo sorted list of what remains.
failed to decompress the file, will try reading the rest of the file
foo doesn't actually match because we jump straight to the last 'O'.
found freed heap node that fits allocation and doesn't need to split
gd_topal, adapted from jquant2.c  Copyright (C) 1991-1996, Thomas G.
import child into the current context, throw on cross-context cycles
isStartOfStmt - Return true if the current token starts a statement.
lexOperatorIdentifier - Match identifiers formed out of punctuation.
look at options in the stream and set appropriate verification flags
look for a potential boundary match, only read data up to that point
maybe better to teach heap-trace and IMarker about hphp_hash_set/map
nextLookahead() advances an iterator forward in the lookahead store.
on EINTR, retry - this resets the timeout however to its full length
reference implementation, only optimized for memory usage, not speed
sometimes we'll have a cursor_id but there won't be any more results
std::move AllVisibleValues into a temporary to destroy its contents.
store_unowned doesn't take ownership of the input, so cancel it out.
wand is empty, create a 1x1 pixel image to use as a temporary canvas
'let' isn't valid inside an implicitly immutable context, but var is.
(Or else ensure that we never use ElemS with an integer-like string.)
/ / Cache all blocks visited to avoid introducing quadratic behavior.
/ / Places the new columns using the column-specialization algorithm.
/ / Redundant Load Elimination (RLE) eliminates such loads by: / / 1.
/ / This is used for both ProtocolTypes and ProtocolCompositionTypes.
/ / This requires the getter's body to have a certain syntactic form.
/ Since we want this to round-trip, lower these as reference / types.
/ The platform-specific subclasses are implemented in ToolChains.cpp.
2.0.16: Optimization by Ilia Chipitsine -- don't waste time offscreen
@TODO: this is quite ghetto right now, but is useful as is to others.
@weak types are never loadable, so we don't need to handle them here.
A TypeInfo implementation for bare non-null pointers (like `void *`).
A new sender sets it to 1 and then expects an answer using version 2.
A non-failable initializer cannot delegate to a failable initializer.
A pointer into something that has been relocated needs to be updated.
APE processes Authorization: Basic into PHP_AUTH_USER and PHP_AUTH_PW
Add an entry for IRInstructions that have no associated machine code.
Add any archetypes from this scope into the set of active archetypes.
Add members from each of the extensions that we have not yet visited.
Adjust for 'size', which is always 32 bits rather than pointer-sized.
Again, it's important that the EndBlock is the first in the WorkList.
All region arcs are taken into account, including retranslation arcs.
All the release block state for all the basic blocks in the function.
Also ignore ASIUser (only kicks in if ASIUser is the original apply).
Also make sure to process any intermediate files that may contain SIL
Also retrieves and updates location information stored in the client.
Always leave space for a context argument if we have an error result.
An aggregate type that contains references (potentially recursively).
An alloc_stack itself does not introduce any non-native swift arrays.
An apply expression is a potential throw site if the function throws.
Append an invalid character so that nothing can resolve to this name.
Append to the main argument list if we have uncurry levels remaining.
At this point, all the relocated code should be correct, and runable.
Attempt to infer stream type only if it was not explicitly specified.
Avoid SIGFPE when dividing the miniumum respresentable integer by -1.
Avoid floating point comparison issues by doing a bitwise comparison.
Before adjusting the stack or doing anything, check the suspend hook.
Bind an incoming explosion value to a SILArgument's LLVM phi node(s).
Bind an incoming explosion value to an explosion of LLVM phi node(s).
C-style character escapes, no support for unicode escapes or whatnot.
Catch the common case in which we've already hoisted the initializer.
Check if all predecessors stem from the same switch_enum instruction.
Check if an address does not depend on other values in a basic block.
Check if the ObjC runtime already has a descriptor for this protocol.
Check if we are the true case, ie, we know that we are the given tag.
Check to see if the TLCD has an expression that we have to transform.
Check to see if this is a use of self or super, due to a method call.
Check whether this initializer satisfies a requirement in a protocol.
Check whether we have a path that terminates at an archetype locator.
Check whether we have a typedef that refers to a CoreFoundation type.
Check whether we need to bridge the key through an Objective-C class.
Checks if we can promote a buffer and returns the size of the buffer.
Checks is a function is alive, e.g. because it is visible externally.
Claim the next few characters if they exactly match the given string.
Clang gives linkage names to things that don't actually have linkage.
Clang uses CGM.getTargetCodeGenInfo().getDependentLibraryOption(...).
Classify an argument to a 'rethrows' function that's a tuple literal.
Classify an argument to a 'rethrows' function that's a tuple shuffle.
Collect fields from this class and add them to the layout as a chunk.
Collect the linker options already in the module (from ClangCodeGen).
Complain and recover by chopping off everything after the first name.
Compute a starting point for ppIn/ppOut based on global availability.
Constructors and destructors don't have 'self' in parameter patterns.
Convert call arguments, casting and adjusting for calling convention.
Copy the block so we have an independent heap object we can hand off.
Copyright (c) 1988, 1993 The Regents of the University of California.
Correctness checks are normally done before adding function to scope.
Create a new Objective-C method corresponding to the given SIL value.
Create a new context for the body and traverse it in the new context.
Create a single stub function which calls swift_deletedMethodError().
Create the args for the new apply by removing the closure argument...
Create the list of elements, and add the trailing closure to the end.
Creates the external declaration for swift_bufferDeallocateFromStack.
Current token can be either one-character token we want to consume...
Dead function elimination nulls out entries for functions it removes.
Default all non-newly added files to being rebuilt without cascading.
Default implementation: Assume the variant encapsulates a basic type.
Default witness thunks use the context archetypes of the requirement.
Determine whether one declaration is more specialized than the other.
Determine whether there is already a solution with the same bindings.
Diagnose requirements that can't be satisfied from the behavior decl.
Do a PHP return to the caller---i.e., relative to the callee's frame.
Do an actual lookup for 'self' in case it shows up in a capture list.
Don't inline the function, so it stays as a signal to the ARC passes.
Don't truncate if we've decided we want to truncate the entire block.
Each src must be defined earlier in the same block or in a dominator.
Emit the lazy initialization token for the initialization expression.
Emit the other arguments, taking ownership of arguments if necessary.
Ensure we interpret an entire function when the debugger is attached.
Expressions can't begin with a closure literal at statement position.
FIXME: (LLVM branch) This should probably be a DW_TAG_interface_type.
FIXME: Determine which associated types matter, and only print those.
FIXME: Diagnose this failure here, rather than over in type-checking.
FIXME: This arguably should be getMemberForBaseType's responsibility.
FIXME: This shouldn't ever appear in protocol requirement signatures.
FIXME: We need the enclosing CallExpr to rewrite the argument labels.
FIXME: the pedantically correct way is to resolve Swift.*LiteralType.
FIXME: we should fix that, since it also affects struct members, etc.
Factor the non-fixed-size field's alignment into the total alignment.
Fetch the declaration of the metaclass stub for the given class type.
Find the "best" method that has this selector, so we can report that.
Find the beginning of the field offset vector in a struct's metadata.
Find the conformance of the origin to the associated type's protocol.
First add the blocks that QueryNode is directly control-dependent on.
First check if the module contains a required specialization already.
First we set PCRE_NOTEMPTY and try the match again at the same point.
First, call the failure callback for 'class' if we didn't do so above
For OutputArgs, if the param is not a KindOfRef, we give it a nullptr
For an archetype, retrieve the nested type with the appropriate name.
For array types, convert the element type and treat this an as array.
For certain special typedefs, we don't want to use the imported type.
For nice-looking dumps, we want to remember curMarker between blocks.
For now just include it in the description only in the new code path.
Foreign functions are only available at very specific uncurry levels.
Forward a value down into an irrefutable branch of the decision tree.
From here on we're on the side-exit path, due to a failure to coerce.
Functions can have _silgen_name, semantics, and NSManaged attributes.
General case: concatenate all of the generic argument lists together.
Generate a getter from the global init function without side-effects.
Generates LLVM IR, runs the LLVM passes and produces the output file.
Generic tuple value witness for 'initializeArrayWithTakeBackToFront'.
Generic tuple value witness for 'initializeArrayWithTakeFrontToBack'.
Get or create a "GOT equivalent" llvm::GlobalVariable, if applicable.
Get the special protocol kind for an uncomposed protocol existential.
Get the type that exists at runtime to represent a compile-time type.
Helper class for emitting code to dispatch to a specialized function.
Helper function to create a bogus SILFunction to appease error paths.
I have chosen to use the spellings found in the Encyclopedia Judaica.
If 'self' is address-only, copy 'self' into the indirect return slot.
If a large store is broken down to too many smaller stores, bail out.
If an abstract protocol conformance was passed in, just return false.
If any have a non-trivial payload, then we can't disable the cleanup.
If any of the elements was locally satisfied, make sure to mark them.
If class is abstract final, its static methods should not be abstract
If either aren't found we return the default-constructed cache entry.
If it's a release of a promoted parameter, just drop the instruction.
If no SDK was specified via -sdk, check environment variable SDKROOT.
If no generic parameters remain, this is a non-generic function type.
If no return type was specified, create a fresh type variable for it.
If node is not a leaf, add its children to the worklist and continue.
If not, we need to combine the generator result with that last chunk.
If one of the merged edges was interp'ed mark the result as interp'ed
If that succeeds, then we stitch the result back into our expression.
If the accessor wants the value directly, we definitely have to load.
If the canonical type was already computed, just return what we have.
If the class would use the Objective-C allocator, only emit -dealloc.
If the closure is noescape, then we can capture the decl as noescape.
If the continuation block was used, emit it now, otherwise remove it.
If the end of the function isn't terminated, we screwed up somewhere.
If the imported typealias is unavailable, return the underlying type.
If the inner result is indirect, we need some memory to emit it into.
If the instruction we're examining is a value, replace it with undef.
If the last use is a / copy, eliminate both the copy and the destroy.
If the member came by optional unwrapping, then unwrap the base type.
If the method returns Self, substitute AnyObject for the result type.
If the new PHInode is not dominated by the allocation then it's dead.
If the next token can be an argument label or is ':', this is a name.
If the original declaration was implicit, we may want to change that.
If the string is empty, just leave, remembering that we did all this.
If the type is 2, check if the binary data is prefixed by its length.
If the type obviously has or lacks the trait, emit a constant result.
If the underlying type is a class, see if it is an enum and get that.
If there are more than one input files, we need one extra arg to run.
If there are no cleanups to run, just return the Dest block directly.
If there are remaining call sites, apply them to the result function.
If there are substitutions, verify them and apply them to the callee.
If there is a parser frame, put it at the beginning of the backtrace.
If there is no base, or if the base isn't being used, it is settable.
If there is no initializer for the new variable, don't auto-print it.
If there was no name specified for this block, just create a new one.
If there's only one stored property, we have the layout of its field.
If things fail, we can revert the types back to their original state.
If this block is a catch block, it must have at most one predecessor.
If this is a contextual conversion problem, dig out some information.
If this is a get+mutableAddress property, synthesize the setter body.
If this value was already defined, check it to make sure types match.
If we are at the start of a trailing closure, do not add indentation.
If we are currently delegating to a generator, return its key instead
If we cannot get the type info in an expected way, describe the type.
If we cannot prove such a thing, return the relevant memory behavior.
If we detect unbalanced braces, keep reading before we start parsing.
If we didn't build the type differently above, build it normally now.
If we don't have an argument for this case, there is nothing to do...
If we don't have an lbrace, then this witness table is a declaration.
If we don't know whether we have a This, we need to check dynamically
If we found no overloads, then there is something else going on here.
If we found nothing, complain and give ourselves a chance to recover.
If we get here with a copy_addr, it must be storing into the element.
If we get here, we weren't able to prove that the files are the same.
If we have a type declaration, resolve it within the current context.
If we have a type-adjusting attribute (like ownership), apply it now.
If we have already seen an init_existential_addr, we cannot optimize.
If we have already seen an open_existential_addr, we cannot optimize.
If we have an unchecked_enum_data, strip off the unchecked_enum_data.
If we have extra tag bits, they will be zero if we contain a payload.
If we have no predecessors, there is nothing to do so return early...
If we only have the parameter type, output the type as a placeholder.
If we saved any global ivar offsets, make sure we write back to them.
If we store the alloca pointer, we cannot analyze its uses so bail...
If we're about to step out of a ClosureExpr, restore the DeclContext.
If we're not including literals, fallback to keywords as appropriate.
If we're supposed to disable autolinking of this framework, bail out.
If we've got a scalar and want a scalar, the source is exactly right.
Ignore blocks that are successors of terminators with mandatory args.
Ignore the existence of the parent type if it has no type parameters.
Import an NS_OPTIONS constant as a static property of a Swift struct.
In JSON, this would create multiple entries with the same 'slot' key.
In short, in Normal mode any thread may hit and process an interrupt.
In the Objective-C runtime, class metatypes are also class instances.
In this case the `kills' set will refer to the wrong stack locations.
In this case we don't even create a node for the resulting int value.
Infix operator is only allowed on operator declarations, not on func.
Initialize block state structures and put all blocks in the worklist.
Initialize the extra tag bits, if any, to zero to indicate a payload.
Inject the call into the top level stream by wrapping it with a TLCD.
Inject the enum tag if the result is optional because of failability.
Insert the instruction New before instruction Old in Old's parent BB.
Instead of emitting an obviously dumb select, emit nothing or a zext.
Introduce substitutions for each of the generic parameters/arguments.
It holds the list of / basic blocks excluding all unreachable blocks.
It is blocking and can take some time, so do it in a separate thread.
It is essential to inline it for stack promotion of the array buffer.
It will NOT be run when the VarDecl is merely used from another file.
It's not clear where the IncomingBranch should go to if cb is frozen.
Jmp to the two-argument prologue, or emit it if it doesn't exist yet.
Just pushing a retain(x) past a retain(y) doesn't change the program.
Keeping a value live across a Call requires spilling, so we avoid it.
Leave space in the buffer for both, but make sure we set it up later.
Lex tokens until we find the token that contains the source location.
Link all the jumps from the current tail translation to this new guy.
Long enough for the magic number read and check to happen (and fail).
Look for a method that we have overridden in one of our superclasses.
Look for this protocol within the existential's list of conformances.
Look through it because we know it isn't actually doing a load/store.
Look up a catch trace for `rip', returning nullptr if none was found.
Lookup table mapping names to the set of declarations with that name.
Lower a few abstractions to facilitate straightforward PPC64 codegen.
Lower the arguments and return value in the callee's generic context.
Make sure that setcc/xor with xor status flags being used is skipped.
Make sure that the adjacencies we expect are the adjacencies we have.
Make sure that there's an index on chunks so we can sort by chunk num
Make sure to pass in the same set of required elements for each pred.
Make sure we have an up-to-date conformance table for the superclass.
Metadata about a variable which is the object of register allocation.
Modify state to conservative values given an unprocessed predecessor.
Move elements that came after the deleted elements (if there are any)
Move the insertion point to the 'body' block temporarily and emit it.
NB: the ActRec and function within the AR may have different classes.
NB: we're holding the CHM lock on this bucket while we're doing this.
NOTE: if you change this, change irgen::getReferenceCountingForClass.
NVTs live inside VarEnv, and GlobalsArray has an interior ptr to one.
No need to to retrieve source line information for this kind of site.
Not necessary for some builtin calls, but it depends which builtin...
Note that the destructor may not be in any particular canonical form.
Note: it doesn't matter what order we visit the blocks for this pass.
Now that the pattern has been initialized, check any where condition.
ObjC class pointers look like unmanaged (untagged) object references.
Ok, we have a field that is not equal to the field we are extracting.
One represented using Y,U,V vectors and the other is webp image data.
Only methods, properties, subscripts and constructors can be NonObjC.
Other lowers that didn't fit the macros above or are not so numerous.
Otherwise, convert both sides to booleans (with null becoming false).
Otherwise, emit the value into memory and use the optional intrinsic.
Otherwise, if the epilog block is reachable, return the return value.
Otherwise, the return type had better be a retainable object pointer.
Otherwise, we need to add the dynamic size to the fixed start offset.
Out-of-line because std::unique_ptr wants LookupCache to be complete.
Partially apply the next uncurry level and return the result closure.
Perform a dynamic cast of a metatype to an existential metatype type.
Process Decl, recursively deserializing any thing Decl may reference.
Produce a reference to the C-compatible entry point for the function.
Queue may contain received unprocessed events from failed runUntil().
REVERSE sort the decls, since we are going to copy them onto a stack.
Read function properties only, e.g. its linkage and other attributes.
Record this object type, with fully qualified name, key, and linkage.
Record this value witness, popping it when we exit the current scope.
Register any necessary patches by creating fake labels for the stubs.
Replace occurrences of 'Self' in the signature with the derived type.
Return a TypeExpr for a simple identifier and the specified location.
Return the list of functions that can be called via the given callee.
Runs the given function with the given context argument exactly once.
Same as do_eval(const Unit*, int) except that this evaluates a string
Scan its users and add them to the worklist for recursive processing.
Scans all instructions of the module and builds the dependency graph.
Select out the chunk of the value to merge with the existing payload.
Sema leaves some subexpressions null, which seems really unfortunate.
Serialized variants and objects shouldn't ever make it into the repo.
Set an internal breakpoint after the instruction if it can fall thru.
Set of all blocks that may reach the loop, not including loop blocks.
Similar to start above, end could be the start of an existing region.
Since this is our primary output, we need to specify the option here.
Size of input buffer in bytes, not including room for EOB characters.
Skips whitespace, then populates word with valid bareword characters.
So it's fine for the .sil to shadow it, since that's the one we want.
So we won't expand support for this feature to new compression types.
Source can be null, in which case this will be the only / thing done.
Special case: "ObjectValue" in the name matches "Object" in the type.
Special case: Mutable can appear in both and may screw up word order.
Special-case AnyObject, which may not be in the list of conformances.
Specialize the identified loop nest based on the 'array.props' calls.
Split the range 'current' into two halves: 'current' and 'otherHalf'.
Splits all critical edges from non cond_br terminators in a function.
Store the reference to the runtime's idea of the protocol descriptor.
TODO: preserve the function pointer at its original abstraction level
TODO: we should fix this, otherwise we are missing RLE opportunities.
The base of a dynamic member reference cannot be an existential type.
The big data set should use out-of-line storage on any pointer width.
The callee for a super call has to be either a method or constructor.
The client should handle this, not pass it down to diagnoseInitError.
The cloned start node shares the same dominator as the original node.
The const_cast is ok because we fully own the array, with no sharing.
The context is modeled exactly like a native Swift / class reference.
The conversion may be a no-op if the right operand is already a bool.
The conversion may be a no-op if the right operand is already an int.
The dynamically unknown case is the interesting one, handle it below.
The functions we used to simplify the CFG put things in the worklist.
The locations for the subscripts are almost certainly SubscriptExprs.
The main class for parsing a demangling tree out of a mangled string.
The new constant could be further folded now, add it to the worklist.
The opaque value (of archetype type) stored within the / existential.
The optional will be lowered to an integer type the size of the word.
The path from the selected origin down to the destination / protocol.
The payload is POD, so copying is bitwise, and destruction is a noop.
The possible uses are one of: 1) The initialization store (TheStore).
The property should be considered computed by the time we're through.
The props can't be the same if they are at different offsets, though.
The protocol and conforming type are in different resilience domains.
The representation of an existential is different for some protocols.
The result type of the function must be convertible to the base type.
The retain-unowned optimization will benefit from the release-motion.
The set of opened existential archetypes that are currently / active.
The superclass field in a class type is the first field past the isa.
The type info class for the on-stack representation of an ObjC block.
Therefore, tell initSchema() to verify that the database is writable.
These are both initialized to the same zval, but that's okay because.
This allows a Swift module to extend a Clang module of the same name.
This can't happen because we picked a reachable block from the workQ.
This case is where we're logically supposed to do stdClass promotion.
This computes `rArr + rIdx * sizeof(TypedValue) + sizeof(ArrayData)`.
This contextual conversion constraint doesn't install an actual type.
This could be Opts.Optimize if we would also unique DIVariables here.
This entry point is equivalent to the `crypt' function in Unix libcs.
This file defines the high-level BasicBlocks used for Swift SIL code.
This function is called from yylex_destroy(), so don't allocate here.
This gives arrays a chance to change to a kind that supports sorting.
This is a common source / of confusion, so we force an explicit self.
This is because we only handle the single init_existential_addr case.
This is because we only handle the single open_existential_addr case.
This is noinline with asm("") to preserve this frame in stack traces.
This is presently used to work around other location processing bugs.
This is relying on undocumented feature of Windows API LoadLibrary().
This is the list of base classes for this class in inheritance order.
This is the name of the callee as extracted from the call expression.
This is used to / optimize the time for computing genset and killset.
This means that at worst b.used() will return a slightly stale value.
This mutex protects actually allocating from RDS (the above statics).
This needs to kept in sync with hasRequiredTypeMetadataAccessPattern.
This node is the end of a defer-edge path with no pointsTo connected.
This only eliminates existing arguments, replacing them / with casts.
Timestamp is 4 bytes of seconds since epoch and 4 bytes of increment.
To be called during process startup ONLY, before threads are spun up.
True if a type has a generic-parameter-dependent value witness table.
Type check the parameters and return type again, now with archetypes.
TypeSourceSets are merged a join points by unioning the type sources.
Unnamed locals are segregated (they all come after the named locals).
Unprocessed assigns just lower into assignments, not initializations.
Update marker to ensure newly-pushed value isn't clobbered by DecRef.
Update: I talked with Cokus via email and it won't ruin the algorithm
Use POD value witnesses for operations that do an initializeWithTake.
Use a SmallPtrSet to make sure only emit a particular candidate once.
Used during enum raw value checking to identify duplicate raw values.
Using this function is equivalent to adding your key to apc_prime.so.
Wait 10 times to give it a chance on especially overloaded computers.
We also assume that the partial apply does not capture any addresses.
We aren't in that business here, so we don't need to record anything.
We assume that we've already filled in the class's generic arguments.
We better not have strong iterators associated with uncounted arrays.
We can now do member-wise comparison of the types within these types.
We can only synthesize implicit constructors for classes and structs.
We can't currently handle wrapping so make sure this isn't happening.
We create defer-edges from the partial_apply values to the arguments.
We do not handle applies that take in multiple closures at this time.
We don't care about source ranges on implicitly-generated statements.
We don't handle these instructions if we see them in store addresses.
We don't have a destructor body, so hunt for the SIL function for it.
We don't want to have an arbitrary limit in the size of the password.
We first map the full size to make sure the memory area is available.
We found the type alias, check if an object of type cls is compatible
We handle value propagation from cond_br and switch_enum terminators.
We have an array of value handles, but we need an array of constants.
We have to create the variable now (before we emit the global lists).
We know the resulting Map will be empty, so we can return early here.
We know the resulting Set will be empty, so we can return early here.
We matched a single character, the EOB, so treat this as a final EOF.
We may need to bitcast the address if the field is of a generic type.
We need to add logic to tracelet analysis to deal with this properly.
We produce better diagnostics when we don't force the self type down.
We saved the lexer position after it, so we should not be getting it.
We shouldn't emit global value witness tables for fixed-layout types.
We treat class initializers as part of the constructor for profiling.
We use 2 instead of 1 to avoid an immediate realloc on the next call.
We use a StateVector because we can add new blocks during optimize().
We're not synced up, continue replacing syntax map data on this line.
We've seen part of this base, but this is a part we've have not seen.
We've sent the client a command, and we expect an immediate response.
We've setup locales to be thread local, so this is no problem at all.
When we start print a synthesized extension, record the target's USR.
Whole program optimizations need to assume they can see all the code.
Wrappers to query the value state of the location in this BlockState.
XXX allow caller to set timestamp, if none set, then default to "now"
adjust x0 to be on the left boundary (ie to be zero), and y0 to match
calculate how many required args are at the end of the specifier list
cipher list varies according to SSL library, and "ALL" is for OpenSSL
compute next use of active registers, so we can pick the furthest one
concat_si will incRef the output string and decref its first argument
crash at this specific address so that we can find our crashes easier
define('HPHP_VERSION', 'XX.YY.XX') define('HHVM_VERSION', 'XX.YY.XX')
having job reaper should not affect anything other threads are doing.
if the cert passed the usual checks, apply our own local policies now
if we can read a complete key/value then we are ready to be extracted
index of leftmost source unsigned char containing data (1 to 8 bits).
kill the locals to which this instruction stores iter's key and value
make sure that there's an index on chunks so we can sort by chunk num
onConstant will always be called before onEntry, so we can check here
parseBraceItemList - A brace enclosed expression/statement/decl list.
readline frees this using free(), so we must use malloc() and not new
self.init() calls require that self.init has not already been called.
spec doesn't specify this, but php5 xdebug sends back breakpoint info
splitBlockForFallthrough - Prepare for the insertion of a terminator.
the next line seems false but here IFDlength means length of all IFDs
update "oldest in flight" or kill it if there are no running requests
we are going to write a new APP13 marker, so don't output the old one
we have to adjust timing by removing loop cost, which is the 1st test
when URL is rewritten, PHP decided to put original URL as SCRIPT_NAME
'--' indicates end of args if not followed by a known long option name
(This is a marker that the type is never actually req-heap allocated).
/ - actual return type and expected return type differ in optionality.
/ /   CHUNKS /     * A length-prefixed array of CodeCompletionStrings.
/ / BuildGenKillSet - Build the genset and killset of the basic block.
/ / If cacheVariable is null, we perform the direct access every time.
/ / Simple NRVO cases are handled naturally via backwardPropagateCopy.
/ / These restrictions are set by canUseScalarCheckedCastInstructions.
/ Equal to the size of the payload minus the spare bits used for tags.
/ If possible, replace the default with the corresponding unique case.
/ return the result value of the new ApplyInst if created one or null.
/ returns instruction I if this condition holds, or nullptr otherwise.
8-byte pointer and 8-byte size describing the code range for this FDE.
A binary-operator reference only honors FuncDecls with a certain type.
A canonical induction variable incremented by one from Start to End-1.
A case block has its own scope for variables bound out of the pattern.
A copy_addr that is not a take affects the retain count of the source.
A direct standalone function call, referenceable by a FunctionRefInst.
A helper function for creating a lambda-based DynamicPackingOperation.
A non-exhaustive switch would also produce an unreachable instruction.
A nullptr dest means the callee was intercepted and should be skipped.
Actually substitute the diagnostic arguments into the diagnostic text.
Add an AvailableAttr to the declaration for the given / version range.
Adds a range of PCs to the filter given a collection of offset ranges.
Adjust potentially live references that point into the relocated area.
After parsing optional attributes above we should be at 'var' or 'let'
After tearing down this frame, the VM stack should be completely empty
All the places to place the new retains or releases after code motion.
Allow filtering of the visible declarations based on various criteria.
Allow responses to drain for up to ServerGracefulShutdownWait seconds.
An ASTVisitor for populating SILVTable entries from ClassDecl members.
An implementation of DynamicPackingPHIMapping for a single LLVM value.
And substitutions for D1 are not available directly in a general case.
Any copy from the inout outside of the entry block fails the analysis.
Anything deprecated in OSX 10.9.x and earlier is unavailable in Swift.
As a hack, we look at the text of the result type and look for 'Void'.
As a result, only the day number of the start of the year is required.
As it's being closed, we can't actually do anything with filter output
Assign a debug scope pointing into the void to the top level function.
Assume that ArrayLiteralConvertible contains a single associated type.
Assume that a C-language API doesn't have substitution reabstractions.
Attempt to / replace the Argument with a new Struct in the same block.
Bail if a value of a property is not a statically known constant init.
Bail if any generic types parameters of the concrete type are unbound.
Before anything else, set up the 'self' argument correctly if present.
BindParam constraints are not reflexive and must be treated specially.
Both of these can be found by considering only the corners of the box.
Both the condition and the increment are reached through the backedge.
Bridge the given value to its corresponding Objective-C object / type.
BridgeObject exposes only null as an extra inhabitant for enum layout.
Build a TypeLoc to preserve AST location info for the reference chain.
But 'self' is treated as the context if it has pointer representation.
CLO8 - Return the number of leading ones in the specified 8-bit value.
Called by TypeAliasReq to get resolved TypeStructure for type aliases.
Cannot promote loads and stores from within an existential projection.
Change defaults for these since they make assumptions about the system
Check for Unicode BOM at start of file (Only UTF-8 BOM supported now).
Check for a ',', which indicates that there are more protocols coming.
Check if the condition is a single-used argument in the current block.
Check if the converted function type has the same number of arguments.
Check if the predecessor is not produced by a switch_enum instruction.
Check if this instruction is the first call to noreturn in this block.
Check if we should stop due to flow control, breakpoints, and signals.
Check that every allocation in heap has been freed before destruction.
Check that the array is a member of an inout argument or return value.
Check that the branch argument is of the expected dynamic method type.
Check that this operand appears in the use-chain of the value it uses.
Check to see if this is a potentially unsupported partial application.
Check whether there is a function with the same name as this property.
Clang imported inline functions do not have a Swift body to typecheck.
Class-constrained existential metatypes can be converted to AnyObject.
Cleaning up after these passes can expose more inlining opportunities.
Collect the conformances for all the protocols of an existential type.
Compute the information used to describe an Objective-C redeclaration.
Concrete witness thunks use the context archetypes of the conformance.
Configure prof.thread_active_init before launching additional threads.
Contains a map between LSLocation to their index in the LocationVault.
Copy all of the containers (except the first) into a TypedValue array.
Create an empty response as notification that the service is restored.
Currently, more than one sanitizer cannot be enabled at the same time.
Dependent members can appear in lowered position inside SIL functions.
Determine the time of the start of the period containing a given time.
Determine whether overriding the given declaration requires a keyword.
Devirtualize apply instructions that call witness_method instructions:
Diagnose using accessibility in a local scope, which isn't meaningful.
Disallow direct ivar access (and avoid conflicts with property names).
Do a quick pass over the new arguments to see if any of them are dead.
Do type-lowering for a lowered type which is not already in the cache.
Don't deduce autoclosure types or single-element, non-variadic tuples.
Don't optimize functions that are marked with the opt.never attribute.
Don't put MAGIC constant - it likely points to a file within MSys tree
Else will try to reuse lookahead token after shifting the error token.
Emit a value semantics operation for each nontrivial case of the enum.
Emit code stashing the current return value in the "ret" unnamed local
Emit protocol conformances into a section we can recognize at runtime.
Ensure that the frame is still dead for the purposes of memory-effects
Evaluate the expression as an lvalue or rvalue, discarding the result.
Extract the value witness used to deduce this associated type, if any.
FIXME: A renamed match might be useful to retain for the failure case.
FIXME: Handling of generic parameters in SIL type lowering is in flux.
FIXME: Need a sugar-preserving getExtendedInterfaceType for extensions
FIXME: Should be fixed to allow inheriting from a nested type some day
FIXME: The code-completion kind is also used for semantic annotations.
FIXME: Use a longer hash string to minimize possibility for conflicts.
FIXME: We want the locator that indicates where the binding came from.
FPI is within whole func, but we also need to check within the section
Fall back to Swift lowering for the enum's representation as a struct.
Find all of the declarations with this name in the appropriate module.
Find the first predecessor, the first terminator and the Nth argument.
Find the last child DIE which does not start with the begin/end range.
Find the superclass type with the context matching that of the member.
Finds the preceding check_subscript, make_mutable call or returns nil.
First look for a type with the same name in the same compilation unit.
For ArrayObject::offsetExists, we need to check the value at `offset`.
For a conditional dynamic cast, use conditionallyBridgeFromObjectiveC.
For a function, bind the output and convert the argument to the input.
For existential-to-existential coercions, open the source existential.
For methods, we defer setting the full name until m_cls is initialized
Force all archetypes referenced by the type to be bound by this point.
Function that inits the scan of the memory and count of class pointers
Function: gdAffineInvert Find the inverse of an affine transformation.
GD 2.0 supports RGBA truecolor and will read and write truecolor PNGs.
Generates LLVM IR, runs the LLVM passes and produces the output files.
Get the ObjC instance or class object to check for these conformances.
Given a default SSL config, SSL_CTX, and certificate path, load certs.
Given a non-tagged object pointer, load a pointer to its class object.
Hoist this make_mutable call and depend instructions to the preheader.
I exclude vertical tab because it never seems to be used in real text.
If Right is still not None, then get both values and OR them together.
If both conformances are non-replaceable, diagnose the superseded one.
If filename points to a user file, invoke UserStreamWrapper::chgrp(..)
If filename points to a user file, invoke UserStreamWrapper::chmod(..)
If filename points to a user file, invoke UserStreamWrapper::chown(..)
If filename points to a user file, invoke UserStreamWrapper::touch(..)
If it did, reset our iteration range to the block after the insertion.
If it is already in the user callbacks, continue to use it from there.
If new_iter_object does not create an iterator, it decRefs the object.
If our type variable shows up in the base type, there's nothing to do.
If present, InitCtx must dominate all occurrences of LdCtx and LdCctx.
If the 'self' value is a metatype, update the target type accordingly.
If the class pointer is valid as metadata, no translation is required.
If the closure has a multi-statement body, we don't walk into it here.
If the conforming type isn't dependent, the below check is never true.
If the current period has not finished and there is a log file, use it
If the declaration we found was not a method or initializer, complain.
If the first parameter is the variadic one, it's not more specialized.
If the function is exported to C, it must be representable in (Obj-)C.
If the instructions are close enough, then we should sink them anyway.
If the layout is fixed, load and store the fixed-size payload and tag.
If the next token is not an operator, just parse this as expr-postfix.
If the other ref count value was blotted, blot our value and continue.
If the predecessor *is* in the loop it must be the tail of a backedge.
If the return type is address-only, emit the indirect return argument.
If the solver recorded what we should do here, just do it immediately.
If the source and destination index are different, we'll be shuffling.
If the source key and value types are object types, this is an upcast.
If the systems made the same choice, there's nothing interesting here.
If the tag has spare bits, we need to mask them into the payload area.
If the type is specialized, find the conformance for the generic type.
If the type isn't fixed-size, check whether we added an emission note.
If the underlying expression was a read-only subscript, diagnose that.
If the user typed anything other than tab, reset the completion state.
If the value is available, use it, otherwise emit a load of the value.
If the witness actually explicitly provided that accessor, then great.
If there are no default ctors for our supertype, we can't do anything.
If there's a collision, compare by cost, ignoring higher-cost entries.
If this is a class pointer, we need to look through ref_element_addrs.
If this is a non-present optional requirement, emit a MissingOptional.
If this is a property requirement, check that the static-ness matches.
If this is a property, check if it needs to be exposed to Objective-C.
If this is an anonymous tag declaration with a typedef name, use that.
If this is not a php file, check the static and dynamic content caches
If this is not a simple instruction that we can value number, skip it.
If this is the scalar field, act like we're shuffling the 0th element.
If we are inside an implicit BraceStmt, don't verify source locations.
If we are looking at a member of an existential, open the existential.
If we are the operand itself set the operand to the incoming argument.
If we are verifying all of the intermediate steps, add the verifier...
If we can show that it's exhaustive without full type-checking, great.
If we can, post the fix-it to the sub-expression if it's a better fit.
If we did not find an index, there is nothing further to do, continue.
If we do not find such an increment, there is nothing we can do, bail.
If we don't have more than one component, just solve the whole system.
If we ended up with something that can't be a member name, do nothing.
If we fail to get the write lease, just let it stay unsmashed for now.
If we found a generic parameter, map to the archetype if there is one.
If we had a pure transparency color, add it as the last palette entry.
If we have matched an empty string, mimic what Perl's /g options does.
If we have not found user code in this block, inspect it's successors.
If we know the platform runtime's "done" value, emit the check inline.
If we may write to the property we need to allow the array to escalate
If we overflow and are not asked for diagnostics, just return nullptr.
If we reach here then valType is Obj and tc is Object, Self, or Parent
If we were able to process each predecessor successfully, return true.
If we're doing takeover, we don't want to gracefully close the socket.
If we're not allowed to look in the runtime library import path, stop.
If we're not supposed to minimize the result set, just return eagerly.
If we've hit Eval.JitGlobalTranslationLimit, then we stop translating.
If you change the layout in the header, you'll need to change it here.
In a closure, we assume it's a name, because the type can be inferred.
In a let/else, these always require an initial value to match against.
In some language modes, we allow top-level code to omit 'try' marking.
Inheritance of parent allow value through multiple levels of new nodes
Initialization will be taken care of by ext_array which also uses icu.
Initialize an Explosion with the parameters of the current / function.
Initialize regions for each BB and associate RPO numbers with each BB.
Initially store offset into buffer, update later to deal with reallocs
Inject the SDK path and resource dir if they are nonempty and missing.
Inject the self value into an optional if the constructor is failable.
Insert releases after each point where the partial_apply becomes dead.
Inspired by "How to Print Floating-Point Numbers Accurately" by Guy L.
It cannot have a guard expression and the pattern cannot be refutable.
It expects all variable values to be fully serialized across the wire.
It is fine to shadow names from the 'swift' namespace in 'swift::sma'.
It is valid for a JP2 file to contain multiple individual codestreams.
Keep track of which arguments we have claimed from the argument tuple.
Keeps track of what stores to generate after the data flow stabilizes.
Look at the function type and iterate through the function parameters.
Look at this function as an iterator on the mbi integers it spits out.
Look up the NSCopying protocol from the Foundation module, if present.
Make a flattened table of all the interfaces implemented by the class.
Make sure that the EndBlock post-dominates all blocks we are visiting.
Make sure the didSet/willSet accessors are marked final if in a class.
Make sure the sprop is accessible from the singleton method's context.
Make this definition a declaration by removing the body of a function.
Mark the constructor transparent so that we inline it away completely.
Metatypes that can be represented as ObjC trivially cast to AnyObject.
No point in continuing with this one if we already have a LayoutError.
Note also that the closure function still has a valid DW_AT_decl_line.
Note that partial_apply instructions always close over their argument.
Note: currently caller is responsible for calling renumber after this.
Notify MM that surprise flag should be set upon reaching the threshold
Now that the job is running we need to wait for a call to onComplete()
Now, take care of CLI options and then officially load and bind things
Okay, the rest of the bindings are irrefutable if there isn't a guard.
Only allow allocation of attributes using the allocator in ASTContext.
Only handle classes defined within the SILModule's associated context.
Only handle members defined within the SILModule's associated context.
Only honor null_result if we actually imported as a non-optional type.
Only return a larger value if it wouldn't be truncating the precision.
Only trace through backwards jumps if it's a JmpNS and we're inlining.
Only update and mark if we actually make the linkage more restrictive.
Other than inserting the end-of-lifetime, the deallocation is a no-op.
Other things people escape, but shouldn't need to, so we disallow them
Otherwise, branch to the continuation block and start inserting there.
Otherwise, just respect genericity and Objective-C runtime visibility.
Otherwise, leave a placeholder for the runtime to populate at runtime.
Otherwise, normal instructions just go on the worklist for processing.
Pack the passed args into an array, then store it as the second param.
Package the Substitution list in the SpecializeAttr's ConcreteDeclRef.
Partition into main, cold and frozen, without changing relative order.
Pattern bindings handle their own tests, we don't need a boolean test.
Place this new proxy into the proxy map keyed on the dummy sandbox id.
Pop the stack, assuring that the current mode matches the expectation.
Prefer scoped imports (import func Swift.max) to whole-module imports.
Print all translations in original order, filtered by unit if desired.
Private instance and static properties are initialized using InitProp.
Process instructions in the basic block in reverse post-order fashion.
Project the address of the value inside a boxed existential container.
Project the value out, loading if necessary, and take ownership of it.
Protocols / Get the runtime identifier for a special protocol, if any.
Protocols serve two masters: generic algorithms and existential types.
RAUW the entry point function forward declaration with the real thing.
RIGHT_SHIFT provides a proper signed right shift of an INT32 quantity.
Record the initializer as an alternative declaration for the / member.
Recursively collect transitive captures from captured local functions.
Refine the else branch if we're given a version range for that branch.
Regardless, the return value is the result of the commuted comparison.
Register the accessor as an external decl if the storage was imported.
Releases must be matched by a retain otherwise a destructor could run.
Repeatedly select and split the largest box until we have enough boxes
Replace a generic type parameter with its corresponding type variable.
Replace all uses of the old load with the data and erase the old load.
Replace the initializer of PBD with a reference to our repl temporary.
Request local registry for user defined wrappers and disabled builtins
Requests will be printed in Requests.cpp, print them out here as well.
Resolve the reference to this type declaration in our current context.
Restore the justOne option when we cleanup the files collection itself
Retrieve the optionality location for the given type / representation.
Retrieve the original conn and return the underlying connection to it.
Return an empty region to restart region formation at env.minstrStart.
Return the BlockState for the basic block this basic block belongs to.
Return the BlockState for the basic block this instruction belongs to.
Returns false iff the region should be truncated before inst's SrcKey.
Returns true if any generic types parameters of the class are unbound.
Returns true if type `a` has archetypes that can be bound to form `b`.
Rewrite the code we just created in the preheader and update SSA form.
Running without a resource directory is not a supported configuration.
Save a slot for the field type vector address to be instantiated into.
Save the cursor and load any abbrev records at the start of the block.
Scan all of the instructions in this function in search of ApplyInsts.
See arPreliveOverwriteCells for details about why we need this marker.
Sema forces conditions to have Builtin.i1 type, which guarantees this.
Sends a "list file" command to the proxy attached to the given client.
Shows sorted patterns list in the order which is used for the matching
SimpleXMLElement is the only class that has proper custom int casting.
Simplify the blocks with terminators that rely on constant conditions.
Since the head of our edge is SubLoopHeaderRegion, this must be local.
Some that touch memory we might care about later, but currently don't:
Sort the set of protocols by module + name, to give a stable ordering.
Sorts the regions vector in a linear order to be used for translation.
Special case for accessors, which inherit the access of their storage.
Special handling of subjectAltName, see CVE-2013-4073 Christian Heimes
Start with the correct parent FP so that VarEnv can properly exitFP().
Static/class declarations require an initializer unless in a protocol.
Strings are hash-commoned so presumably only one can be null per unit.
Suppress diagnostics when in a fatal state, except for follow-on notes
Swift designated initializers are Objective-C designated initializers.
T2 is the result type provided via the construction constraint itself.
TODO: we can't currently support lazy properties on non-type-contexts.
TODO: we should probably implement a fancier buffer size control here.
The 'ar' argument points to an ActRec of the invoked/resumed function.
The AddNewElem helper decrefs its args, so don't decref pop'ed values.
The address-of operator produces an explicit inout T from an lvalue T.
The builder used to create new instructions during register promotion.
The class context must be the vtable's class, or a superclass thereof.
The client will block until the server echoes this command back to it.
The first few bad arcs typically point at the problem, so report them.
The first pass, m always is 0, so no_read becomes 1 in the first pass.
The first type must be convertible to the constructor's argument type.
The lowered type must be the properly-abstracted form of the AST type.
The names of the output files are derived / from the main output file.
The normal logic below will decide if we're done at that point or not.
The only other thing we return WillSucceed for currently is an upcast.
The set of remembered files is cleared out during MemoryManager reset.
The successor blocks and the destination blocks may have no arguments.
The suspend hook will decref the newly created generator if it throws.
The user of the typed GEP may but we will catch that via the dataflow.
The value won't be live but it's ok to use it to track down the guard.
The values must have been fully initialized before we close over them.
Then make sure that the rcid of the retain is the same as our release.
There is no VarDecl for a SILGlobalVariable, and thus also no context.
These are created as part of type-checking "return" in an initializer.
These are the paths from blocks with known out-availability to the BB.
These cases are differentiated using the bottom 3 bits of the pointer.
These constants don't correspond to method families we care about yet.
These don't need a register because their values are static or unused.
These values cache the function_ref so we don't emit multiple of them.
This arg and all args that follow are intended for the PHP application
This behavior is undocumented and Bison users should not rely upon it.
This can happen due to either substitution reabstractions or bridging.
This copies all 128 bits in XMM, thus avoiding partial register stalls
This encompasses:  1) Updating the type guards on the affected blocks.
This file contains 2-pass color quantization (color mapping) routines.
This file defines several version-related utility functions for Swift.
This file implements support for importing Clang types as Swift types.
This heuristic also simplifies which regions we want to specialize on.
This is also why I used std::string instead of the HHVM provided type.
This is an unpopulated slot that may occur from capacity being larger.
This is called at the end of BBs and if we run into an unknown / call.
This is either a init_existential_addr or the source of a / copy_addr.
This map memoizes reachability of IR blocks during tracelet formation.
This means all these incoming branches are about to go away anyway ...
This means there are no aliases accessible within this function scope.
This pass performs the last part of stack promotion for array buffers.
This set is generally very small because claiming a note removes / it.
This should be handled by IRGen emitting the enum strategy explicitly.
This should be kept in sync with ArchetypeBuilder::getAllArchetypes().
This should return false if the MArrayIter is in the reset flag state.
This software is provided "as is" without express or implied warranty.
This structure gathers a php and async stack trace when log is called.
Thus we /    insert a release right before any exit from the function.
To ensure this we do not want them to be added to the constants table.
To make this work, we need to do some weird things in the catch trace.
Treat everything apart from GET and HEAD as a post to be like php-src.
True if a function's signature in LLVM carries polymorphic parameters.
Try to find a parent SwitchEnumInst for the current predecessor of BB.
Try to find the conformance of the value type to _BridgedToObjectiveC.
Try to look up an existing specialization in the specialization cache.
Tuple and nominal-type patterns are not themselves directly refutable.
Unknown identifier data, which this version of the compiler won't use.
Use SILTwoOperandsLayout: type, (DeclID + hasOperand), and an operand.
Use the data flow results, come up with places to insert the new inst.
Usually nodes have few predecessor nodes and the graph depth is small.
Verify that this use does not otherwise allow the alloc_box to escape.
Walk the use list of the pointer, collecting them into the Uses array.
We also Compute the max store set at the beginning of the basic block.
We can end up here if we have two retains in a row and then a release.
We can return multiple decls, for now, we use the first lookup result.
We can't import a property if there's already a method with this name.
We can't move f over d or we'll clobber the Vptr we need to load from.
We cannot handle overlapping fixits, so assert that they don't happen.
We currently do not handle early exits, but do handle trapping blocks.
We currently only handle locally identified values that do not escape.
We didn't find the end of the string literal if we ran to end of line.
We do not need to summarize a function since it is the outermost loop.
We don't care about source ranges on implicitly-generated expressions.
We expect to see a function type here, but if we don't, use the colon.
We know exactly which FileUnits may have SIL those in the main module.
We know the key doesn't exist, but aren't making use of that fact yet.
We let it diagnose any issues with malformed tokens or other problems.
We lose buf's position as we iterate, so we need buf_start to save it.
We may eventually want to use this information, but def it out for now
We might be able to stick code into SILBuilder that has this behavior.
We need to update ssa if a value is used outside the duplicated block.
We now have the path to the shared lib, move to the parent 'lib' path.
We only substitute for substitutable types and dependent member types.
We use the heap object extra inhabitants over the class pointer value.
We will be adding foreign results (from another sink) into TargetSink.
We'll first find the enclosing CallExpr, and then do further analysis.
We're done if there is a 'where' clause, 'else' or any other noncomma.
We're increasing ref count by calling toArray, need to adjust it later
Whether we've already complained about problems with this conformance.
Will throw PHP catchable Exception in case the connection isn't valid.
Zend doesn't define the STD* streams in server mode so we don't either
__FILE__ and __DIR__ are special unary ops that don't have expressions
allow the script to capture the peer cert and/or the certificate chain
android's asset manager does not work with paths that start with a dot
arm64 requires marker assembly for objc_retainAutoreleasedReturnValue.
at this point we are free to do whatever we'd like with the transport.
destroyaddr on the box is load+release, which is treated as a release.
for the initial timer, we want to stagger time for large installations
get length of string if buffer if less than buffer size or buffer size
if param_type is PDO_PARAM_ZVAL the driver has to provide correct data
if query or fields weren't passed, make them default to an empty array
in case postsend/cleanup output something PHP5 always provides _START.
intercepted functions need to pass all args through to the interceptee
isSelfInitUse - Return true if this apply_inst is a call to self.init.
libxml/xpathInternals.h defines CHECK_ERROR, we need to undef it first
only incremement callid if contains valid callid as callid is optional
op.subop (OODeclExistsOp) would be useful with resolution of the class
php5 xdebug throws an unimplemented error when no valid match is found
prev is pointing to the tail of the list, current is pointing to null.
property names and getter names (by choosing to only have a property).
remainingProps should include the current property being unserialized.
replace the connection incase we get a different one back (persistent)
shutting down servers, so need to terminate all Keep-Alive connections
so lower level transports can ignore incoming "Connection: keep-alive"
subtract immediate move byte to destiny and do not touch higher 56bits
we're linting, reset whatever logger settings and write once to stdout
without this, emitClass allows classes with interfaces to be hoistable
y_src, u_src, v_src - Pointers to input Y, U, V row data respectively.
'fallthrough' is valid only in scopes where / this is greater than one.
(In principle, this can be done in the callback storage if we need to.)
(In that case, we'll post a diagnostic while visiting the parent enum.)
...but we don't actually expose individual value witnesses (right now).
/ / If the condition is not true, complain about the problem and abort.
/ / Note that, if the requested reference kind is a relative reference.
/ / We will rotate at most up to the basic block passed as an argument.
/ However, the client needs to update the dominator of the exit blocks.
A "branchint" model takes a Bool expected value as the second argument.
A 4-connected neighbor:  pixel above, below, left, or right of a pixel.
A CleanupBuffer is a location to which to temporarily copy a / cleanup.
A catch block has its own scope for variables bound out of the pattern.
A class to walk the AST to build the type refinement context hierarchy.
A critical edge has more than one outgoing edges from the source block.
A list of nodes for which we already calculated the dominator frontier.
A much simpler version of the above specialized for GP-arg-only methods
A stack of expressions being walked, used to compute existential depth.
A thick function also references the boxed partially applied arguments.
A witness is always more specialized than the requirement it satisfies.
Add location information for the given continuation to the given frame.
Add the unmanaged LLVM values lowered from a SIL value to an explosion.
Adjust i386-macosx to x86_64 because there is no Swift stdlib for i386.
After the first branch is processed, the arguments vector is populated.
Aggregation results will be stored in the "result" key of the response.
Aggregation results will be stored in the "retval" key of the response.
All methods are visible if the context is the class that declared them.
All next level locations are alive, create the new aggregated location.
Allocate another word of private data storage in the conformance table.
Allocate the output buffer --- it will be released when done with image
Allow strings to be passed to pointer-to-byte or pointer-to-void types.
Also note that any exit head must have a callee main block predecessor.
An invalid site is missing something like an ActRec, a func, or a Unit.
Analyze the init value being stored by the instruction into a property.
And our payload is refcounted, insert a strong_retain onto the payload.
And the order of the field must be identical to the construction order.
Any control flow command gets installed here and we continue execution.
Apply base type substitutions to get the fully-substituted nested type.
Archetypes and existentials are only class references if class-bounded.
As a placeholder give them the / location of the newly cloned function.
At this point we calculated the locations of all of the new Phi values.
Attempt to find a specific callee for the given conformance and member.
Bail out if string literals concatenation optimization is not possible.
Both passes are idempotent and can be run independent of other modules.
Boundary markers that indicate the beginning and end of a token stream.
Branch on the boolean based on whether we're testing for true or false.
Build a setter thunk with the latter signature that maps to the former.
Bump the reference count of witness functions referenced by this table.
Cache the foundation module name so we don't need to look for it again.
Calculate immediate dominators with the iterative two-finger algorithm.
Cast all non-arrays to strings since that is what everything used ot be
Catch-all to make sure we don't silently accept something we shouldn't.
Certain builtin function refs we know can never use non-trivial values.
Check for protocol conformance of archetype via superclass requirement.
Check if both blocks pass the same arguments to the common destination.
Check if is a bridging cast, i.e. one of the sides is / a bridged type.
Check if the normal and error results only have ARC operations as uses.
Check if the target is an existential that Optional always conforms to.
Check to see if we have multiple inout arguments which obviously alias.
Check valid successor/predecessor edges, and identify reachable blocks.
Check whether a retain on the pointer is available in the predecessors.
Check whether the context of any of the fields in the chain is a union.
Check whether the type variable must be bound to a materializable type.
Check whether we can downcast the source value to the Objective-C type.
Check whether we need to bridge the value through an Objective-C class.
Check whether we're looking up a factory initializer with class_method.
Checks whether the cmd has any breakpoints that match the current Site.
Claim the next character if it exists and equals the given / character.
Claim the var initializer as the parameter to the `initStorage` method.
Class metadata can be used as an object when ObjC interop is available.
Classes that might not have Swift metadata use a different symbol name.
Clear oom/timeout while handling exception and restore them afterwards.
ClearSilver is not thread-safe when calling hdf_init(), so guarding it.
Clone the dominator tree from the original region to the cloned region.
Clone the parameter list over for a new decl, so we get new ParamDecls.
Collect all the instruction ranges for the current block and sort them.
Continues create extra backedges, add them to the appropriate counters.
Create a debug scope for the function using astNode as source location.
Create a special arena to be used for allocating objects in low memory.
Create an RValue by emitting destructured arguments into a basic block.
Create an argument on the return-to BB representing the returned value.
Create the aggregate for the current complete Node we are processing...
Create the class entry and associate it with an HPHP::Class if possible
DceFlags tracks the state of one instruction during dead code analysis.
Decide whether we need a temporary stack buffer to evaluate this 'let'.
Decode the intrinsic's LLVM IR type, and map it to swift builtin types.
Decode the success- and failure-ordering arguments, which are required.
Dereferencing the SuccIterator returns the predecessor's SILBasicBlock.
Deserialize all WitnessTables inside the module and add them to SILMod.
Determine how many tags we need to accommodate the empty cases, if any.
Determine whether the given dependent type is equal to a concrete type.
Determine whether the given destructor has an Objective-C / definition.
Determine whether the new declarations matches an existing declaration.
Different from simplify(), this works even when `block' is unreachable.
Documentation comments over the case are attached to the enum elements.
Drill down to the raw pointer using intrinsic knowledge of those types.
Drop the reference count of witness functions referenced by this table.
Each match in an ApplyExpr is evaluated for how close of a match it is.
Emit a diagnostic, if necessary for a potentially unavailable accessor.
Entries will be sorted by instruction index, area then machine code pc.
Every FuncFamily is non-empty and contain functions with the same name.
Extract the size of the conformances block from the head of the section
FIXME: Continue accepting the old path for simulator libraries for now.
FIXME: If we ever split all critical edges, this should be relooked at.
FIXME: Name won't match demangled context generic signatures correctly.
FIXME: See the comment for SelfTypeVar for information about this hack.
FIXME: This looks completely wrong for varargs within a parameter list.
FIXME: This should be using std::min(protocol's access, type's access).
FIXME: We could produce the greatest common supertype of the two types.
FIXME: We should integrate this into the LinkEntity cache more cleanly.
FIXME: We should mirror properties of the root class onto the metatype.
FIXME: revisit this once we get default definitions in protocol bodies.
Fall through, as to match Zend, the warning below should also be raised
Fast path: The requested capacity is greater than the current capacity.
Fetch a global reference to a reference to the given Objective-C class.
Figure out whether there will be a default argument for this parameter.
Filter the candidate list based on the argument we may or may not have.
Finally we try to sink retain instructions from this BB to the next BB.
Find a function marked with the LLDBDebuggerFunction attribute instead.
Find the locators which have the largest numbers of distinct overloads.
Finding the date and time of the new moon (or molad) is the first step.
First, check for characters for which JSON has custom escape sequences.
For Objective-C initializers, we only have an initializing initializer.
For class, archetype, and protocol types, look up the dynamic metatype.
For non Ambiguous pointers, try to drill down and resolve the edge name
For weak and unowned types, convert the reference to the right pointer.
Forward arguments according to a function type's ownership conventions.
GEP to the appropriate index, avoiding spurious IR in the trivial case.
Get the edge values from the terminator to the destination basic block.
Given "NSMagicArmor" and "NSMagicArmory", only / "NSMagic" is returned.
Given a DIE representing an arbitrary type, return its equivalent Type.
Given the address of an existential object, load its metadata / object.
Heap object destructor for a generic box allocated with swift_allocBox.
Helper function to remove any cv (and restrict) qualifiers from a type.
Here we handle "mixed", typevars, and some other ignored typehints (ex.
However, even if the iterator is at the end, it is safe to call next().
Identity function, used to suppress warnings about constant conditions.
If Right is still not None, then get both values and AND them together.
If all of the elements were guaranteed, we can form a guaranteed tuple.
If either (or both) types are type variables, unify the type variables.
If it patches the Immed, replace the vasm for its non-immediate variant
If it's a computed variable, push a reference to the getter and setter.
If it's not found, instructs the JNI environment to throw an exception.
If not FBCompactSerializeBehavior::MemoizeParam fall-through to default
If one of the merged edges spans a call then mark them both as spanning
If our input is trivial and our output type is not, do not do anything.
If set and its value is "isdbgrid", it signals we connected to a mongos
If that's less than best-so-far, update best distance and color number.
If the constructor is invalid, we fail entirely to avoid error cascade.
If the enclosing category is invalid, we cannot import the declaration.
If the last path element is an archetype or associated type, ignore it.
If the next token isn't a following '(', we don't have a compound name.
If the opaque value is not an lvalue, open the existential immediately.
If the original annotation was soft, make sure we preserve the softness
If the result was returned autoreleased, implicitly insert the reclaim.
If the resulting declaration context is not a nominal type, we're done.
If the srcs and dsts don't intersect, simplify to a sequence of copies.
If the uninitialized array is only written into then it can be removed.
If there is an inout difference in self, load the inout self parameter.
If this argument was completely removed, don't emit any Fix-Its for it.
If this conversion will cause a function conversion, score it as worse.
If this declaration is already in the lookup table, don't add it again.
If this is a direct/devirt method application, check the location info.
If this is an "inout" marker for an identifier type, consume the inout.
If this is default initialization, call the default argument generator.
If this property is in a class or class extension context, add "final".
If we are currently delegating to a generator, return its value instead
If we are inheriting a variable environment, then `args' must be empty.
If we can't resolve the base type, then we can't solve this constraint.
If we diagnosed this parameter as a parse error, propagate to the decl.
If we did evaluate into the initialization buffer, disable the cleanup.
If we didn't clean up the rethrow destination, we screwed up somewhere.
If we didn't find a copy_addr to fold this into, emit the destroy_addr.
If we didn't parse any patterns, don't create the pattern binding decl.
If we don't have a formal superclass, start with the basic heap header.
If we find a closure, update its declcontext and do *not* walk into it.
If we have a conflict with the word after the preposition, don't split.
If we have a trivial type, we do not need to put in any extra releases.
If we have a type with reference semantics, emit a load/strong release.
If we have an order number for this function, set it up as appropriate.
If we have are recursing into validation and already have a type set...
If we have the VarDecl, use it for more accurate debugging information.
If we reach the end of the pattern without matching, display a warning.
If we're asking about parameters, we'd better have a FunctionProtoType.
If we're in an inout conversion scope, disable nested writeback scopes.
If we're not returning self, then return () since we're returning Void.
If we're storing a (valid) Zend resource, call its destructor (if any).
Ignore empty arguments (other things may still take them as arguments).
Ignore results that are not the right kind of nominal type declaration.
Implicitly import the SwiftOnoneSupport module in non-optimized builds.
Import typedefs of blocks as their fully-bridged equivalent Swift type.
In PHP, array_shift() will cause all numerically key-ed values re-keyed
In practice, it will either be a thunk, or an optimizer specialization.
In that case, params win (which is different than zend but much easier)
Increment the refcount so it isn't cleaned up at the end of this method
Inherit the name from the "originating" declarations, if there are any.
It is provided "as is" without express or implied warranty of any kind.
It will return early after parsing any top level code in a main module.
It's binary if either both sides are bound or both sides are not bound.
Just to silence warnings until we remove them from various config files
Keep track of loop headers - we don't want to jump-thread through them.
Let's use the IGM from which the function is referenced the first time.
Literals cloned from the caller take on the new function's debug scope.
Load the 'isBitwiseTakable' valueWitness from the given table as an i1.
Loads, rvalue adjustment, and scalar-to-tuple conversions are implicit.
Local function to perform the depth-first search of the solution space.
Look for checks that guarantee that start is less than or equal to end.
Lookahead one token to decide what kind of call completions to provide.
Macros are never stored within a non-translation-unit context in Clang.
Make a table of the methods on this class, excluding interface methods.
Make sure that AI's self argument has the same RCID as our instruction.
Make sure that each one of our successors only has one predecessor, us.
Make sure the concrete type fulfills the requirements on the archetype.
Make sure we are extracting the number value and not the overflow flag.
Map each initializer-containing function to its final initializer call.
Map each let property to the instruction sequence which initializes it.
Map the indices of array element initialization stores to their values.
Move any instructions from the EpilogBB to the end of the 'pred' block.
Multiple empty elements are packed into the payload for each tag value.
NOTE: It's generally not safe to ignore private decls in nominal types.
No multi-threading: the compilation only produces a single output file.
No output filename was specified, or an output directory was specified.
None of the children had solutions, enumerate supertypes and try again.
Normalize incoming arc weights and compute avgCallOffset for each node.
Not likely to be a match if users provide more arguments than expected.
Note that Adar II is assigned the month number 7 and Elul is always 13.
Note that this is expected to be sorted in / quasi-lexicographic order.
Note that this is only a simplified model and not correct in all cases.
Note that we rely on the semaphores being zeroed when they are created.
Nothing to do here because the default stream type is empty_string_ref.
Null converts to the empty string when being compared against a string.
Number of bytes for any private storage used by the conformance itself.
Number of characters read into yy_ch_buf, not including EOB characters.
Number of subclasses which cannot be handled by checked_cast_br checks.
Observing properties will have getters and setters synthesized by sema.
On logical errors, the error_message will be populated with the reason.
One member is in a protocol extension, the other is in a concrete type.
One problem with getServiceDataInstance() is that it's not thread safe.
Only allow allocation of DeclContext using the allocator in ASTContext.
Open an existential value into a new, opaque value of / archetype type.
Otherwise, get the fixed layout information from reflection / metadata.
Otherwise, if the origin gives rise to a better path, that's also cool.
Otherwise, preserve function type attributes from the substituted type.
Otherwise, we failed to find any interesting information, return false.
Our specializations should have resolved the subexpr to the right type.
Parse the list of condition-bindings, each of which can have a 'where'.
Perform SIL optimization passes if optimizations haven't been disabled.
Pop off the underscore since it serves as the end of our mangling list.
Populate the int-based release and build, if we have all digits in them
Prefer declarations in the current module over those in another module.
Process all external thread events that have completed their operation.
Public method, no private ancestor, no need for further checks (common)
Push in a special number to say that IDs are indices to the Archetypes.
Push/pop mechanism is as simple as X64: it stores 8 bytes below the SP.
Re-type-check the argument with the expected type of the candidate set.
Reads a python-style longstring, or returns false if we don't have one.
Represents a map with numeric keys 0, 1, ..., n-1 (but see SKIP below).
Return the count of shared elements in the front of two forward ranges.
Return the number of bytes copied, including the terminating null byte.
Return true if inlining this call site into a cold block is profitable.
Return true if this SILBBArgument is the result of a call to self.init.
SP relative offset of the first non-frame cell within the inlined call.
Set an internal breakpoint at the target of a control flow instruction.
Set the token to a sentinel so that we know the lexer isn't primed yet.
Should never read more than 10 bytes, which is the max for a 64-bit int
Simulate the reference count effects of the calls before removing them.
Since builtin types are sign-agnostic, print the signedness separately.
Since we cannot "adjust back" diagnostics, we just return an empty set.
Skip type decls if they aren't visible, or any type that has a witness.
Slice off the NecessaryBindings struct at the beginning, if it's there.
So we throw it in a bump-allocator that's mprotect'd to prevent writes.
Some instructions can cause PHP to be invoked without an explicit call.
Someone created it between our check above and getting the write lease.
Sometimes we have handlers in generated code, i.e., Continuation::next.
Special-case some logic around emitting assert(), or jumping around it.
Split the '+'-delimited addresses and resolve their associated symbols.
Stack result is a new string so we're responsible for decreffing value.
Step out, but save the filter first, as it is cleared when we step out.
Stop GCC from complaining about a noreturn function possibly returning.
Store the async function's return value to the AsyncFunctionWaitHandle.
Stores parsed user/password/database to be copied to each server struct
Strideof should never return 0, so return 1 if the type has a 0 stride.
Strip off the part of the name that is redundant with type information.
TODO: It sort of sucks having to print these bottom up computationally.
TODO: Or we always retain them when guaranteed contexts aren't enabled.
TODO: We could clean up from a reclaimed uniquely-referenced error box.
TODO: We need to split edges from non-condbr exits for the SSA updater.
TODO: consider producing warnings when we decide not to merge comments.
Target is within Node and Node is really the parent of Target, take it.
The 5 month cycle is used to account for the varying lengths of months.
The assumption is that we / cannot deinitialize memory via projections.
The backtracking also seemed a bit convoluted to do directly on the IR.
The best-known return type of the function, if we have any information.
The byte order is still little endian but the word order is big endian.
The case statement can have multiple case items, each can have a where.
The code path in handleSlowPath currently assumes we've ruled this out.
The conversion may be a no-op if the right operand is already a double.
The element is transferred into the array (should already be incref'd).
The following consume some arguments only in the event of an exception.
The following instructions are used for debugging memory optimizations.
The given callable is invoked with the adjusted (if any) opcode to use.
The higher-level start logic will try *very* hard to recover from this.
The labels are in scope for both the 'do' and all of the catch clauses.
The list of instructions whose evaluation resulted in error or warning.
The only other transformation we know how to do safely is add a setter.
The operand must be at the right abstraction level for the existential.
The presence of 'dynamic' or 'final' blocks the inference of 'dynamic'.
The rest also applies to other integer formats, so fall into that case.
The resulting YUV data can be directly fed into the WebPEncode routine.
The transport is overriding everything and just handing us the filename
The type may be optional due to a failable initializer in the protocol.
The value is out-of-line, but we can't take it, since it may be shared.
The verifier will check they are only created at the appropriate times.
Then change the immediate dominator of the header to be the pre-header.
Then it is not possible for CallB / to not share any states with CallA.
Then we unmap and map the lower portion of the RDS at the same address.
There are also some special cases for SetM for different base types: 1.
There was an explicit witness available, but it failed some / criteria.
There's no reason to generate code to try to go to the next part of it.
Therefore, in this case, we use the address of the lazy-cache function.
These are an / implementation detail of type metadata access functions.
These are the amounts to shift an input value to get a histogram index.
These can include paths from a release back to the alloc_box in a loop.
These days it is often faster than table lookups or integer arithmetic.
Third case: conformance needs both default requirements to be filled in
This SILValue may be a BB arg, if it was a cast between optional types.
This allows the user to break out of (or restart) the entire construct.
This array holds the distance to the nearest-so-far color for each cell
This file implements IR generation for polymorphic operations in Swift.
This file implements implicit derivation of the ErrorProtocol protocol.
This function is called from hphplex_destroy(), so don't allocate here.
This happens e.g. if a public class contains a (dead) / private method.
This is handled in the runtime, so it doesn't need a special cast kind.
This is separated from the version above to speed it up by a few cycles
This is the number of witnesses that all conforming types must provide.
This is tightly coupled with the implementation of array.uninitialized.
This needs to happen outside of the cleanups scope we're about to push.
This notice may not be removed or altered from any source distribution.
This section name is magical for the Darwin static and dynamic linkers.
This struct is not used in this scanner, but its presence is necessary.
This table maps the 128 ASCII characters into the 32 character classes.
This will have just used up the first values in the list, pop them off.
This would change if we introduced a native runtime-hookable mechanism.
Together with the class for / which the function implements the method.
Tries to remap the location from a previous snapshot to the latest one.
True if the type has known CoreFoundation reference counting semantics.
Try to resolve the dependent member type to a specific associated type.
Try to transitively deserialize everything referenced by this function.
Turn on the store bit at the block which the stack slot is deallocated.
Typedef declarations might be CF types that will drop the "Ref" suffix.
Unless we called ArrayObject::offsetExists, there's nothing more to do.
Update the lists of all conformances to remove superseded conformances.
Updates `j' to refer to the same instruction after the code insertions.
Use a non-implicit attribute so it shows up in the generated interface.
Use it if `len' can often be large enough to require cap code encoding.
Valid journal_mode values: delete, truncate, persist, memory, wal, off.
Walk the base expression to ensure we erase any existentials within it.
Walk through the destination expression, resolving what the problem is.
We can assume we are running on at least the minimum deployment target.
We can't save the Class* since it moves around from request to request.
We don't need any / of the requirements, because they will be inferred.
We don't run PHP destructors while we're unwinding for a C++ exception.
We failed to prove anything, it could be read or written by the deinit.
We had more than kNumSIMDRegs doubles, but less than numGPRegArgs INTs.
We have already checked that the operands of our struct_extracts match.
We have to merge the strings as litstrs to ensure namedentity creation.
We may in such a case, be too conservative with our other predecessors.
We may want to be more precise here in the future or emit a diagnostic.
We might have cloned there might be critical edges that need splitting.
We need to make sure the Objective-C runtime has initialized our class.
We need to pop the cell that was on the stack for the conditional jump.
We only handle the situation where there is exactly one candidate here.
We set to Uninit all locals beyond any params and any closure use vars.
We should output to a temporary file, since we're not at the top level.
We try to reuse the type checker associated with the ast context first.
We use a worklist for iteration to visit the blocks in dominance order.
We want the above, conformance-based result to be the only viable path.
We will unique this after we have finished processing all predecessors.
We'll invalidate the analysis that are used by other passes at the end.
We'll set discriminator values on all the autoclosures in a later pass.
We've already incReffed the array above so we don't need to do it here.
When data is right(), expire is not valid to read, instead it's a lock.
When we hit m_warmupReqThreshold, add additional threads to the server.
When we see a reference to the 'super' expression, capture 'self' decl.
Whether the given Objective-C type can be imported as an optional type.
Whether we see a "once" call to callees that we currently don't handle.
Win32 doesn't have a working poll(), so we use the old select() branch.
WorklistList is the actual list that we iterate over (for determinism).
Wrapper for camel_case::toLowercaseWord that uses string scratch space.
XXX the maxmagic has to be reset each time we load some new magic file.
address_to_pointer is a mutable escape, which we model as an inout use.
avail_in on the entry block (with no preds) will be set to all 1 below.
but m_timerActive is still set, so we haven't processed the signal yet.
eat up the passed in storage even if it won't be filled in with varargs
enter new asio context and set up guard that will exit once we are done
first character cannot be ' or -, unless explicitly allowed by the user
holder is needed to make sure none of the Keys get deleted prematurely.
http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/C_002b_002b-Attributes.html
if the given filename is an EGD socket, don't write anything back to it
if we get here, we can be sure that we have enough bytes to copy safely
initially parse the heap to find valid objects and initialize metadata.
it's unlikely a class is in the cache so check first without write lock
m_aux.u_deepInit is true for properties that need "deep" initialization
m_tl should be NULL if createInstance fails but better safe than sorry.
make_relative_path so we do not try to put files or dirs in bad places.
move only the byte result to the destination, keeping the higher 56bits
nullptr tvRef pointer, representing an instruction that doesn't use it.
only constants and physical registers can be live-into the entry block.
php5 xdebug does not throw an error if only one of the two are provided
proxygen will send onTimeout if we don't receive data in this much time
realize(): return the SSATmp* needed by CallBuiltin for this parameter.
some servers don't open a ftp-data connection if the directory is empty
super.init() calls require that super.init has not already been called.
there may be an active this, but we can just fall through in that case.
void Renumber(ArrayData*)  Renumber integer keys on the array in place.
we can't really call bc_init_numbers() that calls into this constructor
'break' with no label looks through non-loop structures except 'switch'.
(-1) catches illegal zero case as unsigned underflows to positive large.
(U_BUFFER_OVERFLOW_ERROR means that *target buffer is not large enough).
- Both Func* and Class* must fit in 32-bit value (i.e. be low-malloced).
- Iterate over each typecheck that we decided would make sense to hoist.
/ / AggregateAddressUsers records uses of the aggregate value's address.
/ / TODO: We have not determined whether to support inexact type checks.
/ Character, string, float, and integer literals are all keyed by value.
/ FIXME: Assumes the explosion is broken into word-sized integer chunks.
/ Generic functions and protocol witnesses carry polymorphic parameters.
/ The former preheader now dominates all of the former headers children.
/ The type must be dynamically known to have extra inhabitant witnesses.
A partial equivalent of enterTCHelper, used to set up the ARM simulator.
A private property from ctx trumps any other property we may have found.
After llvm-ir they have no use and show up as calls in the final binary.
All the argument types must be materializable (before inout is applied).
Allocate memory for the destination buffer (it will be zero-terminated).
Also compute the MaxStoreSet at the current position of the basic block.
An application, which we look through to get the function we're calling.
And then transitively deserialize all SIL referenced by those functions.
Any loaded value is good for the duration of this expression evaluation.
As a special case, Clang functions and globals don't get mangled at all.
As such, all elements must be initialized and super.init must be called.
As we move into the range of mapped optionals, start lowering the depth.
Assume that we are converting from a literal if the Source size is 2048.
Besides self, don't suggest mutability for explicit function parameters.
Branch on whether the input is optional, this doesn't consume the value.
Builder that helps construct a lookup result from the raw lookup / data.
But if there's a hint, we may have needed that (recorded already above).
C functions imported as static methods don't consume any real arguments.
Check if execution of a given Apply instruction can result in overflows.
Check if the argument passed to the first predecessor is a literal inst.
Check if the value of V is computed by means of a simple initialization.
Check to see if the requested value is fully available, as an aggregate.
Check whether a superclass has already declared this protected property.
Check whether the supplied argument is the same as the default argument.
Checks relating to StaticStr and StaticArr are not, in general, precise.
Classes imported from Objective-C never requires dynamic initialization.
Clear out any exceptions that might be left over from previous requests.
Clear the ref count state so it can be used for future pairs we may see.
Compute mlo -- check for special case that d is a normalized power of 2.
Computes the isAscii flag of a concatenated UTF8-encoded string literal.
Constants from interfaces implemented by superclasses can be overridden.
Construct a LSLocation to represent the memory read by this instruction.
Copy the successors into a vector, dropping one entry for the liveblock.
Create a specialized function with ReabstractionInfo for each attribute.
Create an unconditional branch that propagates the newly created BBArgs.
Decide which potential archetype is to be considered the representative.
Decrement ref count for each SILGlobalVariable with static initializers.
Default arg values are not currently allowed to depend on class context.
Delete these instruction and others that become dead after it's deleted.
Destructors are a necessary part of class metadata, so can't be delayed.
Determine whether this is the protocol 'Self' constraint we should skip.
Diffrence between static and uncounted is in the lifetime of the string.
Don't continue looking through submodules of modules that have overlays.
Elements outside of the range specified may not be / computed correctly.
Emit a check for whether a non-native function call produced an / error.
Emit matching release for owned self if we are moving the original call.
Emit the call to super.init() right before exiting from the initializer.
Empirical results indicate that a value in the 2-10 range is reasonable.
Ensure that all of the requirements of the protocol have been satisfied.
Every instruction's BCMarker must point to a valid bytecode instruction.
Exit heads are non-main-blocks with at least one main-block predecessor.
FIXME: Egregious hack to avoid failing when there are no declared types.
FIXME: In a function argument context, arrays should import as pointers.
FIXME: We'd like to drop just the problematic protocols, not everything.
FIXME: duplicated from computeDefaultAccessibility in TypeCheckDecl.cpp.
FIXME: rename generatorType to iteratorType due to the protocol renaming
FIXME: this does not include types that conform to an expected protocol.
FIXME: using the range up to a dot is silly when candidate isn't a file.
Fallthrough from here on is side-exiting due to an InvalidSetMException.
Fetch the lazy witness table access function for a protocol conformance.
Figure out the name for this argument, which comes from the method name.
Figure out the type of the declaration that we're using for comparisons.
Find a path from the given set of origins to the destination / protocol.
Find a solution that's at least as good as the solutions that follow it.
Find the type checked version of the LiteralExpr used for the raw value.
First of all, if we have zero or one columns, this is trivial to decide.
First we have the histogram data structure and routines for creating it.
First, mark every (non-interface, non-special) method as AttrNoOverride.
For QoI, in future should emit a fixit to update the existing attribute.
For now, we don't allow stored properties to be potentially unavailable.
For parens and vars, just set the type annotation and propagate inwards.
For the setter, first check that we have the right number of parameters.
For type-sugar reasons, prefer the spelling of the default literal type.
Function parameters are ABI compatible if their differences are trivial.
FunctionSuspend will decref the newly allocated waitHandle if it throws.
Functions called from the callee are assumed to have DefaultApplyLength.
Further indent, and include the line to the right child if there is one.
GOVERNMENT USE: If you are acquiring this software on behalf of the U.S.
Generate the select_value right before the first cond_br of the pattern.
Generic translation: convert both to strings, and then concatenate them.
Get the filename in which execution will proceed when execution resumes.
Get the instance size and alignment mask for the given class / instance.
Get the most optimal resilience expansion for the body of this function.
Get the natural IR type in the body of the function that makes the call.
Get the requirements that aren't rooted in the applied 'self' parameter.
Given a class metatype, produce the necessary heap metadata / reference.
Go through all of the pretty-printed entries and record their locations.
Helper flag used during building the worklist for the dataflow analysis.
Helper for dealing with disjointDataFn's---most of them are commutative.
Helper for emitting instructions whose Vptr operand specifies a segment.
Helper for returning the lowest index of an AStack range, non inclusive.
Hook up the Phi nodes, loads, and debug_value_addr with incoming values.
However, if it's dependent, doing so won't allow us to cache the result.
However, if there are default values, we don't actually want to do this.
I tried some trickery to avoid a branch here, but gcc did not cooperate.
Ident appropriately depending on whether we're inside a for loop or not.
If F is an external declaration, there is nothing further to do, return.
If NSError wasn't loaded, any base class constraint must not be NSError.
If inferredReturn is TBottom, the callee didn't execute a return at all.
If invokeGet fails due to recursion, it leaves KindOfNull in get_result.
If it is before, it may produce some of the elements we are looking for.
If it isn't synthesized, then DCE will report an error on the dead code.
If splicing blocks not in the same function, update the parent pointers.
If the argument is a metatype of what we're looking for, propagate that.
If the argument is not present then we expect members without arguments.
If the base is a reference type, just handle this as loading the lvalue.
If the cast succeeded, use the result value as the class instance below.
If the condition is an integer literal, we can constant fold the branch.
If the declaration is not in type context, there's no materializeForSet.
If the first argument name doesn't start with a preposition, add "with".
If the inferred property types don't match up, we can't form a property.
If the memory object has nothing in it (e.g., is an empty tuple) ignore.
If the object has a small number of properties, just emit stores inline.
If the overriding declaration is 'throws' but the base is not, complain.
If the schemas don't even match in number, we have to go through memory.
If the score is relatively high, don't warn: this is probably unrelated.
If the takeover was fully completed the socket should already be closed.
If the true/false values already match, it must be a contextual problem.
If there are no type variables in the fixed type, there's nothing to do.
If there were no replacements (i.e., matches) return original subject(s)
If there's no abstraction difference, we can just materialize as normal.
If this assert is failing, you may have forgotten a sync point somewhere
If this generic parameter has an archetype, use it as the concrete type.
If this is a class reference type, we have reached end of the type tree.
If this is a constraint inside of the disjunction with a fix, ignore it.
If this is a debugger function, suppress 'try' marking at the top level.
If this is a trailing comma in an object definition, we're in Mode::KEY.
If this is not a function name, just parse the base name and we're done.
If this is the first time saving state for block, create a new snapshot.
If this is the last constraint, just pop it off the list and we're done.
If this type isn't interesting, mark it as if it was explicitly ignored.
If this was not the last member type, swap it with the last member type.
If we already have a main class, and we haven't diagnosed it, do so now.
If we already know the concrete type is recursive, just return an error.
If we already visited this BB, don't reprocess it since we have a cycle.
If we aren't running the LLVM ARC optimizer, we don't need to emit this.
If we can directly coerce the scalar values, avoid going through memory.
If we couldn't parse anything for one of the types, propagate the error.
If we do find a type, we use it to check for contextual type mismatches.
If we do not have any increment to attempt to match up with again, bail.
If we don't have a connected server then there is no point in continuing
If we don't have a fixed type, use the standard copy-opaque-POD routine.
If we don't have an indentation location yet, grab one from this member.
If we don't see a 'while', this is just the bare 'do' scoping statement.
If we dropped "with" and ended up with a reserved name, put "with" back.
If we had a single component, try looking up an enum element in context.
If we have a conflict with the word before the preposition, don't split.
If we have a foreign error convention, restore the original result type.
If we have an Initialization, emit the tuple elements into its elements.
If we have an exact match, then we must have an argument list, check it.
If we have an interpolation argument, dig out the constructor if we can.
If we hit a type variable without a fixed type, we can't solve this yet.
If we overrode a decl from an extension, it won't be in a vtable either.
If we unwrapped anything, our list of constraints is the unwrapped list.
If we're actually turning this into an lvalue tuple element, don't load.
If we're asked to convert to an UnresolvedType, then ignore the request.
In such a case, we assume conservatively that the bit cast could use it.
In that case the length is just the size of the struct without sun_path.
In the indirect block, clear the low bit and perform an additional load.
Indicates that the cell is only used if it was the last reference alive.
Initialize the state for this BB with the state of its predecessor / BB.
Inlining deletes the apply, and can introduce multiple new basic blocks.
Install a Clang module file extension to build Swift name lookup tables.
It defines an interface as to how the / code motion procedure should be.
It would be better, IMHO, to skip the C from the S part of the encoding.
It would be good to make these the same too, since we're fuzzy matching.
It's a builtin which has the same value in its first and second operand.
It's better to leak memory here than to have random crashes on shutdown.
It's okay if this estimate is wrong as we will grow or shrink as needed.
It's the caller's responsibility to ensure that the old function exists.
Its subexpression should be convertible to a tuple ((T.Key,T.Value)...).
Just in case we actually have a definition, use it to infer member-ness.
Keep track of where and whether we see a contextual keyword on the decl.
Key is no longer valid as we cleared the MemoryBehaviorValueBaseToIndex.
Known target, Zero LB: Unlike the above, this case is not that uncommon.
Lifetime-extend 'self' by sending it to the autorelease pool if need be.
List of Objective-C member conflicts we have found during type checking.
Load and store the PHP return registers from/to the top of the VM stack.
Load the 'alignmentMask' value witness from the given table as a size_t.
Loads .so PrimeLibrary, writes snapshot output to this file, then exits.
Local variables: tab-width: 4 c-basic-offset: 4 indent-tabs-mode: t End:
Look for mismatched enter and exit events, and try to correct if we can.
Look through DotSyntaxCallExpr, since the literal functions are curried.
Lower the captured arguments in the original function's generic context.
Make sure that all witness tables are in the witness table lookup cache.
Mark any _ObjectiveCBridgeable conformances in the given type as "used".
Mark the typealias as an error and don't inject it into any DeclContext.
More efficient value semantics implementations for certain enum layouts.
Most European countries used the Julian calendar prior to the Gregorian.
Move cond_fail down if it can potentially help register promotion later.
NB: an unnamed socket has no path, and sun_path should not be inspected.
NB: onSendEnd() is only sent when the VM is finished with the transport.
NOTE: this also allows us to NOT modify the results of an analysis pass.
Need to have a valid installation of the transliteration data in /lib64.
Next, we're going to regenerate each prologue along with its DV funclet.
No need to check this for structs, as they do not have any superclasses.
Note that ordinary metatypes of / existential types are still singleton.
Note that this does not currently encode anything for interface methods.
Note that this will implicitly unique if the .unique name is also taken.
Note: keep previous modifiers if none specified when importing the trait
Now provide the results along with whether the name is duplicate or not.
Now store the fixed extra inhabitant and ask the runtime to identify it.
Now summarize our blocks so that we only visit interesting instructions.
NullSafe (Q) props do not promote an emptyish base to stdClass instance.
Objective-C subscript setters are imported with a function type such as:
Ok, our state is in the map, copy in the predecessors value to case map.
Okay, we have an initialization for the tuple that we need to emit into.
Once we have found such a node, there is no need to traverse any deeper.
Only supports a architecture-dependent binary dump format at the moment.
Only use simple types like 'std::string', 'std::vector', 'std::map' etc.
Optional thick metatypes are ABI-interchangeable with non-optionals too.
Otherwise we'll get the previous TypeCheckData back so we can modify it.
Otherwise, fall back on the ARC annotations, which are part of the type.
Otherwise, fill in with the appropriate number of invalid special dests.
Otherwise, look for a disjunction constraint explaining what the set is.
Otherwise, record it if we're supposed to accept default arguments here.
Otherwise, we don't know what happened, be conservative and return none.
Otherwise, we know that at least one of our types is not a builtin type.
Override the connected property like we do for the read_property handler
Patches the Vptr, retrieve the immediate and emmit a related direct vasm
Perform a dynamic cast of a class value to an existential metatype type.
Perform a foreign error check by testing whether the call result is nil.
Prints the metadata, bytecode, and disassembly for the given translation
Private and (unversioned) internal variables always have a fixed layout.
Process all bytes in the buffer with 64 bytes in each round of the loop.
Process an apply instruction which uses a partial_apply / as its callee.
Process any remaining cond_fail instructions in the current basic block.
Record a bunch of parsed accessors into the given abstract storage decl.
Record the Objective-C class to which this CF type is toll-free bridged.
Record the function or initializer overridden by the given Swift method.
Record this method in the source-file-specific Objective-C method table.
Reduce the available values into a single SILValue we can use to forward
Ref count checks do not have side effects, but are barriers for retains.
Register a forward declaration before we look at any of the child types.
Remap this to use the InOutArg directly instead of using the allocation.
Remove the reference from the instruction being deleted to this operand.
Remove this hack when we don't care about older Clangs on all platforms.
Remove trailing slash except when the resolved pathname is a single "/".
Restructure the argument to provide the appropriate labels in the tuple.
Retrieve the name of the given Clang declaration context for / printing.
Retrieve the source location associated with this declaration / context.
Return the smallest (supported) unsigned length that can store the value
Returns a list of distinct values for the given key across a collection.
Returns the common prefix of two strings at camel-case word granularity.
Returns the protocols that values of this type are known to / implement.
Returns true if we need to add defer edges for the arguments of a block.
Retypecheck the anchor type, which is the base of the member expression.
Rules about block order:  - The "primary function body" must come first.
Second value is an array of object properties optionally set by the user
See if we can defer initialization of the buffer to a copy_addr into it.
See what spare bits from the payload we can use for layout optimization.
Set the error reporting level to 0 to ensure non-fatal errors are hidden
Shouldn't be calling this function after the runtime options are loaded.
Since we know where it is going, we don't have to give up on everything.
Skip the overflow check here because the section name will be small-ish.
Slow path when length is large enough to need the real CapCode encoding.
So in this implementation, property_value is implemented as property_get
So, perform an alloc_ref_dynamic and pass that along to the initializer.
Some clients of SILCloner copy over the original function's debug scope.
Something like "init(foo: ())" A throwing method has an error parameter.
Sort all of the subgroups first, and fill in the bucket for each result.
Stream wrappers close themselves on sweep, so there's nothing to do here
TODO look into merging oauth parameters if they occur in the current url
TODO: assert that this list is consistent with isTransitiveEscapeInst().
TODO: may-load here probably doesn't need to include AFrameAny normally.
TODO: remove once the frontend understands what action it should perform
TODO: this is a workaround until rdar://problem/25225083 is implemented.
Take a look at the conversion type to check to make sure it is sensible.
Take advantage of the fact the type-checker leaves the types on the AST.
Take the incoming function pointer and add a null context pointer to it.
The IR-generation for function types is specifically not type-dependent.
The ObjC runtime will drop a reference to its magic Protocol class here.
The actual opening operation will occur when we see the OpaqueValueExpr.
The bit position is then used to set/reset the bitvector kept by each g.
The capture list is not always initialized by the point we reference it.
The check subscript call is no longer associated with another operation.
The class additionally may be weak-linked, so we have to check for null.
The default of "true" here is correct -- see autoTypecheckRequestInit().
The epilog takes a void return because the return of 'self' is implicit.
The following definition of Storeinc is appropriate for MIPS processors.
The inline Func* might be null if it was uncacheable (not low-malloced).
The number of nested types that haven't yet been resolved to archetypes.
The only valid return expression in an initializer is the literal 'nil'.
The requirement should be for a nongeneric, nonmutating instance method.
The source code of the verification program is included in this package.
The spec states that a WAP client does not need to implement ExtHeaders.
The thunk now carries the information on how the signature is optimized.
The update box is specified by the center coordinates of its first cell.
The vtable entry must be ABI-compatible with the overridden vtable slot.
The witness has an IUO that should be translated into a true / optional.
Then use the molads to find Tishri 1 of the current and following years.
There can be multiple substitutions, but the first one is the Self type.
These logged stacks can be then gathered via php a call, xenon_get_data.
They will override the KindOfUninit values set by scalar initialization.
This (throwing away the data) is overly conservative, but works for now.
This can be removed when all the backend options are recorded in the IR.
This causes the apply to become a sink barrier for ref count increments.
This code assumes there is / only one edge between the two basic blocks.
This eases the implementation of intersection operator in the data flow.
This enables us to splice efficiently basic blocks in between functions.
This file implements semantic analysis to ensure that errors are caught.
This function is only entered when the machine being debugged is paused.
This gives us minimum bounds on the size and alignment of the aggregate.
This helper should only be called for the Object, Self, and Parent cases
This is a StoreInst, try to see whether it clobbers any forwarding value
This is a microbenchmark to get cpu frequency the process is running on.
This is a small and fast implementation of memcpy with a constant count.
This is a stupid encoding since it causes collisions but it matches php5
This is codetables for different Cyrillic charsets (relative to koi8-r).
This is correct behavior for reading a series of images from one source.
This is done as a second phase to / avoid invalidating the use iterator.
This is equivalent to android.os.SystemClock.elapsedRealtime() in native
This is guaranteed to at least stop at the nul at the end of the buffer.
This is just a shortcut to the isUnsafe test for a specific array below.
This is not a leaf node, try to find whether all its children are alive.
This is only an optimization, so the criteria does not need to be exact.
This is safe because instanceofs don't take reference counted arguments.
This is the delta between the current and the previous jemalloc reading.
This is the only interface implemented by the classes that implement it.
This isn't valid, but the developer almost certainly meant to use "0.4".
This seems trivially true in all cases but converting arrays to objects.
This seems trivially true in all cases but converting objects to arrays.
This will always succeed since we have an entry for each BB in our RPOT.
This will be removed when Loop ARC is finished and Block ARC is removed.
Thus we only need to check the field/struct decl which are not operands.
To keep things simple we only analyse up to this number of nested loops.
Treat extensions methods as deprecated if their extension is deprecated.
True if a generated accessor needs to be registered as an external decl.
Try to create as few aggregated stores as possible out of the locations.
Try to derive the concrete type of self from the found init_existential.
Try to determine whether text is in some character code we can identify.
Tuple types are default-initializable if all of their element types are.
Ugh, the statement below creates a new object and adds it to an array...
Use OneTypeOneOperand layout where the field number is stored in TypeID.
Use the raw type for the debug type, but the storage size from the enum.
Used to create an initial state before we merge in other / predecessors.
Verify that there are no diagnostics (in MemoryBuffer) left in the list.
Visit all blocks in a predictable order, hopefully close to topological.
Walk down the dominator tree inside the loop, removing redundant checks.
Walk the parents of the specified expression, handling any ClosureExprs.
Walk them manually here so that they end up as child nodes of enum case.
Walk up the dominator tree looking for a range check ("SLE Start, End").
We also have to invert to match PNG's convention in which 255 is opaque.
We can kill the frame if all uses of the frame are counted as weak uses.
We can reference the canonical metadata for native value types directly.
We can't simply forward 'self' because the partial apply is conditional.
We could check witnesses that don't involve the failed associated types.
We don't have an existing class, but we /do/ have a file in script mode.
We don't need to destroy it because we know that on that path it is nil.
We dont want these compiler generated functions to appear in backtraces.
We encountered a try block - a finally needs to be run before returning.
We expect these parameters to be replaced by stack address / references.
We force first type of a func declaration to be a tuple for consistency.
We handle emitting the variable storage when we see the pattern binding.
We have a call that can potentially be specialized, so attempt to do so.
We have built a projection tree and filled it with liveness information.
We have the available value bit computed and the local forwarding value.
We just want to know if we have something to talk to, irregardless of RP
We may be able to simplify DestBB now that it has one fewer predecessor.
We need to inspect the right hand side and figure out what it was first.
We need to move the stackpointer in case LdObjMethod calls a destructor.
We need to move the stackpointer incase LdArrFuncCtx calls a destructor.
We only need to emit witness tables for base NormalProtocolConformances.
We should not end up here if the enum constructor call is fully applied.
We use the context emit-into initialization only for the outermost call.
We want the branch to point to whichever side has not been explored yet.
We will end up with one index chain per expression we need to assign to.
We'll treat this like a liveness problem where the alloc_box is the def.
What we know for sure: B is a superclass of D1 D1 is a superclass of D2.
When a store instruction is encountered, the stored location is tracked.
When all is said and done, we should have a single value here to return.
When true many of the threaded tests log activity to help triage issues.
When we form the bound generic type, make sure we get the substitutions.
While importing the DeclContext, we might have imported the decl itself.
XXX this functionality is excluded in php, enable it in apprentice.c:340
XenonForceAlwaysOn is active - it doesn't need a timer, it is always on.
abort() so it shows up as a crash, and we can diagnose/fix the exception
check the inheritance clause of a type declaration or extension thereof.
dvInit pointers are consistent in the parameters vector and on the func.
entries are null-terminated, so extract them and push them into the set.
errors stores all keys corresponding to entries that could not be cached
external thread transitioned from empty to non-empty while grabbing lock
glibc does not have localeconv_l, and so we need to do some shenanigans.
init_priority is a gcc extension, so we can't use it on other compilers.
non-zero for error chdir failed, the working directory remains unchanged
parser functions / static analysis functions / code generation functions
req::malloc api entry points, with support for malloc/free corner cases.
returns NULL if not found, or a pointer to the start of the first match.
we don't reserve(), because we don't know how selective callback will be
"Check conformance" on each declared protocol to build a conformance map.
(Also published in Collected Algorithms from CACM, algorithm number 199).
(Variadic arguments also end up here, which is correct for our purposes.)
(With the exception of the last token which does not have the separator.)
-- Build the decoded string as UTF32 first because we need random access.
/ / If the initialization is non-null, the result plan will emit into it.
/ / If the input is malformed, this emits the specified error diagnostic.
/ / We will be performing an intersection in a later step of the merging.
/ If 'static' is true, then this is self for a static method in the type.
/ If we find a situation that we cannot handle, we bail and return false.
/ Performing the conformance check forces the function to be synthesized.
/ Return the lowered type for the class's 'self' type within its context.
/ Used to distinguish between different instances of an inlined function.
2.0.9: Thorben Kundinger: Maybe the source image is not a truecolor image
A DeclRef 'E' that refers to an enum element forms an EnumElementPattern.
A ReqBindJmp ends a unit and it jumps to the next instruction to execute.
A buffer for all lines that the user entered, but we have not parsed yet.
A checked_cast_br passes the result of the cast to the first basic block.
A deinit could deallocate array or put a different array in its location.
A generalization of llvm::SmallSetVector that allows a custom comparator.
A non-generic declaration is more specialized than a generic declaration.
A specification can refer to another specification, so they form a chain.
A very common case if for the specifier to be the last thing on the line.
A very simple dominator check: just walk up the single predecessor chain.
Actually remove the diagnostic from the list, so we don't match it again.
Add a dummy entry for the metatype itself, and then for each conformance.
Add an element at the fixed offset of the current end of the / aggregate.
Additional functions are available for simple rotation or up/downscaling.
All of these have a single definition, and the definitions dominate uses.
Also, if resetKeys is true, postSort() will renumber the keys 0 thru n-1.
An optional requirement is trivially satisfied with an empty requirement.
An unavailable initializer is always worse than an available initializer.
An unlabeled 1-element tuple type is represented as a parenthesized type.
Architectures which can shift addresses left by 2 bits with no extra cost
Ask every thread in this proxy's sandbox and the dummy sandbox to "stop".
At that stage, the function name GV used by the profiling pass is hidden.
Attempts to return a constant heap metadata reference for a / class type.
Builtin.BridgeObject uses its own specialized refcounting implementation.
Cache this entry in the dependent or independent cache appropriate to it.
Calculate the size of the buffer needed to hold ustr, converted to UTF-8.
Calculates and adjusts "start" and "length" according to string's length.
Callback made by Debugger::SwitchSandbox() when the switch is successful.
Called from timer handler, Lets non-signal code know the timer was fired.
Calls to the int_instrprof_increment intrinsic are emitted during SILGen.
Can only capture a variable that is declared before the capturing entity.
Change its linkage to public, so that other applications can refer to it.
Check for existence of a function with a given name and required linkage.
Check if the type-protocol entry exists in the cache entry that we found.
Check of a given name could be a name of a white-listed / specialization.
Check that the type parameter is well-formed and set it up for returning.
Check to see if the convention fulfills a source of the metadata we need.
Check to see if we need to back up because we saw a trailing 'e' or sign.
Check whether this a single basic block loop - ignoring split back edges.
Check whether we have a valid signature for semantic calls that we hoist.
Checks the command arguments, report errors and returning as appropriate.
Cleanup all resources owned by this proxy, including any threads it owns.
Collect pins that we have to clear because they might have been released.
Connect to a socket using an interruptible connect with optional timeout.
Consider adjusting the imported declaration name to remove the parameter.
Construct a Location to represent the memory written by this instruction.
Construct effects for InterpOne, using the information in its extra data.
Convert DecRefs to DecRefNZ when we've proven the tmp must be used again.
Create AST statements which convert from an enum to an Int with a switch.
Create a block similar to another block (but with no bytecode in it yet).
Create a map from region blocks to their corresponding initial IR blocks.
Create a new empty function with the correct arguments and a unique name.
Create a new solver scope in which we apply all of the partial solutions.
Critical edges should be split for the unit before passing it to analyze.
Ctx and PtrTo* may be statically unknown but always need just 1 register.
Decide which macro to call depending on the number of arguments provided.
Define our magic string to mark salt for SHA256 "encryption" replacement.
Define our magic string to mark salt for SHA512 "encryption" replacement.
Destroy the source value, since we avoided taking or destroying it above.
Destroy value of an enum with a trivial payload or no-payload is a no-op.
Determine whether the given declaration has compatible argument / labels.
Determine whether this Objective-C class type is bridged to a Swift type.
Did this aggregate already create an aggregate and thus is "invalidated".
Different strategies could be used, E.g. breadth-first, depth-first, etc.
Do all of the users of the alloc stack allow us to perform optimizations.
Do not allow specification of keys even if the resulting array is packed.
Don't warn here, let the caller decide what to do if the func is nullptr.
Drops the specified word, and returns the number of times it was dropped.
Due to the way the enum is layed out, we can model this by just adding 2.
Each tracked location has both a ValueInfo and a separately-tracked type.
Eager execution in non-resumed mode is supported only by async functions.
Eat invalid tokens instead of allowing them to produce downstream errors.
Emit a check to verify the result before returning the optimistic result.
Emit a polymorphic parameters clause, binding all the metadata necessary.
Emit a release of a live value with the given refcounting implementation.
Emit the 'self'/'super' and '_cmd' arguments for an ObjC method dispatch.
Entering an exception handler may take us someplace we weren't expecting.
Except for the above case, we should not be making a value less optional.
ExcludeNodeAtLocation, / Pass all nodes up to and including the location.
FIXME: Add a Fix-It, when the caller provides us with enough information.
FIXME: If only we had the notion of a "searchable" declaration context...
FIXME: This is not quite right: we want to handle AppExtensions properly.
FIXME: This is only needed because binops don't respect contextual types.
FIXME: We can't statically emit a global variable for generic properties.
FIXME: more specific diagnostics here, handle this case gracefully below.
FIXME: we cannot resolve members appear later in the body of the nominal.
Failing that, try to diagnose any type witness that failed a requirement.
Failure to compile the eval string doesn't count as an assertion failure.
Fetch the class in the inheritance tree which first declared the property
Finally, use the results of all these iterations to perform optimization.
Find the smallest number of value witnesses found in protocol extensions.
Find the superclass type that matches where the conformance was declared.
Follow gcc/clang behavior and use stdout for --version and stderr for -v.
For a much better antialiased result, the affine function is recommended.
For classes, we need the superclass (if any) to support qualified lookup.
For conditions of distribution and use, see the accompanying README file.
For local decls, use the address we allocated or the value if we have it.
For other functions, the initial state of BBWriteSetIn should be all 1's.
For remaining path pieces, filter or drill down into the results we have.
For some reason, subscripts and properties don't include their self type.
Gather the set of protocol declarations to which this archetype conforms.
Gather up units created by the worker threads and commit them in batches.
Generate a private stub function for the LLVM ARC optimizer to recognize.
Get next piece if no limit or limit not yet reached and something matched
Get the sugared type directly from the tuple expression, if there is one.
Given a possibly-existential value, deallocate any buffer in its storage.
Given a type, determine how many bytes an instance of that type occupies.
HHBBC may have proven something about the inner type of this wait handle.
Hack to deal with types already getting set during type validation above.
Handle a tuple that has been exploded in both the input and / the output.
Handle classes directly here, since only top-level classes are hoistable.
Handle productions that are always leaf patterns or are already resolved.
Handle type-function if we have an arrow or 'throws'/'rethrows' modifier.
Has timeout set to zero because pollSocketLoop() already does a sleep(1).
If BBWriteSetIn changes, then keep iterating until reached a fixed point.
If a tracked store must aliases with this store, then this store is dead.
If artificial normal BB was introduced, branch to the original normal BB.
If class is not abstract, all abstract constants should have been defined
If it is a normal character or an already-diagnosed error, just munch it.
If it's a non-numeric string, this may cause it to exceed the max length.
If it's a unary selector with no name for the first argument, we're done.
If no catastrophic error has happened yet, we're fine, set errmsg to null
If not, the template actually has parameters but is failing to emit them.
If self is a struct, properly qualify it based on our base qualification.
If that didn't work, use a bogus pattern so that we can fill out the AST.
If that satisfied all of the elements we're looking for, then we're done.
If the base is a class or an rvalue, then this store just loads the base.
If the base name is prefixed by "getter:" or "setter:", it's an accessor.
If the callee isn't of function type, then something else has gone wrong.
If the caller produced a context for us, but we can't use it, then don't.
If the declaration we're looking at doesn't allow a superclass, complain.
If the disjunction requested us to, remember which choice we took for it.
If the lvalues don't have the same base value, then they aren't the same.
If the parent exists in our backtrace, it means we have detected a cycle.
If the result's type contains delayed members, we need to force them now.
If the selectors of the getter match in Objective-C, we have an override.
If the source expression is a tuple literal, we can break it up directly.
If the target existential requires witness tables, we can't do this cast.
If there is a context argument, it comes after the polymorphic arguments.
If this class has the same func at the same method slot we're good to go.
If this declaration context came from source, there's nothing to do here.
If this element comes from the sub-expression, we've already analyzed it.
If this is a foreign thunk, it always has the foreign calling convention.
If this is a performance impact, we can add a CheckedCastMode::Unchecked.
If this is a protocol or protocol composition type, record the protocols.
If this is an upcast instruction, it is a conversion of self to the base.
If this is caller default initialization, generate the appropriate value.
If this is just for a read, emit a load into a temporary memory location.
If this parameter had an ellipsis, check whether it's the last parameter.
If this parameter is deallocating, emit an unmanaged rvalue and continue.
If this type was mapped to a concrete type, then there is no requirement.
If tracing or profiling are enabled, we need to store end frames as well.
If we already have it, we have exited the return value sequence so break.
If we already have such a cloned function in the module then just use it.
If we already looked for alternative literal types, return those results.
If we are falling through from the current block, the return is implicit.
If we can derive a definition for this requirement, just call it missing.
If we can't find it, bail we can't match this increment up with anything.
If we check and accept this use higher up in the AST, don't recheck here.
If we didn't find the tool there, search for it.let the OS search for it.
If we didn't get anything, add a () pattern to avoid breaking invariants.
If we don't have a default witness table list, we can't look anything up.
If we don't have type arguments, the collection element type is "Object".
If we emitted into context, be sure to finish the overall initialization.
If we have a framework, mangle the name to point to the framework binary.
If we have a witness method call, the inner context is the witness table.
If we have an error convention and this is the error parameter, print it.
If we have no frame just wait for the next instruction to be interpreted.
If we have spare bits, we have to mask out any set tag bits packed there.
If we hit circularity, we will diagnose at some point in typeCheckDecl().
If we know the type representation is invalid, just return an error type.
If we run into one of the known protocols, zap it from the original list.
If we're coming from an optional type, unwrap the optional and try again.
If we're not allowed to complain or we couldn't fix the source, bail out.
If you want to allow partial orders, make the constituent locks unranked.
Implode tuples in initialization of globals if they are of trivial types.
In WholeProgram mode, don't use FCallBuiltin if it *has* been overridden.
In a synthesized accessor body, store 'value' to the appropriate element.
In practice we should need no more than four bytes from the payload area.
Increase the uncurry level to look past the self argument to the indices.
Initialize the destination with it, and set the extra tag if any to zero.
Inject the typealias into the nominal decl that conforms to the protocol.
Intercept only original generator / async function calls, not resumption.
Introduce conversions from each element to the element type of the array.
It abstracts away how this behavior is communicated within the generator.
It is not a huge problem in practice because Xcode auto-saves constantly.
It then calls / reduce, in hope to get the original memory location back.
Iterate through the function's opcodes and place breakpoints on each RetC
Keep anything from the last spot we've checked to the start of the fixit.
Leap years occur in a fixed pattern of 19 years called the metonic cycle.
Leave a null pointer placeholder to be filled by in-place initialization.
List of fields in the object which should always be conservative scanned.
Look for a builtin "unsafeGuaranteedEnd" instruction that uses the token.
Look through the declarations, keeping only the unique type declarations.
Lower the forwarded arguments in the original function's generic context.
Make sure that an observing property isn't observing something read-only.
Make sure that enums with the same case and the same value compare equal.
Make sure that our current best is better than all of the solved systems.
Make sure the instructions in this function are attached its debug scope.
Make sure we don't return to it so we have a chance to honor breakpoints.
Map from PhysReg until the first position at which it is /not/ available.
Mapping from case values to the results corresponding to this case value.
Marker that shows that this was an obj so it doesn't collide with strings
Match the camelCase beginning of the name to the ending of the type name.
May return nullptr if it is currently impossible to create a translation.
Metatypes are (mostly) singleton type descriptors, often without storage.
Move all needed operands to a place where they dominate the select_value.
N.B.: This is already taken care of for us if EnableObjDestructCall is on
NOTE: The type checker is scoped to be torn down before AST verification.
Needs to be a sorted map so we can divide funcs into contiguous sections.
Next, initialize s_instanceBitsMap with the top 127 most checked classes.
No need for BC HHVM-style whitelist check, since the check isn't enabled.
No-escaping stored declarations are captured as the address of the value.
Non-'derived' flags (thisHas) about magic methods imply the derived ones.
Nontrivial ones can though, because the overwritten value drops a retain.
Not a pattern we recognize, conservatively generate a generic diagnostic.
Not all commands are here, as not all commands need to be sent over wire.
Note that convenience factories return instancetype and can be inherited.
Note that this can invalidate the Uses vector and delete the instruction.
Note: We can't use TryLoc here because it's outside the PBD source range.
Note: if you change this, you need to change similar logic in apc-object.
Now that we have an argument type we can set the element's declared type.
Objective-C class objects are referenced by their Swift metadata wrapper.
Okay, if all we need to do is drop the value in an address, this is easy.
Okay, we are now working with a single value turning into a single value.
Only pick methods declared in this class, in order to match Zend's order.
Open a member constraint for constructor delegations on the subexpr type.
Organize conformance constraints, sifting out the base class requirement.
Otherwise we have a live leaf, add its index to our LiveLeafIndices list.
Otherwise, create a type variable saying we know nothing about this expr.
Otherwise, set the previous projections operand to the incoming argument.
Otherwise, use a subtype constraint for classes to cope with inheritance.
Parse the optional argument list for a modifier, which is brace-enclosed.
Parse, typecheck and temporarily insert the incomplete code into the AST.
Peephole these by looking for a subexpression that is a BindOptionalExpr.
Perform a foreign error check by testing whether the call result is zero.
Perform xorq Place only byte result into d and do not touch higher 32bits
Perform xorq Place only byte result into d and do not touch higher 56bits
Please follow these general rules when implementing traversal for a node:
Preallocate more of the same in order to amortize entry into this method.
Print a stored context to the given output stream for debugging purposes.
Print a stored entry (Clang macro or declaration) for debugging purposes.
Print the cases as the concatenation of the enum name with the case name.
Process all bytes in the buffer with 128 bytes in each round of the loop.
Propagate the count of array values to calls of the array's count method.
Push a value from the evaluation stack with the specified symbolic flavor
Quickly test if any further fix-ups for the argument types are necessary.
RAII class for printing multi-part C types, such as functions and arrays.
Record that we have ended the request so any further output is discarded.
Recursive calls to irGenRegionImpl will reset the successor block mapping
Reduce the available values into a single SILValue we can use to forward.
Ref inner cells are at worst InitCell, so don't bother checking for that.
Regenerate the prologues and DV funclets before the actual function body.
Registers that can safely be used for scratch purposes in-between traces.
Remove the old check in the loop and the match the retain with a release.
Remove the old retains and create the new *moved* refcounted instructions
Removes a range of PCs to the filter given a collection of offset ranges.
Replace ")(" with ", ", so "(x: Int)(y: Int)" becomes "(x: Int, y: Int)".
Replace all incoming inputs with undef and try to delete the instruction.
Resolve a locator to the specific declaration it references, if possible.
Return / true if this partial apply will not block our promoting the box.
Return all but the first "n" matched characters back to the input stream.
Return immediately if it's not ELF (so we avoid pipe2file unless needed).
Return the LValueTypeData for a SIL value with the given AST formal type.
Return the list of functions that can be called via the given apply site.
Returns false if the server was unable to return source for this command.
Returns: 0 if it worked 2 if the option didn't exist 3 on logical errors.
Right now, we only worry about there being a difference in prefix matter.
Safe as we'll onlyr read the string from the XML node, not write/free it.
Sandbox path will be updated upon first request with that sandbox arrives
Scan ahead to see if this is the final cleanup block in this basic block.
See if iter is an apply inst that is a safe guaranteed semantic function.
Sema conservatively converts the base to inout expr when it is an lvalue.
Send finished event from the processing thread to the web request thread.
Set the profCount of the IRUnit's entry block, which is created a priori.
Sets the baseValue such as the current stack depth matches the parameter.
Should refactor so we handle it (we already know things about the array).
Since it's an operator we insert the decl after the type at global scope.
Since they are already known to be definitely init, don't reprocess them.
Skip the initial m_handledCount - 1 handlers that were considered before.
So we can treat them as not aliasing for the / purpose of bound checking.
Some of the closure locals are mapped to used variables or static locals.
Sometimes a scalar type gets applied to a single-argument parameter list.
Special case: "Index" in the name matches "Int" or "Integer" in the type.
Stores the key in a similar fashion as "priming" would do (no TTL limit).
Substitute type parameters in the base type to get a fully concrete type.
Suggested captions: "before jiffy removal", "after goat saturation", etc.
TODO (6512343): this needs to be hooked into scan methods for Extensions.
The TopLevelCodeDecl is already set up in Decls to be returned to caller.
The above code might use fixups.literals but shouldn't use anything else.
The address of the first local is passed in the second argument register.
The current basic block contains concrete values for the entire location.
The current basic block contains covering values for the entire location.
The first type argument for Dictionary or Set needs to be NSObject-bound.
The following types exist primarily for internal use by the type checker.
The object has the deallocating bit set so retain, release is irrelevant.
The pattern fields are in an enum and should be less than the field count
The present code works in the post-conversion color space, typically RGB.
The primary goals of this implementation are portability and ease of use.
The result type may be a partial function type we need to close up later.
The returned value is used to convert TSC counter values to microseconds.
The type from the indexer doesn't contain the in-class initializer types.
Then for each incoming value, fixup the branch, cond_branch instructions.
Then test the boundary from representable index to unrepresentable index.
Then we move on to running the next set of consecutive module transforms.
There is no point in storing this value into the cache so just return it.
There's no reason for code to do this but we should still avoid crashing.
These are not types, and cannot be preceded by "u" to make them unsigned.
They don't need to be relocated like normal VdataPtrs, so bind them here.
They will be implicitly emitted by SILGen into the generated initializer.
This "always fails" diagnosis makes no sense when paired with the CF one.
This applies to nested metatype levels, so if A : P then A.Type : P.Type.
This aren't actually allowed, but we recover better if we skip over them.
This can also expose opportunities in the successors of the merged block.
This effectively performs a Copy at the same time as converting to mixed.
This ensures we do not shrink the lifetime of the old partial /    apply.
This enum declaration is technically a parse error, so do not type check.
This file implements support for importing Clang declarations into Swift.
This frame was called by translated code so we can't interpret out of it.
This global is not initialized by a simple constant value at this moment.
This helps to simplify the creation of an enum from an integer raw value.
This is a release on an owned parameter and its not the epilogue release.
This is either a non-local allocation or a local allocation that escapes.
This is even possible if the block does not dominate the loop exit block.
This is the place that should be jumped to if the pattern fails to match.
This is unfortunate but necessary since splitCriticalEdge may change IDs.
This is used to find the extents of each handler for find_fault_funclets.
This means no transformations were possible for the analyzed instruction.
This should be kept in sync with GenericParamList::deriveAllArchetypes().
This software is based in part on the work of the Independent JPEG Group.
This store must preserve the kind bits in the WaitHandle for correctness.
This string doesn't have anything we need to escape, so print it directly
This will be disabled automatically when the thread completes the request
Those core APIs are explicitly provided by the Foundation module overlay.
Trait has not been 'inlined' into using class so context is not available
Translate the return values from the Source object: 0 is EOF, -1 is error
Tries to read the contents of the file whose path is specified in m_file.
True if there's a non-empty intersection of the two stack slot intervals.
Unfortunately we cannot always detect this, but we can for certain cases.
Union fields should only be available indirectly via a computed property.
Use TRC of the storage rather the current TRC when walking this function.
Use non-specialized release call so ArrayTracer can track its destruction
Using YYLLOC is tempting, but would change the location of the lookahead.
Using the object address here could interfere with a moving GC algorithm.
Using the object address here would interfere with a moving GC algorithm.
Utilities for reporting errors to stderr, system console, and crash logs.
Validate the contents of any referenced nominal types for SIL's purposes.
Walk the checked initializer and contextualize any closures we saw there.
Walk through the reachable blocks and erase any preds that weren't found.
We / could for example store an NSArray array struct on top of the array.
We are duplicating the header instructions into the end of the preheader.
We aren't allowed to pass aliased memory to 'in', and we have pass at +1.
We assert'd at the top of this function that the metatype cannot be Mixed
We can hit this case in specialized functions even for correct user code.
We can't constprop with this eval_cell, because of the effects on locals.
We delay this operation until after simplification to avoid re-insertion.
We do not care if the predecessor list is sorted, just that it is unique.
We give the proxy a short period of time to wait for any threads it owns.
We hash the enum by hashing its kind, element, and operand if it has one.
We know the direction this conditional branch is going to take thread it.
We let the VM shutdown continue and it will advance us to the next state.
We must allocate space for it, because its default ctor will write to it.
We need to initialize ObjC protocols in inheritance order, parents first.
We need to sink the instruction, then add arguments for each predecessor.
We only allow specialization on classes that can't be overridden for now.
We should either be returning to enterTCExit, or to a jmp to enterTCExit.
We shouldn't emit global value witness tables for generic type instances.
We typically generate more efficient code with separate jump-on-overflow.
We use the first conflicting declaration in each set to perform the sort.
We want them to be replace even if we can't fully propagate the constant.
We want to maintain the canonical form of a single return where possible.
We were told to output nothing, so get the last mode option and use that.
We'll only utilize this information in the case of a potential ambiguity.
When a closure follows a call, it becomes the last argument of that call.
When later compared with the data, the sign extension must have happened.
Witnesses take 'self' at +0, so we still need to consume the +1 argument.
Wrap this up in XML, as that's what we'll use for documentation comments.
Write less data on purpose, to get the server to choke on deserialization
both subobj(A) and subcls(A) of no_override class A change to exact types
coerceToType may have updated the element type of the ParenExpr in place.
do a check for mod_proxy_fcgi and remove the extra portions of the string
end anonymous namespace / Emit all the top-level code in the source file.
fsmagic - magic based on filesystem info - directory, special files, etc.
getTupleType - Return the uniqued tuple type with the specified elements.
if partial is true, partial matches are allowed at the end of the buffer.
if this were to come from a closure, there may be no decl - just a module
initialize a Hole header in the unused memory between m_front and m_limit
invName should only be non-null if we are calling __call or __callStatic.
lc holds the last significant character read and br is a bracket counter.
make *exact type* and *sub type* types and objects for all loaded classes
must come before zpp because zpp would convert the args in the stack to 0
push a sentinel bcMapping so that we can figure out stop offsets later on
skipSlashStarComment - /**/ comments are skipped (treated as whitespace).
we found another match put a newline and '-' to do some simple formatting
width, height: the dimensions of the image whose data resides in Y, U, V.
/   * any retain must be matched by a release before we hit a make_unique.
/ - both types are tuple-types and some of the elements need to be casted.
/ / It is not correct to use this value as a Protocol* reference directly.
/ / This behaviour improves experience for "expected token X" diagnostics.
/ / This has a couple of tricks to make the code faster and more powerful.
/ / This only applies to types whose Equatable conformance can be derived.
/ / This value must have a definition by the time the module is finalized.
/ Do this by checking for a store into the self box in the success branch.
2.0.12: TBB: alpha in the destination should be a component of the result.
3) If the user provided a behavior for this diagnostic's kind, follow that
@NSManaged only applies to instance methods and properties within a class.
A TypeInfo implementation for types represented as a single / scalar type.
A call to _adoptStorage has the buffer as AnyObject as the first argument.
A call to materializeForSet exposes an address within the parent / object.
A dominating cond_fail on the same value ensures that this value is false.
A method on NSArray may do arbitrary things including releasing the array.
A result plan which produces a larger RValue from a bunch of / components.
A store is dead if it is not read from any path to the end of the program.
A suffix type is used as the basis for a suffix layout as described above.
A version number for the format of the serialized code completion results.
Add history regardless, since we know that there are no duplicate entries.
Add it to the JobCache, so we don't construct the same Job multiple times.
Add the SILArguments and use them to initialize the local argument values.
Addqi and subqi can't be lowered to addq and subq if the destiny is rsp().
Adds a CFG edge from the unterminated NewRetBB to a merged "return" block.
All entries of the dependency graph, which represent values or AllocStack.
An existential type cannot be used if the protocol has an associated type.
An unpin, through destruction of an object can have arbitrary sideeffects.
And make sure any inherited conformances also get completed, if necessary.
Any include/require (or eval) op kills all locals, and private properties.
Array-to-pointer conversions are better than inout-to-pointer conversions.
As a fast path, if there is no override, definitely no thunk is necessary.
As a special case, return 0 if an ordinary "syntax error" message will do.
As the code stands, it will do the right thing for R,G,B and B,G,R orders.
Asserting them now so they are revisited here if they aren't true anymore.
Avoid creating a prefix where the rest of the string starts with a number.
BaseSC and BaseSL may push back a C that was on top of the A they removed.
Basic blocks to be added to for reprocessing after jump-threading is done.
Begin by finding the "base" of V1, V2 by stripping off all casts and GEPs.
Builtin types FIXME: Layering violation to use the ClangImporter's define.
But don't expect to see 'self' if it's been moved to the context position.
But that does not mean that we cannot eliminate this pair with a peephole.
Calculate the generic signature for the given imported generic param list.
Call the free_storage handler, invalidate the bucket and reuse its handle.
Check if any classes in the inheritance hierarchy have generic parameters.
Check if the instruction at block `b', index `i' of `env.unit' is an `op'.
Check that the type witness meets the requirements on the associated type.
Check the general memory behavior for instructions we didn't handle above.
Check to see if it is used by an apply that came from a call to self.init.
Check whether this initializer overrides an initializer in its superclass.
Check whether this is a release on part of a guaranteed function argument.
CheckInitMem's pointee is TUninit on the taken branch, so update outState.
Closure expressions implicitly return the result of their body expression.
Collect array.props calls in all cloned blocks, excluding the exit blocks.
Combine the given base name and first argument label into a single / name.
Compute the full root node debug node by walking down the projection tree.
Conformance cache should always be sufficiently initialized by this point.
Construct the actual expected argument labels that our candidate expected.
Convert the typical getopt input characters to the php_getopt struct array
Create a map from canonical check to aggregated type for all hoist groups.
Create all of our visitors, register them with the visitor group, and run.
Create an implicit 'self' decl for a method in the specified decl context.
Create the VarDecl and the PatternBindingDecl for the captured expression.
Derive the name of the SIL file for debugging from the regular outputfile.
Describes the relationship between the context types for two declarations.
Destroys of loadable types can be rewritten as releases, so they are fine.
Determine the set of declarations that are shadowed by other declarations.
Determine whether the witness for this conformance is in fact our witness.
Determine whether there are any extraneous default arguments to be zapped.
Determines whether the given type is bridged to an Objective-C class type.
Devirtualizes release instructions which are known to destruct the object.
Diagnose variables that were never used (other than their initialization).
Disable buffering on stdout so that everything is printed before crashing.
Ditto with command, XDebugServer is tracking the command before the break.
Do not inline wrappers, because this would result in a code size increase.
Don't assume anything about globals which are imported from other modules.
Don't override an existing method if this class provided an implementation
Don't search for a containing declaration if we don't have a source range.
Don't try to print invalid expressions, module exprs, or void expressions.
Each ClassInfo has a table of public static properties with these entries.
Emit a reference to the metadata and figure out what cast function to use.
Emit witness tables for protocol conformances introduced by the extension.
Encode two replacement characters, so the expected output length lines up.
Expand inherited conformances so we have the complete set of conformances.
FIXME: Audit all call sites and make them create the function debug scope.
FIXME: Generic local functions can add type parameters to arbitrary depth.
FIXME: Handle NonFixedTypeInfo here or assert that we won't encounter one.
FIXME: If we were walking TypeLocs, we could actually get parameter names.
FIXME: It'd be nice if the result of the accessor was natively an address.
FIXME: This is wrong for type declarations, which we're skipping entirely.
FIXME: We should call a fast deallocator for heap objects with known size.
FIXME: When generic parameters can map down to specific types, do so here.
FIXME: ld64 crashes resolving relative references to coalesceable symbols.
FIXME: replace with std::string and StringRef as appropriate to each case.
Fall back to unknown entry points if the Objective-C runtime is available.
Fetch the declaration of the metadata (or metadata template) for a / type.
Figure out how many extraneous, missing, and wrong labels are in the call.
Figure out the declaration context where we'll get the generic parameters.
First scan the whole function and add relevant instructions as use-points.
First to limit compile time, second to make sure that the loop terminates.
Follow links unless 'follow' is false and this is the last path component.
For a given layout, output the matching C++ code to implement the scanner.
For async functions stepping over an await, we land on the next statement.
For each of the primary potential archetypes, add the nested requirements.
For now, trailing where clauses are only permitted on protocol extensions.
For operators, sort the results so that non-generic operations come first.
For static members, determine how that member's address can be determined.
For the llvm's GraphWriter we copy the connection graph into CGForDotView.
Force the creation of any delayed members, to ensure proper member lookup.
Form a mapping from associated type declarations to failed type witnesses.
Form a new set of substitutions where Self is replaced by a concrete type.
Format: condition, a list of cases (ValueID + Value ID), default value ID.
Forms a list of all threads which are currently blocked within this proxy.
Fragile functions can reference 'static inline' functions imported from C.
Generally these lists are for various LLVM / metadata or runtime purposes.
Generators A and B both do `yield from` on a shared delegate generator, C.
Get a map of expressions to their depths and post-order traversal indices.
Get the address at which the field type vector reference should be cached.
Go back through a second time now that we know all of our users are loads.
Having this twice does make sense, as zval_to_bson can thrown an exception
Helper for making invokers for the single-argument magic property methods.
Helper function for printing a type that is embedded within a larger type.
However PCRE_G(pcre_cache) must be consistent on the next request as well.
However, we can skip this if the value was actually loaded from the cache.
Identify certain vacuous names to which we do not want to reduce any name.
If / we succeed and it is safe to move increment/releases, we return true.
If Op is a load from an in_guaranteed parameter, it is guaranteed as well.
If Ty is not trivial and we found a callee release, pass it as guaranteed.
If all of those happen, then we need a timer attached to a signal handler.
If an expression follows the comma, then it is a second boolean condition.
If code relocation is supported and enabled, set up temporary code blocks.
If group name is given and the decl does not belong to the group, skip it.
If it already exists, it was either a forward reference or a redefinition.
If it didn't, the next invocation of the server will just have to kill us.
If it does, it is removed from the unmatched set using the given iterator.
If it is before, check to see if it produces the value we are looking for.
If it's implicit, try to find an overridden ValueDecl that's not implicit.
If loading from memory, we need to set the base directory for the document
If necessary, thunk to the native ownership conventions and bridged types.
If nothing changed since the last run of this pass, we can skip this pass.
If one of the GEPs is a super path of the other then they partially alias.
If only one declaration has this signature, it isn't shadowed by anything.
If so, there is a conflicting writeback happening, so emit a / diagnostic.
If the archetype is class-constrained, use a class pointer representation.
If the base is a protocol composition, enumerate members of the protocols.
If the box address has a MUI, route accesses through it so DI still works.
If the caller couldn't provide a setter type, there is nothing to rectify.
If the candidate function is public, then it has to be the right function.
If the closure includes a capture list, create an AST node for it as well.
If the cmpxchg failed, someone beat us to landing their field type vector.
If the component has already been bound to a declaration, handle that now.
If the decl uses currying syntax, complain that that syntax has gone away.
If the default case is unreachable, we don't need to conditionally branch.
If the element has non-tuple type, just serve it up to the initialization.
If the first solution has already lost once, don't bother looking further.
If the inner abstraction pattern is a tuple, that result will be expanded.
If the literal has been assigned a builtin float type, don't mess with it.
If the locator points to a function application, find the function itself.
If the parent context has a generic signature, add its generic parameters.
If the preposition was "by" and is followed by a gerund, also remove "by".
If the protocol is not resilient, the conformance is not resilient either.
If the second type is a type variable, the expression itself is ambiguous.
If the specified value is a 'let' property in an initializer, return true.
If the type binding does not have a type parameter, there's nothing to do.
If the unwrapped from/to types are equivalent, this isn't a real downcast.
If the value is IUO, but the desired formal type isn't optional, force it.
If the witness is stored property accessor, it may not be synthesized yet.
If there are captures, put the placeholder curry level in the formal type.
If there are non-scalar initializers (i.e. 86sinit methods), run them now.
If there are only two interesting cases, do a cond_br instead of a switch.
If there are such decrements, move the retain right before that decrement.
If there is an outstanding Ctrl-C from the client, go ahead and break now.
If there is no such enclosing declaration, then there is nothing to check.
If there was a 'class' requirement, mark this as a class-bounded protocol.
If this is a copy_addr that defines or destroys the value, then remove it.
If this is the case, it is possible to try jump-threading along this path.
If this is the first change we've seen, copy all of the previous elements.
If this is the only context argument we end up with, we can just share it.
If this protocol has been deserialized, it already has generic parameters.
If this was an escaped identifier that need not have been escaped, say so.
If value is null, an empty string is returned, which is good and expected.
If we are projecting into an opened archetype, capture the witness tables.
If we are reading an i1, then check to see if it comes from a switch_enum.
If we called a constructor that requires a downcast, perform the downcast.
If we didn't have an up-to-date cache entry, scan the conformance records.
If we don't have anything we really need to check, then trivially succeed.
If we emitted an error, there is no reason to proceed with load promotion.
If we find a node in the lvalue path that is problematic, this returns it.
If we find this situation, add the original one to our list for diagnosis.
If we got the choice by unwrapping an optional type, unwrap the base type.
If we have a bridged Objective-C type and we are allowed to bridge, do so.
If we have a might be used, we already created an insertion point earlier.
If we have a parameter name, just output the name as is and skip the type.
If we have already resolved a concrete lvalue destination type, return it.
If we have an Objective-C method, print the class name along with '+'/'-'.
If we track dependencies for this job, we may be able to avoid running it.
If we were able to find a method call, emit a diagnostic about the method.
If we're shutting down don't process any further requests, we may be freed
If you change this function, you must add or modify a test in PrintAsObjC.
Ignore expression patterns, which we should have bound in an earlier pass.
In cli mode, we only record samples if we're in recording to replay later.
In this pass the final decision is made if stack promotion should be done.
Inclusive ranges will have a check on the upper value (before adding one).
Initialize inferred private property types to their in-class initializers.
Initialize the instantiated dependent value witness table, if we have one.
Initialize with the value from the inout with an "autogenerated" copyaddr.
Instance properties---one for each use var, and one for each static local.
Instead, go on to validate any potential result type, and bail afterwards.
Invalid rule to return a more explicit parse error with proper line number
Invoke the conversion intrinsic, which will produce an owner-pointer pair.
It is unfortunate that C does not provide an operator for cyclic rotation.
It seems that parts of LLVM are using the flexibility of having a context.
It still might contribute to 'rethrows', but treat it as an opaque source.
It will likely be destroyed when the caller's reference goes out of scope.
Iterate over input and store wait handles for all elements in a new array.
Iteratively invoke 86pinit() methods upward through the inheritance chain.
Just create a new type variable for the decl that isn't bound to anything.
Keeping this seen set avoids consulting the dominator tree for every edge.
Keeps track of the mapping of source variables to -O0 shadow copy allocas.
Load a value of the type-of-rvalue out of the given address as a / scalar.
Load the 'hasExtraInhabitants' valueWitness from the given table as an i1.
Local generic functions could probably be modeled better at the SIL level.
Make the pre-header a part of the parent loop of L if L has a parent loop.
Manually run the action, so that the TU stays open for additional parsing.
Mark the imported class method "unavailable", with a useful error message.
Match how the memlocation print tests expect us to print projection paths.
Merge the liveIn into the liveOutExn state for each exceptional precessor.
Metatypes are interchangeable with metatypes with the same representation.
Most of these are HTTP garbage (400 Bad Request) or client timeouts (408).
NOTE: If more checks are to be added, place the most expensive in the end.
No need to add storage for zero-size fields (e.g. incomplete array decls).
Non-optional conversions are better than optional-to-optional conversions.
Normally we don't care about variables since we're only looking for types.
Notice that we need to handle control-flow programs such as the one below.
Now we climb up use-def chains and attempt to do tricks based off of GEPs.
OK, ask the runtime for the class pointer of this potentially-ObjC object.
ObjC entry points are always externally usable, so can't be delay-emitted.
Object is always greater than array, but we need a collection check first.
On the last iteration change the conditional exit to an unconditional one.
Only an instance method of a non-class protocol is ever passed indirectly.
Otherwise this decl is invalid and the accessors have been rejected above.
Otherwise, Left must be true and true OR'd with anything else yields true.
Otherwise, deallocate the original value wholesale if we couldn't take it.
Otherwise, the property is of a value type, so it is the default (assign).
Otherwise, we may not have a way to name all of the pieces of the pattern.
Otherwise, we split on the dots (if any) to see if we can get a real value
Parent pointers should point to the node that has a given node as a child.
Perform a DFS starting at block `bid', storing the post-order in `outVec'.
Perform any desired type simplifications for an entity in Simplified mode.
Performing these substitutions gets libiconv closer to the glibc behavior.
Print the memory behavior in relation to all other values in the function.
Process the basic block for values generated in the current basic / block.
Produce substitutions from the generic parameters to the actual arguments.
Project down to the buffers and ask the witnesses to do a copy-initialize.
Project down to the buffers and ask the witnesses to do a take-initialize.
Properties don't need anything here since they are always checked by name.
Property is not trivially backed by storage, do not perform direct access.
Protocol constraints are the common case, so mangle them more efficiently.
Re-order the blocks to make sure they're in topological order if possible.
Reabstract the subscripts from the requirement pattern to the formal type.
Ref: ftp://ftp.ora.com/pub/examples/nutshell/ujip/doc/japan.inf-032092.sjs
Removal should always succeed here because no other code performs removal.
Remove the cast and insert a trap, followed by an unreachable instruction.
Repeatedly run the collected hash value through SHA256 to burn CPU cycles.
Repeatedly run the collected hash value through SHA512 to burn CPU cycles.
Replace the call to assert_configuration by the Debug configuration value.
Return a classification saying that there's an unconditional / throw site.
Return a constant SSATmp representing a static value held in a TypedValue.
Returns the ConstantInfo corresponding to the VTable thunk for overriding.
Returns the SILParameterInfo for the given declaration's `self` parameter.
Returns true if the declaration should introduce a new refinement context.
Revert the generic function signature and type-check it again, completely.
Same-type requirements are type checked but not recorded in substitutions.
Simple case: for methods and initializers, check that the selectors match.
Skip parameters that were introduced by outer generic function signatures.
So that we can raise strict warnings for mismatched params in FCallBuiltin
So we're sending a KILL command to see if we can stop the query execution.
Sometimes we lose too much track of what's going on to do anything useful.
Sort handlers by priority so that lower priority values get shutdown first
Sort the set of conflicts so we get a deterministic order for diagnostics.
Split the edge from 'Dest' to 'ThreadedSuccessorBlock' it is now critical.
Start calculating non-fixed offsets from the end of the first fixed field.
Subtract immediate move word to destiny and do not touch the higher 32bits
Switch back to the original method and mark it as a memoize implementation
Switch the locale to IMAGICK_LC_NUMERIC_LOCALE if imagick.locale_fix is on
Symbol of the custom scanner function which handles scanning base classes.
TIFF thumbnail: our data structure cannot store a thumbnail of a thumbnail
TODO refactor It grabs the write lease and iterates through whole SrcDB...
TODO: - tuple literal projection, which may become interestingly idiomatic
TODO: Attempt to analyze partial applies or run closure propagation first.
TODO: If more stuff needs to be placed here, refactor into its own method.
TODO: Support this function also for other enum implementation strategies.
TODO: There are some traits of partially-fixed layouts we could check too.
Template type parameters are represented using child DIEs, not attributes.
The +1 argument is passed indirectly, so we need to copy into a temporary.
The CallEmission class below uses these / to generate the actual SIL call.
The algorithms are based on a preponderance of less authoritative sources.
The cast succeeds only if the metadata pointers are statically equivalent.
The code-completion kinds are a good match for the semantic kinds we want.
The files are stored in the same / same directory as the main output file.
The fix is to add a lock to HttpServer::Server but it seems like overkill.
The mapped value is -1 if no ASet is currently supported by that location.
The merge of two introduction versions is the maximum of the two versions.
The number of bits of precision can be adjusted by changing these symbols.
The number of incoming edges from (reachable) predecessors for each block.
The register allocator passes us constraints via `free_until' and `allow'.
The setter llvm::Constant* will be null if / the property is not settable.
The values in the original function that are promoted to stack references.
Their destructors will automatically call the appropriate Zend destructor.
Then make sure that we have a type that can be substituted for the callee.
Theoretically, hue 0 (pure red) is identical to hue 6 in these transforms.
There is one XenonRequestLocalData per thread, stored in thread local area
Therefore, we need Impl to be initialized statically before main() starts.
These are instructions that are always interp-one'd, or are always no-ops.
These can end up as non-archetypes because of multiple levels of equality.
This class declaration is technically a parse error, so do not type check.
This comes up with generic reabstraction thunks which have shared linkage.
This ensures that in many cases this function will exit early and quickly.
This file defines the high-level SILInstruction classes used for SIL code.
This file implements utilities for working with words and camelCase names.
This function doesn't actually prove that the taken branch is a side exit.
This is a / simple heuristic used to guide comparison related diagnostics.
This is a great way to make mmap fail, since it hates a length of 0 bytes.
This is possible after we expand release instructions in SILLowerAgg pass.
This is really *bad* because it will modify the status time of the file...
This means a fixed-layout indirect enum is always loadable and nontrivial.
This means that it is not valid until we finish visiting / the expression.
This method unlinks 'self' from the containing SILFunction and deletes it.
This prevents gdb from trapping updates to the DWARF files emitted by HHVM
This prevents stack slots from the caller from being sunk into the callee.
This property is initialized in the MongoCollection (which we extend) ctor
This should only be used after a successful trylock of a lock with rank r.
This will be correct as long as we don't ever have self-referential Types.
Those *should* be irrelevant for all the cases where this is wrong, but...
Track whether this record contains fields that can't be zero- initialized.
Transfer the result into our buffer if it wasn't emitted in-place already.
True if this constructor delegates to a peer constructor with self.init().
Try to iterate over the tree until we find item with description/mimetype.
Two calls are necessary to properly initialize the stayopen flag in glibc.
USRs aren't supposed to reflect implementation differences like stored vs.
Unfortunately, due to generator delegation, this can be pretty far back...
Unknown record, possibly for use by a future version of the module format.
Use an index-based loop because new owners can come in as we're iterating.
Visit all nodes in the defer web, which don't have the right pointsTo set.
Vregs that are constants or have forced registers (e.g. VmSp) are skipped.
We already merged these two types, so this constraint is trivially solved.
We also do this when the thread is at PSPEnded because the thread is done.
We are going to reuse the TO-WMI, so make sure it dominates the call site.
We assume we're starting from the 'x' in a '0x...' floating-point literal.
We cache under the unbound type, which should never collide with anything.
We can not build a projection path from the base to the derived, bail out.
We can use the latter to terminate the walk down the dominator tree early.
We can't have a phi of two openexistential instructions of different UUID.
We do not process unreachable block, instead we set their liveouts to nil.
We don't have a concrete class to attach Objective-C category metadata to.
We don't know either's sign bit so we can't say anything about the result.
We don't want to match the release with both retains in the example below.
We have to build this in two phases because it contains relative pointers.
We need a predecessor who is capable of holding outgoing branch arguments.
We only call iter_rewind() if m_pos is not the canonical invalid position.
We pulled a lookahead token, we need to remove it from the lookahead store
We shift and cap it to be in the range the Android logging method expects.
We should be able to recursively delete all of the remaining instructions.
We shouldn't care about this, because we shouldn't have to do this at all.
We shouldn't have to import everything to get at the individual constants.
We use the column-specialization algorithm described in specializeInPlace.
We won't actually emit the block until we finish with the destructor body.
Whether the decl is from a module who requested import-as-member inference
Will turn into either an int or a double in zend_convert_scalar_to_number.
Worst case, every remaining byte is invalid, taking a 3-byte substitution.
Wrap CF pointers up as unmanaged types, unless this is an audited context.
Write IM to OUTFILE as a JFIF-formatted JPEG image, using quality QUALITY.
Write the body's context archetypes, unless we don't actually have a body.
Zend lets such fatals propagate, so don't bother catching exceptions here.
a code_int must be able to hold 2**GIFBITS values of type int, and also -1
according to exif2.1, the thumbnail is not supposed to be greater than 64K
advance u1 to the first use position in child, then copy u1..end to child.
apply instructions do not capture the pointer when it is passed indirectly
array.isNativeTypeChecked might be shared among several get_element calls.
check flag to see if do_mod was called to perform full add, gerrit thomson
compute next intersection/use of inactive regs to find what's free longest
concat_ss will will incRef the output string and decref its first argument
don't do the read, it's not guaranteed to return an EOF, just force an EOF
emitClassDecl - Emit all the declarations associated with this class type.
end anonymous namespace / Merge in the state of the successor basic block.
fetch all on demand, this seems easiest if we've been here before bail out
for now, only store the vanilla names (strings) as part of the access list
helper for __construct: caller throws exception when return value is false
iterate over all but the guaranteed hoistable classes fataling if we fail.
maximum valid sizes for wbmp (although 127x127 may be a more accurate one)
mcrouter defines op names as foo-bar, but PHP wants constants like foo_bar
offset might have been incremented, but without further successful matches
readDataAvailable() - This is the primary entry point for FastCGI records.
yy_bp points to the position in yy_ch_buf of the start of the current run.
yy_get_previous_state - get the state just before the EOB char was reached
+ 2 more bytes, 20-bit unsigned int  All of these represent an int64 value.
/ / *NOTE* We do not touch the successors/predecessors of the current loop.
/ / The importer should use this rather than adding the attribute directly.
/ / This should only be called on statements that have a dedicated counter.
/ Float and integer literals are additionally keyed by numeric equivalence.
/ For now, return true when both can be traced to the same global variable.
/ If we compare for equality we need to make sure that the range does wrap.
/ It provides a common logic for computing live (i.e. reachable) functions.
/ Returns true and initializes internal fields if optimization is possible.
/ Will be the same as getConstantInfo if the declaration does not override.
@objc enums must have a raw type that's an ObjC-representable integer type.
A CRTP helper class for doing things that depends on type / classification.
A LiveRange is an closed-open range of positions where an interval is live.
A following comment counts as whitespace, so this token is not right bound.
A new SS context does not need to be created with both a Source and a Sink.
A type is interesting if the scanner generated for it would be non-trivial.
AST walker that records the keyword arguments provided at each / call site.
Accept a client connection from a server socket, using an optional timeout.
Add some number of elements, then delete a few to leave us some tombstones.
Adds a CFG edge from the unterminated NewThrowBB to a merged "throw" block.
Adds no type annotations to the region beyond those known from the context.
After this step, all swift_retain's have been / replaced with swift_retain.
All special member markers should be static, so ignore anything that's not.
Allocate the fixed-size buffer now, but don't allocate the value inside it.
Also this is wrong if we wrap a reference in multiple levels of optionality
Any SILArgument with a single predecessor from a "phi" perspective is dead.
Any functions that return void are treated as though they returned nullptr.
Any remaining allocated memory is assumed to be filled with instances of T.
Apply read preference query option, but only if we have a MongoS connection
Arg isn't null, so treat it like the underlying type for coersion purposes.
As such, we need to allow formation of the address for this captured value.
Assign "wide" locations when possible (when all uses and defs can be wide).
At the same time, compute exactly which stores are available at each point.
At translation time, we don't necessarily know what function we're calling.
Attempts to return a constant type metadata reference for a / nominal type.
Avoid emitting a delayable definition if it hasn't already been referenced.
Because of this, Sema isn't able to rebuild it in terms of interface types.
Before we create the preheader, gather all of the original preds of header.
Beginning in 2.0.12 truecolor is indicated by the initial 2-byte signature.
Build the cases for the SelectValueInst and find the first dominatingBlock.
Call the standard library implementation of _diagnoseUnexpectedNilOptional.
Cast will succeed Replace by unconditional_addr_cast, followed by a branch.
Change their linkage to public, so that other applications can refer to it.
Changing the body here may require changing / TypeCheckPattern.cpp as well.
Check if SinglePred has a switch_enum terminator switching on RCIdentity...
Check if sourceValue has the _ObjectiveCType type required by the protocol.
Check instanceof using the superclass vector on the end of the Class entry.
Check that the array value is released before a mutating operation happens.
Check to see if it is used by an apply that came from a call to super.init.
Check to see if the alloc_box was used by a mark_uninitialized instruction.
Check whether any of the inherited protocols fail to conform to themselves.
Check whether releasing this value can call deinit and interfere with User.
Check whether there is a user-declared constructor or an instance variable.
Check whether we have a constructor that can be called with an empty tuple.
Closure static variables are per instance, and need to start uninitialized.
Code 80 *also* comes from recv_header() (abs()) recv_data() stream handlers
Collect property names from all extensions in the same module as the class.
Compare two left-aligned numbers: the first to have a different value wins.
Comparisons against null are turned into comparisons with the empty string.
Copy the key, shifting each character up by one bit and padding with zeros.
Create a factory for code completion callbacks that will feed the Consumer.
Create the shared destination at the first place that might have needed it.
Create type variables for all of the parameters in a generic function type.
Currently the SIL verifier restricts it to single-refcounted-pointer types.
Data used by irGenRegion() and friends to pass information between retries.
Decide if we can evaluate this expression at +0 for the rest of the lvalue.
Defined here so IndexData is a complete type for the unique_ptr destructor.
Different from zend default but matches what we've been returning for years
Do not reclaim the symbols of the rule which action triggered this YYERROR.
Do the same as array_newelem_key, but ignoring possible emptiness of `arr'.
Do the server-side work for this interrupt, which just notifies the client.
Does not need m_valueCount, which is only useful with the unsupported types
Don't bother synthesizing the body if we've already finished type-checking.
Don't bother with the CPU timeout if we're already handling a wall timeout.
Don't override the linkage of a witness table with an existing declaration.
Don't synthesize attributes if there is already an availability annotation.
EAM DEBUG - Newer versions of libfree2 make it easier by defining encodings
Eat all of the catch clauses, so we don't trip over them in error recovery.
Emit a trap in the event a type does not match expected layout constraints.
Emit an existential container initialization operation for a concrete type.
Emit into the context initialization if it's present and possible to split.
Even if there were no source files, we should still record known protocols.
Eventually / they will all be removed after all the new ones are generated.
FIXME: Array types will need to be mapped differently depending on context.
FIXME: Check whether this function conversion requires us to build a thunk.
FIXME: Dependencies should be de-duplicated at serialization time, not now.
FIXME: Don't need to serialize private and internal default witness tables.
FIXME: Generic subscript operator could add another layer of substitutions.
FIXME: We could get spare bits out of the metadata and/or witness pointers.
FIXME: When we start dealing with C++, we can map over some operator names.
FIXME: revisit this once we get default implementations in protocol bodies.
FIXME: some types are provably too big (or aligned) to be allocated inline.
FIXME: use posix_memalign if alignMask is larger than the system guarantee.
Find the relevant insertion points for the loop region R in its successors.
Find the set of enum elements for the type so we can verify exhaustiveness.
First split the entry BB, moving all instructions to the FailedTypeCheckBB.
First we check whether the link already has database/username/password set.
First, close any protected EH regions that are past-the-end at this offset.
First, lower at the AST level by uncurrying and substituting bridged types.
For a class with no superclass, automatically define a default constructor.
For all other (reference counted value, ref count state) we are tracking...
For each instruction, add it to the set if it must be the start of a block.
For example, it could be a resilient struct or / something of unknown size.
For example, it could be a resilient struct or something of / unknown size.
For example: case ...: case body is implicitly wrapped in a brace statement
For now, don't try to re-use destination blocks for multiple failure sites.
For now, ignore witness-table fulfillments when they're not for archetypes.
For static variables, emit a reference to the global variable backing them.
Format: condition, a list of cases (Value ID + Value ID), default value ID.
Future options: - Collect the data cross-request to find APC opportunities.
Get the element of Aggregate corresponding to the one extracted by Extract.
Get the enum element and the destination block of the block we jump thread.
Get the line number on which execution will proceed when execution resumes.
Get the version of this compiler and pass it to C/Objective-C declarations.
Grab the ip address and port of the client that is connected to this proxy.
Having a solution implies the extension's requirements have been fulfilled.
Hitting this means we've messed up with syncing the stack in a catch trace.
However, that conformance info might be more concrete than we're expecting.
If after skipping dead successors, if our SuccIter is not end, then return.
If all the members of the union have the same layout, we can just use that.
If any free type variables remain and we're not allowed to have them, fail.
If class is not abstract, check that all abstract methods have been defined
If it is all 'no' then we can handle it specially without conditional code.
If it's not private it could be overridden, so we don't have an exact func.
If loading from memory, we need to set the base directory for the document.
If so, mark the latch head/tail blocks as head/tail unknown cfg boundaries.
If the bit is set, then the basic block kills the / value for the location.
If the buffer's refcount is 1, we can teleport the elements to a new buffer
If the conformance is generic, its generic parameters apply to the witness.
If the continuation block has no predecessors, this point is not reachable.
If the copied address is also loaded from, then destroy hoisting is unsafe.
If the decl has a value bound to it but has no PBD, then it is initialized.
If the declarations come from different modules, order based on the module.
If the default literal type is bridged to a class type, add the class type.
If the destination block ends with a return, we don't want to duplicate it.
If the destination type is variadic, compute the injection function to use.
If the hint / decl is specified, the new decl is inserted next to the hint.
If the preposition is "with" followed by "zone", never consider it vacuous.
If the prologue has a matching guard, then smash its guard-callers as well.
If the requested size is a page or larger, map page(s) for it specifically.
If the second solution has already lost once, don't bother looking further.
If the source type is already an error type, we've already posted an error.
If the system failed to produce a solution, post any available diagnostics.
If the types are identical and there was no optionality change, we're done.
If there is a comma after the expression, parse a list of let/var bindings.
If there is more than one argument yet none of them have names, we're done.
If there is more than one viable system, attempt to pick the best solution.
If there isn't a 'self' type, we're not going to try to access this anyway.
If this case of the switch is not matched up with this BB, skip the case...
If this is a call to a method or a mutating property access, indicate that.
If this is a copy_addr, make sure we remember that it is an initialization.
If this is a function at global scope, it may close over a global variable.
If this is a normal variable definition, then we can change 'let' to 'var'.
If this is a willSet/didSet observing property, record this and we're done.
If this is the top level of a 'self' value, we flatten structs and classes.
If this object pointer refers to an Objective-C class (possibly qualified),
If this piece is zero, it wipes out the chunk entirely, and we can drop it.
If this type was mapped to a concrete type, then there are no requirements.
If we can prove that all mutations to x occur before the closure is formed.
If we complain about any associated types, there is no point in continuing.
If we don't have a callback, we don't have to conditionalize the writeback.
If we have a suffix, we didn't generate a for loop, just straightline code.
If we have an explicit ownership modifier and our parent doesn't, complain.
If we have an opaque type, suggest the possibility of adding a class bound.
If we have any nested archetypes from an outer type, include them verbatim.
If we have any varargs, we'll need to actually initialize the array buffer.
If we see an OpenExistentialExpr, remember the mapping for its OpaqueValue.
If we see an explicit type annotation, coerce the sub-pattern to that type.
If we succeeded, take from the optional buffer into the destination buffer.
If we want to delete the initializer we also have to delete the allocation.
If we're entering at a DV-init, all higher parameter locals must be Uninit.
If we're referring to the member of a module, it's just a simple reference.
Imports from the stdlib are internal details that don't need to be exposed.
Initialize tracked memory state for locals and stack slots to empty values.
Insert an lea fixup for any stack args at the beginning of the catch block.
Inside traits we already did the magic for static::class so lets reuse that
Instead, the number is converted to a string and back again using strtod().
Introduce the trailing closure into the call, or form a call, as necessary.
Introducing a notion of a LSLocation that is used to model object / fields.
Is this a block that is interesting to the last iteration of the data flow.
Isn't expecting to get private static properties of super classes just yet.
It is at offset 0x7c, and is up to 32-bytes, including the terminating NUL.
It then folds offsets in memory operands to try to require fewer registers.
It's always either the generic parameter type 'Self' or a metatype thereof.
It's logically `publishing' a pointer to a pre-live ActRec, making it live.
Iterate over all children of this DIE, calling the given callable for each.
Ivars need to be collected in the ivars list, and they also / affect flags.
Known information about a particular possible instantiation of a PHP class.
Let the caller remove the allocation itself to avoid iterator invalidation.
Linux apparently appends a space at the end of the command line: remove it.
List of EHEnt's that should have m_fault bound to the Offset of this label.
Look for any property references in closures that lack a "self." qualifier.
Looks like an FPushCtor call, but it could still have been called directly.
Make sure the increment we are looking at is also matched to our decrement.
Make sure we're not overriding a settable property with a non-settable one.
Make this barrier explicit when building for TSan to avoid false positives.
Map each global let variable to the store instruction which initializes it.
Map the given element to the appropriate value in the / discriminator type.
Match a name against another name, ignoring the template parameter portion.
MixedArray::compact can only handle cases where the buffer's refcount is 1.
Mutating methods are always passed inout so we can receive the side effect.
No need to actually create the refinement context if we know it is useless.
No need to setLocalDiscriminator: protocols can't appear in local contexts.
Note that ArrayUserSet does not included uses of elements within the Array.
Note that this is the primary source of false negative for this diagnostic.
Note: we don't always get TypeAnnotations (e.g. for shape types currently).
Now handle the effects of the store on the aset for the value being stored.
Now that type witnesses are done, satisfy property and method requirements.
Object types with no linkage are only the same if they have identical keys.
Objective-C initializers are tracked by their context type and / full name.
Objective-C selector string literals cannot be used in static initializers.
Okay, everything else will be passed as a single value, one way or another.
Only consider 'private' members, unless we are in whole-module compilation.
Only if it is the 3rd month is both the start and end of the year required.
Otherwise short-circut the connection attempt, and say we failed right away
Otherwise, bitwise-or it in, brazenly assuming there are zeroes underneath.
Otherwise, claim the next value from the input and store that in the field.
Otherwise, collect references to all of the inherited protocol descriptors.
Otherwise, the lvalue access is performed with a fragile element reference.
Otherwise, we can directly load the statically known superclass's metadata.
Otherwise, we gather up sub-records that need to be checked for checking...
Perform "stable" optimizations that are invariant across compiler versions.
Print a TypeRepr if instructed to do so by options, or if the type is null.
Put all of the keys from all the containers (except container1) into a Set.
Read through typedefs until we get to a CF typedef or a non-typedef-ed type
Recursively gather the set of type variables referenced by this constraint.
RefCountingOperations on other instructions could have side effects though.
Register a cleanup with the ASTContext to call the lookup table destructor.
Remove stores and record the value that we are saving as the running value.
Remove those type variables for which this solution did not have a binding.
Report a fatal error to system console, stderr, and crash logs, then abort.
Require that at least one side of the requirement be a potential archetype.
Requires a local variable id containing the previous error reporting level.
Reserve space for size * 4 / 3 because we limit our max load factor to .75.
Reset state if the block has any predecessor that we haven't processed yet.
Retrieve the archetype from the archetype anchor in this equivalence class.
Retrieve the parent expression that coerces to Selector, if / there is one.
Return the Unit's SourceLocTable, extracting it from the repo if necessary.
Returns the base address, i.e. the first address which is not a projection.
Returns the latest position for which `allow' (which we populate) is valid.
SIL uses polymorphic function types to resolve overloaded member functions.
Save the cleanup on the argument so we can forward it onto the cast result.
Save the location and operand information from the branch, then destroy it.
Search the buffers back-to front, so later alias buffers are visited first.
Set the current generation, remove the node from the stack, and process it.
Skip the entry for the simple name so that we report each declaration once.
So going through them lets stores be as bad as if the address would escape.
Some cmds require us to interpret all instructions until the cmd completes.
Sort nameCache, and then transform Results to return the pointers in order.
Special case for resource since VariableSerializer does not take care of it
StringData::capacity() returns the buffer size without the null terminator.
Subscript setters and getters are named with the reserved word "subscript".
Swift's closure model is that all local variables are capture by reference.
TODO: Check that the deployment target supports the new calling convention.
TODO: We could easily handle hoisting above loops if LoopInfo is available.
Take the next direct inner result and just make it a direct / outer result.
That will be type-checked after we've determine the complete function type.
The AddElem* instructions decref their args, so don't decref pop'ed values.
The Substitution header does not share state with the rest of the mangling.
The arguments must match the suffix of the original function's input types.
The client's current line is then updated to point to the last listed line.
The corresponding value witness from which the type witness / was inferred.
The directory itself was modified, so invalidate its cached stat structure.
The fg and bg colors must already be in the color table for palette images.
The following libraries are required to build a satisfactory static program
The funny approach here is to validate the translator's assembly technique.
The override member type is semantically a subtype of the base member type.
The parser generated a unique name for the function, use that for the class
The point lies inside the portion of the plane spanned by the line segment.
The rest are the same as the globals declared in the non-reentrant scanner.
The runtime doesn't support casts to CF types and always lets them succeed.
The set of property names that show up in the defining module of a / class.
The size is the number of times this function / is inlined into its caller.
The static src/dest types cannot be checked here even if they are loadable.
The value are set using send_long_data so we don't have to do anything here
The witness is a constructor which is more failable than the / requirement.
There is no SIL instruction to create a class or box by aggregating values.
There is no point in continuing to compare the first declaration to others.
There's a method somewhere in the hierarchy, but none which are accessible.
There's no concept of vector in PHP (yet), so return an array in both cases
This assert self documents our precondition that Context is always nullptr.
This callback may be used to provide output indicating that the task began.
This cannot be tok::unknown, since that is a token the lexer could produce.
This check will determine if the gap belongs to another instruction or not.
This file defines the primary routines for creating and emitting functions.
This file implements the ASTNode, which is a union of Stmt, Expr, and Decl.
This function happens-after a point where the strong reference count was 0.
This function isn't meant to perform the actual comparison at compile-time.
This is a bit conservative as we could be missing forwarding opportunities.
This is an OpenSSL-compatible implementation of the RSA Data Security, Inc.
This is not required for flow use an or to avoid introducing another branch
This isn't exactly true after type-checking, but it's close enough for now.
This makes sure it's emitted before the message text buffers are destroyed.
This means that the callee will always be the first frame in its nested VM.
This might need to be written to metadata if it depends on resilient types.
This must be called on the same thread on which the constructor was called.
This prefers exact matches over matches that require renaming, for example.
This shouldn't happen, but if it does don't get into an inconsistent state.
This struct declaration is technically a parse error, so do not type check.
This will help us compute a / "best common type" from the expression types.
To set up irSPOff, we want the FPInvOffset for the new fpValue and spValue.
Try to check if the exact dynamic type of the instance is statically known.
Try to infer the type of the constant expression that the user operates on.
Type check the function subexpression to resolve a type for it if possible.
Undocumented, but Zend returns false for streams where fstat is unsupported
Update the single-swift-refcounted check, unless we already ruled that out.
Use InOutExpr to convert it to an explicit inout argument for the receiver.
Use Type::findIf() to walk the types, finding type variables along the way.
Use dirty hacks to reconstruct the BB from the 'self' pointer of the trait.
Used by __construct for Vector and ImmVector Used by addAll for Vector only
VarEnv is attached to eval or debugger frame, other than the current frame.
Variable to guarantee that fallback exceptions have been initialized early.
Walk forward looking for a release of ArrayLoad or element of ArrayUserSet.
We also know the new function can't be static, because the last one wasn't.
We are conservative in the face of / having multiple init_existential_addr.
We can (and must) hoist cond_fail instructions if the operand is invariant.
We can conditionally cast from NSError to an ErrorProtocol-conforming type.
We can have native-to-foreign thunks over global or local native functions.
We can't take or destroy the value out of the box since it might be shared.
We do that simply by setting the source node of the defer-edge to escaping.
We generally walk into declarations, other than types and nested functions.
We have to use an AST Walker to find the VarDecls buried down inside of it.
We must convert to mixed, but can call addVal since the key must not exist.
We need a preheader - this is also a canonicalization for follow-up passes.
We need an instantiation function if the base conformance is non-dependent.
We need to know how to replace the call by reference counting instructions.
We only reuse an existing project_box if it directly follows the alloc_box.
We only traverse the type-checked form, unless we haven't populated it yet.
We wait to raise warnings until after all the locals have been initialized.
We're building a derived accessor on top of whatever this / class provides.
When matching retains to releases we must not match the same release twice.
XXX(jezng): I'm not sure how to test this, so leaving unimplemented for now
YAML parser and emitter PHP extension  Copyright (c) 2007 Ryusuke SEKIYAMA.
Zero the error slot to maintain the invariant that it always contains null.
a helper will decref it but the translated code doesn't care about the type
ask the driver to perform any normalization it needs on the parameter name.
decodeLLVMAtomicOrdering - turn a string like "release" into the LLVM enum.
end anonymous namespace / Code motion that does not releases into diamonds.
foldConst() is callable from the parse phase as well as the analysis phase.
if entry needs expading ifd cache and entry is at end of current ifd cache.
intercept constant, non-string ord() here instead of OrdStr simplify stage.
it's only the display name if there are quoted strings or comments in there
ither by passing in the already created xmlnode or passing in the node name
query functions Zend returns strings and NULL only, not integers or floats.
recordFailureBB - we have to detect if the self box contents were consumed.
set the thumbnail stuff to nothing so we can test to see if they get set up
set will decRef any old value that may have been overwritten if appropriate
subpats_order is pre-set to pattern mode so we change it only if necessary.
sweep functions are allowed to access g_context, so we can't destroy it yet
we need to handle xml: namespace specially, since it is an implicit schema.
we need unserialize and serialize again because the format was APCSerialize
(It doesn't really matter, since the enum can't be instantiated regardless.)
...but we shouldnt apply ref() to it unless the corresponding arg is refable
/ / If the tuple is in memory, the result elements will also be in / memory.
/ Reading the pinned prevents us from moving the pin instructions across it.
2) If the user provided a behavior for this specific diagnostic, follow that
A class for reference types, which are all non-trivial but still / loadable.
A layout contains a list of offsets and actions to perform at those offsets.
A let property provides more guarantees than the getter of a 'var' property.
A map from consumed SILArguments to the release associated with an argument.
A pointer to the underlying php::Class that we're storing information about.
A similar issue applies if you want to take out emptiness when a set occurs.
A two-byte-character lead-byte not followed by trail-byte represents itself.
A vector containing the same-type requirements introduced into the / system.
Accept and remove the 'final' attribute from members of protocol extensions.
Add the starting values of the context according to FIPS 180-2:6.2.2 step 4.
Add the starting values of the context according to FIPS 180-2:6.3.2 step 4.
Additional SIMD args wind up on the stack and can autobox with integer types
An AST section consists of one or more AST modules, optionally with headers.
Another SIL_DEFAULT_WITNESS_TABLE record means the end of this WitnessTable.
Any typehint not on this list is assumed to be normal "class-name" typehint.
Anything with Local in its output or a member base input can modify a local.
Assert that the size passed into the scanner is a multiple of the type size.
Assign virtual registers to all SSATmps used or defined in reachable blocks.
Attempt to diagnose problems where obvious aliasing introduces illegal code.
Attempt to perform the breakpoint, detach the server if something goes wrong
Autoload succeeded, try to grab a typedef and if that doesn't work, a class.
Bail if any generic types parameters of the class instance type are unbound.
Bail if we have an instruction which may read the RC_DEALLOCATING_FLAG flag.
Big 5 mapping: use "JIS-8 half-width katakana" coding from 8-bit characters.
Bind the specified generic arguments to the type variables in the open type.
Both blocks must be in a loop otherwise the split block is outside the loop.
Bridge argument types and adjust retain count conventions for an ObjC thunk.
But just in case, use snprintf() and make sure the buffer is zero-terminated
Call the callback before we mutate the to be deleted instruction in any way.
Callstack walking is necessary, because we may get called from a uniqueStub.
Check error-handling correctness for all the functions defined in this file.
Check for a () suffix, which indicates a call when constructing this member.
Check if we already have a declaration or definition for this witness table.
Check whether the given type representation will be / default-initializable.
Check whether we can perform qualified lookup into this declaration context.
Check whether we have an Objective-C-defined class in our inheritance chain.
Check whether we should try to import this factory method as an initializer.
Clone anything else about the component that we might need in the writeback.
Collect all of the archetypes in this declaration context and its / parents.
Collect the elements of the tuple patterns for argument and body parameters.
Compare two declarations to determine whether one is a witness of the other.
Compares the strings via the Unicode Collation Algorithm on the root locale.
Components union trivially (i.e., to "unspecialized") unless they are equal.
Compute matching sets of increments, decrements, and their insertion points.
Compute the substitution for the given archetype and its replacement / type.
Computing layouts for indexed types is the purpose of the scanner generator.
Conjure up a generic signature from the generic parameters and requirements.
Construct a specialized arg forwarder for a (locally) successful / dispatch.
Convenience class for creating TransLocs and TransRecs for new translations.
Convert arguments to a representation appropriate to the calling convention.
Converts YUV to RGB and writes into a 32 bit pixel in endian neutral fashion
Create nSplit contiguous regions and store them in the appropriate freelist.
Debug values do not use referenced counted values in a manner we care about.
Default witness thunks are mangled as if they were the protocol requirement.
Define structure for one recognized option (both single char and long name).
Diagnose the unreachable code within the same block as the call to noreturn.
Dig out the Objective-C class type through which the native type is bridged.
Do a rough check to allow any ObjC-representable struct or enum type on iOS.
Don't include protocols, since they can't be initialized from the type name.
Don't inline if we're retranslating due to a side-exit from an inlined call.
Don't introduce a default argument for setters with only a single parameter.
Don't proceed if free memory is too limited, no matter how big the cache is.
Each month is divided into three decades (instead of weeks) of 10 days each.
Either way, we want to have the potential of successfully matching the type.
Erase an expression tree's open existentials after a re-typecheck operation.
Extended Linear Scan register allocator over vasm virtual registers (Vregs).
Extract byte convert testbi to testqi or ldimmq + testq by testqi's lowering
Extract word convert testli to testqi or ldimmq + testq by testqi's lowering
FIXME: Any error anywhere in the SourceFile will switch off SIL diagnostics.
FIXME: Avoid a behavior change while guaranteed self is disabled by default.
FIXME: If we spilled extra tag bits, we could offer spare bits from the tag.
FIXME: This heuristic isn't great, but it helped somewhat for overload sets.
FIXME: Unfortunate that we can't really capture the generic parameters here.
FIXME: We could insert an IsPattern if a checked cast can do the conversion.
FIXME: We could lower select_enum directly to LLVM select in a lot of cases.
FIXME: really it would be much better if Sema had stricter phase separation.
Find all of the unfulfilled parameters, and match them up semi-positionally.
Find the target JumpDest based on the target that sema filled into the stmt.
First check that std::is_constructible counts explicit conversion operators.
First make the inst's next block, so we can save state to it in finishBlock.
For any literal type that has been covered, remove the default literal type.
For cases where the buffer's refcount is greater than 1, call resizeHelper()
For each node in the post-dominator tree we will compute: -- A level number.
For each of the fixes, record it as an operation on the affected expression.
For enum values we are only interested in switch_enum and select_enum users.
For example, Britain converted in 1752, The USSR in 1918 and Greece in 1923.
For library-style parsing, we need to make two passes over the global scope.
For non-Objective-C initializers, we have an allocating initializer to call.
For now this utility is only used to split critical edges involving cond_br.
Form the call, which will be emitted on any path that needs to run the code.
FrameState for the same function must always have the same number of locals.
From gdb: (gdb) set language c++ (gdb) call HPHP::Trace::dumpRingBuffer(100)
Functions with captures have an extra uncurry level for the capture context.
Furthermore, all of the builtin types are pre-built in the clang ASTContext.
Get the name of the class or protocol to mangle into the ObjC symbol / name.
Given the address of a tuple, project out the address of a / single element.
HHIR may have figured the topFunc even though the RegionDesc didn't know it.
Handle polymorphic functions by properly substituting their parameter types.
Helper that sets a value to a new value and also returns whether it changed.
Helpers for usage logging NB: the usage logger is not owned by the Debugger.
Hook called from iopThrow to signal that we are about to throw an exception.
How this occurs depends on the current context and where the type was found.
However, any allocation of the type only contains one instance of that type.
If "K1" is yes, or no, then switch to partial if we find a different answer.
If -s has been specified, treat character special files like ordinary files.
If Xenon owns a pthread, tell it to stop, also clean up anything from start.
If a block ends with an unconditional jump, change it to a fallthrough edge.
If control branched to the failure block, inject .None into the result type.
If either of the types still contains type variables, we can't compare them.
If ignore isn't set, the issue has already been decided (conservative scan).
If it is an apply, attempt to prove that the callee is unable to affect Ptr.
If not, its a LayoutError, as a custom scanner is needed to disambiguate it.
If one of the struct instruction operands is not a simple initializer, bail.
If the blocks are different, it's as easy as whether BB1 post dominates BB2.
If the body of the closure looked ok, then look for a contextual type error.
If the bridged ObjC type is known, check if source type can be cast into it.
If the caller takes the argument indirectly, the argument has an inout type.
If the client is telling us that it knows what it is doing, then believe it.
If the current position in the bytecode is reachable, emit code to return 1.
If the declaration reference is specialized, create the partial application.
If the destination base type is a type variable, we can't simplify this now.
If the destination type is a subtype of the source type, we have a downcast.
If the elt we are extracting is trivial, we cannot be a non-trivial field...
If the existential is class, lower it to a class existential representation.
If the first extension is at least as specialized as the second, we're done.
If the from/to types are invalid, then use a cast that will fail at runtime.
If the literal has been assigned a builtin integer type, don't mess with it.
If the model type does not conform to the protocol, the bases are unrelated.
If the pointed-to type is unrepresentable in Swift, import as OpaquePointer.
If the previous removal range was the previous argument, combine the ranges.
If the super.init call is implicit generated, produce a specific diagnostic.
If the witness is a free function, consider the self argument uncurry level.
If the witness is within an extension, it can be moved to another extension.
If there are too many highlight lines, truncate spew by setting lastLine ...
If this argument is not dead and we can explode it, add 's' to the mangling.
If this is a 'var' decl, then we're settable if we have storage or a setter.
If this is a global variable, initialize it without allocations or cleanups.
If this is a willSet/didSet property, synthesize the getter and setter decl.
If this node does not have a parent, it should have no non-local successors.
If this solution is worse than the best solution we've seen so far, skip it.
If var is a lazy property, its value is provided for the underlying storage.
If we aren't inheriting initializers, remove any initializers from the list.
If we can prove that Other cannot use the pointer we are tracking, return...
If we can resolve the desired bits out of the current chunk, all the better.
If we did not find such a block or if it is the current block then bail out.
If we do something after onRequestShutdown registered a RequestEventHandler.
If we don't have it, we need to call the general name via the witness table.
If we dug out a problematic decl, we can produce a nice tailored diagnostic.
If we have a store to self inside the normal BB, we have a 'real' try_apply.
If we have any expected fixits that didn't get matched, then they are wrong.
If we have multiple non-substitutable types, this is just a mismatched mess.
If we have no place to step out to, then unwind another frame and try again.
If we have two tuples with mismatching types, produce a tailored diagnostic.
If we have useful information about the type we're initializing, provide it.
If we need to diagnose this as a bad reference to an initializer, do so now.
If we're accessing this member with an abstraction change, perform that now.
If we're in a for loop, the offsets need to be biased by the loop iteration.
If we're in verify mode, install a custom diagnostic handling for SourceMgr.
If we're script debugging, this will be the proxy that does all of our work.
If we're suppressing error paths, just wrap it up as unreachable and return.
Implement logic from libxml xmlTextConcat to add support for comments and PI
Implement pthread_barrier_* for platforms that don't implement them (Darwin)
Implementations of the stub APIs that make portable runtime easier to write.
In the latter case, we add the imported type as a nested type of the parent.
Introducing a notion of a LSLocation that is used to model objects / fields.
It was designed with consideration of the flaws in various other generators.
LLVM's object-file emission collects a fixed set of keys for the image info.
Lazily declare a fake-looking class to represent an ObjC runtime base class.
Local function that adds the given declaration if it is a reasonable choice.
Local function to visit a potential archetype, enumerating its requirements.
Look through a possible l-value type, returning true if it was / an l-value.
Make copies of Funcs inherited from the parent class that have static locals
Make sure each of the type variables referenced knows about this constraint.
Make sure that we didn't find more than one match at the best edit distance.
Mangle the name of a protocol or class for use in the Objective-C / runtime.
Map values in predecessor blocks to argument indices of the successor block.
Matches the php5 extension in that this case doesn't use ANSI color codes...
Non-ObjC existentials don't have a single-refcounted-pointer representation.
Non-Objective-C declarations in extensions cannot override or be overridden.
Note that access of undefined class constants can cause the eval() to fatal.
Note that we do *not* apply substitutions from a bound generic instance yet.
Now grab the increment matched up with the decrement from the bottom up map.
OTOH, if we do have a contextual type, we can provide a more specific error.
Ok, we have a payload enum, make sure that we have a store previous to us...
Okay, ask the runtime for the type metadata of this potentially-ObjC object.
Once we know if this process does not have debugger support, we'll clear it.
Otherwise create the release_value before the terminator of the predecessor.
Otherwise see if we previously computed the callees based on witness tables.
Otherwise, avoid nuking whitespace that might be zapped through other means.
Otherwise, figure out the type of the constructor function and coerce to it.
Otherwise, use this archetype as the exemplar for future similar archetypes.
Otherwise, we have to produce a series of notes listing the various options.
Otherwise, we just keep it around as our interface to Clang's ABI knowledge.
PHP unescapes the URI here, but that should properly be done by the wrapper.
Perform a dynamic cast from an existential type to a / non-existential type.
Perform the RRN Optimization given the current state that we are / tracking.
Performa direct jump to the break lable and free any pending iterators left.
Piece the modified direct result information back into the all-results list.
Produce the initializer for the private-data field of the / template header.
Put all of the values from all the containers (except container1 into a Set.
Redirect the outgoing defer edges, which may also trigger other node merges.
References to Self in a position where subclasses cannot do the right thing.
Reject cases where this is a variable that has storage but it isn't allowed.
Reject requirements other than constraints with an subject other than `Self`
Remember that this is the memory location that we're emitting the / decl to.
Remove redundant checks along the dominator tree in a loop and hoist checks.
Replace the array.props calls uses in the cloned loop by their 'fast' value.
Reroute existing translations for SrcKey to an as-yet indeterminate new one.
Retrieve the type of the ivar initializer or destroyer method for / a class.
Return an existing translation for `args', or nullptr if one can't be found.
Return the rc-identity root of the RC instruction, i.e. / retain or release.
Return the single member of the lowered explosion for the / given SIL value.
Returns true if Inst is a function that we know never uses ref count values.
Returns true if the protocol is complete and the machine is at an interrupt.
Scan through the uses and add them to the worklist for recursive processing.
See "RC lower bounds" in the documentation---there are some subtleties here.
Selector for the partial_application_of_function_invalid diagnostic message.
Send breakpoints to the server, and then attach to the sandbox if necessary.
Separate the declarations that we are going to print into different buckets.
Set up a callback which will be called immediately after a task has started.
Should we replace calls to assert_configuration by the assert configuration.
Similar to fixups - this is a return address so get the address returned to.
Since cload does the load unconditionally anyway, we can just load and cmov.
Skip if the probability of taking this arc is below the specified threshold.
Smash the type and member names together so we can continue using StringMap.
Something is wrong with the connection, we need to remove this from our list
Stub function ABI  The code below is Call-stub ABI compliant, not PPC64 ABI.
Success means that we won't end up in the other branch, but failure doesn't.
Swallow this exception - we don't want to crash the app, an error is enough.
TODO: This is a hack and eventually this pass should not be required at all.
TODO: This relies on the lowest level array.uninitialized not being inlined.
TODO: When we support address types, this code path will need to be updated.
TODO: When we switch to malloc/free allocation we'll be leaking memory here.
TODO: manage as a set of lists, to speed up addition of binding constraints.
Templates are instantiated over the collection class and the iterator style.
Temporaries created as copies of alloc_stack arguments of the partial_apply.
Test that pointer enums with the same case but different data are not equal.
That could help to adjust intersections  to produce a nice interior_extrema.
The ObjC type param didn't get imported, possibly because it was suppressed.
The PartialApplyArg from the caller is now mapped to its cloned instruction.
The accepted expression types are: - The magic constants "true" and "false".
The current continuation level reverts to the level of the one we're seeing.
The current instruction doesn't have a catch block so it'd better not throw.
The dominating exact cast was successful, but it casted to a different type.
The member reference is in a context where an access will call / the getter.
The member reference is in a context where an access will call / the setter.
The result might be exactly on an edge, or in-between instruction positions.
The routines in this file implement thunking between lowered function types.
The sign bit of a result is 0 only if the sign bit of a source operand is 0.
The type of the capture list is the type of the closure contained inside it.
TheMemory - This holds information about the memory object being / analyzed.
There are no exported functions in ext/date to this in a more native fashion
Therefore we let WarmupRequestHandlerFactory track the global request count.
These are an / implementation detail of witness table lazy access functions.
These are ostensibly bools, but for historical reasons are expressed as ints
These transformations are safe to perform as we know the layouts at maximal.
This affects may-load, may-store, and kills information for the instruction.
This allows CompilerType::IsSwiftMethod to work properly off the swift Type.
This class isolates our access to private internal methods of MessageFormat.
This communicates to the LLVM level ARC / optimizer not to touch this value.
This file implements IR generation for function signature lowering in Swift.
This function may return a new array if it decided to COW due to cowCheck().
This is a predicate that classifies constraints according to our priorities.
This is an O(n) search, but only happens when producing an error diagnostic.
This is either to successor BBs, / or as far down the current BB as possible
This is more likely to succeed than / type checking the original expression.
This is more likely to succeed than type checking the original / expression.
This is necessary because we might remove e.g. tuple elements from the path.
This is only called right after dispatchBB, so the VM regs really are clean.
This is our opportunity to complete the connection and make it ready to use.
This is primarily intended for use for debugging and development on the JIT.
This is used to allow for concisely selecting collections with dotted names.
This macro does zero padding so that the precision requirement is satisfied.
This made gcc generate better code at the time it was done (saving a spill).
This means that the / instruction is safe only if all of its users are safe.
This ought to use HWB, but we don't have an alpha-aware version of that yet.
This pass promotes AllocStack instructions into virtual register references.
This re-synchronizes the parser so we can at least parse the body correctly.
This slightly reduces the number of wasted vtable vector entries at runtime.
This suppresses the error about missing return value in a non-void function.
This type variable should be in the equivalence class of its representative.
This was optimized from a Constant, or ClassConstant use the original string
This will get default initialized using the protocol's initStorage() method.
Thus musage in the example code may well substantially exceed m_stats.usage.
To make the output somehow consistent with the output of the function's SIL.
True if the value is only valid, because a constant is passed to the callee.
Tuples need to have their component types substituted by these / same rules.
Types imported by Clang don't need this, because we can synthesize it later.
Undefined behavior, so we might as well constant propagate whatever we want.
Unfortunately, MSVC doesn't support computed gotos, so use a switch instead.
Use the type of the individual varargs argument, not the overall array type.
Validate the subscript or property because it might not be type checked yet.
Value types hold the parent metadata as a far relative indirectable pointer.
Walk over the function and find all the locations accessed by this function.
We are ignoring generic functions and functions with out parameters for now.
We are now either at the end of the string, or at / where the dbname starts.
We are only interested in the latter case and want to ignore the setup code.
We aren't allowed to promote loads in blocks reachable from an escape point.
We assume it to be 16 characters (that's what it is in SunOS 5.x and Linux).
We can match a prefix so long as everything following the match is a number.
We currently only support final on var/let, func and subscript declarations.
We do not push basic block into the worklist if its already in the worklist.
We do not support symbolic projections yet, only 32-bit unsigned / integers.
We don't assume the XDebugCommand will stick around before the node is sent.
We don't use allocateStack because we're not allocating this in stack order.
We go through ObjC lookup to deal with potential runtime magic in ObjC land.
We have a folly::Optional just to keep the result type DefaultConstructible.
We have already checked that the operands of our struct_element_addrs match.
We have cases where a private typealias was used in a mangled variable name.
We iterate through the pattern, searching for the matching ending delimiter.
We know it has to name a class only if there's no type alias with this name.
We may be able to hoist it more in another pass but don't currently iterate.
We mirror the compiler and don't set the TypeResolver during SIL processing.
We need to ask for the right kind of specialization, so grab it from origTc.
We need to have an array element type that is not calling a deinit function.
We require SIL instructions to be at the start of a line to assist recovery.
We should not be emitting accessors for partially-substituted generic types.
We still need to check if ctx defines a private property with the same name.
We use 32 bits to represent offset into a chunk, so don't make it too large.
We use this to detect if a variable is multiply assigned or left unassigned.
We want all instances of a generic enum to share an implementation strategy.
We'll apply user conversions for operator arguments at the application site.
We're responsible for freeing the return value if we exit with an exception.
When choosing a register, prefer the one available furthest into the future.
Widest type for this MustAliasSet, used for computing may-alias information.
an assignment to a property of an object counts as a mutation of that object
builtin-functions has to happen before zend_API since that defines getThis()
calleeAR m_soff is 0 in the re-entry case, so we'll set pc to the func base.
curN holds the error propagated from the previous pixel on the current line.
encoding is a 0 or 1 and str is a string of length less than or equal to 32.
end anonymous namespace / Estimate the cost of inlining a given basic block.
especially, SSA block order doesn't matter, but only visit reachable blocks.
getters and setters funcdecls will be handled by their parent var/subscript.
invokeFunc() must always check the native stack for overflow no matter what.
iterate over all the potentially hoistable classes with no fatals on failure
lazy must have an initializer, and the pattern binding must be a simple one.
optimizeExits does two conversions to eliminate common branch-to-exit flows.
options used to just be "condition" but now can be "condition" or "finalize"
this rule, and ST_IN_PHP_OPEN_TAG are specifically for the case where a file
type metadata cache should always be sufficiently initialized by this point.
"throws" or "rethrows" isn't a valid type without being followed by a return.
(It can't be a local since Config::Bind will take and store a pointer to it.)
- Explicitly-written nodes should be walked in left-to-right syntactic order.
/ / ComputeAvailGenKillSet - Build the genset and killset of the basic block.
/ / Create a new block as a common target for all the current loop backedges.
/ / Projections over the aggregate that do not access the struct are ignored.
/ For ObjC protocols, descriptors are uniqued at runtime by the ObjC runtime.
/ In case when a simplification is not possible, a null SILValue is returned.
/ Intentionally not defined as a copy constructor to avoid accidental copies.
/ Store the Substitution list in a ConcreteDeclRef attached to the attribute.
/// The instantiation function, which is called after the template is copied.
2) Update the retranslation successors, first cleaning the original pointers.
2.0.12: a new adaptation from the same original, this time by Barend Gehrels.
2.0.24: inptr must not be incremented until after transparency check, if any.
5) Each block contains at most one successor corresponding to a given SrcKey.
A TypeInfo implementation for address-only types which can never / be copied.
A designated initializer for a class must be written within the class itself.
A foreign error convention can affect the result type as seen in Objective-C.
A list of "suspicious" optional injections that come from / forced downcasts.
A member of a protocol extension never conflicts with a member of a protocol.
Absolute "path" so that handleTestInvocation doesn't try to make it absolute.
Add classes that don't require dynamic initialization to the ObjC class list.
Adjust the time backwards by the value of the hour, minute and second fields.
Algorithm:  Start by running an analyze pass on every class or free function.
At each conditional assign, resolve the ambiguity by inserting a CFG diamond.
At this point, we will need additional characters from the string to proceed.
Bitfields are imported as computed properties with Clang-generated accessors.
Build a private global variable as a structure containing the / given fields.
Build an array of APCHandle* to mirror the declared properties in the object.
But if we ever need to set it for that purpose we will have to fix that here.
But there are cases where we can get an unapplied declaration reference back.
Caches the set of associated types that are referenced in each / requirement.
Called in response to a host of VM events that the debugger is interested in.
Can't clone alloc_stack instructions whose dealloc_stack is outside the loop.
Check for potential unavailability because of the minimum deployment version.
Check if the explicitly-written enum type matches the type we're coercing to.
Check if the lookup we're about to perform a lookup within is a Clang module.
Check that the argument has the same incoming edge values as the value / map.
Checking that all types are the same make guarantees that this cannot happen.
Common case is we have an empty string or a string with size bigger than one.
Compute the SILLocation which should be used by all the inlined instructions.
Consider a situation with a PHP function f() that calls another function g().
Converts a packed array to mixed, leaving the packed array in an empty state.
Create a PHInode for returning the return value from both apply instructions.
Create a hard or symbolic link to a filename according to the type specified.
Create a new context for the Then branch and traverse it in that new context.
Create a shadow copy of inout parameters so they can be captured by closures.
Create the call to the destructor with the allocated object as self argument.
Deconstruct an existential object into witness tables and instance / pointer.
Default implementation: Get the value via sourcekitd_variant_array_get_value.
Deleting this ensures that all attributes are covered by the visitor / below.
Determine whether the given extension has a Clang node that / created it (vs.
Determine whether the type of the witness's context conforms to the protocol.
Determine whether this is a "simple" type, from the type-simple / production.
Determine which simple collection op to use for the given base and key types.
Diagnose all the call sites within a single unhandled 'try' at the same time.
Do the effects of array_set but without handling possibly emptiness of `arr'.
Do this at the very end as syncing needs to allocate memory for the ELF file.
Don't bother projecting out the address-only element value only to ignore it.
Don't mask "always true" warnings if NSError is cast to ErrorProtocol itself.
Don't walk into the type if the decl is implicit, or if the type is implicit.
Emit a smashable call that initially calls a recyclable service request stub.
Emit lazy definitions that have to be emitted in this specific / IRGenModule.
Emit the catch clauses, but only if the body of the function actually throws.
Emit the decision tree for a row containing only non-specializing / patterns.
Emit the witness table references required for the given type / substitution.
End recursion if we dont need deeper levels or we dont have any deeper levels
Escape analysis can eliminate this copy if it's unneeded during optimization.
FIXME: Clang does this by using non-ad-hoc types for ObjC runtime structures.
FIXME: Use a consistent constant/enum rather than repeating hard-coded values
FIXME: each parameter info should be HNI with a handle to the Func::ParamInfo
Fall-through to the default case, since we still need to print the character.
False means the machine is running and we need to wait for another interrupt.
Fast path: this associated type declaration declares the desired conformance.
Fetch the lazy access function for the given conformance of the / given type.
Filter out any subclasses that do not inherit from this specific bound class.
Finally, emit the continue block and keep emitting the rest of the condition.
Find the original declaration, from which we can determine the owning module.
Find the real name of path, by removing all ".", ".." and symlink components.
Find the type variables and overload locators common to all of the solutions.
First fix up some of the indexed types so that they're in a consistent state.
First we create a hash for the password to store (md5(pid,password,username))
For a free function witness, discard the 'self' parameter of the requirement.
For a subscript declaration, only look at the input type (i.e., the indices).
For an empty case, factor out the parts that go in the payload and tag areas.
For cases where the buffer's refcount is greater than 1, call resizeHelper().
For each function, find any inout arguments and try to optimize each of them.
For future reference: Set errno on error, since we are called by yylex_init()
Funcs can be recorded out of order when loading them from the repo currently.
Gen and InitGen don't add any useful information, so leave them out entirely.
Get a new slab, then allocate nbytes from it and install it in our slab list.
Get rid of definitions for all global functions that are not marked as alive.
Get the delimiter and display a warning if it is alphanumeric or a backslash.
Go through all blocks of the function, accumulate the cost and find benefits.
How many letters to skip because an eariler encoding handled multiple letters
If any of the enum elements have address-only data, the enum is address-only.
If at least one of the contexts is a non-type context, the two are unrelated.
If for testing purposes we were asked to not eliminate dead closures, return.
If it's a physical value (e.g. a local variable in memory), push its address.
If just tried and failed to reuse lookahead token after an error, discard it.
If mightRelax(src) returns true, we can't generally depend on the src's type.
If no type has been set for the initializer, we need to diagnose the failure.
If not, the SILVerifier object will explode trying to compute dominance info.
If present, but empty, the scanner does not have linkage (which is an error).
If the SILModule does not have the VTable, attempt to deserialize the VTable.
If the array escaped through an unknown use, the analysis must abort earlier.
If the base is currently scalar, we may have to drop it in memory or copy it.
If the bit is set, then the basic block generates a / value for the location.
If the body consists of a single expression, turn it into a return statement.
If the box has escaped at this instruction, we can't safely promote the load.
If the client can handle unresolved type variables, leave them in the system.
If the concrete type is dependent, substitute dependent types for archetypes.
If the fully-uncurried reference is to a generic method, look up the witness.
If the function is explicit or may be externally referenced, we must emit it.
If the global variable has storage, it might also have synthesized accessors.
If the instance type is not representable, the metatype is not representable.
If the lengths match, the data is to spec, so we use len2 as the true length.
If the macro is equal to an existing macro, map down to the same declaration.
If the match wasn't the next one, we have potentially out of order arguments.
If the name of our match differs from the name we were looking for, complain.
If the payload was indirect, we already evaluated it and have a single value.
If the range is "all", this is the same as not having an available attribute.
If the referenced decl isn't a VarDecl, it should be a constant of some sort.
If the shuffle index is Variadic, the argument sources are stored separately.
If the sign bit isn't set, we can get the same results by emitting a testlim.
If the substituted type is passed indirectly, so must the unsubstituted type.
If the type checker has any newly created functions with the operator's name.
If the typed pattern was propagated from somewhere, just walk the subpattern.
If the variable was invalid, ignore it and notice that the code is malformed.
If there's a custom scanner for the entire object, list of types to guard on.
If there's only one protocol, the existential type name is the protocol name.
If they are equal, merge their addresses and their scan field anded together.
If this initializer came from a factory method, inherit it as an initializer.
If this is a negative literal in an unsigned type, use a specific diagnostic.
If this is an AssignExpr, see if we're mutating something that we know about.
If this is an initializer, replace the result type with the base object type.
If this is the start of a get/set accessor, then it isn't a trailing closure.
If this is within a namespace, don't infer any name at all, keep it nameless.
If this token didn't come from the lookahead store, we need to stash it there
If this was a single-element tuple expression, reach into that subexpression.
If we are going to print something, make sure that we have a separator first.
If we are running an optimistic data flow, set forward max to true initially.
If we detect a line starting with a colon, treat it as a special REPL escape.
If we didn't visit this nominal type above, add this declaration to the list.
If we found both prefix and postfix, or neither prefix nor postfix, complain.
If we have a class address, it is a pointer so it cannot contain other types.
If we have a slash at the beginning, then just remove it and we are relative.
If we have an existing entry, destroy it, replacing it with the new variable.
If we have an existing witness table, verify that the conformance matches up.
If we have an unknown call, we need to create any retainN calls we have seen.
If we have extra inhabitants, we need to check for them in the zero-tag case.
If we have hit a pure Objective-C class, we won't see another ivar destroyer.
If we pulled a lookahead token, we need to remove it from the lookahead store
If we're in -verify mode, we've buffered up all of the generated diagnostics.
If we've run off the top of the stack, just return having setup no step outs.
Ignore accessibility so we get candidates that might have been missed before.
In case we were called by a jitted FCallAwait, let it know that we suspended.
In this case we can kill both, which may allow removing a SpillFrame as well.
Inferred associated types that don't meet the associated type / requirements.
Introduce a new scope and place the variables in the pattern into that scope.
It is pretty common to select between zero and 1 as the result of the select.
It must be the entry block See if it is reached over Success or Failure path.
It shouldn't affect correctness but it can cause us to miss out on some perf.
It's the first time we see the destination node, so we add it to the mapping.
Labeled elements can't be adopted into varargs even if they're non-mandatory.
Large allocations go directly to malloc without discarding our current chunk.
Lay out the field, but don't fill it in, we will copy it from the superclass.
Link back to something to create a data dependency if we have an opened type.
Look up the corresponding FunctionScope and ClassScope for this function call
Look up the generated template class for this particular subclass of Closure.
Look up the proxy's breakpoints and add needed breakpoints to the passed unit
Magic getters can be invoked both in define contexts and non-define contexts.
Many walker implementations rely on being invoked with every node in the AST.
May be TBottom if the function is known to never return (e.g. always throws).
May be polymorphic at the SIL level, but no type metadata is actually passed.
Maybe L*a*b* and Delta-E will give better results (and a better granularity).
Memory locations the loop provably cannot modify on any route to a back edge.
Merge to ensure namedentity creation, according to emitTypedef in emitter.cpp
NOTE: name, top, and a few other fields currently serialized outside of this.
Never inline, to ensure that the alloca of the pattern buffer is always safe.
No need to worry about races, this all happens during pre-main initialization
Note that confusingly there are two different implementations of zend_strtod.
Note: this is the minimum set of things to point the CURL* to this CurlHandle
ObjC entry points are always externally usable, so emitting can't be delayed.
On a backtrace, gdb tries to locate the calling frame at address returnRIP-1.
On the first iteration we populate the map from original loop to cloned loop.
Only allow allocation of AvailabilitySpecs using the allocator in ASTContext.
Only check individual variables if we didn't check an enclosing TypedPattern.
Only generic and protocol types are permitted to have trailing where clauses.
Only split critical edges for terminators that don't support block arguments.
Other requirements come from the extended type and have already been checked.
Otherwise the mode should contain 0 for unsetting and 1 for setting the flag.
Otherwise, add a BB arg to the continuation block to receive loadable result.
Otherwise, add value names only if the final result is textual LLVM assembly.
Otherwise, emit the default initializer, then map that as a default argument.
Otherwise, the static storage for the global consists of a fixed-size buffer.
Otherwise, try to look through an implicit _forceBridgeFromObjectiveC() call.
Otherwise, we have to grow out the stored spare bits before we can intersect.
Otherwise, we must call the ultimate getter to get its potential side effect.
Pass down the variable function type attributes to the function-type creator.
Perfect match seems common enough to be worth skipping the hash table lookup.
Perform a dynamic cast from an existential type to some kind of / class type.
Produce a physical address that corresponds to the given l-value / component.
Propagate liveness backwards from an initial set of blocks in our LiveIn set.
Qualify the filename so that DosQueryAppType does not do extraneous searches.
Reduction should not care about the order of the memory locations in the set.
RefCounting operations on Self are ok since we are already in the destructor.
Remove any conditional entries from the chains that were added in this scope.
Remove instructions from the basic block after a call to a noreturn function.
Replace a convert_function that only has refcounting uses with its / operand.
Require that the operand is a reference-counted type, or an Optional thereof.
Require that the operand is a type that supports reference storage modifiers.
Require the metadata to be some type that we recognize as a metadata pointer.
Reset the beginning of the segment to the string that remains to be consumed.
Return a function which will return a particular witness table / conformance.
Return the offset from the address point to the end of the / metadata object.
Return true if CurrentDef has been forwarded through one copy into / another.
Returns true if after the / merge operation the region is tracking any state.
Returns true if reduce_support_bit succeeded on every support bit in the set.
Returns: FAILURE/SUCCESS whether the input was correct (i.e. no range errors)
Scope information for control flow statements (break, continue, fallthrough).
Should not really have to do anything as there is only going to be one server
Should wait for the new AST, because the cursor location has been edited out.
Simplify cond_br where both sides jump to the same blocks with the same args.
Since we're moving FuncRef up, this must be the only call to it in the block.
Store this task's ReturnCode as our Result if we haven't stored anything yet.
Stored variables in Swift source will be picked up by the PatternBindingDecl.
Strings passed to libcurl as 'char *' arguments, are copied by the library...
Such a reference must be retained until after the next iteration is complete.
TODO: If the payload type info provides a preferred explosion schema, use it.
TODO: accept a second release in the throw block to let the argument be dead.
Takes a PtrToGen as its first operand, so we can't easily grab an array base.
Test that All acts like the top element in the lattice with respect to union.
That's okay because we will visit them in our next invocation of the inliner.
That's why we explicitly handle the declaration, instead of using our macros.
The address of the array passed to the current make_mutable we are analysing.
The captures are represented as a placeholder curry level in the formal type.
The cast may succeed if the target type can be inhabited by a class metatype.
The cell it pops can be marked Use::Not only if Dup itself can be eliminated.
The chaining operator immediately begins a formal access to the base l-value.
The concat helpers incref their results, which will be consumed by the stloc.
The difficult case is when you have an argument with /multiple/ predecessors.
The entire series of modifications is a series of 10 identical double-rounds.
The existing BreakPointInfo objects may include non empty values for m_stack.
The generated name / is derived from the name of the field in the outer type.
The grammar syntactically requires a simple identifier for the variable name.
The last release_value or strong_release instruction before the deallocation.
The most general resilience expansion where the given declaration is visible.
The number of remaining specializations until this row becomes / irrefutable.
The number we're after is the integer represented by those digits times 10**e
The payloads are all POD, so copying is bitwise, and destruction is a / noop.
The purpose is / to prevent these predicates from changing values by mistake.
The right thing to do here is to not synthesize that code in the first place.
The symbol for other nominal type metadata is generated at the address point.
The top-level indents here create the line to the node we're trying to print.
The type we need to bind to the archetype is the one that's deep in the type.
The value must not be define in the same basic block as the switch enum user.
Therefore, we can adjust the number of remaining specializations very easily.
These are RAII so that the scope gets popped when the NodeScope is destroyed.
They always require an initial value, so they always allow unspecified types.
This check makes sure we don't record a (dummy) source location in this case.
This closure will be able to be eliminated easily and the / overhead is gone.
This informs diagnostics and is a hint for various performance optimizations.
This is an aggregate node, construct its value from its children recursively.
This is assumed to be 29 days 12 hours and 793 halakim for calendar purposes.
This is called when each instruction is generated during initial IR creation.
This is either part of a super.init sequence, or a general superclass access.
This is important if we want to be able to update analyses in a clean manner.
This is probably a conversion from a value of labeled tuple type to a scalar.
This is useful for tools which want to extract subtrees from mangled strings.
This may be called from any thread wishing to stop the proxy, for any reason.
This protocol declaration is technically a parse error, so do not type check.
This symbol is only exported by the runtime if the platform uses isa masking.
This will be recontextualized to a method we synthesize during type checking.
This works because each type category only has at most one sub-type to check.
To handle this case correctly, we get spare bits from the unsubstituted type.
Type of the user-provided expression for LookupKind::ValueExpr / completions.
Unfortunately program_functions.cpp was not at all written with this in mind.
Unless we have fallback at the highest level, print a diagnostic when we fail
Update the current DeclContext to be the closure we're about to recurse into.
Use depth-first recursion to output the most deeply nested stack frame first.
Values are in reverse order since they come from the stack, which grows down.
We are guaranteed to have an ini file given how m_configFileName is set above
We do not push basic block into the worklist if its already  in the worklist.
We don't change anything yet so that the dominator information remains valid.
We don't have any better indication of name, so fall back on the module name.
We initially fill in these fields with addresses taken from the ObjC runtime.
We know the setcc was the only use of the phidef's old dest, so this is safe.
We need enough bits to store the largest payload plus extra tag bits we need.
We need to determine if we performed any partial merging of insertion points.
We pop from the end of the list to avoid tricky iterator invalidation issues.
We should query a (lazily-built, cached) module graph to determine shadowing.
We special case super.init calls since they are part of the object lifecycle.
We use a MapVector to keep the / diagnostics emission in deterministic order.
We use this return value to fill the `free_until' PosVec in allocate() below.
We're going to set the 'break' flag on our XDebugServer, and pause ourselves.
We're in an error path after performing a self.init or super.init delegation.
We're working with optional types, so perform a conditional checked downcast.
When A is first used we autoprime it, and therefore also autoprime C as well.
When compared to an object, null is treated as false, and the object as true.
When we have an open existential, open it and then emit the member reference.
When we need multiple entrance path, we factor the paths with a shared block.
Whether the provided name is API by default depends on the parameter context.
Wrap class, class protocol, function, and metatype types in an optional type.
Zend resource destructors receive a ZendResourceData as their sole parameter.
_forceBridgeFromObjectiveC returns `Self`, so we can just return it directly.
build the old IMAPG(folders) variable to allow old imap_listmailbox() to work
checkCls must be the TCls for className (but it doesn't have to be constant).
create a certificate store and add those certs to it for use in verification.
create an initial item representing the file with all uuencoded parts removed
create bson timestamp  type: 17 4 bytes seconds since epoch 4 bytes increment
in most cases bz2 offers at least 2:1 compression, so we use that as our base
loadModule() should be more modular, rather than emitting diagnostics itself.
parsing ensures that the variadic capture param can *only* be the last param.
session will terminate the request if we don't receive data in this much time
the usefulness of padding with zeroes eludes me, it might even cause problems
we can ignore unknown store instructions if we are computing the AvailSetMax.
("final" would be inappropriate because the property can still be overridden.)
- Pending and Processed are used while building phis to handle cycles of phis.
/ This analysis also checks if we can clone the instructions in the loop nest.
1) If the expression is the silence operator, recurse on the inner expression.
4) Deleting the blocks that became unnecessary (unreachable) after rechaining.
@XXApplicationMain classes must conform to the XXApplicationDelegate protocol.
A CRTP class for emitting witness thunks for the requirements of a / protocol.
A class that contains all analysis information we gather about our / function.
A conflict between two inferred type witnesses for the same / associated type.
A helper class for implementing a component that involves / calling accessors.
A mapping from generic parameters to the corresponding potential / archetypes.
A test program so we can actually test things involving object or class types.
Add SILDeclRef to ListOfValues, so we can reconstruct it at / deserialization.
Add the 'self' type to the substituted function type of this / dynamic callee.
Adjust the relative references to the nominal type descriptor and parent type.
After the data flow converges, run last iteration and perform load forwarding.
Aligned version should work as long as we don't read beyond end of the buffer.
All / redundant safe array accesses seen up to the instruction can be removed.
All blocks within the inlined callee from which the InlineReturn is reachable.
Also deals with MemoryRef vasms like above but these ones have Immed data too.
An RAII object for restoring all the interesting state in an / error-coverage.
Array semantic clients rely on the signature being as in the original version.
ArrayData* Copy(const ArrayData*)  Explicitly request that an array be copied.
As a safety net, if an address is provided, but its abnormally low, ignore it.
Avoid killing and re-emitting the cleanup if the enclosed value isn't a tuple.
Await / Yield opcodes mark a suspend points of async functions and generators.
Block storage types need to substitute their capture type by these same rules.
Break out otherwise we end up appending an empty token to the end of the array
Build an argument list type to filter against based on the expression we have.
Build the initializer expression, 'Self.initStorage()', using the conformance.
Build the type refinement hierarchy for the primary file before type checking.
Change the representation without changing the signature or abstraction level.
Check if there is already a name defined in this request for this NamedEntity.
Check if we come to the Pred block by comparing the input value to a constant.
Check that the constructed tuple and the extracted tuple are of the same type.
Check the first ID to decide if we are using indices to the Decl's Archetypes.
Check whether the given type is Optional applied to the given / type argument.
Check whether this is a 'array.props' instruction and whether we can hoist it.
Classes with NativeData structs allocate extra memory prior to the ObjectData.
Clone the region from the new preheader up to (not including) the exit blocks.
Collect all of the PartialApplyInsts that are used as arguments to ApplyInsts.
Connect to a remote host using an interruptible connect with optional timeout.
Containing the value may require a side allocation, which we need to clean up.
Create ".Some" patterns wrapping the isa pattern to balance out the optionals.
Create an availability attribute for each observed platform and add to ToDecl.
Create an implicit property given the imported name of one of / the accessors.
DataTypeGeneric is used because we're just passing the locals into the callee.
Default implementation: Assume this is a variant encapsulating the basic type.
Deserialize all DefaultWitnessTables inside the module and add them to SILMod.
Destructure the value into its payload + tag bit components, each is optional.
Determine whether we're dealing with a TVCoercionException or a php exception.
Diagnose the first associated type for which we could not determine a witness.
Dig through each of the Swift lookup tables, creating extensions where needed.
Don't even try to load the bridging header if the Clang AST is in a bad state.
Don't recurse because there shouldn't be anything interesting in the children.
Emit Builtin.initialize by evaluating the operand directly into / the address.
Emit the elements of a dependent value witness table template into a / vector.
Emit the rvalue for self, allowing for guaranteed plus zero if we have a func.
Enums with raw types can implicitly derive their RawRepresentable conformance.
Execution has been interrupted, so go ahead and give the user the prompt back.
Expand the given Mem into individual fields and add them to the locationvault.
FIXME: Importing the type will recursively revisit this same EnumConstantDecl.
FIXME: This feels like a hack, but we don't have the right predicate anywhere.
FIXME: We could be significantly smarter here by using the protocol hierarchy.
FIXME: We hit this building Foundation, with a call on the type encoding path.
FIXME: Would like to customize the diagnostic emitted in conformsToProtocol().
FIXME: substitution means this type should be explicit to improve performance.
FIXME: this is not sufficient to establish a total order for overloaded decls.
Fall through to the fully-generic JmpSwitchDest at the end if nothing matches.
Finally, sort and reassign slots so the most frequently used slots come first.
Find a new position for an ApplyInst's FuncRef so that it dominates its / use.
First, find proper list of substitutions for the concrete method to be called.
For a class that's really implemented in Objective-C, this is obviously right.
For a struct with memberwise initialized properties, we add a memberwise init.
For codegen passes, only passes that do IR to IR transformation are supported.
For functions, close the existential once the function has been fully applied.
For now, check only that the copy_addr is the first use within the same block.
For now, just check that a SIL function type came from some AST function type.
For now, just report cases where we would need a reabstraction as unsupported.
For peek/poke instructions or InsertMid instructions, this function returns 0.
Form a humble camel by appending the two strings and adjusting case as needed.
Function: gdAffineConcat Concat (Multiply) two affine transformation matrices.
Generate the closure value (if any) for the closure expr's function reference.
Handle array addition first because we don't want to bother with boxed locals.
If *target is NULL determine required destination buffer size (pre-flighting).
If an argument has a single release and it is rc-identical to the SILArgument.
If any of the parameters needed type conversions, we need to do that here too.
If it doesn't have a parent, or the parent doesn't need remapping, do nothing.
If it doesn't, we've probably got an error message from the db, so return that
If no arguments were renamed, the call arguments match up with the parameters.
If not, emit an error and just recovery by synthesizing without the copy call.
If one projection path is a prefix of another, then the locations could alias.
If the class has fragile fixed layout, return the constant size and alignment.
If the class is not in a generic context, return the original superclass type.
If the conformance is generic, the accessor takes the metatype as an argument.
If the error is a bridged NSError, then the "box" is in fact itself the value.
If the field we are extracting is trivial, we cannot be a non-trivial field...
If the index type is an object type in Objective-C, we have a keyed subscript.
If the next entry is the end of the block, then this function has no contents.
If the object does not define a __toString() method, raise a recoverable error
If the parameter is indirect, we need to drop the value into temporary memory.
If the pattern was valid, check for an implicit VarPattern on the outer level.
If the protocol is in the same module as the conformance, we're not resilient.
If the selector piece is "error", this is the location of the error parameter.
If the server definition has not set the repl_set_name member yet, set it here
If the token has the same location as a reset location, reset the token stream
If there are no or multiple outputfiles, derive the name from the module name.
If there is an alternate declaration and the name matches, report this result.
If there is no continuation block, it's because we constant-folded the branch.
If there was already a class declared with DefClass, check if it's compatible.
If this changes the in-state for any of them, enqueue them for (re)processing.
If this inserts a new instruction, it / returns it, otherwise it returns null.
If this is a DeclRefExpr found in a random place, it is a load of the vardecl.
If this is a FunctionType and we inferred new function attributes, apply them.
If this is a nested function with a capture list, mark any captured variables.
If this is a partial application of self, then this is an escape point for it.
If this is a subscript, we need to handle the indices in the callback storage.
If this is null, it is probably implicitly generated code, so we'll adjust it.
If this succeeds and yields a valid protocol conformance, then keep searching.
If we are an accessor on a var or subscript, make sure it is deserialized too.
If we are using XPG specifiers, make sure that we grow to a large enough size.
If we couldn't emit into the Initialization, emit into a temporary allocation.
If we do not find any such function, we have no function to devirtualize to...
If we don't find any witness table for the conformance, bail and return false.
If we don't have sufficient type information to inline the region return early
If we fail to constrain on an end-position use, we must still split and spill.
If we get to a release that is provably to this object, then we can ignore it.
If we have a copy_addr, explode it now, exposing the load operation within it.
If we have a null pointer for the metadata info, the dtor has no side effects.
If we have an anchor, drill into it to emit a "note: archetype declared here".
If we haven't already promoted the AllocStack, we may see DebugValueAddr uses.
If we know the class without having to specialize a guard any further, use it.
If we weren't told what kind of initializer this should be, figure it out now.
If we're casting to an optional type, we need to capture the final M bindings.
If we're using a box for self, reload the value at the end of the init method.
If we're using the allocating constructor, we need to pass along the metatype.
If we're using this conformance and it is incomplete, queue it for completion.
If you don't have a nice square root function for longs, you can use this hack
In contrast, note that local DCE can not change types across block boundaries.
In general, we want to sort each chain in decreasing order of profile weights.
In the case of fastcgi this is basically a full header list from apache/nginx.
Install a new optional-failure destination just outside of the cleanups scope.
Instead we check that no decrement or check occurs up to this hoisted release.
Introduce conversions from each element to the element type of the dictionary.
Invalid, implicit, and Clang-imported declarations never require a definition.
It collects uses from / the address and the refcount result of the allocation.
It is possible that the last member lookup can return multiple lookup results.
It is possibly a compile-time slowdown only, but we haven't investigated yet.)
It's necessary because properties can get types before validateDecl is called.
Jump instructions use an Offset relative to the start of the jump instruction.
Just force the result to unconsumed so that clients don't have to handle this.
Just force the unset element to yes so that clients don't have to handle this.
Keep this string fixed in case the option used by the compiler itself changes.
Lazily compute reachability, so we only have to do it in the case of an error.
Let ClangCodeGen emit its global data structures (llvm.used, debug info, etc.)
Life would be much easier if we could just use a FixedTypeRepr for the parent.
Look through optional or IUO to get the underlying type the decl was found in.
Look up the type alias (autoloading if necessary) and fail if we can't find it
Make sure that name binding has been completed before doing any type checking.
Make sure that we reprocess all operands now that we reduced their use counts.
Make sure the offset from hot text is either odd or even number of huge pages.
Make sure this argument's sugar is consistent with the sugar we already found.
Map a Type to an interesting declaration whose source range we / should print.
Metatypes and bases of non-mutating setters on value types are always rvalues.
More type variable sharing (when it's sane) would help us do much better here.
Netscape Bug: Messenger sometimes omits the semi when wrapping the the header.
Normal DV funclets don't have type guards, and thus have a single translation.
Normal lets (e.g. globals) are only mutable in the context of the declaration.
Note that in some cases reusing the return value can be (very slightly) worse.
Now we have to determine the lifetime of the allocated object in its function.
Now we need to make sure that each non-payloaded enum value is safe to ignore.
OS X defines msgbuf, but it is defined with extra fields and some weird types.
Ok, we're converting a C function pointer value to another C function pointer.
Okay, if the special code-completion didn't kick in, parse a matching pattern.
Optimize the `region's guards, operating on one retranslation chain at a time.
Other threads will stack up in blockUntilOwn() (depending on the thread mode).
Otherwise, 'materialized' holds an optional callback and the callback storage.
Otherwise, Left must be false and false AND'd with anything else yields false.
Otherwise, we'll perform a lookup against the metatype of our contextual type.
Print translations (all or for a given funcId) in the order they were created.
Properties of non-optional reference type that were imported from Objective-C.
Provide a list of template parameters to be filled in case this is a template.
Record that contains the mapping from base names to entities with that / name.
Regionize a func, so that each node and each arc in its TransCFG is "covered".
Remember we formed a C function pointer so we can diagnose later if necessary.
Replace a conditional branch with a Jmp if both branches go to the same block.
Replace all uses of the check subscript call by a use of the empty dependence.
Retrieve the potential archetype corresponding to this generic type parameter.
Returns a version of the input type with the ExtInfo AbstractCC set correctly.
Returns null and raises a warning when input is an array, resource, or object.
Returns the new intermediate block if one was inserted, and nullptr otherwise.
Set IRBuilder's Blocks for srcBlockId's successors' offsets within the region.
Set the return value to NULL, as the connection is broken and has been removed
Since there are no payloads, we need just enough bits to hold a discriminator.
So, it is generally unsuitable for extensions that use handlers or extra data.
Some llvm intrinsics don't like phi nodes as their constant inputs (e.g ctlz).
Sort the diagnostics by their address in the memory buffer as the primary key.
Specialize a partial_apply by promoting the parameters indicated by / indices.
Specialize calls to generic functions by substituting static type information.
Speculatively devirtualizes witness- and class-method calls into direct calls.
Strip all chars not part of section 5 of http://www.faqs.org/rfcs/rfc1738.html
StructArrayProfile data counts how many times a non-struct array was observed.
Subscripts of non-optional reference type that were imported from Objective-C.
TODO: If we know the specific release instruction, we can potentially do more.
TODO: The initializer could eventually be consumed by DI-style initialization.
TODO: This creates a bunch of bitcasting noise for non-integer payload fields.
TODO: We already created an ArraySemanticsCall in isSafeArraySemanticFunction.
TODO: pass something about the root conformance necessary to reconstruct this.
Take from an indirect inner result and make it the next outer / direct result.
Take the next direct inner result and store it into an / outer result address.
That is not a guaranteed condition but it gives us an idea of what's possible.
The 1st shear may use the original clrBack as color index Convert it once here
The VM can handle the NewStructArray bytecode when struct arrays are disabled.
The benefit if a retain/release can (probably) be eliminated after / inlining.
The client is expected to disable inlining for the region it gives us to peek.
The constructor was opened with the allocating type, not the initializer type.
The convention fulfills the requirement, so record how to get to the metadata.
The edges in the dependency graph, i.e. entries, which depend on this / entry.
The exception to that are option types with data, objects/classes, and arrays.
The invoke method is only cached in the Class for a fast path JIT translation.
The only type we can possibly expect to agree / upon is the most general form.
The pointer can be converted from a string, if the element type is compatible.
The possible values are: 0 (never executed) 1 (monomorphic) many (polymorphic)
The predicate / indicates how close a given candidate is to the desired match.
The remaining 5 to 6 days in the year are grouped at the end and are holidays.
The size of an array large to enough to hold all stacks, each with N elements.
The slow-path: we have to emit code to get from the box to it's value address.
The suffix sometimes begins at the end of the object, but sometimes within it.
The witness is storage whose setter is less accessible than the / requirement.
Then attempt to lookup the corresponding (SILValue, TopDownState) from PredBB.
These don't need to be exposed, but make dealing the breakpoints less verbose.
This approach assumes that expression patterns can't refer to bound arguments.
This check will hold because we have canonicalized the path above to remove ..
This file implements IR generation for local and global declarations in Swift.
This file provides EnumInfo, which describes a Clang enum ready to be imported
This function determines how those two parameters are interpreted in f_substr.
This function should only be called for instructions that read the current FPI
This happens for instance if we have cleared all of the state we are tracking.
This instruction doesn't actually load but SpillFrame cannot be pushed past it
This is / designed to work with ManagedValue 'base's that are either +0 or +1.
This is a mapping from an OpaqueValue to the expression that initialized / it.
This is a similar case to lookup for functions in FPushFunc or FPushObjMethod.
This is also why passing them as the final argument isn't bad for performance.
This is exactly the pattern for an enum with integer raw value initialization.
This is generally the metatype pointer, but may / instead be a reference type.
This is just to be conservative when faced with the unknown of future changes.
This is not a problem if we are not using authentication, but it is if we are.
This isn't foolproof but should catch the common case of optional class types.
This lookup is very efficient and doesn't even require us to parse the prefix.
This may not be as / accurate but it's only until we have typechecked the AST.
This may require to create new nodes or to merge existing nodes in this graph.
This selects one of the six possible month length configurations listed above.
This shuffles values to the right in a canonical order to need less overloads.
This typically reduces the INT_MAX default value to something more reasonable.
This waits for interrupts from the server (and responds to polls for signals).
This will always succeed since we have an entry for each BB in our post order.
This will return an empty SILValue if we found something we do not understand.
This will silence "variable unused" and "could be marked let" warnings for it.
This will skip DV Funclets if they were already retranslated w/ the prologues:
Trivial case: if there are no archetypes, just use the canonical type pointer.
U8_NEXT() is guaranteed to advance sourceOffset by 1-4 each time it's invoked.
Unknown input kind, possibly for use by a future version of the module format.
Unwrap any specializations, constructor calls, implicit conversions, and '.'s.
Update any indexes into the actual stack that pointed to or past this element.
VarEnvs are allocated with req::make, so they aren't first-class heap objects.
Verify that all of the constraints in the constraint system are accounted for.
We automatically hoist a load of the context to the beginning of every region.
We can at least glean the best available static information from the payloads.
We cannot add requirements to archetypes from outer generic parameter / lists.
We cannot close m_file because there may be other threads still writing to it.
We cannot devirtualize in cases where dynamic calls are semantically required.
We know that c1 is Uninit in this branch but we have to encode this in the IR.
We need to push the unwinder value and then side-exit to the next instruction.
We run one pessimistic data flow to do dead store elimination on the function.
We use this struct to track where we need to add moves to maintain continuity.
When the expected name is empty, we claim the next argument if it has no name.
Whether or not we modified the map should be the same in both implementations.
check for nullptr buffer in case of memory error in xmlEncodeEntitiesReentrant
fixup code references in the corresponding cold block to point to the new code
from patchBctr: It has to skip 6 instructions: li64 (5 instructions) and mtctr
gdImageConvolution does not exist in our libgd.a, copied from php's libgd/gd.c
if we don't understand the MIME version, discard the content-type and boundary
ini parser is not thread-safe We are parsing something new, so reset this flag
initializing constructors of value types always have an implicitly inout self.
it's an X509 file/cert of some kind, and we need to extract the data from that
return -1 if server is not yet started, e.g., when not running in server mode.
return_value param is being changed, therefore we will always return NULL here
shuffled into a packed array stored in the variadic capture param on the stack
so we accept too by the way: some of those companies changed their code now...
sync up gdb Dwarf info so that gdb can do a full backtrace from the core file.
the offset might have been incremented, but without further successful matches
(Also, getRemainingTime does use this opportunistically, but it's best effort.)
(U_STRING_NOT_TERMINATED_WARNING usually means that the input string is empty).
.Some Single payload enums are guaranteed layout compatible with their payload.
/ /  version-constraint-spec: /     identifier version-comparison version-tuple
/ / This builds the getter in a way that's compatible with switch / statements.
/ / sourceType and sourceDecl will be adjusted to refer to the new / component.
/ We need the use points only for getting the end of a reference's / liferange.
A TakeAlways value becomes TakeOnSuccess for all but / last branch of the tree.
A hack to blacklist particular types in the Darwin module on / Apple platforms.
A helper function to add a function error argument in the appropriate position.
A result plan which calls copyOrInitValueInto using the result of / a sub-plan.
A substitution may be either the module name of a protocol or a full type name.
Add conformances to the given Objective-C protocols to the / given declaration.
Add dependencies from predecessor's terminator operands to the block arguments.
Add this declaration to the lookup set under its compound name and simple name.
After we made the decision for all allocations we can handle the deallocations.
All outputs of the instruction must have constant types for this to be allowed.
Allocate spill space on edges from a NoSpill out-state to a NeedSpill in-state.
Also allow enum of enum, which usually can be combined to a single instruction.
Also, if the closure is cloned, the cloned function is added to / the worklist.
Although the onFastPath builtin has no side-effects we don't want to remove it.
An operation that always throws can only be handled by an all-handling context.
As long as you retain this notice you can do whatever you want with this stuff.
Bind the value, branching to the destination address if there's no value there.
Blocks do not have subregion data, so everything should just clean up via RAII.
Both ranges must be considered before we can decide which function we're after.
Break the inheritance cycle for a protocol by removing all inherited protocols.
Break ties in extensions by putting smaller extensions last (in reverse order).
But looking at the Cannon powershot's files, inches is the only sensible value.
By defaults, new connections will target the default dispatch concurrent queue.
Call the object's clone handler, like what the PHP VM's ZEND_CLONE handler does
Canonicalize Void return type into something that isTrivialReturnBlock expects.
Cases where it's not public should've already been filtered out in the indexer.
Cast the parameters to word pointers because the fill indexes are word-indexed.
Change the control flow of the exiting instruction to go through the new block.
Check for the strength specifier: "weak", "unowned", or "unowned(safe/unsafe)".
Check if all enum cases and the default case go to one of our collected blocks.
Check if we are past the imaginary EOF, and synthesize a tok::eof in this case.
Cloning such blocks can allow ARC to sink retain / releases onto the ObjC path.
Compare the stored extra inhabitant against the fixed extra inhabitant pattern.
Convert a subexpression to a pattern if possible, or wrap it in an ExprPattern.
Create blocks for each entry point as well as ordinary control flow boundaries.
Default to strict types in force_hh mode and when not using PHP 7 scalar types.
Default witness thunks just get the requirement type without substituting Self.
Delete the unreachable default block if we didn't use it, or emit it if we did.
Describes the kind of optional adjustment performed when / comparing two types.
Detect an edge from the loop pre-header's predecessor to the loop exit / block.
Determine whether the given Clang selector matches the given / selector pieces.
Determine whether this entry is superseded by (or supersedes) some other entry.
Determine whether we should lowercase the first word of the given value / name.
Dig out the type of the base, which will be the result type of this expression.
Disable assertion configuration replacement when we build the standard library.
Display the user ids sorted to give a stable use order in the printer's output.
Don't change the type of a variable that we've been able to compute a type for.
Emit a projection from an existential container to its concrete value / buffer.
Emit all intermediate operations, leaving the final operation up to our caller.
Emit an existential metatype container from a metatype value / as an explosion.
Emit into the buffer that 'let's produce for address-only values if we have it.
Expand the given Mem into individual fields and process them as separate reads.
FIXME: Caller checks that this type conforms to all of the inherited protocols.
FIXME: Dropping requirements among different associated types of the same name.
FIXME: Infer body indentation from the source rather than hard-coding 4 spaces.
FIXME: It would be nicer if we could build the ASTs properly in the first shot.
FIXME: Only because we're synthesizing conformances for deserialized protocols.
FIXME: any place we have to do this that actually requires uniqueness is buggy.
FIXME: in a protocol extension, we really want the extension, not the protocol.
Figure out the parameter type, accounting for the implicit 'self' if necessary.
Find the corresponding string match and substitute it in instead of the backref
Find the original method/property declaration and retrieve the name from there.
First, check if there is a function with a required name in the current module.
For RepoAuthoritative mode, if tc is a type alias we can optimize in some cases
For a tuple with a single element, just use the witnesses for the element type.
For future reference: Set errno on error, since we are called by hphplex_init()
For now we keep the one with a smaller `rep' value, instead of discarding both.
For parity with the enum_is_tag combiner pass, handle integer literals for now.
For recovery, see if the user typed something resembling a switch "case" label.
For the moment this is fine -- but future syntax might violate this assumption.
Force request thread to run in the interpreter, and hit XDebugHook::onOpcode().
Forcibly define USE_TRACE, so we get the debug trace.h interface included here.
Get the Address of a SIL value of address type, which must have been / lowered.
Get the single stack slot we can deshadow, or null if no such slot was / found.
Given a generic signature, add the argument types required in order to call it.
Given an object type, examine it to infer all the needed actions for that type.
Given the address of an existential object, drill down to the / metadata field.
Handle symbols that are matches, but are not accessible from the current scope.
Helper function for simplifying conversions between / thick and objc metatypes.
I am using a helper here in case I find more cases where I need / to expand it.
If a method has an 'override' keyword but does not override anything, complain.
If buf is not the complete file, apptype can incorrectly identify the exe type.
If currently supporting a different ASet, try to clear any support there first.
If evaluating or using custom function, copy result to the buffer and clean up.
If it was a tuple in the original type, the parameters will have been exploded.
If one declaration is available and the other is not, prefer the available one.
If so, reset our state to not be in a pattern for any recursive pattern parses.
If such an instruction exists, we cannot perform this optimization so continue.
If that failed, check whether it's because of the conformance we're evaluating.
If the accessor wants the value 'inout', always pass the address we were given.
If the base is a Str, the result will always be a CountedStr (or an exception).
If the elt we are extracting is trivial, we cannot have any non trivial fields.
If the first base type is a bridgeable object type, this can only be an upcast.
If the formal root class is imported from Objective-C, then we should use that.
If the function is not externally visible, we will not be serializing its body.
If the non-fixed conformance is not replaceable, we have a failure to diagnose.
If the opaque value is consumable, we can just return the value with a cleanup.
If the parameter is a block, we need to copy it to ensure it lives on the heap.
If the parameter was a tuple, try to look through the various tuple operations.
If the parent is an archetype, extract the child archetype with the given name.
If the protocol contains missing requirements, it can't be conformed to at all.
If the substituted type is returned indirectly, so must the unsubstituted type.
If the tuple pattern has a single element, we can reduce it to a paren pattern.
If the type is a block or C function pointer, it must be representable in ObjC.
If there is a default literal type for this protocol, it's a potential binding.
If there is a fix associated with this constraint, apply it before we continue.
If there's no check for the current platform, this condition is trivially true.
If this argument is completely dead, delete this argument and return ArgOffset.
If this changes, then this will need to specialize on sub object types instead.
If this is a let-value without an initializer, then we need a temporary buffer.
If this is an unknown instruction, we have more interesting things to consider.
If this use of a partial_apply is not an apply which uses it as a callee, bail.
If we already have a specialized version of this function, do not respecialize.
If we are asked to splice into the same function, don't update parent pointers.
If we can't acquire the write lock, the caller (FreeRequestStubTrigger) retries
If we didn't parse a type, then we already diagnosed that the type was invalid.
If we don't have a name to hang on to, it'll be hard to diagnose this overload.
If we don't have a reference range, there is nothing we can do, so return null.
If we have a catch trace at the IP in the frame given by `context', install it.
If we have a single-buffer "emit into" initialization, use that for the result.
If we have an early emitter, just let it take over for the uncurried call site.
If we have an existential metatype, that's good enough to solve the constraint.
If we have not seen a non-trivial field yet, set the FoundNonTrivialField flag.
If we haven't walked the member list yet to update the lookup table, do so now.
If we're building with -sil-serialize-all, give the conformance public linkage.
If we're not defining the object now, forward declare it with the default type.
If we're supposed to convert the expression to some particular type, do so now.
If we've already been bound to a type, we're either done, or we have a problem.
Ignore the internal members of Optional, like getLogicValue() and _getMirror().
In case of a vtable method this is always /         the most overridden method.
In most cases, systemlib is persistent, and we could check SystemLib::s_inited.
In the continuation block, take ownership of the now non-optional result value.
In this case we can just adapt all the apply sites which use the partial_apply.
Indirect elements make the type nontrivial, but don't affect address-only-ness.
Infer associated types from the potential value witnesses for this requirement.
Initialize a writeback buffer that receives the value of a 'let' / declaration.
It doesn't make sense to update the target block state at this point, so don't.
It is a list of offsets, along with a certain action to perform at that offset.
It might be an invalid encoding of some sort, but garbage in garbage out is ok.
It's safe to copy all 16 bytes of the TV because packed arrays don't use m_aux.
Its a dynamic constant, that doesn't correspond to an already allocated handle.
Just treat all members of self as uses of the single non-field-sensitive value.
Locals:  While a block is iterated backward, the set of live locals is tracked.
Lookups need to check if it's empty() and if so compute it from sourceLocTable.
Macros after this point can all be overridden by user definitions in section 1.
Make sure that the open_existential does not have any uses except destroy_addr.
Make sure the constructor is only as available as its superclass's constructor.
Members which are AbstractFunctionDecls but not FuncDecls cannot / mutate self.
Merging option types tries to preserve subtype information where it's possible.
NB: we don't have a function type flag to match what we got in onFunctionEnter.
Need a 'self' argument otherwise this is not a semantic call that we recognize.
No-payload enums are always POD, so we can always initialize by primitive copy.
Not nothrow even if both are strings: can throw for strings that are too large.
Note that this index / clause is actually the outermost (first-indexed) clause.
Note that we / only want to report the first statement on the unreachable path.
Note, unlike baseList, the order of the elements in this vector is unspecified.
Note: LdLocPseudoMain is both a guard and a load, so it must not be a PureLoad.
Note: be careful, the TFoo objects aren't all constructed yet in this function.
Note: this differs from Zend right now in the case of a failed recursive __set.
Now propagate liveness backwards until we hit the block that defines the value.
Now that the instruction has a concrete "init" form, update it to reflect that.
Offset the payload extra inhabitant index by the number of inhabitants we used.
Okay, the type is passed indirectly in SIL, so we need to map it to an address.
Only functions with an operator identifier can be declared with as an operator.
Only one witness table we should be able to return, which is the ErrorProtocol.
Only print the class if the property is private and declared in a parent class.
Only serialize CPP extension type instances which can actually be deserialized.
Optimize access to the let property, which is known / to have a constant value.
Otherwise, see if a layout has been emitted with these characteristics already.
Performance is in the sub-500ns range to over 100,000 shards with 13-byte keys.
Process each of the IncRefs, including new ones that are created along the way.
Put the value's address into a stack slot at -Onone and emit a debug intrinsic.
REFERENCES  I have found no detailed, authoritative reference on this calendar.
Reached the end of the projection tree, this field can not be expanded anymore.
Record the summary for the current function and continue with the new function.
Remove any applies we are deleting so that we don't attempt to specialize them.
Remove this instruction from our data structures, since we will be removing it.
Require that the operand is a non-optional, non-unowned reference-counted type.
Retrieve the element interface type and key param decl of a subscript / setter.
Return a function which performs an assignment operation on two / existentials.
Return the cached pointer-to-function type for the given value / witness index.
Return the substituted, unlowered AST type of the result of / this application.
Returns the original boolean value, looking through possible invert / builtins.
Returns true if this function can be referenced from a fragile function / body.
Round up to the start of a huge page, and set the high water mark to one below.
SHIFT_TEMPS must be included in the variables of any routine using RIGHT_SHIFT.
SILGen can't build phi nodes for them and it would not make much sense anyways.
Scan all of the definitions in the function bottom-up using the priority queue.
Scratch block can change blocks allocation, hence cannot use regular iterators.
See gd_arc_f_buggy.c for a better version that doesn't seem to be bug-free yet.
See if Continue has a release on self as the instruction right after the apply.
Set it to the minimum stack size, which is set earlier by execute_program_impl.
Set the destinations for any 'break' and 'continue' statements inside the body.
Set up the match, determining the requirement and witness types in the process.
SimpleXMLElement is the only non-collection class that has custom bool casting.
Simplify the given locator down to a specific anchor expression, / if possible.
Since it's noreturn, there should be a true unreachable terminator right after.
Since there's only one legal extra inhabitant, it has to have the null pattern.
Since we can't call popm lower function here at the moment it seems sufficient.
Skip binding a TypedValue that's about to be destroyed and just destroy it now.
So we disable usage of interned strings as hash keys especually for this table.
Sort and unique the insert points so we can put them into ImmutablePointerSets.
Special case: "Indexes" and "Indices" in the name match "IndexSet" in the type.
Special case: We need to create an empty first parameter for our argument label
Sticking this into ASTContext isn't enough because then the DenseMap will leak.
Stores our HDF-specified values (only integral values for now) across requests.
String name for the given error type, as defined by php5 xdebug in xdebug_var.c
Strip the "is function input" bits unless this is a type that knows about them.
Synthesize the getter for a lazy property with the specified storage / vardecl.
TIMELIB_UNSET (and other constants) defined in timelib.h (see hhvm-third-party)
TODO: I wanted to call this 'verify', but some other pass is using this option.
TODO: import as closed enum instead For now, fall through and treat as a struct
Tantzen, Communications of the Association for Computing Machinery August 1963.
Tests that the result of a findPrefix matches what we expect from the std::map.
The (uncomposed) ErrorProtocol existential uses a special boxed representation.
The block begins with an optional DefLabel, followed by an optional BeginCatch.
The body is runtime-dependent, so we can't put anything useful here statically.
The cache is full or a collision occurred, and we don't need our strdup'ed key.
The class may be ObjC, in which case we need to instantiate its Swift metadata.
The executor is guaranteed to be valid for the duration of the task because: 1.
The first child is always a kind that specifies the type of param that we have.
The following methods should only be attempted if we can sink to our successor.
The instance type field of MetatypeMetadata is immediately after the isa field.
The key is the base address of the memory (after skipping address projections).
The number of primitive subelements across all elements of this memory / value.
The path to be tacked on to the target locator to identify the specific target.
The setter just forwards on to storage without materializing the initial value.
The specified instruction is a non-load access of the element being / promoted.
The tree formed by the parent edges is a spanning tree for the reachable nodes.
The value are store (or copy_addr) instructions, which store the current value.
Then attempt to lookup the corresponding (SILValue, BottomUpState) from SuccBB.
Then go through the projection tree constructing aggregates and replacing uses.
Then look at any uses of V that potentially could act as a typed access oracle.
Then setup the leaf list by iterating through our Nodes looking for live leafs.
There are imm() overloaded methods for each type of operand used by any Vinstr.
There is a counter in getRCIdentityRootInner that ensures we don't do too many.
Therefore, we copy the original block, update it, and replace it in the region.
These LayoutErrors are gathered and reported together at the end of processing.
These are for settings/callbacks that the script can change during the request.
These are in order according to the binary encoding of the X64 condition codes.
These retain instructions return their argument so must be processed specially.
They also ought to kill /something/ on the stack, because of possible re-entry.
This ensures main() represents the entire run, even if we run out of log space.
This happens when class witnesses implement non-mutating protocol requirements.
This has to be a stack instead of just a pointer because simplify is reentrant.
This helps to avoid phase ordering issues (simplify-cfg *should* / catch this).
This is a bit silly, because you can't have something like "case x, y:" anyway.
This is always a local edge since non-local edges can only have loops as heads.
This is done so we don't waste precious time in connecting to unreachable nodes
This is the general algorithm but it will only loop twice for loop-free graphs.
This is to prevent the refcount from going to zero when the destructor returns.
This module implements the well-known Heckbert paradigm for color quantization.
This ought to be supportable if the behavior allows for DI-like initialization.
This pointer will be set if we need to store the extended method type encoding.
This will ensure the previous DIE gets freed (because of the above SCOPE_EXIT).
Translate the "nullability" notion from API notes into an optional type / kind.
True if the type, or the referenced type of an address / type, is address-only.
True if the type, or the referenced type of an address type, is / address-only.
TrueBB has already been inserted somewhere unless there's a continuation block.
Try to avoid making an empty tuple value if it's obviously going to be ignored.
Update the "largest" statistics if this system is larger than the previous one.
Use the SILGen name only for the original non-thunked, non-curried entry point.
Use the same code that was in the REPL code to track the indent level  for now.
Validate the behavior protocol and all its extensions so we can do name lookup.
Visitor class to determine if a metatype should use the empty / representation.
Waits until this thread is the one that the proxy considers the current thread.
We also printed it first, just in case one of the detailers wanted to segfault.
We always need a continuation block because we might fall out of a catch block.
We are conservative, / any instruction that may write the size of an array (ie.
We can have entries such as UniqueStubs with no SrcKey These are ok to process.
We can only do a good job with the fix-it if we have the whole call expression.
We can't define these overrides if we have any uninitialized stored properties.
We consider it logically const to extend with default-constructed stack values.
We consider it to conform to all protocols, since the intended type might have.
We could consider changing the implementation to be lest branchy in the future.
We do this once and keep the CFG critical-edge free during our transformations.
We don't need to do anything too fancy about emission if we don't have a label.
We have to block all incref motion through a PHP call, by observing at the max.
We have to do this after SILParse creating the unfortunate double if statement.
We have to lower these to ARM-suitable vasm opcodes before register allocation.
We invalidate the SILLoaderCaches here so that we can eliminate such functions.
We look both at relative branches and the pattern: move r10, IMMEDIATE call r10
We need to keep going because ctx may define a private property with this name.
We need to keep going because ctx might define a private method with this name.
We scale relevant quantities using O(log2(k)) rather than O(k) multiplications.
We should be able to enforce that these arguments are always still expressions.
We should have the location populated by the enumerateLSLocation at this point.
We should know about archetypes corresponding to opened existential archetypes.
We should probably have a nominal type for these, just for type safety reasons.
We then teleport the object onto the stack as the first local after the params.
We would have registered a delayed function as "last emitted" when we enqueued.
We'll type-check to make sure the property type matches later after validation.
We've added some members to our containing class, add them to the members list.
We've added some members to our containing context, add them to the right list.
Windows actually does core dump size and control at a system, not an app level.
Without an associated context we cannot perform any access-based optimizations.
Zend doesn't modify the order of the list if the handler is already registered.
convenience initializers are only allowed on classes and in extensions thereof.
ensure that we don't have spaces or dots in the variable name (not binary safe)
extra bit of validation for instances when same params are bound more then once
force arr to escalate (if necessary) by getting an lvalue to the first element.
from the path, so we know we can be sure we are at a good place for this check.
hasAnyDefaultValues - Return true if any of our elements has a default / value.
if "from" position is negative, count start position from the end of the string
nameOverride is to be used only when there's an exact function to be called ...
removeFromWorklist - Remove the specified block from the worklist if / present.
retain_value of an enum with a trivial payload or no-payload is a no-op + RAUW.
should not reach here as optional shape fields are not supported in strict mode
the number of UTF-8 code units is not larger than that of UTF-16 code units * 3
truncate file, if the amount of new data is smaller than the existing data set.
with no objective-c runtime, just give an empty pointer with the swift bit set.
'address' is exclusive with 'get', and 'mutableAddress' is exclusive with 'set'.
'rethrows' only applies to functions that take throwing functions as parameters.
(Any other possible resolutions were known to fatal, or it was actually unique.)
(Hack says the return type comes first, PHP7 says the "use" clause comes first.)
(its also a bug because it shouldn't generate such warnings in its own headers).
- Check if we are handling user exception in an eagerly executed async function.
/ / For now, it is performed only for specializations in the / standard library.
/ / Return true if IndexVal is a constant index representable as unsigned / int.
/ / TODO: Check for other profitable constant propagation, like builtin compare.
2) Updating the retranslation successor blocks to rechain them in the new order.
3) Updating the any predecessor block in the region to go to the new chain root.
@objc-ness will be inferred (separately) and the selector will be checked later.
A NUL character can be either whitespace we diagnose or a code completion token.
A RAII-ish object for undoing the forwarding of cleanups along a / failure path.
A non-final class  can satisfy this requirement with a method that returns Self.
A pair of source block number and successor index, used to identify an out-edge.
A print context which records the line numbers where instructions are / printed.
A type expressing the result of classifying whether a call or function / throws.
Add user to the FoldedUsers list and perform the necessary cleanups, RAUWs, etc.
Admin users always authenticate on the admin db, even when using other databases
All Objective-C methods and non-final native Swift methods use dynamic dispatch.
Allow all instructions in between, which don't have any dependency to the store.
Allow the diagnostic to fire on the 'try' if we don't have anything else to say.
Although the CPU is little endian the FP has different byte and word endianness.
An indexed type is a combination of a type and a set of actions associated with.
Analyzing the body of this class destructor is valid because the object is dead.
Any successors that are inside the loop but are not back edges are / left alone.
Array count calls that are dead as a consequence of propagating the count value.
As slaveOkay really only means "read from any secondary" that does not conflict.
Assume that one tag bit is enough if the precise calculation overflows an int32.
Bail if nothing was found and we are not sure if this function exists elsewhere.
Bail if the cast between the actual and expected return types cannot be handled.
Before recording substitutions, make sure we didn't end up doing it recursively.
Before we start the webserver, make sure the entire binary is paged into memory.
Blocks are ObjC objects, so can share the Builtin.UnknownObject value witnesses.
Can't hoist if the instruction could read from memory and is not marked as safe.
Canonicalize BB arguments, replacing argument-of-casts with / cast-of-arguments.
Check if it is a conversion of a non-throwing function into a throwing function.
Check if this is a function declaration which is within a transparent extension.
Check that the constructed struct and the extracted struct are of the same type.
Check to see if the address of the alloc_stack is only passed to one apply_inst.
Class constructors have separate entry points for allocation and initialization.
Common case: a single set of generic arguments, for which we need no allocation.
Compute allChainBlockIds, allChainPredIds, and newRootId to be used in 3) below.
Compute the callees for each method that appears in a VTable or / Witness Table.
Constructors conceptually also have a dynamic Self return type, so they're okay.
Copy an array to a new array of mixed kind, with a particular pre-reserved size.
Copy over the type variables in the live components and remap component numbers.
Create a break target (at this level in the cleanup stack) in case it is needed.
Current decl context is contained inside 'D', so generic parameters are visible.
Determine the set of protocols to which the given dependent type / must conform.
Determine whether this is the name of a collection with a single / element type.
Do all the stuff that we only have implemented when there is a single candidate.
Don't let execution of the try body, or the previous catch body, fall into here.
Each document has a SwiftDocumentSemanticInfo pointer so use that for the token.
Each value in the list is represented with 2 IDs: ValueID and ValueResultNumber.
Emit notes for each uninitialized stored property in a designated / initializer.
Emit type metadata for types that might not have explicit protocol conformances.
Enregister the memoryRef so it can be used with an offset by the cmp instruction
Entries in the ClassInfo method table need to track some additional information.
Expand the given Mem into individual fields and process them as separate writes.
FIXME: A generic SILFunctionType should not contain any nondependent archetypes.
FIXME: I am not sure if this is possible, if it is not change this to an assert.
FIXME: SILFunction::ContextGenericParams needs to be a GenericSignature instead.
FIXME: Use of the platformString here is non-awesome for application extensions.
FIXME: there might be some interesting cases where this is suboptimal for enums.
FalseBB has already been inserted somewhere unless there's a continuation block.
Filter out those results that have been removed from the found-declarations set.
Finally, record various metadata about the translation and add it to the SrcRec.
Find the last component of the given lvalue and derive a base / location for it.
Flatten parameter packs as if they were just a normally provided parameter list.
Following code is based on apache_multipart_buffer.c from libapreq-0.33 package.
FooSomeEnumeration belongs inside "Foo", but we haven't actually seen "Foo" yet.
For "self" and "parent", knownConstraint should always be non-null at this point
For example, a concrete type is always a subtype of any protocol it conforms to.
For now, just handle the case where all predecessors are unconditional branches.
For other closures, type-check the body once we've finished with the expression.
For pointers to members, the type referring to the object the member belongs to.
Format: / Attr, SILDeclRef (DeclID, Kind, uncurryLevel, IsObjC), and an operand.
Forward or assign into the box depending on whether we actually consumed 'self'.
Function: gdAffineEqual Determines whether two affine transformations are equal.
Function: gdAffineFlip Flip an affine transformation horizontally or vertically.
Given an unhandled case, we have an illegal use for our optimization / purposes.
HACK: Deal with imports of submodules by importing the top-level module as well.
Handle integrated test tools which do not use llvm::cl::ParseCommandLineOptions.
I don't understand what's going on here well enough to fix the underlying issue.
If 'Bin' is an archive, recursively look inside all children within the archive.
If R and OtherR are blocks, then OtherR should be a successor of the real block.
If a capture references a local function, return a reference to that / function.
If an error is signalled by a non-nil error, be sure to store a nil error there.
If an error was already emitted, then we're done, don't emit anything redundant.
If any are unbound archetypes, then the problem is that it couldn't be resolved.
If isObject, the array is temporary and we should not check or save its pointer.
If knownCls isn't a normal class, our caller may want to do something different.
If live code relocation is enabled, record metadata for the current translation.
If only there is the appropriate label inside the current region perform a jump.
If the C type does not have the expected size, don't import it as a stdlib type.
If the SIL parameter isn't passed indirectly, we need to map it to an explosion.
If the argument is consumed, we're still responsible for releasing the original.
If the base object is already a metatype type, then something weird is going on.
If the bit is set, then the current basic block / kills an upward visible store.
If the condition fails, control flow is transferred to the / specified JumpDest.
If the conformance was synthesized by the ClangImporter, give it shared linkage.
If the names of the witness and requirement differ, we need to specify the name.
If the redeclaration context is namespace-scope, then we're mapping as a member.
If the self value was conditionally consumed, we need to emit conditional logic.
If the source file contains an artificial main, emit the implicit toplevel code.
If the source value has no payload, we can primitive-store the empty-case value.
If the subexpression is a metatype, build a direct reference to the constructor.
If the subexpression type checks as a non-optional type, then that is the error.
If the type is a type variable or is dependent, just fill in empty conformances.
If the type variable is in the list of member type variables, it is fully bound.
If the types match, then it must not be the contextual type that is the problem.
If the value is less optional than the desired formal type, wrap in an optional.
If there is a where clause on this let/var specification, parse and remember it.
If there is an error getting to / the specified input, this returns a null Type.
If there is an error with fixits it writes the fixits as edits in json / format.
If there was no default branch in SIL, use an unreachable branch as the default.
If there's an abstraction difference, we always need to use the get/set pattern.
If there's no continuation block, it's because the condition was folded to true.
If this case can only have one predecessor, then merge it into that predecessor.
If this class had the 'requires_stored_property_inits' attribute, diagnose here.
If this containment cannot be guaranteed, we say the reference is not available.
If this instruction is not a retain_value, there is nothing left for us to do...
If this is a final use along this path, we don't need to change any of the args.
If this is a method, then its formal type includes the archetypes of its parent.
If this is a non-address-only stored 'let' constant, we can capture it by value.
If this is a regular read-write access then return the computed memory behavior.
If this is a sugared type that needs to be folded into a single TypeExpr, do it.
If this typedef name does not contain "Mutable", it has no immutable superclass.
If we aren't even sure this is a wait handle, there's nothing we can infer here.
If we didn't find a function, create a new one - it must be a forward reference.
If we fail to create a projection, add User as a user to this node and continue.
If we found a sinkable instruction that is identical to our goal then return it.
If we found duplicated instructions, sink one of the copies and delete the rest.
If we had an incorrect expected fixit, render it and produce a fixit of our own.
If we have a fully-applied enum element constructor, open-code the construction.
If we haven't unwrapped anything before, copy all of the constraints we skipped.
If we parsed 'class' or 'static', but didn't handle it above, complain about it.
If we see an alloc_box as the pointer, then we're deallocating a 'box' for self.
If we're not doing Objective-C interop, we can just skip adding it to the class.
If we're walking into a tuple within a struct or enum, don't adjust the BaseElt.
If witnesses for two difference requirements inferred the same type, we're okay.
If you change the cache type make sure that property holds or fix this function.
Ignore the first result because it may be inaccurate due to internal allocation.
In the case where an exception is thrown, the VM unwinder will handle it for us.
In the partially live case, we have to check our control variable to destroy it.
Initialize the state for this Region with the state of its predecessor / Region.
Instructions which are none if our SILValue does not alias one of its arguments.
IntToFPWithOverflow is currently only used to convert 2048 bit integer literals.
It also makes the proxy findable when a dummy sandbox thread needs to interrupt.
It is OK if other threads still try to use the previous chunk before this point.
It is therefore not useful for programs intended to be portable to DOS machines.
It's because of std::pair (and is still the case if you return a custom struct).
It's not harmful per se, but it's indicative of redundant logic in the frontend.
It's possible to get a ReflectionProperty for a property which no longer exists.
Keep all nodes with a points-to edge in the WorkList and remove all other nodes.
Make sure that it is a simple partial apply (i.e. its callee is a function_ref).
Make sure that the substitution list of the PAI does not contain any archetypes.
Mapping from BB responsible for a specific case value to the result it produces.
Mark the block as a failure path, indicating the self value has been / consumed.
May mutate the IRInstruction in place (and return nullptr) or return an SSATmp*.
Merge cond_fail instructions if there is no side-effect or read in between them.
Missing: RuntimeOption::RepoAuthoritative's physical location is perf-sensitive.
More over, for classes, only the class itself can initialize its let properties.
NB: a StepDestination also manages an internal breakpoint at the given location.
Namespace logic is separate and only when uri passed in to insure no BC breakage
No copyright is claimed, and the software is hereby placed in the public domain.
No need to recheck permissions, since we already checked them first time around.
No two interfaces implemented by the same class will share the same vtable slot.
Note that these instructions make stores to a pre-live actrec on the eval stack.
Note that we don't have to add operators that are already in the top-level list.
Note: if you add more cases here, hhbbc/class-util.cpp also needs to be changed.
Note: the normal object destruction path does not actually call this destructor.
Now that we have our destinations, insert a conditional branch on the condition.
Once a witness has been found, there are several reasons it may / not be usable.
Other cases we're not sure about (maybe some non-unique classes got in the way).
Otherwise attempt to strip off one layer of RC identical instructions from User.
Otherwise, attempt to find the tag associated with this BB in the switch enum...
Otherwise, they intersect to either component if they are equal, else to Bottom.
Otherwise, this isn't a proper type alias, but it *might* be a first-class enum.
Otherwise, we need to switch sourceKey.Kind to the appropriate conformance kind.
Ownership of the rvalue can be "forwarded" to disable the associated cleanup(s).
PATH_INFO wasn't filled by resolveURL() because m_originalURL didn't contain it.
Peel off metatypes, since if we can cast two types, we can cast their metatypes.
Peel off optionals metatypes from the types, because we might cast through them.
Pop functions off the worklist, and run all function transforms on each of them.
Prevent the signal polling thread from sending CmdSignal messages to the client.
RC identity is more than a guarantee that references refer to the same / object.
REFERENCES  Conversions Between Calendar Date and Julian Day Number by Robert J.
Record explicit conformances and import inherited conformances before expanding.
Recurse with all combinations of bases and interfaces in the naming environment.
Recursively check for users after stripping this component from the access path.
Register a cleanup with the ASTContext to call the conformance table destructor.
Replace the partial_apply(partial_apply(X)) by X and remove the partial_applies.
Resilience may cause additional data to be laid out prior to this address point.
Resumable suspension takes everything from the frame and moves it into the heap.
Retrieve the context of the type, as opposed to the DeclContext of the variable.
Return true if V is an object that at compile time can be uniquely / identified.
Return true if this is a builtin operator that cannot be defined in user / code.
Returns false if an exception occurs during the send (typically a socket error).
Returns false if the user comparison function modifies the array we are sorting.
See if we can match the class name to the beginning of the first selector piece.
Since we didn't push a scope, the bound variables are live after this statement.
Some of these relationships may change as async/await implementation progresses.
Special case -- any class-bound protocol can be passed as an AnyObject argument.
TODO: More sophisticated param and return ABI compatibility rules could diverge.
TODO: derive this information in a more general way, e.g. add it to Builtins.def
TODO: just make sure that we have a path to them that the debug info can follow.
TODO: maybe we should have a cache entry anyway if the fulfillment is expensive.
TODO: we could try harder here, e.g. for enum elements to provide the enum type.
Taken: LdGblAddr branched here because no global variable exists with that name.
That means we have to be even more clever than the spec says that we need to :-/
The CF attributes aren't represented in the type, so we need to check them here.
The HHIRLICM runtime option is all capitals, so separation cannot be determined.
The applicant not being a class should have been diagnosed by the early checker.
The apply instruction in the caller (null if this is the tracker of the callee).
The argument binds to a parameter that comes earlier than the previous argument.
The bindings should be fixed-layout inside the object, so we can pass None here.
The control block is malformed until we've at least read a major version number.
The destination always wants a +1 value, so make the source +1 if it's a scalar.
The first 59 days of the year are the same regardless of the length of the year.
The first two parameters are pointers, and we make some simplifying assumptions.
The instr-profiling pass in llvm typically sets the function name ptr's section.
The last extension that was included within the member lookup table's / results.
The maximum combined value of all throwing expressions in the current / context.
The merge_memory_support function elaborates on the details of how this is done.
The only branch in the code below *should* result in non-branching machine code.
The only precise union with different stags we support so far is iterator stuff.
The payloads are all bitwise-takable, but have no other special / shared layout.
The result of the comparison might be independent of the truth value of the LHS.
The return value of those calls (if any) do not return a non-native swift array.
The second is to conservative scan a range given by a start offset and a length.
The solution is to fork/exec in a thread, and start the hardware counters there.
The two types are required to either both be l-values or / both not be l-values.
Therefore, if the variable is a constant, the value is guaranteed valid as well.
These cannot be encoded as UTF-16 surrogate pairs, so UTF-32 doesn't allow them.
These do not have any spare bits because they can contain Obj-C tagged pointers.
These little wrappers keep the const_casting out of the main line of code below.
This / returns the new instruction if it inserts one, otherwise it returns null.
This access pattern is used when the field offset depends on generic parameters.
This avoids a bunch of complication around numeric-string array-index semantics.
This happens when binding an address only parameter to an argument, for example.
This includes any use of an SSATmp that implies the pointer isn't already freed.
This is a really trivial cost model, which is only intended as a starting point.
This is because perf does not seem to handle more than three counters very well.
This is important because CC lowering isn't the only purpose of this conversion.
This is needed to correctly lex the token if it is at the beginning of the line.
This is not the last loop level, therefore the current iterator should be freed.
This is similar to returning an empty-string for standard configuration options.
This is used below to recursively relax the constraint on the source, if needed.
This isn't valid in a protocol, but we parse and then reject it, for better QoI.
This loop is too slow for normal use, but can be enabled to debug packed arrays.
This pass tests type expansion, memlocation expansion and memlocation reduction.
This seems to be a pre-1.8 MongoDB installation, where we need to default to 4MB
This shortened the year by 3 days per 400 years, giving a year of 365.2425 days.
This was an exhaustive do body, so bound our throwing kind by its throwing kind.
Thus, an indirect call through the class_method cannot be eliminated completely.
To assist debugging parser crashes, tell us the location of the / current token.
Tracks the inlined FP currently in use for each block within the inlined region.
Trait used to write the on-disk hash table for the / globals-as-members mapping.
Try to classify the implementation of functions that we have local knowledge of.
Turns the argsList linked list of TypeAnnotation into a positioned static array.
Unfortunately, we don't have enough info to add the attribute to DeclAttributes.
Unknown sub-block, possibly for use by a future version of the API notes format.
Unset does define intermediate dims but with slightly different rules than sets.
Until we do not remove any instructions or have nested increments, decrements...
Update the type for `l' as a result of an operation that might change the value.
Use this as a base to replace values in current function with their leaf values.
Used to provide unique names to ObjC categories generated by Swift / extensions.
Visit each non-terminator arc relevant instruction I in BB visited in reverse...
Walk the list of diagnostics, pulling out any fixits into an array of just them.
We also do not want to emit diagnostics for code that was transparently inlined.
We call it *indivisible* because it / cannot be broken down to more LSLocations.
We can hoist address projections (even if they are only conditionally executed).
We can not move a release above the instruction that defines the released value.
We can only create an address projection from an object, unless we have a class.
We do not need to retain the value since the value is already being deallocated.
We do not want to split arguments that have less than 2 non-trivial projections.
We don't have the information to form them again on exit, so tolerate them here.
We don't need the requirement if the constrained type is above the method depth.
We insert a swift_bufferDeallocateFromStack at the end of the buffer's lifetime.
We lower vinvoke in two phases, and `inst' is overwritten after the first phase.
We need to determine if this function is a static function or a member function.
We need to open-code if there's an abstraction difference in the result address.
We only actually return callToExit to our caller if that caller is dispatchBB().
We only need to do something here if the declaration context is somehow generic.
We put the version info first, so future versions can easily change header info.
We strip off the first colon, but aside from that we do not mangle the XHP name.
We'll leave it to DI analysis to insert the initializer call at the right place.
We'll stay here until we get a command that should cause the thread to continue.
We're now at the state before this instruction, so the stack sizes must line up.
We've popped a stack element, so inform the unwinder of the current stack depth.
We've reached a null byte, now check if we're actually at the end of the string.
When metatypes are accessed opaquely, they always have a "thick" representation.
When walking the use list, if we index into an enum slice, keep track / of this.
When we start iterating, we'll appropriately mark things as read based on these.
When we're analyzing a delegating constructor, we aren't field sensitive at all.
Whether we should make a variadic method with the given selector / non-variadic.
Writing data to a socket that has been closed will leave it in a very bad state.
another pass through the heap, this time using the PtrMap we computed in init().
error_message will be free()d, but errmsg was allocated by PHP and needs efree()
if "start" position is negative, count start position from the end of the string
its ok to do this before munging, because it only looks at the end of the string
pixwpl: the desired words per line corresponding to the supplied output pixdata.
re-raise the signal and pass it to the default handler to terminate the process.
since the cleanup state changes performed by ArgUnforwarder will occur too late.
since we only support win 7+ capturestackbacktrace is always available in kernel
swift_newtype-ed declarations may have common words with the type name stripped.
there is a mismatch for this frame, but the calling frame may match so carry on.
throw away all buffered output so far, so we can send back a clean soap resposne
'break' and 'continue' are valid only in scopes / where this is greater than one.
************************************************************************** DANGER
/ / This will properly handle nested function types (see / finishFunctionType()).
/ / Whenever the decision tree branches, it must forward values down / correctly.
/ For a dynamic enum, this queries the value witness table of the payload / type.
/ Once all requirements have been added, this will be zero in well-formed / code.
0x8f is both a valid one-byte opcode and the first byte of the 3-byte XOP prefix.
2.0.12: Steven Brown: support a single totally transparent color in the original.
A block won't have it's reachability stored in this map until it's been computed.
A helper for creating SILArguments and binding variables to the argument / names.
A metadata pattern is a structure from which generic type metadata are allocated.
A result plan for working with a single value and potentially / reabstracting it.
A value witness table is dereferenceable to the number of value witness pointers.
Add the constraint on the type used for the 'Self' type for a member / reference.
After disection, the effective type we can assume for the array key is in `type'.
Alas, we have more work to do in this under Windows, so we can't be this small :(
An ASTVisitor for generating SIL from method declarations / inside nominal types.
An unresolved member expression '.member' is modeled as a value member constraint
Analysis results for memory locations known to contain balanced reference counts.
Any archetype with the same constraints is equivalent for type lowering purposes.
Ask the enum implementation strategy to extract the enum tag as an integer value.
At the time of calling this function, we may not have the type of the / Decl yet.
Bad UTF-8 sequences are converted to valid Tcl_UniChars and processing continues.
Begin by using loop info and loop region info to find all of the exiting regions.
Build a reference to the subscript index variables for this subscript / accessor.
Builtin functions will implicitly start the return block during the inlined call.
But do it at the beginning, so that an explicit -Xcc -working-directory will win.
CALENDAR OVERVIEW  The Jewish calendar is based on lunar as well as solar cycles.
Calculate the class constraint and number of witness tables for the protocol set.
Call the instantiation function to initialize dependent associated type metadata.
Caller must ensure that off is at least within the entire func's bytecode region.
Catch any issues with this early, instead of waiting for the full check function.
Check if the subclass overrides a method and provides a different implementation.
Check runtime functions responsible for implicit bridging of Objective-C / types.
Check to see if this ctor has zero arguments, or if they all have default values.
Check whether the given type witness can be used for the given / associated type.
Check whether we already have an archetype builder for this signature and module.
Claim that the result is discarded to preserve the lvalue type of the expression.
Classes and protocols implemented in Objective-C have a special context mangling.
Clear lower byte Place only the byte into the register, keeping the higher 56bits
Coercion exprs have a rigid type, so there's no use in gathering info about them.
Combine checks that want to be hoisted to the same destination into hoist groups.
Compute a batch size that causes each thread to process approximately 16 batches.
Convert any ranges to column ranges that only intersect the line of the location.
Create an AvailableAttr that indicates specific availability / for all platforms.
Create constructors to initialize that value from a value of the underlying type.
Currently this doens't bind to ini_get since it is hard to thread through an enum
Decrement depth after query execution, in case an exception occurs during commit.
Describes how the next member reference will be treated as we traverse / the AST.
Determine how close an argument list is to an already decomposed argument / list.
Determine whether one protocol extension is at least as specialized as / another.
Determine whether the given type is the 'Self' generic parameter / of a protocol.
Determine whether this subscript operation overrides another subscript operation.
Don't descend into nested non-closure functions, or functions in the pseudo-main.
Don't emit anything yet, we emit it at the cleanup level of the switch statement.
Don't try to serialize a CPP extension class which doesn't support serialization.
Don't use memcpy because its probably one of the functions thats been mapped out.
Dyld will invoke this on our behalf for all images that have already been loaded.
Emit a class existential container from a class instance value / as an explosion.
Emit entry point arguments for a SILFunction with the Swift calling / convention.
Emit individual fail blocks so that we can map the failure back to a source line.
Encountered another try block, jump to its finally and free iterators on the way.
Ensures that both string literals to be concatenated use the same / UTF encoding.
Enum type lowering needs to derive implementations of the above for an enum type.
FIXME: Factory methods cannot have dummy parameters added for historical reasons.
FIXME: This case is hit when code completion occurs in a function parameter list.
FIXME: This is ridiculous, this all needs to be sucked into the declparsing goop.
FIXME: We shouldn't need to do this, the target should be immutable once created.
FIXME: Xcode can't currently handle multiple targets in a single dependency line.
FIXME: we should get the semantic context of the function, not the operator decl.
Fall through to the check below, since this could be a type alias to an enum type
Find an extension in the requested module that has the correct generic signature.
Find the generic implementation declaration for the named syntactic-sugar / type.
First check if there are escape paths which we don't explicitly see in the graph.
Following if block primarily used for inserting nodes created via createElementNS
For function application, convert the argument to the input type of the function.
For non-parameter adjustments, use the result type or whole type, as appropriate.
For reachable basic blocks, the initial state of ForwardSetOut should be all 1's.
For those functions, m_dvFuncletDB keeps the TransID for their first translation.
Free the self value in convenience initializers, otherwise there's nothing to do.
Get operands of a binary bitop builtin where one operand is an integer / literal.
Get the callee value at the needed uncurry level, uncurrying as much as possible.
Get the openend existential value if the archetype is an opened existential type.
Given N extra inhabitants, we represent the first N tags using those inhabitants.
Grab the superclass entry and continue searching for a non-inherited conformance.
Having a rollback fail is actually a normal, expected case, so just swallow this.
I think the sanest thing to do here is drop labels, but maybe that's not correct.
If a property has an override attribute but does not override anything, complain.
If any of them do potentially decrement the ref count of Ptr, we can not move it.
If both size() and RHS.size() equal then we know that the entire sequences equal.
If exceptions are thrown, new_iter_object_any takes care of decRefing the object.
If it is not a sandbox, sourceRoot will be the same as RuntimeOption::SourceRoot.
If it's set, the string is fb_compact_serialize'd, otherwise it's fb_serialize'd.
If lowering of the assign introduced any new loads or stores, keep track of them.
If not, create a specialized version of ApplyCallee calling the closure directly.
If our callee is not a builtin, be conservative and return may have side effects.
If our nominal type has type arguments, make sure they are representable as well.
If the declcontext is a Module, then we're in a special error recovery situation.
If the dest of the Assert/Check doesn't fit `tc', there's no point in continuing.
If the expression is the result of a call, it is an rvalue, not a mutable lvalue.
If the extension is constrained, mangle the generic signature that constrains it.
If the generator cannot automatically create a layout, it will throw LayoutError.
If the intermediate operation ends up calling misLea(), this will be set to true.
If the looked up witness table is a declaration, there is nothing we can do here.
If the string literal was coerced to Selector, replace the coercion with the ")".
If the two conformances are normal conformances with locations, sort by location.
If the type does not actually conform to the protocol, skip this member entirely.
If the types don't match, this is a different constructor with the same selector.
If the whole enum is indirect, we lower it as if all payload cases were indirect.
If there are no argument names, our lookup will be based solely on the base name.
If there is no next available integer key, this function does not append a value.
If there was no default branch in SIL, use the unreachable branch as the default.
If there's no continuation block, it's because the condition was folded to false.
If this is an assign, rewrite it based on whether it is an initialization or not.
If this is not the case we can safely hoist the call without the retain/releases.
If this method is not overridden in the module, there is no other implementation.
If we are analyzing a variable, we can generally get the decl associated with it.
If we can diagnose the problem with the fixits that we've pre-assumed, do so now.
If we cannot find the declaration, be extra careful and print the type qualified.
If we didn't need the context, "destroy" it, which recycles it for the next user.
If we found some requirements with nearly-matching names, diagnose the first one.
If we have an error convention that inserts an error parameter here, add "error".
If we have any warmup requests, replay them before listening for real connections
If we have no more rows to emit, clear the IP and destroy the continuation block.
If we have skipped any solutions, move this solution into the next open position.
If we have the destructor body, we know whether SILGen generated a -dealloc body.
If we're being asked to simplify this, it better be dynamically unreachable code.
If we're currently looking for this selector, don't load any Objective-C methods.
If we're initializing a weak or unowned variable, this requires a change in type.
If you're considering calling this function for some new code, please reconsider.
Implementations of the basic android logging functions for non-android platforms.
Implemented conservatively right now, but the following better not return bottom:
In contrast, it is ok to have forward references between classes, functions, etc.
In this case we can move the alloc_ref before the alloc_stack to fix the nesting.
In this situation we just Nop out the instruction and leave the old tmp dangling.
Initialize a SILBuilder and create a function_ref referencing the cloned closure.
Insert an element in the actual stack at the specified depth of the actual stack.
Instead, set AttrNone so that the modifiers of the original method are preserved.
It is maintained as an upper bound of the actual value during the transformation.
Look at the parent node in the AST to find the Apply to give a better diagnostic.
Look up the behavior protocol's "value" property, or bail if it doesn't have one.
Make a new GOT equivalent referring to the new variable with its definition type.
Make sure that all predecessors of our BB have either a br or cond_br terminator.
Mandatory inlining: every instruction inherits scope/location from the call site.
Mark as live the terminator argument at index ArgIndex in Pred that targets Succ.
Mark that the current context is top-level code with / throw-without-try enabled.
NativeData is sizeof(NativeData) (NativeDataInfo.sz) bytes for the custom struct.
NonPackedArrayProfile data counts how many times a non-packed array was observed.
None of the transformations done by getTypeOfRValue are necessary for subscripts.
Note: we're leaving non-overridden privates in their subclass method table, here.
Notify the debugger that this thread is executing a request in the given sandbox.
Notify the delete handlers that the instructions in this block are being deleted.
ObjC protocols don't have associated types so only the Self archetype is present.
Ok, we have an archetype, make sure it is in the nested archetypes of our caller.
On destruction, if a type got wiped out, reset it from null to its original type.
Once it does, we / will need to distinguish outer and inner type parameters here.
Only MIState is allowed to have no specialization and be a valid single location.
Only UTF-8 and UTF-16 encoded string literals are supported by this optimization.
Only allow allocation of TypeRefinementContext using the allocator in ASTContext.
Only consider this a member function if this arg if the first and its artificial.
Otherwise emit the diagnostic, set ResultsInError to be true, and return nullptr.
Otherwise replace all uses at this level of the tree with uses of the Leaf value.
Otherwise, all the constraints look ok, diagnose this as an ambiguous expression.
Otherwise, if there is a closure in the subexpression, we can violate invariants.
Otherwise, if this is a calling convention thunk we haven't emitted yet, emit it.
Otherwise, recurse on the underlying type in order to compute the hint correctly.
Otherwise, select a region for `callee' if one is not already present in `retry'.
Otherwise, this is an exact match, return false to diagnose this as an ambiguity.
Otherwise, this is the first type attribute and we know where the declaration is.
Otherwise, try inserting after the table we would transitively be inserted after.
Otherwise, we need to stop computing since we do not want to create lifetime gap.
Our block-end instruction was eliminated (most likely a Jmp* converted to a Nop).
Overlay/append this class's public/protected methods onto/to those of the parent.
Parse a single optional suffix, given that we are looking at the / question mark.
Perform a module level lookup on the first component of the fully-qualified name.
Prefix the character ch to the string str Increase length Set the has_prefix flag
Preserve the original result type on a zero_result unless we imported it as Bool.
Prevent against checking against the same bound generic type over and over again.
Propagate the exit edges to the containing fault/try handlers, if there were any.
Property exists, but it is either protected or private since accessible is false.
Push into reverse post order so that we can pop from the back and get post order.
Records the last store instruction in each block for a specific / AllocStackInst.
Replace the try_apply with a cond_br false, which will be removed by SimplifyCFG.
Resolve the type witness for the given associated type as / directly as possible.
Retrieve the name of the given Clang type for use when omitting / needless words.
Return the original type or a null type, depending on the 'ignoreMissing' / flag.
Return true if the specified type looks like an integer of floating point / type.
Returns the redundant loads and their replacement in the currently basic / block.
Returns true if the walker should traverse an AST node with / source range Range.
Second, reduce the available values into a single SILValue we can use to forward.
See also MongoDB::command and append_getlasterror, where this has to be done too.
Sends an acknowledgment back to the client so that it can go ahead and terminate.
Set m_dbgBranchGuardSrc after patching, so we don't try to patch the debug guard.
Set of all types which are currently known to be pointer followable or countable.
Set up the superclass of the metaclass, which is the metaclass of the superclass.
Signal to the main server thread to exit immediately if we want to die on SIGTERM
Simple program which provides a command-line interface to the debug-info printer.
Since it will be teleported to its place in memory, we don't care about the type.
Skip the rest of the file to prevent the parser from constructing the AST for it.
So in this case we leave the lower bound alone, and also must not remove the bit.
Some builtin and structural types have value witnesses exported from the runtime.
Some classes in hhvm can be "enums", which we need to handle as non-object types.
Special case for a single-character break as it needs no additional storage space
Specifically, check to see there is whitespace before and after the end of range.
Split critical edges from the lifetime region to not yet handled frontier blocks.
Store the hash in the global variable so that it is written into the object file.
THIS SOFTWARE IS BEING PROVIDED "AS IS", WITHOUT ANY EXPRESS OR IMPLIED WARRANTY.
TODO: It would be a bit more efficient to use a preallocated buffer in this case.
TODO: We could conceivably have an indirect opaque ** imported as COpaquePointer.
TODO: add an instruction for non-destructively getting a specific element's data.
Tell the ErrorProtocol to become an NSError, using _bridgeErrorProtocolToNSError.
The Self and Parent cases should never reach here because they were handled above
The address of the buffer used for the binding, if this is an address-only / let.
The argument is a pointer to data in the format you find in an .eh_frame section.
The bit position is then used to set/reset the bitvector kept by each BlockState.
The class we're bridging through must be a subtype of the type we're coming from.
The closure was from a trait, so we need a unique name in the implementing class.
The conflict checking is fairly conservative, only / considering rough structure.
The effects for the first case are generally handled in the miFinal op functions.
The first type needs wrapping in a closure despite already being a function type.
The following structure contains the information associated with a character set.
The function may release this argument, so check if the pointer can escape to it.
The input type is (T.Type, Builtin.RawPointer, Builtin.RawPointer, Builtin.Word).
The only way this could be a magic call is if the LookupResult indicated as much.
The passed iterator reference is then modified to be the correct "next" iterator.
The sunk instruction should now read from the argument of the BB it was moved to.
The type of the substitution is the source type of the thin to thick instruction.
The xed library will add operand size suffixes on any opcode that affects memory.
Then see if we already have a specialized version of this function in our module.
Then they are processed one at a time with a set of "legal transformation rules".
Then we mangle the types of the arguments that the partial apply is specializing.
There is a trade-off to this: With / shadow copies, we lose the precise lifetime.
These could belong to the control flow statement we are folding (ex: while loop).
This allows for significant reductions in the size of the state transition table.
This avoids re-calculating the dominator tree for each optimized checked_cast_br.
This can legitimately fail due to multiple input files having identical contents.
This check ensures that the target block BB post-dominates the switch_enum block.
This data array can be directly used by the Leptonica Pix in-memory image format.
This existential-to-concrete cast might bridge through an Objective-C class type.
This file defines the Parameter class, the ParameterList class and support logic.
This file implements implicit derivation of the Equatable and Hashable protocols.
This file implements simplifications of constraints within the constraint system.
This first branch is the only thing we'd be able to omit if we were doing AddInt.
This form is used with tuples that have elements with no names or default values.
This frame wasn't called from the TC, so it's ok to return using the interpreter.
This is a helper / to keep the Uses data structure up to date for aggregate uses.
This is only an estimation, because e.g. it does not consider potential aliasing.
This is populated in a topological order of dependencies between the definitions.
This is safe in a postorder walk since we visit blocks after visiting successors.
This is the case for MixedArray elements, Map elements, and RefData inner values.
This means we might have duplicate factored exits now, so we need to remove them.
This type will be expressed in terms of the archetypes of the conforming context.
Thus if we see an unknown call we merge together all retains and releases before.
To implode loadable tuples, we just need to combine the elements with TupleInsts.
Transfer attributes of the calling thread, such as QOS class, os_activity_t, etc.
True if CSE is done on high-level SIL, i.e. semantic calls are not inlined / yet.
Type info for error existentials, currently the only kind of boxed / existential.
Update checksum -- must be after transform to avoid fouling up last message block
Various types that we want to do something interesting to after / importing them.
Visit edges that have an unprocessed from() block if we walk the blocks in a RPO.
Walk over the blocks, and compare the new block's exnNode path to the active one.
Walk the type tree to find the a sub-type who's convertible to the found nominal.
We always merge right into left, so scan-only should be merged into no-scan-only.
We can only constprop here if we know for sure this is exactly the correct class.
We can't handle the 'thin' case yet, but it shouldn't really even be interesting.
We cannot duplicate blocks with AllocStack instructions (they need to be / FIFO).
We cannot just _return_ the operand because it is not necessarily an instruction.
We couldn't resolve the nested type yet, so create an unresolved associated type.
We currently represent a function with one n-tuple argument as an n-ary function.
We have a case here where we know neither the class nor the static property name.
We have three cases: the scalar case, the paren case, and the tuple literal case.
We inject code to print out expressions and / pattern bindings the are evaluated.
We just need to conservatively throw away slots that aren't tracked on all preds.
We need the length of the year to figure this out, so find Tishri 1 of this year.
We need to split any edge from a non cond_br basic block leading to a exit block.
We should figure out how to safely / put extension methods into the class vtable.
We still need to clear the bit so handleSlowPath can tell it was smashed, though.
We use SILOneValueOneOperandLayout where the field decl is streamed as a ValueID.
We will always allocate the table, even though there may be no named subpatterns.
We would have marked a delayed conformance as "last emitted" when it was delayed.
We would have to do more alias analysis to be able to safely ignore one of those.
We'll use that same representation type for the enum so that it's ABI-compatible.
We've split up the release into zero or more primitive operations, delete it now.
When received via Thrift, m_breakpoints points to a copy that is placed in m_bps.
When there is a variable table already, we will keep the ordinary compact() call.
XXX This is wrong, since it will print out "A(array(1,2))" instead of "A(1,2)"...
You should have to opt into this, since they are even less namespaced than usual.
addToScope - Register the specified decl as being in the current lexical / scope.
do not use oauth_parse_str here, we want the result to pass through input filters
don't ever resolve to the color that has been designated as the transparent color
end anonymous namespace / Perform top-down syntactic disambiguation of a pattern.
end llvm namespace / Determine whether the given declaration can inherit a class.
function_ref inside fragile function cannot reference a private or hidden symbol.
gd has only 7 bits of alpha channel resolution, and 127 is transparent, 0 opaque.
hasEscapedAt - Return true if the box has escaped at the specified / instruction.
if we're only looking for a certain number of points, stop looking once we hit it
it is fine for the ASTContext to be null, so don't actually even lldbassert there
iter_value_cell* will increment the refcount of the current value if appropriate.
libdwarf allocates its own unaligned memory so it doesn't play well with valgrind
mem2reg's invariants get unhappy if we don't try to initialize a loadable result.
open_existential_addr is a use of the protocol value, so it is modeled as a load.
php5 xdebug includes names for each type of include, we don't have access to that
really a stack Queue up the entry block, for which the invariant trivially holds.
self and parent are "forwarding" calls, so we need to use FPushClsMethodF instead
the loop header to contain an ExitPlaceholder, optionally preceded by a DefLabel.
unsigned wrap Implicitly imported sub-modules get the same depth as their parent.
we can ignore it if it can not decrement the reference count of the return value.
we can't call m_dispatcher.stop() from the event loop, because it blocks all I/O.
(And because everywhere you need a CallContext you also need that caller Context.)
(For example, we don't make any effort to optimize them for polymorphic accesses.)
- Each funclet must have all of its blocks contiguous, with the entry block first.
/ /   RESULTS /     * A length-prefixed array of fixed size CodeCompletionResults.
/ / Objective-C root class instance methods are also reflected as / class methods.
/ / This method assumes that the caller made sure that no vtable existed in / Mod.
2) The original recursive algorithm for the decision tree has been made iterative.
2.0.2: alpha blending is now on by default, and saving of alpha is off by default.
A partial specialization for lambda-based packing operations / that return 'void'.
A storage structure for holding a destructured rvalue with an optional cleanup(s).
A store is only safe if it is to an array element and the element type is trivial.
Add the struct decl to ExternalDefinitions so that IRGen can emit metadata for it.
Adjust for 'size' and 'flags', which are always 32 bits rather than pointer-sized.
Adjusts the addresses in asmInfo and fixups to match the new location of the code.
Although the onFastPath builtin has no side-effects we don't want to (re-)move it.
An implementation of what I call the "Sea of Stars" algorithm for POSIX fnmatch().
Anything in an Objective-C category or extension is adjusted to the class context.
Append a terminal escape sequence in "literal mode" so that editline / ignores it.
Apply rule 1 after the others because it can cause an additional delay of one day.
As a result of removing these arguments, remove any newly dead object projections.
As an optimization, avoid actually building a TypeInfo for any obvious TupleTypes.
As such, there is a 7/8 chance that last few bytes will be held by the compressor.
Associate the given replica set name with all the server definitions from the seed
At this point we know that we must have a release_value and a non-trivial payload.
Based on the induction variable information this comparison is known to be / true.
Both types of DCE here need to be type-aware, but they must visit blocks backward.
But only when the repl_set_name in the server definition struct is actually *set*.
But we want to calculate the hash later because later we can do it multi-threaded.
Can convert a decl ref to a global or local function that doesn't capture context.
Careful in these functions: they can be called when tl_regState is REGSTATE_DIRTY.
Cases where we break apart an enum and then reform it from its individual / cases.
Cases with payloads are numbered consecutively, and only required testing the tag.
Change the DeclContext of any contained parameters to the specified / DeclContext.
Check each branch target lands on a valid instruction boundary within this region.
Check that everything preceding the match is neither a lowercase letter nor a '_'.
Check that this block only produces the value, but does not have any side effects.
Check whether the current end of the vector is a clean multiple of the chunk size.
Check whether there's already an entry that's at least as good as the fulfillment.
Clone the instructions in this basic block and recursively clone successor blocks.
Code emitted in the branch can emit into our buffer for address-only conditionals.
Construct a mapping from type variables and constraints to their owning component.
Create a copy of the BB or reuse BB as a landing basic block for all SuccessPreds.
Create a new empty function with the optimized signature found by this / analysis.
Create an overload choice referencing this declaration and immediately resolve it.
Creates a hash out of the password so that we can store it in the connection hash.
CustomInstance classes always go through IR:AllocObj and ObjectData::newInstance()
DecRef* are special: they're the only instructions that can reenter but not throw.
Decode the 'function' parameter into this_, cls, name, pos, and nameContainsClass.
Default implementation: Get the value via sourcekitd_variant_dictionary_get_value.
Delay type-checking on VarDecls until we see the corresponding PatternBindingDecl.
Determine which method or subscript this method or subscript overrides / (if any).
Do an address range check to determine whether prop physically resides in propVec.
Don't complain about a particular base class violating a forbidden template check.
Don't keep looking if this is already a simple name, or if there are no arguments.
Dynamic lookup can only find class and protocol members, or extensions of classes.
Emit the specified declaration as an address if possible, / otherwise return null.
Erase our cached TypeLowering objects and associated mappings for dependent types.
Erasure to an ObjC existential or between metatypes doesn't require type metadata.
Extensions are self-registering, so we bring in the SO then throw away its handle.
FIXME: If we ever have first-class polymorphic values, we'll need to revisit this.
FIXME: Importing the type will can recursively revisit this same EnumConstantDecl.
FIXME: Retrying a failed import works around recursion bugs in the Clang importer.
FIXME: We need a better way to show headers, since they usually /are/ re-exported.
FIXME: this assumes that there's never meaningful reabstraction of self arguments.
Find a standin declaration to place the diagnostic at for the given accessor kind.
First we grab the session name from the ini settings, then the id from the cookies
For a class, check whether the superclass (if it exists) is default-initializable.
For autoreleased results, the reclaim is implicit, so the value is effectively +1.
For payload or extra inhabitant cases, zero-initialize the extra tag bits, if any.
For symmetry with overload resolution, penalize conversions to empty existentials.
Format: condition, a list of cases (EnumElementDecl + Value ID), default value ID.
Forward this value, deactivating the cleanup and returning the / underlying value.
FreeSec: libcrypt for NetBSD  Copyright (c) 1994 David Burren All rights reserved.
Get the phi group for r's def, optionally allocating a new phi group if necessary.
Getter selectors can belong to families if their name begins with the wrong thing.
Given a lowered SIL type, load a value witness table that represents its / layout.
Given a name like "inline", return the decl attribute ID that corresponds / to it.
HACK: Just update the original declaration instead of importing a second property.
Handle all other reverse-dependency instructions, like cond_fail and fix_lifetime.
Helper class used to set the LangOpts target before initializing the / ASTContext.
Hold the new object in a deleter and release it later if the insert is successful.
However, the driver kind may be overridden if the first argument is --driver-mode.
I wonder if we can refactor into a third method that takes an array semantic call.
If NewLoads is specified, this / can return the newly generated sub-element loads.
If a subscript has an override attribute but does not override anything, complain.
If it returns false, the support bits may still be marked on some must-alias-sets.
If it was used, we link it up with the cleanup chain, otherwise we just remove it.
If it's a map with a non-static string key, we can do a map-specific optimization.
If kPackedKind changes to a value that is not 0, change this to a conditional add.
If so, emit specific diagnostics for it and return true, / otherwise return false.
If the BB is the head of a backedge in our traversal, we have hit a loop boundary.
If the argument isn't a tuple, it is some scalar value for a single-argument call.
If the array / escapes in some way that cannot be tracked, the analysis must fail.
If the binding is not refutable, and there *is* an else, reject it as unreachable.
If the capture is of another local function, grab its transitive captures instead.
If the constructor can fail, set up an alternative epilog for constructor failure.
If the end of the store is reached, a new token will be scanned from the frontier.
If the from/to types are equivalent or explicitly convertible, this is a coercion.
If the indexed type is still marked as ignored, it cannot be conservative scanned.
If the original type had extra inhabitants, carry over its extra inhabitant flags.
If the pattern has a registered match expression, it's a type-checked ExprPattern.
If the previous checking gives the expr error type, clear the result and re-check.
If the return location is known to be that of an already processed return, use it.
If there are still args that haven't been accounted for, they have either been ...
If there is a duplicate diagnostic this can be used for better error presentation.
If this decl is associated with a swift_newtype typedef, return it, otherwise null
If this instruction can have no further effects on another instructions, continue.
If this is a comparison against nil, then we should produce a specific diagnostic.
If this is a load into a promoted closure capture, diagnose properly as a capture.
If this is not / specified, any lvalue will be forced to be loaded into an rvalue.
If this starts with atomicload or atomicstore, we have special suffixes to handle.
If those types are equivalent, then it doesn't matter which declaration is chosen.
If we are not asked to emit overflow diagnostics, just return nullptr on overflow.
If we couldn't find a property that is accessible in the current context, bail out
If we couldn't resolve an argument, then produce a generic "ambiguity" diagnostic.
If we have a switch, try to sink ref counts across it and then return that result.
If we have an abstract conformance passed in (a legal value), just return nullptr.
If we have an existing default witness table, verify that the protocol matches up.
If we have parameters, make sure their names get into the resulting function type.
If we haven't imported Foundation but this is a whitelisted type, behave as above.
If we reach here, then HardReturnTypeHints is true AND the constraint is not soft.
If we want dynamic lookup and this is the AnyObject protocol, note this for later.
If we're in a protocol or extension thereof, the setter thunk will be polymorphic.
In such a case, we fill in the fields with the information from the current frame.
In the empty existential parameter case, we don't need to decompose the arguments.
In this case we would with this optimization merge the last retain with the first.
Initialize source --- called by jpeg_read_header before any data is actually read.
Instead the compiler creates a struct internally which stores all the information.
Intentionally leak the old value pointed to by elem, including from magic methods.
Interceptable functions can be renamed even when JitEnableRenameFunction is false.
Internal classes can be extended, if we are not in whole-module-optimization mode.
Invalidate everything since we delete calls as well as add new calls and branches.
Invalidate the SrcDB entries for func's SrcKeys that have any Profile translation.
It is a floating piece of text that inherits location information from its parent.
It is a plausibility check for the function parameters (requirements engineering).
It should / be kept in sync with importEnumCaseAlias in the ClangImporter library.
It's not semantically necessary to preserve SIL block order, but we really should.
It's safe to assume they're init because you can never have a reference to uninit.
Iterate over all attributes of the given DIE, calling the given callable for each.
Kill calls to conditionallyUnreachable if we've folded assert configuration calls.
LdObjInvoke t1:Cls(C), where C is persistent but has no __invoke doesn't simplify.
Local function that attempts to bind the given parameter to arguments in the list.
Locate all the basic blocks associated with fault funclets, and mark them as such.
Look to see if we've already emitted this type under a different set of arguments.
Look up the default witness table associated with our protocol from the SILModule.
Lowercase until we hit the an uppercase letter followed by a non-uppercase letter.
Make sure the base type has registered itself as a provider of generic parameters.
Make sure we skip adding the standard library imports if the source file is empty.
MixedArray::Grow can only handle non-empty cases where the buffer's refcount is 1.
NB: this is called with a read lock on the corresponding entry in the sandbox map.
NOTE: Making these specializations public at this point breaks some optimizations.
Native prop handlers never kick in for declared properties, even if they're unset.
Need to coerce to integer for 'icmp eq' if it's not already an integer or pointer.
No need for a separate node for the load instruction: just reuse the content node.
Non-class heap objects should be pure Swift, so we can access their isas directly.
Note: This number should generally not be modified as it depends on the CPU's ABI.
Nothing to do in default case because the default stream type is empty_string_ref.
On non-objc platforms just fill it with a null, there is no objective-c metaclass.
On the promote-to-mixed path, we can use addVal since we know the key can't exist.
Only forward the current late bound class if it is the same or a descendent of cls
Only inline trivial functions into thunks (which will not increase the code size).
Optimize access to the global variable, which is known / to have a constant value.
Otherwise, add all the vtable functions in Vtbl to the function processing list...
Otherwise, we risk creating a CPP object without having it initialized completely.
Otherwise, we will only keep the last cookie for a given name-domain-path triplet.
Override function attributes based on CPUStr, FeaturesStr, and command line flags.
Parse the contextual keywords for 'mutating' and 'nonmutating' before get and set.
Propagate the count of an array created to count method calls on the same / array.
Remove redundant checks in basic blocks and hoist redundant checks out of / loops.
Resilient enums are accessed by invoking the value witnesses for these operations.
Return the index of the given dependent type in the list of all / dependent types.
Return true if this constraint is a conversion or requirement between two / types.
Returns the set of of TransIDs that are in `bid's retranslation chain in `region'.
Runtime type metadata always represents the maximal abstraction level of the type.
SILGen represents them with a Default basic block with an unreachable instruction.
Save some work and return as soon as possible if we are not producing diagnostics.
Semantic analysis fills in the depth when it processes the generic parameter list.
Similar to the PatternBindingDecl case above, we return the first EnumElementDecl.
Since all countable types are automatically pointer followable, mark them as such.
Since it doesn't seem to work to include the .h file, just sleaze declare it here.
Since many types have similar structure, multiple types can share the same layout.
Since this case is very rare, just punt on the whole trace so it gets interpreted.
So lval() is appropriate here, to force escalation of APCLocalArray to MixedArray.
Special-case for SIL generic parameter decls, which don't have a real DeclContext.
Subclasses of this class, including this class itself (unless it is an interface).
TODO: Could accept +0 arguments here when forwardFunctionArguments/ emitApply can.
TODO: Currently we only handle cases in which one side of the copy is block local.
TODO: Currently we only handle the address-only case, not the retain/release case.
TODO: The read preferences spec has a list of commands that *can* be send to slave
TODO: handle casting to a loadable existential by generating init_existential_ref.
TODO: project stored properties directly TODO: need to get baseFormalType from AST
Test that Empty acts like the bottom element in the lattice with respect to union.
Test that pointer enums with different cases but the same value compare different.
Test that setcc/xor pair is not collapsed when setcc result has more than one use.
The "piggy-bank" data-structure that we use for processing the dom-tree bottom-up.
The VarDecl and any accessor decls (for computed properties) go in CurDeclContext.
The array value may be returned by its initializer or some other factory function.
The decl is captured normally, even if it was captured directly in the subclosure.
The declared properties in the resultant array should be a permutation of propVec.
The derived method may require thunking to match up to the ABI of the base method.
The exception was not handled in this nesting of the VM---it needs to be rethrown.
The following php_mt_...() functions are based on a C++ class MTRand by Richard J.
The l-value type is the result of applying substitutions to the type-of-reference.
The layout of this struct is CrashReporter ABI, so there are no ABI concerns here.
The number of fields so far in words, plus 4 bytes for size and 4 bytes for flags.
The onFastPath builtin has only an effect on SIL level, so we lower it to a no-op.
The only case this returns a non-singular value is when there are varargs in play.
The only kind of stored variable that should make it to here is a global variable.
The operand values are equal after replacing with the successor block / arguments.
The same index could / either refer to the next element (indexed) or a subelement.
The upper 32 bits of the result will be in r2 and the lower 16 bits will be in r1.
The user has requested a module, so generate one and treat it as top-level output.
The variables used to return semantic value and location from the action routines.
The vector contains a list of maybeIntercepted flags for functions with this name.
Then attempt to lookup the corresponding (SILValue, TopDownState) from PredRegion.
There is a child iterator so that the children do not need to be store separately.
There is no need to do toKey() conversion, for a key that is already in the array.
There is plenty of room for any possible stack (stack used to be 8000 characters).
They can be moved to the loop pre header without changing the program's semantics.
This array contains the bytes used to pad the buffer to the next 64-byte boundary.
This can depend on all of their interior function bodies having been type-checked.
This class caches the collation element results for the ASCII subset of / unicode.
This corresponds to one of the function's formal parameters, so it's on the stack.
This file contains utility methods for parsing and performing semantic on modules.
This file implements IR generation for opaque values and value witness operations.
This file implements support for Swift name lookup tables stored in Clang modules.
This file implements support for inferring when globals can be imported as members
This is a little cleanup that ensures that there are no jumps out of a defer body.
This is extremely subtle: simplifyArgs will not change the CFG iff the DT is null.
This is mainly testing global variables to make sure all handling are thread-safe.
This is so xgettext sees the translatable formats that are constructed on the fly.
This setting is actually an int, but setting to a bool that returns false for now.
Translate the value from an enum representation to a possibly-null representation.
True if LICM is done on high-level SIL, i.e. semantic calls are not / inlined yet.
Unknown options record, possibly for use by a future version of the module format.
Unset the state local in order to correctly fall through any future finally blocks
Until that point, we have to bail because ImportDecl won't be able to re-map this.
Update UnhandledOnceCallee and InitializerCount by going through all "once" calls.
Update haveUnfulfilledParams, because we may have fulfilled some parameters above.
Use the "constructor prefix" heuristic from Maranget to pick the necessary column.
UserFile, to match Zend, should not call stream_close() unless it was ever opened.
Vectors are VecNxT, where "N" is the number of elements and T is the element type.
Walk the initializers for all properties declared in the type with an initializer.
We are adding an edge between two pointers which point to different content nodes.
We cache opened bfd file pointers that in turn cached frame pointer lookup tables.
We can always use the expand map to find stack locations that may alias our class.
We can claim ownership of the parameter and clean it up when it goes out of scope.
We can do this by emitting blocks using a simple walk through the successor graph.
We can end up with them because the solver bails out as soon as it sees a Failure.
We can have either a store directly to the address or to an index_addr projection.
We can promote the init_existential_addr allocation into a / dedicated allocation.
We can't conditionally take, since UncheckedTakeEnumDataAddr invalidates the enum.
We cannot shutdown until they stop because we own their dispatcher and event base.
We currently do not special case ArrayObjects / ArrayIterators in reflectionClass.
We don't have these yet in Swift, but if we do we need to add an extra check here.
We don't want to rotate such that we merge two headers of separate loops into one.
We have found a non trivial member that is not the member we are extracting, fail.
We just need any number that is guaranteed to be larger than every other argument.
We keep the file handle open in order to ensure we can still write on tracing stop
We need to be able to perform qualified lookup into the given declaration context.
We only handle StructInst and TupleInst being stored to a global variable for now.
We only need to clone the BB if not all of its predecessors are in the same group.
We only take this path for That means everything except non-generic nominal types.
We should be using "void *" but there are still machines that don't understand it.
We should never break out of a function, therefore there should always be a parent
We'd need a protocol change to have the client give us more info when it attaches.
When a new active node is pushed, begin an EHEnt, and when it's popped, it's done.
When a value is deleted from the hash, it is written to the current output buffer.
Witness table entries for constructors always refer to the allocating constructor.
array.uninitialized may have a first argument which is the allocated array buffer.
close listening sockets, this will initiate draining, including closing idle conns
given a choice of blocks, choose the one with higher post-order id to avoid cycles
handlers could cause other handlers to be registered, so need to repeat until done
if parsing was successful, update the mappings for spath and rpath (if it exists).
include the jump out of the try-catch block in the exception handler address range
input string is in the form charset//options where the //options part is optional.
keep a record of the starting position as an offset, in case the memory is resized
namespace / A singleton object that handles the two Xenon modes (always or timer).
need to set pipes to a new empty array, ignoring whatever it was previously set to
object is still here, we can rely on it to call this again and destroy this object
parse a file or directory of files const char *fn: name of magic file or directory
some broken mailers include the content-type header but not a mime-version header.
we'll then force interleave for a few regions, and switch to local for the threads
'Indices' is a paren or tuple pattern, / specifying the index list for a subscript.
(Even when the runtime does, it will likely only track a subset of the spare bits.)
(It's safe for other threads to concurrently read the class list without the lock.)
- Avoid relying on the AST being type-checked or even well-formed during traversal.
- Discard all evaluation stack temporaries (including pre-live activation records).
/ - If the type is fixed layout, we can emit our own copy of the layout /   struct.
/ / For the most part, this only distinguishes between Throws and / RethrowingOnly.
/ / In this case, one can replace the load instruction with the previous / results.
/ / Instructions in each basic block are processed in post-order as follows: / / 1.
@convention(block) is a single retainable pointer so optionality change is allowed.
A bunch of ugly macros to make it easy to declare certain common kinds of searcher.
A cond_br is a forwarding use for its non-operand arguments in a similar way to br.
A fix_lifetime (with a non-address type) is only alive if it's definition is alive.
A retain on an arbitrary class can have sideeffects because of the deinit function.
A test invocation may initialize the options to be used for subsequent invocations.
A three-byte-character lead-byte not followed by two trail-bytes represents itself.
Address parameters are all ABI-compatible, though the referenced values may not be.
Adjust the given type to become the self type when referring to / the given member.
After numParams use vars, the remaining instance properties hold any static locals.
Allocate the variables and build up an Initialization over their allocated storage.
Allow breaks for previously disabled breakpoints that do not match the site of cmd.
Also ensure the current line hasn't already been set as the active line breakpoint.
An excellent reference on the underlying algorithm (and related algorithms) is:  B.
Any archetype with the same / constraints is equivalent for type lowering purposes.
Assert that we consumed and produced all the indirect result information we needed.
Attempt to initialize our state with our first predecessor's state by just copying.
Avoid race condition, we may (likely) finish destructing before the timeout cancels
Bail if the signature has any dependent types as we do not currently support these.
Because the body may be a compound statement, we may have to indent multiple lines.
Break if block is not the first and it corresponds to the main function body entry.
Caller should allocate height * pixwpl bytes of memory before calling this routine.
Callers of the requirement can provide 'nil', but the witness / does not handle it.
Cannot import variadic types unless specially handled before calling this function.
Check if a given property is a non-static let property / with known constant value.
Check if this method is declared in the context that conforms to / NSAccessibility.
Check that the optional printf format in description matches the type of the magic.
Check the generic parameters if our context is a generic type or extension thereof.
Check the signature of F to make sure that it is a function that we can specialize.
Check to see if lookup succeeds if part is split off, and record the matches found.
Check to see if the first argument expects an inout argument, but is not an lvalue.
Check to see if the type of the tuple can be inferred accurately from the elements.
Check whether all of the inherited protocols can have existential types themselves.
Clang-imported types should never get a default constructor, just a memberwise one.
Compute the set of endpoints, which will be used to insert releases of temporaries.
Consecutive T_INLINE_HTML tokens should be merged together to match Zend behaviour.
Construct a Scope for the function body so TypeAliasDecl can be added to the scope.
Constructs a fixed-size type info which asserts if you try to copy / or destroy it.
Convert a localId in a callee frame into an SP relative offset in the caller frame.
Create the HttpServer before any warmup requests to properly initialize the process
Create the correct substitution for calling the given function at / the given type.
Determine the liveness states of the memory object, including the super.init state.
Determine whether the preposition in a split is "vacuous", and / should be removed.
Diagnose 'super.init', which can only appear inside another initializer, specially.
Dirty page purging thresholds for the per NUMA node arenas used by request threads.
Discard the value returned by the __toString() method and raise a recoverable error
Do a raw copy first, without worrying about counted types or refcount manipulation.
Don't emit errors for unreachable code, or if we have already emitted a diagnostic.
Don't externally emit systemlib because the external emitter can't handle that yet.
Don't merge if the probability of getting to the callee from the caller is too low.
Don't override the linkage of a default witness table with an existing declaration.
Don't split a method that looks like an action (with a "sender" of type AnyObject).
Drill down to the appropriate address in the base, then convert that to an integer.
Drop requirements for parameters that have been constrained away to concrete types.
Each block's rpo_id is the reverse-postorder number (entry starts at 0, and so-on).
Each of the segments is passed as an argument to init(stringInterpolationSegment:).
Emit a global list, i.e. a global constant array holding all of a / list of values.
Emit all the catch clauses, branching to the end destination if we fall out of one.
Erase any solutions with more value witnesses in protocol extensions than the best.
Erase the instructions recursively, this way, we get rid of pass dependence on DCE.
Even if the func contains NativeImpl we may have broken the trace before we hit it.
FIXME: Conformances in InitExistentialRefInst is currently not included in SIL.rst.
FIXME: If there is a name, actually perform qualified lookup into this DeclContext.
FIXME: If we had some basic sanity checking of Self, we might be able to use these.
FIXME: This is cheesy when the destination BB has only the switch as a predecessor.
FIXME: We can't reasonably lifetime-extend an inner-pointer result through a thunk.
Factory for String atoms that are required to match another captured String opcode.
Finally, make sure any volatile locals are set to Gen, even if they are parameters.
First, if we're reading from stdin and we don't have a directory, output to stdout.
Following the path automatically caches at every point along it, including the end.
For a bounded call, the static type that provides the lower bound for / the search.
For now I'm just making use of copyMixed to do it for me before GrowPacked happens.
For now for simplicity, we put all new arguments on the end and delete the old one.
For phi uses, however, we want to consider the whole phi group's allocations first.
For this reason, many of the operations are structured as for-each style iteration.
For values stored out-of-line, initializeBufferWithTakeOfBuffer is always a memcpy.
Generated code should never use a StaticString on the left-hand side of assignment.
Given a reference to some metadata, derive a reference to the / type's parent type.
Handle any attributes that are not printed at all before we make printer callbacks.
Hash table will store Formattable::Type objects directly, so no need for destructor
Helper class to copy only a set of SIL instructions providing in the / constructor.
Helper function to extract types that markers are instantiated on from the markers.
If O1 and O2 do not equal, see if we can prove that they cannot be the same object.
If S has a default case bail since the default case could represent multiple cases.
If an individual sub-member is passed as inout, then we model that as an inout use.
If an update is needed, however, update and run make_native-func-caller.php as well
If for some reason we are passed a string (i.e., a leaf value), just return it back
If it recurses again, we promote to a hash set to track all the information needed.
If it's already there we need to merge the used vars in with what we saw last time.
If one needs to make / changes that cause the asserts the fire, please update them.
If so, we can ignore the release for the retain before the call exactly matches it.
If the AllocBox is used by a mark_uninitialized, scan the MUI for interesting uses.
If the blocks are different, it's as easy as whether A's block dominates B's block.
If the bridged ObjC type is known, check if this type can be cast into target type.
If the code sequence falls thru, then add the next instruction as a possible target
If the desired type matches the payload slot exactly, we don't need to do anything.
If the metatype has already been lowered, it will already carry its representation.
If the method is dynamic, access it through runtime-hookable virtual dispatch (viz.
If the op and operand types are a supported combination, return the modified value.
If the paren expr has a favored type, and the subExpr doesn't, propagate downwards.
If the pointee is 'const void', 'CFTypeRef', bring it in specifically as AnyObject.
If the resulting value is a refcounted type, it will have one unconsumed reference.
If the successor region is already in this LRegion this returns that regions index.
If the translation corresponds to a DV Funclet, then add an entry into dvFuncletDB.
If the type does not bind any generic parameters, return the superclass type as-is.
If the type is not dependent, or we have no generic params, there's nothing to map.
If the type still has parameters, the constrained extension is considered unusable.
If there are no elements, just build a parenthesized expression around the closure.
If there is an 'else' block, we make a new one, otherwise it is our continue block.
If there's no toString() method, than the object is always greater than the string.
If this catch clause is reachable at all, it's because a function parameter throws.
If this is a random nul character in the middle of a buffer, skip it as whitespace.
If this is a release right after an allocation of the object, then we can zap both.
If this is an (inlined) function scope, the function may not have been created yet.
If this is an ExprPattern that isn't resolved yet, do some simple syntactic checks.
If this is not a one iteration data flow, then the forward sets have been computed.
If this is not the case, it is potentially a store into sub-property of a property.
If this isn't a protocol member to be given special treatment, just add the result.
If this let value has an address, we can handle it just like a single buffer value.
If this method returns true, then usesVariableArgumentFunc() must also return true.
If this variable has WeakStorageType, then it can be mutated in ways we don't know.
If we already have a rebind, then we're re-typechecking an expression and are done.
If we aren't going to fall back to the internal emitter, generate a Fatal'ing unit.
If we didn't map down to a specific expression, we can't handle a default argument.
If we ever remove 'self' from manglings, we should stop resetting the context here.
If we found a protected or private method, we need to do some accessibility checks.
If we have a concrete conformance, handle Self-derived type parameters differently.
If we imported a C pointer type as a non-trivial type, it was a foreign class type.
If we spilled tag bits, however, we can offer the unused bits we have in that byte.
If we succeed in walking the entire graph of uses, we can remove the resultant set.
If we used extra inhabitants to represent empty case discriminators, weed them out.
If we were created with a temporary, that address was passed as an indirect result.
If we were terminating and this was the last pending event then trigger the delete.
If we're in a designated initializer the object might already be fully initialized.
If we're looking to define something, we may need to replace a forward declaration.
Ignore J-edges that point to nodes that are not smaller or equal to the root level.
Implementations of Objective-C classes and categories are not reflected into Swift.
Implements the structures of type references for property and enum case reflection.
In Zend, the __set is silently dropped, and the protected property is not modified.
In all other cases check whether this could be a potentially releasing instruction.
In contrast to exif_process_string this function does always return a string buffer
In the mean time, elide these variables, they would confuse both the user and LLDB.
In this case, we know that the instruction location will be the enclosing function.
Initialize the AvailSet by intersecting this basic block' predecessors' / AvailSet.
Invert the key permutation and initialise the inverted key compression permutation.
It is also in a "could be" relationship with all its ancestors (including optional)
It probably doesn't make sense to always guard on an object class when we have one.
It's unlikely that the user is interested in binding a variable of type (foo: Int).
LValues are captured as both the box owning the value and the address of the value.
Likewise when it removes an element it always removes the corresponding hash entry.
Loading from the reference type emits a bitcast to the proper reference type first.
Local function that produces the canonical parameter type of the given initializer.
Look for other imported constructors that occur in this context with the same name.
Lower the substituted result using the abstraction patterns of the original result.
Make sure that enums with the same case, but different values do not compare equal.
Make sure that the number of parameters matches the "number of colons" in the name.
Make sure that there is an invalid 'override' attribute on the / given declaration.
Make the constructor declaration immediately visible in its class or protocol type.
Mangle this as if it were a conformance thunk for a closure within the requirement.
Map anonymous enums with no fixed underlying type to Int /if/ they fit in an Int32.
Minimal recovery: if there's a single token and then an r_paren, consume them both.
Mostly useful for platforms where the debug info typically stays in the executable.
NOTE: name, hoistable, and a few other fields currently serialized outside of this.
Non-static set/willSet/didSet/materializeForSet/mutableAddress default to mutating.
Note: We can't use tryLoc here because that's outside the ThrowStmt's source range.
ObjC enums have already had their raw values checked, but pure Swift enums haven't.
Observing member are accessed directly from within their didSet/willSet specifiers.
Okay, the result is a single value, which will either be an indirect result or not.
Optimize builtins which receive the same value in their first and second / operand.
Otherwise the static member lookup was invalid because it was called on an instance
Otherwise, if the instruction uses the alloc_stack result, treat it as interfering.
Otherwise, iterate over all the conservative guards, seeing if any are interesting.
Otherwise, the block with the unreachable terminator will be a non-local successor.
Otherwise, we are conservative and do not forward the EnumTag that we are tracking.
Parser::parseList() does a special check for a tok::EOF that is spelled with a ')'.
Performs various analyses on V1, V2 in an attempt / to disambiguate the two values.
Pointers to either the native data or the object will be mapped to the native data.
Pre-allocate the component vectors so that we can form references into them safely.
Process everything transitively referenced by one of the functions in the worklist.
Process the clang arguments last and allow them to override previously set options.
Propagate liveness back from Arg to the terminator arguments that supply its value.
Properties on the closure object are either use vars, or storage for static locals.
RFC 2397 specifies 'data:' as the prefix, but zend's PHP supports 'data://' as well
Reclaim all translations associated with a SrcRec including the anchor translation.
Recommended practice is still to execute a rollback statement and ignore the error.
Reconstitute type sugar, e.g., for array types, dictionary / types, optionals, etc.
Replace all retain/releases on convert_function by retain/releases on its argument.
Return a function which takes two pointer arguments and returns / void immediately.
Return true if we are extracting the only non-trivial field of out parent / struct.
Returns the default witness for a requirement, or nullptr if there is / no default.
Returns true if spill space must be allocated before execution of this instruction.
Second step: propagate the connection graphs up the call-graph until it stabilizes.
Similarly for addressImmediates - and see comment above for non-address immediates.
Since we'll be choosing the same overload, we can merge the overload tyvar as well.
Start removing right after the preceding argument, so we consume the comma as well.
Succeed trivially for an empty payload, or if the payload is masked out completely.
TODO: Substitute out archetypes from the enclosing context with generic parameters.
TODO: Thick metatypes are free if they don't require generic or lazy instantiation.
TODO: some smart thing that avoids duplicating the value in the general loop below.
Temporarily assign parent properties' indexes to their additive inverses minus one.
Temporary buffer to hold scanned number strings before they are passed to strtoul()
Terminate source --- called by jpeg_finish_decompress after all data has been read.
Test that All acts like the top element in the lattice with respect to containment.
That means that these casts would not be appropriate for bridging-like conversions.
The apply callee that abstractly represents the entry point that is being / called.
The argument is +0, so we can use the address of the param in the context directly.
The constrained type can only be a generic parameter or an associated type thereof.
The gen set accumulates the set of variables in the block with upward-exposed uses.
The most common unnamed value of closure type is a ClosureExpr, so special case it.
The paramdecl should have function type, and we restrict it to functions taking ().
The server side push handler is just here to catch errors and egress state changes.
The task failed, so return true without performing any further dependency analysis.
The version number used to be stuck as 199905, and was thus basically content-free.
The witness has an IUO that can be removed, because the / protocol doesn't need it.
Then attempt to lookup the corresponding (SILValue, BottomUpState) from SuccRegion.
Then change all of the original predecessors to target Preheader instead of header.
There are enough details to discuss it futher in next several sections of this doc.
There are multiple values from multiple predecessors, set this as a covering value.
These locals will be populated by DV init funclets but they'll start out as Uninit.
This / is designed to work with RValue ManagedValue bases that are either +0 or +1.
This creates a second / insertion point that most blocks should be inserted before.
This file implements routines for finding and caching local type data for a search.
This function is expected to be called after all calls to appendParam are complete.
This includes creating the IR type as well as emitting the basic access operations.
This is just following the lead of existing (and not terribly easy to follow) code.
This may come up when a generic type with payload is instantiated on an empty type.
This means they can only be in a subclass relationship if that specialized data is.
This might not be strictly necessary any more, but it's probably still a good idea.
This ordering is required so that -1 is returned for NaNs (to match PHP7 behavior).
This pass prints the callees of functions as determined by the BasicCalleeAnalysis.
This pattern is typical for method chaining code like obj.method1().method2().etc()
This setting is especially relevant to arena 0, which all the service requests use.
This should be called in top-down order of each def that needs its uses / rewrited.
Thus, we must force it to run again in order to be able to observe all the updates.
Trace information about interface conflict sets and the vtables computed from them.
Try again, skipping any meta groups like "expr-specific" in case that lets us order
Try performing a dominator-based jump-threading for / checked_cast_br instructions.
Turn BOOL and DarwinBoolean into Bool in contexts that can bridge types losslessly.
Unfortunately, it's at a different offset in various OSes, so try multiple offsets.
Unknown metadata record, possibly for use by a future version of the module format.
Unknown top-level block, possibly for use by a future version of the module format.
UnsafeMutablePointer can be converted from an inout reference to a scalar or array.
Unset InsertPt so we remove retain release pairs instead of performing code motion.
Use the attributes and calling convention from the static definition if we have it.
Version 2 of this command means we're trying to get the value of a single variable.
We achieve that by *intentionally* creating the object on heap and never delete it.
We are about to translate something known to be blacklisted by debugger, exit early
We are essentially using this optional to represent 3 states: true, false, and n/a.
We assume that we don't have to check if the match starts a new word in the string.
We call iter_advance() without checking if m_pos is the canonical invalid position.
We can have a loop subregion that has multiple exiting edges from the current loop.
We cannot promote destroys of address-only types, because we can't expose the load.
We do not diagnose here: a diagnostic will already have been emitted by the parser.
We don't debug RPC requests, so we need to detach XDebugHook if xdebug was enabled.
We don't have the time to disentangle the real mangler from the compiler right now.
We don't support JIT compiling functions that use some super-dynamic php variables.
We just want to emit a module, so pass -emit-module without any other mode options.
We managed to hit phijmps to both of our target phidefs before hitting this phijcc.
We need this even if there is no function body to detect argument name duplication.
We omit the code completion token if it immediately follows the module identifiers.
We parsed the condition as a CallExpr with a brace statement as a trailing closure.
We profile generic IncRefs to see which ones are unlikely to see refcounted values.
We rely on Loop canonicalization to separate such loops into separate nested loops.
We'll change the parent to the function later after we've created that declaration.
When called from imagewbmp() the quality parameter stands for the foreground color.
When inlining is on, we may modify markers to weird values in case reentry happens.
With multi-threading we need a backend job for each output file of the compilation.
XXX: it seems weird we have to do this even though we already ran resolveVmInclude.
allows the driver to report about an invalid session id and request id regeneration
containsUnknownElements - Return true if there are any elements that are / unknown.
contextParams will point to the last deserialized list, which is the innermost one.
invariant returns null if used in an expression, void according to the typechecker.
let constructor params override any values that may have been found in auth headers
libgcc exports these for registering EH information for dynamically-loaded objects.
m_fpOff does not include the space taken up by locals, iterators and the AR itself.
make_unique hoisting by looking at the operations (no uniquely identified objects).
php5 xdebug doesn't do anything in this case, but we should probaly notify the user
prevent the next loop from visiting the variadic param and testing its optionality.
recordRange will do that for us, so just make sure we have the right address setup.
simplifyCondBrBlock - Simplify a basic block that ends with a conditional / branch.
swift_retain(obj) Ignore retains of the "self" object, no resurrection is possible.
this movzbq is only needed because callers aren't required to zero-extend the type.
we run the data flow with the genset and killset until BBWriteSetIns stop changing.
'self' is 'let' for reference types (i.e., classes) or when 'self' is neither inout.
(Almost) all instructions that take a Local have its index at their first immediate.
- This is the first point at which diagnostics must be emitted for bad conformances.
/ / ArgValues are the values feeding the specified Argument from each / predecessor.
/ / ComputeAvailValue - Compute the available value at the end of the basic / block.
/ / For example, given "NSFooBar" and "NSFooBas", returns "NSFoo" / (not "NSFooBa").
/ / Mark specializations as public, so that they can be used by user / applications.
/ We need to load the unique reference from a global variable fixed up at / startup.
2.6.1 xsi:type 2.6.2 xsi:nil 2.6.3 xsi:schemaLocation, xsi:noNamespaceSchemaLocation
@objc protocols don't need a materializeForSet since ObjC doesn't have that concept.
A (case-sensitive) map from class constant name to the php::Const that it came from.
A CRTP class for working with Clang's ABIArgInfo::Expand / argument type expansions.
A JSON text is accepted if the end of the text is in state 9 and mode is Mode::DONE.
A bit vector for which the ith bit represents the ith LSLocation in / LocationVault.
A class for collecting the types of a Clang ABIArgInfo::Expand / argument expansion.
A lot of the code below is unfortunate and due to the inflexibility of / GraphUtils.
A very simple dead code elimination pass that just removes trivial nop instructions.
A widening union on types that are already stable should not move the type anywhere.
Access this directly instead of going through (e.g.) observing or trivial accessors.
Accesses to value types with a non-mutable self are also done through the base type.
Add the 'self' clause back to the substituted formal type of / this protocol method.
Add the protocol decl to ExternalDefinitions so that IRGen can emit metadata for it.
Add the specified capture to the closure's capture list, diagnosing it / if invalid.
After we have hoisted the first release this release would prevent further hoisting.
Although we require an initializer, recover by parsing as if it were merely omitted.
Analyze an instruction that operates on the Address of a forward propagated / value.
Arcs that survive this function may still be trimmed by the other checks in visit().
Arrays can contain an element with NaN, so only equality comparisons can be negated.
As above, but opcode was already 1 byte, so the reduction is only 3 bytes this time.
Assert that the layout query functions for fixed-layout enums work, for LLDB's sake.
Avoid soft deadlock: do not read if there is nothing to read from sockets and pipes.
Be sure to use a CleanupLocation so that unreachable code diagnostics don't trigger.
Both have data, and the intersection allows it, so it depends on what the data says.
Break infinite recursion when visiting ill-formed classes with circular inheritance.
But note that mergeUnit is called for systemlib etc before the stack has been setup.
But thats ok, because it doesnt matter whether they see the old contents or the new.
But their constant values can still be propagated into their uses whenever possible.
Canonicalize loop exit blocks so that they only have predecessors inside the / loop.
Casts from non-existentials into existentials and vice-versa cannot be improved yet.
Certain interesting aspects of a static function are only present in its definition.
Check that the stack height is consistent coming from all entry points into this BB.
Check whether a superclass has already declared this as a protected/public property.
Collect llvm.compiler.used globals already in the module (coming from ClangCodeGen).
Computing the set of inherited protocols depends on the complete inheritance clause.
Construct the folded instruction - a tuple of two literals, the result and overflow.
Cookies are preferred, because initially cookie and get variables will be available.
Create a copy of the BB or reuse BB as / a landing basic block for all FailurePreds.
Create a new apply based on an old one, but with a different function being applied.
Create an Explosion containing the unmanaged LLVM values lowered from a / SIL value.
Debugger clients are disconnected abnormally, or this sandbox is not being debugged.
Define all of the diagnostic objects and initialize them with their  diagnostic IDs.
Delete dead instructions and everything that could become dead after their deletion.
Do not try to fold it again if we had previously produced an error while folding it.
E.g. a Str might contain "" and be falsey, or an array or collection could be empty.
Enter VM by calling action(), which invokes a function or resumes an async function.
Error is less than half an ulp -- check for special case of mantissa a power of two.
Even though connections may be open for reading, they will not be executed in the VM
Every SSATmp that may have a reference counted type is assigned to a must-alias-set.
External code references continue to point to the same address as before relocation.
FIXME: All single-retainable-pointer types should eventually have extra inhabitants.
FIXME: Check that this declaration is at least as available as the one it overrides.
FIXME: Destructors don't have the '()' pattern in their signature, so paste it here.
FIXME: Eventually, we want to enforce that we have either argTuple or argParen here.
FIXME: Memory corruption issues arise when enabling this for mixed Swift/ObjC enums.
FIXME: Relational constraints for which we could perhaps do better than the default.
FIXME: The following should run in the synchronous dispatch queue of the connection.
FIXME: if it's ErrorType but we've already typechecked we shouldn't typecheck again.
FIXME: we need to resolve the set of protocol conformances to do unqualified lookup.
Find everything which may not be eliminated, e.g. because it is accessed externally.
For InterpOne we don't bother to keep track of specialized types or inner-ref types.
For each of the constraint restrictions, record it with simplified, canonical types.
For kills, locations on the eval stack below the re-entry depth should all be added.
For most instructions, we know how many values are popped based solely on the opcode
For nontrivial payloads, we need to copy/take the payload using its value semantics.
For now I'm just making use of copyPacked to do it for me before GrowPacked happens.
For this purpose, the lunar cycle is assumed to be 29 days 12 hours and 793 halakim.
Forward into a single value, then install a cleanup on the resulting imploded value.
Get all non-failure exit BBs in the Apply Callee if our partial apply is guaranteed.
Given a type, determine if it is non-interesting, IE, its generated layout is empty.
Given the address of an existential object, drill down to the / witness-table field.
Given the current lattice state, if we have seen a use, advance the / lattice state.
Grab caller info from the ActRec, free the ActRec, and return control to the caller.
Handle finding an empty strong iterator slot when the first slot was already in use.
Helper functions to check if an object type's name is that of a special marker type:
If / StructVal is valid, the value is the address of an element within the / Struct.
If a let-binding doesn't follow, diagnose the problem with a tailored error message.
If all else fails, diagnose the failure by looking through the system's constraints.
If both types can have superclasses, which whether one is a superclass of the other.
If compared against an integer, emit a collection check before doing the comparison.
If it does "x +++ y", then it isn't likely to be a case where a space was forgotten.
If it is, we'll record the linkage dependence for the later template linkage fix-up.
If it's a collection name and of pointer type, call it an array of the pointee type.
If its a vector collection we don't need to worry about refs in the above fast-path.
If let properties can be assigned externally, we don't know the values they may get.
If nothing changed, fail: something is unresolvable, and the caller should complain.
If so, then we have to assure consistency between YY_CURRENT_BUFFER and our globals.
If so, then we know that V2 must partially alias V1 via a must alias relation on O1.
If so, this is an error, as the user shouldn't be using such types in this template.
If the Swift name starts with the word "is", use that Swift name as the getter name.
If the accessor wants the value 'in', we have to copy if the base isn't a temporary.
If the argument has an unresolved type, then we're not actually matching against it.
If the argument labels for this result are incompatible with the call site, skip it.
If the base of the lookup is an existential metatype, emit an error specific to that
If the base type is a tuple type, look for the named or indexed member of the tuple.
If the bit is set, then the current basic block / generates an upward visible store.
If the decl is currently being type checked, then we have something cyclic going on.
If the imported module name is the same as the current module, produce a diagnostic.
If the indices are literally identical SILValue's, then there is clearly a conflict.
If the method is foreign, its foreign thunk will handle the dynamic dispatch for us.
If the month is 1 or 2, the calculation is simple addition to the first of the year.
If the original type is passed indirectly, copy to memory if it's not already there.
If the overriding declaration does not have the 'override' modifier on it, complain.
If the patterns are exactly the same kind, we might be able to treat them similarly.
If the return block is not already a canonical merged return / block, then split it.
If the two conformances come from the same file, pick the first context in the file.
If the two generic signatures are identical, neither is as specialized as the other.
If the witness and the potential witness are not the same, there's no ordering here.
If there is a code completion token right after the '(', do a special case callback.
If there is a setter, check that the property it implies matches that of the getter.
If there is a type that we're expected to convert to, add the conversion constraint.
If there is an existing cast with the same arguments, indicate we cannot improve it.
If this class doesn't use Swift-native reference counting, use objc_release instead.
If this comes from an inner element, move the appropriate inner element values over.
If this is a mutable 'var', and it was never written to, suggest upgrading to 'let'.
If this is an epilogue release and we are freezing epilogue release simply continue.
If this is an exact source, and it's an interesting type, add this as a fulfillment.
If this potential archetype was renamed due to typo correction, complain and fix it.
If this result is not from the current module, try to get a popularity score for it.
If we are asked to treat ref count increments as being inert, return None for these.
If we can satisfy the tuple type by breaking up the aggregate initialization, do so.
If we ever detect a conflicting element, we record it and do not look at the result.
If we have a Clang declaration, look at it to determine the effective Clang context.
If we have a generic type, bind the type to the archetypes in the type's definition.
If we have seen a field and thus the FoundNonTrivialField flag is set, return false.
If we have the rebind_self_in_constructor_expr, then the call is the sub-expression.
If we reach here, takenBlk cannot be merged into block as it has other predecessors.
If when analyzing, we found a user that makes our optimization, illegal, bail early.
Ignore unknown types, so that an older swiftc can be used with a newer build system.
In PHP 7 mode doubles only convert to integers when the conversion is non- narrowing
In a few cases, an existing array (different than the source array) may be returned.
In addition to pushing it onto the stack, we are also storing it in the AFWH object.
In an if-let, the actual type of the expression is Optional of whatever was written.
In case we were called by a jitted FCallAwait, let it know that we finished eagerly.
In the case / we are the function level loop, these will of course be empty anyways.
In the first 2 cases, the coder probably forgot a cast and expected a concrete type.
In this convention, the caller creates a local copy before passing it to the callee.
Infer associated type witnesses for the given tentative / requirement/witness match.
Initialize worklist to contain the entry block, and set up all the BlockInfo rpoIds.
Invariant: for every block in the work queue, we have visited all of its dominators.
It should be impossible to have two operands with different encodings at this point.
IterInit and IterNext can be called directly from the JIT for specialized iterators.
Its operand must be an i1 that has a different lifetime from any ref counted object.
Just accept 'source.request.buildsettings.register' for now, don't do anything else.
Keep track of whether there is a Store, InOutUse, or Escape locally in / this block.
LLDB creates implicit BraceStmts which contain a mix of generated/user-written code.
Leap years can be from 383 to 385 days and common years can be from 353 to 355 days.
Look for an instance property of the given nominal type that's / known to be stored.
Map from EHEnt to the ExnNode that will represent exception behavior in that region.
NSError or CFError references can be adopted directly as ErrorProtocol existentials.
No explicit name and no linkage name to use, so we have to try to infer one ourself.
Note that for String before you return to PHP you need to copy it into HPHP::String.
Note: We can't use tryLoc here because that's outside the ReturnStmt's source range.
Note: if the local is already TRef, we could try to leave it alone, but not for now.
Ok, now we know that we are able to emit our base at guaranteed plus zero emit base.
Or it is somewhere above the entry block, then we can leave the / instruction there.
Otherwise, just report that they are block special files and go on to the next file.
Otherwise, there may be an external retroactive conformance that allows the binding.
Otherwise, we need to replace the assignment with the full load/store/release dance.
Otherwise, we're not sure what is going on, but this doesn't smell like a parameter.
Perform a dynamic class of some sort of class instance to some / sort of class type.
Post-1.0, we'll need to remove this hack in favor of richer constraint declarations.
Prepare an Initialization that will initialize the result of the / current function.
Print out the given DIE (including children) in textual format to the given ostream.
Propagate the elements of array values to calls of the array's get_element / method.
Pure Clang modules are tied to their dependencies, no need to look into its imports.
RawPointers do not have ownership semantics, so the cleanup on the argument remains.
Record that we've reported this unreachable block to avoid duplicates in the future.
Recover from all of the clauses failing to parse by returning a normal do-statement.
Remeber this thread's VM ThreadInfo so we can find it later via isThreadDebugging().
Replace any other type variable with the archetype within the requirement's context.
Resumable object, prefixed by a ResumableNode header, which is what we need to mark.
Return all recursive users of V, looking through users which propagate / RCIdentity.
Return the number of tag values represented with extra / inhabitants in the payload.
Return the set of clusters that are left, which are the ones that didn't get merged.
Return the type that a parameter to a builtin function is supposed to be coerced to.
Returns an exception to propagate, or nulltpr if the VM execution should be resumed.
Returns the innermost node containing the target range that matches / the predicate.
Run the transforms by alternating between function transforms and module transforms.
See the docs above in "Effects of Pure Stores on Memory Support" for an explanation.
See the documentation for exceptionStackBoundary in the header for more information.
Shapes may not have leading integers in key names, considered as a parse time error.
Simultaneously, BC markers in these exit blocks are updated to reference the new FP.
Skips leading underscores in either name, and skips a repeated word at the boundary.
Some cases might get assigned state numbers but not actually occur in the try block.
Special case: if it is a 0-to-count loop, we know that the count cannot be negative.
State for one entry on the FPI stack which corresponds to one call-site in progress.
Statistics for why we couldn't infer in more specific ways, and fell back to methods
TODO: For now, we leave invalid casts in address form so that the runtime will trap.
TODO: I am currently just disabling this behavior so we can get this out for Seed 5.
TODO: This is probably wrong for varargs, e.g. calling "print" with the wrong label.
TODO: Translate from the diagnostic info to the SourceManager location if available.
TODO: in conditional conformances, allocate space for the assumed conformances here.
TODO: this error message is unhelpful if the format string is not one character long
Test that All acts like the top element in the lattice with respect to intersection.
The ARC passes will remove references to the function when they're no longer needed.
The StackPromoter acts as a "graph" for which the post-dominator-tree is calculated.
The cleanup we pushed to deallocate the local variable before it / gets initialized.
The conservative scans may have added more items to the worklist, so drain it again.
The following fields of cursor are used: - ns - opts - skip - limit - query - fields
The function has no unidentified releases, so let's look at the arguments in detail.
The goal is to obtain an order that improves locality when the function is executed.
The hint was self or parent and there's no corresponding class for the current func.
The instruction can be legally replaced with a Jmp to either its next or taken edge.
The maximum number of functions we'll optimize without popping any off the worklist.
The number of iterations that can be caused by this is bounded by the nesting depth.
The result from those instructions may be used as inputs to additional instructions.
The safety of this assumes that neither this release nor any of the loads can throw.
The tier-based command line overwrites will already have been set in the call above.
The type of a tuple expression is simply a tuple of the types of its subexpressions.
The version of brotli we are using does implement these helper methods that we need.
Then the mean color in each remaining box becomes one of the possible output colors.
There are multiple children and they have the same base, but empty projection paths.
There is at least one projection path that leads to a type with reference semantics.
Therefore, we only enforce the maximum access if the extension has a 'where' clause.
Therefore, we will reprocess FooSomeEnumeration at the end, once "Foo" is available.
These are placed last because they become the first curry level of the SIL function.
These optimizations differ enough from both DCE and PDCE to require a separate pass.
These probably are generally string keys and this should probably be ArrayInit::Map.
This avoids issues where Builtin types end up on expr nodes and pollute diagnostics.
This block executes whenever we want to treat the fault as if it was freshly thrown.
This can relocate it if it wasn't allocated with swift_allocateGenericClassMetadata.
This destroys the position numbering, so we can't use interval positions after this.
This ensures that splitAllCriticalEdges() will not invalidate our predecessor lists.
This ensures we only ever recompute post dominating releases on the first iteration.
This file implements a default caching implementation that never evicts its entries.
This helps to avoid 'widening' the favored type to the default type for the literal.
This increments the string's refcount twice, once for the key and once for the value
This is O(N), but so is Dequeue on a mixed array, because it needs to renumber keys.
This is an artifact of a time when we did not spill registers onto the native stack.
This is because MongoDB wants the name of the command as first element in the array.
This is like C++ / move-initialization, except the old object will not be destroyed.
This is needed in case we converted some indirect parameters/results to direct ones.
This means we have to copy the section into a temporary file and then dlopen() that.
This means we have to pessimize public static property types for the entire program.
This only makes sense because we're not trying to fulfill associated types this way.
This should always be a child of an ApplyExpr and so will be emitted by SILGenApply.
This type is a template which should not be instantiated on any req allocated types.
To accomplish this it / relies on knowledge of all array operations within the loop.
To conform to PHP5 behavior, the pop operation resets the array's internal iterator.
To force the compressor stop at the byte boundary one can write an empty meta-block.
Type failures in here will generally not cause type failures in the 'catch' clauses.
Type-check paren patterns by checking the sub-pattern and propagating that type out.
Unless the client has disabled them, perform syntactic checks on the expression now.
Update UnhandledOnceCallee and InitializerCount by going through all "once" / calls.
Update the hashtable to reflect the fact that everything was moved over one position
Updates the breakpoint list in the proxy with the new list received from the client.
Use an array to initialize the Set only if all the following conditional are met: 1.
Use the magic __getInstanceSizeAndAlignMask method if we can see a declaration of it
User did not import the library module that contains the type we want to substitute.
Visit the protocols inherited by this protocol, adding them as implied conformances.
We always need to reset the insertion point in case we delete the first instruction.
We analyze the body of globalinit_func to see if it can be statically / initialized.
We assume that there's no interesting reabstraction here beyond a layer of optional.
We can't generate direct StLoc and LdLocs in pseudomains (violates an IR invariant).
We consume refs on a2 and also produce references, so there's no need to inc/dec a2.
We do this after visiting all users to ensure we don't invalidate the uses iterator.
We don't care about exception handlers in resumables being driven at the same level.
We don't expect it to be already there, but it has been observed during development.
We don't handle these two cases, because we don't compile functions containing them:
We have cases where we statically know the type but need the value from native call.
We make this function bare so we don't have to worry about decls in the SILArgument.
We may have pushed IncRefs past CheckTypes, which could allow us to specialize them.
We need to be able to perform unqualified lookup into the given declaration context.
We need to update SSA if a value duplicated is used outside of the duplicated block.
We preregister all the labels occurring in the provided statement ahead of the time.
We should have another way to specify a build record and where to put intermediates.
We use casts where findAllNonFailureExitBBs should have made sure that this is true.
We use line1 here because it works better than line0 in our bytecode-source mapping.
We visit the loop nest inside out via a depth first, post order using this worklist.
When inserting the leaf node, stop inheriting the "allow" value from ancestor nodes.
When the request ends, destroy all remaining Zend resource wrappers by freeing them.
When we already have some bits in our internal buffer concatenate both inputs first.
When we have a rope buffer, could be implemented in terms of getLocOffsetInBuffer().
Whoever updates highest_ever is responsible for hinting all the intervening regions.
XAP: Extensible Authoring Publishing, obsoleted by XMP: Extensible Metadata Platform
Zend deletes properties here, but we delete properties in the ObjectData destructor.
a constant for arrayobjects that changes the way the array is converted to an object
anonymous namespace This is a separate function so that it shows up in stack traces.
appendWithRef bumps the refcount to compensate for the eventual decref of arrayArgs.
checkType(ty, fail): verify that the param is of type ty, and branch to fail if not.
ctx is a pointer to some context information that will be passed through to tryFile.
end anonymous namespace / Emit global structures associated with the given protocol.
end anonymous namespace / Returns true if this particular ValueDecl is overloadable.
getLocalValue - Get a reference to a local value with the specified name / and type.
no_read becomes 2 in the second pass, and if this is nonblocking, we should return..
php5 xdebug doesn't do anything in this case, but we should probably notify the user
php5 xdebug only accepts multiple breakpoints of the same type for line breakpoints.
re-negotiation, or perhaps the SSL layer needs more packets: retry in next iteration
str_replace() reduces all the valid combinations to multiple string_replace() calls.
(This means all offsets in the FPI region will have the partial ActRec on the stack.)
(size + 1 because the size-th character might be the beginning of a grapheme cluster)
- Passing a structural type should remove the need to pass its components separately.
...or to a representative dependent type that was in turn equated to a concrete type.
/ / FIXME: This is only necessary due to our broken model for factory / initializers.
/ / If this expression isn't a ClosureExpr or isn't convertible, this returns / null.
/ There is no need for the caller to explicitly traverse the children / of this node.
414-424) by Dale Schumacher  Additional changes by Ray Gardener, Daylon Graphics Ltd.
A (case-insensitive) map from class method names to the php::Func associated with it.
A RAII-ish object for forwarding a bunch of arguments down to one / side of a branch.
A block in the loop is guaranteed to be executed if it dominates the exiting / block.
A non-failable initializer requirement cannot be satisfied by a failable initializer.
A placeholder may have any type, but default to Void type if otherwise unconstrained.
A return value of nullptr indicates that all possible completions have been returned.
AST type of the base expression, in case the accessor call / requires re-abstraction.
Add a stack slot that was copy-initialized from the inout on entry / to the analysis.
Add successor blocks to the worklist since their predecessor list is about to change.
Add the attributes here so if we need them while parsing the body they are available.
After all, we're not really supposed to rework JPEGs and write them out again anyway.
All function types have the same layout regardless of arguments or abstraction level.
All other licensing and usage conditions are those of the Apache Software Foundation.
All uses that weren't dealt with in side exiting traces need to be handled specially.
AllocRef* are always allocating new classes so they are introducing new values at +1.
Alright, the retain is 'available' for merging with a release from a successor block.
An adapter that turns a metadata layout class into a foreign metadata / layout class.
An option has been passed which requires a module, but the user hasn't requested one.
Analyse canonical induction variables in a loop to find their start and end / values.
Analyze an instruction that operates on the Address of a backward propagated / value.
Any particular type can be part of multiple indexed types but with different actions.
Array get_element calls and their matching array element value for later replacement.
As such, we have to push the releases up the CFG to where the / value is initialized.
Assign from the local variable to the inout address with an 'autogenerated' copyaddr.
At that stage, this code will have to change, as well as other parts of the debugger.
At various points we may walk the rbp chain to do such things as generate backtraces.
Because PHP is insane you can have a use variable with the same name as a param name.
Borrow the mangling scheme from reabstraction thunks, which is what we are in spirit.
But if the func has been removed from the AtomicHashMap, we don't want to process it.
Calculate how many bytes are needed to convert an UTF16 string into UTF8 UTF16 string
Change the immediate dominator for children of the successor to be the current block.
Check before the string, we have to be careful not to go off the front of the buffer.
Check each of our immediate children to see if any of them are independently invalid.
Check for conformances for the type that apply to the original substituted archetype.
Check if a given let property can be removed, because it is not accessible elsewhere.
Check if we have already associated this apply inst with a closure to be specialized.
Check representations only for the top-level metatypes as only those are SIL-lowered.
Check the uses of the operand, but do not recurse down into other apply instructions.
Check whether the given function is generic over a single, / unconstrained archetype.
Check whether we can hoist make_mutable based on the operations that are in the loop.
Checking the function parameter patterns might (recursively) end up setting the type.
Class existentials consist of a single retainable pointer followed by witness tables.
Clean the graphs up, so they're easier to pattern match against in the optimize pass.
Closures can't be rethrowing-only unless they're defined within the rethrows context.
Comparisons against the empty string can be optimized to checks on the string length.
Conformance to Equatable and Hashable is implied by being a "simple" no-payload enum.
Connection flags (connection_flags) are MONGO_CON_TYPE_READ and MONGO_CON_TYPE_WRITE.
Constructs a type info which performs simple loads and stores of / the given IR type.
Continue processing in case this increment could be a CanUse for a different pointer.
Convert the literal to the non-builtin argument type via the builtin protocol, first.
Copy NewNodes onto the back of our Worklist now that we have finished this iteration.
Copy the closure's use variables from the closure object's properties onto the stack.
Create an unreachable block for the default if the original SIL instruction had none.
Create the appropriate SIL function type for the given formal type / and conventions.
Defer enforcement of requirements until the creation of the class happens at runtime.
Delay processing of platform until later, after we have parsed more of the attribute.
Depending on whether we want a read or a write connection, run the correct algorithms
Determine the size and alignment of an ErrorProtocol box containing the given / type.
Determine whether or not a given NominalTypeDecl has a failable / initializer member.
Determine whether we are at the start of a parameter name when / parsing a parameter.
Disable semantic info in the editor for the given amount, to avoid repeated crashers.
Each DIE has a tag, which describes what kind of DIE it is, and a list of attributes.
Eliminate this AssertTypeOp if the source value is another assert that's good enough.
Enum element constructors are always emitted by need, so don't need delayed emission.
Erasure to a Swift protocol always captures the type metadata from its subexpression.
Extensions of generic ObjC functions can't use generic parameters from their context.
Extract the payload-discriminating tag from a payload and optional / extra tag value.
FIXME: There are unfortunate inconsistencies in the treatment of generic param decls.
FIXME: This has to be cleaned up on the Clang side before we can improve things here.
FIXME: This logic has been duplicated from CompilerInvocation::setMainExecutablePath.
FIXME: We could import specializations, but perhaps only as unnamed structural types.
FIXME: We ought to prefer operators elsewhere in this module before we check imports.
First, collect current available locations and their corresponding values into a map.
Flat out, if we need more space than the buffer provides, we always have to allocate.
For a type with dependent conformance, just return the requirement from the protocol.
For local DCE, we have to assume all variables are in the live-out set for the block.
For now directly reference the class object, which is totally wrong for ObjC interop.
For now we add all the edges, although we might be able to be less pessimistic later.
For now we use UnqualifiedLookup to fetch other declarations with the same base name.
For the sign of the final result to be set, only one of Left or Right should be true.
From this the length of the year can be determined and thus the length of each month.
Functions that return non-optional reference type and were imported from Objective-C.
Get the payload and extra tag (if any) parts of the discriminator for a no-data case.
Gets the entry for a SIL value, e.g. an array-value or a tuple containing / an array.
Given an object type, check if any template parameters are a pointer followable type.
Go through all SILVTables in SILMod and write them if we should serialize everything.
Go to the (nparams + 1)-th prologue, which is always the "too many args" entry point.
Handle hex numbers str is used instead of ptr to disallow signs and keep old behavior
Hook called from exception unwind to signal that we are about to handle an exception.
If a basic / block is the target of such a back edge we will identify it as a header.
If an element is known to be uninitialized, then we know we can completely ignore it.
If it is an assignment, / a live-in value can be provided to optimize out the reload.
If it isn't, we actually need to retain it, because we've still got a release active.
If it's a function with a parameter with leading underscore, it's a private function.
If not there, the inherited conformance must be available through one of our parents.
If our payload is trivial, we do not need to insert any retain or release operations.
If part of the locations have covering values, / find the values in its predecessors.
If the behavior couldn't be resolved during validation, we can't really do much more.
If the call is naturally to memory, emit it that way and then explode that temporary.
If the explosion must be passed indirectly, load the value from the indirect address.
If the function being called is not our unresolved initializer reference, we're done.
If the pattern is typed as optional (or tuples thereof), it is default initializable.
If the tuple element starts with "ident :", then it is followed by a type annotation.
If the type of the captured argument is trivial, pass the argument as Direct_Unowned.
If the type variable isn't one for which we should be looking at the bindings, don't.
If the underlying objects are not aliased, the projected values are also not aliased.
If there aren't, then just delete the block - it / turns out to have not been needed.
If there hasn't yet been a value stored here, we can use the adjusted value directly.
If there is an unconditionally executed call to the same array we can still hoist it.
If there's a remaining count on this cmd then we want it left installed in the proxy.
If this access stores something of non-trivial type, then keep track of it for later.
If this function has a self parameter, make sure that it has a +0 calling convention.
If this function is part of the caller's scope length take the caller's scope length.
If this instruction has side effects, but is inert from a store perspective, skip it.
If this is a class type, we also have reached the end of the type tree for this type.
If this is an accessor, check if the transparent attribute was set on the value decl.
If this is an init(), explicitly walk the initializer values for members of the type.
If this is called in the middle of a flow command we short-circuit the other commands
If we already emitted this witness table, we don't need to track the fact we need it.
If we can't resolve the associated type during this iteration, try again on the next.
If we have a protocol with a default type, look for alternative types to the default.
If we have reached this point, all attempts to do simple simplifications have failed.
If we only care about a subset, and this type variable isn't in that subset, skip it.
If we parsed something valid, diagnose it with a fixit to rewrite it to Swift syntax.
If we're allowed to do a conservative check, try to just use the global class symbol.
If we're connected to a machine that is attached to a sandbox, then we'll have an ID.
If we're in a generic type context, provide interface types for all of the variables.
Important: null out the pointer in the resource table before destroying the resource.
In a default argument, skip immediately out of both the initializer and the function.
In all cases, when you get here, the value and location stacks have just been pushed.
In swift it is legal to cast non reference-counted references into object references.
Indexing is not using documentation now, so don't open the module documentation file.
Insert the given basic block after the IP block and move the / insertion point to it.
Instead, it performs the matching comparison against a primitive type (usually bool).
Instructions that unconditionally are implemented with InterpOne are translated here.
Instructions which require a FramePtr for chaining but will accept a parent FramePtr.
It is okay for an identified loop to have releases in between a retain and a release.
It might be an object, or we might want to support type aliases in HNI at some point.
Iterators over collections are never by-ref so there is no reason to unbox any value.
Just before the output option, allow GenericUnix toolchains to add additional inputs.
Leave the cleanup on the original value since we don't know anything about it's type.
Let's see if we can find a previous loaded, stored value to use instead of this load.
Load data and emit a new vasm depending if the Immed fits a direct ppc64 instruction.
Look for InlineReturn instructions that are the only "non-weak" use of a DefInlineFP.
Loop over each of the new decls, processing them, adding them back to the Decls list.
Mark the given declaration as being Objective-C compatible (or / not) as appropriate.
Might be different from the substituted argument type by abstraction and/or bridging.
Mock up a value witness table for Builtin.Int8 will 254 and 255 as extra inhabitants.
Multiple preds define different FPs which will require a DefLabel to phi them in succ
NOTE: no check on duplication because we assume the original array has no duplication
Note that this can't affect self props, because static properties can never be unset.
Now that we have a sorted precedence of constraints to diagnose, charge through them.
Now that we know the minimum closeness, remove all the elements that aren't as close.
ObjC methods take their 'self' argument first, followed by an implicit _cmd argument.
Objects can contain a property with NaN, so only equality comparisons can be negated.
Okay, if we got here, the instruction can be eaten so-long as all of its uses can be.
On failure, we unwind any active cleanups, on success we fall through to a new block.
On this error, the receiver side returns dummy errno, use the sender side errno here.
Only report line terminators if we find one other than LF, or if we find none at all.
Otherwise LLVM would remove the definition (if it's not referenced in the same file).
Otherwise we do a linear search through the cases calling string conversion routines.
Otherwise we're storing a ResourceData instance, so just release our reference to it.
Otherwise, if it is a remapping we can't handle, don't try to compute a substitution.
Otherwise, lower the substituted type using the abstraction patterns of the original.
Otherwise, the result will / have type pointerToDefaultType and may involve bitcasts.
Otherwise, use generic witnesses (when we can't pattern-match into something better).
Perform optimizations on instructions in `unit' at which no flags registers are live.
Perform xorqi move only the byte result to the destination, keeping the higher 56bits
Postpone complaining about this error till we see if the  DCC wants to move it below.
Printing substrings requires an additional copy operation, so do it only if necessary
Properties that have storage and accessors are frequently accessed through accessors.
Provide output indicating this command was skipped if parseable output was requested.
Reabstract to the most general abstraction, and put it into a temporary if necessary.
Reached the end of the basic block, update the ForwardValOut with the / ForwardValIn.
Relabel R/G/B as components 0/1/2, respecting the RGB ordering defined in jmorecfg.h.
Remap the PNG palette to put the entries with interesting alpha channel values first.
Remove the original constraint from the inactive constraint list and add the new one.
Rename functions with public_external linkage to prevent symbol conflict with stdlib.
Replace the ith BB argument with a new one with type Ty (and optional / ValueDecl D).
Replaces all get-property calls, which we can prove to be true, with / true-literals.
Represents an ObjC method reference that will be invoked by a form of / objc_msgSend.
Reproduce the DiagIDs, as we want both the size and access to the raw ids themselves.
Req nodes mean the reference count of the object may be observed, up to some "level".
RequestURI needs script_filename and path_translated to not include the document root
Require all stores to be into the array storage not the array object, otherwise bail.
Return the deallocate stack instructions corresponding to the given / AllocStackInst.
Return true if the argument of a CallExpr (or related node) has a trailing / closure.
Returns true iff a request to the given path should be delegated to the proxy origin.
See the way we set up the timer group and cancellation handler in setTimeout() below.
Set a value range on the load instruction, which must be the argument of the builtin.
Set the underlying type of each of the associated types to the appropriate archetype.
Setup the input buffer state to scan directly from a user-specified character buffer.
Should wait for the new AST, because the cursor location points to a different token.
Since we can now execute the relocated code, its ok to start fixing these things now.
So we can read anything anywhere on the eval stack above the call's entry depth here.
Stash a pointer to the VM Classes for stdclass, Exception, pinitSentinel and resource
Suppress the import of this method when the corresponding property is not suppressed.
TODO: For private types or protocols, we might be able to definitively deny bindings.
TODO: Should apply the default arg generator's captures, but Sema doesn't track them.
TODO: Should have a more efficient way to copy payload nondestructively from an enum.
TODO: We may want to delete debug instructions to allow us to sink more instructions.
TODO: We might be able to form a nicer schema if the payload elements share a schema.
The ar that we're looking for is the ar of the delegate generator, so grab that here.
The elements are assigned discriminators ABI-compatible with their raw values from C.
The main thread's native stack may be larger than desired if set_stack_size() failed.
The metadata might be for a non-class type, which wouldn't have an ObjC class object.
The new Julian calendar set fixed lengths for the months, abandoning the lunar cycle.
The optimize pass requires that critical edges be split prior to processing the unit.
The quality parameter for Wbmp stands for the threshold when called from image2wbmp()
The source of the store is a load from the same address, which is also in this block.
The string is modified in place, so there shouldn't be more than one reference to it.
The suffix layout will be applied contiguously on the remaining portion of the block.
The type-info class for ObjC blocks, which are represented by an ObjC / heap pointer.
Then all the other sets that May-Alias S must have their lower bound reduced as well.
There is an extra node on the end of the offsets to allow this routine to work right.
Therefore, we ensure that only one store per block is present in the StoredLocations.
These instructions return pointers to memory which can't be a destination of a store.
They may not unlink the block containing the CheckType instruction they are visiting.
This can be turned into an assert again once we have guaranteed preheader insertions.
This class provides an interface to target-dependent attributes of interest to Swift.
This copy will have its ownership in the 1:1 corresponding ZendUserIniData structure.
This file implements several Swift-specific implementations of PrettyStackTraceEntry.
This implementation is copied here to avoid a new dependency on compiler-rt on Linux.
This is a helper class that performs optimization of string literals / concatenation.
This is computed by the successor having a greater / post order number than the exit.
This is implemented via a TVCoercionException, which is not a user-visible exception.
This is mostly a lie -- we don't use zend_fcall_info_cache, so don't set its members.
This is really an implicit 'init' MemberRef, so point at the base, i.e. the TypeExpr.
This is so a reference to the file can be stored in an XML context object as a void*.
This led to a lot of code relying on accessing properties that were improperly cased.
This may need modifications after we allow php values to span calls in SSA registers.
This means that there is a single-branch block for each enum case which branch to BB.
This module supports the implementation of two region selectors: hotcfg and wholecfg.
This predicts that subsequent executions will go the same way as the first execution.
This processes one or more 64-byte data blocks, but does NOT update the bit counters.
This throws an error for the following cases: 1) "self" or "parent" in any namespace.
This will warn, error, or do nothing depending on what the user chose for the option.
Three supported cases: - metatype to metatype - metatype to object - object to object
Thus all we need to do is gather up the interesting instructions from our subregions.
Try to return the physical register that would coalesce `ivl' with its hinted source.
Tuple value witness tables are instantiated by the runtime along with their metadata.
UnresolvedType is a placeholder for an unknown type used when generating diagnostics.
Update the SrcKeys used in fixup maps to be relative to the Func* in the live ActRec.
Verify that the mutating bit is correct between a protocol requirement and a witness.
Walk the pattern, to check to see if any of the VarDecls included in it have storage.
We allow a type to conform to a protocol that is less available than the type itself.
We are reallying on C++11's guaranteed of thread safe static variable initialization.
We assume conformances in non-SourceFiles have already been checked for availability.
We can never have associated strong iterators, so we don't need to do anything extra.
We do lock the slow path because the SectionsToScan data structure is not concurrent.
We don't care which failure it was, it just failed and the error_message has been set
We don't want to exit here with a dead cleanup on the stack, so push the scope first.
We need the length of the year to figure this out, so find Tishri 1 of the next year.
We should be able to use DECLARE_FRAME_POINTER here, but that fails inside templates.
We should implement our own version that we can rely on to continue to work that way.
We still want to respect the global translation limit and other restrictions, though.
We treat the declaration as deprecated if it is deprecated on all deployment targets.
We're about to resume executing our generator, so make sure we're in the right state.
While walking over the blocks in layout order, we track the set of "active" exnNodes.
Win XP specific, Unicode, not to be confused with SubjectDistance and SubjectLocation
emitConvertSecondToCell() should never be used for symbolic flavors other than C or L
end anonymous namespace / If we find the specified diagnostic in the list, return it.
end anonymous namespace / Used to deserialize entries in the on-disk decl hash table.
fixupBlockJumps() breaks the given block after any jccs, making the unit valid again.
flag for full add operation so ldap_mod_add can be put back into oper, gerrit THomson
hitIntKey() should only be called on an Elm that is referenced by a hash table entry.
https://wiki.php.net/rfc/remove_php4_constructors Check for PHP 4 style constructors.
processInOutValue - Walk the use-def list of the inout argument to find uses / of it.
static func declarations in classes are synonyms for `class final func` declarations.
the fetch method takes precedence so figure it out after we've added the OAuth params
the unit was not committed to the Repo, probably because another thread did it first.
when we hit an existing break, copy to new buffer, and fix up laststart and lastspace
"try" cannot actually start any statements, but we parse it there for better recovery.
'.' cannot appear in the middle of an operator unless the operator started with a '.'.
(This assumes that the word doesn't end with a prefix of itself, e.g. "LikeableLike".)
(We will probably either change it to be per-RCState later or fix the alias handling.)
/ / The returned array value is known not to be aliased since it was just / allocated.
/ / Therefore, we only honor abstraction patterns on thick or / polymorphic functions.
/ / This relies on substitution correctly setting wasAbstract() on / MetatypeTypeRefs.
/ / Values should be forwarded down the decision tree with the / appropriate cleanups.
/ Returns the address of the uninitialized fixed-size buffer for the concrete / value.
@llvm.used Collect llvm.used globals already in the module (coming from ClangCodeGen).
A CRTP ASTWalker implementation that looks for interesting / nodes for error handling.
A full box metadata is non-type heap metadata for a heap allocation of a single value.
A helper class for working with existential types that can be / exploded into scalars.
A noreturn source function can be cast to a returning target type, but not vice versa.
A pair of the array pointer and the array check kind (kCheckIndex or kCheckSubscript).
A type implementation for address-only reference storage of / class existential types.
A typed value is expressed by 4 IDs: TypeID, TypeCategory, ValueID, ValueResultNumber.
After cloning this edge will become critical if it came from inside the cloned region.
All new Creates will overwrite the SharedStringData* in the slot and not use this one.
Although getDataTypeString also handles the null type, it returns "null" (lower case).
An accessor function might still be necessary even if the witness table can be shared.
An iterator on Regions that first iterates over subregions and then over / successors.
Analyze the assigned value and check if it is a constant statically known initializer.
Any loop that contains another loop's header block also contains its pre-header block.
Arrays are safe if there is no function call that could mutate their size in the loop.
As a debugging hack, print the instruction itself if there is no location information.
As with other optimizations a mandatory DCE must be performed after the module is run.
Ask the runtime to do our layout using the payload metadata and number of empty cases.
Attach an objc_runtime_name attribute with the Objective-C name to use for this class.
Beware, if the data has been truncated, the final CR could have been followed by a LF.
Bit 0 is reserved to indicate whether or not the rest of the bits are initialized yet.
Build refinement contexts, if necessary, for all declarations starting with StartElem.
Build the module name path (in reverse), which we use to build the name of the buffer.
Calling lookupConformance on a BoundGenericType will return a specialized conformance.
Cannot return an optional bridged type, because 'nil' is reserved to indicate failure.
Check if the case values directly map to the tag values, maybe with a constant offset.
Check if the cond_fail has the same condition as the cond_br in the predecessor block.
Check that the archetype isn't constrained in a way that makes the binding impossible.
Check that the offset is within the region and it lands on an exact instruction start.
Check the running OS version to determine whether it is in the range specified by elt.
Check whether we've already created a subscript operation for this getter/setter pair.
Child is the AFWH we're going to block on, nullptr iff this is a suspending generator.
Classify a throwing function according to our local knowledge of / its implementation.
Code executed at the beginning of each rule, after yytext and yyleng have been set up.
Collect a full candidate list of callees based on the partially type checked function.
Collect all generic params referenced in parameter types, return type or requirements.
Compare this signature against the signature of other declarations with the same name.
Compute a mapping of an object type's offset to its location in the m_all_objs vector.
Compute cactiveLimit based on s_cactiveLimitCeiling, as computed in threadStatsInit().
Compute the allocating and initializing constructor types for / the given constructor.
Copies code from the standard library into the user program to enable / optimizations.
Create a SILArgument and store its value into the given Initialization, / if not null.
Declarations that were derived on behalf of types in Clang modules get shared linkage.
Dependencies of the stdlib module (like SwiftShims module) are implementation details.
Determine if the server needs us to keep the channel open after the request completes.
Determine the kind of checked cast to perform from the given type to / the given type.
Do a round of CFG simplification, followed by peepholes, then more CFG simplification.
Do not inspect the body of types with unreferenced types such as bitfields and unions.
Don't override the transparency or linkage of a function with an existing declaration.
Don't send onComplete() more than once (required because of the eom flag on sendImpl).
Drop any pending signal since we're about to start processing interrupts again anyway.
Emit a value-witness table for the given type, which is assumed to / be non-dependent.
Emit code to instantiate the new anonymous class, with the use variables as arguments.
Emits an error with a fixit for the case of unnecessary cast over a / OptionSet value.
Evaluate the condition with the false edge leading directly to the continuation block.
Except it's not really an invariant, because argument emission likes to lie sometimes.
Existential types don't need to conform, i.e., they only need to contain the protocol.
FB json_decode() options intentionally higher so when PHP adds more options we're fine
FIXME: Should pass the main module for the interface but currently it's not necessary.
FIXME: That's not correct if the user /just/ passed -emit-header and not -emit-module.
FIXME: The archetype builder should be doing this and mapping down to a concrete type.
FIXME: This is only because forceExternalDeclMembers() might do something interesting.
FIXME: This should apply to blocks as well, but Unmanaged is constrained to AnyObject.
Find the owner of this method and determine whether it is the class we're looking for.
Find the predecessor TransIDs along each non-back-edge predecessor of the loop header.
First, set the depth of each generic parameter, and add them to the archetype builder.
For Swift, we map the redefinition types back to the equivalent of the built-in types.
For anything else, if we completely failed to import the type abstractly, give up now.
For curried functions, 'throws' and 'noreturn' only applies to the innermost function.
For example, this may directly cast a single-payload enum to a NativeObject reference.
For now, we conservative only specialize if doing so can eliminate dynamic / dispatch.
For owning addressors, we can just let the owner get released at an appropriate point.
For the Self and Parent cases, we must always have a resolved class for the constraint
For the purposes of later type checker consumption, model this as returning an lvalue.
Form a trace of the async stack starting with the currently running generator, if any.
Functions can't be rethrowing-only unless they're defined within the rethrows context.
Get rid of the completely unreachable blocks, now that any arcs to/from them are gone.
Get the address of the global variable the protocol reference gets indirected through.
Get the original pointer value, abstracted to the converter function's expected level.
Get transitive closure of value captured by this function, and any captured functions.
Go through all the SILFunctions in SILMod and write out any mandatory function bodies.
Grab the breakpoint, ignore it if it is the wrong type or the classname doesn't match.
Handle accessors specially, they are mangled as modifiers on the accessed declaration.
Handle the common case where the caller passed two params (a callback and a container)
Handle the uncommon case where the caller passed a callback and two or more containers
Having an improper module name is only bad if we have inputs or if we're in REPL mode.
However, only Sig nodes can have multiple successors, so this situation doesn't apply.
If FindClass() has failed but no exception has been thrown, throw a default exception.
If a non-expression thing exists after the comma, then we don't know what is going on.
If an entry exists and its value equals pos, we increment it, otherwise we do nothing.
If any ancestor classes have generic parameters or field offset vectors, inherit them.
If both types are classes and dest is the superclass of src, simply perform an upcast.
If ctx is an ancestor of this, check if ctx has a private property with the same name.
If it ever needs to be emitted, it crashes the compiler because Sema missed something.
If it is a trunc to a signed value then sign bit should not be set to avoid overflows.
If it succeeds, then we win, but if it fails, we'll have to diagnose this another way.
If it's definitely not either kind of metatype, then we can report failure right away.
If one type is an implicitly unwrapped optional of the other, prefer the non-optional.
If so, increase the threshold, because inlining will (probably) eliminate the closure.
If so, we have an "if let" condition and we want to enforce some more structure on it.
If the URL refers to a folder but does not end with a slash, then we need to redictect
If the apply has no arguments, we don't need to worry about any guaranteed parameters.
If the closure's type was inferred to be noescape, then it doesn't need qualification.
If the decl belongs to an ObjC method family, use that family's ownership conventions.
If the final component has an abstraction change, introduce a reabstraction component.
If the im-pointer points to a brand new image, the cache gives out bogus colorindexes.
If the initializer is a C function imported as a member, there is no 'self' parameter.
If the new kind is the same as the existing kind, stick with the existing constructor.
If the number of argument labels does not match, these overrides cannot be compatible.
If the opcode that threw was a member instruction, we have to decref tvRef and tvRef2.
If the token after that isn't an argument label or ':', we don't have a compound name.
If there are any such parameters, remember where they start in the substitutions list.
If this is a zero-parameter initializer with a long selector name, form that selector.
If this is an OpaqueValueExpr that we've seen a mapping for, jump to the mapped value.
If this set has support bits, then the reverse map in the state is consistent with it.
If this was a subscript accessor, try to create a corresponding subscript declaration.
If unknown references don't exist, we can just use the same rules as regular pointers.
If we are referring into a protocol or extension thereof, the base type is the 'Self'.
If we did take the branch, we now rewrite the code so that the branch is straightened.
If we didn't change the fp for this block we don't need to re-process it's successors.
If we don't have this last case, be conservative and assume that we can use the value.
If we found a decl for the subscript, check to see if it is a set-only subscript decl.
If we found any lowercase letters, this was a normal camel case word (not an acronym).
If we found either a signal of a payloaded or a non-payloaded enum, return that value.
If we have a live 'live range' or a live range that we have not sen a copy into, bail.
If we have a mutable binding for a 'let', such as 'self' in an 'init' method, load it.
If we have a normal or inherited protocol conformance, look for its generic signature.
If we have a type but no initializer, check whether the type is default-initializable.
If we have an Objective-C property, print the class name along with the property name.
If we have no NoPayloadEnums, then we know that this Arg's RCIdentity must be FirstIV.
If we know that our base will stay alive, we can emit at +0 for a guaranteed consumer.
If we were able to find a method or function call, emit a diagnostic about the method.
If we're at the open brace of a NominalTypeDecl or ExtensionDecl, don't add an indent.
If we're binding an address to this let value, then we can use it as an address later.
If we're emitting this operation into the middle of existing code, we split the block.
In concrete terms, this means we can immediately evaluate the base down to an address.
Information to use for diagnosing failures when we don't have something more specific.
Instead / we store the branch's parent and the idx so that we can reconstruct the use.
Instead of producing these diagnostics, lets let the bigger issues get resolved first.
Intervals may be split---e.g., because the Vreg needed to be spilled in some subrange.
It cannot in of itself extend the lifetime of an object (just like a phi-node) cannot.
It is not used for the in-place / initialization of non-generic nominal type metadata.
It is priming, and there might not be the right class definitions for unserialization.
It then removes all / the old retain and release instructions and create the new ones.
It'd probably be cleaner to model as `where Self: ...` constraints when we have those.
It's a known attribute, so treat it as a syntactic attribute node for syntax coloring.
Iterate over the declarations and infer required availability on a per-platform basis.
Its live-out properties are whatever are trivially locally inferred by the loop above.
Just perform normal dot lookup on the type see if we find extensions or anything else.
Lay out the field, but don't provide the fill op, which we'll get from the superclass.
List of immediate bases which the "forbidden template" check should not be applied to.
List of types which should be ignored (including any bases) by the generated scanners.
Local function to produce a locator to refer to the ith element of the argument tuple.
Look backwards through the predecessor for the first ref count increment on EnumValue.
Look up the witness table associated with our protocol conformance from the SILModule.
Make sure that adding '-update-code' will permit accepting all arguments '-c' accepts.
Make sure that enums with different cases but the same value always compare different.
Make sure that if FTy's calling convention implies that it must have a self parameter.
Make sure we don't invalidate our iterators by parking it on the instruction before I.
Map from each class to all the closures that are allocated in functions of that class.
Map from source lines to a collection of all the bytecode ranges the line encompasses.
Mark self as being uninitialized so that DI knows where it is and how to check for it.
Meta info on the key local will confuse the translator (and wouldn't be useful anyway)
Mostly useful for platforms where the linker doesn't natively support autolinking (ie.
Move the iterator before we remove instructions to avoid iterator invalidation issues.
Move the iterator to the next instruction because we may sink the current instruction.
Nested type declarations can be accessed only with unqualified lookup or on metatypes.
Not clear that being smart is worth any trouble anyway --- large skips are infrequent.
Note that the Pred iterator may be invalidated (because we may add edges in the loop).
Note that we don't have to ask IRGen about element 0 because we know its size is zero.
Now that we know the substFnType, check if we assumed that we were passing self at +0.
Now that we know we can perform the rotation - move the instructions that need moving.
On these platforms convenience functions from xlocale.h interpret nullptr as C locale.
Once submodules are designed, this needs to support suffix matching and a search path.
Once we see one dv-initializer, every parameter after that must have a dv-initializer.
One possible solution would be to turn them into members and add conversion functions.
Only nothrow when we know it's a private declared property (and thus accessible here).
Otherwise check to see if this is a ConstructorRefExpr on a TypeExpr with sugar on it.
Otherwise, we found that the concrete type is recursive, complain and return an error.
Perform the proper conversions and then add it to the new parameter list for the type.
Print protocol 'Self' as a generic parameter so that it gets annotated in cursor info.
Protected constructor for subclasses to override the kind passed to the / super class.
Put the tokens into the symbol table, so that GDB and other debuggers know about them.
Queue up all of the diagnostics, allowing us to sort them and emit them in file order.
Related decls are generally overloads, so print parameter types to differentiate them.
Remove retain/release pairs around builtin "unsafeGuaranteed" instruction / sequences.
Remove this function as soon as we can / get rid of the llvm SwiftStackPromotion pass.
Replace all uses of the old load with the new bitcasted result and erase the old load.
Replace all uses of the retain instructions with our new retainN and then delete them.
Returns count of code points in input, substituting 1 code point per invalid sequence.
Returns false if any of the non-local successors of the region are not leaking blocks.
Returns the id of the translation containing the given address, or INVALID_ID if none.
Returns: 0 on success -1 on failure, but not critical enough to throw an exception 1..
Revert the types within the signature so it can be type-checked with archetypes below.
SILGenFunction destructor - called after the entire function's AST has been / visited.
So just account the length of our function scope in to the length of the CallerWeight.
So let's temporarily set our context to Handled so the catch body is allowed to throw.
Start processing TEST_SIZE number of requests at the same time with that many threads.
Strip trailing space from buf, saving end of line in case required for enclosure field
Substituting the parameter eliminates conformance constraints rooted in the parameter.
Suggest inserting '.dynamicType' to construct another object of the same dynamic type.
TODO: Refactor this code so the decision on whether or not to accept an / instruction.
TODO: We could golf this a little more by assuming the first type is a dependent type.
TODO: prove that some conversions to existential metatype will obviously succeed/fail.
Take the branch before setting locals if the iter is already empty, but after popping.
Test movzbl with high byte regs, avoiding destination registers that need a rex prefix
The ConsumedArgToEpilogueReleaseMatcher finds the final releases in the following way.
The archetype order here needs to be consistent with MetadataLayout::addGenericFields.
The caller will call this again with nullptr before destroying the given usage logger.
The existential container is class-constrained if any of its protocol constraints are.
The following StringRefs are owned by FuzzyStringMatcher and must outlive this object.
The following environment variables can be used to turn up the number of combinations.
The last two "parts" can at most be ARG_LIMIT and MSG_LIMIT which we need not examine.
The member reference is in a context where it will be turned into / an inout argument.
The most general resilience expansion which has knowledge of the declaration's layout.
The original 'phi' argument values are just the values coming from the preheader edge.
The position is not increased, we are just filling in the first 4 bytes with the size.
The set of witnesses that were considered when attempting to / infer associated types.
The state buf must be large enough to hold one state per character in the main buffer.
The unconditional_cast can be skipped, if the result of a cast is not used afterwards.
The witness can produce a 'nil' that won't be handled by / callers of the requirement.
Then insert a release in all non failure exit BBs if our partial apply was guaranteed.
This allows for better diagnostics, and keeps the closure expression type well-formed.
This assertion gets messed up by variadic methods that we've imported as non-variadic.
This can happen if this property is private or if it is internal and WMO mode is used.
This can help / to discover disjoint lifetimes and we can try to stitch them together.
This can obviously be problematic if the expression in question is not an application.
This enforces that m_blocks will be a topological order in case the region is acyclic.
This file implements implicit derivation of the RawRepresentable protocol for an enum.
This file implements the lookupVisibleDecls interface for visiting named declarations.
This file implements the swift::performTypeChecking entry point for semantic analysis.
This ignores the concrete types of the arguments, looking only at the argument labels.
This is a map from each partial apply to a set of indices of promotable box variables.
This is not strictly necessary, but it makes it easier to read the output from a dump.
This is the "newValue" name (for setters) followed by the index list (for subscripts).
This list is ordered so that for nested inlining the most nested return appears first.
This reads valueClass from the inputs so it used to need to happen after readMetaData.
To avoid dirtying memory, only write to the global ivar offset if it's actually wrong.
To implode an address-only tuple, we need to create a buffer to hold the result tuple.
True, if the whole method is alive, e.g. because it's class is visible / from outside.
Try to define a default case for enum_select based on the default case of enum_switch.
Try to derive the type from the copy_addr that was used to initialize the alloc_stack.
Unknown metadata sub-block, possibly for use by a future version of the module format.
Use an array to initialize the Map only when all the following conditional are met: 1.
Use the type as bridged to Objective-C unless the element type is itself a collection.
Use this special diagnostic if it's actually a reference type but just isn't Optional.
Using the basename makes the discriminator invariant across source checkout locations.
We assume writes are partial writes, so the result is always either Read or ReadWrite.
We can cheat here since we fill in constants a while after runtime options are loaded.
We could support this with compile-time string literals, but it's not yet implemented.
We currently never import C++ code, and we should be able to kill Expand before we do.
We don't update tracked local types for pseudomains, but we do care about stack types.
We have already compared the operands/types, so we should have equality at this point.
We have no reason to continue running the interpreter if there's no FPI region active.
We have to recompute the CFG and dominators because we changed things when we hoisted.
We keep an entry for each tracked SpillFrame in this map, so we can check its ALocBits
We keep the file handle open in order to ensure we can still write on request shutdown
We look through some simple things that get in between the overload set and the apply.
We need to make a stored rawValue or storage type, and a computed one of bridged type.
We only do this check while compiling, or if any of the magic files were not compiled.
We only need to do this if m_pos is nonzero and is not the canonical invalid position.
We set ad's internal cursor to point to the next element to conform with PHP5 behavior
We shouldn't try to coerce existential when there is no existential upcast to perform.
We translate each unit's filename to a canonical format, which is slow, but necessary.
We will have no choice but to anchor the release instructions in the successor blocks.
We will reset this value to the correct value once we return from the recursion below.
Where we have an unneeded phi node (i.e. all incoming values are the same / argument).
Whether there is an existing read-only subscript for which we have now found a setter.
While emitting bytecode, we keep track of where the DefCls opcodes for each class are.
Writes an in-memory decl table to an on-disk representation, using the / given layout.
asserting here to ensure that key is  a scalar type that can be converted to a string.
at this point, m_nvTable is destructed, and GlobalsArray has a dangling pointer to it.
call_user_func extensions Linked in via fb.json.idl for now - Need OptFunc solution...
continously running until /stop is received on admin server, or takeover is requested.
for each function, add DIE entries with information about name, line number, file, etc
if this function is from an unseen file, register file name and get index to file name
if we are in an API which issues a request token, there are is no token handler called
iter_value_cell* will store a copy of the current value at the address given by 'out'.
m_hasDeepInitProps indicates if there are properties that require deep initialization.
new_iter_array creates an iterator for the specified array iff the array is not empty.
only the strings "", and "0" convert to false, all other strings are converted to true
partial_apply without any substitutions or arguments is just a thin_to_thick_function.
php doesnt have an unset expression, but hphp's optimizations sometimes introduce them
simplifyBranchBlock - Simplify a basic block that ends with an unconditional / branch.
stk4's slot is immediately below stk3's range, but stk5 is the last slot of its range.
use -ve ids for translations we don't want to relocate (currently just profiling trs).
using special extension to treat redirects as regular document (requires patch in php)
val is teleported from the stack to the array, so we don't have to do any refcounting.
yield to allow other threads access to the machine spin-wait can starve other threads.
"if let" implicitly looks inside of an optional, so wrap it in an OptionalSome pattern.
'final' only makes sense in the context of a class declaration or a protocol extension.
(Cross-references to extensions are not allowed because they cannot be uniquely named.)
(Existential erasure could complicate this if we add that as a subtyping relationship.)
(Note that we're emitting backwards, so this correctly goes before* the error pointer.)
*NOTE* we are ok with both being shared since we do not have a shared_external linkage.
...then back to the requirement type using the abstraction pattern of the requirement..
/ (actively matched values) and enough initial capacity for the / given number of rows.
/ / To do so, we canonicalize LSLocations, i.e. traced back to the underlying / object.
/ Define a type 'swift::sma::TYPE_NAME' that is a "strong typedef" for / 'std::string'.
/ If we align them more, we'll need to introduce padding to / make protocol types work.
A bit vector for which the ith bit represents the ith refcounted root in / RCRootVault.
A guaranteed function argument is guaranteed to outlive the function we are processing.
A physical path component which projects out an opened archetype / from an existential.
Add a stack slot that was take-assigned to the inout from an exit BB / to the analysis.
Add any catch edges found, and stop at the first enclosing fault funclet, as in step 1.
Add the specified value as an operand of the PHI for the specified / predecessor block.
Adds a CFG edge from the unterminated NewRetBB to a merged "return" or / "throw" block.
After we do that we can move the notification code below back into the main loop above.
All of these just return true as they have already had their operands and types checked
Allow references to types as a part of: - member references T.foo, T.Type, T.self, etc.
Always use the Swift entry point, which will be a bridging thunk if we're calling ObjC.
Any path from this block to a Block that expects values must be from a Jmp instruciton.
As it holds references to request-allocated data, this leads to intermittent segfaults.
At this point, we know that the next thing should be a pattern to follow in the series.
Atomically swap in bi, but delete it if this this thread loses the initialization race.
Back up from the current location until we hit the beginning of a line (or the buffer).
Bind a tuple pattern by aggregating the component variables into a TupleInitialization.
Bitfields are currently never mapped, but that doesn't mean we don't have to copy them.
CALENDAR OVERVIEW  The Gregorian calendar is a modified version of the Julian calendar.
Capture the metadata and witness tables from this existential into the given archetype.
Check again after we have the lock, other threads may have already created a new chunk.
Check for the ErrorProtocol protocol conformance, which should be the only one we need.
Check if some of the predecessor blocks provide a constant for the cond_fail condition.
Check if tag is in a set of tags  states:  0 start tag 1 first non-whitespace char seen
Check to see if the stored location is either fully uninitialized or fully initialized.
Check whether we can hoist the dependent instructions resulting in the array reference.
Choose a register to allocate to `current', either via a hint or by various heuristics.
Classes, then functions, then constants mimics the order of our existing warmup scripts
Classify the part of speech of the word before the type information we would strip off.
Commands COMMAND(NAME, CLASS) NAME is the command name CLASS is the corresponding class
Compiles the given expression so that when evaluated the expression result is returned.
Compute the access path down to the field so we can determine precise def/use behavior.
Copy a value from one object to another based on the size in the / given type metadata.
Create an object that, when deallocated, stores the given value to / the given pointer.
Create one node for every parsed block, including NativeData and ResumableFrame blocks.
Deallocs are fine if we're not examining a function that the alloc_box was passed into.
Delegate the responsibility for freeing the buffer to the immutable copy, if it exists.
Derive a concrete type of self and conformance from the init_existential / instruction.
Determine the maximum depth of the current generic type context's generic / parameters.
Determine the relationship between the self types of the given declaration / contexts..
Devirtualize indirect calls to functions, turning them into direct function references.
Display the common root of the found completions and beep unless we found a unique one.
Display the predecessors ids sorted to give a stable use order in the printer's output.
Do not reclaim the symbols of the rule which action triggered this YYABORT or YYACCEPT.
Does inline semantics-functions (except "availability"), but not global-init functions.
Emit Objective-C method descriptors for the property accessors of the given / property.
Emit a struct_element_addr to get to the field, and then load the element as an rvalue.
Emit any lazy definitions (of globals or functions or whatever / else) that we require.
Emit the components of an Objective-C method descriptor for a / property getter method.
Ensure there are no other uses of alloc_box than the project_box and retains, releases.
Err on the side of caution and don't automatically add bang, which may lead to crashes.
Even if the pre-specialization exists already, try to preserve it if it is whitelisted.
Eventually we might have an attribute here or something based on the deployment target.
Everything is a subtype of Top, couldBe Top, and the union of Top with anything is Top.
Extracts autolink flags from object files so they can be passed to the linker directly.
FIXME: It would be nice to point out where we found the named type declaration, if any.
FIXME: Splice the block to the end of the function so they come out in the right order.
FIXME: This algorithm falls out from the way the "all archetypes" lists are structured.
Find the last instance of the first word in the name within the words in the type name.
Find the lowest Slot that doesn't conflict with anything in the conflict set for iface.
For each state that we are currently tracking, apply our summarized instructions to it.
For non-argument tuples, we can do the same conversion but not to a tuple with varargs.
For weak and unowned types, convert the reference to the right pointer, producing a +1.
Format: condition, a list of cases (Value ID + Basic Block ID), default basic block ID.
Fortunately, the execution context has a stack of simulators, which we consult instead.
Fudge the offset values to achieve this, unless we're already at the end of the string.
Function preserve variance in the result type, and flip variance in the parameter type.
Get the parent module because currently we don't represent submodules with ClangModule.
Get the reference storage type of the builtin object whose value witness we can borrow.
Given a name like "autoclosure", return the type attribute ID that / corresponds to it.
Given a result of name lookup that had no viable results, diagnose the / unviable ones.
Given an aggregate value and an access path, extract the value indicated by / the path.
Hdf still takes precedence but will be removed once we have made all options ini-aware.
Helper for doing array-style Idx translations, even if we're dealing with a collection.
Helper to deal with emitting list assignment and keeping track of some associated info.
However, doing limited code duplication can lead to major second order simplifications.
However, if the body is simple enough, we can end up with no branches to the failureBB.
If Prefix is greater than or equal to Path in size, Prefix can not be a prefix of Path.
If both args are strings AND either of args is not numeric string then use ICU-compare.
If compared against a double, emit a collection check before performing the comparison.
If not, this mapping isn't guaranteed to be consistent for all platforms we care about.
If only one of the types is a type variable, perhaps we can do something with it below.
If that fails, arbitrarily pick the extension whose protocols are alphabetically first.
If the -c option is specified without a -n, php behavior is to load the default ini/hdf
If the abstract type parameter already has an archetype assigned, use that information.
If the expression might be a dynamic method call, return the base / value for the call.
If the instruction is not dead, always add the local to the set of upward exposed uses.
If the non-local successor edge points to a parent successor that is not dead continue.
If the requirement is rethrows, the witness must either be rethrows or be non-throwing.
If the spare bits are all zero, then we have a valid value and not an extra inhabitant.
If the standard library provides a _stdlib_didEnterMain intrinsic, call it first thing.
If the subcommand is one of the "built-in" 'repl' or 'run', then use the normal driver.
If the subexpression type is exactly the same, then just peephole the whole thing away.
If the superclass was imported from Objective-C, its size is not known at compile time.
If the witness is within a struct or enum, it can be freely moved to another extension.
If there is an interface type, it shouldn't have any unresolved dependent member types.
If there is no argument to the constructor function, then just pass in the empty tuple.
If this is a 'let' value, any stores to it are actually initializations, not mutations.
If this is a DynamicSelf metatype, turn it into a metatype of the underlying self type.
If this is at top-level scope, validate that the members of the overload set all agree.
If this is our second, then we bail out, because we don't want to pick one arbitrarily.
If we are, we need to do some fancy cloning and creating a new mongo_servers structure.
If we don't have an enum tag (which can happen if we have a default statement), return.
If we don't have an initialization for the tuple, just build the individual components.
If we don't have an sfp, we're returning from the first frame in this VM nesting level.
If we found an alias type in an inherited protocol, resolve it based on our own `Self`.
If we have a callee release and we are dead, set the callee release's operand to undef.
If we have a normal or inherited protocol conformance, look for its generic parameters.
If we have an spOff, materialize rvmsp() so that handleSRHelper() can do a VM reg sync.
If we have tagsets configured for the replicaset then we need to do some more filtering
If we locally know that the type has fixed layout, we can emit meaningful flags for it.
If we previously set PCRE_NOTEMPTY after a null match, this is not necessarily the end.
If we were already pointing to a basic block, remove ourself from its predecessor list.
If we're not at the top level, need to grab the call sites for each frame on the stack.
If we're not emitting to memory, remember this element for later assembly into a tuple.
If we're starting with an ObjC representation, convert it to a class type and let's go.
If we're still looking up for the original type, remember that we found an exact match.
If we're supposed to debug a specific constraint solver attempt, turn on debugging now.
If we've already seen this (e.g. decls overridden on the result type), ignore this one.
If you're not defining the class, you shouldn't have to know what the vtable layout is.
It is not necessary to fill the buffer entirely, only to obtain at least one more byte.
It was determined by inspection of the character codes stored in Microsoft font symbol.
Iterate over the instructions post-order and find retains associated with return value.
Keep track of argument failure information if the entire matching candidate set agrees.
Link ordinary blocks with ordinary edges and set their last instruction and end offsets
Load used traits of PreClass `preClass', and append the trait Class*'s to 'usedTraits'.
Local function to add a type with the given name and module as trivially-representable.
Look up the precomputed callees for an abstract function and return it as a CalleeList.
Make sure cg.map has an entry for every interface - this simplifies some code later on.
Make sure that this unreachable instruction is the last instruction in the basic block.
Make sure the FPushOp wasn't interpreted, based on an FPushCuf, or spanned another call
Make sure we have the complete list of members (in this nominal and in all extensions).
Map from AliasClass ids to the must-alias-set that has it as memory_support, if any do.
Metadata accessors for fully-substituted generic types are emitted with shared linkage.
Move II down the block until it hits TargetInst or the first SummarizedInterestingInst.
Multiple character line break or forced cut Estimate how big the output string will be.
NB: the command may throw a variety of exceptions derived from DebuggerClientException.
NOTE: We do not expect to have too many levels of nesting, so recursion should be fine.
No attempt was made to determine the language in which files of this type were written.
No direct matches in our internal maps, so we need to retrieve it from the type parser.
Non-scalar constant initializers require 86cinit() for run-time initialization support.
Non-scalar property initializers require 86pinit() for run-time initialization support.
Non-scalar property initializers require 86sinit() for run-time initialization support.
Note that the semantic pass also includes parser diagnostics so this avoids duplicates.
Note that these stream callbacks may re-enter the VM via a user-defined stream wrapper.
Note that this file has had moderate changes to make it compile as C++, and under MSVC.
Now we know that we were able to determine the sign bit for at least one of Left/Right.
Obviously, this must not happen at the top level, or the algorithm would not terminate.
Optimize tuples that are generated from tuple_extract instructions from the same tuple.
Otherwise, intermediate props with define can promote a null, false, or "" to stdClass.
Otherwise, lookup the BBState associated with the successor and merge the successor in.
Otherwise, switch on the type of the left operand to emit the right kind of comparison.
Otherwise, try to insert after the function we would be transitively be inserted after.
Otherwise, we have at least one (and potentially many) viable candidates sort them out.
Perform another round of general whitespace nuking to cleanup whitespace before the //.
Process the instructions in the basic block to find what refcounted roots are released.
Process the instructions in the basic block to find what refcounted roots are retained.
Properties in structs/classes are only ever mutable in their designated initializer(s).
Pull out the body parameters, which we should have cloned previously to be forwardable.
Put the framework search paths first so that they'll be preferred upon deserialization.
Read the number of high bits set, which indicates the number of bytes in the character.
Remove those overload locators for which this solution did not have an overload choice.
Require either a 'get' or an 'address' accessor if there's a 'mutableAddress' accessor.
Resets the buffer, serializes this command into the buffer and then flushes the buffer.
Retire the proxy, which will schedule it for cleanup and destruction on another thread.
Retrieve the source location at which the optional is / specified or would be inserted.
Retrieve the type name to be used for determining whether we can / omit needless words.
Return a basic block suitable to be the destination block of a / try_apply instruction.
Return the number of times a pattern must be specialized / before becoming irrefutable.
Return the standard access strategy for getting a non-dependent / type metadata object.
Return true if this is a non-resolved ExprPattern which is syntactically / irrefutable.
Return whether an IRInstruction may observe the reference count of a specific argument.
SSAUpdater can modify TerminatorInst and therefore invalidate the predecessor iterator.
Search through the resolvedOverloadSets to see if we have a resolution for this member.
Set up a callback which will be called immediately after a task has finished execution.
Sets RuntimeOption::ExecutionMode according to commandline options prior to config load
Some of these are derived IVs like i+1 or i*4, which we will eventually want to handle.
Specialization may be able to eliminate it later, or we'll lower it away at IRGen time.
Starting from BB, go back the control flow graph until we reach already handled blocks.
Still, for the keys in file, a deserialization from memory is required on first access.
TargetSink should have an owning pointer to the allocator that keeps the results alive.
Tell all files to parse as library, which is necessary to load them as serialized ASTs.
The MInstrState we need to use is at a constant offset from the base of the RDS header.
The VM state should be synced using VMRegAnchor by the caller, before entering libxml2.
The base may also legitimately be an object and our next base is in an object property.
The call is 'dynamic' if the method is not of a struct and the receiver is not 'super'.
The callee needs to be callable with FCallBuiltin, because NativeImpl requires a frame.
The canonical type for a protocol composition canonicalizes the order of the protocols.
The epoch (first day of the first year) is 22 September 1792 in the Gregorian calendar.
The formal / dynamic type ignores dynamic subclasses such as those introduced / by KVO.
The function returns false if the reply to the client fails during the sending process.
The generic type parameter (depth, index) serves as the key to the metadata source map.
The part of the ActRec that mirrors the native frame record is the first sixteen bytes.
The plan needs to be built using the formal result type after foreign-error adjustment.
The sub expression should be an UnresolvedDeclRefExpr (we won't tolerate extra parens).
The type of the expression must conform to the StringInterpolationConvertible protocol.
The type of the src is the same or more refined than type, so the guard is unnecessary.
The value is tail-allocated after the SwiftError record with the appropriate alignment.
The variable may have its lifetime extended by a closure, heap-allocate it using a box.
There are some rules about the order it needs to have at runtime, which we set up here.
Therefore, the representation must remain / consistent across all abstraction patterns.
These keywords don't start a decl or a statement, and thus should be safe to skip over.
These should never be encountered because they don't represent independent allocations.
This allows downstream pattern / detection like induction variable analysis to succeed.
This does not result in deadlock, because the Map accessor is released by m_vars.erase.
This file implements several PrettyStackTraceEntries that probably ought to be in LLVM.
This file implements solution ranking heuristics for the constraint-based type checker.
This file implements the portions of the IterativeTypeChecker class that involve types.
This fires the initial session started interrupt to the client after it first attaches.
This implicitly communicates with the dominance resolver configured in emitSILFunction.
This includes creating the IR type as well as capturing variables and performing calls.
This includes creating the IR type as well as emitting the primitive access operations.
This is everything the llvm::GraphWriter needs to write the call graph in / a dot file.
This is the authoritative map that determines which typehints require special handling.
This is the case for the entry block and any blocks not reachable from the entry block.
This is the per-instruction analyze routine for rc_analyze, also used for build_graphs.
This means that UINT64 will not be available to be constructed in a sourcekitd message.
This might be cleaner if we split off a new UnresolvedSubscriptExpr from SubscriptExpr.
This minimizes the size of the tRNS chunk and thus the size of the PNG file as a whole.
This only can happen if we need more than the available registers at a single position.
This prevents color / escape sequences from interfering with editline's internal state.
This should also potentially reduce the number of live registers during call sequences.
This step allows us to hoist dependent chains of checks as if they were a single check.
This will ensure that the code is updated when we hit the cast failure in debug builds.
This would actually be Monday, because the Jewish day is considered to begin at sunset.
To handle covering value, we need to go to the predecessors and materialize them there.
Trap BBs leak all reference counts and do not reference semantic objects in any manner.
Treat global variables from the same source file as local when completing at top-level.
True if the call site for this callee syntactically has a trailing / closure specified.
Try to propagate them to find out the real substitutions required to invoke the method.
Unless we're always supposed to consume the input, release the input if we need to now.
Unlike a usual LICM algorithm, we don't need to iterate to identify the invariant code.
Update all branch instructions in the predecessors to pass the new argument to this BB.
Wait until the second pass, when all the raw value expressions can be checked together.
Wait until we've processed all the forward predecessors before looking at the Phi node.
We are going to produce an error on all unreachable instructions not eliminated by DCE.
We cannot go offline until they are finished as we own their dispatcher and event base.
We create a points-to edge for the first node which doesn't reach a points-to edge yet.
We do all of this conservative merging to simplify things during each block's analysis.
We don't sink stack allocations to not destroy the proper nesting of stack allocations.
We ensure this by setting the edge on nodes which have no defer-successors (see above).
We know that this will always result in RCIdentical values without additional analysis.
We mark the head/tail as unknown control flow regions since in CFGs like the following:
We might still have a bunch of tokens to match, though, because of possible backing-up.
We might still have a dependently typed payload though, namely a class-bound archetype.
We only accept a user if it is an ARC object that can be removed if the object is dead.
We reset the empty-input-file flag for each image, but we don't clear the input buffer.
We use a malloced pointer here so we don't need to expose ARCBBStateInfo in the header.
We want to be able to associate the parent of this expression with the ultimate callee.
We've split critical edges, so `next' and 'taken' blocks can't have other predecessors.
When we fork we need to unregister the parents hash so we don't accidentally destroy it
When we see a forward jump to a block, we record the stack depth at the jump site here.
When we're not using jemalloc this check won't do anything so avoid the extra overhead.
Whether the object with the given type-index should be recorded as an "unknown" object.
Witness 'Self' arguments are added as a special case in EmitPolymorphicArguments::emit.
addToWorklist - Add the specified block to the work list if it isn't / already present.
clean up all the child ends and then open streams on the parent ends, where appropriate
copy the numbers before the decimal point, adding thousand separator every three digits
dynamically check if we have a This pointer and call emitGetCtxFwdCallWithThisDyn below
emitBBMapForSelectEnum set up a continuation block and phi nodes to receive the result.
for each tracelet, register tracelet address ranges in an FDE (Frame Description entry)
gd is intentionally imperfect and doesn't spend a lot of time fussing with such things.
ie, 'static inline' functions for which we must ask Clang to emit a body for explicitly
if we are checking a generic argument, don't make it a starting point of a circularity.
is_subclass_of() needs to check that the LHS doesn't have the same class as as the RHS.
nativeDataWakeup is called last to ensure that all properties are already unserialized.
older openssl libraries can assert if the passed in password length is less than keylen
promoteDestroyAddr - DestroyAddr is a composed operation merging / load+strong_release.
read the count + scaling values  It is not necessary to stop an event to read its value
switchObjHelper can throw exceptions and reenter the VM so we use the catch block here.
(We could get a more accurate k by invoking log10, but this is probably not worthwhile.)
- NoSpill out: Allocate spill space on any edges to successors with NeedSpill in-states.
/ / Furthermore, if the target type is a metatype, the source type must be / a metatype.
/ / TODO: Don't occupy any storage for such let properties with constant / initializers.
/ / This is following the same model of how we deal with SILFunctions in / function_ref.
/ / This should only return true when the entry isn't already nested / within a context.
/ We also need to replace the closure parameter with the partial apply / on the closure.
A builtin can only release an object if it can escape to one of the builtin's arguments.
A lower bound of the actual reference count of the object that this alias set refers to.
A stored property on a value type will have a mutating setter and a non-mutating getter.
A visitor for creating a flattened list of LValues from a / tuple-of-lvalues expression.
Add a lifetime-resolving copy from `s' to `d'---without touching the instruction stream.
Adjust the result type of a throwing function based on the / imported error information.
Advance Builder to the fall-thru path and return a SILArgument holding the result value.
After finalizeGenericParamList(), the generic parameters will be assigned to archetypes.
All other source types should be concrete enough that we have conformance info for them.
And replace the call to swift_bufferAllocate with a call to swift_bufferAllocateOnStack.
Assuming uniform distribution, we'll expect to iterate through half of the array's data.
Automatically generate a global symbol name if it is required by the calling convention.
Build a parameter list which can forward the formal index parameters of a / declaration.
But for this case, we've already thrown away the overlap by setting stags to None above.
By turning the error handling mode to EH_NORMAL temporarily, we circumvent this problem.
C ABI wackiness may cause a single-field struct to have different layout from its field.
Check if we can simplify a cast into: - ObjCTy to _ObjectiveCBridgeable._ObjectiveCType.
Check that all users of the destination address of the copy are dominated by / the copy.
Check to see if we need to back up because we only got a sign or a trailing x after a 0.
Check whether database is writable by adding and removing a row in the 'writable' table.
Clang declarations are public and can't be assured of having a unique defining location.
Class metatypes have non-trivial representation due to the / possibility of subclassing.
Coerce the specified parameter list of a ClosureExpr to the specified / contextual type.
Configure the implicit 'self' parameter of a function, setting its type, / pattern, etc.
Convert function takes refs to refs, address to addresses, and leaves other types alone.
Create a partial application of a dynamic method, applying bridging thunks if necessary.
Create an access function for the type metadata of the given / non-generic nominal type.
Currently, the abstraction pattern corresponding to an optional object is always opaque.
Detect when the type arguments correspond to the unspecialized type, and clear them out.
Determine the relationship between the 'self' types and add the appropriate constraints.
Determine whether the given type refers to a non-final class (or / dynamic self of one).
Determine whether this generic Swift nominal type maps to a / generic Objective-C class.
Dig through the type, looking for a typedef-name and stripping references along the way.
Disable nested writeback scopes for any calls evaluated during the conversion intrinsic.
Do this before we consume the 'sil' token so that all later tokens are properly handled.
Don't free the iterator for the current loop however free any earlier pending iterators.
Don't know which values should be passed if there is more than one basic block argument.
Drop the parameters from basic blocks and replace all uses with the passed in arguments.
Each time a stateIn for a block changes, we re-insert the block's rpo ID in incompleteQ.
Effectively, we use array for Set initialization only when it is a static array for now.
Emit a materializeForSet callback to clean up after an addressor / with an owner result.
Emit the components of an Objective-C method descriptor for a / subscript getter method.
Emits the test(s) that determine whether the enum contains a payload / or an empty case.
End of source string or the source string contains an ill-formed subsequence at the end.
Estimation of page cache that are readily evictable without causing big memory pressure.
Evaluate a guard expression and, if it returns false, branch to / the given destination.
FIXME: Audit uses of this function and figure out how to migrate them to per-file names.
FIXME: Could try to apply generic arguments first, and see whether that resolves things.
FIXME: Deal with from/to base types that haven't been solved down to type variables yet.
FIXME: It doesn't necessarily make sense to pass all types using their explosion schema.
FIXME: Property encoding differs in slight ways that aren't publicly exposed from Clang.
FIXME: Replace pre-specialization's "keep as public" hack with something more principled
FIXME: This will do the wrong thing if there's any adjustment to do besides optionality.
Fall back to Swift lowering for the underlying type's representation as a struct member.
Find a / value that is trivially RC-identical to V and dominates the argument's / block.
Find all the return blocks in the function, inserting a dealloc_stack before the return.
First look at the origin of V and see if we have any instruction that is a typed oracle.
For debug builds, set m_pos to 0 as well to make the asserts in checkInvariants() happy.
For layout purposes, we consider a singleton tuple to be isomorphic to its element type.
From REQ_BIND_CALL, we're running "between" basic blocks, with all VM registers sync'ed.
Generate RGBA row from an YUV row (with width upsampling of chrome data) Input: 1, 2, 3.
Generates Y, U, V data (with color subsampling) from 32 bits per pixel RGBA data buffer.
GenericSpecializationParams Specializations are just prepended to already-mangled names.
Get the value we're testing, which may be a function, an address or an instance pointer.
Gets the entry for a value at an address, e.g. a struct/class field or / an alloc_stack.
Given that a cast operation is complete, maybe deallocate an / opaque existential value.
Given the address of an optional value, unsafely project out the / address of the value.
Go through the loads uses and add any users that are projections to the projection list.
Grab AI's operands and the relevant types from the ConvertFunction function type and AI.
Handle lvalue-to-lvalue assignments with a high-level copy_addr instruction if possible.
Handle the (label: ()) param used by functions imported as labeled nullary initializers.
However, / general NRVO is not handled via local propagation without global data / flow.
However, by doing so, we can only do the data forwarding after the data flow stabilizes.
If annot was "Awaitable" with no type args, getTypeArg() will return an empty annotation
If both of those conditions apply, the alloc_ref and its entire use graph is eliminated.
If compared against an object, emit a collection check before performing the comparison.
If it's Objective-C, start layout from our static notion of where the superclass starts.
If it's a struct type associated with the literal conformance, test against it directly.
If it's already in the set, then we've already queued and/or processed the predecessors.
If neither the property's getter nor its setter are mutating, the base can be an rvalue.
If source or target are existentials, then it can be cast successfully only into itself.
If the argument and parameter indices differ, or if the names differ, this is a shuffle.
If the arguments are live, we need to keep the terminator that delivers those arguments.
If the base value is already known, it may conflict with the parameter of this function.
If the capture is of a computed property, grab the transitive captures of its accessors.
If the edge from ER to S is a back edge, we want to clip it and add exiting subregion to
If the expression is already typed to the protocol, lookup the protocol method directly.
If the input day is in the first two months, we want the molad at the start of the year.
If the member is a constructor, verify that it can be legally referenced from this base.
If the payload is indirect, we can use the NativeObject type metadata without recurring.
If the pointer itself is optional, we need to branch based on whether it's really there.
If the property was declared with a parameter, but the behavior didn't use it, complain.
If the r-value doesn't require reabstraction, the final context is the emission context.
If the score is better than the best we've seen, update the best and clear out the list.
If the source is an existential, attempt to cast it first without unwrapping the target.
If the successfully applied constraint is favored, we'll consider that to be the "best".
If the type hasn't changed and doesn't rely on context, just use the original parameter.
If the value being substituted is an enum, check to see if there are any switches on it.
If the witness table is directly fulfillable from the type, we don't need a cache entry.
If the word preceding the preposition extends the preposition, it will never be dropped.
If there is a "/*" in the middle of an identifier token, it starts a multi-line comment.
If there is an existing subscript within this context, we cannot create a new subscript.
If there is any more work left to do, setup a new frame ready to execute the pseudomain.
If there isn't one, we always have to run the job, but it doesn't affect any other jobs.
If there was no fixit specification, but some were produced, add a fixit to add them in.
If there's only one preresolved ClassInfo, we can give out a specific res::Class for it.
If this can't possibly be a contextual keyword, then this identifier is not interesting.
If this is a read-only access to 'let variable' then we can strip away the write access.
If this is a simple variable marked with a 'let', emit a note to fixit hint it to 'var'.
If this is called we are either in a TIFFs thumbnail or a JPEG where we cannot handle it
If this is not the representative, produce a same-type constraint to the representative.
If this is the error parameter, remember it, but don't build it into the parameter type.
If this query expression has no queries, we will not introduce a new refinement context.
If valid, try to assign the same physical register here as `hint' was assigned at `pos'.
If we (still) have more than one solution, find the one with more-specialized witnesses.
If we already emitted the function, return it (potentially preparing it for definition).
If we are seeing a redundant release we have exited the return value sequence, so break.
If we created the DISubprogram for a forward declaration, attach it to the function now.
If we did not find any non-payloaded enum, there is no RC associated with this Phi node.
If we have a hinted type that's better than the guarded type, we want to keep it around.
If we have a nominal type, "use" its conformance to _ObjectiveCBridgeable if it has one.
If we have a preposition, we can chop off type information at the beginning of the name.
If we opened up an existential when performing the subscript, open the base accordingly.
If we see one, we can produce a single instruction, which doesn't require a CFG diamond.
If we weren't already adjacent to this type variable, add it to the list of adjacencies.
If we weren't handed a function, check for an existing declaration in the output module.
If we're doing a partial match or we have an initial parameter, return the empty string.
Ignore scope-less instructions and have IRBuilder reuse the previous location and scope.
Implements utilities for constructing TypeRefs and looking up field and enum case types.
Import mirrored declarations for protocols to which this category or extension conforms.
In multi-threaded compilation this will be done for / multiple LLVM modules in parallel.
In the usual case, the code will have emitted one or more branches to the failure block.
Initialize the buffer with junk, to help ensure we're insensitive to insignificant bits.
Insert spills and copies that connect subintervals that were split between instructions.
Instantiate a brand new witness table for a resilient or generic / protocol conformance.
Invert the hoist group data structure to map from canonical check to a vector of checks.
It is possible if a derived class is defined that does not call this class' constructor.
It's probably only possible in code that's already otherwise provable to be unreachable.
Iterate over all the compilation-units in the file, calling the given callable for each.
Iterate over all uses of the partial_apply and look for applies that use it as a callee.
Just allow the profile length to implicitly distinguish the presence of an error result.
Local function to attempt to diagnose potential type witnesses that failed requirements.
Look through substituted types to diagnose when the original type is marked unavailable.
Make sure that the types of the constraints match the types of the arithmetic operation.
Make sure that we can look up the local region corresponding to this region's successor.
Make sure we aren't trying to equate type variables with different lvalue-binding rules.
Map from interfaces to their assigned vtable slots, computed in compute_iface_vtables().
Memory instructions which can be made stack relative if DefInlineFP is pushed past them.
Meta info on the value local will confuse the translator (and wouldn't be useful anyway)
Most of the time the default value is scalar, so we can avoid evaling in the common case
Move to the first non-deprecated enumerator, or non-swift_name'd enumerator, if present.
NOTE, PHP array_unique accepts ArrayAccess objects as well, which is not supported here.
NOTE: we never pool copied curl handles, because all spots in the pool are pre-populated
Needed to handle closures which are no longer applied, but are left behind as dead code.
Next, add the Phi values and promote all of the loads and stores into the new locations.
Not available on windows, the query is possible but there is no DNS_HINFO_DATA structure
Note that we ignore this check for type(), because we don't subtype RAT types precisely.
Now see if we need to raise any warnings because of not having a valid callback function
Ok, we have started to visit the range of instructions associated with a new projection.
Optimize placement of initializer calls given a list of calls to the / same initializer.
Otherwise, form an UnresolvedDotExpr and sema will resolve it based on type information.
Otherwise, if this is a function candidate with an argument, we mismatch argument count.
Otherwise, select m_gpArgs or m_stkArgs depending on how many args we've already pushed.
Otherwise, they're in the same block, and we just need to check whether A comes after B.
Otherwise, they're in the same block, and we just need to check whether B comes after A.
PHP 7 allows for a widening conversion from Int to Float, we still ban this in HH files.
Parses the current command line as a code execution command and carries out the command.
Perform substitutions into the superclass type to yield the substituted superclass type.
Populate most fields of the NormalizedInstruction, assuming its sk has already been set.
Print the part of a function type that appears after where the variable / name would go.
Print the type by substituting our context parameter names for the dependent parameters.
Reaching the outermost loop, we use the CallerWeight to get the outer length+loopweight.
Receive at least one finished event, or until waketime (a steady_clock time) is reached.
Recognize used conformances from an imported type when we must emit / the witness table.
Remove redundant checks down the dominator tree inside the loop, starting at the header.
Replace all uses at this level of the tree with uses of the newly constructed aggregate.
Replace old apply instruction by a new apply instruction that invokes the witness thunk.
Reset, possibly, some request dependent runtime options based on certain setting values.
Result contains a big integer, as well as one other integer, so we must use bitset mode.
Return the TypeConstraint that should be used to constrain baseType for an Idx bytecode.
Return the best active spec for the target platform or nullptr if no / such spec exists.
Returns false if the user-defined comparison function modifies the array we are sorting.
Returns the number of protocol witness tables directly carried / by values of this type.
Returns true if all arrays in memory are considered to be unsafe and / clears this flag.
Returns true if the passed in ref count inst matches the ref count inst we are tracking.
Rewrite the operand type to the expected argument type, to handle tuple conversions etc.
SILGen doesn't actually re-use blocks for the normal edge, but it's good to be prepared.
Sanity check: if the caller gave us a dependent type, there's no way we can handle that.
Scan the metadata layout for the class to find the key offsets to put in our descriptor.
Sends a copy of the given command to the associated client using the buffer in m_thrift.
Setup m_entry after property initialization, since it depends on the value of m_defHint.
Since MovePos is an instruction, we know that there is always a valid iterator after it.
Since we process the loop tree bottom up they are guaranteed to be available in the map.
Skip down to the generic parameter list that houses the corresponding generic parameter.
Skip parameters, since we do not gracefully handle nested declarations on a single line.
Skip spaces and tabs, but other whitespace (such as comments or newlines) stop the skip.
So, we may have an assertion on the type of the top of the stack after this instruction.
Special pattern: constants of the form "kFooBarBaz", extend "FooBar" with property "Baz"
SpillState is used by allocateSpillSpace() to decide where to allocate/free spill space.
Strength reduce destroy_addr inst into release/store if we have a non-address only type.
Sufficient space is allocated to the return value to hold the suppressed trailing zeros.
TODO The frontend will currently never emit copy_addr or destroy_addr for block storage.
TODO: In principle, this could be isBindableToSuperclassOf instead of isExactSubclassOf.
Test that Empty acts like the bottom element in the lattice with respect to containment.
The Graphics Interchange Format(c) is the Copyright property of CompuServe Incorporated.
The constant tracker of the caller function (null if this is the tracker of the callee).
The instruction we are lowering has an argument which is different for each predecessor.
The native call for this instruction is the slow path that does proper subtype checking.
The number of extra tag bits outside of the payload required to discriminate enum cases.
The only way that we modify the arity of function parameters is here for dead arguments.
The presence of a generic type parameter indicates that we cannot use this type binding.
The reason to allow back-tracking is easily shown by a series of foldable incs and decs.
The return value of this pass represents an equivalence relation over phi uses and defs.
The safe default for a dependent type is to assume that it needs its own implementation.
The set of property names that show up in the defining module of / an Objective-C class.
The token spans multiple lines, make sure to replace syntax map data for affected lines.
The work array need be only as big as the subbox, so the memory usage problem is solved.
Then add any arguments that are captured in the closure to the function's argument type.
There should be at least one SILCombine+SimplifyCFG between the ClosureSpecializer, etc.
Therefore we need /    LLVM's constant propagation prior to deciding on stack promotion.
Thick functions consist of a function pointer and nullable retainable / context pointer.
This branch might be folded by exitFalse if it turns out that that point is unreachable.
This check makes sure that if we run into any such residual null pointers, we skip them.
This evaluates arbitrary code, so it's best to be paranoid about iterators on the stack.
This feature is much less relevant since HTTPS does not allow proxies to remove headers.
This file implements IR generation for the initialization of coverage related variables.
This file implements IR generation for the initialization of local and global variables.
This invocation should happen at the common dominator of all loads inside this function.
This is NOT a leaf node and it has multiple children, but they have the same value base.
This is a special entry point that allows destructure inputs to handle / self correctly.
This is because the current exception escapes the exception handler where it was thrown.
This is the same operation as 'copy', but works on +0 values that don't / have cleanups.
This returns a / null type if one of the ParamDecls does not have a type set for it yet.
This returns a null type if one of the / ParamDecls does not have a type set for it yet.
This will clear the error both on the stmt and connection so we make sure it closed now.
Trait flattening is supposed to happen only when we have awareness of the whole program.
Transforming the inlined-at SIL scope to a location means skipping the inlined-at scope.
We / only do this if the destination BBs have only the switch enum as its / predecessor.
We / remove these back edges and instead represent them as unknown control flow / edges.
We are not trying to handle this case here, so simplify by just bailing if we detect it.
We assign local, unique indexes to each thread, with hopes that they are densely packed.
We assign unique negative ID's to all new blocks---these correspond to invalid TransIDs.
We can do this unconditionally in a safe way since we are only dealing with cond_br, br.
We can store tags for the empty elements using the inhabited bits with their own tag(s).
We can't form a Hashable conformance if Int isn't Hashable or IntegerLiteralConvertible.
We have to have a known heap metadata value, reject dynamically computed ones, or places
We must have seen both a store to and a load from the slot to deshadow on every exit BB.
We need a single backedge and the latch must not exit the loop if it is also the header.
We need its structure to determine whether we'll be bridging or upcasting the base type.
We need to do this in case a __destruct method reenters and accesses this Vector object.
We need to preserve them in the new pre_header, so we have to keep the same instruction.
We only emit diagnostics for API unavailability, not for explicitly weak-linked symbols.
We remove the IncRefs for each incoming node, and insert a new one after the join point.
We use a malloced pointer here so we don't need to expose the type to the outside world.
We want it to look like a substitution of the appropriate clause from the original type.
We want to give the old server plenty of time to shut down all of its satellite servers.
We're about to send the client an interrupt and start waiting for commands back from it.
When updating this logic, also update RebindSelfInConstructorExpr::getCalledConstructor.
ZendResourceData contains the index into the Zend resource table where these are stored.
allocate at least kNumBytes bytes, and make sure we end on a kNumBytes aligned boundary.
as a modified form of the old Roman republican calendar which was based on lunar cycles.
baseClass can change on us in between requests and it is not related to ctx, so bail out
create bson binary data  type: 5 4 bytes: length of bindata 1 byte: bindata type bindata
getBBForDefinition - Return the SILBasicBlock for a definition of the / specified block.
getUnderlyingObject will ignore that, while findAddressProjectionPathBetweenValues wont.
hitStringKey() should only be called on an Elm that is referenced by a hash table entry.
import this wait handle to the newly created context throws if cross-context cycle found
only allow parameter modifiers (public, private, protected) on constructor for promotion
the normal release() methods of refcounted classes aren't usable because they run dtors.
(Note that it may not be included in the region due to the EvalJitMaxRegionInstrs limit.)
(We might eventually check whether objects are final as part of this, but not right now.)
- Check that each one stems directly or indirectly from the same switch_enum instruction.
- The instruction immediately after the end of any fault-protected region begins a block.
/ /   STRINGS /     * A blob of length-prefixed strings referred to in CHUNKS or RESULTS.
/ / Recursively walks the members and derived global decls of any nested / nominal types.
/ / Similarly, the parsing of 'try' as part of expr-sequence-element / is not structural.
/ / The former is guaranteed to be stable, but may not reflect this version of / the AST.
/ We create a thunk which converts the direct parameters/results back to / indirect ones.
A destination for an argument other than just "onto to the end / of the arguments lists".
A non-throwing source function can be cast to a throwing target type, but not vice versa.
A structure for collecting generic arguments for emitting a / nominal metadata reference.
Add the self argument, upcasting if required because we're calling a base class's method.
All original initialization points must be dominated by / the final initialization calls.
Allocate enough memory so that even if each character is quoted, we won't run out of room
Allocate enough space that the relocated cold code doesn't overlap the emitted cold code.
Any locals that we know point to that cell can have their inner type predictions updated.
Archetypes may or may not be ObjC classes and need unwrapping to get at the class object.
AssertRAT* instructions can appear while these values are live but they will never throw.
Assign a value ID to each SILInstruction that has value and to each basic block argument.
Assign and copyaddr of trivial types cannot drop refcounts, and 'inits' never can either.
At each release point, release the reaching values that have been stored to this address.
Attach an objc_runtime_name attribute with the Objective-C name to use for this protocol.
Because only the first one that matches in the VirtualHosts vector gets applied and used.
Behaviors should be able to control whether they interact with memberwise initialization.
Bound variables can be changed to mutable explicitly if desired by using a 'var' pattern.
But in the future, one could think of / maintaining a cache of optimized specializations.
Changed types are overwritten, while refined types are intersected with the current type.
Check for unused variables, as well as variables that are could be declared as constants.
Check our persistent storage and determine if it's an SSLSocket or just a regular socket.
Check that every generic parameter type from the signature is among referencedArchetypes.
Check the folding set to see whether we already have an exemplar matching this archetype.
Check whether this is a known Foundation entity that conflicts with the standard library.
Checks in this file ensure that fatalError behaves as expected, but without stack traces.
Closure static locals are represented as special instance properties with a mangled name.
Compatibility is transitive, so we can forget our original method and just keep going up.
Complain about single-quote string and suggest replacement with double-quoted equivalent.
Compute the constant initializer and the offset of the type metadata candidate within it.
Convert a packed array to mixed, without moving the elements out of the old packed array.
Convert a reinitialization of this address into a destroy, followed by an initialization.
Create a TransRec for the translation, markEnd() should be called prior to calling rec().
Create an implicit TypeExpr, with location information even though it shouldn't have one.
DC is the DeclContext where D was defined CurDC is the DeclContext where D was referenced
Destructure the existential and replace the "object" field with the right reference kind.
Do it here so we don't have to go through the rigormorale of binding if this is the case.
Don't bother with SetM on strings, because profile data shows it basically never happens.
Don't jump thread through a potential header - this can produce irreducible control flow.
Enumerates actions that should be taken by the enterVM loop after unwinding an exception.
Enums without associated values can implicitly derive Equatable and Hashable conformance.
Evaluate the condition, the body, and a branch back to LoopBB when the condition is true.
Eventually this should have additional capabilities like stripping globals, vtables, etc.
Every indexed type receives a unique type-index and will have a scanner generated for it.
FIXME: Currently we only implement spare bits for single-element primitive integer types.
FIXME: We allow trivially-representable cases that also conform to _ObjectiveCBridgeable.
FIXME: We need to convert this back to an ObjC class for an ObjC metatype representation.
FIXME: setting buffer_length will cause the destructor to free memory owned by the string
Finally, collect all the values for the SILArgument, materialize it using the SSAUpdater.
For a protocol, the type of 'self' is the parameter type 'Self', not the protocol itself.
For classes, this is the initializing constructor, to which we will dynamically dispatch.
For closures containing only a single expression, the body participates in type checking.
For keys that could be strings, we have to assume they could be strictly-integer strings.
For simplicity, for now we return `false' if the sets of guarded locations are different.
For the same reason we care about DW_TAG_variables, we examine DW_TAG_subprogram as well.
For uncommon layouts, use value witnesses that work with an arbitrary size and alignment.
Force a public metadata access function into existence if necessary / for the given type.
Function: gdAffineShearVertical Set up a vertical shearing matrix, columns are untouched.
FunctionType::get - Return a uniqued function type with the specified / input and result.
Get a destination that runs all of the cleanups needed when existing on the failure path.
Handle full apply sites that have a resolvable callee function with an effects attribute.
I have yet to find a specific date when the current set of rules were known to be in use.
IOW, both opaque pixels and transparent pixels will be mapped into the transparent entry.
If MALLOC is undefined, malloc will be invoked directly -- and assumed always to succeed.
If any sub-interval was spilled, a single store is generated after each definition point.
If either type is a protocol type, we don't know the underlying type so return may alias.
If it has non-trivial type and is an initialization, we can also replace it with a store.
If target is a Swift type bridging to an ObjC type, / return the ObjC type it bridges to.
If that failed, be sure to give the variables error types before we type-check the guard.
If the Enum only contains two cases, test for the non-payload case and invert the result.
If the Self type is concrete, we have a witness thunk with a fully substituted Self type.
If the apply in the caller is not in a significant loop, just stop with what we have now.
If the argument is a call, it might be to init(__builtinStringLiteral:byteSize:isASCII:).
If the associated type is non-dependent, we can use an ordinary metadata access function.
If the callee is on the stack, it update our minimum DFS number based on it's DFS number.
If the callee will consume the 'self' parameter, let's retain it so we can keep it alive.
If the closure has a single expression body, we need to walk into it with a new sequence.
If the declaration is in a different resilience domain, we have to use materializeForSet.
If the fixit hint turned out to be / bogus, this returns false and doesn't emit anything.
If the instruction we were looking at just got exploded, don't skip the next instruction.
If the interface type is generic, make sure its requirements line up with the archetypes.
If the source is an NSError, and the target is a bridgeable ErrorProtocol, try to bridge.
If the tuple is address-only, we'll get much better code if we emit into a single buffer.
If the type also conforms to _ConditionallyBridgedToObjectiveC, use conditional bridging.
If the type is address-only, we need to move or copy the elements into a tuple in memory.
If the type variable can't bind to an lvalue, make sure the type we pick isn't an lvalue.
If the use is dominated we can replace this use by the value flowing to DominatingSuccBB.
If the witness is a designated or required initializer, we can't move it to an extension.
If there is a "//" in the middle of an identifier token, it starts a single-line comment.
If there's actually any reference to these types, they'll be reported as the pseudo-type.
If this base *is* the destination, go ahead and start building the path into ReversePath.
If this is a declaration with generic function type, build a specialized reference to it.
If this is a start curly quote, do a fuzzy match of a string literal to improve recovery.
If this is adding a level to an active partial application, advance it to the next level.
If we already bound this archetype, make sure the new binding candidate is the same type.
If we also /  converted to a static initializer, then remove the load from the addressor.
If we can resolve the class, we'll give an object of a type according to that resolution.
If we don't have a forward reference, make sure the function hasn't been defined already.
If we have a clang decl associated with the Swift decl, derive its ownership conventions.
If we have a guaranteed parameter, it is passed in at +0, and its lifetime is guaranteed.
If we have already introduced an initializer with this parameter type, don't add one now.
If we know for sure we're promoting to stdClass, we can put the locType pointing at that.
If we opened up an existential when referencing this member, update the base accordingly.
If we referenced a non-fragile shared function from a fragile function, serialize it too.
If we see another identifier or keyword, complain about the missing colon and keep going.
If we're thunking a static function reference, include its symbol name in the thunk name.
In a few circumstances, a ResourceData instance can be stored instead of a Zend resource.
In some unusual cases with illegal keys, SetM pushes null instead of the right hand side.
In these cases the closure will be emitted into every initializer of the containing type.
In this case, we have to make sure not to destroy an element that wasn't initialized yet.
Initialize generator state with seed See Knuth TAOCP Vol 2, 3rd Ed, p.106 for multiplier.
Insert whitespace on the left if the binop is at the start, or to the right if it is end.
Inspect all of the open_existential_addr instructions and record the apply-witness users.
Instead of poking at parts that are potentially not set up, just assume it is acceptable.
Instead, the outermost tuple layer is exploded, even when they are being passed opaquely.
Its main purpose is for performing small combining operations/peepholes at the SIL level.
Lazily initialize so that if StatCache never gets used, no kernel resources are consumed.
Local function to visit the nested potential archetypes of the given potential archetype.
MD5 Message-Digest Algorithm" in all material mentioning or referencing the derived work.
Make sure that the EndBlock is not inside a loop (which does not contain the StartBlock).
Map from Closure names to the function(s) containing their associated CreateCl opcode(s).
Mapping from the original argument of partial_apply to the temporary containing its copy.
Modifies (and returns) passed url parameter to be used for additional parameter appending
Must be processed after any other language options that could affect platform conditions.
NB: BreakPointReached really means we've got control of a VM thread from the opcode hook.
NSUInteger might be imported as Int rather than UInt depending on where the import lives.
No need to generate any global symbols for entries that do not provide their own symbols.
No written agreement, license, or royalty fee is required for any of the authorized uses.
Non-lvalue types (references, values, metatypes, etc) form the root of a logical l-value.
Note that "array" and "callable" are disallowed by the grammar, so they never reach here.
Note: At this point, we dont have a function scope, so we set the flags on the FileScope.
Note: this is a hack to improve performance when we're dealing with overloaded operators.
Now that the indexed types are fixed up to be more consistent, merge duplicates together.
Once we have analyzed it, set Behavior to that value and insert the value into the Cache.
Only allow loads of projections, either directly or via struct_element_addr instructions.
Otherwise if Other is not nominal, return true since we always sort decls before indices.
Otherwise, allow the CRTP substruct to update itself given we have a potential decrement.
Otherwise, we need to emit some conditional jumps/switches to handle the different cases.
Our loop info is not really completely valid anymore since the cloner does not update it.
Pass the writeback scope on to CallEmission so it can thread scopes through nested calls.
Perform a depth-first search from each type variable to identify what component it is in.
Proactively populate, in order to increase cache locality for sequential access patterns.
Process special builtins that are designed to check for overflows in integer conversions.
Propagate the concrete type into a callee-operand, which is a witness_method instruction.
Recognize _BridgedNSError, which must pull in its witness table for dynamic casts to work
Resolve the first component, which is the only one that requires unqualified name lookup.
Return (share + text), under the assumption that share consists only of shared libraries.
Return a pattern corresponding to the 'self' parameter of the given / Objective-C method.
Return the Clang struct type which was imported and resulted in / this Swift struct type.
Returns a new function type exactly like this one but with the self / parameter replaced.
Returns false if the server was unable to return the information needed for this command.
Returns true if both values are equal or yield the address of the same / global variable.
Returns true iff we already have Eval.JitMaxTranslations translations recorded in srcRec.
Right now consider it circular even if the referenced variant only showed up in one spot.
Same as unserialize from AsyncMysqlQueryEvent but the result is a vector of query results
Second step: propagate the side-effect information up the call-graph until it stabilizes.
See the definition of Fixed, Versionable and VersionableSparse in the header for details.
Seek within m_buffer if we can, otherwise kill it and call user stream_seek / stream_tell
Select the remaining regions, iteratively picking the most likely region to execute next.
Set of memory location ids that are being used to support the lower bound of this object.
Simply eliminate the allocation and any obviously trivial noop copies into and out of it.
Since they are captured, we need to pass them directly into the new specialized function.
So, resume execution in the TC at a stub that will throw the execution from a safe place.
Soft extended type hints raise warnings instead of recoverable errors, to ease migration.
Sort blocks such that all predecessors of B come before B, except loop-edge predecessors.
Specifically, removes the calls to Builtin.staticReport(), which are not needed post SIL.
Store off the sub-expression, in case a new one is provided via the type check operation.
Store the name of the called function to the first param, then null it out on the ActRec.
Structurally infinite loops like: bb1: br bb1 are not present in the post-dominator tree.
Super-Boxes can contain super-boxes which provides us with a hierarchical storage system.
Suppress 'try' coverage checking within a single level of do/catch in debugger functions.
TODO: If Obj-C interop is off, we can relax this to allow referencing class metadata too.
TODO: there are probably cases where we can avoid redoing the entire linkage computation.
Terminate destination --- called by jpeg_finish_compress after all data has been written.
Test that Empty acts like the bottom element in the lattice with respect to intersection.
Test whether the object's isa is a metaclass, which indicates that the object is a class.
The 'filename' parameter may be NULL if there is no file associated with the source code.
The Builtin module cannot be explicitly imported unless we're a .sil file or in the REPL.
The XPC connection is still valid and sending a message to it will re-launch the service.
The absolute depth at the label can then be inferred from the absolute depth at the jump.
The beginning of the path might not be part of the cycle, so find where the cycle starts.
The benefit if the condition of a terminator instruction gets constant / due to inlining.
The clause matrix will be initialized with zero rows / and a column for every occurrence.
The core of the algorithm: Mark functions as alive which can be reached from the anchors.
The expression that will be wrapped by a RebindSelfInConstructorExpr / node when visited.
The first axis deals with special behavior of fixed-size loadable and address-only enums.
The goal is to call a `targetFunction' that is overloaded on the extra data type structs.
The index into the source file's Decls at which to start / irgenning the next REPL input.
The invalid context cannot access protected or private methods, so we can fail fast here.
The most common case of getting an unreachable instruction is a missing return statement.
The new compression format stores a magic number and the size of the uncompressed object.
The outermost N levels of optionals on the operand must all be present or the cast fails.
The padding is done by adding '0's to the left of the string that is going to be printed.
The private typealias are not included in the modules that are available to the debugger.
The raw value of an imported EnumElementDecl doesn't seem to have a type for some reason.
The scope of states used in finally router is controled using shared pointer refcounting.
The value is live at the end of a predecessor block but not in the frontier block itself.
The writeback scope closing will propagate the value back up through the writeback chain.
Therefore we map all the extra callee parameters to the callee operand of the apply site.
These instructions only cause the value to escape if they are used in a way that escapes.
These references are used in generating new instructions that extract from the aggregate.
They produce valuable information for optimizations that's lost across region boundaries.
This deserves an explanation as brotli's documentation is really incomplete on the topic.
This expects to get passed clang nodes in source-order (at least within the same header).
This handles the BraceStmt in non-single-expr closures, so we don't walk into their body.
This is the last iteration, compute BBWriteSetOut and perform the dead store elimination.
This isn't trivial to strength reduce, without a "flip two top elements of stack" opcode.
This keeps track / of SIL branch arguments so that they can be lowered to LLVM phi nodes.
This lets us enforce the invariant that if we have a delegate set, we should be using it.
This means we implicitly get caching, but that type lowering needs to override this case.
This should only happen if we get OPEN request while the previous document is not closed.
This special exception was added by the Free Software Foundation in version 2.2 of Bison.
This was contained inside of a bound generic structure type that was expecting two types.
This will cause cmds like Next and Out to just let the program run, which is appropriate.
This would mean we've been asked to eval in a frame which is beyond the top of the stack.
Thus the 320 modifications involve, overall, 320 additions, 320 xor's, and 320 rotations.
To help deserializing the context generic params, we serialize the outer-most list first.
Try to parse the string literal as an Objective-C selector, and complain if it isn't one.
Try to print as a reference to the static type so that we will get a USR, in cursor info.
Turning on the genset and killset can be costly as it involves querying the AA interface.
Use find_if instead of remove_if since we know there can only be one match in the vector.
Use lambdas wrapping the ctype.h functions because of linker weirdness on OS X Mavericks.
Walk up through the type scopes to find the context where the type declaration was found.
We allow OptionalToBoolean fixes with an opened type to refer to the Boolean conformance.
We always have bounds checks for the default, so it doesn't count against the case limit.
We can assume that loading a const global variable doesn't involve an ownership transfer.
We can do a better job here when dependent types are related to their generic signatures.
We don't need the requirement if both types are above the method depth, or non-dependent.
We have a parsed extension that we can't resolve well enough to get any information from.
We have ensured that clean_file will be added to a relative path by the time we get here.
We might consider making stack flavors have subtypes and adding this to the opcode table.
We need to handle dynamic member references, which wrap the function type in an optional.
We only do one of 1) or 3), but we have to do them in the right order with respect to 2).
We only require IEEE, IBM, or VAX double-precision arithmetic (not IEEE double-extended).
We would insert the deallocation too early, which may result in a use-after-free problem.
We'll want to parse this from the TypeRepr when SILFunctionType loses its context params.
We've added some members to our containing class/extension, add them to the members list.
Wrapper names should have a prefix to distinguish them from the actual runtime functions.
check if the data we get is a port this allows us to correctly parse things like a.com:80
clear lower byte on destination move lower byte to destination and keep the other 56 bits
collectClassSelfUses - Collect all the uses of a 'self' pointer in a class / constructor.
dispatchExtra translates from runtime values for the Opcode enum into compile time types.
if initial_opt is not set, this shouldn't be recorded as a per request fetch of the file.
popWorklist - Return the next basic block to look at, or null if the / worklist is empty.
ssize_t IterEnd(const ArrayData*)  Returns the canonical invalid position for this array.
void Asort(int sort_flags, bool ascending)  Sort an array and maintain index association.
will be removed by compactMergeInfo but could be hit by other threads before that happens
with curl 7.17.0 and later, we can use COPYPOSTFIELDS, but we have to provide size before
(And note that for psuedomains we may in fact have to guard on the local type after this.)
(Features which do not break BC don't need options here and can just always be turned on.)
/ / For Swift protocols, this is a constant reference to the protocol descriptor / symbol.
/ / For most types, the most general type is simply a fresh, / unrestricted type variable.
/ / If this has no parent pattern binding decl or statement associated, it / returns null.
/ / Precondition: The client must make sure that it is valid to actually hoist / the call.
/ / This may also relocate the metadata object if it wasn't allocated / with enough space.
/ This includes rewriting them from assign instructions into their composite / operations.
/ This pass merges cond_fail instructions by building the disjunction of / their operands.
3) For non-generic local functions, we return the outer function's parameters and nullptr.
A DiscardAssignmentExpr (spelled "_") needs contextual type information to infer its type.
A base class constraint that isn't NSError rules out the archetype being bound to NSError.
A class to walk over a local context and validate the correctness / of its error coverage.
A possibly-discontiguous slice of function parameters claimed by a / function application.
A scanner is responsible for reporting pointer information about a set of types to the GC.
Add a trivial setter and materializeForSet to a / ComputedWithMutableAddress storage decl.
Anything else requires more complicated analysis than belongs in the simplifier right now.
As a result of trait flattening, the PreClass of this normal class contains a requirement.
As a result, we can't reliably distinguish member functions for static functions on clang.
Assume that any instruction with side-effects may depend on the RC_DEALLOCATING_FLAG flag.
At this point we know that the request thread is busy running, so we let it enter the jit.
Attempt to remove the array allocated at NewAddrValue and release its refcounted elements.
Be nice and preserve the current debug location until after we're done with this function.
Boxed bases may have their inner value changed but the value of the box will never change.
Can't build a thunk without context, so we require ownership semantics on the result type.
Cannot call initializers from a superclass, except for inherited convenience initializers.
Check each of the expression nodes to verify that there are no type variables hanging out.
Check for open colors at the end, so we can reduce colorsTotal and ultimately BitsPerPixel
Check if both operand values are passed to the same block argument in the successor block.
Check if conditions of CCBI and DomCCBI are equivalent along / all or at least some paths.
Check that every byte in the unit's bytecode is inside exactly one function's code region.
Check that the function takes the expected arguments and returns the expected result type.
Check whether a dominating check of the condition let's us replace the condition by false.
Check whether a type conforms to the given protocols, filling in a / list of conformances.
Claim the next destination, returning a null pointer if there / is no special destination.
Clear any timeout handlers to they don't fire when the request has already been destroyed.
Clear the instructions we are tracking currently, but leave that we saw a release on them.
Collect all of the generic parameter types at every level in the generic / parameter list.
Collect property names from all categories and extensions in the same module as the class.
Collect the exit blocks dominated by the loop - they will be dominated by the check block.
Collect the set of nested types of this archetype, and put them into the archetype itself.
Conservatively check that both checked_cast_br instructions are either exact or non-exact.
Convert the base to the appropriate container type, turning it into an lvalue if required.
Counter used by optimize pass to wait to visit Phis until after non-backedge predecessors.
Create an implicitly-unwrapped optional of the object type, which subsumes both behaviors.
Create the initial set of vasm blocks, numbered the same as the corresponding HHIR blocks.
Create the new function type for the cloned function with some of the parameters promoted.
Currently IRGen wraps alloc/init methods into Swift constructors / with Swift conventions.
Currently a dynamic thunk looks just like a foreign-to-native thunk around an ObjC method.
Default declaration of generated scanner - a define so the user can easily add parameters.
Determine whether this nominal type is known to be representable in this foreign language.
Do a raw copy without worrying about refcounts, and convert the values to uncounted later.
Don't bother creating the line table here, because we can retrieve it from the repo later.
Don't let any members have linkage names if the object type doesn't have external linkage.
Don't profile 86ctor, since its an implementation detail, and we dont guarantee to call it
Eliminating the trampoline can expose opportunities to improve the new block we branch to.
Emit a diagnostic and return true if this is an error condition we can / handle uniformly.
Emit a materializeForSet operation that simply loads the l-value / into the result buffer.
Emit conditional checks for all successors in this region, in descending order of hotness.
Emit the boolean test and/or pattern bindings indicated by the specified / stmt condition.
Emit this instruction into the prolog of the function so we can memoize/CSE it in VarLocs.
Error tokens are diagnosed by the lexer, so there is no reason to emit another diagnostic.
Eventually the all the projection tree nodes will be freed when the BPA allocator is free.
FIXME: Eliminate this once we can handle finding protocol members in resolveTypeInContext.
FIXME: Having to deal with private imports as a superset of public imports is inefficient.
FIXME: These will be the same for most source files, but we copy them over and over again.
FIXME: This doesn't work if the type has default values because they fail to canonicalize.
FIXME: swiftcall / func printTypeMemberOffset(forType: Any.Type, memberName: StaticString)
False if constant propagation could do the same job inside the callee without inlining it.
Find the "primary" potential archetypes, from which we'll collect all of the requirements.
For an unbound instance method reference, replace the 'Self' parameter with the base type.
For metadata purposes, we consider a singleton tuple to be isomorphic to its element type.
For recovery, we still form the pattern even if one or more elements are missing keywords.
Found a different operand, now check to see if its type is something cheap enough to sink.
Get a bit vector indicating which arguments are non-null for a / given function or method.
Get the LoweredValue corresponding to the given SIL value, which must / have been lowered.
Give the debugger a chance to do extra logging if there are any attached debugger clients.
Given an array value, recursively check that uses of elements within the / array are safe.
Given an existential object, find the witness table / corresponding to the given protocol.
GlobalARCOpts seems to be taking up a lot of compile time when running on globalinit_func.
Globals and statics are lazily initialized, so they are safe for potential unavailability.
HACK HACK HACK: This is a workaround for some module invalidation issue and inconsistency.
Here, the modular division first probe is gives way to a faster exclusive-or manipulation.
However, for completeness this analysis has the ability to /  follow struct_extract users.
However, the prologue passes us the callee actRec, whose predecessor has to be the caller.
I'm relying on gcc to be smart enough to optimize away the next two lines when T is int64.
If 'function' is a string we simply assign it to name and leave this_ and cls set to NULL.
If VD is a noescape decl, then the closure we're computing this for must also be noescape.
If a bit in the vector is set, then the location is dead at the end of / this basic block.
If a simpler result can be found, it is / returned, otherwise a null SILValue is returned.
If an initial value expression was specified by the decl, emit it into the initialization.
If an offset pointer is passed, we store in it it the pc offset of the call to the callee.
If any of the following checks fail, we want to start searching past the end of the match.
If any of the results have a base, we need to remove overridden and shadowed declarations.
If printed Decl is the top-level, merge the constraint-free extensions into the main body.
If the 2nd type is an autoclosure, then we don't actually want to treat these as parallel.
If the RHS is not a simple variable, we need to evaluate it and assign it to a temp local.
If the associated type is directly fulfillable from the type, we don't need a cache entry.
If the caller and callee are both fragile, preserve the fragility when cloning the callee.
If the client allows the solution to have unresolved type expressions, check for them now.
If the current unit used any spill slots, allocate and free spill space where appropriate.
If the function has a throw block we must also find a matching release in the throw block.
If the interface parameter is a type constant we require the implementer to specify a type
If the jit maturity counter is enabled, update it with the current amount of emitted code.
If the native type conforms to _ObjectiveCBridgeable, use its _bridgeToObjectiveC witness.
If the next entry is going to be too big for the code size, then increase it, if possible.
If the parameters can live independent of the context, release it now so we can tail call.
If the type is a singleton aggregate, the field's layout is equivalent to the aggregate's.
If there are dead blocks in the SIL function, we might have left invalid blocks in the IR.
If there are no non-default cases, evaluate the subject for side effects and fall through.
If this argument is not dead and we did not perform SROA, increment the offset and return.
If this function is generic or is within a generic type, it should have an interface type.
If this instruction has side effects, but is inert from a load store perspective, skip it.
If this is a discarded foreign static 'self' parameter, force the argument and discard it.
If this is a new PHI node then it may require additional definitions, so add it to the PQ.
If this is the state associated with the instruction that we are currently visiting, bail.
If this was done in SSA registers, then the value is provided as an argument to the block.
If we are inlining, we've done various DefInlineFP-type stuff that can affect stack depth.
If we can't figure out the Base or Projection Path for the read, simply ignore it for now.
If we didn't find anything with the appropriate name, look again using only the base name.
If we ever change that we'll have to change this to patch to some sort of rebind requests.
If we get to a release that is provably to this object, then we can zap it and the retain.
If we have a 'didSet' or a 'willSet' label, disambiguate immediately as an accessor block.
If we have a variadic method for which we need to drop the last selector piece, do so now.
If we have exactly one input filename, and its extension is "sil", treat the input as SIL.
If we have json-c then don't use this library since that one has a more permissive licence
If we have registered post-send shutdown functions, end the request before executing them.
If we have spare bits, pack the tag into the spare bits and the tagIndex into the payload.
If we have the constraint graph, we can check all type variables in the equivalence class.
If we have the second, create a new select_enum with the first case and swap our operands.
If we need to perform dynamic dispatch for the given function, emit class_method to do so.
If we overrode a non-required initializer, there won't be a vtable slot for the allocator.
If we're casting Null to NullableObj, we still need to call tvCastToNullableObjectInPlace.
If we're not coming from something function-like, prepend the type for 'self' to the type.
Ignore chdir failures, because the compiled version might not have the directory any more.
In JIT mode, we need to create protocol descriptors using the ObjC runtime in JITted code.
In ObjC interop mode, we have up to two places we need each correct ivar offset to end up:
In non-RepoAuthoritative mode, any function could get a VarEnv because of evalPHPDebugger.
In the parser, generic parameters won't be wired up yet, just give up on producing a type.
In the unrolled block of the last iteration unconditionally jump to the ExitBlock instead.
In theory, the kernel should do just as well even if we don't explicitly advise files out.
Initialize the AvailSetMax by intersecting this basic block's / predecessors' AvailSetMax.
Inlining related instructions can manipulate the frame but don't observe reference counts.
Instructions which read from memory, e.g. loads, or function calls without / side effects.
Invalid location means that the instruction has been generated by SIL passes, such as DCE.
It could be avoided on an instance---but we're not trying to notice those cases right now.
It doesn't actually matter which DeclContext we use, so just use the imported header unit.
It's possible to have no insertion point here if the end of the true case was unreachable.
Keep track of full inlined functions so we don't waste time recursively reprocessing them.
Lastly update the BBSetIn, only necessary when we are running a single iteration dataflow.
Make progress before side-exiting to the next instruction: raise a warning and push false.
Metaprogram to verify that every concrete class implements 'SourceRange getSourceRange()'.
Most of the ideas used here can be traced back to Heckbert's seminal paper Heckbert, Paul.
Move an instruction which is an operand to the new SelectValueInst to its / correct place.
Mutex, ConditionVariable, Read/Write lock, and Scoped lock implementations using PThreads.
NB: when this returns, the Debugger class no longer has any references to the given proxy.
No assignment from LRUCache::ConstAccessor since it is non-copyable Use resetToLRU instead
No need to introduce a context if the declaration does not have an availability attribute.
Note that for metaclass stubs, we can always ignore parent contexts and generic arguments.
Note that the current accepted value for the tropical year is 365.242199 days, not 365.25.
Note: if you make changes to the behavior here you may need to update negativeCheckType().
Nothing to do if the current module has a required function with a proper linkage already.
Objective-C class references go in a variable with a meaningless name but a magic section.
Optimize structs that are generated from struct_extract instructions from the same struct.
Otherwise, a boolean value is returned indicating whether the batch was successfully sent.
Otherwise, a self.init call must have location info, and must be an expr to be considered.
Otherwise, assume it is a single pipeline operator and allow it to be wrapped in an array.
Otherwise, if it has trivial type, we can always just replace the assignment with a store.
Otherwise, if there is exactly one use of the return block, merge it into its predecessor.
Otherwise, the given offset doesn't belong to the region, so we just create an exit block.
Perform this lookup only if a function with a given name is present in the current module.
Preserve whether the curry thunks lead to a direct reference to the method implementation.
RAII object that prints with the given color, if color is supported on the / given stream.
Record the appropriate offset into m_layouts for each indexed type to refer to its layout.
Reprocess each of the unresolved entries to see if it can be resolved now that we're done.
Responses will be printed in Requests.cpp (with medium prio), print them out here as well.
Return true if the specified token looks like the start of a clause in a / stmt-condition.
See if it provides a value or refines the demanded element mask / used for load promotion.
Set up a constraint system where we open the generic parameters of the protocol extension.
Simplifications that walk the dominator tree to prove redundancy in conditional branching.
Skip if no predCluster (predecessor w/ no samples), or if same as cluster, of it's frozen.
Skip parameters that are defaulted to source location or other caller context information.
Special options parameters, invalid for URL parsing - only possiblity is 'connect' for now
Split and spill any inactive intervals after `cur_start' if they intersect with `current'.
Strips and stores the struct_extract projections leading to the array / storage reference.
Subscripts and computed properties are ok on rvalues so long as the getter is nonmutating.
TODO: Check the call graph to be less conservative about what destructors might be called.
TODO: Don't emit the symbol if field has a fixed offset and size in all resilience domains
TODO: If source type size is smaller than the target type the result will be always false.
Technically we should be coallescing these child calls, but this is what php5 xdebug does.
The FileScope maintains a stack of attributes, so that it correctly handles each function.
The Julian calendar specifies that every year that is a multiple of 4 will be a leap year.
The PopC will decide it can't be eliminated, which prevents us from eliminating the CGetL.
The addresses of empty values are undefined, so we can't safely mark them dereferenceable.
The bool indicates whether fb_intercept has ever been called on a function with this name.
The layout of standard containers depends on whether the existential is class-constrained.
The line numbers we output are bogus, but it's not totally clear what line numbers to put.
The logic used here for reading POST data buffers is mostly borrowed from proxygen server.
The loop / might contain early exits so this is the maximum if no early exits are / taken.
The miIntermediate routines must handle subtypes of TArr outside of calls to this as well.
The most general resilience expansion which has knowledge of the global variable's layout.
The predecessor must be the normal edge from a try_apply that invokes a noreturn function.
The raw F-S error computation can potentially compute error values of up to +- MAXJSAMPLE.
The returned SILValue / (which has type Builtin.Int1) represents the result of this check.
The subclassList is non-empty, contains this ClassInfo, and contains only unique elements.
The suspend hooks can load anything (re-entering the VM), but can't write to frame locals.
The visitor should return true if / the attribute is invalid and should be marked as such.
Then if succ iterator is not succ end, we are a non local edge if that value is Non Local.
There might be valid types within a subprogram definition, but we deliberate ignore those.
There's no reason to use the full capacity, since static/uncounted arrays are not mutable.
These instructions end a unit after executing the bytecode instruction they correspond to.
These typevars come into them when the body does name lookups against the parameter decls.
They are only used for determining whether it is necessary to add parentheses in a fix-it.
This DecRef may rely on one of the IncRefs, since we aren't handling may-alias stuff here.
This allows us to skip the very expensive ratchet operation after intermediate operations.
This case handles the release of an array buffer that is loaded from a local array struct.
This file implements routines for searching for ways to find metadata from other metadata.
This function checks a few cases to ensure combining array type bits leaves it predefined.
This has to be a macro since it needs to be able to break away from the for loop we're in.
This ignores the concrete types of the arguments, looking only at the argument labels etc.
This is / called on a region's state and then any other successors states are merged / in.
This is done as a separate pass from the work in processSpillExits() to reduce complexity.
This is intended to be a / small, easily-computed type that can be passed around by value.
This is just part of this struct for convenience when stepping through RCAnalysis results.
This is only done for a limited whitelist of instructions that are safe and cheap to sink.
This is only needed in cases where we synthesize a function which returns a generic value.
This is useful for ContRaise, which should throw from the context of the lowest generator.
This lets us omit having to allocate a temporary full horizontal stretch of the src image.
This makes it easier to share the same database between the mangling and demangling tests.
This means you need to use the default field to Bind and can't statically initialize them.
This method enforces that, for each region block, all its successor have distinct SrcKeys.
This must go here because YYSTYPE and YYLTYPE are included from bison output in section 1.
This ordering was chosen to satisfy my aesthetics of having "simpler" scanners come first.
This peephole only applies if the address being destroyed is the result of an alloc_stack.
This requires splitting critical edges and will naturally handle redundant branch targets.
This should never be called since mangling parameter kinds have influence on the payloads.
This used to be an fputs(), but since the string might contain NUL's, we now use fwrite().
To model this, we emit an unreachable instruction and then have SIL diagnostic check this.
Tries to optimize a given apply instruction if it is a / concatenation of string literals.
Try to fold a destroy_addr of a dynamic alloc_stack into a single destroyBuffer operation.
Unless the class is abstract, this must exist at this point or the bytecode is ill-formed.
Use SILOneOperandLayout to specify the function type and the function name (IdentifierID).
Use a slightly smaller number to allow for a few compiler-allocated temporary stack slots.
We can return right away for a truecolor image as deallocating colours is meaningless here
We can't use this specialized class without making a guard more expensive, so don't do it.
We did not transfer ownership of the array to an iterator, so we need to decRef the array.
We don't need to copy the full capacity, since the array won't change once it's uncounted.
We don't want to remove allocations that are required for useful debug information at -O0.
We know that the argument is not dead, so add it to the worklist for recursive processing.
We make no attempt to use the best DebugLoc, because in all known cases, we only have one.
We mark this block as unlikely in order to coax the emitter into ordering this block last.
We only hoist out of loops if 'all' array.props call can be hoisted for a given loop nest.
We process the loop tree preorder (top-down) to hoist over the biggest possible loop-nest.
We push the right hand side on the stack only if the base is an array, object or emptyish.
We require objectType to be a pointer type so that the GEP will scale by the right amount.
We turn this on in case we'd be omitting a warning after constant-folding array_fill_keys.
We use this to make sure that we do not handle call sites with multiple closure arguments.
We'll have already raised a notice in convert_for_pow so avoid re-raising the notice here.
We'll just look for the first codestream at the root of the box structure and handle that.
Wishlist:  - It might be nice if you could refer to iterators by name instead of by index.
You should have received a copy of the GNU General Public License along with this program.
Zero is returned when the input date is detected as invalid or out of the supported range.
compute adjustedTarget before altering the smash address, because it might be a 5-byte nop
data: is always supported since it doesn't reference data outside of the current document.
dealloc_ref on self can be ignored, but dealloc_ref on anything else cannot be eliminated.
grab a uint32_t from a possibly unaligned address, and return it in the native host order.
let release_sysvsem_sem know we have removed the semaphore to avoid issues with releasing.
molad            The date and time of the mean conjunction of the sun and moon (new moon).
onOpcode handles function exit breakpoints, this just handles stack-related manipulations.
preSort() does an initial pass to do some preparatory work before the sort algorithm runs.
we could also skip the cinit function here, but that would mean storing it somewhere else.
* are a conditional branch that has an incoming edge that is dominated by DominatingSuccBB.
/ / Note that this intentionally loses any tuple sub-structure of the / formal result type.
/ / TODO: Use this to remove nontrivial dead alloc_ref/alloc_stack, not just / dead arrays.
/ / The first return value is the address, which will always be an / l-value managed value.
/ / The uncurry level specifies how far much of a curried value has already / been applied.
/ But in the future, one could think of maintaining a cache / of optimized specializations.
/ The result is captured in this enum value, where the earlier entries are / most specific.
2) If the expression is a list assignment expression, recurse on the RHS of the expression.
2) for a classbound protocol, the base is a class-bound protocol rvalue, which is loadable.
2.0.10: Nick Atty: clip to edges of drawing rectangle, return if no points need to be drawn
2.0.10: needs a transparent-index check that is still valid if the source is not truecolor.
2.0.1: use gdImageSetPixel to do the alpha blending work, or to just store the alpha level.
4) for a nonmutating method, the base is a general archetype rvalue, which is address-only.
A class-constrained protocol composition can adopt the conforming class reference directly.
A present-but-nullptr catch trace indicates that a call is explicitly not allowed to throw.
Also, attribute the prologue (code before the first byte in the mapping) to the first line.
Anyway, it would be possible to support that here, but since it's not currently required...
As such, the body of the 'defer' is actually type checked within the closure's DeclContext.
BSD-derived systems set errno correctly Solaris returns -1 from getsockopt in case of error
Because this is a hot path, this keeps the overhead of the check low, and is twice as fast.
Both types are unique classes so they "could be" if they are in an inheritance relationship
Box `v' if it is not already boxed, and then insert a KindOfRef that points to v's RefData.
Break down structural types so that we don't eagerly pass metadata for the structural type.
Casts from class existential metatype into a concrete non-class metatype can never succeed.
Check for active/inactive intervals that have expired or which need their polarity flipped.
Check that there is no decrement or check from the increment to the end of the basic block.
Check the cache to see if we have already computed the destructor behavior for its SILType.
Checks if a given property may have any unknown uses which cannot be analyzed by this pass.
Collect those submodules that are actually imported but have no import decls in the module.
Comparisons against the empty string can be optimized to a comparison on the string length.
Compute the result type of the partial_apply, based on which arguments are getting applied.
Construct SSA form, materializing a value that is live at the end of the / specified block.
Converting from modified utf8 to utf8 will always shrink, so this will always be sufficient
Create a new apply instruction that uses the concrete type instead of the existential type.
Diagnose the bad case and return true so that the caller parses this as a trailing closure.
Don't hit more breakpoints while attempting to decide if we should stop at this breakpoint.
Don't resolve the nested type if the parent is equal to the decl context we are looking in.
Don't stack promote any allocation inside a code region which ends up in a no-return block.
Dot terminates it because of POSIX form  where dot precedes the codepage except for variant
Dynamic cast the source object to the class type to which the target value type is bridged.
Eliminating the address-only copies eliminates a very expensive call to getGenericMetadata.
Emits a call to a throwing function as defined by FuncRef, and passes the / specified Args.
Enum payloads are always stored at the abstraction level of the unsubstituted payload type.
Even if any illegal encoding is detected the result may contain a list of parsed encodings.
Every piece of data in the dependent data appears to be related to Objective-C information.
FIXME: Allow an SDK overlay to add a required initializer to a class defined in Objective-C
FIXME: Provide a mask to only match the bits in the payload whose extra inhabitants differ.
FIXME: This should track whether this should result in a private or non-private dependency.
FIXME: we will need to pass additional parameters if the target conformance is conditional.
Figure out the exact bound type of the function to be called by applying all substitutions.
Find the initial set of blocks where the value is live, because it is used in those blocks.
First thing: canonicalize swift_retain and similar calls so that nothing uses their result.
For NameAlias types, the DeclContext for the aliasED type is in the decl of the alias type.
For command line programs, we need this exception to exit from the infinite execution loop.
For negative start or length, calculate start and length values based on total code points.
For now, if present, this will only be the empty range, indicating that the branch is dead.
For our purposes 'dynamic' means that the method call cannot invoke a method in a subclass.
For subtyping constraints, just make sure that this name isn't used at some other position.
Function object that retrieves a type variable corresponding to the / given dependent type.
Function: gdAffineRectilinear Determines whether the affine transformation is axis aligned.
Functions which return the same data every time, but not the same instance, are candidates.
Get the length of the given full name, counting up the base name and all / argument labels.
Get the main source file's private discriminator and attach it to the compile unit's flags.
Get the parent module because currently we don't represent submodules with ClangModuleUnit.
Given a node, you can walk the parents towards roots to find out why the node is reachable.
Given a possibly-existential value, find its dynamic type and the / address of its storage.
Helper to emit the appropriate service request to exit with a given target bytecode offset.
However, by doing so, we can only eliminate the dead stores after the data flow stabilizes.
If AI does not have a function_ref definition as its callee, we can not do anything here...
If any of the functions are external declarations, add them to the worklist for processing.
If either the destination key or value type is a type variable, we can't simplify this now.
If it is a declaration with a swift_name attribute, we might be able to resolve this later.
If not, that pointer followable type is a root, and must be dealt with specially by the GC.
If so, parse it to an UnresolvedPatternExpr and name binding will perform final validation.
If that didn't find anything, we can still synthesize AnyObject conformances from thin air.
If the arc is non-critical, we can figure out its weight by looking at its incident blocks.
If the attribute follows the new representation, switch over to the alternate parsing path.
If the callee is a default witness method thunk, preserve substitutions from the call site.
If the declaration has an override, name lookup will also have found the overridden method.
If the destination block is a simple trampoline (jump to another block) then jump directly.
If the first module is the current module, the second declaration is shadowed by the first.
If the function is fully uncurried and natively foreign, reference its foreign entry point.
If the function pointer is a witness method call, include the witness table in the context.
If the input day is in the fourth to last months, we want the molad at the end of the year.
If the left-hand type variable cannot bind to an lvalue, but we still have an lvalue, fail.
If the output type will be used as a prediction and not as fact, we can be optimistic here.
If the overall structure so far has a fixed layout, then add this as a field to the layout.
If the parent has been favored on the way down, propagate that information to its children.
If the property was declared with an initializer, but the behavior didn't use it, complain.
If the right hand side was a class, we need to autoload and ensure it exists at this point.
If the source type is a value type, it cannot possibly conform to a class-bounded protocol.
If the unreachable is preceded by a no-return apply inst, then it is a non-failure exit BB.
If there is a continuation block, we should branch to it if the current point is reachable.
If there's no fixed type info, we rely on the runtime anyway, so there's nothing to verify.
If this constructor was imported, we don't need the initializing constructor to be emitted.
If this declaration has the swift_private attribute, prepend "__" to the appropriate place.
If this function is executing then valOut was already decrefed during iter_next_mixed_impl.
If this is a let variable we're initializing, remember this so we don't allow reassignment.
If we are in an accessor, check to see if the associated property is matches the predicate.
If we did insert a new entry, the value at the handle should reflect the value we inserted.
If we ever change this, we'll need to be careful about unlinking dead CF instructions here.
If we failed to generate the callee don't fail the caller, instead retry without the callee
If we have any arguments that were consumed but are now guaranteed, insert a release_value.
If we haven't checked bounds yet and this is the "first non-zero" case, we have to skip it.
If we meet some day, and you think this stuff is worth it, you can buy me a beer in return.
If we're not doing private property inference, schedule only function-at-a-time work items.
If we've consumed any tokens at all, build an error expression covering the consumed range.
If we've seen a type witness for this associated type that conflicts, there is no solution.
Ignore type metadata fulfillments for non-dependent types that we can produce very cheaply.
In HHVM, properties are copied elsewhere, so all we have to do here is make the new bucket.
In case of a block argument, recursively check the enum cases of all incoming predecessors.
In order to keep things simple, we return true for any instruction that reads or writes sp.
In the VM, don't optimize __CLASS__ if within a trait, since __CLASS__ is not resolved yet.
Initialize this RefCountState with an instruction which introduces a new / ref count at +1.
It needs to allocate and free its Array per request, because Array lifetime is per-request.
It seems that the underlying binary representation is same with swift utf16 representation.
It should run before ClosureSpecialization, because constant propagation is more effective.
Iterate over the instructions in the basic block in forward order and / process them w.r.t.
Keep these as assertions instead of early exits to ensure that we are not doing extra work.
L * R already known to not trap at this point in the program and the following rules apply:
Lastly update the BBSetOut, only necessary when we are running a single iteration dataflow.
Later we'll add more, like file and line, hopefully function args, wait handle status, etc.
Load and copy from the address value, passing the result as an argument to the new closure.
Local function that lowercases all of the base names and / argument names before returning.
Lower the class's fields using substitutions from the TypeRef to make field types concrete.
Make a final pass to emit default arguments and move things into the outer arguments lists.
Make sure the repo exists before attaching it, in order to avoid creating a read-only repo.
Map the parameter and expected types out of context to get the interface type of the thunk.
Mark files that are referenced from the autoload map so they get preloaded via preloadRepo.
Methods of non-final classes can only contain a covariant 'Self' as a function result type.
Multiple levels of struct_extract / may exist between the operand and the user instruction.
Never change refcount of 0 to refcount of 1, impossible to revive a dying SharedStringData.
No need to inc-ref here because we're a newly created object and our ref-count starts at 1.
Note that the stack is aligned since we called to this helper from an stack-unaligned stub.
Note that we don't push break/continue locations since they aren't valid in this statement.
Note: it's silly to try to reconnect when stopping, or if we have a problem while quitting.
Note: the logic relating to how to grow in this function is coupled to PackedArray::PlusEq.
Null for unbounded calls that will look for the method in / the dynamic type of the object.
Objective-C categories and extensions don't have names, despite being "named" declarations.
Okay, we've found a better path, and ReversePath contains a path leading from base to Dest.
On any path out of this function, make sure to mark the binding as done being type checked.
Once we've found all of the instructions to add to the worklist, add them in reverse order.
Only actually print out DIEs which begin in the range between the begin and end parameters.
Only actually print out compilation units if they lie within the begin/end parameter range.
Only increment NumOutputs if this is an output which must have its path specified using -o.
Optionally examine the body of partial_apply / to see if there is an unexpected use inside.
Otherwise, ObjC protocols use ObjC method dispatch, and Swift protocols use witness tables.
Otherwise, check whether this macro is identical to a macro that has already been imported.
Otherwise, we need to construct a new bitset that doesn't include the bits we aren't using.
PTK_AutoreleasingUnsafeMutablePointer can be converted from an inout reference to a scalar.
Parameters are explicitly specified, and could be used in the body, don't attempt recovery.
Perform the CSE for the open_existential_addr instruction and their dominating instruction.
Prevents another thread from forking at the same time, before FD_CLOEXEC is set on the fds.
Produce diagnostic info if we are not within an inlined function or template instantiation.
Profile the archetype constraints that may affect type layout into a / folding set node ID.
Propagate the elements of an array literal to get_element method calls on / the same array.
Pure loads, stores, and IrrelevantEffects do not read or write any object reference counts.
Recover from a 'case' or 'default' outside of a 'switch' by consuming up to / the next ':'.
Remember that any new constraints generated by opening this generic are due to the opening.
Remove any code that follows a (cond_fail 1) and set the block's terminator to unreachable.
Return the parameter convention used by Apply to pass an argument / indirectly via Address.
Returns true if the given SDK path points to an SDK that is too old for / the given target.
Returns whether or not block `bid' is in the retranslation chain for `region's entry block.
Right now we conservatively leave the effects of those may-decrefs on the next() path also.
Scan the uses of `ivl' for phi nodes, and return a pair of hints for the first one we find.
Setup the flow filter on the VM context for all offsets covered by the current source line.
Similarly suggest applying the Fix-It to the parent enum case rather than the enum element.
Since we are going to change the BB, add its successors and predecessors for re-processing.
Specialcase when we are warning about unreachable code after a call to a noreturn function.
Start by rerunning the query, to get a bitmask of exactly which elements are uninitialized.
TODO: Add a copyPODArray runtime entry point for bitwise-takable but non- fixed-size types.
TODO: provide reflective descriptions of the type and conformance requirements stored here.
TODO: unique and reuse the () parameter list in ASTContext, it is common to / many methods.
TODO: use a caching entrypoint (with all information out-of-line) for non-dependent tuples.
TakeAlways or TakeOnSuccess values should have / cleanups when their types are non-trivial.
Tests for resilient witness table instantiation, with runtime-provided default requirements
The Mod IR instruction has undefined behavior for -1, but php semantics are to return zero.
The RetCtrl opcode also suspends resumables, which we model as having any possible effects.
The allocation instruction may be moved, so increment Iter prior to doing the optimization.
The application should resume compression after it has made more room in the output buffer.
The fault blocks should all have factored exits to parent catches/faults, if there are any.
The intent behind this definition is that it'll catch any uses of REJECT which flex missed.
The iterator decl is built directly on top of the sequence expression, so don't visit both.
The merge module action needs to be first to force the right outputs for the other actions.
The minstr is done here, so we want to drop a FinishMemberOp to kill off stores to MIState.
The only type differences we expect here should be due to substitution of class archetypes.
The reason is that the type may depend on some other instruction that is still in the loop.
The reentrant case occurs when asio scheduler resumes an async function or async generator.
The top translation may have changed while we waited for the write lease, so read it again.
The two exceptions are persistent constants and TypeAliases which are allowed in systemlib.
The unconditional_addr_cast can be skipped, if the result of a cast is not used afterwards.
There can be the case that we see a callee argument as pointer but not the caller argument.
There is a chance another thread deletes the key when this thread is converting the object.
There's no need to hold it over the longer operation to set breakpoints in each file later.
There's no reason for us to be starting on the entry block when it's not our current block.
There's nothing special to do if the operand isn't optional and we don't need any bridging.
There's two extra NUL chars, plus either a '*' for protected, or the classname for private.
These opcodes leave a single value on the stack that becomes part of the generator's stack.
They use this to determine the pointer to the Zend resource (the pointer is normally null).
This allows us to structurally unify disparate protocol members during overload resolution.
This assumes that any re-initialization of the alloc_stack will be obvious in the function.
This can happen when an overlay overloads an existing selector with a Swift-only signature.
This can store to globals or locals, but we don't have globals supported in AliasClass yet.
This file implements the small amount of code for the heterogeneous stack and list classes.
This is because we currently don't memoize fault funclets other than finally fault fuclets.
This is ordered by std::greater, so we'll generally visit blocks before their predecessors.
This is the LocalAvailability / plus the information merged-in from the predecessor blocks.
This is the LocalSelfConsumed / plus the information merged-in from the predecessor blocks.
This is the function that performs real in-place conversion of the string between charsets.
This is the implementation of the swift interpreter, which takes a source file and JITs it.
This is to avoid unnecessary typechecking that can occur if the TypeResolver is set before.
This is why we have to check that the unspecialized type is at least as big as the srcType.
This mapping is logically trivial, but making it go fast enough requires considerable care.
This may load garbage values, but they are not used until the final check_unowned succeeds.
This may not be quite the closest entry to the actual input color, but it's almost as good.
This may only be a source file, or it may be a SIL file, which requires pumping the parser.
This may place multiple internal breakpoints, and it may place them more than one frame up.
This program simulates LLDB importing modules from the __apple_ast section in Mach-O files.
This section can reasonably be suppressed in builds that don't need to support Objective-C.
This unbalances the return stack buffer, but if we're intercepting, we probably don't care.
This uses an if-then-else instruction in ARMv7, which should be cheaper than a full branch.
This will be initialized on every entry into the loop header and consumed by the loop body.
This will be stored here so the checking of the Callee can use the same code in both cases.
Thread the loop clones by redirecting the loop latches to the successor iteration's header.
Track whether this record contains fields we can't reference in Swift as stored properties.
Translate and reabstract the index values by recursively walking the abstracted index type.
URL-based units are not currently cached in memory, but the Repo still caches them on disk.
Ultimately, the only thing that can interfere / with make_mutable is a retain of the array.
Unlike the Java version, we truncate from the end of the string, rather than the beginning.
Use the end address of the last instruction range to assign an empty range to this element.
Validate the opcode name, and do opcode-specific parsing logic based on the opcode we find.
Visit all of the nominal types we know about, discovering any others we need along the way.
We add it at a specific spot to get it in before any accessors, which SILGen seems to want.
We are only simplifying cases where all predecessors are unconditional branch instructions.
We cannot conservatively prove that this instruction cannot decrement the ref count of Ptr.
We don't have a way to represent instancetype in DWARF, so we emit the static type instead.
We found a nominal decl (for example, the closure is used in an initializer of a property).
We have more post data if a) there's some in the queue or b) the client EOM hasn't come yet
We have to make sure BOUND_GENERIC_SUBSTITUTION does not overlap with SIL-specific records.
We imported the factory method as an initializer, so record it as an alternate declaration.
We may still remove some stores during this visit if they are locally proven dead, however.
We need to save any of its parameters that we care about in the second phase ahead of time.
We only execute this for opcodes which invoke more PHP, and that does not include switches.
We reset the name as the server responded with a different name than what we thought it was
We want token IDs to remain stable regardless of how we change the internals of the parser.
We will not remove mutators if we have a might be decremented value that is not known safe.
We're starting with a SIL-lowered tuple type, so the elements must also all be SIL-lowered.
When walking down the tree, we traverse until we have found a node inside the target range.
When we call the event hook, it might tell us to skip the callee (because of fb_intercept).
Whether this map has been added to another array or map and no longer has a valid map value
basically duplicated from as.cpp but is maybe too janky to be a common routine somewhere...
createSchema() successfully wrote to the database, so no further verification is necessary.
don't let DOMElements get free'd out from under us while preparing to create a new document
getIdentifier - Return the uniqued and AST-Context-owned version of the / specified string.
hoist the sync instructions from t0 to before the jcc, and replace the jcc with bindjcc1st.
if the string is all ASCII up to size+1 - or str_len whichever is first - then we are done.
instructions that mutate memory, physical registers, or status flags are considered useful.
only used here, let do a generic fixed point integers later if required by other part of GD
prev is null here, and dwarf_child returns the first child if given a previous DIE of null.
the API contract is that you can call getPostData repeatedly until you call getMorePostData
'V' type is a series with values only, while all other types are series with keys and values
- One SSATmp src, which must be either a constant or the globally-available FramePtr/StkPtr.
- Remember for each case tag of the switch_enum instruction which integer value it produces.
- The argument might be unnamed, in which case we try to fix the problem by adding the name.
/   - warn_unqualified_access values must not be accessed except via qualified /     lookup.
/ / Creates a private, unnamed constant containing the address of another / global variable.
/ / For example, given "NSProperty" and "NSProperties", the full "NSProperty" / is returned.
/ / In the type of the function declaration, none of the extended information / is relevant.
/ / The question is whether we can introduce such operation while we hoist other / releases.
/ / This check is supposed to use the same logic that is used / by searchInConformanceCache.
/ / This is true for array.props.isNative and false for / array.props.needsElementTypeCheck.
/ / This routine assumes that the pattern is something very simple / like (x : type) or (x).
/ If the builder sees this node in a post-visitor, it will pop / the context from the stack.
/ This function simplifies such operations, but returns only the first / element of a tuple.
Accelerate shutdown if all requests that were enqueued are done, since no more is coming in.
Add accessors to the storage, since we'll need them to satisfy the conformance requirements.
After that, gle_pp is either still NULL, or set to something if one of the options was found
All of the direct superclass's designated initializers have been overridden by the subclass.
Also, unreachable instructions are not user code, they are "expected" in unreachable blocks.
Although func doesn't fit in a signed 32-bit immediate, it may still fit in an unsigned one.
An adapter class which turns a metadata layout class into a / generic metadata layout class.
An additional grant of patent rights can be found in the PATENTS file in the same directory.
An index of 13 (for the "extra" days at the end of the year) will return the string "Extra".
An optimistic iterative dataflow is performed on the genset and killset / until convergence.
Autoclosure may imply noescape, so add a noescape attribute if this is a function parameter.
Before we can call zend_strtod from zend compatibility extensions, we need to initialize it.
Below link discusses some numbers and formula where 16MB block would use only 6 extra bytes.
Between different kinds of convenience initializers, keep the one that was introduced first.
Build a table that points at the next pattern character so we skip through candidate faster.
But just delete them if they're not actually separating any arguments, e.g. in "()(y: Int)".
But unmaterializable types are not / valid results of substitutions, so this does not apply.
Change the parser state to know that the pattern we're about to parse is implicitly mutable.
Check if this alloc_stack is only initialized once by means of single init_existential_addr.
Check to see whether the optional is present, if not, jump to the current nil handler block.
Check whether the instruction invalidate any locations due to change in / its location Base.
Check whether the store is to the address obtained from a getElementAddress / semantic call.
Clear argument map and map ApplyInst arguments to the arguments of the callee's entry block.
Clone the partially applied function, replacing incoming arguments with / literal constants.
Consider add a materializeForSet accessor to the given storage / decl (which has accessors).
Consider each of the origins in turn, breaking out if any of them yields a zero-length path.
Count the number of SILParameterInfos that are needed in order to / pass the given argument.
Create a PHP object given a typename and call the ctor, optionally passing up to 2 arguments
Create a getter so we don't break downstream invariants by having a setter without a getter.
Don't emit a witness table that is available externally if we are emitting code for the JIT.
Don't let any functions have linkage names if the object type doesn't have external linkage.
Don't print parentheses: they break the correspondence with the way we print the expression.
Each semaphore actually consists of three semaphores allocated as a unit under the same key.
Emit the type layout by projecting it from a value witness table to / which we have linkage.
FIXME: Guarding the rest of these things together with early attribute validation is a hack.
FIXME: If we had the actual parameters and knew the body names, those matches would be best.
FIXME: Import anonymous union fields and support field access when it is nested in a struct.
FIXME: Record that we're checking substitutions, so we can't end up with infinite recursion.
FIXME: Since we don't represent Clang submodules as Swift modules, we're getting everything.
FIXME: Support recursive definitions in immediate modes by making type checking even lazier.
FIXME: The current source file needs to be handled specially, because of private extensions.
FIXME: We could also make extra inhabitants using spare bits, but we probably don't need to.
FIXME: We have to dig through a ridiculous number of nodes to get to the Protocol node here.
FIXME: When destructors get moved into vtables, update this to use the vtable for the class.
FIXME: refactor the frontend to provide an easy way to figure out the correct filename here.
FIXME: synthesizeMaterializeForSet() wants to statically dispatch to a known subscript here.
Finalize the given generic parameter list, assigning archetypes to / the generic parameters.
Finally ensure that we have no users of this operand preceding the release_value in this BB.
Find which one, then add edges to reachable catches and the enclosing fault funclet, if any.
Finish the "true part" by cleaning up any temporaries and jumping to the continuation block.
First attempt to see if we can narrow it down to a single function based on the conformance.
For Optimize translations, the entry block's profCount is adjusted later in translateRegion.
For an optional requirement, record an empty witness: we'll end up querying this at runtime.
For yields, we want to land on the next statement when driven from a C++ iterator like ASIO.
Free iterator for the current loop whether or not this is the last loop that we jump out of.
Functions that are already represented as blocks or C function pointers don't need bridging.
Given an object type, determine if it is non-interesting, IE, its generated layout is empty.
GraphTraits specialization so the CGForDotView can be / iterable by generic graph iterators.
Group these individual checks into groups rooted at a canonical non-hoistable IRInstruction.
Hoist the access function and the check to the preheader for start and end of the induction.
However, it is fairly common for people to forget a 'where' clause and write something like:
If 'self' is an inout type, turn the base type into an lvalue type with the same qualifiers.
If all mismatches are of this type, we'll return a different closeness for better diagnoses.
If layout depends on generic parameters, we have to load the offset from the class metadata.
If lstat() fails we still can return successfully if there are no more path components left.
If none of them can decrement our ptr value, we can move the retain over the ref count inst.
If the builtin parameter has no type hints to cause coercion, this function returns TBottom.
If the extra tag bits are zero, we have a valid payload or extra inhabitant (checked below).
If the method is private, the above case is the only case where we'd know it was accessible.
If the module is being built with -sil-serialize-all, everything has to have public linkage.
If the parent DIE was an object type, fill the supplied vector with the template parameters.
If the pattern didn't get a type, it's because we ran into some unknown types along the way.
If the potential archetype has been bound away to a concrete type, it needs no requirements.
If the result type matches the context, remove the context type from the prefix of the name.
If the second operator's precedence is lower than the min precedence, break out of the loop.
If the tag bits do not fit in the spare bits, the remaining tag bits are the extra tag bits.
If the thread mode is Normal we let other threads with interrupts go ahead and process them.
If the time of day is not equal to midnight then we need to adjust for daylight saving time.
If the type has no name and no structure name, but is not anonymous, generate a name for it.
If the type is generic, check whether its generic arguments are also bridged to Objective-C.
If there are any / obvious conflicts between the structure of the two types, / returns true.
If there is a parent context, add the generic parameters and requirements from that context.
If there should be one but it's not present or can't be loaded, we have to run all the jobs.
If this ambiguous store is only of trivial types, then we don't need to do anything special.
If this class was defined in Objective-C, perform the lookup based on the Objective-C class.
If this decl context is a plain old serializable decl, queue it up for normal serialization.
If this initializer overrides a 'required' initializer, it must itself be marked 'required'.
If this type has no linkage or pseudo-linkage, it matches nothing else, so just retrieve it.
If we did not pass in a None and the optional is set to true, add the user to our error set.
If we do not have any more information, just use the general memory behavior implementation.
If we don't have an incoming value for each one of our predecessors, just return SILValue().
If we ended up here, it's because we have two operators with mismatched or no associativity.
If we entered an initializer context, contextualize any auto-closures we might have created.
If we have a paren expr and our contextual type is a ParenType, remove the paren expr sugar.
If we have a primary input and it's a filename with extension "sil", treat the input as SIL.
If we require a prefix operator and the witness is not a prefix operator, these don't match.
If we're binding to an empty existential, we need to make sure that the conversion is valid.
If we're in a protocol extension initializer, we haven't allocated "self" yet at this point.
If we're looking in a particular context and it doesn't match the entry context, we're done.
If we're synthesizing forward declarations, we don't want to pull in the module too eagerly.
If we're working with an r-value, just expand it out and emit all the elements individually.
Implicitly autorelease the return value if the function's result convention is autoreleased.
In a closure, non-parameter locals can have types other than Uninit after the prologue runs.
In case the last user is a TermInst we add all successor blocks to the frontier (see below).
In either case, the size and structure of a type is opaque to the code manipulating a value.
In the common case, we don't have to perform any resolution and we can just return the token
In the first block we start at the allocation instruction and not at the begin of the block.
IncludeNodeAtLocation, / Like ExcludeNodeAtLocation, and skip past any node at the location.
Increase the limit to the maximum possible value, so that this method won't be called again.
Initialize the class's own parent pointer if it has one and it wasn't emitted as a constant.
Insert a DbgAssertRefCount instruction after each place we define a maybe-refcounted SSATmp.
It decides which helpers/builtins should use eager vmreganchor based on profile information.
It must be some other problem, such as failing to infer a generic argument on the enum type.
IterInit* and IterNext*, Both implicitly free their iterator variable on the loop-exit path.
Keep around the dependence on the open instruction unless we've actually eliminated the use.
Like ValueIsPHI but also check if the PHI has no source / operands, i.e., it was just added.
Loop over container1, only copying over key/value pairs where the key is present in the Set.
Lower the struct's fields using substitutions from the TypeRef to make field types concrete.
Make sure that if operand is generic that its primary archetypes match the function context.
Make sure that if we are a _adoptStorage call that our storage is uniquely referenced by us.
NOTE: we do not perform the RLE right here because doing so could introduce new LSLocations.
No action required if the function returns 'Void' or that the function is marked 'noreturn'.
Not directly calling argsv.toFollyDynamic() as that creates a folly dynamic object, not list
Note that we don't update the original block, but instead make a copy and update it instead.
Note: whenever you update this function, also update TypeChecker::deriveProtocolRequirement.
Now that an init was found, it is safe to substitute all recorded uses with the copy's dest.
Ok, either O1, O2 are the same or we could not prove anything based off of their inequality.
Only allow allocation of resolved overload set list items using the allocator in ASTContext.
Otherwise the destroy (which can invoke user code) could see invalid memory at this address.
Otherwise, if the requirement is settable, ensure that there's a materializeForSet function.
Otherwise, this is a retain of an object that is not statically known to be the same object.
Otherwise, we're going to have to call copyOrInitValueInto, which only takes a single value.
Prefer Convenience over ConvenienceFactory, but otherwise prefer leaving things as they are.
Produce a Substitution for a type that conforms to the standard library / _Pointer protocol.
Propagate values of branched upon values along the outgoing edges down the / dominator tree.
Push the generic context down to the SIL TypeConverter, so we can share archetypes with SIL.
Record either the canonical signature or an indication that this is the canonical signature.
Redundant specifiers are fairly common, recognize, reject, and recover from this gracefully.
Replace a dependent member with a fresh type variable and make it a member of its base type.
Replace load sequence which may contain / a chain of struct_element_addr followed by a load.
Report a sign error if the input parameter is a negative number, when interpreted as signed.
Return a function which takes two pointer arguments and returns / the first one immediately.
Return a pattern corresponding to the formal parameters of the / current Objective-C method.
Return false if the type of any local is bottom, which can only happen in unreachable paths.
Return the estimated amount of memory that can be safely taken into the current process RSS.
Return the type metadata access function for the given type, if it / is guaranteed to exist.
Returns a list of tokens, but with various normalizations performed based on the token type.
Returns an Interrupt site for the function that called the function that contains this site.
Returns true if the instruction can be duplicated without any special / additional handling.
Returns true if we can prove that the two input SILValues which do not equal / cannot alias.
Save the file position of chunk index, and allocate enough space for each chunk_info block .
Since the allocation has already been promoted to an alloc_stack, we know it doesn't escape.
Since we know what the output type is, we can set it as the favored type of this expression.
So Java will handle the translated exception, fall through and return a good version number.
So it's safe to just bump the refcount back up here, and pretend like nothing ever happened.
Start tracking the read to this LSLocation in the killset and update the genset accordingly.
StringLiteralExpr is a weird case, implicitly generated by string literal expansion in Sema.
Strip the struct load and the address projection to the location / holding the array struct.
Subsequent optimization passes will see the load and propagate the available values into it.
TODO: class metatype to/from AnyObject TODO: protocol concrete metatype to/from ObjCProtocol
TODO: investigate whether these should be removed, in favor of definitions in other classes.
Take the last N direct outer results, tuple them, and make that a / new direct outer result.
The AsyncRet unique stub may or may not be able to do fast return (jump to parent directly).
The NativeImpl opcode may appear later in the function because of Asserts generated in hhbbc
The code in readSILInstruction assumes that such a situation means that fn is a declaration.
The compiler specializes the two-arg version of min() and max() into an HNI provided helper.
The constraints themselves never fail, but they help deduce type variables that were opened.
The declarations are in different source files (or unknown source files) of the same module.
The index into the source file's Decls at which to start / typechecking the next REPL input.
The inferred availability required to access a group of declarations / on a single platform.
The layout of the container depends on whether it's class-constrained or a special protocol.
The memory content can be stored in this ConstantTracker or in the caller's ConstantTracker.
The new partial_apply will no longer take any arguments--they are all expressed as literals.
The node wasn't created by this extension, so doesn't already have a DOMDocument - make one.
The only purpose here is / to catch obviously broken attempts to copy or destroy the buffer.
The only thing that matters in the inner arrays is the first element being a MySQL instance.
The order of these methods is so that the first ones win on case insensitive name conflicts.
The outer result can be indirect, and it doesn't necessarily have an abstraction difference.
The property is public (or we're in the debugger and we are bypassing accessibility checks).
The reason is that it's trivially CSEable, so we might as well make it available everywhere.
The sole purpose of marking the flexible array member is so we know where the suffix begins.
The table passed to s_callMap's constructor describes helpers calls used by translated code.
Then we also autoprime B when it gets used, which advances C past some perfectly valid data.
There's still a placeholder to claim if the target type is thick or there's an error result.
They need to both be spill frames affecting the same addresses, or both not be spill frames.
This allocates copies of / the ParamDecls, so they can be reparented into a new DeclContext.
This also more correctly handles the implicit ReturnStmt injected into single-expr closures.
This can occur because we haven't run DCE before DI and this may be a synthesized statement.
This format is designed to accurately represent API (and, in future, ABI) of a Swift module.
This function may also throw an UnknownInputException if the reffiness cannot be determined.
This is also required for SSA construction in dominatorBasedSimplifications' jump threading.
This is map between LSLocations and their available values at the end of / this basic block.
This is the first unpassed arg with a default value, so this is where we'll need to jump to.
This may be different than the IR type returned by the call itself due to ABI type coercion.
This may change in the future, if we start using PGO for ordering of checked_cast_br checks.
This order keeps the labels from dangling on weird sides of .try_fault or .try_catch braces.
This part is done in parallel: no passes are mutating anything, just reading from the Index.
This remains here temporarily to ease the transition to the new meaning of YYERROR, for GCC.
This represents AnyPatterns / (that is, 'var (_)') that bind to values without storing them.
This type of "rounding" allows us to avoid calculating the length of the year in most cases.
Thus, we optionally deviate from the correct algorithm just enough to avoid such collisions.
To conform to PHP behavior, we need to set the internal cursor to point to the next element.
Translate from the Serialization associativity enum values to the AST / strongly-typed enum.
TypeBase*'s are not necessarily unique, but name mangling is too expensive to do every time.
UncheckedTakeEnumDataAddr is safe to apply to Optional, because it is a single-payload enum.
Undo the NUL-termination kindly provided by process() but leave at least one byte to look at
Variadic capture params don't need types since they'll be Arrays as far as HNI is concerned.
Verify that the list of all archetypes matches what we would derive from the generic params.
Visit the protocols referenced by the given type, which was / uttered at the given location.
We can optimize this by localizing the initialization to an alloc_stack and loading from it.
We can stay packed if the index is m_size, and the operation does the same thing as LvalNew.
We don't have intimate enough knowledge of CF refcounting to check for that dynamically yet.
We don't need to decref value---it's a bytecode invariant that our Cell was not ref-counted.
We have enough double args to hit the stack but we haven't finished filling the GP regs yet.
We have some special translations for common combinations that avoid extra conversion calls.
We include it way down here because we want the user's section 1 to have been scanned first.
We measure the cost of inlining each callstack and stop when it exceeds a certain threshold.
We might reasonably get called by generic code, like a demangler that produces type objects.
We need only a few extra variables to hold the errors immediately around the current column.
We only need the retain/release for the guaranteed parameter if the call could release self.
We parse it last, though, to make sure that it can use decls from other files in the module.
We retain the brace statement that the user wrote, but actually model this as if they wrote:
We should really just change that, but that's an annoying change to make to Clang right now.
We use VarDecls and SubscriptDecls to produce completions that refer to getters and setters.
We will re-import and set only the constants that have been now bound to their proper value.
We work around that by making sure we trigger this function statically before main() starts.
We're making the expr have a function type, whose result is the same as our contextual type.
We've already determined we should be able to inline this, so we expect it to have happened.
When a function with these semantics returns a new array, the new array is already incref'd.
When a task finishes, we need to reevaluate the other commands that might have been blocked.
When all registers are in use, find a good interval (possibly `current') to split and spill.
When using Objective-C allocation, convert the metatype argument to an Objective-C metatype.
When we're performing Objective-C dispatch, we don't have an allocating constructor to call.
Without Objective-C interop, foreign classes must still use Swift native reference counting.
XDebugServer still thinks we're running because we haven't run XDebugServer::breakpoint yet.
XXX for auth type, need to make sure that the auth type is actually supported before setting
Zend has a very specific include order, so I can't do this class' header before zend.h sadly
__call cannot be static, this should be enforced by semantic checks defClass time or earlier
backtrace_symbols requires that we free the array of strings but not the strings themselves.
decRefGeneric is called via callfaststub, whose ABI claims that all registers are preserved.
destroy_addrs commonly exist in a block of dealloc_stack's, which don't affect take-ability.
double indirection to have the zend engine destroy the new zval that results from separation
if we did not manage to read the seed file, we should not write a low-entropy seed file back
m_lastToken holds the last "signficant" token, so don't update it for comments or whitespace
mark the descriptor close-on-exec, so that it won't be inherited by potential other children
new parent() inside a trait, code statically not inside any class, or a class with no parent
o Instructions that "produce references" (generally instructions that allocate new objects).
php_signal using sigaction is derived from Advanced Programing in the Unix Environment by W.
scanf.c -- This file contains the base code which implements sscanf and by extension fscanf.
take a guess and double buffer size when over: still wasting, and it may not save that much.
terminateOwnedWebWorker mutates m_ownedWorkers so collect all the workers to terminate first
unless we allow an arbitrary number of diagnostics, in which case we want to reprocess this.
(All of the base, direct target, and GOT entry need to be pointer-aligned for this to be OK.)
/ / The caller has already proven that lifetime of the value being copied ends / at the copy.
/ FIXME: This notion should go away, because it's impossible to expand / out "all" archetypes
/ FUNCTOR should have signature: /   void (size_t index, const Metadata *type, size_t offset)
/ TODO: Use name from witness table here to lookup witness table instead of / recomputing it.
3) A Hack-specific reserved typehint while in the global namespace when HH syntax is enabled.
A StaticString can only be initialized by a StaticString constructor or StaticString::init().
A base protocol is witnessed by a pointer to the conformance / of this type to that protocol.
A class for finding a vtable entry offset for a method argument / in a class metadata object.
A common pattern for us is to load an address into the frame pointer right before a PHP call.
A convenient macro for delegating an operation to all of the / various tuple implementations.
A result plan which evaluates into the sub-components / of a splittable tuple initialization.
A small optimization to reduce the graph size: we re-use the first field node as result node.
A whitelist exists for builtin functions which are safe to call without a valid caller frame.
According with ABI, the GP index must be incremented after a floating point function argument
Adapted from: apptype.c, Written by Eberhard Mattes and put into the public domain  Notes: 1.
Again, don't call the failure callback unless there was an uncaught exception or fatal error.
Algorithm: Maintain a GIFBITS character long buffer (so that 8 codes will fit in it exactly).
All other predecessors, where the outcome of the checked_cast_br along the path is not known.
All symbols defined below should begin with yy or YY, to avoid infringing on user name space.
An array expression can be of a type T that conforms to the ArrayLiteralConvertible protocol.
An intentionally funny-looking-in-core-dumps constant for uninitialized instruction pointers.
Args should be a list of pairs, the first number is a TypeID, the second number is a ValueID.
As a special case, mangle nothing if there's a single generic parameter at the initial depth.
Before doing so, strip attributes off the function type so that they don't confuse the issue.
Bind all the irrefutable patterns in the given row, which is / nothing but wildcard patterns.
Bind all the irrefutable patterns in the given row, which is nothing / but wildcard patterns.
Build up a Set containing the keys that are present in all the containers (except container1)
Builtin arguments should never be substituted, so use the value's type as the parameter type.
Check for the existence of this function in another module without loading the function body.
Check if this alloc_stack is only initialized once by means of a single init_existential_ref.
Check if this name already was defined as a type alias, and if so make sure it is compatible.
Check to see if we can pairwise coerce Swift's exploded scalars to Clang's expanded elements.
Check to see if we can pairwise-coerce Swift's exploded scalars to Clang's expanded elements.
Check whether this CF typedef is a Mutable type, and if so, / look for a non-Mutable typedef.
Clang tracks the redefinition types separately, so it can provide fallbacks in certain cases.
Compute lifetime intervals and use positions of all Vregs by walking the code bottom-up once.
Compute the updated 'from' tuple type, since we may have performed some conversions in place.
Compute what the vtable for each Class will look like, and build up a list of all interfaces.
Convert zval to formattable according to message format type or (as a fallback) the zval type
Copy a string in Exif header to a character string returns length of allocated buffer if any.
Copy into YYRESULT an error message about the unexpected token YYCHAR while in state YYSTATE.
Create a phi in the continuation block and use the loaded value if we branched directly here.
Create a var member for this struct, along with its pattern binding, and add / it as a member
Currently NewElem and Elem InFoo effects don't need to do anything different from each other.
Determine whether this type is a single value that is passed / indirectly at the given level.
Diagnose an argument labeling issue, returning true if we successfully / diagnosed the issue.
Don't consume 'throws', so we can emit a more useful diagnostic when parsing a function decl.
Emit symbols for eliminated dead methods, which can still be referenced / from other modules.
Emit the retain and release that keeps the argument life across the callee using the closure.
Emits code to invoke the specified nonpolymorphic CalleeFunc using the / provided SILBuilder.
Encode the fixity as a filter on the func decls, to distinguish prefix and postfix operators.
Erase all of the reference counting instructions (in reverse order to have no dangling uses).
Every use position must be inside one of the ranges, or exactly at the end of the last range.
Expand the given location and val into individual fields and process them as separate writes.
FIXME: Could allow a subclass here, but the rest of the compiler isn't prepared for that yet.
FIXME: LLVM's YAML support does incremental parsing in such a way that for-range loops break.
FIXME: MC breaks when emitting alias references on some platforms (rdar://problem/22450593 ).
FIXME: Some opaque types do have manglings, but we don't have enough info to figure them out.
FIXME: This admits varargs tuples, which should only be handled as part of argument emission.
FIXME: put the attributes into forward source order so we don't need to iterate through them.
FIXME: rdar://16320042 - For properties, we don't have a useful location for the 'var' token.
Filtered Image Rescaling Based on Gems III - Schumacher general filtered image rescaling (pp.
Find the / lifetime endpoints reached by each store of a refcounted object into the / object.
Find the source ranges of extraneous default arguments within a / call to the given function.
Find the tag associated with our BB and set the state of the enum we switch on to that value.
For Objective-C classes we need to arrange for a msgSend to happen when the method is called.
For Objective-C protocols, check whether we have a class that conforms to the given protocol.
For additional tags, we use discriminator bit(s) to inhabit the full bit size of the payload.
For legacy purposes, SetL expects its immediate argument to be present on the symbolic stack.
Free the authdb too as it defaulted to 'admin' when no db was passed as the connection string
Fully dead store - stores to all the components are dead, therefore this instruction is dead.
Getters and Setters are anonymous functions, so we forge a name using its parent declaration.
Given whether it's known to be a definition, resolve an optional / SIL linkage to a real one.
Hack: mark any method named "print" with less than two parameters as warn_unqualified_access.
Helper for the breakpoint commands that returns an xml node containing breakpoint information
Helper functions to verify statically whether source-location functions have been overridden.
Helper method which initializes this state map with the data from the / first predecessor BB.
If 'class' is a modifier on another decl kind, like var or func, then treat it as a modifier.
If PHP disables a particular compression, then it is the same as if encoding is not accepted.
If a non-default begin parameter was specified, first iterate over all the compilation units.
If all of the predecessors of this successor are unreachable, check if it contains user code.
If all the bits corresponding to the stack range are dead, we can eliminate this instruction.
If all the elements have default values, the scalar initializes the first value in the tuple.
If it does, we need to rerun / the data flow on this block's successors to reach fixed point.
If it hasn't started, perform one "next" operation before the actual operation (auto-priming)
If nonzero, form the case index from the extra tag value and the value stored in the payload.
If that's not present, this conformance must be implied by some associated-type relationship.
If the bound pattern is a single value, use a DeclRefExpr on the underlying Decl to print it.
If the call is naturally to an explosion, emit it that way and then initialize the temporary.
If the case value is provided to us as a BB argument as long as the enum is not address-only.
If the default value is returned, it might mean either Bottom or Top, so we need more checks.
If the execution engine doesn't understand the source, the content will be spit out verbatim.
If the extract param is non-scalar, and we've made changes already, dont try to optimize yet.
If the first function has fewer effective parameters than the second, it is more specialized.
If the function returns an inner pointer, we'll need to lifetime-extend the 'self' parameter.
If the generic signature differs from that of the nominal type, it's a constrained extension.
If the insert into the files collection fails, it fails - and nothing to cleanup there anyway
If the mask is no longer than the stored spare bits, we can just apply the stored spare bits.
If the member type uses 'Self' in non-covariant position, we cannot use the existential type.
If the method has a related result type that is representable in Swift as DynamicSelf, do so.
If the objc type has any generic args, convert them and bind them to the imported class type.
If the string contains non-ASCII and the type can handle UTF-16 string literals, prefer them.
If the subexpression is a monadic optional operation, peephole the emission of the operation.
If the user error handler decides to allow execution to continue, we return the empty string.
If there is only one possible alternative for this method, try to devirtualize it completely.
If there's nothing but whitespace before the cursor, indent to the next 2-character tab stop.
If these style options are changed, compute_hhvm_argc() will need to be updated appropriately
If this entity was obsoleted before or at the minimum platform version, consider it obsolete.
If this looks like a plausible escape character, recover as though this is an invalid escape.
If this type variable represents a literal, check whether we picked the default literal type.
If we aren't about to (re-)connect then all we care about if it was a known connection or not
If we can propagate type sugar from input arguments types to the result of / an apply, do so.
If we don't have an exact type, then we can't say for sure the class doesn't have the method.
If we don't have an unreachable inst at this point, this is a terminator we don't understand.
If we ever lose a light process, stop the server instead of proceeding in an uncertain state.
If we have a selfType (i.e. we're not in the parser before we know such things, configure it.
If we have an unbound generic type, bind the type to the archetypes in the type's definition.
If we haven't found any other bindings yet, go ahead and consider the defaulting constraints.
If we previously decided not to try to hoist checks for this SSATmp then skip this check too.
If we want dynamic lookup and we're searching in the AnyObject protocol, note this for later.
If we're asking for something after the error parameter, slide the parameter index up by one.
Import the context of this declaration, which has the side effect of creating instantiations.
In practice, the things we low_malloc are both long-lived and likely to be randomly accessed.
In the common case there aren't any strong iterators, so we can just update m_used and return
In the context of a trait alias rule, only method access and visibility modifiers are allowed
Initialize destination --- called by jpeg_start_compress before any data is actually written.
Instead, we leave the lower bound at zero, but set a memory support bit for the new location.
Interfaces implemented by the same class never share a slot, so normal addition is fine here.
It can't be invalid, and it can't be the same thing twice in a row, so we just use a counter.
It cannot currently be used on let's since we don't have a mutability model that supports it.
It is not clear when the current rule based calendar replaced the observation based calendar.
It's more maintainable to just white-list the instructions that do* have mandatory arguments.
It's possible to subtype RAT::Array types, but it's potentially O(n), so we just don't do it.
Leave an empty space in the ManagedValue sequence and remember that we had an inout argument.
Like FRedundant, but the load is impure---rather than killing it, we can factor out the load.
Like UnsafeRefBitCast, allow class existentials to be truncated to single-pointer references.
LinkInfo should be able to refer to the allocating constructor rather than inferring it here.
LiveOutBlockState - Keep track of information about blocks that have / already been analyzed.
Look for other uses of DominatingCondition that are either: dominated by the DominatingSuccBB
Mangling the archetypes in this case can be very misleading, so we just mangle the base name.
NB: don't want to include the data_source in the error message as it might contain a password
NOTE: Using Filename.data() here relies on SourceMgr using const char* as buffer identifiers.
Never consider removing the first argument for a "set" method with an unnamed first argument.
No instructions in the middle of a block should have taken edges, or be an unconditional Jmp.
None of the above worked, so try to make the smallest union we can based on the pointer type.
Note that if the same VarEnv is used across multiple frames, the most recent FP must be used.
Note: CallContext contains the caller Context primarily to reduce the contention in this tbb.
Note: there must not be a mixture of XPG3 specs and non-XPG3 specs in the same format string.
Notice that this scan is only block local because at this point we don't use post-dominators.
Now that we have our result as an optional, we can use an enum projection to do all the work.
ObjC doesn't have a notion of class properties, so we'd only do this for instance properties.
Ok, so now we know that the ref counted value we are tracking was not blotted on either side.
On failure, emit the specified error diagnostic, and a / note at the specified note location.
One-to-one case insensitive map, where the keys are static strings and the values are some T.
Only J-edges, whose target level is at most Root's level are added to the dominance frontier.
Only free the iterator for the current loop if this is NOT the last level to continue out of.
Only purge if the thread's assigned arena is one of those created for use by request threads.
Other cases could leave the base as anything (if nothing else, via ArrayAccess on an object).
Otherwise, we can type-check as the enum type, and insert a cast from the outer pattern type.
Otherwise, we cannot give it a fixed offset, even if all the previous elements are non-fixed.
Otherwise, we need to overcorrect and set the adjustment to the main timezone + 3600 seconds.
PHP 7 requires IEEE compliance (+/- INF and NAN) with the result of dividing a value by zero.
PSFS_ERR_FATAL doesn't raise a fatal in Zend - appears to be treated the same as PSFS_FEED_ME
Partition the set of conflicts to put the conflicts that involve this source file at the end.
Performs an insert operation and tests that the result matches what we get from the std::map.
Pre: mutex already held, or no other threads may be able to access this (i.e. it's the ctor).
Prepare a call using ObjC method dispatch without applying the 'self' and / '_cmd' arguments.
Previous parameters are definitely in scope, but we don't really know how to type-check them.
Push the symbolic path name to the specified element number onto the / specified std::string.
Rectify the (possibly different) types determined by the / getter and setter for a subscript.
Refer to the stacks thru separate pointers, to allow yyoverflow to reallocate them elsewhere.
Releases of the box arguments get replaced with ReleaseValue of the new object type argument.
Remove the expression from being in the list of decls to execute, we're going to reparent it.
Replace generic type parameters and associated types with their witnesses, when we have them.
Required constructors (or overrides thereof) have their allocating entry point in the vtable.
Retrieve the argument labels that are provided for a member / reference at the given locator.
Return true if the conversion from fromType to toType is an invalid string / index operation.
Returning false indicates a failure to communicate with the client (for commands that do so).
Retypecheck the callee expression without a contextual type to resolve whatever we can in it.
Right now it's just here because we need to think about and test it before removing that set.
See comments in listAssignmentVisitLHS and listAssignmentAssignElements for more explanation.
Should be C calling convention, but NSApplicationMain has an overlay to fix the type of argv.
SimpleValue - Instances of this struct represent available values in the / scoped hash table.
Simplified version of is_numeric_string which also allows for non-numeric garbage Because PHP
So instead we always store as i8* and require the bitcast whenever we change representations.
So what we do here is map the underlying types of those typealiases back to the builtin type.
Sort these subclasses in the order they should be tested by the speculative devirtualization.
Store a copy of this value with independent ownership into the given / uninitialized address.
Store the important parts of the exception in non-thread vars to bubble up during unserialize
Substituted types are uninteresting sugar that prevents the heuristics below from kicking in.
Swift extensions are printed with their associated type unless it's a cross-module extension.
TODO: If we know the type statically has extra inhabitants, we know there are more witnesses.
TODO: avoid unnecessary repeat lookup of ObjCClassWrapper/ForeignClass when the type matches.
TODO: use the known fast rgba multiplication implementation once the new formats are in place
The InOutDeshadowing guaranteed optimization will eliminate the variable if it is not needed.
The actual error will be diagnosed when we perform full semantic analysis on the enum itself.
The anchor for the constraint is almost always an OverloadedDeclRefExpr or UnresolvedDotExpr.
The configuration command line strings were already processed above Don't process them again.
The failure callback may have defined a class or type alias for us, in which case we're done.
The function reference and call file/line are stored when tracing/profiling on function enter
The generic function currently always requires indirection, but pointers are always loadable.
The high level algorithm is that via the loop info we already know for / each subloop: / / 1.
The invariant on the out-parameter is that it's always zeroed, so there's nothing to do here.
The key thing to notice is that in general this cannot happen due to critical edge splitting.
The limit is just there to not run into an infinite loop in case of an unreachable CFG cycle.
The most-recently-returned value is always left at the beginning of the list after retrieval.
The playground instrumenter changes the AST in ways that disrupt the SourceKit functionality.
The server already has read preferences configured, but we're still trying to set slave okay.
The spec says that's an error, so we throw an exception with code 23 (defined in php_mongo.h)
The stub and the eventual targets take rvmfp() as an argument, pointing to the callee ActRec.
The type-check of the constructor body will introduce default initializations of the members.
Their presence requires significant modifications to the way the rest of the algorithm works.
Therefore the overflow flag is known to have a value of 0 if / simplification was successful.
Therefore, only colors that are within minmaxdist of some part of the box need be considered.
These properties must be dynamic because you can't declare a property with a non-string name.
This bans some trickery that the redefinition types enable, but is a more sane model overall.
This can happen if we are trying to debug an eval() call or a call issued by debugger itself.
This file defines the DiagnosticEngine class, which manages any diagnostics emitted by Swift.
This file defines the data structure that holds all the debug info we want to emit for types.
This file implements IR generation for algebraic data types (ADTs, or 'enum' types) in Swift.
This file implements the portions of the IterativeTypeChecker class that involve name lookup.
This function return false if we are certain instantiating rleaf would be a fatal at runtime.
This gives a return value similar to that of ecvt, except that trailing zeros are suppressed.
This is a version of the initializer which receives a pre-allocated buffer as first argument.
This is necessary because FailureDiagnosis::diagnoseExprFailure doesn't do this for closures.
This is needed for code that uses parent:: to call through to the correct underlying function
This is safe to do since when erasing in a BlotSetVector, we do not invalidate the iterators.
This is specialization of the memcpy line below with specialization for values of 1, 2 and 4.
This is unapplicable to thin_to_thick_function /    since they do not have any captured args.
This means that all successor regions of any region /cannot/ be a region representing a loop.
This must happen after rechaining the predecessors, because that's where the types come from.
This pass eliminates store only alloc_ref objects that have destructors without side effects.
This pvalid will point to something we can move into the first slot if alreadyValid is false.
This will ensure we can properly annotate TypeRepr with a usr in AnnotatedDeclarationPrinter.
This will return 0 if the breakpoint is not in the set and so the breakpoint is not unmatched
Thus we only need to check the field no and tuple type which are not represented as operands.
To conform to PHP5 behavior, we need to set the internal cursor to point to the next element.
To save much memory, we overlay the table used by compress() with those used by decompress().
Transform the ClosureExpr representation into the "expr + return ()" rep if it isn't already.
Trivial and, in the case of a take, bitwise-takable payloads, can all share the default path.
Until SILDebugScopes are properly serialized, bare functions are allowed to not have a scope.
Unwrap a value of a wrapped integer type to get at the juicy / Builtin.IntegerN value within.
Use the declaration's availability for the context when checking the bodies of its accessors.
We are not going to transfer ownership of obj to the iterator, so arrange to decRef it later.
We can only burn in the Class* if it's unique or in the inheritance hierarchy of our context.
We can represent all integers provided here since getIntegerIndex only returns 32 bit values.
We can't dump any more of the buffer, unfortunately, because we don't keep track of the size.
We do this in a separate pass over Builtins.def to avoid creating a bunch of identical cases.
We don't care about implicit ones because they don't have useful source location information.
We don't need to merge the source subgraph of nodes which have the global escaping state set.
We have to take special care about floating point operations because of potential NaN values.
We just need a slightly better destructor analysis to prove / that it only releases elements.
We know when we have one of these because it has to be freed through a different entry point.
We need to intercept the start routine in order to make sure each thread has a MemoryManager.
We need to store the child calls so we don't have to find them again in writeCacheGrindFrame.
We only need to apply the payload operation if the enum contains a value of the payload case.
We only need to handle this for self props, because we don't track static-ness on this props.
We really don't like not matching at token starts, but if it's a long match give some credit.
We rely on the region selector to decide which arcs are appropriate to include in the region.
We should have handled the cases where there are no significant conditions in the early exit.
We update the predicted type for boxed local values in some special cases to something smart.
We want to copy the elements and the hash separately, because the array may not be very full.
We want to determine whether our own extension has already been included in the lookup table.
We'll reflowTypes after we're done with all of this to get everything downstream specialized.
When creating a CompilerInvocation, ensure that the driver creates a single frontend command.
When the base is actually a subtype of array, we handle it in the callers of these functions.
When used as a / tuple element in a function signature, such names become part of / the type.
Whether or not this is the last loop to break out of, we will be freeing the current iterator
`this' is being torn down now---be careful about where/how you dereference this from here on.
clear lower 32bits on destination move lower 32bits to destination and keep the higher 32bits
createNominalType - Create a new nominal LLVM type for the given / protocol composition type.
don't clone the function statement or the vars, since they are shared with the function scope
emitOrDeleteBlock - If there are branches to the specified JumpDest, / emit it per emitBlock.
for builtin calls, since we don't push the ActRec, we must determine the reffiness statically
now run through properties that are only going to be returned from a server, not text headers
parseMatchingToken - Parse the specified expected token and return its / location on success.
store the link's read preference to backup, and overwrite with the cursors's read preferences
unchecked_ref_cast_addr may accept nonreference static types (as a result of specialization).
visitIfCondition() serves as a helper method for visiting the condition of an "if" statement.
we have a projection to the next level children, create the next level children nodes lazily.
we've found the return value, now iterate on the CFG to find all the post-dominating retains.
(If a property type ever grows, the interpreter could infer something incorrect at some step.)
(If the equivalence class of an element has already been merged with a previous one, skip it.)
-- The lowest level number of any predecessor below the given node in the post-dominator tree.
...and the predecessor instruction is a release_value on the same value as our retain_value...
/   - Partial application of some decls isn't allowed due to implementation /     limitations.
/ / FIXME: we shouldn't just drop the original abstraction pattern / when we can't reabstract.
/ / TODO: In the "No" case, we can emit a fixit adding a default / initialization of the type.
/ / The collected use points will be consulted during forward and backward / copy propagation.
/ / This code is meant to enable RCIdentity to be ascertained in the following / cases: / / 1.
/ / We perform this computation by checking if V is an enum instruction without / an argument.
/ Both containers must be of the same existential type representable with no / witness tables.
/ Both containers must be of the same existential type representable with one / witness table.
@note If you want to scan bytes that may contain NUL values, then use yy_scan_bytes() instead.
A class for finding the start of the generic requirements section / in a type metadata object.
A template for generating target-specific implementations of the / RemoteASTContext interface.
Aggregate composition is like assigning the aggregate fields to the resulting aggregate value.
All wrappers should have ODR linkage so that a linker can detect them and leave only one copy.
An expression can be converted to an auto-closure function type, creating an implicit closure.
Analyze every method in the class until we reach a fixed point on the private property states.
Any other bytes present in the string should therefore be emitted as-is, without any escaping.
Arena 1, the low_malloc arena, also uses this setting, but that arena is not tuning-sensitive.
As such, if we're continuing a non-case pattern, do a bit more lookahead to disambiguate this.
Assume that the returned 'self' is the appropriate subclass type (or a derived class thereof).
Both the left- and right-hand sides are implied, so determine where the conformance should go.
But I don't understand their uses and interactions well enough to feel comfortable fixing now.
By default, just visit the declarations that are actually injected into the enclosing context.
Case numbering must not depend on any information that is not static in this resilience scope.
Change the DeclContext for any variables declared in the defer to be within the defer closure.
Check whether the process's active memory limit has been exceeded, and if so, stop the server.
Closures and initializers can't themselves be generic, but they can occur in generic contexts.
Collect any required metadata for a witness method from the end of / the given parameter list.
Compute the type to which the source must be converted to allow assignment to the destination.
Copy the function witnesses in, either from the proposed witnesses or from the standard table.
Countable types correspond to the set of types in HHVM which are explicitly managed by the GC.
Create a new apply instructions that uses the concrete type instead / of the existential type.
Create a value for the condition of the terminator that flows along the edge / with 'EdgeIdx'.
Currently it takes every allocation and chops them up into their smallest non-captured pieces.
Currently only EagerSyncVMRegs, CallBuiltin, and Call can be adjusted to use the parent frame.
DeadFunctionElimination pass will check if the function is marked and preserve it if required.
Do a quick check at the beginning to make sure that our terminator is actually an unreachable.
Do the actual replacement and put the result back into subject_value for further replacements.
Don't actually poll if another thread is already in a command processing loop with the client.
Don't add the EnumElementDecls unless the current context is allowed to have EnumElementDecls.
Each stack pointer address is followed by the size of the data in use in that stack, in bytes.
Each type constant other than the last one in the chain must refer to a class or an interface.
Emit the basic block that 'return' should branch to and insert it into / the current function.
Enumerate each immediate child expression of this node, invoking the / specific functor on it.
Eventually we'd like to emit an inline cache, which should be faster than calling out of line.
Every time the BBSetOut of a basic block changes, the optimization is rerun on its successors.
Expand the given LSLocation and Val into individual fields and process them as separate reads.
FIXME: Depth won't match when a generic signature applies to a method in generic type context.
FIXME: Figure out how to deal with incomplete types, since that notion doesn't exist in Swift.
FIXME: This should not be needed, but seems to help when stdout is being redirected to a file.
FIXME: We may want to merge this scope with the scope introduced by the stmt-brace, as in C++.
FIXME: We want this issue to disappear completely when single-element labelled tuples go away.
FIXME: that doesn't mean we should physically pass it indirectly at this resilience expansion.
Figure out the actual base type, and whether we have an instance of that type or its metatype.
Find the first unreachable block in the switch so that we could use it for better diagnostics.
Find translations that belong to the selectedFuncId Also returns the max prof count among them
For a given constraint kind, decide if we should attempt to eliminate its / edge in the graph.
For common ancestors to exist they must be on both sides of the baseList at the same positions
For example, getAssignExistentialsFunction relies on being uniqued for different layout kinds.
Form constraints with the greater type on the right (which will be the concrete type, if one).
Format: condition, a list of cases (EnumElementDecl + Basic Block ID), default basic block ID.
GD 2.0 supports 8 bits of color resolution per channel and 7 bits of alpha channel resolution.
GIFCOMPR.C       - GIF Image compression routines  Lempel-Ziv compression based on 'compress'.
Get the NewAggregateBuilder associated with Node or if none is created, / create one for Node.
Given a C parameter declaration whose type is passed directly, / deduce the convention for it.
Given a TrackedStore s1 in blk, and s2 in succ, figure out the new TrackedStore to replace s2.
Given a type metadata pointer, load one of the value witnesses from its / value witness table.
Go back through the loads a second time, rewriting them into a load + bitcast from our source.
Grab the terminator of our one predecessor and if it is a switch enum, mix it into this state.
Handle a store to "x.y" where 'base' is the expression for x and 'decl' is / the decl for 'y'.
Handle a tuple that has been exploded in the input but wrapped in / an optional in the output.
Handle the module-not-found diagnostic specially if it's a top-level module we're looking for.
Heads up that we're assuming CreateSucceeded can't throw, or we won't decref the return value.
If II is the terminator, skip it since our terminator was already processed in our successors.
If a typealias with this name exists in one of the parent protocols, give a special diagnosis.
If any of them do, we advance the sequence for the pointer and create an insertion point here.
If both the first key and value types are bridgeable object types, this can only be an upcast.
If both wrapped types are classes and dest is the superclass of src, simply perform an upcast.
If each is as specialized as the other, and both are constructors, check the constructor kind.
If generator's optional result is address-only, create a stack allocation to hold the results.
If isSourceTypeExact is true, we know we are casting the result of a MetatypeInst instruction.
If that condition is not true, we can still sink to the end of this BB, but not to successors.
If that is not true, you might end up looking at this code in a debugger and now you know why.
If the above was an under estimate, increment the cycle number until the correct one is found.
If the address is marked uninitialized, load through the mark, so that DI can reason about it.
If the archetype doesn't have the requested type and the parent is not self derived, error out
If the archetype is the same as for the 'Self' type variable, return the 'Self' type variable.
If the associated type requirement is satisfied by an associated type, these will all be null.
If the declaration is an accessor, treat its storage declaration as the enclosing declaration.
If the image does not fill the box completely the box is filled with image's background color.
If the metatype is existential, there may be witness tables in the value, which we don't need.
If the parameter is a direct metatype parameter, this is a static method of the instance type.
If the payload value is vacant, or the mask is all ones, we can adopt the mask value directly.
If the sample is Enter, then do not record this function name because it hasn't done anything.
If the type of this expression has a type variable or is invalid, overwrite it with ErrorType.
If the types have unbound generic arguments then we don't know the possible range of the type.
If there is a first argument for a function, include its text along with the base name's text.
If there was an invalid witness that might have worked, just suppress the diagnostic entirely.
If there's no abstraction difference, that can just be in-place into the outer result address.
If these are the first bindings, or they are better than what we saw before, use them instead.
If this already had an entry in the capture list, make sure to merge the information together.
If this argument is not ABI required and has no uses except for debug instructions, remove it.
If this class has designated initializers, everything it imports is a convenience initializer.
If this is a load with a single user that is a return, then this is a return before self.init.
If this is the first error, complain about the junk tokens in-between but re-sync at the 'in'.
If this isn't a function or isn't valid at this uncurry level, treat it as a general mismatch.
If this memory object has multiple tuple elements, we need to make sure to test the right one.
If we delayed emission of this witness table, move it to its rightful place within the module.
If we got an error on the replacement, the subject will be null, and then we will return null.
If we have a value and index list, create a new rvalue to represent the both of them together.
If we have an rvalue base, make sure that the result isn't 'mutating' (only valid on lvalues).
If we have type variables that have been bound to fixed types, look through to the fixed type.
If we haven't hit the ping_interval yet, then there is no need to do a roundtrip to the server
If we imported the result as something trivial, we need to use one of the unowned conventions.
If we only had such users of Agg and Agg is dead now (ignoring debug instructions), remove it.
If we parsed a .sil file that is already in canonical form, don't rerun the diagnostic passes.
If we require a postfix operator and the witness is not a postfix operator, these don't match.
If we took a default argument index for this parameter, but didn't add one, then give it back.
If we're doing a conditional cast, and the ObjC protocol checks failed, then the cast is done.
If we're looking into a metatype for an unresolved member lookup, look through optional types.
If we're only looking to resolve the structure of the type, don't walk into generic arguments.
In Zend, this creates a new store bucket and copies properties, but it does NOT copy handlers.
In addition to releasing instructions (see below) we also add block / arguments as use points.
In case of ties, pick older translations first, in an attempt to start loops at their headers.
Insert a rank that may be lower than the current rank in an appropriate position in the stack.
Instead, special case the one attribute associated with the return type not the function type.
Is this a value that can be unambiguously identified as being defined at the / function level.
It doesn't emit uncalled member functions in a template class, even when using ATTRIBUTE_USED.
Layout has to be done when the value witness table is instantiated, during initializeMetadata.
Likewise, if the indexed type is still marked for conservative scanning, it cannot be ignored.
Look through all of the associated types of all of the protocols to which the parent conforms.
Loop over container1, only copying over key/value pairs where the value is present in the Set.
Make any successors outside of the loop successors of the loop instead / of the exiting block.
Mark that the current context is covered by a 'try', as / appropriate for a debugger function.
Moreover, it doesn't reliably emit function declarations if it thinks the function isn't used.
Move all of the specified instructions from the original basic block into the new basic block.
NB: on the failure path, these C++ helpers do a fixup and read frame locals before they throw.
NDEBUG / verify - Run the SIL verifier to make sure that the SILFunction follows / invariants.
NOTE: when ignore_cert_expiration is true, a custom certificate validation callback is set up.
Need to turn on debugging regardless of the remote mode in order to capture exceptions/errors.
No "real" compiler mode has to go through this path, but it's an option we toggle for testing.
No data before the label means we just go right to ST_END_HEREDOC without forming a new token.
No visible/accessible property, and no applicable magic method: create a new dynamic property.
Non-dependent types in a same-type requirement don't affect whether we mangle the requirement.
Non-metaclasses need us to record things whether primitive construction/destructor is trivial.
Non-payload cases use extra inhabitants, if any, or are discriminated by setting the tag bits.
Not really essential, but these routines were used extensively in GD, so they were moved here.
Note that fields of the class could be tuples, so they may be tracked as independent elements.
Note that this is not just an optimization - the update below would produce the wrong results.
Note that we should always have a catch trace for the special runtime helper exceptions above.
Note, we don't support objects with vtables here (if they may need a this pointer adjustment).
Note: ObjCBool is odd because it's bridged to Bool in APIs, but can also be trivially bridged.
Objects held in m_faults are not refcounted, therefore we need to increase the ref count here.
Once computed, the indexed types will have an index into this table for its associated layout.
Operator identifiers aren't valid in the contexts that are building more specific identifiers.
Opts.RuntimeIncludePath is set by calls to setRuntimeIncludePath() or setMainExecutablePath().
Part of the index building routines happens before the various asserted index invariants hold.
Perform specialized dispatch for a sequence of EnumElementPattern or an / OptionalSomePattern.
Process this requirement, enumerating dependencies if anything else needs to be handled first.
Propagate constants through closure captures by specializing the partially / applied function.
Protocol witnesses always derive all polymorphic parameter information from the Self argument.
Really we don't care about /any/ of the type's members, only that it conforms to the protocol.
Recover by using the original expression as the condition and brace statement as a 'for' body.
Recursively letting them remove themselves via expiry will remove them one by one via erase().
Register the abbreviation codes so these layouts can exist in both decl blocks and sil blocks.
Remap an lvalue referencing a concrete type to an lvalue of a / generically-reabstracted type.
Removes whitespaces from the end, and replaces control characters with ' ' from the beginning.
Replace the generic parameters with their archetypes throughout the types in the requirements.
Return the address of a function which will return the type metadata / for an associated type.
Return whether an IRInstruction may decref one of its sources, if its taken edge is traversed.
Returns the taken block of a terminator instruction if the condition turns out to be constant.
See if we're just checking the array kind or object class of a value with a mostly-known type.
Set up the globals:  g_init_bits - initial number of bits g_outfile   - pointer to output file
Since stores themselves don't have any uses, we can short-cut the classification scheme above.
Since this is monotonic time, I assume the 52 bits of mantissa are enough in the double value.
Since we are already initialized by initPredTopDown(), this has the effect of an intersection.
So in cases where we don't know the key statically we need to union TInitNull into the result.
So our catch blocks are sometimes handling a PHP exception, and sometimes a failure to coerce.
So we return a SILDeclRef on the first lookup result and also / return all the lookup results.
Some instructions can never be "trivially dead" due to side effects or producing a void value.
Spin here and wait for the client to be marked as stopped before going back to the event loop.
Stores to self are initializations store or the rebind of self as part of the super.init call.
TODO: A standard "copy strong array" entrypoint for arrays of single refcounted pointer types.
TODO: If the archetype has a superclass constraint, check that the substitution is a subclass.
TODO: Parallel LLVM compilation cannot be used if a (single) module is needed as return value.
TODO: Would be nice to have a "getMinimumKnownSize" on TypeInfo for dynamic-layout aggregates.
The `live' registers must be preserved across any native calls (and generally left untouched).
The `shouldFreeIter` immediate determines whether we need to call free on our iterator or not.
The actual analysis and optimization do not depend on the copy being linked to call arguments.
The actual error will be diagnosed when we perform full semantic analysis on the class itself.
The anonymous context cannot access protected or private properties, so we can fail fast here.
The caller is supposed to take responsibility for ensuring that 'self' survives a method call.
The env.setLoc here handles dealing with a parameter that was already known to be a reference.
The lower bound must be tracked conservatively to ensure that our transformations are correct.
The member type also needs to be convertible to the context type, which preserves lvalue-ness.
The pattern is to call getTime() outside of the lock and correctTime() while holding the lock.
The return type here describes extra structure for the protocol witness table for some reason.
The second attribute form is for user attributes and only applies if attributeMap is non null.
The specified AbstractStorageDecl was just found to satisfy a / protocol property requirement.
The standard VMRegAnchor treatment won't work for some cases called during function prologues.
The third (quality) parameter for Wbmp stands for the threshold when called from image2wbmp().
Then we do not need to use projection to check for whether all non-trivial fields are covered.
There are a bunch of places where we want to ensure that there's a materializeForSet accessor.
There is only 1 children node and its value's projection path is not empty, keep stripping it.
Therefore UNDEFINED can be defined as 0 in situations where only unsigned numbers are desired.
This allows us to cope with zero-parameter methods with selectors that are longer than "init".
This ensures that old clients can still get a stack trace from a newer server, and vice versa.
This file implements the portions of the IterativeTypeChecker class that involve declarations.
This function is called once, when a class is first loaded, so it is not performance critical.
This generally involves inserting the right kind of type conversions to satisfy PHP semantics.
This handles an optional source wrapped within an existential that Optional conforms to (Any).
This implies that the creation of the / actual arguments in the function is in populateCloned.
This incidentally cannot coincide with most of the awkward cases, like having parent metadata.
This is beneficial if we can then match them up with an increment in some of the predecessors.
This is pretty nasty since things can get added to it *later*, but there's not much we can do.
This is used in situations where the / compiler detects obvious attempts to mutate a constant.
This is used when we're actually acting on information we discovered during liveness analysis.
This isn't great, in that a variable captured by multiple closures will be boxed for each one.
This means that the operands are equal after we move the instruction into the successor block.
This means we are allowed to chain the current exception with the previous one (if it exists).
This only checks more than one element in ill-formed code, so the linear search is acceptable.
This removes pin/unpin pairs / within a basic block that are not interleaved by a may-release.
This saves having to also do it in the array lookup (since it will be stored as an int there).
This should be an invariant based on the check in isCollectionLiteralStartingWithLSquareLit().
This should be pretty rare, but let's go ahead and merge the two equivalence classes into one.
This suggests we've missed the exit event for Bar() and have the exit event for Foo() in hand.
To distinguish between non-payload cases, load the payload value and strip off the spare bits.
To verify that a date is valid, convert it to SDN and then back and compare with the original.
Top-level global variables in the main source file and in the REPL are not lazily initialized.
Try to determine the outcome of the cast from a known type to a protocol type at compile-time.
Type-check the protocol conformances of the enum decl to instantiate its derived conformances.
Typically, we do have a type-checked AST when trying to infer the types of unresolved members.
We can avoid a re-lookup in the very common case of this being equivalent to the r-value type.
We can not perform the forwarding as we are at least missing some pieces of the read location.
We do have to do this after checking fix-its, though, because the diagnostic owns its fix-its.
We do not need it to have the argument anymore, but we do need the instruction to be non-null.
We do this now since it is FAR storage and may affect the memory manager's space calculations.
We don't do this for generic parameters, because those are validated as part of their context.
We just need to grab the fp/rip of the original frame that we saved earlier, and sync rvmsp().
We know where the new fpValue is pointing (relative to the spValue, which we aren't changing).
We may have inferred a TSStr or TSArr with a value here, but at runtime it will not be static.
We may not have a DefCls PC if we're a closure, or a non-top-level class declaration is DCE'd.
We need it if there is a labeled break out of the if statement or if there is an if/then/else.
We need their structure to determine whether we'll be bridging or upcasting the key and value.
We need to make sure that the array container is not aliased in ways that we don't understand.
We store these locally so that we do not continually check if the function is external or not.
We use the version of insert() which takes an initializator list because it is more efficient.
We will check later if the actual callee passes self at +1 later when we know its actual type.
We've aligned and sized the stack so that the high order bits of valid cells are all the same.
When we hit this point, we're committed to the set of potential conversions recorded thus far.
`to' is uninitialized here, so we need to tvWriteNull before possibly causing stack unwinding.
abstract constants are not added to the constant table and don't have any values to propagate.
default handlers Informs the client of all argument strings that may follow this command name.
else timed out, then we have a chance to check m_stopped bit A chance for some housekeeping...
end anonymous namespace / Return true if there are any users of V outside the specified block.
eraseFromParent - This method unlinks 'self' from the containing basic / block and deletes it.
even if line is bad command, we still want to remember it, so people can go back and fix typos
generateLayout can call itself recursively in order to compute a layout for the abstract type.
go to the preclass to find the unresolved TypeStructure to get the original assigned type text
if the input to these functions is known to be integer or double, the result will be a double.
inout uses, escapes, and assignments only happen when some kind of init made the element live.
no incref is needed, since extra values are being transferred from the stack to the last local
php5 xdebug doesn't do anything here with this value, but it is doesn't throw an error, either
ptr can only interact with clsSpec if lhs.m_bits has at least one kGen member of kClsSpecBits.
simplify() rules are not allowed to add new uses to SSATmps that aren't known to be available.
syncPrediction() is called after we update the predictedType and/or value for a LocationState.
"new"-style: setting - underscore, 4 chars of count, 4 chars of salt key - unlimited characters
(Note that we do /not/ set the `hint' field at phi defs, nor do we try to use it at any point.)
*NOTE* This means that unreachable predecessors will not have any BBState associated with them.
/   - 'self.init' and 'super.init' cannot be wrapped in a larger expression /     or statement.
/ / Essentially equivalent to forwardIntoSubtree, except it preserves / AlwaysTake consumption.
/ / If it's not an unsafe addressor, this uses a callback function to / write the l-value back.
/ / In SIL, one can access an aggregate as a whole, i.e. store to a struct with / 2 Int fields.
/ / Note that some functions don't have an implicit 'self' decl, for example, / free functions.
/ Changes the edge value between a branch and destination basic block at the / specified index.
/ Currently, we only do partial dead store if we can form a single contiguous / non-dead store.
2.0.12: Brush palette, image truecolor (thanks to Thorben Kundinger for pointing out the issue)
2.0.22: save the APP14 marker to check for Adobe Photoshop CMYK files with inverted components.
A map from commands that didn't get to run to whether or not they affect / downstream commands.
A polymorphic constructor type needs to refer to the constructor to get its generic parameters.
A thick context parameter is required (but can be passed undef) if an error result is required.
A tuple that can be constructed from a scalar has a value of that scalar type as its supertype.
All of these have to be global to relative reference each other, and the instantiator function.
All the classes are known to be unique, and we just got here, so all were successfully defined.
Allow a local array to be initialized outside the loop via a by-value argument or return value.
An archetype may map to another archetype if the constraint system substituted one for another.
And remove all callee retains that we found and made redundant via owned to unowned conversion.
Any successors that are inside the loop but are the head of a backedge / have the edge removed.
ArrayData::m_size is a uint32_t but we need to do a 64-bit comparison since idx is KindOfInt64.
Assume that casts to or from existential types or involving dependent types can always succeed.
At some point we will expand this to check for regions that are post dominated by unreachables.
Avoid including the iso646.h header because some headers from OS X frameworks are broken by it.
Build up a Set containing the values that are present in all the containers (except container1)
Change the immediate dominators of the children of the block we splitted to the splitted block.
Check if we have a unary '-' with number literal sub-expression, for example, "-42" or "-1.25".
Check that the allocated type is a struct or a tuple and that there are no unreferenced fields.
Check the correctness of error handling within the given enum / element's raw value expression.
Check whether we have already imported a method with the given / selector in the given context.
Checks whether two RefPredVecs contain the same elements, which may appear in different orders.
Clone FRI and PAI, and replace usage of the removed closure argument with result of cloned PAI.
Collect the array.props call that we will specialize on that we have cloned in the cloned loop.
Constant propagation here can change when we invoke autoload, so it's considered HardConstProp.
Contains entries with a false property value, which must be propagated / to their dependencies.
Count of how many iterations we've had since any function was popped off the function worklist.
Cygwin does not support uselocale(), but we can use the locale feature  in stringstream object.
Delete everything after the unreachable except for dealloc_stack which we move before the trap.
Dependent types have non-trivial representation in case they / instantiate to a class metatype.
Derived classes even have to put all less visible methods of the base class into their vtables.
Determine if the given Objective-C instance method should also / be imported as a class method.
Determine if this basic block is part of an irreducible loop by looking at all blocks that are:
Determine the begin and end offsets of this type and set up a conservative scan for that range.
Determine whether or not we want to provide an optional chaining fixit or a force unwrap fixit.
Determine whether the given enumerator is non-deprecated and has no specifically-provided name.
Dig out the instance type and figure out what members of the instance type we are going to see.
Dispatch to the correct memcached_* function depending on initial_value, server_key, and isInc.
Do not allow further breaks on the site of cmd, except during calls made from the current site.
Do not attempt to shorten the lifetime of this object beyond this point so we are conservative.
Do sbox lookups (which shrink it back to 32 bits) and do the pbox permutation at the same time.
Don't call wakeup when unserializing for the debugger, except for natively implemented classes.
Don't use importFullName() here, we want to ignore the swift_name and swift_private attributes.
Ends an MD4 message-digest operation, writing the the message digest and zeroizing the context.
Ends an MD5 message-digest operation, writing the the message digest and zeroizing the context.
Evaluate a subset of expression types suitable for build configuration conditional expressions.
Every time the BBSetIn of a basic block changes, the optimization is rerun on its predecessors.
Exceptions thrown by g++-generated code will have the class "GNUCC++" packed into a 64-bit int.
FIXME: Clear unnamed_addr if the global will be relative referenced to work around an ld64 bug.
FIXME: Complain about literals Check if we have a call to a function marked warn_unused_result.
FIXME: If the base type is a type variable, constrain it to a metatype of a bound generic type.
FIXME: It would be nice to say what part of the requirements actually end up being problematic.
FIXME: We should probably diagnose this, but this is not a place where we can emit diagnostics.
First iterate over every DIE, finding all object types and computing their names (and linkage).
For a concrete conformance, we record the type variable for 'Self' without doing anything else.
For cases where m_size is zero or the buffer's refcount is greater than 1, call resizeHelper().
For now consider any references inside requirements as a possibility to infer the generic type.
Format: a typed value, a SILDeclRef, a BasicBlock ID for method, a BasicBlock ID for no method.
Format: the cast kind, a typed value, a BasicBlock ID for success, a BasicBlock ID for failure.
Functions in the libswiftDemangle library, which provides external access to Swift's demangler.
Gather the substitutions we need to map the generic conformance to the specialized conformance.
Gather the witnesses from the Iterator protocol conformance, which we'll use to drive the loop.
Generic and dynamic static properties require lazy initialization, which isn't implemented yet.
Given a DIE, walk the specification chain and return the offset of the actual type declaration.
Given an inject_enum_addr of a concrete type without payload, promote it to a store of an enum.
Given the base of a vector object, pass it to a helper which is responsible for triggering COW.
HACK: functions can get queued multiple times in definedFunctions, so be sure to be idempotent.
IMPORTANT: On some systems it is required that RESBUF is correctly aligned for a 32 bits value.
Ideally we would just re-execute from jccAddr---except the status flags will have been trashed.
If Sub's replacement is not an archetype type or is from an opened existential type, skip it...
If TrueBB and FalseBB equal, we cannot find an arg for this DestBB so return an empty SILValue.
If compared against an integer, do no conversion and use the specialized string-int comparison.
If conservative is true, only actually conservative scan if any of these types are interesting.
If it does, we need to rerun / the data flow on this block's predecessors to reach fixed point.
If it is a switch on an integer type, check that all case values are integer literals or undef.
If necessary, split the victims again before their first use position that requires a register.
If nullability is provided as part of the type, that overrides optionality provided externally.
If one class is a subclass of another, and they aren't equal, the other isn't a subclass of it.
If our object type is not trivial, we may need to release the old value and retain the new one.
If so, any uses of the pointer result need to keep using the MUI, not the alloc_stack directly.
If the body hasn't been type checked yet, be super-conservative and mark all variables as used.
If the declaration is dynamically dispatched through a class, we have to use materializeForSet.
If the first element of this value is available, check any extra ones before declaring success.
If the memory (or some element thereof) is not initialized on some path, the bad things happen.
If the operand is an instruction that is only used by the instruction being deleted, delete it.
If the param type is an empty existential composition, the function can only have one argument.
If the payload has extra inhabitants left over after the ones we used, forward them as our own.
If the self value may have been consumed, we need to check for this before doing anything else.
If the type-specific test(s) failed, fallback on actually calling the tvCoerceParamTo*() helper
If there were any non-viable inferred associated types, don't infer anything from this witness.
If this block has no predecessors then nothing dominates it and the instruction is unreachable.
If this instruction is a post dominating release, skip it so we don't pair it up with anything.
If this is a label on a loop/switch statement, consume it and pass it into parsing logic below.
If this is a normal library, you can't have expressions or statements outside at the top level.
If this is the simple case, then the identifier is both the name and the expression to capture.
If we are going to print something, we'll need to print a blank before we print something else.
If we can't borrow one of the elements as a guaranteed parameter, then we have to +1 the tuple.
If we can't figure out the Base or Projection Path for the store instruction, simply ignore it.
If we didn't have any parameters, create a parameter list from the anonymous closure arguments.
If we didn't see an expression, statement, or decl which might have side-effects, keep reading.
If we do not have any insertion points but we do have increments, we must be eliminating pairs.
If we don't have a requested placement, but we do have a current insertion point, insert there.
If we don't have any local captures (including function captures), there's no context to apply.
If we failed, advance str, by 1 char if it's a valid char, or past all invalid bytes otherwise.
If we have a value of type AnyObject that we're trying to convert to a class, force a downcast.
If we have an enum instruction with a payload, strip off the enum to expose the enum's payload.
If we have one single type decl, and that decl has been type-checked, return its declared type.
If we're looking for all names or for an initializer, resolve implicitly-declared initializers.
If we're not in the body of the function, the base declaration is the nominal type, not 'self'.
Implements logic for computing in-memory layouts from TypeRefs loaded from reflection metadata.
In SIL the inlined-at information is part of the scopes, in LLVM IR it is part of the location.
In such cases, remove the default binding suggestion because the existing suggestion is better.
In the later case, they probably didn't mean to bind to a variable, or there is some other bug.
Indicate that a rewritten value is available in the specified block with the / specified value.
Information for each EHEnt in the func (basically which label names we chose for its handlers).
Instructions which return the address of non-writable memory cannot have an effect on escaping.
Internal struct for tracking information about types within a series / of "linked" expressions.
Invoking the accessor will expect a value of the formal type, so don't reabstract to that here.
It / also provides caching of certain analysis information that is used by all of / the passes.
It also means that reference counting operations on those references / have the same semantics.
It is possible in some requests that things like 'instanceof Foo' will not mean the same thing.
It remains to check the validity of comments (2.) since it's referred to an "old" OS/2 version.
It should be an integer, but copyTruncatedAsciiChars will automatically convert it to a string.
Look at subsequent tokens to determine if the '(' character is the start of a lambda expression
Lookup table used to store members of a nominal type (and its extensions) / for fast retrieval.
Mask off the upper 16-bits to handle things like DiscriminatedPtr which stores things up there.
NB: Don't forward the cleanup, because consuming a boxed value won't consume the box reference.
NOTE: At this point, the DoAtScopeExit object is destroyed and the PBD is added to the program.
Next we need to add in any arguments that are not captured as arguments to the cloned function.
Note: preserving behavior, but I think this can leak the copy if the user error handler throws.
Now that a deinit was found, it is safe to substitute all recorded uses with the copy's source.
Now we have nd0 digits, starting at s0, followed by a decimal point, followed by nd-nd0 digits.
Or, if we see a conversion successfully applied to a string interpolation argument, we're done.
Otherwise, continue trying to load dependencies, so that we can list everything that's missing.
Passed to the ExecutionContext during Eval to add writes to stderr to the output buffer string.
Passed to the ExecutionContext during Eval to add writes to stdout to the output buffer string.
Pop changes off the stack until we hit the change could we had prior to introducing this scope.
Prefix address such that it can be distinguished as residing within an unresolved PHP function.
Print the declarations and types from the origin module, unless we're not in whole-module mode.
Process an JPEG APP1 block marker Describes all the drivel that most digital cameras include...
Provide helpful diagnostics like a shadow copy in the function body to fix the 'var' attribute.
Pseudomains inherit the variable environment of their caller, so don't assert anything in them.
Recover by searching for the next decl except variable decls and cutting off before that point.
Remove no-op copy sequences before allocating spill space, since doing so might modify the CFG.
Return the dummy instruction that represents the new value that we will add to the basic block.
Return the subinterval which covers or has a use at `pos', else nullptr if no subinterval does.
SILPrinter class - This holds the internal implementation details of / printing SIL structures.
SIL_VTABLE or SIL_GLOBALVAR or SIL_WITNESS_TABLE record also means the end of this SILFunction.
Scan forward recording all operands that use CopyDest until we see the next deinit of CopyDest.
Set up a dummy global to stand in for the metadata object while we produce relative references.
Should we treat instructions that increment ref counts as None instead of / MayHaveSideEffects.
Shuffle things around so the Vreg previously defined by the setcc is now defined by the phidef.
Since we are already initialized by initSuccBottomUp(), this has the effect of an intersection.
Specialized test cases need some SSATmp*'s and similar things, so let's make some instructions.
Splits the n-th critical edge from the terminator and updates dominance and / loop info if set.
Stopping the VM is synchronous and all requests will run to completion, unless the alarm fires.
Store the function to the block without claiming it, so that it still gets cleaned up in scope.
Store the super.init expression within the constructor declaration to be emitted during SILGen.
TODO(https://github.com/facebook/hhvm/issues/6040) Implement throwing from delegate generators.
TODO: do something intermediate when e.g. all we needed to do was set parent metadata pointers.
T_START_HEREDOC has a trailing newline, so we can start looking for the ending label right away
Take care to close both file descriptors and unlink the output file after reading its contents.
Take the next direct inner result, reabstract it, and add it as / the next direct outer result.
The / source location is used to diagnose a failure if the block ends up never / being defined.
The ReadLock here is to sync with clear(), which only has a WriteLock, not a specific accessor.
The address of an empty value is always undefined, so we can just return nil back in this case.
The comparison above is just to short-circuit the overhead when the Classes are an exact match.
The end of the ordinary section is just the end of the function unless postmatter blocks exist.
The following static assertions should ensure `kMaxStringSimpleLen' has the properties we want.
The function is dead, but we need it later (at IRGen) for debug info or vtable stub generation.
The key thing to remember is that an enum is address only if any of its cases are address only.
The last instruction must be isBlockEnd() and the middle instructions must not be isBlockEnd().
The level is a number we have to keep the lower_bound above to avoid changing program behavior.
The liveIn computation also depends on the liveOutExn state, so again reschedule if it changes.
The liveOutExn sets only take part in the liveIn computation when the block has factored exits.
The logic above ensures that the first slot is not a tombstone, so it's safe to set m_pos to 0.
The operation doesn't have to be initializeWithCopy, but they all have basically the same type.
The prologue is 1) still in the caller frame for now, and 2) shared across multiple call sites.
The special ctx (Class*)-1 is used by unserialization to mean that protected properties are ok.
The store to pointer is overwritten by another store before any / potential use of the pointer.
The user did not specify a module name, so determine a default fallback based on other options.
Theoretically reading this block comment first will make the rest of this file make more sense.
There is no scanning required (or desired) for the block that defines the memory object itself.
There's one MustAliasSet for each frame's context, no matter how many times we see loads of it.
Therefore it increases the number of remaining cases to be handled by the default case handler.
These notices must be retained in any copies of any part of this documentation and/or software.
This induces conversions to occur within closures instead of outside of them wherever possible.
This is / called on a basic block's state and then any other successors states are / merged in.
This is all of the forward referenced functions with / the location for where the reference is.
This is cleanup goop run on the various paths where type checking of the pattern binding fails.
This should be refactored alongside with the getLastError redirection in db.c/MongoDB::command.
This violates the invariant that the value of m_data doesn't matter in a KindOfNull TypedValue.
This will present the prompt, wait for user input, and execute commands, then rinse and repeat.
Thus if the encoded value is above Threshold, the value after decoding is also above Threshold.
To keep alive as long as command is alive Attach the source, const cast is due to xml interface
To maintain this property, we have to start one past the sentinel kInvalidTransID, which is -1.
Track the lifetime, release points, and released values referenced by a newly allocated object.
Try to find the init_existential, which could be used to determine a concrete type of the self.
Try to sink literals that are passed to arguments that are coming from / multiple predecessors.
Update bcOff here so any guards or assertions from metadata are attributed to this instruction.
Use alloc_ref_dynamic since we should only ever get here in ObjC protocol extensions currently.
Use the type of the method we were type-checked against, not the type of the overridden method.
We are about to go back to translated code, check whether we should stick with the interpreter.
We called lookupClsMethod with a NULL this and got back a method that may or may not be static.
We can't add new uses to reference counted types without a more advanced availability analysis.
We could produce a fixit hint with a parent map, but this is a lot of effort for a narrow case.
We currently only allow subtype contractions for the purpose of  parameter binding constraints.
We defer making a copy of the parent method until the end because it might get overriden below.
We do this /    right after the old call site where the original partial apply was /    called.
We don't do this in compilation modes because defaulting to the latest SDK may not be intended.
We don't see the bodies of initializers from a different module unless all of them are fragile.
We don't use enough attributes to justify generalizing the RuntimeFunctions.def FUNCTION macro.
We have to generate new dedicated BBs as landing BBs for all FailurePreds and all SuccessPreds.
We need to free the state unnamed local in order to fall through any future finallies correctly
We need to reprocess these exits if we end up pushing parentFp into its respective exit traces.
We only care about a subset of extended type constaints: typevar, nullable, soft, return types.
We set the initial state of unreachable block to 0, as we do not have a value for the location.
We set this function to highly profitable if we have a O2G on one of its parameters or results.
We walked all the way up to the root without finding the declaration, so this is not a capture.
We will specialize the outermost loopnest that has 'array.props' instructions in its preheader.
We're about to typecheck the index list, which needs to be processed with self already applied.
We're not constructing a new String, we're just using the one in traceFileVar, so this is safe.
We've unwound to the top level, so inform the consumer and drain the consumer syntax map queue.
Well, first factor out this code into a separate check and report method and report from there.
When forming the resultant string, will call appendUniq to skip repeated words at the boundary.
and the Swift project authors Licensed under Apache License v2.0 with Runtime Library Exception
apptype() uses the filename if given, otherwise a tmp file is created with the contents of buf.
for each raw comment: column number of the first line, length of each raw comment and its text.
getInstructionKind - This method maps the string form of a SIL instruction / opcode to an enum.
getOperandNumber - Return which operand this is in the operand list of the / using instruction.
if the type also conforms to _ConditionallyBridgedToObjectiveC, make sure it bridges at runtime
need to register the constant before AnalyzeAll, so that DefinedFunction can mark this volatile
parseStmtCatch promises to return non-null unless we are completing inside the catch's pattern.
removing comments, which can be wrong actually if some string field's value has /* or */ in it.
request_params can be either NULL, a string containing arbitrary text (such as XML) or an array
set the Declaration context here instead of all over this file - this phase is the first to run
setSelfParam bumps the callDepth, but we aren't really past the 'self' call depth in this case.
setjmp() must be called in every non-callback function that calls a PNG-reading libpng function
super.init also requires that all ivars are initialized before the superclass initializer runs.
the list of request event handlers is a req::vector, so it gets lost at the end of the request.
use builtin print for GEN_OTHERNAME, GEN_X400, GEN_EDIPARTY, GEN_DIRNAME, GEN_IPADD and GEN_RID
...and the predecessor instruction is a strong_release on the same value as our strong_retain...
/ / *NOTE* This counter is incremented *after* we return from visiting a call / site's children.
/ / FIXME: this is an elaborate hack to badly reflect Clang's / submodule visibility into Swift.
/ / NOTE: This is never populated for functions which will only require 1 / data flow iteration.
/ / Only valid for declarations that can have definitions, i.e., / functions, initializers, etc.
/ / TODO: / / - Analyze the module to move initializers to the module's public /   entry points.
/ / The lowering of function types is generally sensitive to the / declared abstraction pattern.
/ / This function determines when and how a particular type is mapped / into a foreign language.
/ / We call this the "exception type" to try to avoid confusion with / the AST's ErrorType node.
/ A convenient macro for delegating an operation to all of the / various struct implementations.
/ In this case the address-part may be null, which means that the buffer / is not allocated yet.
/ Once we rip this out of SILGen, DI will be able to figure this out in a / more logical manner.
@convention(thick) callees are exploded as a pair consisting of the function and the self value.
@note If you want to scan bytes that may contain NUL values, then use hphp_scan_bytes() instead.
A CRTP helper for classes which are simply searching for a / specific index within the metadata.
A helpful little wrapper for a value that should be mangled / in a particular, compressed value.
A scope encloses the condition and true branch for any variables bound by a conditional binding.
A value that represents an Objective-C method that must be called with / a form of objc_msgSend.
A wildcard or name pattern cannot appear by itself in a context which requires an explicit type.
All new settings should use the ini path of this method (i.e., pass a bogus Hdf or keep it null)
All resilient structs have the same opaque lowering, since they are indistinguishable as values.
Allocate enough room for the instruction with tail-allocated EnumElementDecl and operand arrays.
An ExprPattern only exists before sema has resolved a refutable pattern into a concrete pattern.
An application of possibly unevaluated arguments in the form of an / ArgumentSource to a Callee.
ArrayData* Prepend(ArrayData*, Cell v, bool copy)  Insert `v' as the first element of the array.
At the end of the loop CommonSpareBits.size() will be the size (in bits) of the largest payload.
At this point, we can remove the instruction as long as all of its users can be removed as well.
Before parsing the body, disable all of the bound variables so that they cannot be used unbound.
Brotli does not have a utility to compute max size of the buffer in case data is incompressible.
But we can't use the value itself, because if it is null the key will act like the empty string.
By the time that DI gets here, we've validated that all uses / of the memory location are valid.
Calling closeWithReset() will cause readEOF to be called immediately which will call shutdown().
Check that the 'value' property from the protocol matches the declared property type in context.
Check the pattern, it allows unspecified types because the pattern can provide type information.
Check whether another method with the same selector has already been imported into this context.
Check whether this failure is due to losing the schema initialization race with another process.
Check whether this mapping matches either the given decl directly or one of its overridden decl.
Conveniently, it doesn't care about the actual types though, so we can just use 'void' for them.
Convert an l-value to a pointer type: unsafe, unsafe-mutable, or / autoreleasing-unsafe-mutable.
Copy a string in Exif header to a character string and return length of allocated buffer if any.
Create a / parameter list to represent the spelled argument or return null if none is / present.
Currently the first request for context wins because we don't want to change context on-the-fly.
Determine the base name and whether this is an incomplete type or not from the DIE's attributes.
Determine where and how to perform name lookup for the generic parameter lists and where clause.
Determine whether the given class requires a separate instance / variable initialization method.
Do a prepass over the declarations to find and load the imported modules and map operator decls.
Do a second pass over Builtins.def, ignoring all the cases for which we emitted something above.
Don't need to check for overflows if ret is of primitive type because the depth does not change.
Don't use usleep() here since it causes the CPU to halt which will generate meaningless results.
ER is given a non-local successor edge that points at the successor index in L that points at S.
Emit a global variable storing an offset into the field offset vector within the class metadata.
Ends a ripemd128 message-digest operation, writing the message digest and zeroizing the context.
Ends a ripemd160 message-digest operation, writing the message digest and zeroizing the context.
Ends a ripemd256 message-digest operation, writing the message digest and zeroizing the context.
Ends a ripemd320 message-digest operation, writing the message digest and zeroizing the context.
Ends an SHA1 message-digest operation, writing the the message digest and zeroizing the context.
Even if SIL has a direct return, the IR-level calling convention may require an indirect return.
Even if the instruction does not write memory it could e.g. return the address of global memory.
FIXME: The parent module isn't exactly a private import, but it is needed for link dependencies.
FIXME: We ought to be able to get to the generic signature from a dependent type, but can't yet.
Fall out to the case below, clearing the name so that createVariable doesn't detect a collision.
Fault funclets don't actually fall in the EHEnt region for all of their parent handlers in HHBC.
Find a set of uses that the given copy can / forward to and replace them with the copy's source.
First, if the base type is an int and we have a string containing an int, do the coercion first.
First, try to use the stated explicit conformances to determine where the conformance should go.
Flag which is used to allow yywrap()'s to do buffer switches instead of setting up a fresh yyin.
For ObjMethod calls, a private method declared by ctx trumps any other method we may have found.
For closures, type-check the patterns and result type as written, but do not walk into the body.
For convenience, these vars (plus the bison vars far below) are macros in the reentrant scanner.
For each block, create a list of the direct predecessors that the block is control-dependent on.
For each overload locator for which we have an overload choice in all of the previous solutions.
For example a break point that get's triggered when the server starts to process a page request.
For step-conts, we ignore handlers at the original level if we're not in the original resumable.
Force the debug info for the function to be emitted, even if it is external or has been inlined.
Function casts succeed on exact matches, or if the target type is throwier than the source type.
Future-proofing: make sure we validate the control block before we try to read any other blocks.
Gather protocol records for all of the explicitly-specified Objective-C / protocol conformances.
Generic functions aren't first-class values and shouldn't end up lowered through this interface.
Given a C parameter declaration whose type is passed indirectly, / deduce the convention for it.
Guaranteed just means that we guarantee the lifetime of the object for the duration of the call.
Helper for format_filename that removes characters defined by xdebug to be "special" characters.
Hide literals other than the ones that are also keywords if they don't match the expected types.
Highlights the given TypeRepr, and adds a note pointing to the type's / declaration if possible.
I don't know why, but things work a lot better if this process ignores the tstp signal (ctrl-Z).
If all the supplied UseInfos represent unused stack slots, make a pop that is considered unused.
If compared against a string, commute the expression and do a specialized string-int comparison.
If it is address-only, then we can't load it, so capture it by its address (like a var) instead.
If its visibility implies that this optimization pass cannot analyze all uses, don't process it.
If one of the protocols being extended inherits the other, prefer the more specialized protocol.
If pos is the canonical invalid position, no guarantees are made about what this method returns.
If swift gets user attributes then all identifiers will be treated as syntactic attribute nodes.
If the base type variable doesn't have an associated archetype, just form the member constraint.
If the caller expected something inout, but we didn't have something of inout type, diagnose it.
If the candidate's is at least as long as the potential base (testClass) it might be a subclass.
If the case insensitive comparison is equal, then secondary sort order should be case sensitive.
If the class is visible only through the Objective-C runtime, form the appropriate runtime call.
If the current frame represents async function that is running, mark it as abruptly interrupted.
If the entire pattern is "(pattern_expr (type_expr SomeType))", then this is an invalid pattern.
If the first node in the list is no primary, we fall back to picking a random node from the set.
If the initializer type is TUninit, it means an 86sinit provides the actual initialization type.
If the insertion to 'map' is successful, we release the ownership of value object from valuePtr.
If the instance type is String bridged to NSString, compute the type we'll look in for bridging.
If the property does not have a fixed layout from the given context, we cannot do direct access.
If the shuffle conversion is invalid (e.g. incorrect element labels), then we have a type error.
If the size is larger than we can represent in 32-bits, complain about the unimplementable ivar.
If there is no nominal type in the expr, try to find nominal types in the ancestors of the expr.
If this argument from a different BB, then jump-threading may require too much code duplication.
If this block branches to a block with a single predecessor, then merge the DestBB into this BB.
If this is a direct store in a "willSet", we reject this because it is about to get overwritten.
If this is a final member and isn't overriding something, we don't need to add it to the vtable.
If this is an implicit statement or expression, just skip over it, don't emit a diagnostic here.
If this is the first time we've seen a check on this particular SSATmp, the insert will succeed.
If this_ is non-null AND we could not find a method, try looking up __call in cls's method table
If tvRef is not Uninit, DecRef tvRef2 and move tvRef's value to tvRef2, storing Uninit to tvRef.
If we are emitting a witness thunk for a concrete conformance, Self is just the conforming type.
If we don't emit a function body then make sure to mark the declaration as available externally.
If we don't know what kind of expression this is, assume it's a reference and mark it as a read.
If we ever allow importing non-top-level decls, it's possible the rule above isn't what we want.
If we found the allocation itself, then we are loading something that is not defined at all yet.
If we have a normal metatype, we can't solve backwards unless we know what kind of object it is.
If we have a payload case, this yields a negative value, which is the final resilient tag index.
If we have a redefinition, return a new BB to avoid inserting instructions after the terminator.
If we have a type variable that has been bound to a fixed type, look through to that fixed type.
If we have insertion points and partial merges, return false to avoid control dependency issues.
If we passed fewer than kNumFixedPrologues, argc is still a valid index into the prologue table.
If we're asked to convert to an autoclosure, then we really want to convert to the result of it.
If we've already successfully type-checked the expression for some reason, just return the type.
In an fbmake build, override the locations of hphp and hhvm that dirs.mk will think we're using.
Initialize InfixData with default attributes: precedence 100, associativity none, non-assignment
Instantiate a SILBuilder for inserting instructions at the top of the original generic function.
It also has to be declared `class' because it's referenced as a friend class in the ICU headers.
Iterate over the instructions post-order and find final releases associated with each arguments.
Like C++ using declarations, name lookup simply looks through Objective-C compatibility aliases.
Linear searching the tracking list doesn't hurt because usually it only contains a few elements.
Look for a typedef that successfully classifies as a CF typedef with the same underlying record.
Look for the extension for the given nominal type within the Clang submodule of the declaration.
Loop over container1, only copying over key/value pairs where the key is not present in the Set.
Lots of layout will get screwed up if our structure claims more storage than we allocated to it.
Make sure a component (path, value, domain) of a cookie does not contain any illegal characters.
Measures the size of the array and referenced objects without going into ObjectData* references.
NB: This is clearly an x64-ism, and likely needs to be done differently for other architectures.
Need to have a parent try for opts so I can use opts in the catch of one of the sub-tries below.
No need to setLocalDiscriminator because subscripts cannot validly appear outside of type decls.
No-payload enums are always fixed-size so never need dynamic value witness table initialization.
Non-simple names are also stored under their simple name, so make sure to only report them once.
Note it won't have any source info in it, because this event is raised with no PHP on the stack.
Note that it never hurts to merge more types than a thisProp could actually be, so this is fine.
Note that there are some "wasted" slots where locals/iterators would be in the vector right now.
Note that there are substantial restrictions on the use of suspension --- see the documentation.
Note: MInstrEffects wants to manipulate pointer types in some situations for historical reasons.
Note: hphpc doesn't include inherited constants in get_class_constants(), so mimic that behavior
Nothing can write to the uninit null variant either, so the inner type here is also always true.
Ok, we were able to prove that all arguments to the apply that were guaranteed do not alias Ptr.
Only print the parentheses if there are some argument names, because "()" would indicate a call.
Otherwise, if we have a non-final class dispatch to a normal method, perform a dynamic dispatch.
Otherwise, just fill in null here if the type can't be statically queried for extra inhabitants.
PHP treats a carriage return beside a newline as the same break no matter what order they're in.
PHP treats both types of string the same, so if the distinction matters to you here, be careful.
Pattern resolution occurs before sequence resolution, so the cast will appear as a SequenceExpr.
Pragma writes must be executed outside transactions, since they may change transaction behavior.
Predecessors reached only via a path along the failure branch of the dominating checked_cast_br.
Predecessors reached only via a path along the success branch of the dominating checked_cast_br.
Prints regular comments of the header the clang node comes from, until the location of the node.
Produce a tailored diagnostic since this comes up and is otherwise non-obvious what is going on.
Re-type-check the given subexpression even if the expression has already / been checked already.
Recursive call already diagnosed this problem, but tack on a note to establish the relationship.
Recursively remove all instructions hanging off the allocation instruction, then return success.
Retrieve a systemlib (or mini systemlib) from the current executable or another ELF object file.
Return true if V1 and V2 are distinct objects that can be uniquely / identified at compile time.
Return true if this instruction can load a TypedValue using a 16-byte load into a SIMD register.
Returns whether a type is generic enough to try hoisting a prediction in order to specialize it.
Runtime entries using the DefaultCC calling convention do not demand a global symbol by default.
See if we can reach the From-node by transitively visiting the predecessor nodes of the To-node.
Self and Parent should never happen, because type aliases are not allowed to use those MetaTypes
Since the current context class could call it last time, we can call the new implementation too.
Since the object itself is stored in the alloca, emitting it as a reference type would be wrong.
Since we only support ISO-8859-1 or UTF8 right now, and they use the same mapping array, use it.
So, it can be eliminated if the cell it pushes is used as either Use::Not or Use::UsedIfLastRef.
Sort the set of local unsatisfied requirements, so we get a deterministic order for diagnostics.
StatCache::realpath() is based on the realpath(3) implementation that is part of FreeBSD's libc.
Store actual stack elements array in a thread-local in order to amortize the cost of allocation.
Such private decls may affect the data layout of a class/struct or the vtable layout of a class.
Synthesize the bodies of the property's accessors now, forwarding to the 'value' implementation.
TODO(cjhopman): this seems unsafe unless we require that it is only called on the main js queue.
TODO: Check if the function is ASan black listed either in the external file or via annotations.
TODO: Keep more detailed error information in the BreakPointInfo and emit that information here.
TODO: Once there is a proper support for IPO, / bodies of all external functions can be removed.
TODO: We should be able to handle destructors that do nothing but release members of the object.
TODO: experiment with disabling this chunked flag and letting proxygen framework do the chunking
The 2 instructions given are not identical, but are passed as arguments / to a common successor.
The BBSetIns have converged, run last iteration and figure out insertion point for each RC root.
The CallArray that triggered the call to doFCallArrayTC has a catch trace which needs to be run.
The NAdder function controls whether it's actually building a graph or just performing analysis.
The PassByRefKind of a list assignment expression is determined by the PassByRefKind of the RHS.
The RO-data is not shared between instantiations, but the global ivar offset is (by definition).
The application should resume decompression after it has loaded more data into the input buffer.
The base value for every call: it represents the benefit of removing the / call overhead itself.
The bottom line is that we can't really use ModulesInitialised() to help steer the choices here.
The first time through, we've counted up weak uses of the frame and then finally marked it dead.
The full metadata is used based on the visibility of the address point, not the metadata itself.
The real init-once enforcement is done by the compiler for the "static" in initExceptionHelpers.
The reason why is that we do not want to move retains, releases over isUniquelyReferenced calls.
The result of the expression is the partial application of the constructor to the subexpression.
The type metadata bindings should be at a fixed offset, so we can pass None for NonFixedOffsets.
These archetypes can be / represented by a refcounted pointer instead of an opaque value buffer.
These are the blocks that have an RC instruction to process or it blocks / some RC instructions.
These could also return pointers to collection elements but those don't exist in AliasClass yet.
They can also invoke the user error handler and go do whatever they want to non-frame locations.
This ensures that all instructions that may write to destination address depend on CopyDestRoot.
This must happen after we do sinits for consistency with the interpreter about o_id assignments.
This probably means we tried to hash an IRInstruction with extra data that had no hash function.
This subclass has its own subclasses and they will use this implementation or provide their own.
This would require typechecking or at least name lookup, if the nested class is in an extension.
Track a high water mark, and incrementally map each huge page we low_malloc with a huge mapping.
Type-check the protocol conformances of the struct decl to instantiate its derived conformances.
Ubuntu 14.10's editline does not include the wide character entry points needed by the REPL yet.
Unlike with assignment expression below, nothing needs to be added to the scope's constant table
Unlikely case is we end up having to check whether the first byte of the string is equal to '0'.
Unmanaged references are plain pointers with extra inhabitants, which look like thick metatypes.
Use Tarjan's strongly connected components (SCC) algorithm to find / the SCCs in the call graph.
Use threadInit() for settings that can change per user request (e.g., PHP_INI_ALL, PHP_INI_USER)
Visit every instruction and modify its Vreg operands to the physical register that was assigned.
Visitor class to set the WasAbstract flag of any MetatypeTypeRefs / contained in the given type.
We assume that `other', if it represents an SSA variable, is not live at the start of `current'.
We call checkGenericParamList() on all lists, then call finalizeGenericParamList() on all lists.
We can only allow them / in simple pattern-like expressions, so we reject anything complex here.
We can't remove the support bit, and we have no way to account for the reduction in lower bound.
We care about whether the parameter list of the callee syntactically has more than one argument.
We compute this ahead-of-time because it has to be encoded as a ULEB128, which is variable size.
We do a case-sensitive sort here, then do a case-insensitive sort after any name-based grouping.
We don't actually use these because we're not recursively rewriting the partial applies we find.
We explicitly check for the stringified version of "true" here, as "true" has a special meaning.
We have already ensured a single store per block, and all release points occur after all stores.
We look at the type sugar directly, so that one can suppress this warning by adding parentheses.
We need to finish the previous chunk by writing a TombHash at the end, if there is enough space.
We need to move proxy-array.cpp to ext_zend_compat/hhvm before the Zend headers can be included.
We perform these coercions first because they are often the first step in a multi-step coercion.
We should always have a global data section in RepoAuthoritative mode, or the repo is messed up.
We should either create a new kind or rename the code-completion kind to something more general.
We're not changing spValue while we inline, but we're changing fpValue, so this needs to change.
When detaching the global scope, we leak any live objects (and let MemoryManager clean them up).
When m_worker stops the server has stopped accepting new requests, there may be pedning vm jobs.
Wire up stdout and stderr to our own string buffer so we can pass any output back to the client.
With each predecessor, also keep the level number of the predecessor in the post-dominator tree.
Write the result out to stderr avoiding errs() because raw_ostreams can call report_fatal_error.
for "big boy" drivers, we need to allocate memory to fetch the results into, so lets do that now
handleSelfInitUse - When processing a 'self' argument on a class, this is / a call to self.init.
if the shape field name is a class constant, its name is double colon delimited clsName::cnsName
max and min keys are used only for sharding, and cannot be resaved to the database at the moment
or if the stack args have been explicitly been prepared (e.g. via entry as part of invoke func).
performStoreOnlyObjectElimination - Scan the graph of uses of the specified / object allocation.
process data in chunks of 8 bits (a more efficient approach would be to take whole-word chunks):
shouldEmitError - Check to see if we've already emitted an error at the / specified instruction.
transform*() return their input if it's unmodified, or a modified copy of their input otherwise.
unused for now TODO: store any required conditional-conformance information in the private data.
use write instead of fwrite to be consistent with read o.w., read-and-write files would not work
(For traits the return typehint will always throw at run time, so it's safe to use TObj/TOptObj.)
(SCHW is handled in S) S if -CI-, -CE- or -CY- dropped if -SCI-, SCE-, -SCY- (handed in S) else K
(The region selectors break a region whenever they hit a SrcKey that has already been optimized.)
*_SECONDARY is a higher constant value than *_PRIMARY, so we sort descendingly by connection_type
/ * It has a preheader (the function will try to create one for critical edges /   from cond_br).
/ / However, this may introduce a lot of extraction and aggregation which may / not be necessary.
/ / Since emission notes generally change semantics, we enforce that all / notes must be claimed.
/ / The caller has already guaranteed that the lifetime of the copy's source / ends at this copy.
/ / This helper only checks that the operands computing the array reference / are also hoistable.
/ / This should be incremented any time we commit a change to the format of the / cached results.
A bounds_check is safe if no size / modifying instruction to the same array has been seen so far.
A physical path component which force-projects the address of / the value of an optional l-value.
Add the runtime library link path, which is platform-specific and found relative to the compiler.
And a LdRef or CheckRefInner automatically constrains the value to be a boxed cell, specifically.
AnyObject has no requirements (other than the object being a class), so needs no method dispatch.
Approximately up to this cost level a function can be inlined without / increasing the code size.
Are we loading a value from an address in a struct defined at a point dominating the hoist point.
Avoid iterating the list, as abort() will unlink(), leaving the list iterator in a corrupt state.
Before a "return," "continue" or similar statement, emit pops of all the braces up to its target.
Bind an UnresolvedDeclRefExpr by performing name lookup and / returning the resultant expression.
Bind to a named pattern by creating a memory location and initializing it with the initial value.
Call path invalidation callback once for each path associated with this node and/or remove paths.
Callers of the requirement can expect to receive 'nil', but / the witness will never produce one.
Canonicalize multiplication by a stride to be such that the stride is always the second argument.
Casts do not use pointers in a manner that we care about since we strip them during our analysis.
Check if exactly one argument was passed to this function, otherwise we obviously have a mismatch
Check to see if any found diagnostics have the right line and classification, but the wrong text.
Check using sp(env) in the -R version---remember that fp(env) does not point into the eval stack.
Check whether any of the associated types we care about are referenced in this value requirement.
Check whether this requirement uses Self in a way that might prevent conformance from succeeding.
Compute adj so that the IEEE rounding rules will correctly round rv + adj in some half-way cases.
Consequently, if the / given value is directly derived from a memory location, it cannot / alias.
Constructors cannot be called on a protocol metatype, because there is no metatype to witness it.
Current instruction is unreachable, thus the constraint on the stack depth will never be violated
Defaults to EnableHHSyntax since, if you have that on, you are assumed to know what you're doing.
Deserialize the VTable mapped to C if it exists and all SIL the VTable / transitively references.
Destructors are technically instance members, although they can't actually be referenced as such.
Determine the desired abstraction pattern of the storage type in the requirement and the witness.
Determine the prefix to be stripped from the names of the enum constants / within the given enum.
Dig out the type that we'll actually be looking into, and determine whether it is a nominal type.
Doesn't look like this can happen, php_sockop_read overwrites the failure from recv() to return 0
Don't consider this path if we reach a length that can't possibly be better than the best so far.
Either we didn't have to wait, or we waited but no sleeper timed us out, so just handle the ETEs.
Enter a cleanup to emit a DeinitExistentialAddr or DeinitExistentialBox / of the specified value.
Escape analysis uses the connection graph to check if the pointers may point to the same content.
Eventually we might be able to use SILLocation (when it contains info about inlined call chains).
FIXME: These APIs allocate memory on the ASTContext, meaning it may not be freed for a long time.
FIXME: This will prevent hard error in cases the error is coming from ObjC interoperability code.
FIXME: hang the converter object somewhere so that it is persistent between requests to this AST.
FIXME: these checks should apply to the LHS of the operator, not the immediately left expression.
FIXME: we can't use the exclamation mark chunk kind, or it isn't included in the completion name.
Find the perpendicular distance from point C (px, py) to the line segment AB that is being drawn.
First order types according to what category of type they are, using the below arbitrary ranking.
First simplify instructions generating branch operands since that can expose CFG simplifications.
For a precise union, we need to make sure the returned class is not any bigger than it should be.
For an implicitly generated super.init() call, make sure there's only one designated initializer.
For boxed captures, we need to mark the contained variables as having escaped for DI diagnostics.
For filtering assertions, some opcodes are considered to have no use for a stack input assertion.
For image rotations, the optimized versions have a lazy antialiasing for the edges of the images.
For timer mode, when start is invoked, it adds a new timer to the existing handler for SIGVTALRM.
For trivial payloads (including no-payload cases), we can just primitive-copy to the destination.
Function object that returns all constraints placed into buckets back to the list of constraints.
Gather protocol references for all of the explicitly-specified Objective-C protocol conformances.
Given a type, fill the given layout (starting at the specified offset) appropriate for that type.
Given that we are currently at the beginning of the / continuation block, complete the operation.
HACK HACK HACK: Omit-needless-words hack to try to cope with the "NS" prefix being added/removed.
However, it does allow us to eliminate the later copy, and the init copy may be eliminated later.
I suppose I could have been using a character pointer instead of accesssing the array directly...
If StrippedRCID is not V, then we know that User's result is conservatively not RCIdentical to V.
If an ArrowExpr survived until CSGen, then there was an upstream error that was already reported.
If necessary, split the current interval so the first part gets a register, and enqueue the rest.
If new_iter_array creates an iterator, it does not increment the refcount of the specified array.
If no contextual type is present, Merge equivalence classes of key  and value types as necessary.
If pos is the canonical invalid position, this method will return the canonical invalid position.
If the C type of the argument is a const pointer, but the Swift type isn't, treat it as indirect.
If the client wants to know about super.init, check to see if we failed it or some other element.
If the command line contains an explicit request about whether to add LLVM value names, honor it.
If the current tuple size isn't a multiple of the field's required alignment, we need to pad out.
If the decl has an explicitly written initializer with a pattern binding, then it isn't settable.
If the declaration we attached the 'objc' attribute to is within a class, record it in the class.
If the existing constructor has a less-desirable kind, mark the existing constructor unavailable.
If the insertion created a new entry, set up the metadata we were passed as the insertion result.
If the instruction is a deallocation of uninitialized memory, no action is required (or desired).
If the interesting-keys set is limiting the set of interesting conformances, collect that filter.
If the memory object has non-trivial type, then removing the deallocation will drop any releases.
If the original type is opaque and the substituted type is materializable, the count is 1 anyway.
If the requirement is generic, reparent the requirement parameters to the conformance parameters.
If the single array argument contains a zeroth index, consider it an array of pipeline operators.
If the single predecessor terminator is a branch then the root is the argument to the terminator.
If the type was imported from Clang, check whether it is representable in the requested language.
If there is a cleanup for the optional value being tested, we can disable it on the failure path.
If there was no entry for that element, this function does not remove it, and may or may not cow.
If this VarDecl is nested inside of a CaptureListExpr, remember that fact for better diagnostics.
If this declaration is in a class but not marked final, then it is always dynamically dispatched.
If this is a member of a nominal type, build a reference to the member with an implied base type.
If this is a use, and the type metadata is emitted lazily, trigger lazy emission of the metadata.
If this is an accessor, don't complain if we would have complained about the storage declaration.
If this is an apply instruction and we're in a class initializer, we're calling a method on self.
If we are assigning to _ and have unresolved types on the RHS, then we have an ambiguity problem.
If we are parsing a refutable pattern, check to see if this is the start of a let/var/is pattern.
If we didn't find the type in the TypeRepr, fall back to the type in the type checked expression.
If we don't have type parameters, use the prefix of the type name as the collection element type.
If we have an unspecialized form of a parameterized Objective-C class type, fill in the defaults.
If we have multiple introduction versions, we will conservatively assume the worst case scenario.
If we're calling an accessor, keep the base as an inout type, because the getter may be mutating.
If we're completing a generic TypeAlias, then we map the types provided onto the underlying type.
If we're translating *from* the foreign expansion, do an ordinary load into the output explosion.
If you want to override the dot attributes printed for a particular / edge, override this method.
In the early years, the beginning of the year varied, sometimes based on the ascension of rulers.
In this case, our local throwDest has no predecessors, and SGF.ThrowDest may not be valid either.
It will decref it and put the class on the actrec before entering the "real" cloned closure body.
It's important to use a shared linkage for the specialized function and not the original linkage.
Keep track of the parameter we're matching and what argument indices got bound to each parameter.
Macro expand out the defer into a closure and call, which we can typecheck and emit where needed.
Mangle non-local private declarations with a textual discriminator based on their enclosing file.
NOTE: The base will point to the actual object this inst is accessing, not this particular field.
Next time start relexing from the beginning of the comment so that we can attach it to the token.
Note that it is ok to have a purpose without a convertType (which is used for call return types).
Note that the new decls may be ambiguous with respect to each other, just not any existing decls.
Note: recursion into old type checker is okay when passing in an unsatisfied-dependency callback.
Note: whenever you update this function, also update DerivedConformance::getDerivableRequirement.
Nothing is allowed to write anything to the init null variant, so this inner type is always true.
Now we know that no cell in the update box is more than minmaxdist away from some colormap entry.
Once the / depth of the expression stack is equal to this value, the / existential can be closed.
Otherwise, if tc is an opt type and stackT cannot be InitNull, then we can safely use unopt(tcT).
Otherwise, if there isn't a better path through this base, don't accumulate anything in the path.
Otherwise, send the buffered output to stderr, though only if we support getting buffered output.
Otherwise, since we do not have enough information, we can only emit at +0 for immediate clients.
Otherwise, this is some unknown instruction, conservatively assume that all values are clobbered.
Perform typo correction on the given nested type, producing the / corrected name (if successful).
Pop a value off of the evaluation stack, and verify that it matches the specified symbolic flavor
Preserve the optional type's original spelling if the interface type is the same as the original.
Print its message, with a blank before it if the previous item printed and this item isn't empty.
Proactively set the destination metatype so that we can tail-recur, unless we've already done so.
Produce a constant to place in a metatype's isa field / corresponding to the given metadata kind.
Push into the worklist in post order so that we can pop from the back and get reverse post order.
Regardless of ParamCoerceMode, native functions can return null if too many arguments are passed.
Required constructors are dynamically dispatched when the 'self' value is not statically derived.
Requirements:  - xdebug_get_zval_value_fancy - xdebug_get_zval_value_ansi - xdebug_get_zval_value
Return a reference to an object that's suitable for being used for / the given kind of reference.
Return the `loop's preExit block if it was already created or if a suitable block already exists.
Return the type metadata for a given mangled name, used in the / implementation of _typeByName().
Return the underlying SILValue after stripping off SILArguments that cannot / affect RC identity.
Returns the peer address in addr/addrlen (it will emalloc these, so be sure to efree the result).
Returns true if F is a function which the pass know show to specialize / function signatures for.
Rewrite memory operands that are based on registers we've copied or lea'd off of other registers.
Runs at most 100 times, if we haven't finished by then, call it a data error to avoid going nuts.
Semaphore 2 (SYSVSEM_SETVAL) serializes the calls to GETVAL SYSVSEM_USAGE and SETVAL SYSVSEM_SEM.
Set IRBuilder's Block associated to blockId's block according to the mapping in blockIdToIRBlock.
Set the default connection type, we might change this if we encounter the replicaSet option later
Setting the int at the size of the array can keep it in packed mode---it's the same as an append.
Similarly, Vector is only usable with int keys, so we can only do this for Vector if it's an Int.
Simplify an `inst' at block `b', instruction `i', returning whether or not any changes were made.
So we don't need to try to deserialize anything or handle the case that sval.data is file-backed.
Some kinds of expression don't really evaluate their subexpression, so we don't need to traverse.
Spills, reg-reg moves, and loads of constant values or spill space all occur between instruction.
Strip off casts/indexing insts/address projections from V until there is / nothing left to strip.
Swift enums require that the raw type is convertible from one of the primitive literal protocols.
Symbolize frames under the assumption that they are defined in /proc/self/exe without relocation.
Systemlib.php is not loaded again, so we need this if we are to hit any breakpoints in systemlib.
TODO - we should not get every data type as a SQL_C_CHAR, but cast to an appropriate type instead
TODO: A standard "destroy strong array" entrypoint for arrays of single refcounted pointer types.
That decref can't have had side effects, because iter_next_cold would have been called otherwise.
The 'self' argument might be in the context position, which is now the end of the parameter list.
The dead store elimination context, keep information about stores in a basic / block granularity.
The declared variable(s) for the current element are destroyed at the end of each loop iteration.
The error_code is cleared, otherwise the caller will read the last error message from the driver.
The following have the old CRc flag, but don't observe or consume from this module's perspective.
The intrinsic must refer to the function profiling name var, which is inaccessible during SILGen.
The kill set is the set of variables the block will re-define, ignoring exceptional control flow.
The most common case that leads here is Ret*, which does not fall-thru and has no encoded target.
The only allowed state transitions are to states with higher values, so we merge with std::max().
The runtime supports a max of 0x7FFFFFFF extra inhabitants, which ought to be enough for anybody.
The type of a tmp defined by DefLabel is the union of the types of the tmps at each incoming Jmp.
The user defined value in the first argument will be available to hphpalloc in the yyextra field.
Then return true if along the edge from the SEI to BB, RCIdentity has a non-payloaded enum value.
There are suggestions that it was to skip a leap year ever 100 years like the Gregorian calendar.
Therefore it is sufficient to just retain the argument at the site of the original partial_apply.
This attribute exports the ctor symbol, so ReadableNativeArray to be constructed from other DSOs.
This can happen when ptr is TBottom from a passthrough instruction with a src that isn't TBottom.
This copies m_lenAndHash (8 bytes), the characters (m_len bytes), add the trailing zero (1 byte).
This doesn't use for_each because paramNames shouldn't be checked when the function is anonymous.
This enqueue call would be safe from any thread because as the JobQueueDispatcher is synchronized
This ensures that all instructions that may read from the destination address depend on CopyDest.
This file defines the LangOptions class, which provides various language and configuration flags.
This file implements support for loading modules serialized into a Mach-O AST section into Swift.
This function creates an accessor function (with no body) for a computed / property or subscript.
This function deletes all of the loads and stores except / for the first load and the last store.
This information is (FIXME will be) used by IRGen to create witness tables for protocol dispatch.
This is correct for typical "arithmetic shift" instructions that shift in copies of the sign bit.
This is the last thing that happens before asserting that the struct type doesn't have a mapping.
This means that one can then use pointer equality to check for equality between two object types.
This means we end up having to do / a pretty delicate dance to manage the active set of cleanups.
This optimization specializes loops with calls to / "array.props.isNative/needsElementTypeCheck".
This pass performs a simple dominator tree walk that eliminates trivially redundant instructions.
This should be done even for local variables, as they might otherwise be expanded by user macros.
This variable is used to signal when a cache was generated and it is correct to avoid a new scan.
This will let us elide uses of the register for 'tvRef2', until the Jmp we're going to emit here.
To be conservative, we only wish to allow for casts to appear in the common parts of projections.
To optimize this process, we also compute the AvailSetMax at particular point in the basic block.
Translate from the Serialization function type repr enum values to the AST / strongly-typed enum.
Try re-type-checking the expression without the contextual type to see if it can work without it.
Two allocations of a mutable array struct cannot reference the same / storage after modification.
Type check the generic parameters, treating all generic type parameters as dependent, unresolved.
ValueIsPHI - Check if the instruction that defines the specified register / is a PHI instruction.
We also add the threaded and edge block to the worklist now that they (likely) can be simplified.
We always unroll the final `kNumFreeLocalsHelpers' decrefs, so only loop until we hit that point.
We blot them after the loop in order to ensure that we can still find the ends of switch regions.
We call the per-callee portion a "prologue."  Also, we are called from two distinct environments.
We can also remove any Persistent Class/Func*'s, and any requires of modules that are (now) empty
We cannot construct RelativeDirectPointer instances, so define a "shadow" struct for that purpose
We cannot determine the value for global variables which could be changed externally at run-time.
We could avoid a little duplicated work during warmup with more complexity but it's not worth it.
We could diagnose it specifically here, but the general logic does a fine job so we let it do it.
We could emit a noreturn call here instead which would provide more information to the optimizer.
We don't need to side exit here, but it's cleaner, and we assume that division by zero is unikely
We don't want an abstract entry because, if one exists, we'll just end up here again recursively.
We haven't optimized the widening operator much, because it doesn't happen in practice right now.
We know there can't be FPI regions and it can't be a generator body because it's a builtin frame.
We might be at tok::eof now, so ensure that consumeToken() does not assert about lexing past eof.
We need to construct the pc of the fcall from the return address (which will be after the fcall).
We only have a witness/requirement pair if exactly one of the declarations comes from a protocol.
We only trace through unconditional jumps and conditional jumps with const inputs while inlining.
We use explicit sizes and alignments here just in case the C ABI under-aligns any or all of them.
We use the type of the closure here since we allow for the closure to be an external declaration.
We will give it a pointer to the pref member of the TypedValue which is stored on the HHVM stack.
We're free try to choose a good position inbetween, for example block boundaries and cold blocks.
When we find a component that we weren't supposed to subtract, just restore lhs's original value.
When we're examining the parameter itself, it is the local name that is the name of the variable.
XHP functions: They are defined here, so different parsers don't have to handle XHP rules at all.
bindJmp --  Runtime service handler that patches a jmp to the translation of u:dest from toSmash.
ctx is not the class that declared this private method, so this private method is not accessible.
even if we had an m_conn immediately above, it may have been cleared out by onConnectionClosed().
if non-null, this is the path to a temporary file that is to be deleted when the stream is closed
just in case pstr points in the middle of a character, move forward to the start of the next char
make a new tweenColorCache on every call because caching colormappings between calls is not safe.
name must be copied because it is a substring of a string that will be garbage collected in a sec
note we assume that fill_input_buffer will never return FALSE, so suspension need not be handled.
preround the result (tmp_value will always be something * 1e14, thus never larger than 1e15 here)
primary body Get instruction boundaries and check branches within primary body and each faultlet.
the failure condition is likely since we punt to this opcode in the JIT when the state is failed.
we can't possibly get here if it was a boolean "false" that's supposed to be serialized as a char
(We prevent its value from changing at runtime between values that would affect byecode emission.)
/ / Since this does not recurse through multi-operand instructions, no visited / set is necessary.
/ The check is performed by recursively walking the computation of the / SIL value being analyzed.
2.0.10: before the drawing routines, some code to clip points that are outside the drawing window.
A concrete conformance may be bindable to a different specialization of the same root conformance.
A loose type equality check that disregards all sugar, qualification, looks through pointers, etc.
A mapping from opaque value expressions to the open-existential / expression that determines them.
A mark_dependence is safe if it is marking a dependence on a base that is the strong_pinned value.
Adjust the insertion location to point at the end of this line (i.e., the start of the next line).
All parameters can be the same matrix (safe to call using the same array for all three arguments).
Allocate a boxed existential container with uninitialized space to hold a / value of a given type.
An inout/lvalue type that is described by a debug value has been promoted by an optimization pass.
An instance of an existential metatype is a concrete type conforming to the existential, say Self.
Analyze the use graph of AllocRef for any uses that would prevent us from / zapping it completely.
Any route to the closure context must yield the same class, or things downstream won't understand.
AssignmentExpression::onParseRecur essentially adds constants to the constant table so we skip it.
At this point there may be still some violations because of the new adjacent edges of the To node.
Cause the next inner indirect result to be emitted directly into / the given outer result address.
Checks if a given candidate is a type itself, one of its / superclasses or a related generic type.
ClassInfo was not able to serialize the value, so ext_reflection prepared a stdClass error object.
Clause start, note that the first clause start location is the same as that of the whole statement
Closure object properties are the use vars followed by the static locals (which are per-instance).
Collect jump threadable edges and propagate outgoing edge values of conditional branches/switches.
Constructors and destructors as contexts are always mangled using the non-(de)allocating variants.
Copy over the existing bindings, dividing the constraints up into "favored" and non-favored lists.
Create a temp server definition to create a new connection on-demand if we didn't have one already
Currently these / are overflow builtins but may be extended to other instructions in the / future.
DebugInfo doesn't appear to care about the generic context, so just throw it away before lowering.
Determine a "mid" point and adjust to make sure the mid point is at the beginning of a range pair.
Determine the outer most region that contains the exiting block that is not this subloop's region.
Determine whether any extensions were added that might require / us to compute conformances again.
Determine whether the given expression returns a non-optional object that / might actually be nil.
Determine whether there is a superclass constraint where the superclass conforms to this protocol.
Do the simplest here thing here and just use ifdefs to control which implementation gets returned.
During this analysis pass, we have to assume everything could be live out, so we set allLive here.
EditLine wrapper that implements the user interface behavior for reading / user input to the REPL.
Emit a 'raw' allocation, which has no heap pointer and is / not guaranteed to be zero-initialized.
Ends an SHA256 message-digest operation, writing the the message digest and zeroizing the context.
Ends an SHA384 message-digest operation, writing the the message digest and zeroizing the context.
Error, try to be as helpful as possible: (a range ending/starting with '.' won't be captured here)
Evaluates the given unit at the given depth and returns the result or throws and error on failure.
FIXME: Figure out how to deal with incomplete protocols, since that notion doesn't exist in Swift.
FIXME: Standardize all callers to always provide all argument names, rather than hack around this.
FIXME: There is undoubtedly a good dynamic-programming algorithm to find the best assignment here.
FIXME: This assumes that, e.g., the default literal int/float/char/string types are never generic.
FIXME: This doesn't handle a non-debugger REPL, which should also treat this as a non-fatal error.
FIXME: This is actually a general problem: any "fatal" error could mess up the CompilerInvocation.
FIXME: This is still a lousy approximation of whether the module file will be externally consumed.
FIXME: We can't actually get here because we reject setting this option to prefer in mcon/parse.c.
FIXME: because other-module results are cached, they will not be given a type-relation of invalid.
Fast path: if the results of the original type are not type-dependent, we can just copy them over.
First step: replicate the points-to edges and the content nodes of the source graph in this graph.
Flatten the parameters from innerExtents into innerParams, and fill out varargsAddrs if necessary.
For / example, an opaque function that uses the array's address could store a / new array onto it.
For an inherited conformance, the conforming nominal type will be different from the nominal type.
For generic parameters, we want name lookup to look at just the signature of the enclosing entity.
Format: the cast kind, two typed values, a BasicBlock ID for success, a BasicBlock ID for failure.
FunctionSignatureSpecializationParams Specializations are just prepended to already-mangled names.
Get the type information for the given type, which may not / have yet undergone SIL type lowering.
Get the type information for the given type, which may not have / yet undergone SIL type lowering.
Getting a nontrivial metatype requires forcing any conformances necessary to instantiate the type.
Given the address of a class existential container, returns / the address of its instance pointer.
Handle builtin types by adding entries to the cache that reverse the mapping done by the importer.
However, for Checks, we first pre-relax the instruction's typeParam, which we pass as `knownType'.
However, if this is a direct reference to a decl (e.g. "x") then don't create a repl metavariable.
However, there is no evidence so far of an IDE using these, plus they are not documented anywhere.
If E is already an ErrorExpr, then we've diagnosed it as invalid already, otherwise emit an error.
If Inst is an instruction that we know can never use values with reference semantics, return true.
If all requests that got enqueued are done, and no more request is coming in, accelerate shutdown.
If an instruction consumes a reference both for taken and next, this function should return false.
If it is a switch on a function type, check that all case values are function references or undef.
If it is the page server, it will continue accepting requests for ServerPreShutdownWait seconds 2.
If it looks like an option or a path, then invoke in interactive mode with the arguments as given.
If its a RefData*, we need to DecRef that - but in that case the new value is the same as the old.
If no conclusive match can be found, leaves m_streamType as its default value of empty_string_ref.
If someone just called __call() or __callStatic() directly, branch to a normal non-magic prologue.
If the basic block has neither, we do not need to / process the block again in the last iteration.
If the catch trace isn't going to finish by calling _Unwind_Resume, we consume the exception here.
If the context is not a method entry point, returns nullptr to fall back to the tracelet compiler.
If the declaration is dynamically dispatched through a protocol, we have to use materializeForSet.
If the proper action on seeing token YYTOKEN is to reduce or to detect an error, take that action.
If the property came from ObjC, we need to register this as an external definition to be compiled.
If the retain and release are to obviously pointer-equal objects, then we can delete both of them.
If the rethrow destination has a single branch predecessor, consider emitting the rethrow into it.
If the return type is not Void, add a BBArg that / propagates NewRetVal to the return instruction.
If there are multiple elements, the pairs of types need to match in size for the coercion to work.
If there is a repeated letter at the back, drop that second instance of that letter and try again.
If there is an address in play, then we / can initialize the address elements of the tuple though.
If there numerous viable matches, throw out the non-viable matches and try to find a "best" match.
If there was a conflict stripping an error suffix, adjust the name but don't change the base name.
If there were call for a 'touch' operation, then the detachLocked() call would need to be omitted.
If there's a data pointer required, grab it and load out the extra, previously-curried parameters.
If this is a SILArgument of current basic block, we can split it up to values in the predecessors.
If this is a derived class, we may have to do a load of the 'self' box to get the class reference.
If this is a get+mutableAddress property, synthesize an implicit setter and record what we've got.
If this is an initialization of only trivial elements, then we don't need to update the bitvector.
If this is an operator func decl in a type context, the 'self' isn't actually going to be applied.
If this member is a method that is a getter or setter for a property, don't add it into the table.
If this would make the current solution worse than the best solution we've seen already, stop now.
If we already have seen a load, or if the slot does not / match the exit slot, the analysis fails.
If we can diagnose a problem based on the constraints left laying around in the system, do so now.
If we can't resolve the locator to an anchor expression with no path, we can't diagnose this well.
If we don't have a context but the other type does, we'll return ABIDifference::ThinToThick below.
If we don't have a mapped node in the destination graph we still have to honor its escaping state.
If we ended up building our parent archetype, then we'll have already filled in our own archetype.
If we have a concrete conformance, we need to substitute the conformance to apply to the new type.
If we have a leading identifier followed by a ':' or 'in', then this is obviously a for-each loop.
If we have a useful base type for the candidate set, we'll want to substitute it into each member.
If we have an abstraction change or if we have to produce a result at +1, then emit a RetainValue.
If we're emitting into an initialization, we can try shuffling the elements of the initialization.
If we're introducing a level of optionality, only certain types are ABI-compatible -- check below.
If we're looking into an existential type, check whether this result was found via dynamic lookup.
If we're not using the Objective-C runtime, we can use the native reference counting entry points.
If we're serializing all function bodies, type metadata for internal types needs to be public too.
If we've already synthesized accessors or are currently in the process of doing so, don't proceed.
In case of loops, block arguments can / "extend" the liferange of a reference in upward direction.
In no event will the authors be held liable for any damages arising from the use of this software.
In principle, we could synthesize 'address' from 'mutableAddress', but for now we'll enforce this.
In theory we can follow the same rules as mangling and only include the outermost private context.
In theory, the unwind API will let us set registers in the frame before executing our landing pad.
In theory, this can be any arbitrary expression, but we only support constant addresses right now.
Initializes the repo schema id and the compiler id from their special sections in the hhvm binary.
It is also possible to use just the second pass to map to an arbitrary externally-given color map.
It's unsafe to reset() m_path2Node / m_lpath2Node while concurrent accessors might be touching it.
Its advantage is that it is guaranteed to return a color index in one search over the color table.
LSLocation written has been extracted, expanded and mapped to the bit / position in the bitvector.
Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements.
Load a value of the type-of-reference out of the given address / and into the destination address.
Local function to determine whether the given declaration is subject to a swift_private attribute.
Lookup an unresolved context name and resolve it to a Clang / declaration context or typedef name.
Loop over container1, only copying over key/value pairs where the value is not present in the Set.
Loops in fault funclets could cause us to revisit the same block, so we track the ones we've seen.
Make sure that we are only storing into our users, not storing our users which would be an escape.
Make sure we can move potential decrements to the predecessors and collect retains we could match.
NOTE: If we allow protocol extensions in the future, this conditional statement should be removed.
NOTE: if you change the layout of this type, you'll also need to update tuple_getValueWitnesses().
No matter what error path we take, make sure the PatternBindingDecl/TopLevel code block are added.
Note that we do not currently use thin representations in the AST for the types of function decls.
Note: FILE_SEARCH and FILE_REGEX do not actually copy anything, but setup pointers into the source
Note: these miThrows probably can be left out if base is folly::none (i.e. we're on the last dim).
Notes about instructions for which we're supposed to perform some / sort of non-standard emission.
Now go through all new blocks and reset their next/taken blocks to their corresponding new blocks.
Now that we've type checked the explicit argument type, see if it agrees with the contextual type.
ObjC generic type parameters don't have a runtime representation, so they don't count as captures.
Objective-C class metadata are objects, so an AnyObject (or NSObject) may refer to a class object.
Observing accessors (and their generated regular accessors) may have the type of the var inferred.
On most systems, this would mean that any file consisting only of characters in the range 0x00 ...
Only nodes with outdegree zero are put into the queue, which is how nodes in a cycle get excluded.
Otherwise if our payload is non-trivial but lacking reference semantics, insert the release_value.
Otherwise, it's a CF return type, which unfortunately means we can't just trust getMethodFamily().
Payload and no-payload cases are counted and the enum is classified into the following categories:
Phase 1 - 3 are only performed when we know the data flow will not converge in a single iteration.
Pick a runtime entry point and target metadata based on what kind of representation we're casting.
Please be aware of this if you modify the function to allow other certificate validation behaviors
Preferred locale codes for the first N entries of g_grandfathered Must be kept in sync with above.
Property access is from within a parent class's method, which is allowed for protected properties.
Reconstruct AST substitutions from parsed substitutions using archetypes / from a SILFunctionType.
Regardless of whether the inline cache was populated, smash the call to start doing real dispatch.
Relies on the fact that only one SessionModule will be active in a given thread at any one moment.
Return the number of extra inhabitants for a pointer that reserves / the given number of low bits.
Returning a non-declared property, we know that it is accessible since all dynamic properties are.
Returns true if we added the decl's module to the import set, false if / the decl is a local decl.
See the License for the specific language governing permissions and limitations under the License.
SelectEnum must be exhaustive, so the second case must be handled either by a case or the default.
Setup Preprocessor callbacks before initialing the parser to make sure we catch implicit includes.
Since it is a forward dataflow- problem, it is faster to go through the worklist in reverse order.
Since we don't spill physical registers, and Vregs are SSA, a value's assigned slot never changes.
Some IRGen-generated helper functions don't have a corresponding SIL function, hence the dyn_cast.
Sort all functions by their profile count, and set AttrHot to the top Eval.HotFuncCount functions.
Static definitions have a "specification" which basically links the definition to the declaration.
TODO(t7561579) until we can properly handle non-file streams here, don't pretend we can and crash.
TODO: We could allow static (or class final) functions too by "capturing" the metatype in a thunk.
TODO: We need information from the ARC optimizer to prove that property if we are going to use it.
TODO: maybe we can do this lazily or maybe we should disallow SIL passes to create critical edges.
The File is also owned by the native data so it does not need to be cleaned up by an XML callback.
The analysis must determine whether any array / mutation can occur between the retain and release.
The appropriate fix is probably to gin up a source range for the declaration when synthesizing it.
The caller of this function will use it to know whether it can avoid a generic incref, unbox, etc.
The compiler will use a nil reference as a way to avoid allocating memory for boxes of empty type.
The destructor doesn't need to do anything, the CC's destructor will pop the context if we set it.
The formal metatype parameter to a C function imported as a static method is dropped on the floor.
The invariant is that this is always zero-initialized, so we don't need to do anything extra here.
The payload of this specific enum case might be loadable even if the overall enum is address-only.
The property's accessors will decide whether the getter is mutating, and whether there's a setter.
The thing being capture specified is an identifier, or as an identifier followed by an expression.
The whitelist of classes and functions from the stdlib, whose specializations we want to preserve.
This algorithm assumes we don't have both literal and literal-type-match at the start of the list.
This causes the function's reference count to be incremented causing it to be alive unnecessarily.
This file defines external functions that can be called to explicitly instantiate the CFG printer.
This has to be bug-compatible with the original implementation, so only encode 23 of the 24 bytes.
This includes builtins that aren't even declared in Builtins.def, i.e. all of the LLVM intrinsics.
This is automatically handled / when a function is created with this as part of its argument list.
This is important so we can determine covering switches for enums that have cases without payload.
This is map between LSLocations and their available values at the / beginning of this basic block.
This is the new tail translation, so store the fallback jump list in case we translate this again.
This isn't as bad as it seems though, because most of these will be diagnosed by expr diagnostics.
This means it might not be safe to throw an exception right now (see discussion in jitReturnPost).
This must happen here (instead of in resetAllocator), because the sweep routine may use g_context.
This retain is known safe if the operand we are tracking was already known incremented previously.
This version is derived from the original implementation of FreeSec (release 1.1) by David Burren.
Those cases, and others, if it's MOpFlags::Define, will set the base to a null value in tvScratch.
Tracks the max depth of elem stack + desc stack offset inside a region where baseValue is unknown.
Transforms in_array with a static haystack argument into an AKExistsArr with the haystack flipped.
Try to derive the concrete type of self and a related conformance from the found init_existential.
Typically called between requests in non-RepoAuthoritative mode when function renaming is enabled.
Unresolved/Anonymous ClosureExprs are common enough that we should give them tailored diagnostics.
Update Loop Information - we know that this block is now in the current loop and all parent loops.
Walk through the variables list and account for all points where copies or spills need to be made.
We are either casting between address-only types, or cannot promote to a cast of reference values.
We can CSE function calls which do not read or write memory and don't have any other side effects.
We can sink fix_lifetime instructions if there are no reference counting instructions in the loop.
We checked every other elt of the tuple and did not find any non-trivial elt except for ourselves.
We do this late since it is a pass like the inline caches that we only want to run once very late.
We have a primary input, so use that as the basis for the name of the serialized diagnostics file.
We invalidate the SILLoaderCaches here so that we can eliminate the definitions of such functions.
We know that the destructor has no side effects so we can remove the deallocation instruction too.
We lower Switch to a series of comparisons if any of the successors are in included in the region.
We need to assert this up here before we possibly call compact (which will cause m_used to change)
We only do it once here (unlike in the fast path) because the scheduler drops the other reference.
We only know we can simplify if the switch_enum user is in the block we are trying to jump thread.
We recompute the final post dom release since we may have moved the final post dominated releases.
We rely on the SIL CFG here, because unemitted shared case blocks might fallthrough into this one.
We replace / values that come from basic block arguments with the caller values and / strip casts.
We should not be called with ForDefinition for nominal types that require in-place initialization.
We want to duplicate small blocks that contain a least on release and have / multiple predecessor.
What they actually meant is to write "is SomeType", so we rewrite it to that pattern for good QoI.
__jit_debug_register_code() needs to be defined in a separate file from the one it is called from.
and then pass this to abi::__cxa_demangle to get the demanged name: HPHP::jit::interpOneIterInit()
checkSafeArrayAddressUses will check that the / store is a simple initialization outside the loop.
create a top level DIE (debug information entry) all subsequent DIEs' will be children of this DIE
ctx is not the same, an ancestor, or a descendent of baseClass, so the property is not accessible.
don't serve the request if it's been sitting in queue for longer than our allowed request timeout.
find earliest common predecessor of p1 and p2 (lower RPO ids are earlier in flow and in dom-tree).
handleSuperInitUse - When processing a 'self' argument on a class, this is / a call to super.init.
o This lets us re-merge all predecessors into a block's stateIn while doing the dataflow analysis.
only set the sqlite return value if we are a scalar function, or if we are finalizing an aggregate
parseAnyIdentifier - Consume an identifier or operator if present and return / its name in Result.
releases of self are tracked as a release (but retains are just treated like a normal 'load' use).
this does not re-enter set will decRef any old value that may have been overwritten if appropriate
used in later initializations / The set of cleanups to be called when the ASTContext is destroyed.
we need someone to hold on to a reference to it even though we're not going to do anything with it
(Note that we are not including extensions here -- default derivation doesn't apply in extensions.)
- Could the base be something (regardless of type) that is inside one of the things we're tracking.
/ / If CheckOnly flag is set, then this function only checks if the / required casting is possible.
/ / Immediately after this call, there will be an unconditional / branch to the continuation block.
/ / The lsquare-starting and first key have already been parsed, and / are passed in as parameters.
/ / init_existential_addr instructions behave like memory allocation within the / allocated object.
A type sized and aligned the way Swift wants Int128 (and Float80/Float128) to be sized and aligned.
A value of None for a given branch indicates that / the branch does not introduce a new refinement.
A wrapper for `zip_open` that prepares a full path file name to consider current working directory.
After scanning, if we did not find a value marked with the SProp marker then there is no work to do
All jobs which have finished execution or which have been determined / that they don't need to run.
And remove all Callee releases that we found and made redundant via owned to guaranteed conversion.
Archetype metatypes have non-trivial representation in case / they instantiate to a class metatype.
AsyncFuncImpl defines a minimum C++ stack size but that only applies to threads we manually create.
Attempt to re-type-check the entire expression, allowing ambiguity, but ignoring a contextual type.
Autoclosures aren't recursively referenceable, so their special treatment isn't a problem for this.
Be careful between here and the updateMarker() below, where the caller state isn't entirely set up.
Because of the way that phi nodes are represented we have to collect all uses before we update SSA.
Bridge Bool back to ObjC bool, unless the original Clang type was _Bool or the Darwin Boolean type.
CallGraph GraphTraits specialization so the CallGraph can be / iterable by generic graph iterators.
Carry out the operations required for an indirect conditional cast / using a scalar cast operation.
Check for a hit in the request local cache---since we've failed on the immediate smashed in the TC.
Check for each predecessor, if the incoming value coming from it is equivalent to the DomCondition.
Climb the DeclContext hierarchy to see if any of the containing declarations matches the predicate.
Collect all nodes which are reachable from the SourceNd via a path which only contains defer-edges.
Collect instructions that either initialize or release any values at the object defined by defInst.
Collect the tuple elements, which should all be maximally abstracted to go in the optional payload.
Compute the BBSetIn and BBSetOut for the current basic / block with the generated gen and kill set.
Compute the BBSetIn and BBSetOut for the current basic block with the / generated gen and kill set.
Conditions for showing this diagnostic: The object literal protocol's default type is unimplemented
Conservatively assume that a concat with any non-scalar argument can invoke arbitrary side-effects.
Create a hash so that we can check whether we already have a connection for this server definition.
Delay the retain-unowned optimization until we finished with all other optimizations in this block.
Determine whether the given declaration returns a non-optional object that / might actually be nil.
Diagnose metatype values that don't appear as part of a property, method, or constructor reference.
Don't warn if the potential witness has been explicitly given less visibility than the conformance.
Drop the requirement and continue, but log an error so that we don't actually try to generate code.
Each block that has a use of the value has the value live-in unless it is the block with the value.
Each value in the list is represented with 4 IDs: ValueID, ValueResultNumber, TypeID, TypeCategory.
Emits the test(s) that determine whether the fixed-size enum contains a / payload or an empty case.
Every FPI region must be contained within one section, either the primary body or one fault funclet
Every time the ForwardSetOut of a basic block changes, the optimization is rerun on its successors.
FIXME: Need a more complete/robust lookup mechanism that can handle declarations in sub-stmts, etc.
FIXME: This has to be dynamically looked up for classes, and dynamically instantiated for generics.
FIXME: We could generate the code to dynamically report the overflow if the third argument is true.
FIXME: When request cancellation is implemented and Xcode adopts it, / don't use 'OncePerASTToken'.
FIXME: Working with filenames is fragile, maybe use the real path or have some kind of FileManager.
FIXME: we could write the results to disk in the background, since they're immutable at this point.
Favor unary operator constraints where we have exact matches / for the operand and contextual type.
Figure out for each predecessor which branch of the dominating checked_cast_br is used to reach it.
Finish the given protocol conformance (for an imported type) / by filling in any missing witnesses.
First we create an empty function (i.e. no BB) whose function signature has had its arity modified.
For a class, we don't need to visit the protocol members of the superclass: that's already handled.
For closures use variables will be the first properties of the closure object, in declaration order
For the moment, we perform a linear search here, but we can and should do something more efficient.
For the nested cases, the caller has sent a cmd to the server and is expecting a specific response.
Generate code to the optional is present, and if not abort with a message (provided by the stdlib).
Generate getter from the initialization code whose / result is stored by a given store instruction.
Get either the specialized emitter for a known function, or the function value for a normal callee.
Get the runtime library link path, which is platform-specific and found / relative to the compiler.
Given a LSLocation, try to collect all the LSValues for this LSLocation / in the given basic block.
Given a serial day number (SDN), find the corresponding year, month and day in the Jewish calendar.
Given a year, month and day in the Jewish calendar, find the corresponding serial day number (SDN).
Given nothing but a formal C parameter type that's passed / directly, deduce the convention for it.
Given that we have a source for metadata of the given type, check / to see if it fulfills anything.
Helper that adds the given line breakpoint that has been matched to the given unit as a breakpoint.
However, for the first VM frame, there is no code at returnRIP-1, since the AR was set up manually.
However, the captured arguments are not arguments of *this* apply, so they are not pre-incremented.
If a SequenceExpr survived until CSGen, then there was an upstream error that was already reported.
If any fixes needed to be applied to arrive at this solution, resolve them to specific expressions.
If any of the type witnesses was erroneous, don't bother to check this value witness: it will fail.
If both the delegated-to initializer and our enclosing initializer can fail, deal with the failure.
If in always on mode, the Xenon Surprise flags have to be on for each thread and are never cleared.
If one has a type parameter remaining but the other does not, drop the one with the type parameter.
If resulting string turns out to be shorter than input string, we simply copy the input and return.
If the checks are incompatible we then give up on hoisting the checks for this particular variable.
If the epilog was not branched to at all, kill the BB and just emit the epilog into the current BB.
If the first concat operand is from the previous concat in the stream, continue the current stream.
If the instruction itself has any uses, recursively zap them so that nothing uses this instruction.
If the self type couldn't be computed, or is the result of an upstream error, return an error type.
If there is no varEnv, the enclosing file was called by fb_autoload_map, which wants a local scope.
If this basic block does not define a value we can just use the value live at the end of the block.
If this is a copy_addr or store_weak, we just set the initialization bit depending on what we find.
If this is a declaration without an initializer, reject code if uninitialized vars are not allowed.
If this is an 'is' pattern or an 'as' pattern where the types are the same, then produce a warning.
If this is the first attribute, and if we are on a simple decl, emit a fixit to move the attribute.
If we are importing a function declaration mark it as external since we are not importing the body.
If we fall off the end of the inline assembly, we're expected to leave a single value on the stack.
If we found the func in baseClass and it's private, this is always going to be the called function.
If we found the instruction that defines the value we're releasing, don't push the release past it.
If we get here, the break point is of a type that does not need to be explicitly enabled in the VM.
If we have a Swift metatype, map it to the heap metadata, which will be the Class for an ObjC type.
If we imported as a tuple type, construct the special method-formal-parameters abstraction pattern.
If we've reached an implicit return, we have not found any user code and can stop searching for it.
If you can't get a unique character in the first 256 chars of your hostname, you're doing it wrong.
If you change the logic here, please also update the error message in ps_files_open() appropriately
In PHP, the two arg version can return false on input failure, but we don't behave the same as PHP.
In either case it is not covered by checked_cast_br instructions generated by tryToSpeculateTarget.
In order to make this work, we pick the most general function type and use a conversion constraint.
In previous versions, most significant bits (MSBs) of the seed affect only MSBs of the state array.
In reality, the deallocating destructor is referenced directly from the HeapMetadata for the class.
In these cases, don't look up the address range in the "cold" file, since it the range isn't there.
Instructions that technically do some things w/ memory, but not in any way we currently care about.
It might have been loaded in a parent frame, though, so we have to find the appropriate FrameState.
Iterate over the non self arguments and add them to the new argument list, upcasting when required.
Its not safe to do recursively delete here as some of the SILInstruction maybe tracked by this set.
Local function that retrieves the next unclaimed argument with the given name (which may be empty).
MainExePath points to "lib/sourcekitd.framework/XPCServices/ SourceKitService.xpc/SourceKitService"
Map the increment's operand to a newly initialized or reinitialized ref count state and continue...
Matching zend again: incDecProp does an unbox before the operation, but setop doesn't need to here.
Metaprogram to verify that every concrete class implements a 'static bool classof(const Pattern*)'.
NOTE: The type loc may be there but have failed to validate, in which case we return the null type.
Non-Darwin platforms don't use the Objective-C runtime, so they can not import Objective-C modules.
Note: DarwinBoolean is odd because it's bridged to Bool in APIs, but can also be trivially bridged.
Note: it is indeed a bit odd that interrupts due to single stepping come in as "BreakPointReached".
Note: we don't check whether all of the elements of the overload set have different argument types.
Older versions of the runtime library may not contain the entries using the new calling convention.
On Clang, the DW_AT_object_pointer is only present in a function's definition, not its declaration.
Only check whether the total memory limit was exceeded if this request is at a new high water mark.
Only deal with the case of a contiguous set of nodes where we can run/allocate memory on each node.
Only some of these will / result in conformances that are attributed to this declaration / context.
Only walk into the 'do' clause of a do/catch statement if the catch isn't syntactically exhaustive.
Open-code the setMutating() calculation since we might run before the setter has been type checked.
Otherwise modify the state appropriately in preparation for removing the increment, decrement pair.
Otherwise, remove any local dead closures that are now dead since we specialized all of their uses.
Otherwise, we have a previous declaration or definition which we need to ensure has the right type.
Otherwise, we have total knowledge of the class and its fields, so walk them to compute the layout.
Otherwise, we know that MinPathSize must be RHS.size() and RHS must be a strict subsequence of LHS.
Otherwise, we're thin if the metatype is thinnable both substituted and in the abstraction pattern.
Provide specific diagnostics for assignment to subscripts whose base expr is known to be an rvalue.
Recall that the / Pattern may be involved in initializing more than just this one vardecl / though.
Recursive function to check if a given object has a countable base somewhere in its type hierarchy.
Refutable patterns occur when checking the PatternBindingDecls in an if/let or while/let condition.
Relocate code in the range start, end into dest, and record information about what was done to rel.
Remove any - from the wrong name for better comparing since it will probably come prepended with --
Replace OldSuccID by NewSuccID, just deleting OldSuccID if what NewSuccID / is already in the list.
Replace a dead apply with a new instruction that computes the same value, and delete the old apply.
Retrieve the associated types that are referenced by the given / requirement with a base of 'Self'.
Return an AliasClass containing all locations pointed to by any PtrToGen sources to an instruction.
Return the number of successor-edges including fall-through paths but not implicit exception paths.
Return whether or not sym represents a symbolic stack element, rather than an actual stack element.
Returns 1 when an error was found and it returns 0 if no error situation has occurred on the cursor
Returns a pair of Constants consisting of the getter and setter / function pointers, in that order.
Returns true if given the current lattice state, do we care if the value / we are tracking is used.
Returns true if given the current lattice state, do we care if the value we / are tracking is used.
Scan backward recording all operands that use CopySrc until we see the most recent init of CopySrc.
Should run after box-to-stack promotion since it is limited to propagating through stack locations.
Skip any leading whitespace at the beginning of a field unless the format suppresses this behavior.
So, a / store to an 2-field struct as mentioned above will generate 2 LSLocations / and 2 LSValues.
Some instructions don't have direct memory side effects but can't be sunk because of other reasons.
Special case: we are overriding a 'required' initializer, so we need (only) the 'required' keyword.
TODO fix folly to better detect error cases (currently I think it just aborts) and catch them here.
TODO: I think this is a copy paste error, since we a trap BB should have an unreachable at its end.
TODO: Should be able to accept +0 values here, once forwardFunctionArguments/emitApply are able to.
TODO: consider using a slower mode that dynamically checks whether the buffer size is small enough.
The Swift-field-less cases use opaque storage, which is guaranteed to ignore the type passed to it.
The default value of the AllocStack is NULL because we don't have uninitialized variables in Swift.
The previous metadata should be global data, so we have no real choice but to drop it on the floor.
The result of a partial_apply is a thick function which stores the boxed partial applied arguments.
The second hint accounts for F's entire equivalence class---see analyzePhiHints() for more details.
The value of semaphore 1 (SYSVSEM_USAGE) is a count of the number of processes using the semaphore.
There is a read to a location, expand the location into individual fields / before processing them.
Therefore, we must typically force the initialization of / a class when emitting a reference to it.
These actually perform some sort of operation against the operand or can use the value in some way.
These numbers have the appearance of being un-relocated addresses, but its in the final executable.
These should already have been diagnosed by type-checking but we may still get here after recovery.
These type matching functions are currently only used for assertions, so it's ok to leave them out.
This allowed the color conversion math to be done only once per colormap entry, not once per pixel.
This file implements the remangler, which turns a demangling parse tree back into a mangled string.
This is for backwards-compatibility with modules that still rely on the "HasUnderlyingModule" flag.
This is only set by the jemalloc stats sync which we don't enable until after this has been called.
This is particularly important for syncing vm regs where we read the marker to eagerly sync vmpc().
This is the implementation of the method to be used if the exact class of the instance would be CD.
This is tracked in post-order and unravelled as subsequent applications complete the call (or not).
This library intrinsic is generic, so we need to form substitutions and compute the resulting type.
This makes sure that on another loop pass we will treat the fault just as if it was freshly thrown.
This marker update is to make sure rbx points to the bottom of our stack if we enter a catch trace.
This probably means we tried to compare IRInstructions with extra data that had no equals function.
This strtod returns a nearest machine number to the input decimal string (or sets errno to ERANGE).
To minimize output, only print the line and column number for everything but the first instruction.
To reduce the amount of output, we only dump the memory behavior of selected types of instructions.
To save memory we load these mappings lazily from the repo and cache only the ones we actually use.
Traverse the actual block layout, and find out the intervals for each exception region in the tree.
Try larger offsets first to avoid false matches from earlier data that happen to look like strings.
Turns on the Xenon Surprise flag for every thread via a lambda function passed to ExecutePerThread.
Type check the function declaration, treating all generic type parameters as dependent, unresolved.
Unnamed bitfields are just for padding and should not inhibit creation of a memberwise initializer.
Warn if nothing threw within the body, unless this is the implicit do/catch in a debugger function.
We can afford to wait a long time here, since we've already started the dispatcher for this server.
We can potentially use the argument as-is if the parameter is bound as a 'let' without cleaning up.
We can rewrite the code to check the condition before entering the loop, and side exit if it fails.
We don't even care that it's the same method we're asking for, just that it has the right selector.
We ended up skipping over the source location entirely, which means that it points into whitespace.
We generate this pattern after switching the Word type to an explicit Int32 or Int64 in the stdlib.
We have already processed all of our subloops, so everything there has already been properly setup.
We limit the size of the AA cache to 2**14 because we want to limit the memory usage of this cache.
We limit the size of the MB cache to 2**12 because we want to limit the memory usage of this cache.
We limit the size of the MB cache to 2**14 because we want to limit the memory usage of this cache.
We need to check whether we are switching to a database that was not part of the connection string.
We only handle the case where one or more bind expressions are subexprs of the optional evaluation.
We should have handled the payload case either in extra inhabitant or in extra tag dispatch by now.
We treat it as a foreign class (like a CF type) because it doesn't have a real public class object.
We'll use the custom scanner if there's no guards, or if at least one of the guards is interesting.
When that changes, this code will need to be updated and a MaxLargeIndex will need to be used here.
While it's possible we pushed the DefInlineFP into the catch trace it will be after the BeginCatch.
While loop is to handle a single function taking a long time and passing several sampling intervals
break and return the current value if the number is not well-formed that's what Linux strtol() does
implAwaitE pushes a null before calling the event hook, so we don't want to update the marker here.
libxml headers use their own variant of documentation comments that Clang does not understand well.
super.constructor references an instance method (even though the decl is really a 'static' member).
the collection setter either threw or created a reference to value, so we can use a cheaper decref.
the number of UTF-16 code units is not larger than that of UTF-8 code units, + 1 for the terminator
this only happens for calls that have been morphed into bytecode e.g. idx(), abs(), strlen(), etc..
(But note that ObjC might think we have a superclass even if Swift doesn't, because of SwiftObject.)
...other combinations are possible, but as long as AST lookups precede SIL linkage, we should be ok.
/ / Currently only one property is handled and that's the isNativeTypeChecked / property for arrays.
/ / If a definition type is given, the result will always be an / llvm::GlobalVariable of that type.
/ / Returns the SILValue to store the result into if the specialized function / has a direct result.
/ / This returns false and sets Oper to nullptr for projections of the value at / the given address.
/ Note that this is not a subtype or conversion check - that takes place / in isDeclAsSpecializedAs.
/ Return None if no such operand could be found, otherwise return the index / of a suitable operand.
@callee_owned function calls implicitly release the context, which may call deinits of boxed values.
A builtin call is considered reducible if its output is a constant and all its inputs are constants.
A full type metadata record is basically just an adjustment to the address point of a type metadata.
A release that is mapped to an argument which already has a release that overlaps with this release.
Add these into the running sums, and simultaneously shift the next-line error sums left by 1 column.
After this phase we are left with up to one load and store per block and the last store is recorded.
Again, pull a value witness table from the source metadata if we can't use a protocol witness table.
An input number that is greater than this value, if followed by a legal input character, is too big.
An optimistic iterative intersection-based dataflow is performed on the / gensets until convergence.
Any early exit before we store a value into the existential must clean up the existential container.
As per curl docs, an empty post must set POSTFIELDSIZE to be 0 or the reader function will be called
Assign slots, keeping track of the largest assigned slot and the total number of uses for each slot.
At this point, "diff" is zero iff the correct and buggy algorithms produced exactly the same result.
Base native property handler class, that is reused by derived DOM classes with the similar handling.
Blocks where the value is live at the end of the block and which have a frontier block as successor.
Break down the time with localtime and subtract the number of seconds since the start of the period.
Change LdCtx in static functions to LdCctx, or if we're inlining try to fish out a constant context.
Check if PotentialUser could be a use of the reference counted value that requires user to be alive.
Check if the last command parsed by the client has an argument to change the status of a breakpoint.
Check if the type conforms to _BridgedToObjectiveC, in which case we'll extract its associated type.
Check the payloads to see if we can take advantage of common layout to optimize our value semantics.
Check to see if the given pattern is a specializing pattern, / and return a semantic pattern for it.
Checks the given declaration's accessibility to make sure it is valid given / the way it is defined.
Collect input arguments to the generic metadata accessor, as laid out by the GenericArguments class.
Collect the set of requirements placed on the given generic parameters and / their associated types.
Convert through optional types unless we're looking for a protocol that Optional itself conforms to.
Currently we represent large Indexes using a 64 bit integer, so we don't need to mess with anything.
Currently you can't write a getter/setter that takes a different type from the type of the variable.
Deallocate a boxed existential container with uninitialized space to hold a / value of a given type.
Diagnose common failures due to applications of an argument list to an / ApplyExpr or SubscriptExpr.
Do not remove/delete m_debuggerHook, it's a singleton, and code in another thread could be using it.
Elem dims with MOpFlags::Unset can change a base from a static array into a reference counted array.
Emit a 'raw' deallocation, which has no heap pointer and is not / guaranteed to be zero-initialized.
Every time the BBWriteSetIn of a basic block changes, the optimization is rerun on its predecessors.
FIXME: Errors could cascade here, because name lookup for this operator won't find this declaration.
FIXME: The pedantically correct way to find the type is to resolve the Swift.StringLiteralType type.
FIXME: The second argument indicates whether the given operator is visible outside the current file.
FIXME: even though we don't apply the solution, the type checker may modify the original expression.
Fetch value of varName only, so that we can recover nicely when its value is too large to serialize.
Fill in in reverse order, since they may come from popC's (depending on what loadParam wants to do).
First allocation is just for 2 elements, since we don't know if this scanner will even need a stack.
First we prefer primary over secondary, and if the field type is the same, we sort on ping_ms again.
First we prefer secondary over primary, and if the field type is the same, we sort on ping_ms again.
For now we shouldn't be seeing exceptions from any other runtimes but this may change in the future.
For phis, union all incoming values, taking care to not recurse infinitely in the presence of loops.
For the moment, this source module just uses the default resync method provided by the JPEG library.
Get all declared properties first, bottom-to-top in the inheritance hierarchy, in declaration order.
Given a collection of "linked" expressions, analyzes them for / commonalities regarding their types.
Given an apply or partial_apply, return the direct callee or / nullptr if this is not a direct call.
HACK: emitVirtualLocal would pollute m_evalStack before visiting exp, YieldExpression won't be happy
Here's an example showing how an acyclic CFG can become cyclic by chaining its retranslation blocks:
However, note that this transformation can turn acyclic graphs into cyclic ones (see example below).
However, we need to autoload typedefs because they can affect whether VerifyParamType would succeed.
If Inst does not read or write to memory, have side effects, and is not a terminator, we can zap it.
If ObjC interop is enabled, casting a metatype to AnyObject succeeds if the metatype is for a class.
If any elements or the 'super.init' state are conditionally live, we need to emit conditional logic.
If exactly one of the type variables can bind to an lvalue, we can't merge these two type variables.
If function with a given name wasn't seen anywhere yet or if it is known to exist, perform a lookup.
If it is, we replace it with null instead of shifting all members of the worklist towards the front.
If it's a poor match in the middle of a token, see if the next char starts a token and also matches.
If it's an extension class with a custom instance initializer, that init function does all the work.
If something went wrong in the binding (warning, for example), then we can get an empty object back.
If the Unit is merge only, it then contains enough information to simulate executing the pseudomain.
If the class is an interface, we can just hit the class's vtable or interface map and call it a day.
If the closeness is a miss by a single argument, then this returns / information about that failure.
If the context wants us to initialize a buffer, copy there instead of making a temporary allocation.
If the current BB is the entry BB, initialize a state corresponding to each of its owned parameters.
If the current score is worse than the best score we've seen so far, there's no point in continuing.
If the extension doesn't add protocols or has no members that we should print then skip printing it.
If the last extension we included is the same as the last known extension, we're already up-to-date.
If the member is part of a protocol or extension thereof, we need to substitute in the type of Self.
If the memory object is completely initialized, then nothing needs to be done at this release point.
If the replacement type has dependent conformances, we might be able to use an abstract conformance.
If there's no new_x, but lhs.x() is nontrivial, then rhs.x() is not equal to it and also nontrivial.
If this decl is invalid, mark any parsed accessors as invalid to avoid tripping up later invariants.
If this function is associated with the target class, go ahead and emit the witness offset variable.
If this is a binary operator, relex the token, to decide whether it has whitespace around it or not.
If this is the first documentation comment, save it (because there isn't anything to merge it with).
If this is the first time we see this unreachable block, store it along with the folded branch info.
If this is the first time we see this unreachable block, store it along with the noreturn call info.
If this typedef is merely a restatement of a tag declaration's type, return the result for that tag.
If transferring instructions within the same basic block, no reason to update their parent pointers.
If we are loading from the AllocStackInst and we already know the content of the Alloca then use it.
If we are running with 'frozen' owned arg releases, check if we have a frozen use in the side table.
If we could read the destination file, and it matches the source file in size, they may be the same.
If we have multiple tuple elements, we'll have to do some shifting and truncating of the mask value.
In OpCUGetL we rely on OutCInputL returning TCell (which covers Uninit values) instead of TInitCell.
In PHPOutput mode, we always want doubles to parse as doubles, so make sure there's a decimal point.
In an opaque metadata, the first two fields are the fixed buffer followed by the metadata reference.
In principle, any time we can do this, we should try to re-use this function for other conformances.
Inform IRGenFunction that the given archetype has the given value / witness value within this scope.
Initialize an array that records the number of times a variable is assigned to by the format string.
Intermediate ElemD operations on strings fatal, unless the string is empty, which promotes to array.
It may be cheaper to pass one of their operands / to the successor instead of the whole instruction.
It's possible that in some requests nsName might succeed, while in others fallbackName must succeed.
Iterate over the potential witnesses for this requirement, looking for solutions involving each one.
Modify return terminators to branch to the return-to BB, rather than trying to clone the ReturnInst.
Most of this code will be removed once the SIL level ARC optimizer causes it to no longer be needed.
Next we have the really interesting routines: selection of a colormap given the completed histogram.
NextToken is the soon to be previous token Therefore: x.0.1 is sub-tuple access, not x.float_literal
Nominal types add no generic arguments themselves, but they may have the arguments of their parents.
Note that only the magic values have 1s in the low 3 bits since StringData's are at least 8-aligned.
Note that the label here is unimportant, so we choose something descriptive to make the IR readable.
Note that this is a special case of a more general race we have in this unit merging code right now.
Note: for now this is an invariant, but if we start pruning factoredExits this might need to change.
Now that we know we have an instruction we understand see if the instruction has an available value.
Only allow this method to go up a fixed number of levels to make sure we don't explode compile time.
Only diagnose archetypes that don't have a parent, i.e., ones that correspond to generic parameters.
Optimize FPushClsMethod when the method is a known static string and the input class is the context.
Optionally drill down into an apply to see if the operand is captured in or returned from the apply.
Otherwise this is a valid decl attribute so they should have put it on the decl instead of the type.
Otherwise, insert it into the map by creating a new object on the heap using the supplied arguments.
Otherwise, the result is conditional on a successful conversion and an accurate number of arguments.
Otherwise, we have to build SSA for the value defined in this block and / this block's predecessors.
Our error result conventions are designed to be ABI compatible with functions lacking error results.
Overwrite the l-value access kind to be read-only if we're converting to a non-mutable pointer type.
Parameters: m - The affine transformation  Returns: GD_TRUE if the affine is rectilinear or GD_FALSE
PatternMatchStmt - The 'switch', or do-catch statement that we're emitting / this pattern match for.
Produce a diagnostic for a general conversion failure (irrespective of the / exact expression kind).
Promotes a possibly negative, possibly signed char to an unsigned integer for use as an array index.
Provide the text for the call parameter, including constructing a typed / editor placeholder for it.
Recurse on the type of the destination, pulling LValues as needed from the queue we built up before.
Regardless of whether or not promotion happens, we know the base cannot be Null after the operation.
Replace all uses of the address of the box's contained value with the address of the stack location.
Replace operand values (which are passed to the successor block) with corresponding block arguments.
Return the address of a function that will return type metadata  / for the given non-dependent type.
Return true if this stored property needs to be accessed with getters and / setters for Objective-C.
Returns the first availability attribute on the declaration that is active / on the target platform.
Returns the name of the symbol of the given address if available, otherwise just returns the address
Save EG/PG(error_handling) so that we can show log messages when we have already thrown an exception
Setting the bound parameter to true tells vm_call_user_func() propogate the current late bound class
Simplify MemoryRef vasm types by their direct variant as ppc64 can't change data directly in memory.
Since we canonicalized earlier, we know that if our retain has any uses, they were replaced already.
So, allocate a temporary one (containing the Zend resource pointer) and pass it into the destructor.
Specializations of public or hidden symbols can be shared by all TUs that specialize the definition.
Split positions must be after an interval's start position, and on or before the chosen split point.
Strip optional wrappers off of the destination type in sync with stripping them off the origin type.
Swift does not permit class methods with Objective-C selectors 'load', 'alloc', or 'allocWithZone:'.
TODO: Once the importer learns how to import un-defined structs, then we will be able to infer them.
Terminiation is guaranteed because the widening operator has only finite chains in the type lattice.
The "this" variable in methods, pseudo-main, or closures is special and is handled separately below.
The 'metadata flags' field in a class is actually a pointer to / the metaclass object for the class.
The character (space) used to separate alternate fonts in the fontlist parameter to gdImageStringFT.
The dynamic function pointer is packed "last" into the context, and we pulled it out as an argument.
The fact that the type will be slightly off is ok because all the code after the Jmp is unreachable.
The fallback translation is where to jump to if the currently-translating translation's checks fail.
The inline cache is a 64-bit immediate, and we need to atomically set both the Func* and the Class*.
The input may have witness tables or other additional data, but the class reference is always first.
The key of this map is the source of the dependency (inst_a), the value is the destination (inst_b).
The method used to calculate the color difference is based on the color distance in the RGB(a) cube.
The only way to figure out which stack elements are activation records is to follow the frame chain.
The range that we use to iterate over the post order and reverse post / order of the given function.
The second retain cannot be matched with the release but must be matched by a follow up instruction.
The type we're working with, in case we want to build it differently based on the attributes we see.
The types are different, or there was an optionality change resulting in a change in representation.
There is a write to a location, expand the location into individual fields / before processing them.
There is no point in updating the pointsTo if the To node will be merged to another node eventually.
There is one WarmupRequestHandler per-thread, but we want to track request count across all threads.
There may be multiple nodes / for a function in case the function is inlined into different callers.
These cases are /not/ in the version in TypeCheckExpr, since they never appear in operator position.
These expansion steps can foil / the general mid-level optimizer, so they are done very, very, late.
This allows us to avoid diagnosing DI / errors in synthesized code that turns out to be unreachable.
This can be seen as a "simulation" of several optimizations: SROA, mem2reg and constant propagation.
This enables us to know that if we see a retain before any decrements that the retain is known safe.
This has a set of TrackedLocs, and an availability mask to determine which ones are currently valid.
This is / basically only reasonable when processing all the different / top-level code declarations.
This is always legal to do since address-to-pointer pointer-to-address implies layout compatibility.
This is an artifical upper limit to keep resources in check and minimize the possibility of exploits
This is because a backtrace from another destructing object during this unwind may try to read them.
This is not a / StructTypeInfoBase at all, since we don't know anything about / the struct's fields.
This is to check that instruction substitutions will not clobber any potential uses of status flags.
This is true in the fast path, but in the slow path we need to manually save caller-saved registers.
This keeps the proxy alive in the server case, which drops the result of this function on the floor.
This keeps us from leaking information about the original filename while still providing uniqueness.
This prevents the custom scanners from being emitted (silently), which causes all sorts of problems.
Use SILOneTypeValuesLayout: type, Attr, SILDeclRef (DeclID, Kind, uncurryLevel, IsObjC), and a type.
Visit the type of the capture, if it isn't a class reference, since we'd need the metadata to do so.
We assume that right shift corresponds to signed division by 2 with rounding towards minus infinity.
We can't really test the high-byte regs here because they can't be used any time we have a REX byte.
We found no more handlers in this frame, so the nested fault count starts over for the caller frame.
We keep track of an offset, relative to the depth of the stack at the first instruction of the block
We need a temporary table of updates which we apply after running this iteration of the fixed point.
We need special initialization of metadata objects to trick the ObjC runtime into initializing them.
We process an "extended" loop at a time: all the natural loops that share a particular header block.
We want to keep this data structure small since we need a huge number of them during a profiled run.
We wouldn't be able to perform a dynamic cast that required any ABI adjustment without a JIT though.
We're subtracting one in order to look up the line associated with the FCall/FCallArray instruction.
When a query timeout happens, the connection is invalid and SQuangLe layer closes it for precaution.
When declarations are added they are added / under all variants of the name they can be found under.
When profiling is enabled, we call the return hook, and follow the slow path return (uncommon case).
XXX Add assert in debug build to make sure W is not getting written or overwritten by something else
XXX: this is horrible memory-usage-wise, but we only expect to do this on small pieces of form data.
ar is a pre-live ActRec in fp's scope, and pushOff is the offset of the corresponding FPush* opcode.
if more than zero code points were consumed then consume one more (which will be the last delimiter)
ld.so doesn't support relative relocations at load time, which interferes with our metadata formats.
requirements are applied to abstract/concrete classes when they use a trait / implement an interface
swift.type is already a pointer type, having a shadow copy doesn't add another layer of indirection.
(This only applies to function analysis information right now.)  Repeat until the work list is empty.
*NOTE* This ignores obvious ARC escapes where the a potential / user of the RC is not managed by ARC.
/ / FIXME: pointer_to_address should contain a flag that indicates whether the / address is aliasing.
/ / Note: The code relies on the 'UpTo' basic block to stay within the rotate / loop for termination.
/ / Prints declarations with decl- and type-specific tags derived from the / UIDs used for decl/refs.
/ / We can merge cond_fail instructions if there is no side-effect or memory / write in between them.
/ On success, the returned pointer will point to the ')' at the end of the / interpolated expression.
13 (SKIP): no data If seen as an entry in a LIST_MAP, the next index in the sequence will be skipped.
2) For non-generic methods inside generic types, we return the generic type's parameters and nullptr.
2) If we find a likely self reference in the parameters, make an instance member (method or property)
2.0.12: Slaven Rezic: palette images are not the only images with a simple transparent color setting.
A comparator for types with PointerLikeTypeTraits that sorts by opaque / void pointer representation.
A result plan for evaluating an indirect result into the address / associated with an initialization.
A type metadata record is the structure pointed to by the canonical address point of a type metadata.
A use of an inlined frame that can be modified to work without the frame is called a "weak use" here.
ARCHITECTURE ASSUMPTIONS: This code used to have some nasty ones, but these have been removed by now.
Active members are attached to the enclosing declaration, so there's no need to walk anything within.
All (sub-)Intervals for a given Vreg are connected as a singly linked list, sorted by start position.
Allocate enough room for the instruction with tail-allocated EnumElementDecl and SILSuccessor arrays.
Allocate the tuple cache entry, which includes space for both the metadata and a value-witness table.
Also, the prop initialization above can throw, so we don't want to have the object allocated already.
Although we have a lock, so we're the only ones modifying this, there could be any number of readers.
Because the swift compiler relies on Clang to setup the Module, the clang CU is always created first.
Can't push true in the non env.findLocal case unless we know whether this function can have a VarEnv.
Check conformances before visiting members, since we might synthesize bodies for derived conformances
Check if instruction I is a load from instruction V or / or a struct_element_addr from instruction V.
Check to see if you have "x+y" (where x and y are type aliases) that match the canonical result type.
Check whether any associated types in this protocol resolve nested types of this potential archetype.
Cleanup locations point to the decl of the value that is being destroyed (for diagnostic generation).
Computes the approximate number of times that `loop' was invoked (i.e. entered) using profiling data.
Convenience wrapper around a simple vcall to `helper', with a single `arg' and a return value in `d'.
Create a reference to the old arg offset and increment arg offset so we can create the new arguments.
Default implementation: Linear search for the key/value pair via sourcekitd_variant_dictionary_apply.
Doc says even find _could_ invalidate iterator, in pactice it should be very rare, so go with it now.
Don't do anything if we are running the profiling function itself or if we haven't set up a profiler.
Done after the current pattern has been matched and before the corresponding action - sets up yytext.
Emulate a ret to enterTCExit without actually doing one to avoid unbalancing the return stack buffer.
Enum elements are printed as part of the EnumCaseDecl, unless they were imported without source info.
Even if the whole file is valid UTF-8 sequences, still reject it if it uses weird control characters.
FIXME: Either emit a descriptor for this or create a metadata kind that indicates its trivial layout.
FIXME: Technically should be "consume", but that introduces barriers in the current LLVM ARM backend.
FIXME: This should be a function transform that pushes cloned functions on the pass manager worklist.
FIXME: TypeChecker::resolveType() is mostly non-ad-hoc-recursive when given an UnsatisfiedDependency.
FIXME: We may need to do something here if subscripts contain any symbols exposed with linkage names.
FIXME: instead of resetColor(), we can look into capturing the current active color and restoring it.
FIXME: we should have a callback that would tell us whether it's kosher to print a module name or not
Favor binary operator constraints where we have exact matches / for the operands and contextual type.
Figure out locations the call may cause stores to, then remove any memory support on those locations.
FileScope's flags are from parser, but VariableTable has more flags coming from type inference phase.
Find number of covering value and concrete values for the locations expanded from the given location.
First step: find blocks which end up in a no-return block (terminated by an unreachable instruction).
For now, we require the extensions to use their own thread local memory for user-changeable settings.
For sorts that use builtin comparators, the types of values are also observed during this first pass.
For this frame, record the tracelet address as starting from this callToExit-1, so gdb does not barf.
Function that allows php code to access request local data that has been gathered via surprise flags.
Get the type of a reference to the first declaration, swapping in archetypes for the dependent types.
Given an integer argument, see if it is ultimately matching whether / a given enum is of a given tag.
Given nothing but a formal C parameter type that's passed / indirectly, deduce the convention for it.
Given the address of a class existential container, returns / the address of a witness table pointer.
Handle the usual case here: the class in question should be a real subclass of a bound generic class.
Hence there is exactly one boolean value of "left" that results in the overall expression being true.
Hoist the make_mutable call and optionally the projection chain that feeds / the array self argument.
However, when the base is a reference type and the target is a non-class protocol, this is innocuous.
If AccessPathSuffix is empty and / StructVal is invalid, then the value is the address of the Struct.
If EnableHipHopSyntax is true, it forces EnableXHP to true regardless of how it was set in the config
If StopAtTypeAttributes is true, then we sniff to see if the following attribute is a type attribute.
If a bit is set, it indicates that that memory location may contain a pointer to that must alias set.
If all of the predecessor blocks end in a try_apply to a noreturn function, the entire block is dead.
If an external function was able to be specialized, it would have been specialized in its own module.
If coercing a literal to an unresolved type, we don't try to look up the witness members, just do it.
If compared against a string, first do a collection check, and then emit an object-string comparison.
If it isn't necessary, then we might be able to short-circuit considering the bases of this protocol.
If legal, create an unchecked_ref_cast from the given operand and result type, otherwise return null.
If the base is already an lvalue with the right base type, we can pass it as an inout qualified type.
If the base was an lvalue but it will only be treated as an rvalue, turn the base into an rvalue now.
If the enum is address-only, take from the enum we have and load it if the element value is loadable.
If the expression is obviously something that produces a metatype, then don't put a constraint on it.
If the overall operator is a binary one, then we're looking at juxtaposed binary and unary operators.
If the self.init() or super.init() call threw an error and we caught it, self is no longer available.
If the two declarations are in the same source file, order based on location within that source file.
If the value is live only in part of the predecessor blocks we have to split those predecessor edges.
If there is an error, don't do our splicing trick, just return the Decl and the status for reporting.
If this class requires all of its stored properties to have in-class initializers, diagnose this now.
If we can't figure out the Base or Projection Path for the memory location, simply ignore it for now.
If we do have data we'll attempt to read and decode it below, even if there are other error bits set.
If we end up with other classes that need special behavior, turn the assert into an if and add cases.
If we have exactly one input filename, and its extension is "bc" or "ll", treat the input as LLVM_IR.
If we passed more args than declared, we might need to dispatch to the "too many arguments" prologue.
In such a case, we need to remove the subregion from the exiting subregion array of R after the loop.
Indirect parameters do give us a value we can use, but right now we don't bother, for no good reason.
It is possible that we won't find a bridging type (e.g. String) when we're parsing the stdlib itself.
It's the first time we found a call to InitF in this function, so we try to hoist it out of any loop.
Keep track of inline function bodies so that we can generate IR from them using Clang's IR generator.
Keeping / the info about which branch folding had produced the unreachable block makes / it possible.
Look up the interfaces implemented by traits used by the class, and add them to the provided builder.
Look up the method specified by methodName from the class specified by cls and enforce accessibility.
Make sure there is no iterator invalidation if the inspected instruction gets removed from the block.
Make sure we always allocate spill space in multiples of 16 bytes, to keep alignment straightforward.
Modify throw terminators to branch to the error-return BB, rather than trying to clone the ThrowInst.
Moreover, these types usually aren't very interesting, so we deliberately ignore them for efficiency.
NB: the new-unit creation path is here, and is done while holding the tbb lock on s_nonRepoUnitCache.
Nevertheless, you likely need to adjust Server.RequestTimeoutSeconds to get a full request processed.
Non-class existentials consist of a three-word buffer and value metadata, followed by witness tables.
Non-decl entry points are never natively foreign, so they would never have a foreign-to-native thunk.
Note: Arbiters don't contain any data, including auth stuff, so you cannot authenticate on an arbiter
Nothing to do for these kinds of decls - anything active has been added to the enclosing declaration.
Number of args of one generic archetype which are mismatched because isSubstitutableFor() has failed.
Often the only reference to a proxy is in the debugger's proxy map, which we're about to alter below.
Once we have done all of the easy work, try to see if we can strip off any RCIdentityPreserving args.
Only perform the peephole if both operands are physical and there's no semantic conversion necessary.
Otherwise, if there is no fallthrough, then the next row is unreachable: emit a dead code diagnostic.
Otherwise, we can emit the final value at +0 (but only with a guarantee that the value will survive).
Otherwise, we shouldn't create a new constructor, because it will be no better than the existing one.
Our caller should always take responsibility for that decision (by doing the materialization itself).
Our tracking list has been accumulating instructions created by the SILBuilder during this iteration.
Parsing/scanning the heap (e.g., objprof) can cause us to get here before we've initialized the elms.
Per above, only fully honor opaqueness in the abstraction pattern for thick or polymorphic functions.
Pop any remaining functions that have been optimized (at least through some portion of the pipeline).
Properties in protocols use sufficiently limited syntax that we have a special parsing loop for them.
RIGHT_SHIFT rounds towards minus infinity, so adding 8 is correct for either sign of the error value.
Resetting the DependentBPA will deallocate but not run the destructor of the dependent TypeLowerings.
Resolve conformances for each of the protocols to which this / declaration may provide a conformance.
Return the next intersection point between `current' and `other', or kMaxPos if they never intersect.
Returns true if this instruction is a safe array use if all of its users are / also safe array users.
Returns true if we will already diagnose a bad override on the property's accessor of the given kind.
Reuse the last source location if we are still in the same scope to get a more contiguous line table.
Round to NUMCOLORS levels of antialiasing for index color images since only 256 colors are available.
Rules for the lowering of these vasms: 1) All vasms emitted in lowering are already adjusted/patched.
Set to true if the value witness table for the generic type is dependent / on its generic parameters.
Short-circuit when we're doing things like evaling PHP for print command, or conditional breakpoints.
Simply return if we are not performing RLE or we do not have all the values available to perform RLE.
Since indexed types with scan set to false come first, this will ensure that false is kept over true.
Since kMaxTrackedALocs is bounded by a constant, it's kinda O(stk_expand_map), but not in a good way.
Since the UTF-8 BOM doesn't carry information (UTF-8 has no dependency on byte order), throw it away.
Skip past the node directly at the specified location, allowing the caller to effectively replace it.
So we are tranferring these flags just for better modularization between FileScope and VariableTable.
TODO: If all candidates have the same type for some argument, we could pass down partial information.
TODO: It would be nice to use an analog of getTypeListString that doesn't include the argument types.
TODO: Note that we search manually, rather than invoking lookupMember on the ConstraintSystem object.
TODO: We do this because of how inout parameter bindings are handled for implicit closure parameters.
Testing for StaticStr will make you miss out on CountedStr, and vice versa, and similarly for arrays.
The ConcurrentMap data structure allows us to insert and search the map concurrently without locking.
The analyze pass does not mutate the unit, while the optimize pass iteratively removes nested frames.
The bridging operations are generic, so we need to form substitutions and compute the resulting type.
The client process on the other end of the connection has either crashed or cancelled the connection.
The first pattern entry we parse will record the location of the let/var/case into the StmtCondition.
The inline cache is set up so that we always miss initially, and take the slow path to initialize it.
The relation is defined as follows:  Consider a phidef F with arity n (i.e., it defines n variables).
The source key and value types must be subtypes of the destination key and value types, respectively.
The struct_extract, unchecked_ref_cast is handled below in the "Transitive SafeArrayElementUse" code.
The transfer is performed in a separate event loop that we wait on, so it is effectively synchronous.
The uncurried function calls all of the intermediate function levels and so throws if any of them do.
The underlying type could be a bridged type, which makes any sort of casual assertion here difficult.
The user error handler fataled or threw an exception, print out the error message directly to the log
The way this works is to do a backward dataflow analysis, computing "will_be_used_again" information.
There may be gaps between instruction ranges that have been added by the relocator, e.g. adding nops.
These each may depend on computations from previous functions, so be careful changing the order here.
This allows us to have reasonable DeclContexts for any closures that may live inside of initializers.
This does not and MUST NOT change the CFG without updating the dominator tree to reflect such change.
This gives the flexibility to / find exactly which part of the store is alive and which part is dead.
This is because it may involve invoking an object's __toString() method, which can have side-effects.
This is highly dubious in terms of error recovery, but is useful for code completion and SIL parsing.
This is not the case for a potentially aliased array because a release can cause a destructor to run.
This is safe (it uses the array id) because they must already be inserted in the array table builder.
This is useful for function exit breakpoints, which are implemented by blacklisting the RetC opcodes.
This means retains and releases do not affect the object since we do not support object resurrection.
This shows up frequently because it corresponds to 'Self' in protocol requirement generic signatures.
This step unrelaxes guards that were relaxed but whose block couldn't be merged with any other block.
Tuple instructions have two different syntaxes, one for simple tuple types, one for complicated ones.
Under these conditions, the call can neither / mutate the array nor save an alias for later mutation.
Unlike the above, we might be calling down to a subclass that is not related to the current instance.
Until IE's user base drops to nill or problem is fixed this code must remain enabled for all systems.
Update the recorded requirement source when a new requirement / source provides the same requirement.
Update the top of stack with the rough conservative approximate of the intersection of stackT and tcT
Used to check for discarded expression values: in the REPL top-level / expressions are not discarded.
Vectors that we use to sort our local successor/predecessor indices to make our output deterministic.
Waste one element of value and location stack so that they stay on the same level as the state stack.
We also can't store `msg' directly on the object as it'll be freed after the result() method returns.
We are going to mess with Tok to do reparsing for interpolated literals, don't lose our 'next' token.
We can potentially convert from an UnsafeMutablePointer of a different type, if we're a void pointer.
We could compute the action everytime we needed it, but they're stored in this table for memoization.
We do not care about branch inst, since if the branch inst's argument is dead, LLVM will clean it up.
We entered this frame in the TC but the jit is now disabled, probably because a debugger is attached.
We might really be asking for information associated with a more refined associated type declaration.
We must then continue iterating in case the actual fixed point is higher than the result of widening.
We require a valid range in order to be able to query for the TRC corresponding to a given SourceLoc.
We want the ini map to be freed after processing and loading the options So put this in its own block
When destructuring wildcard patterns, we also use / nullptr to represent newly-constructed wildcards.
When visiting expressions, sometimes we need to emit self before we know / what the actual callee is.
While would could compact to make room, it's better for Hysteresis if we grow capacity by 2x instead.
autoTypecheckRequestInit() and autoTypecheckRequestExit() work together to ensure a couple of things.
in PPC we don't have anything like a RIP register RIP register uses an absolute displacement address.
instrNumPops() returns the number of values consumed from the stack for a given push/pop instruction.
instrNumPushes() returns the number of values pushed onto the stack for a given push/pop instruction.
misnomer, it means we have made decision on compression, transport should not attempt to compress it.
o For hoisting Check instructions: we only can do this for Checks that occur before any side-effects.
shared_external linkage is just a hack to tell the optimizer that a shared function was deserialized.
void NvGetKey(const ArrayData*, TypedValue* out, ssize_t pos)  Look up the key for an array position.
we can be called from Unit::merge, which hasnt yet setup the frame (because often it doesnt need to).
we probably don't want to load a constant into a register at the start of a block where its not used.
(The assembler only emits a single unit, so it can't really be involved in creating a ArrayTypeTable.)
- If an alias name can refer to more than one class, each of those classes must be marked redeclaring.
- then convert _ObjectiveCBridgeable._ObjectiveCType to a Swift type using _forceBridgeFromObjectiveC.
/ / * Array._adoptStorage(storage:count:) /   The stores on the returned array element buffer pointer.
/ / FIXME: Rework to use GenericSignature instead of AllArchetypes / FIXME: Rework for nested generics
/ In any reasonable calling convention the input and output function types / should be ABI-compatible.
/ Store the actual SILValue into Val and the reversed list of instructions / initializing it in Insns.
/ This may happen e.g. when: / - a type of the return value is a subclass of the expected return type.
2.0.13: Bob Ostermann: don't force autohint, that's just for testing freetype and doesn't look as good
A dictionary expression can be of a type T that conforms to the DictionaryLiteralConvertible protocol.
A helper class for implementing existential type infos that / store an existential value of some sort.
A type refinement does /not/ indicate a change in value, so the various changed flags are not touched.
A walker that looks for 'return' statements that aren't nested within closures or nested declarations.
Action is a description of any special behavior an object type needs when generating a scanner for it.
Add one because the way we compute whether there is enough space on lookupAdd will look at m_elms + 1.
Although this software can handle dates all the way back to 4713 B.C., such use may not be meaningful.
Although this software can handle dates all the way back to 4714 B.C., such use may not be meaningful.
An archetype conforms to a protocol if the protocol is listed in the archetype's list of conformances.
Any instructions not special cased above produce a new value, so there's no guard for us to constrain.
ArrayData* RemoveInt(ArrayData*, int64_t key, bool copy)  Remove an array element with an integer key.
Avoid colors here, we don't properly detect that the debug window inside Xcode doesn't support colors.
But since requests are still coming in, it may not be very useful, and has some performance penalties.
By construction, the final canonical IRInstruction for a hoist group is the first check in that group.
Check that there is a matching retain before the unsafeGuaranteed builtin with only retains inbetween.
Check whether we can hoist 'array.props' calls out of loops, collecting the preheader we can hoist to.
Children have values from different bases, We need to create extractions and aggregation in this case.
Code taken from libxml2 (2.6.20) xmlNewReconciliedNs  Find a close prefix which is not already in use.
Consider structs in the standard library module that wrap a builtin integer type to be integral types.
Continues an MD5 message-digest operation, processing another message block, and updating the context.
Convert the substituted function type into a specialized function type based on the ReabstractionInfo.
Create a copy of this instruction in each one of our successors unless they are ignorable trap blocks.
Create an implicit availability attribute for the given platform / and with the inferred availability.
Currently generic methods of generic types are the deepest we should be able to stack specializations.
Do this here so we ensure the constants have been loaded correctly (e.g., error_reporting E_ALL, etc.)
Don't merge if the caller's density is significantly better than the density resulting from the merge.
Don't try to optimize the code in this case, and just let dead code elimination take care of it later.
During the search, any other instruction that has a status flag result will reset the pattern matcher.
Emit a partial application thunk for a function pointer applied to a partial / set of argument values.
Emit a raw apply operation, performing no additional lowering of / either the arguments or the result.
Emitting these may in turn force more definitions, so we have to take care to keep pumping the queues.
Empirically the best subbox size seems to be about 1/512th of the histogram (1/8th in each direction).
Enums are mapped to Swift enums, Options to Swift option sets, both of which attempt prefix-stripping.
Every instruction must have a catch block attached to it if and only if it has the MayRaiseError flag.
FIXME: Make an exception for serialized extensions, which don't currently have the correct archetypes.
FIXME: Note this as invalid, in case we don't find a solution, so we don't let errors cascade further.
FIXME: Once we separate the notion of ref counts from reading/writing memory this will be unnecessary.
FIXME: Recurse into these constraints to see whether this type variable is fully bound by any of them.
FIXME: this works around the fact we're producing invalid completion strings for our inner "." result.
FIXME: we might want to just introduce a separate instruction kind, instead of keeping this invariant.
Fail if the input element is named and we're trying to match it with something with a different label.
Fetch the serialized module bitstreams from the Mach-O files and register them with the module loader.
For Objective-C BOOL properties, use the name of the getter which, conventionally, has an "is" prefix.
For a named pattern without a type, create a new type variable and use it as the type of the variable.
For certain actions it can immediately be known that its associated object will always be interesting.
For exprs of a structural type that are not modeling argument lists, avoid merging the type variables.
For the OuterHandle case, we just delegate to APCArray below (which will do the full DataWalker pass).
Function object that replaces all occurrences of archetypes and / dependent types with type variables.
Get rid of apparently dead functions as soon as possible so that we do not spend time optimizing them.
Given a scalar value, materialize it into memory with the / exact same level of cleanup it had before.
Given an explosion with multiple pointer elements in them, pack them / into an enum payload explosion.
Handle this by / inserting a bitvector that tracks the liveness of each tuple element / independently.
Heap metadata for a box, which may have been generated statically by the / compiler or by the runtime.
However we have to explicitly guard against that here because we get called as part of validateDecl().
If Left's value is true, then we return None as the final sign bit depends on the unknown Right value.
If a TypedPattern is implicit, then its type is definitely implicit, so we should ignore its location.
If an element is known to be initialized, then we can strictly destroy its value at releases position.
If forwarding from a nonmutating to a mutating accessor, we need to put `self` in a mutable temporary.
If it is a BB argument received on a success branch of a checked_cast_br, then we know its exact type.
If it is a store to the memory object (as oppose to a store to something else), track it as an access.
If neither destination nor source have payloads, we can just primitive-store the new empty-case value.
If no memory is accessed, then something is being done with the pointer: maybe it is bitcast or GEP'd.
If the consumption rules say that this is already +1 given a successful operation, just use the value.
If the enum does not have a payload create the enum/store since we don't need to worry about payloads.
If the from type is an integer type, and the to type is String.CharacterView.Index, then we found one.
If the function's body is 'rethrows' for the number of arguments we gave it, apply the rethrows logic.
If the input IR is in SSA form, this also implies the definition of each SSATmp comes before all uses.
If the instance type is a bridged to an Objective-C type, perform a lookup into that Objective-C type.
If the mask is all ones, do a simple store, otherwise do a load/or/store sequence to mask in the bits.
If the method we're attempting to import has the swift_private attribute, don't import as a subscript.
If the stack isn't clean or doesn't match the marker's irSPOff, the unwinder won't see what we expect.
If the store is to a non-mutating member, then this is just a load, even if the base is an inout expr.
If the struct in which this constructor is being added was imported, add it as an external definition.
If the user is a load or a store and we can prove that it does not access the object then return true.
If there is a loop bypass edge, add the loop length to the loop pre-pre- header instead to the header.
If there is just some horizontal whitespace before the next token, its addition is probably incorrect.
If this becomes a performance problem, we could perhaps have ASTWalker visit the element name as well.
If this is an ApplyInst, check to see if this is part of a self.init call in a delegating initializer.
If this is an anonymous namespace, that means any type found in child DIEs will have internal linkage.
If this_ is non-NULL, then this_ is the current instance and cls is the class of the current instance.
If we are missing any of the available values in this struct element, compute an address to load from.
If we aren't representing 'self' in a non-delegating initializer, then we can't have 'let' properties.
If we did not remove any instructions or have any nested increments, do not perform another iteration.
If we don't already have a fixed type for this type variable, assign the fixed type from the solution.
If we were never put on NamedEntity::classList, or we've already been destroy'd, there's nothing to do
If we're not in a local context, we'll need a context to parse initializers into (should we have one).
If we've successfully checked all of the definitive initialization requirements, try to promote loads.
In a few cases, libdwarf keeps internal state, which forces you walk the DIEs in a hierarchial manner.
In any case, remember that we're in this labeled statement so that break and continue are aware of it.
In just-checking mode, we only need to consume the tokens, and we don't want to do any other analysis.
In practice, claiming it unconditionally is fine because we want to assume it's nil in the other path.
In that case, the return type is specified in terms of archetypes, but has no TypeLoc in the TypeRepr.
In this case, /var/releases/continuous_www_scripts4 was added and the duplicate /var/www was removed.s
In which case, it is the replacement we are interested in, since it is the one in our current context.
Indicate that we are going to generate the global symbols for those runtime functions that require it.
Intialize the memory manager here because various settings and initializations that we do here need it
Investigate when to sink retains and / when to hoist releases and their ordering in the pass pipeline.
It is necessary to clear leftovers, as EndNetworkProfile() can race with threads writing their status.
It is okay if it is set in a later option, as we first always free the value before setting it anyway.
It tries to be faster by giving up on functions quickly, and making a quick test to ignore them later.
LSLocation read or written has been extracted, expanded and mapped to the / B position in the Bvector.
Leak the params and the ActRec, and tell the unwinder that there's nothing left to do in this "entry".
Loc is in this context's range but not in any child's, so this context must be the inner-most context.
Local function to compute the derived type of an associated type, for protocols known to the compiler.
Local function to handle the update of superclass conformances when the superclass constraint changes.
Measures the size of the typed value and referenced objects without going into ObjectData* references.
Merge/intersection is very frequently performed, so it is important to / make it as cheap as possible.
MongoMaxKey and MongoMinKey are completely non-interactive: they have no method, fields, or constants.
More complex expressions get stashed into an unnamed local so we can evaluate them at the proper time.
NB: We assume that the witness table slots are zero if an extra inhabitant is stored in the container.
NB: if we've just executed a return from pseudomain, then there's no PC and no more code to interpret.
Non-null if the entry represents an array value, a tuple with an array / or an AllocStack of an array.
Normally, an argument list is a TupleExpr or a ParenExpr, though sometimes the ParenExpr goes missing.
Note that this map serves a different purpose than the AnnotType map in "runtime/base/annot-type.cpp".
Note we need not unload belowerrN because it is for the dummy column before or after the actual array.
Note: if we ever start putting extension members in vtables, we'll need to validate those members too.
Now that we have finished processing this loop, sort its subregions so that they are now in RPO order.
ObjC thunks should also not show up in the linetable, because we never want to set a breakpoint there.
Once we are done with EHs for the current frame we restore default values for the fields inside Fault.
Or maybe we can change the mangling at the same time we make changes to better support thin functions.
Otherwise check if the reference counted value we are tracking could be used by the given instruction.
Otherwise consider it to be a general mismatch so we only list it in an overload set as a last resort.
Otherwise, the offset of the offset is stored in a global variable that will be set up by the runtime.
Output the initialization of the metadata table mapping the type indices to the type name and scanner.
PHP7-style class whitelisting Allowed classes are allowed, all others result in __Incomplete_PHP_Class
Parse this textually to avoid Swift keywords (like 'return') from interfering with opcode recognition.
Primary entrypoint from the set of "debugger hooks", which the VM calls in response to various events.
Probably only useful when the def instruction only has a single dst, but that's all we need right now.
Produce a score (smaller is better) comparing a parameter name and / potentially-typo'd argument name.
Protocol names are emitted with the _Tt prefix so that ObjC can recognize them as mangled Swift names.
Provide custom implementations of the init(rawValue:) and rawValue conversions that just do a bitcast.
RGBAToYUV420: Generates Y, U, V data (with color subsampling) from 32 bits per pixel RGBA data buffer.
Re-using uncurry level 0 is reasonable because our uncurrying transforms are idempotent at this level.
Represent the path as "impossible" so we crash if we accidentally do anything that needs the metadata.
RetC and RetV consume a value from the stack, and this value's type needs to be known at compile-time.
Return a pattern corresponding to the 'self' parameter of the given / C function imported as a method.
Return the constant offset of a field as a SizeTy, or nullptr if the / field is not at a fixed offset.
Return true if Offset o is inside the protected region of a fault funclet for iterId, otherwise false.
Return true if we can get the addresses of elements with the / 'getSubInitializationsForTuple' method.
Returns false on timeout, true when data has been read even if that data didn't form a usable command.
Searching from most to least recently created may have better locality than alternative search orders.
See comments in pure_spill_frame for an explanation of why we don't need any support bits on this now.
Sema has diagnostics with hard-coded expectations about what statements return false from this method.
Set the static initializer and remove "once" from addressor if a global can be statically initialized.
Setting the type clears the typeSrcs, so the new type may not be derived from the old type in any way.
Since the source and dest are RC identical, store the reference into the source temp without a retain.
Since they both have enough lower bound for their support, we know we can account for everything here.
Since this happens implicitly, we can't blame the client if it shuts down while we are trying to ping.
Since we're going to keep these settings for the lifetime of the program, we need to make them static.
So, if we store f and its staticness we can handle calls with and without this completely in assembly.
So, it is safe to replace a class_method invocation by a direct call of this remaining implementation.
Someone else may have changed the func prologue while we waited for the write lease, so read it again.
Sometimes code in irgen asks for a value with DataTypeSpecific but can tolerate a less specific value.
Special properties like the Memoize cache should be set to their default value, not the current value.
TODO: As stated above, we should bucket these whilst collecting the exprs to avoid quadratic behavior.
TODO: Stored properties with didSet accessors that don't look at the oldValue could also be addressed.
TODO: This might be a faster / better-cached way to materialize local type data for the concrete type.
TODO: we may need to bind extra information in the IGF in order to make conditional conformances work.
Tail duplicate successor blocks of blocks that perform an objc method call / and who contain releases.
The ABI IR types for the entrypoint might differ from the Swift IR types for the body of the function.
The MySQL C API documentation say that you shouldn't touch the internals of the MySQL's datastructurs.
The UnitEmitter expects EH regions that look a certain way (basically the way emitter.cpp likes them).
The builtin types generally don't require metadata, but some of them have nodes in the runtime anyway.
The call/function can only throw if one of the parameters in / the current rethrows context can throw.
The class pointer is an unknown heap object, so it may be a tagged pointer, if the platform has those.
The constants table is used to inline values for expressions See ClassConstantExpression::preOptimize.
The following EBCDIC-to-ASCII table may relate more closely to reality, or at least to modern reality.
The instance type of an existential metatype must be either an existential or an existential metatype.
The only projection which we do not currently handle are enums since we may not know the correct case.
The resulting BaseLoc is either inside an array, is the global init_null_variant, or inside tvScratch.
The runtime currently does not track spare bits, so we can't use them if the type is layout-dependent.
The spare bit value is biased by one because all zero spare bits represents a valid value of the type.
Then this function can be processed in one iteration, i.e. no need to generate the genset and killset.
These 16 words are fed through 320 invertible modifications, where each modification changes one word.
This branch is only executed if no STREAM_FILTER* args were passed, so we always create a READ filter.
This catches cases where we compare e.g. a non-escaping pointer with another (maybe escaping) pointer.
This define is here because some versions of libintl redefine setlocale to point to libintl_setlocale.
This function ensures that if two exit heads have a common successor we will phi their frame pointers.
This function should not be called / on metadata objects that are in the process of being initialized.
This indicates that we should do a step out after our step completes if the stack depth has increased.
This is unfortunate, but it feels wrong to put in an API into SILBuilder that only takes in arguments.
This returns a SILValue to save a little bit of compile time since we already compute that value here.
This routine counts the weak uses of inlined frames and marks them dead if they have no non-weak uses.
This struct represents a constraint on the range of some values in some / basic blocks in the program.
This value is uninitialized (and unbound) if it has a pattern binding decl, with no initializer value.
Track the original end location of the expression we're trailing so we can warn about excess newlines.
Transitively collect all the values that make up this location and / create a SILArgument out of them.
TranslatePath() will canonicalize the path and also check whether the file is in an allowed directory.
Typically this is achieved by using a class_method instruction, which performs an indirect invocation.
Unwinding of C++ exceptions proceeds as follows:  - Discard all PHP exceptions pending for this frame.
Update the last instruction to consider when looking for ARC uses or decrements in predecessor blocks.
Update the type for `l' to reflect a possible change in the value---but when we don't have that value.
Use a stand-in conformance for a type that looks like a metatype value if the metatype can be bridged.
Use moduleLoad() for settings that are system-wide and cannot change per request (e.g. PHP_INI_SYSTEM)
Visit every virtual-register typed operand in `unit', and rename it to its assigned physical register.
We can just change the Type param of the original check rather than inserting a bunch of control flow.
We can only project destructively from an address-only enum, so copy the value if we can't consume it.
We could iterate over the all the frame locals and set corresponding bits, but that seldom adds value.
We couldn't find any information about the argument in the pattern, this means it's an extra argument.
We do not recompute for now since we only look at the top function level for post dominating releases.
We don't maintain an all_mistate set so there's nothing to do here but avoid hitting the assert below.
We encountered another try block, jump to the corresponding finally, freeing any iterators on the way.
We know that we have at least one element in the array so we don't have to do an initial bounds check.
We limit the total stack depth during inlining, so this is the deepest we'll ever have to worry about.
We might have looked up a contextual member whose result type disagrees with the expected result type.
We need to be known safe over all increments/decrements we are matching up to ignore insertion points.
We need to unset the state unnamed local in order to correctly fall through any future finally blocks.
We remove the IncRef before the control flow split, and insert new copies on the next and taken sides.
We set the store bit at the end of the basic block in which a stack allocated location is deallocated.
We'd have to buffer the response completely to compute the MD5, which defeats the purpose of chunking.
When boxing an Object, if the inner class does not have AttrNoOverride, drop the class specialization.
White-listing and forbidden templates are determined by just checking the name against explicit lists.
Wraps .swiftmodule files inside an object file container so they can be passed to the linker directly.
block compression parameters -- after all codes are used up, and compression rate changes, start over.
copy_addr is ok, but counts as a mutation if the use is as the destination or the copy_addr is a take.
handleLoadUseFailure - Check and diagnose various failures when a load use / is not fully initialized.
parseTypeArray - Parse the type-array production, given that we / are looking at the initial l_square.
since we're just storing the value in a local, this function doesn't care about the type of the value.
syck does a check to see if the array is small and all scalars if it is then it outputs in inline form
we first want to extract the mangled name from it to get this: _ZN4HPHP2VM6Transl17interpOneIterInitEv
when w is very small or brk is very large) we should be careful to avoid making huge over-estimations.
- This does not make use of Archetypes since it is directly substituting in place of GenericTypeParams.
/ / If CheckOnly is not set, then a casting code is generated and the final / casted value is returned.
/ / Note, we rely on SILLocation information to determine if SILInstructions / correspond to user code.
/ / Set Oper to the operand that my be safely replaced by an address / pointing to an equivalent value.
/ / TODO: These diagnostics should be a lot better now that we know this is / all specific to closures.
/ / The "-s", "-es", and "-ies" patterns cover every plural NS_OPTIONS name / in Cocoa and Cocoa Touch.
/ / This will be its index in the list of protocol conformances on the / dependent type's substitution.
/ / Using this property we can hoist the predicate above a region where no such / store can take place.
/ / we could run DSE on functions with 256 basic blocks and 256 locations, / which is a large function.
/ / we could run RLE on functions with 128 basic blocks and 128 locations, / which is a large function.
/ Not "empty" for all blocks which have non-load uses or contain the / definition of the memory object.
A CRTP specialization of ClangExpand which projects down to / various aggregate elements of an address.
A bit vector to keep the maximum number of stores that can reach a  / certain point of the basic block.
A convenient wrapper around getAddrOfLLVMVariable which uses the / default type as the definition type.
A critical edge is an edge from a block with multiple successors to a block with multiple predecessors.
A directly-called closure can be emitted as a direct call instead of really producing a closure object.
A stack of contexts being printed, used to determine the context for / subsequent ASTPrinter callbacks.
Add explicit dependency on -lc++abi, as -lc++ doesn't re-export all RTTI-related symbols that are used.
All subsequent molads can be calculated from this starting point by adding the length of a lunar cycle.
Almost always the first one will be empty, so that path is inlined---everything else delegates to slow.
Also note that if a function takes a param by ref, it might come in as a Cell still if FPassC was used.
An ASTVisitor for decomposing a nesting of ApplyExprs into an initial / Callee and a list of CallSites.
An associated type takes up a spot for the type metadata and for the witnesses to all its conformances.
At this point, valTempLocal and keyTempLocal if applicable, contain the key and value for the iterator.
Authenticates a connection  Returns 1 when it worked, or 0 when it didn't - with the error_message set.
Below we compute retT, which is a rough conservative approximate of the intersection of stackT and tcT.
Caller must ensure we are synchronized (either hold funcInfoLock or be in a single threaded situation).
Change the ivar offset to point to the respective entry of the field-offset vector, as discussed above.
Check if PotentialGuaranteedUser can use the reference count associated with the value we are tracking.
Check if this call to "make_mutable" is hoistable, and move it, or delete it / if it's already hoisted.
Check is the function that checks for overflow, Over is the function that returns the overflowed value.
Check that if the apply is of a noreturn callee, make sure that an unreachable is the next instruction.
Check that the types of this value producer are all legal in the function / context in which it exists.
Check to see if we're returning self in a class initializer before all the ivars/super.init are set up.
Check whether the array semantic operation could change an array value to / not be uniquely referenced.
Clone a single exit multiple exit region starting at basic block and ending / in a set of basic blocks.
Compute an absolute value safely, without using unary negation on INT_MIN, which is undefined behavior.
Continues an SHA1 message-digest operation, processing another message block, and updating the context.
Copy a string/buffer in Exif header to a character string and return length of allocated buffer if any.
Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura, Copyright (C) 2000 - 2003, Richard J.
Create an address value for an alloc_stack, consisting of a container and / a not yet allocated buffer.
Decrement our iterator (carefully, to avoid going off the front) so it is valid after inlining is done.
Determine what state that goes to, based on the state we popped back to and the rule number reduced by.
Emit a materializeForSet callback that stores the value from the / result buffer back into the l-value.
Emit a new block that jumps to the specified location and runs necessary / cleanups based on its level.
Emits the basic block for the "true" case and / returns the unemitted basic block for the "false" case.
Enum constructors are essentially the same as thunks, they are emitted by need and have shared linkage.
Even if we don't have a 'self', if we have an error result, we should have a placeholder argument here.
Every declaration should come from a module, so we should not see the TranslationUnit DeclContext here.
ExecutionContext::handleError is dirty-reg safe, but evaluate other functions that you might need here.
Extend the back of the range to the location of the default argument, or the typeloc if they are valid.
FIXME: ASTWalker walks enum elements as members of the enum decl, not as members of the enum case decl.
FIXME: If we were able to actually fix things along the way, we may have to hunt for the best solution.
Factor the index into the part that goes in the occupied bits and the part that goes in the spare bits.
Fixed-size optimizations can be applied if all payload types are fixed-size from this resilience scope.
For every block with retain, we need to check the transitive closure of its successors are retain-free.
For now, assume that finding an abstract conformance is always fast enough that it's not worth caching.
For operands the treatment is analogous, only the lower 32bits are considered to perform the operation.
For sinit, the context class is always the same as the late-bound class, so we can just use curClass().
For some reason -Ounchecked can accept a higher base benefit without increasing the code size too much.
For the purposes of finding a fixed point, consider the function to be rethrowing-only within its body.
Format: condition, true basic block ID, a list of arguments, false basic block ID, a list of arguments.
Format: number of substitutions, the builtin name, result type, and a list of values for the arguments.
Generate code to emit a thunk with native conventions that calls a / function with foreign conventions.
Give up if the array semantic function might change the uniqueness state of an array value in the loop.
Grab the parameter infos corresponding to this tuple element (but don't drop them from ParamInfos yet).
Helper used to create an absolute filename using the passed directory and xdebug-specific format string
How to generate the raw value for each element of an enum that doesn't / have one explicitly specified.
However, multiple connections can still be used concurrently, because SQLite as a whole is thread-safe.
However, we will need to fix this if we want to use InjectEnumTag value witnesses for write reflection.
If Left's value is false, then we return None as the final sign bit depends on the unknown Right value.
If both allow_ipv4 and allow_ipv6 flags flag are used, then the first dot or colon determine the format
If correcting for daylight savings time, we set the adjustment to the value of timezone - 3600 seconds.
If new_iter_object_any creates an iterator, it does not increment the refcount of the specified object.
If our caller requested partial translation and we don't already have the write lease, we're done here.
If the best method was from a subclass of the place where this method was declared, we have a new best.
If the lowered metatype has a thick representation, we need to derive it dynamically from the instance.
If the result is address-only, emit the result into a common stack buffer that dominates both branches.
If the result is loadable, emit each branch and forward its result into the destination block argument.
If the value's type source is non-null and not a FramePtr, it's a real value that was killed by a Call.
If this DeclContext is a NominalType declaration or an / extension thereof, return the NominalTypeDecl.
If this class has no formal superclass, then its actual superclass is SwiftObject, i.e. the root class.
If this is a let with an initializer or bound value, we only need a buffer if the type is address only.
If this is a method whose result type is dynamic Self, replace DynamicSelf with the actual object type.
If this is not an initialization, copy the value before we translateIt, translation expects a +1 value.
If this used by another upcast instruction, recursively handle it, we may have a multiple upcast chain.
If we are asked to emit a module documentation file, configure lexing and parsing to remember comments.
If we are asked to emit diagnostics, override ResultsInError with a Some optional initialized to false.
If we are invoking a constructor and there are absolutely no candidates, then they must all be private.
If we came here, it means that no further EHs were found for the current fault offset and handledCount.
If we cannot default initialize the property, we cannot synthesize a default initializer for the class.
If we found a strong release, replace it with a strong release of the source of the store and erase it.
If we have a (cond (select_enum)) on a two element enum, always have the first case as our checked tag.
If we have an extension containing globals imported as members, use the first member as the Clang node.
If we're binding to an init member, the 'throws' need to line up between the bound and reference types.
If we're constraining guards, some instructions need certain information to be recorded in side tables.
If/when PHI nodes can be updated without invalidating the CFG, / this should be moved to the SROA pass.
InOut arguments are treated as uses and may-store's, but an indirect return is treated as a full store.
Initialize params, locals, and---if we have a closure---the closure's bound class context and use vars.
Invariant: methods on this class with AttrNoOverride or AttrPrivate will not have an entry in this map.
It is blacklisted, but it may have been a long time again and chances are we should give it another try
It is painful to recover from incorrectly-computed hashes - merely fixing whatever broke is not enough.
It is processed if the pointer is non-NULL, and it is either at the `GMT', or at the end of the string.
It is very common for a contextual type to disagree with the argument list built into the closure expr.
It may happen that other thread has already updated the diagnostics to the version *after* NewSnapshot.
It only performs one step of inlining: it does / not recursively inline functions called by the callee.
It then calls IRBuilder optimizeInst, which may or may not insert it depending on a variety of factors.
It turns out to be safe to sink in this case, and it fits the idea that we "know about two references".
It's also possible it was loaded in the frame of a previously inlined callee that we've already popped.
It's not plausible that we need a full 64bits to hold memory stats, no matter what the collection mode.
It's possible that this happened because the user just pointed yyin at a new source and called yylex().
Iterate over all uses of a given partial_apply and check / if any of those uses are apply instructions.
Local function to retrieve the value witness for the current associated type within the given solution.
MD5 Message-Digest Algorithm" in all material mentioning or referencing this software or this function.
MD5C.C - RSA Data Security, Inc., MD5 message-digest algorithm Reference MD5 code (md5c.c) from rfc1321
Make sure the block is at the end of the function so that forward references don't affect block layout.
NS_OPTIONS members that have a value of 0 (typically named "None") do not operate as a set-like member.
Non-copy_addr uses of the inout should only occur in canonical SIL, so fail the analysis if we see one.
Normal method calls are curried, so they are: (call_expr (dot_syntax_call_expr (decl_ref_expr METHOD)))
Not really thread-safe, but in practice this happens at process startup before any threads are spun up.
Note: PHP returns "tcp_socket/ssl" for this query, even though the socket is clearly not an SSL socket.
Note: for jumps this also conceptually needs to execute any side effects a conversion to bool can have.
Ok, we know that we can perform the optimization but not whether or not the optimization is profitable.
Otherwise use normal visitor, which clones the existing instruction but remaps basic blocks and values.
Otherwise, make an Initialization that stores the value in the next element of the directResults array.
Perform basic checking to determine whether a declaration can override a / declaration in a superclass.
Poll, but with a 100ms timeout so that this thread doesn't spin wildly if it gets ahead of the workers.
Polymorphic function types carry their own generic parameters and manglePolymorphicType will bind them.
Populate the argument list for a new partial_apply instruction, taking into consideration any captures.
Prepare `arg' for a call by shifting or zero-extending as appropriate, then append its Vreg to `vargs'.
Produce a diagnostic for a general member-lookup failure (irrespective of / the exact expression kind).
Replacing unconditional_check_branch type instructions by a trap will also invalidate branches/the CFG.
Request-allocated StringData are always aligned at 16 bytes, thus it is safe to copy in 16-byte groups.
Resolves a filename for the `parse_ini_file`, considering CWD, containing file name, and include paths.
Return a TypeInfo the represents opaque storage for a loadable POD value / with the given storage size.
Returns true upon success, false if nodes that are not present in the post-dominator tree are detected.
SIL box types are artificial, but for the purposes of dynamic layout, we use the NativeObject metadata.
Similarly, do not try to serialize WaitHandles as they contain internal state via non-NativeData means.
Similarly, the output of SetL is obvious if you know what its input is (which we'll assert if we know).
Since previous translations aren't reachable from here, we know we just created some garbage in the TC.
So we *could* have a loadable payload resulting from the TEDAI without the TEDAI being loadable itself.
Strip off any AutoClosures that were produced by a previous type check so that we don't choke in CSGen.
Take care of freeing the args, tearing down the ActRec, and moving the return value to the right place.
Take the value in param, apply any needed conversions and return the value to be passed to CallBuiltin.
The 'try' case is only for simple local recovery, so we only bother to check 'let' and 'var' right now.
The JSON_parser takes a UTF-8 encoded string and determines if it is a syntactically correct JSON text.
The `doInitArgs' and `doEnterVM' callbacks take an ActRec* argument corresponding to the reentry frame.
The arguments to the result function type must match the prefix of the original function's input types.
The benefit if a load can (probably) eliminated because it loads from / a stack location in the caller.
The benefit if a store can (probably) eliminated because it stores to / a stack location in the caller.
The driver kind must be parsed prior to parsing arguments, since that affects how arguments are parsed.
The first cases apply because final operations are going to directly affect the type of these elements.
The former is a release of a class in an initializer, the later is used for local variable destruction.
The importer maps builtin types like 'int' to named types like 'CInt', which are generally typealiases.
The mergeables array begins with the hoistable Func*s, followed by the (potentially) hoistable Class*s.
The number is the maximum number of / iterations encountered when compiling the stdlib on April 2 2015.
The operations that are only legal after a call to Escalate are:  - ValidMArrayIter - AdvanceMArrayIter
Then attempt to look up the enum state associated in our SILValue in the predecessor we are processing.
There is a read to a LSLocation, expand the LSLocation into individual / fields before processing them.
This actually let us ignore the loop bypass edge in the length calculation for the loop's parent scope.
This allows all of the map implementations to be tested with shared implementations of helper routines.
This does not use the SSAUpdater::RewriteUse API because it does not do the right thing for local uses.
This file implements IR generation for the assorted operations that are performed by builtin functions.
This function needs to be kept in sync with its counterpart, abstractSyntaxDeclForAvailableAttribute().
This function needs to be kept in sync with its counterpart, concreteSyntaxDeclForAvailableAttribute().
This function will create a immutable copy of this Map (if it doesn't already exist) and then return it
This function will create a immutable copy of this Set (if it doesn't already exist) and then return it
This is important because we may add additional parameters after the Self parameter of witness methods.
This is only really necessary for imported source, but that's a very convenient thing to do in -i mode.
This means that comparing the start of the string token to the end of an embedded expression will fail.
This performs a dfs search and identifies / back edges as edges going to an ancestor in the dfs search.
This value will only be filled in if there are one or more enum elements that have a non-zero byte size
To use the ClangImporter to create the module loader, we need to properly set the runtime library path.
Try to hoist the existing AI again if we move it to another block, e.g. from a loop exit into the loop.
Update BC markers on the main trace to use the parentFP, parentFP relative offsets, and the call SrcKey
Use type lowering to lower the copyaddr into a load sequence + store sequence appropriate for the type.
Verify that all created non trivial values are array values and that they are released before mutation.
We also suppress in script mode (where setting the minimum deployment target requires a target triple).
We can get here if we are memory profiling, since we override the normal sync settings and sync anyway.
We don't bother with free lists for local RDS because we aren't sensitive to its layout or compactness.
We enumerate all values in a SILFunction beforehand to correctly / handle forward references of values.
We find out whether the machine we connected too, is actually the one we thought we were connecting too
We need to set the EOF at r_paren, to prevent the Lexer from eagerly trying to lex the token beyond it.
We only apply this rule when it isn't a back_edge_preds because we always want a Phi involved in loops.
We only care about the stack component, since we only optimize the case where we don't need to reenter.
We only need a different failure block if the cast consumption requires us to destroy the source value.
We skip the SpecializationPassID since it does not contain any information that is useful to our users.
We use the first argument register for the TV data because we might pass it to the native release call.
We use this funky loop since predecessors are stored in a linked list but we want array like semantics.
expirePaths() is only called in situations where the entire subtree needs to be completely invalidated.
get_include_file_path will check relative to the current file's dir as long as the first char isn't a /
recreate the hardware counters for the main thread now that we know whether to include subprocess times
shrink the buffer down to what we really need since this can be 16 times greater than we actually need.
'method' is the most final method in the hierarchy which we haven't yet found a compatible override for.
(Once this happens, we have to conservatively assume / that both the getter and setter could be called.)
(This is largely to prevent certain holidays from occurring on the day before or after the Sabbath.)  2.
/ - If the type is dynamic-layout, we have to instantiate its metadata /   and project out its metadata.
/ / Note that the check is whether 'metatype' is an *instance of* / 'targetType', not a *subtype of it*.
/ / Set Oper to the operand that may be safely replaced by an address / pointing to an equivalent value.
/ / This causes two kinds of issues: / 1) Some DeclKinds require to be parsed in TopLevel contexts only.
/ / This is separate from the rest of libFrontend to reduce the dependencies / required by that library.
/ / This means that the two objects have the same base but access different / fields of the base object.
/ / Top level code in the debugger is actually implicitly wrapped in / a function with a do/catch block.
/ Returns the newly created basic block on success or nullptr otherwise (if / the edge was not critical.
@NSManaged properties never get default initialized, nor do debugger variables and immutable properties.
A cache of information about whether particular nominal types / are representable in a foreign language.
Add a character to the end of the current packet, and if it is 254 characters, flush the packet to disk.
Add a retain of each non-address type capture argument, because it will be consumed by the closure body.
After / eliminating any dead stores in single blocks, it computes a genset and / killset for each block.
All let values are guaranteed to be held alive across their lifetime, and won't change once initialized.
All threads tl_bases are kept in a set, to allow iterating Local and Normal RDS sections across threads.
Allocate the witness table with the correct size, and fill in default requirements at the end as needed.
Always called from send and implements specific logic for serializing a list command to send via Thrift.
Analyze the given TransArgs and return the region to translate, or nullptr if one could not be selected.
Avoid cloning destroy_addr instructions and splitting critical edges before mandatory diagnostic passes.
Base class constraints are introduced by a class type mangling, which will begin with either 'C' or 'S'.
Cache alignment is required for mutable instructions to make sure mutations don't "tear" on remote CPUs.
Called when a breakpoint is reached, to produce the console spew showing the code around the breakpoint.
Certain semantic functions are generally safe because they don't release / the array in unexpected ways.
Check if PotentialDecrement can decrement the reference count associated with the value we are tracking.
Code that has an autoclosure as location should not show up in the line table (rdar://problem/14627460).
Constant folding may lead this to be not a var anymore, so we should not be emitting *GetL in this case.
Convert from a token range to a CharSourceRange, which points to the end of the token we want to remove.
Copy edges into captured edges Capturing edges first because after capturing nodes we nullify the header
Create a witness method, creating a witness table declaration if we don't / have a witness table for it.
Create defer-edges from the block arguments to it's values in the predecessor's terminator instructions.
Determine whether the given Swift type is an integral type, i.e., / a type that wraps a builtin integer.
Do lookup again just to make sure it wasn't created by another thread before we acquired the write lock.
Do not form a path from an IndexAddrInst without otherwise distinguishing it from subelement addressing.
Do this after draining the worklist, as we want to prefer discovering things via non-conservative means.
Doing anything else is unsafe since by definition non-dead arguments will have SSA uses in the function.
Don't allow two generic parameters to be equivalent, because then we don't actually have two parameters.
Don't strip type info off OtherConstructorDeclRefExpr, because CSGen doesn't know how to reconstruct it.
Emit a helper function for swift_once that performs in-place / initialization of the given nominal type.
Emit logic to print the specified expression value with the given / description of the pattern involved.
Emit the components of an Objective-C method descriptor: its selector, / type encoding, and IMP pointer.
Entry points using the new calling convention require global symbols referring to their implementations.
Erase this parameter from the list of unfulfilled named parameters, so we don't try to fulfill it again.
Expand the requirements of the given abstract calling convention / into a "physical" calling convention.
FIXME: There are type variables and overloads not common to both solutions that haven't been considered.
FIXME: This forces the creation of wrapper modules for all imports as well, and may do unnecessary work.
FIXME: This implementation does a global lock, which is much worse than what we have on other platforms.
FIXME: This implementation is pretty horrible and should be rewritten when ReflectionProperty is ported.
FIXME: we shouldn't double typecheck, but it looks like code completion may do so in some circumstances.
Favor certain overloads in a call based on some basic analysis / of the overload set and call arguments.
First, construct an abstraction pattern and parameter sequence which we can use to emit the inner tuple.
For any of the type variables that has no associated fixed type, assign a fresh generic type parameters.
For class initializers, the assign into the self box may be captured as SelfInit or SuperInit elsewhere.
For each block, if it has 2 successors with the same SrcKey, then merge the successors' chains into one.
For everything else which we didn't handle above: we set the property of the instruction value to false.
For the 'V' serialization format, we don't print out keys for Serialize, APCSerialize, DebuggerSerialize
Form a constraint system where we've opened up all of the requirements of the second protocol extension.
Given a year, find the number of the first day of that year and the date and time of the starting molad.
Given an incompatible argument being passed to a parameter, decide whether / it is a "near" miss or not.
Given the address of an existential object, find the witness / table of a directly-stored witness table.
Handles output of `json_encode` with fallback value for partial output on errors, and `false` otherwise.
Here we handle a special case: all defer-edge paths must eventually end in a points-to edge to pointsTo.
I.e. no non-fallthrough instructions mid-block and no control flow (not counting calls as control flow).
If AccessPathSuffix is non-empty, then the value is the address of an / aggregate containing the Struct.
If QUALITY is in the range 0-100, increasing values represent higher quality but also larger image size.
If a node has both syntactic and semantic components, you should make sure you visit every node in both.
If any arguments were provided out-of-order, check whether we have violated any of the reordering rules.
If any of the parameters are guaranteed, attempt to prove that the passed in parameter cannot alias Ptr.
If both are Objective-C, then match based on selectors or subscript kind and check the types separately.
If it has no successors that are in LiveIn, then the last use in the block is the final release/dealloc.
If it is a load from the memory object (as oppose to a load from something else), track it as an access.
If no filename is passed, php5 xdebug stores in the default output directory with the default file name.
If no one could find a problem with this expression or constraint system, then it must be well-formed...
If our target is an address, prepareForEmitSome should have set this up so that we emitted directly into
If study option was specified, study the pattern and store the result in extra for passing to pcre_exec.
If that failed, mark any variables binding pieces of the pattern as invalid to silence follow-on errors.
If the caller didn't wrap the argument in parentheses or make it a tuple, add the extra parentheses now.
If the catch block is from a call we don't do this because vmfp()/vmsp() should be further up the stack.
If the context is not the declCls, protected methods are visible in context classes related the declCls.
If the expression has the effect of a forced downcast, find the / underlying forced downcast expression.
If the inlined apply was a thick function, then we need to balance the reference counts for correctness.
If the previous statement didn't have a semicolon and this new statement doesn't start a line, complain.
If there was only one no-payload case, or the payload is empty, we already branched in the first switch.
If there were any unsatisfied requirements, check whether there are any near-matches we should diagnose.
If this is a callee that mismatches an expected return type, we can emit a very nice and specific error.
If this is a direct reference to a vardecl, it must be a let constant (which doesn't need to be loaded).
If this is a multi-statement closure with no explicit result type, emit a note to clue the developer in.
If tracing is enabled, we may need to collect a serialized version of the arguments or the return value.
If we contextually had an inout type, and got a non-lvalue result, then we fail with a mutability error.
If we couldn't import this Objective-C entity, determine whether it was a required member of a protocol.
If we did not find any favored constraints, just introduce the replacement constraints (if they differ).
If we didn't actually build a disjunction, clone the underlying constraint so we can mark it as favored.
If we have not visited this loop yet and it has subloops, add its subloops to the worklist and continue.
If we're looking for initializers, only look at the superclass if the current class permits inheritance.
If we're not supposed to define the accessor, or if we already have defined it, just return the pointer.
If we're translating *to* the foreign expansion, do an ordinary initialization from the input explosion.
Important note: every block starts with a full antOut set, including blocks that are exiting the region.
In such a case, we say that the use / list of the alloc_stack does not allow for optimizations to occur.
In such a case, we say that the use list / of the alloc_stack does not allow for optimizations to occur.
In wholecfg mode, these two runtime options are ignored and nothing is pruned based on profile counters.
Inc only works on KindOfDouble or KindOfInt64, which are never kept in file-backed storage from priming.
Instead, it's much easier to allow an optional return type both before and after an optional use clause.
Invariant: The size of the bit vector is the size of the payload in bits, rounded up to a byte boundary.
It also seems true for that case as well, since the source array is essentially metadata for the object.
It has been processed, and there are no more children to process, so delete it and pop it off the stack.
It is important to know this information when / you perform such optimizations like e.g. jump-threading.
Leave the cleanup on the argument, if any, in place to consume the argument if we're responsible for it.
Local function that adds the constructor syntax around string literals implicitly treated as a Selector.
Local function that folds dependent member types with non-dependent bases into actual member references.
Make a copy of the current rvmfp(), which belongs to the callee, before syncing VM regs and return regs.
Maps an ASCII character to a collation element priority as would be / returned by a call to ucol_next().
Mark all our options with this category, everything else (except for -version and -help) will be hidden.
Marking it as TF would mess up any bytecodes that want to consume its output value, so we can't do that.
Member syntax 'T.Element' forms a pattern if 'T' is an enum and the member name is a member of the enum.
Merge "duplicate" indexed types together using some definition of duplicate, returning the merged types.
Modifying an array or string element, even when COW doesn't kick in, produces a new SSATmp for the base.
Module implementation Helper for requestInit that returns the initial value for the given config option.
Non-nominal metadata (e.g. for builtins) is provided by the runtime and doesn't need lazy instantiation.
Note that due to protocol extensions, GenericRequirements may be non-empty while GenericParams is empty.
Note that outside functions must be visited before nested functions for type-checking to work correctly.
Note that since we don't know the lifetime of the returned node all added breakpoint info is duplicated.
Note: this entire scheme assumes that all pointer followable types can be reached via some indexed type.
Notes about preserving SSA form:  This pass can add new uses of SSATmp*'s to replace accesses to memory.
Nothing other than reusedStubs should have data, and those don't need any processing for liveRelocate().
Now check that the only uses of the protocol are witness_method, open_existential_addr and destroy_addr.
Null if the switch / scope depth is zero or if we are checking the final 'case' of the current / switch.
ObjC functions are called through the runtime and are therefore alive even if not referenced inside SIL.
On a 60 MHz Pentium this takes 34 msec, so you would need 30 seconds to build a 1000 entry dictionary...
On subsequent iterations we only need to update this map with the values from the new iteration's clone.
Once the Callee and CallSites have been prepared by SILGenApply, / generate SIL for a fully-formed call.
One content node for going from the array buffer pointer to the element address (like ref_element_addr).
Only attempt to validate the argument type or raw value if the element is not currently being validated.
Or if we've got AllFuncsInterceptable we need to assume someone could rename a function to the new name.
Our 'let' binding can guarantee the lifetime for the callee, if we don't need to do anything more to it.
Perform a BFS to expand the given type into projectionpath each of which contains 1 field from the type.
Pre-allocate an ArrayData of the given size, to avoid escalation in the middle, which breaks references.
Raise a fatal unless the existing class definition is identical to the one this invocation would create.
Recursively see through struct_element_addr, tuple_element_addr, and open_existential_addr instructions.
Recursively walk the operand chain through cast / instructions to ensure that all dependents are cloned.
Remap an lvalue referencing a generic type to an lvalue of its / substituted type in a concrete context.
Remove Subregion from R's exiting subregion array if Subregion no longer has /any/ non-local successors.
Remove the "debt" accrued from allocating the slabs so we don't double count the slab-based allocations.
Returns None on error, Optional(nullptr) if no operator decl found, or Optional(decl) if decl was found.
Returns an expression producing the index value, assuming that / the storage is a subscript declaration.
Returns the declaration of the entity to use as the base of / the access, or nil if no base is required.
Returns true iff `block' ends the IR unit after finishing execution of the bytecode instruction at `sk'.
Revisit the instruction on the next pass through the loop, so that we emit a mask update as appropriate.
See the NOTICE file distributed with this work for additional information regarding copyright ownership.
Several operation names have suffixes and don't match the name from Builtins.def, so handle those first.
Smashable movs and jmps are two instructions plus inline 64-bit data, so they need to be 8-byte aligned.
SpillStates is used to hold in/out state for each block after the analysis pass of allocateSpillSpace().
Stored properties with tuple types are tracked with independent lifetimes for each of the tuple members.
SunOS 5.x core files contain two PT_NOTE sections, with the types NT_PRPSINFO (old) and NT_PSINFO (new).
TODO: This is not safe without proving the object being released is not related to the allocated object.
Tail call elimination on ppc64: call without creating a stack and keep LR contents as prior to the call.
Take the next direct inner result, reabstract it, and initialize / the destination outer result address.
The archetypes may be missing, but we can compare them directly because archetypes are always canonical.
The bump pointer allocator destructor will deallocate but not destroy all our independent TypeLowerings.
The cast functions don't know how to work with anything but the most general possible abstraction level.
The conformance will be on the containing 'self' type, or '()' if the property is in a non-type context.
The emitter should never generate bytecode where the iterator is at the end before IterNext is executed.
The field should not be anonymous, since we are using its name to derive the generated declaration name.
The main reasoning to do that is so that the extensions have the values already parsed into their types.
The only good way to solve this is to treat such allocations as roots and always conservative scan them.
The pass2 scanning routines call fill_inverse_cmap when they need to use an unfilled entry in the cache.
The point of the type-scanners is to determine how to find pointers to countable types from other types.
The way it works is as follows: - Iterate through CFG to identify variables with at least one typecheck.
There is a write to a LSLocation, expand the LSLocation into individual / fields before processing them.
This / simplifies functions that need to differentiate a tuple from the input / part of a function type.
This SILValue may be null if we were unable to find a specific RCIdentity that the instruction "visits".
This assumes that a TupleType's explosion schema is always the concatenation of its component's schemas.
This is always modeled as: (postfix_unary_expr (declrefexpr ++), (inoutexpr (lvalue))) if not, bail out.
This is because we're not supposed to run destructors for objects that are live at the end of a request.
This is important because things need to be in a consistent state in case the user error handler throws.
This means that the block they are in should be treated as a live out for cross-block analysis purposes.
This means we need to track all active property getters and ensure we aren't recursing for the same one.
This seems to be a pre-2.4 MongoDB installation, where we need to default to two times the max BSON size
TrackedStore is used to keep track of which stores are available at the beginning and end of each Block.
Translate the current start state into a value that can be later handed to BEGIN to return to the state.
Try to dig out the conversion constraint in question to find the contextual result type being specified.
Type constants with the low bit set are already resolved and can be returned after masking out that bit.
Unless we're always supposed to consume the input, retain the object because the witness takes it at +1.
Unregister our options so they don't interfere with the command line parsing in CodeGen/BackendUtil.cpp.
Unwrap implicitly indirect types and types that are passed by reference only at the SIL level and below.
Use AFDT to synchronously shut down the old server's satellites so we can take their ports using accept.
Use SILOneTypeValuesLayout: type, Attr, SILDeclRef (DeclID, Kind, uncurryLevel, IsObjC), and an operand.
Used to determine if we can add branch-over edges by checking the pre-conditions of the successor block.
Utility class for performing universal layout for types such as / tuples, structs, thick functions, etc.
Very similar with the above case: handles MemoryRef and Immed, but also stores the result in the memory.
Walk backwards in BB looking for the last use of a given value, and add it to the set of release points.
We also can only cache these values if the Func* and Class* can't be deallocated, so this is limited to:
We also use a box for delegating constructors, since the delegated-to initializer may also replace self.
We are running as a subcommand, try to find the subcommand adjacent to the executable we are running as.
We assign slots greedily, so sort the interface list so the most frequently implemented ones come first.
We can nuke the entire location filter here since we'll re-install it when we get back to the old level.
We can use the payload area with a tag bit set somewhere outside of the payload area to represent cases.
We checked every other field of the struct and did not find any non-trivial fields except for ourselves.
We could have two arrays in a surrounding container so we can only strip off the 'array struct' project.
We do not need to track the value itself, as we can always go to the predecessors BlockState to find it.
We have to return here, as otherwise the exception doesn't trigger before we return the hash at the end.
We need VM interrupts if we're in a state that requires the debugger to be interrupted for every opcode.
We need to balance the consumed argument of the new partial_apply in the specialized callee by a retain.
We put a fake return value on the stack for the same reason that returning from a resumed function does.
We recover the witness table from the substitution that was used to produce the substituted callee type.
We should consider adjusting our current approach to unlock more opportunities for subtype contractions.
We use this / function to determine whether the concrete syntax already has an / availability attribute.
We've kept our own copy of the Fault, because m_faults may change if we have a reentry during unwinding.
When the Unwind instruction was executed in the funclet, the eval stack must have been left empty again.
XML node printing routines Exports the given xml key value pair as an xml child of the given parent node
create the class variable and change the location to point to the parameter location for error reporting
dereferencing s_request_wrappers will call requestInit, and register a request shutdown event handler 3.
for hard breakpoint, the fp is for an extension function, so we need to construct the site on the caller
if it is a space, check if it is at the line boundary, copy and insert a break, or just keep track of it
metonic cycle    A 19 year cycle which determines which years are leap years and which are common years.
removeFromParent - This method unlinks 'self' from the containing basic / block, but does not delete it.
* Import-as-member places an entity inside of an another entity that comes later in the translation unit.
*NOTE* In practice, wtable will be deserializedTable, but I do not want to rely on that behavior for now.
- If this check fails, then a different subclass is checked by means of checked_cast_br in a similar way.
/     (inouts are also nonaliased, but won't be destroyed in scope) / / (2) A local alloc_stack variable.
/ / Performs an analysis on all Array users to ensure they do not interfere / with make_mutable hoisting.
A class-constrained archetype may be bound to NSError, unless it has a non-NSError superclass constraint.
Add a conversion constraint between the element type of the sequence and the type of the element pattern.
Add all options which influence the llvm compilation but are not yet reflected in the llvm module itself.
All base classes of pointer followable object types are also pointer followable (to handle polymorphism).
An implementation of MetadataReader's BuilderType concept that / just finds and builds things in the AST.
Arrange for convenient computation of quotients: shift left if necessary so divisor has 4 leading 0 bits.
ArrayData* SetStr(ArrayData*, StringData*, Cell v, bool copy)  Set a value in the array for a string key.
As a hack, scan the decl to find out if any of the variables are immutable, and if so, we print as 'let'.
As a special case, don't introduce a local variable for Builtin.UnsafeValueBuffer, which is not copyable.
Attempt to diagnose a specific failure from the info we've collected from / the failed constraint system.
But the target is an instruction, so skip over any nops that might have been inserted (eg for alignment).
Cache the successor blocks because splitting critical edges invalidates the successor list iterator of T.
Changes to either the strong and weak reference counts occur in a total order with respect to each other.
Classify each element into three cases: known initialized, known uninitialized, or partially initialized.
Compound l-values like (a,b) have tuple type, so this check also prevents us from getting into that case.
Continues an SHA256 message-digest operation, processing another message block, and updating the context.
Continues an SHA384 message-digest operation, processing another message block, and updating the context.
Continues an SHA512 message-digest operation, processing another message block, and updating the context.
Create projections for each one of them and the child node and projection to the worklist for processing.
Crucially, if two SSATmps belong to different must-alias-sets, they still /may/ point to the same object.
DEFAULT_FONTPATH and PATHSEPARATOR are host type dependent and are normally set by configure in config.h.
Dependent struct types need their own implementation if any field type might need its own implementation.
Detailed memory effects of builtins are handled below by checking the memory behavior of the instruction.
Determine whether the given parameter and argument type should be / "favored" because they match exactly.
Dump the generic signature into an ArchetypeBuilder that will figure out the minimal set of requirements.
During this process, the blocks that are deleted get "merged" with their equivalent ones in the `region'.
Either simplification didn't do anything, or we're using some other instruction's dst instead of our own.
Ensure that the anchor translation is a known size so that it can be reclaimed when the function is freed
FIXME: Hold off on registering extra inhabitants for dynamic enums until initializeMetadata handles them.
FIXME: Initializer expressions (like array literals) are not contained within the global variables nodes.
FIXME: Should be able to pick the best locator, e.g., based on some depth-first numbering of expressions.
FIXME: We'd like to only use this in SIL mode, but unfortunately we use it for our fake overlays as well.
FIXME: Would be better to walk the requirements of the protocol of which the associated type is a member.
Filter any whole-module imports, and skip specific-decl imports if the import path doesn't match exactly.
First drop all references so that we don't get problems with non-zero reference counts of dead functions.
First thing to do: find the current buffer containing the specified location to pull out the source line.
For calls only those calls which are known to not access the caller frame can be modified in this manner.
For example, PredictableMemOps can no longer remove some alloc_stack cases after global destroy hoisting.
For now, assume that an associated type is cheap enough to access that it doesn't need a new cache entry.
For structs and enums, this is the allocating constructor (because there is no initializing constructor).
Free function witnesses have an implicit uncurry layer imposed on them by the inserted metatype argument.
Generate a call to the 'swift_willThrow' runtime function to allow the debugger to catch the throw event.
Get the DV blocks, without the rest of the primary function body, and then add them to the end of sorted.
Given a metonic cycle number, calculate the date and time of the molad (new moon) that starts that cycle.
Given the address of an existential object, find the witness / table corresponding to the given protocol.
Hoist make_mutable in two dimensional arrays if there are no array value mutating operations in the loop.
If FrameStateMgr's type for a local isn't as good as the type param, we're missing information in the IR.
If all of the projections are equal (and they have the same base pointer), the two GEPs must be the same.
If both declarations come from Clang, and one is a type and the other is a function, prefer the function.
If both types are boxed, this is okay and even expected as a means to update the hint for the inner type.
If enough extra inhabitants are available, no tag bits are needed, otherwise more are added as necessary.
If our client is ok with a +0 result, then we can compute our base as +0 and return its element that way.
If php_mysql_localize_result ever gets rewritten to use standard APIs, this can be opened up to everyone.
If so, these type variables would be accessible to name lookup of the subexpression and may thus leak in.
If the cached unit is null, we always need to consider it out of date (in case someone created the file).
If the error parameter is the first parameter, try removing the standard error suffix from the base name.
If the metatype value isn't a type expression, the user should reference '.init' explicitly, for clarity.
If the operands are simple enough we can fold this expression right here and keep the parse tree smaller.
If the operator is infix operator, highlight specifiers like "associativity" or "assignment" as keywords.
If the parameter is an inout type, and we have a proper lvalue, match against the type contained therein.
If the problematic decl is 'self', then we might be trying to mutate a property in a non-mutating method.
If the request local cache isn't filled, try to use the Func* from the TC's mcePrime as a starting point.
If the type doesn't guarantee that it has an access function, we might have to use a non-unique accessor.
If the type is specialized, we need to gather all of the substitutions for the type and any parent types.
If there is a store in the current block, scan the block to see if the store is before or after the load.
If there is a user error handler it will be invoked, otherwise the default error handler will be invoked.
If this Pattern binding was not supposed to have an initializer, but it did, diagnose this and remove it.
If this is a release on a guaranteed parameter, it can not call deinit, which might read or write memory.
If this is an assignment into a mutating subscript lvalue expr, then we are mutating the base expression.
If this is the name of an LLVM intrinsic, cons up a swift function with a type that matches the IR types.
If this static property was declared by this class, we can get the initial value directly from its value.
If this variable is marked final and has a getter or setter, mark the getter and setter as final as well.
If we are inferring a variable to have type AnyObject.Type, "()", or optional thereof, emit a diagnostic.
If we don't have exactly one kind of specialization, or if our bits support both kinds, don't specialize.
If we ever reach an unreachable point, stop emitting statements and issue an unreachable code diagnostic.
If we had a connection we need to remove it from the callback map before we assign it another connection.
If we have a final method or a method from an extension that is not Objective-C, emit a static reference.
If we have something that might be an array size expression, parse it as such, for better error recovery.
If we saw an ErrorExpr somewhere in the body, then we have a malformed AST and we know stuff got dropped.
If we're converting to an UnsafeMutablePointer, then the pointer to the first element is being passed in.
If we're not checking a 'rethrows' context, we don't need to distinguish between 'throws' and 'rethrows'.
If we're not emitting into a temporary, just wrap up the result in None and go to the continuation block.
If we're not emitting into a temporary, just wrap up the result in Some and go to the continuation block.
If we're regenerating a prologue, and we want to check shouldTranslate() but ignore the code size limits.
In a "if let" statement the equals is the start of the condition, so don't parse it as a binary operator.
In an 'inout' operator like "++i", the operand is converted from an implicit lvalue to an inout argument.
In the current implementation the cache is traversed by a linear search from most-recent to least-recent.
Initialize the field offset vector for a dependent-layout class, using the / "Universal" layout strategy.
Inserts type checks in the original generic function for dispatching to the / given specialized function.
Instead once we hoisted a release we scan only to this release when looking for ARC decrements or checks.
Intialize the hash table first, because the header is already in L1 cache, but the hash table may not be.
It is possible that one module has a declaration of a SILFunction, while another has the full definition.
It represents the state of the spill space as a whole and is computed before each individual instruction.
It's possible that this happened because the user just pointed yyin at a new source and called hphplex().
Last reference to the Zend resource is gone, so destroy the resource if it hasn't already been destroyed.
Later on if someone wants the real definition, / lookUpWitnessTable will deserialize it for us if we can.
Like the other angle in libGD, in which increasing y moves downward, this is a counterclockwise rotation.
Local function to extract the ith argument label, which papers over some of the weirdness with tuples vs.
Make sure that our SILFunction only has context generic params if our SILFunctionType is non-polymorphic.
Model this like an escape of the elements of the array and a capture of anything captured by the closure.
NOTE: performSema() may end up with some gruesome error preventing it from setting primary file correctly
Note that name_len is actually the length plus one, so that it can be conveniently derived from sizeof().
Note: unlike class constants, these can be dynamic system constants, so this doesn't have to be TInitUnc.
Now the original preheader dominates all of headers children and the original latch dominates the header.
Okay, disable all the individual element cleanups and collect the values for a potential tuple aggregate.
On illegal sequences we may get it wrong, but in that case we necessarily have a matching failure anyway.
Other than loads from the unowned-referenced object we only accept speculatively executable instructions.
Otherwise it would be canonicalized to CWD, which is inconsistent with PHP and most filesystem utilities.
Otherwise pass in the Name and DeclKind and the / DebuggerClient will be asked whether to move it or not.
Otherwise, emit the result (to get any side effects), but produce it at +0 if that allows simplification.
Parameters are contravariant and our relation is not symmetric, so make sure to flip the relation around.
Parse a single implicitly unwrapped optional suffix, given that we / are looking at the exclamation mark.
Parse out all the debug information out of the specified file and do the analysis generating the layouts.
Partial applications of delegated initializers aren't allowed, and don't really make sense to begin with.
Polling is disabled while a thread is stopped at an interrupt and responding to messages from the client.
RaceTest(code) runs code in many threads simultaneously,  / and returns a vector of all returned results.
Read the raw archetype IDs into a different scratch buffer because we need to keep this alive for longer.
Remove the instructions that were marked as redundant / and return True if and instructions were removed.
Retrieve the bridging operation to be used if a static conformance to _BridgedToObjectiveC can be proven.
Returns / .Some(nullptr), if all uses from the arg were either debug insts or do not / have side-effects.
Returns a *single* forwardable SILValue for the given LSLocation right / before the InsertPt instruction.
Second pass, check each remaining extension against their dependency list until they have all been loaded
See if we have a callee region we can inline---but only if the singleton inliner isn't actively inlining.
Semicolon *should* always be required, but PHP's implementation allows omitting it and still functioning.
Set the pre-header of loop `loopId' to `preHeader', and also add `preHeader' to any ancestor of `loopId'.
Set the specified generic parameters onto this type alias, setting the parameters' context along the way.
Since some of these optimizations inspect tracked state, we don't perform any of them on non-main traces.
Since struct_extract users are not visited by / StructUseCollector, they are never added to ArrayUserSet.
Smaller HealthLevel indicates better health condition, under which this function returns a bigger number.
So we need to know what we determined the last time we were alloewd to do that so we can return it again.
Some things that dereference certain kinds of pointers (e.g. LdObjClass) can probably be in the list too.
Steal the subscript values without copying them so that we can peek at them in diagnoseWritebackConflict.
Stores the set of Objective-C methods with a given selector within the / Objective-C method lookup table.
Strip the MarkDependenceInst (new array implementation) where the above pattern looks like the following.
TODO(T5601927): output_compression supports int values where the value represents the output buffer size.
TODO: Could avoid a retain if the bridged parameter is also +0 and doesn't require a bridging conversion.
TODO: Don't call an internal function like this, but add a new C-level function for instantiating cursors
TODO: In principle, we could invoke the getter only once inside each function that loads from the global.
TODO: When a contextual type is missing, we could try to diagnose cases where the element types mismatch.
TODO: t5226715 We shouldn't need to check s_session here, but right now this is called for every request.
TODO: this logic doesn't really work with init methods TODO: this privileges the old API over the new one
Template used to generate code fragment for binary instructions (Ins) with one argument being a constant.
The "built-in" Objective-C types id, Class, and SEL can actually be (and are) defined within the library.
The BBSetOuts have converged, run last iteration and figure out insertion point for each refcounted root.
The argument tuple is then required to have keywords for every argument that name properties of the type.
The debugger may choose to hold the thread below here and execute any number of commands from the client.
The flag for this is in the VM's normal ThreadInfo, but we don't have a way to get that given just a tid.
The generic signature for a witness method with abstract Self must have exactly one protocol requirement.
The only thing interesting in a string is a possible APCString*, which is not a request-local allocation.
The purpose of the MAKE_DISPATCHER layer is to weed out Opcode values that have no associated extra data.
The uses hanging off the tuple_element_addr are going to be counted as uses of the struct or enum itself.
The zlib notes say output buffer size should be (input size) * 1.01 * 12 - we'll use 1.02 to be paranoid.
Then make sure that this incoming value is from a BB which is different from our BB and dominates our BB.
Therefore it's important *not* to return true if the TypedValue.m_aux field in memory has important data.
These cases will never be promoted to value bitcast, thus will cause the subsequent runtime cast to fail.
This algorithm comes from pnmcrop (http://netpbm.sourceforge.net/) Three steps: - if 3 corners are equal.
This code should not be hit normally since we add witness tables to the lookup cache when we create them.
This doesn't handle specialized decls since they are processed when the UnresolvedSpecializeExpr is seen.
This ensures that given an alloc_stack and a gep from that alloc_stack, we say that they partially alias.
This file implements support for translating some kinds of C preprocessor macros into Swift declarations.
This is also problem for encoding like UTF-7/UTF-8/ISO-2022 which a single char can be more than 4 bytes.
This is an important micro-optimization for Optional, since the .None case doesn't need to be cleaned up.
This is at least one word, and potentially more than that, past the start of the actual global structure.
This is the body of the closure, preceded by code that pulls the object's instance variables into locals.
This is used for the generic case, for callers who can't tell us the size of the allocation at free time.
This looks through expect intrinsic calls and applies the ultimate expect call inverted to the condition.
This may need to change at some point, in which case the uncurry logic can probably migrate to that case.
This prevents recursion when we allocate a temporary ZendResourceData before calling the Zend destructor.
This pushes a / CleanupUninitializedBox cleanup that will be replaced when / initialization is completed.
This restriction is no problem because only stack promotion result in this alloc-release-dealloc pattern.
This should never be called since mangling parameter payloads require knowing what the parameter kind is.
This should produce a specific and tailored diagnostic saying that the type mismatches with expectations.
This will give the local proxy time to recgonize the bad cmd, terminate, and wait for the client to stop.
Thus we can just return false since in none of the aforementioned cases we cannot alias, so return false.
Treat any inherited protocols as constraints on `Self`, and gather conformances from the containing type.
Type-scanners are never generated for countable types, it is assumed their scanners will be hand-written.
Use a scope to ensure that any temporary stack allocations in the subexpression are immediately released.
Value type metadata only requires dynamic initialization on first access if it contains a resilient type.
Variadic capture params don't need types because they'll be treated as Arrays as far as HNI is concerned.
Walk backwards deleting instructions that should be safe to delete in a block that ends with unreachable.
We can copy-initialize the source over the destination, then primitive-store the zero extra tag (if any).
We create TypeAliasTypes with invalid underlying types, so we need to propagate recursive properties now.
We don't actually Bind the option here though, since its runtime value can be changed and is per request.
We don't try to limit the load effects to argument locals here, though, and just union in all the locals.
We found only one operator declaration, so we know whether this should be a prefix or a postfix operator.
We handle this by splitting the multi-element case into its component parts and treating each separately.
We know the one or two types have been subjected to the "isBuiltinTypeOverloaded" predicate successfully.
We limit I/O waiting to the time currently remaining in the request (see AsioSession::getLatestWakeTime).
We may have previously sunk a child DefInlineFP into an exit block, so make sure to sink the parent here.
We need to keep track of both the frame actrec and our current depth in case the client passed us a depth
We only support simple closures where a partial_apply or thin_to_thick_function is passed a function_ref.
We post initOnJSVMThread here so that the owner doesn't have to wait for initialization on its own thread
We reduce the number of possible / inputs by replacing values that are unlikely to be a canonical values.
We still need to update the type of the local for new minstrs, and for the exception edge of old minstrs.
We use the French for closure because using the English crashes gcc in the implicit lambda capture below.
When complaining about conversion to a protocol type, complain about conformance instead of "conversion".
Whether this speeds things up or slows things down depends on the machine and the number being converted.
While emitting bytecode, we learn about some metadata that will need to be registered in the FuncEmitter.
Zeroing out the error slot only in the error block increases the chance that it will become a dead store.
certain schemas like mailto: and zlib: may not have any / after them this check ensures we support those.
g_context is request allocated, and has some members that need cleanup, so destroy it before its too late
gdImageCreateFromWBMPCtx ------------------------ Create a gdImage from a WBMP file input from an gdIOCtx
inotify_init1() directly supports the fcntl() settings, but it's only available starting in Linux 2.6.27.
interpreted as the data from the cert/key file and interpreted in same way as openssl_get_privatekey() 5.
lunar cycle      The period of time between mean conjunctions of the sun and moon (new moon to new moon).
mutable_variant only makes sense for non-mutating methods where it's possible to have a mutating variant.
preSort() does an initial pass over the array to do some preparatory work before the sort algorithm runs.
removeUnreachable erases unreachable blocks from unit, and returns a sorted list of the remaining blocks.
rvmtl() was preserved by the callee, but rvmsp() and rvmfp() might've changed if we interpreted anything.
the liboniguruma docs say this isnt needed, but the implementation of init is not thread safe due to bugs
we need to do this everytime since GLOB_ONLYDIR does not guarantee that all directories will be filtered.
'force_flush' is what they call a "soft flush" and it stops at the byte boundary of the compressed buffer.
'try' is not a valid way to start a decl, but we special-case 'try let' and 'try var' for better recovery.
/ / NestingDetected will be set to indicate that the block needs to be / reanalyzed if code motion occurs.
/ / The lsquare-starting and first expression have already been / parsed, and are passed in as parameters.
/ Also the a call to swift_deallocClassInstance (which stems from an inlined / deallocator) is not needed.
/ The pass writes all SIL functions into one or multiple output files, / depending on the size of the SIL.
/ This function try to simplify such operations, but returns only a / simplified first element of a tuple.
4) For each arc, the bytecode offset of the dst block must possibly follow the execution of the src block.
A 'test candidate' is a class instance method that returns void, has no parameters and starts with 'test'.
A const pointer argument might have been imported as UnsafePointer, COpaquePointer, or a CF foreign class.
A pair of load and store that are independent of the CondFails and can potentially access the same memory.
A scalar type can be converted to an argument tuple so long as there is at most one non-defaulted element.
Add the requirements clause to the builder, validating the types in the requirements clause along the way.
Also, set Uninit properties to TBottom, so that analysis of 86pinit methods sets them to the correct type.
An RAII type to exclude tokens contributing to private decls from the / interface hash of the source file.
ArrayData* RemoveStr(ArrayData*, const StringData*, bool copy)  Remove an array element with a string key.
At this point it is safe to free memory, the source or even ourselves (if this is part of the destructor).
Bail if has a shared visibility, as there are no guarantees that an implementation is available elsewhere.
Because more decls may be added to the SourceFile, we can't assume anything about the compilation context.
Build a clause that looks like 'origParamType' but uses 'selfType' / in place of the underlying archetype.
But if only some of the cpu's on a node were disabled, then calling numa_run_on_node will enable them all.
CF function results can be managed if they are audited or the ownership convention is explicitly declared.
Caching the name of each field is important to avoid unnecessary calls to CodeCompletionString::getName().
Check if PotentialDecrement can decrement the reference count associated / with the value we are tracking.
Check if there are any private properties or any internal properties and it is a whole module compilation.
Check if we still have some nodes which don't reach a points-to edge, i.e. points not yet in the WorkList.
Check that the Array is not retained with this loop and it's address does not escape within this function.
Check the FailureBB if it is a BB that contains a class_method referring to the same value as a condition.
Coercion from one function type to another, this produces a FunctionConversionExpr in its full generality.
Consider CGetL obvious because if we knew the type of the local, we'll assert that right before the CGetL.
Construct a constraint system to use to solve the equality between the required type and the witness type.
Copy a value from one object to a new object, directly taking / responsibility for anything it might have.
Create or lookup the node builder for the parent and associate the newly created aggregate with this node.
Determine the derived thunk type by lowering the derived type against the abstraction pattern of the base.
Don't start profiling new functions if the size of either main or prof is already above Eval.JitAMaxUsage.
Dynamic Self is equivalent to 'instancetype', which is treated as 'id' within the Objective-C type system.
Emit a check that returns 1 if the running OS version is in / the specified version range and 0 otherwise.
Emit a member initialization for the members described in the / given pattern from the given source value.
Empty tuple queries return a completely "unknown" vector, since they don't care about any of the elements.
Every bound generic type we care about gets mapped to a particular construct in Objective-C we care about.
Expand the result and parameter types to the appropriate LLVM IR / types for C and Objective-C signatures.
FIXME: Defensive check that shouldn't be needed, but prevents a huge number of crashes on ill-formed code.
FIXME: Detect edits that don't affect other files, e.g. whitespace, comments, inside a function body, etc.
FIXME: This is a note pointing to a synthesized declaration buffer for a declaration coming from a module.
FIXME: This is really crappy special case of computing a reasonable result based on the given constraints.
Finds the expansion factor, i.e. the square root of the factor by which the affine transform affects area.
First we'll rewrite any partial applies that we can to remove the box container pointer from the operands.
Flags about the existence of various magic methods, or whether any derived classes may have those methods.
For an expression being type checked with a CTP_CalleeResult contextual / type, try to diagnose a problem.
For an implicit declaration, our argument type will be in terms of archetypes rather than dependent types.
For branches we store information so that we / can reconstruct the use after the branch has been modified.
For critical arcs, we currently just approximate it as half of the smallest weight of its incident blocks.
For each color selected by find_nearby_colors, compute its distance to the center of each cell in the box.
For efficiency of lookup below, compute a mapping of the local ivars in the class to their element number.
For generic literal types, check whether we already have a specialization of this generic within our list.
Forward a value down into a branch of the decision tree that may / fail and lead back to other branch(es).
Generate global symbols which are function pointers to the actual implementations of runtime entry points.
Get SIL-linkage for something that's not required to be visible / and doesn't actually need to be uniqued.
Get the fragile type information for the given type, which may not / have yet undergone SIL type lowering.
Get the ini (-d) and hdf (-v) strings, which may override some of options that were set from config files.
Given a SILType which is a ReferenceStorageType, return the type / info for the underlying reference type.
Given a pointer to a heap object (i.e. definitely not a tagged / pointer), load its heap metadata pointer.
Given that a tuple value is being passed indirectly in the / input, explode it and translate the elements.
Given the proflogueTransId for a TransProflogue translation, regenerate the prologue (as a TransPrologue).
Grab the the constant, f_constant throws a warning on failure so we ensure it's defined before grabbing it
Helper functions to check statically whether a method has been overridden from its implementation in Expr.
Helper functions to check statically whether a method has been overridden from its implementation in Stmt.
Helper that adds the given function breakpoint corresponding to the given function and id as a breakpoint.
Hooks Hook called from the bytecode interpreter before every opcode executed while a debugger is attached.
Identifies potential memoization opportunities by comparing the serialized form of function return values.
If Attr.def says that the attribute cannot appear on this kind of declaration, diagnose it and disable it.
If a closure is nested within an auto closure, we'll need to update its parent to the auto closure parent.
If a shared function/global is referenced from another file it must have weak instead of linkonce linkage.
If any property is marked as non-removable, their initialization and storage cannot be completely removed.
If basic block has no successor, then all local writes can be considered dead for block with no successor.
If one declaration is in a protocol or extension thereof and the other is not, prefer the one that is not.
If someone is using an unlabeled break inside of an 'if' or 'do' statement, produce a more specific error.
If the bit is set, then the location currently has an / upward visible store in middle of the basic block.
If the case does not have an argument type, skip the predecessor since there will not be a retain to sink.
If the character after the '.' is not a digit, assume we have an int literal followed by a dot expression.
If the closure had an explicitly written return type incompatible with the contextual type, diagnose that.
If the decl is stored, convert it to StoredWithTrivialAccessors by synthesizing the full set of accessors.
If the line is invalid there's not much we can do to inform the client in the dbgp protocol at this point.
If the lvalue is purely physical, then it won't have any side effects, and we don't need to drill into it.
If the operator is a cast operator, the RHS can't extend past the type that's part of the cast production.
If the original object is immediately destroyed after passing off the copy, then the copy was unnecessary.
If the pattern binding appears in a type or library file context, then it must bind at least one variable.
If the target type is either an unknown dynamic type, or statically known to bridge, the cast may succeed.
If the type is resilient or generic, see if there's a witness table keyed off the nominal type descriptor.
If this VarDecl is represented as an address, emit it as an lvalue, then perform a load to get the rvalue.
If this is an early release of a class instance, we need to emit a dealloc_partial_ref to free the memory.
If this variable is a class member, mark it final if the class is final, or if it was declared with 'let'.
If we are unsure of the base, it indicates that we are in base 8 or base 16 (if it is followed by an 'x').
If we didn't see a header we like, just ignore the ones we don't like and see if the response looks xmlish
If we found the func in baseClass and it's private, this would have already been handled as an exact Func.
If we have a CF typedef, check whether the "other" declaration we found is just the opaque type behind it.
If we have a contextual type available for this closure, apply it to the ParamDecls in our parameter list.
If we have a non-class, non-objc method or a class, objc method that is final, we do not dynamic dispatch.
If we haven't found a refinement, record whether one overload is in any way more constrained than another.
If we reach this point and do not have a pointer, be conservative and return that the two types may alias.
If we're able to take the dynamic value, then clean up any leftover buffers it may have been contained in.
If we're setting up a TopLevelCodeDecl, configure it by setting up the body that holds PBD and we're done.
If we're translating *to* the foreign expansion, pull the value out of the field and add it to the output.
If when checking for insertion points, we find that we have non-leaking early exits, clear state and bail.
If you define some other weird order in jmorecfg.h, you'll get compile errors until you extend this logic.
In a multi-element query, the first element may already be defined and we want to point to the second one.
In both of the following cases, if the transform makes it no longer a tuple type, we need to change kinds.
In multi-threaded compilation, the backend job must select the correct output file of the compilation job.
In strict mode type mismatches won't be coerced (for legacy reasons in HH files builtins are always weak).
Initialize given the specific instruction type and verify with asserts / that we constructed it correctly.
Instead, we compute with fewer bits and propagate the carry if necessary when rounding the final digit up.
Introduce the dependent type into the constraint set, to ensure we have a record for every dependent type.
It may return a new array if the array needed to grow, or if it needed to COW because cowCheck() was true.
LSLocation read or written has been extracted, expanded and mapped to the / bit position in the bitvector.
Most single-refcounted types will use the standard value witness tables for NativeObject or UnknownObject.
NOTE: simplifyCheckedCastConstraint() may return Unsolved, e.g. if the subexpression's type is unresolved.
Nonetheless, NRVO is a simple pattern that can be detected using a / different technique from propagation.
Note that if the first createInstance fails, the status will cause the second createInstance to also fail.
Note that this handles the case in initializers where there is actually a stack allocation for it as well.
Objective-C expects us to have generated a correct ivar layout, which it will simply slide if it needs to.
On Apple platforms, we implement "once" using dispatch_once, which exposes -1 as ABI for the "done" value.
Once the molad that starts a year is determined the actual start of the year (Tishri 1) can be determined.
Otherwise, emit an error message on the expr we have, and emit a note about where the archetype came from.
Otherwise, see whether we had an enum type as the penultimate component, and look up an element inside it.
Otherwise, we leave a pointer to it in RDS so endCatchHelper can pass it to _Unwind_Resume when it's done.
Past this point we need not check for UNMATCHABLE in pat, because all of pat has already been parsed once.
Read a numeric value from a pointer, into the value union of a magic pointer, according to the magic type.
Remember all the extra ways we have of reaching the parameter archetypes due to type equality constraints.
Require the pattern to have a particular shape: a number of is-patterns applied to an irrefutable pattern.
Returns true if given the current lattice state, do we care if the value / we are tracking is decremented.
Returns true if the instruction can store source operand srcIdx to memory as a cell using a 16-byte store.
Returns true iff a method named methodName appears in iface or any of its implemented (parent) interfaces.
Same-type constraints are eliminated if both sides of the constraint are rooted in substituted parameters.
Set the class to the pure Objective-C superclass, so that when dealloc runs, it starts at that superclass.
Should wait for the new AST, because the declaration location for the 'foo' reference has been edited out.
Skip data --- used to skip over a potentially large amount of uninteresting data (such as an APPn marker).
Skip operator requirements, because they match globally and  therefore tend to cause deduction mismatches.
So if emitOrDeleteBlock ever learns to just continue in the predecessor, we'll need to suppress that here.
Some known optimizations are not included to reduce source code size and avoid compile-time configuration.
Special case: arm64 defaults to the "cyclone" CPU for Darwin, but Clang only detects this if we use -arch.
Starting from the current expression, count up if the expression is equal to its parent expression's base.
Substitute the type we're coming from as the base of the member type to produce the projected type result.
TODO: consider re-using a dom analysis from the PassManager TODO: consider using a cheaper analysis at -O0
The HHAS systemlib functions are not currently visible to hhbbc, but we know they can't return references.
The caller has already determined that all Stores are to the same element within an otherwise dead object.
The check for little-endian architectures that tolerate unaligned memory accesses is just an optimization.
The cleanup is only active and installed when emitting the body of a defer, and it is disabled at the end.
The current basic block contains concrete value for part of the location and covering values for the rest.
The emitter associates object access with the subsequent expression and this would be difficult to modify.
The flow cmd has determined that it is done with its work and doesn't need to remain for later processing.
The getter is mutating if the behavior implementation is, unless we're in a class or non-instance context.
The instructions in between that were weak uses may need modifications now that their frame is going away.
The pipeline may be specified as a single array of operations or a variable number of operation arguments.
The stack will still contain the collection in that case, and loaded_collection_array will be non-nullptr.
The two GEPs do not alias if they are accessing different fields, even if we don't know the base pointers.
The value was produced at +1, so to produce an unbalanced autorelease we need to leave the cleanup intact.
Then we call f(), then we turn the unnamed local into an 'A' so that autoload handlers will run after f().
There are two classifications of types that copy forwarding applies to: address-only types and references.
There is a potential problem if the start or end of daylight saving time occurs during the current period.
These technically have side effects, but not ones that matter in a block that we shouldn't really reach...
They also may generally write to the eval stack below an offset (see alias-class.h above AStack for more).
This constructor reassociates the ArrayData with the collection, so no inc/decref is needed for the array.
This first day of the year will be the day of the molad unless one of 4 rules (called dehiyyot) delays it.
This function requires 'properties' to contain all props declared in the class and all props being public.
This function will create a immutable copy of this Vector (if it doesn't already exist) and then return it
This is a simple scanner, capable of recognizing nested parentheses and string literals but not much else.
This is expected for incomplete types or the strange "other" types sometimes seen, but an error otherwise.
This is not illegal for trivial reasons, because object __destruct methods can ressurect an object in PHP.
This isn't required for correctness, but it may allow removing stores that otherwise we would leave alone.
This means that this block could not have multiple predecessors since otherwise, the edge would be broken.
This should be refactored alongside with the getLastError redirection in collection.c/append_getlasterror.
To make sure we can do this split all critical edges from instructions that don't support block arguments.
Translate AST default argument kind to the Serialization enum values, which / are guaranteed to be stable.
Translate from the requirement kind to the Serialization enum / values, which are guaranteed to be stable.
Treat a call to a load of a variable as a call to that variable, it is just the lvalue'ness being removed.
Until the job actually starts once we receive the headers we don't need to register a pending onComplete()
Visit each one of our predecessor regions and see if any are blocks that can use reference counted values.
Walk backwards in BB looking for strong_release or dealloc_box of the given value, and add it to Releases.
Walk our ancestor expressions looking for the appropriate place to insert the RebindSelfInConstructorExpr.
We also have to constrain the sources for Check instructions, and we share this codepath for that purpose.
We consider the option of either including the DV funclets in the same region as the function body or not.
We could also look at the object type and see if it is known that it can't have a user-defined destructor.
We do not need to check if call is nullptr, since this was checked earlier in isSafeArraySemanticFunction.
We don't have an output from an Action-specific command line option, so figure one out using the defaults.
We don't track cells pushed by interp one except the top of the stack, aside from the above special cases.
We don't want to duplicate the whole original preheader it might contain instructions that we can't clone.
We emit Switch even for absurdly small cases to allow the jit to decide when to lower back to comparisons.
We have cases for addressors here because we might reasonably allow them as protocol requirements someday.
We may eventually change this to work without the extra data structure, but that's how it works right now.
We need either a default argument or a variadic argument for the first declaration to be more specialized.
We need to turn things into R flavors since opcode that followed the call are going to expect that flavor.
We only need to do this when the underlying type is not an object, since only int and string can be enums.
We put retranslate requests at the end of our slab to more frequently allow conditional jump fall-throughs
We should have already emitted these diagnostics when we process the callee function prior to inlining it.
We subtract one since this will be the number of the first new argument AFTER* we remove the old argument.
We're in the wrong thread for making a StringData so stash it in a std::string until we get to unserialize
We've created all our regions, but we need to sort them instead of trying to get the UnitEmitter to do it.
You need ToMixedCopy in cases where the old array needs to remain un-modified (usually if `copy' is true).
any other value will be considered as background and will not be written out:    the stream where to write
couldSimplifyUsers - Check to see if any simplifications are possible if / "Val" is substituted for BBArg.
cut ALL traling zeros only if the number of chars is greater than precision otherwise cut only extra zeros
fastpath/slowpath attrs are untested because the inliner luckily inlines them before the downstream calls.
memory_order_release guarantees that the new chunk is already present in m_chunks when we reset m_current.
processREPLTopLevel - This is called after we've parsed and typechecked some / new decls at the top level.
self:: works dynamically for everything in a trait except for self::CLASS where it returns the trait name.
sink_incs() is a simple pass that sinks IncRefs of values that may be uncount past some safe instructions.
we know that char_list contains null bytes, being terminated because haystack has null bytes is just dandy
'self' or 'super' will reference an instance, but the constructor is semantically a member of the metatype.
(If it were specialized we'd be in the unionArr path, which handles trying to keep as much data as we can.)
- NeedSpill out: If the block has no in-unit successors, free spill space before the block-end instruction.
- The buffer parameter, (buffer: Builtin.RawPointer, inout storage: Builtin.UnsafeValueBuffer, indices...).
/ / After the lower aggregates pass, SIL contains chains of struct_extract and / retain_value instructions.
/ / This entry point is only called from compiler-internal entry points, so does / only minimal validation.
/ The predicate argument must point to a global or static variable of static / extent of type swift_once_t.
1) If we find an init specifier and our name matches the return type, we import as some kind of constructor
@objc enums use their raw values as the value representation, so we need to force the values to be checked.
A connection has been established, and the proxy has responded with an interrupt giving us initial control.
A scalar value is being copied into the tuple, break it into elements and assign/init each element in turn.
A stack of expressions being walked, used to determine where to / insert RebindSelfInConstructorExpr nodes.
After DebuggerSignalTimeout seconds that no active thread picks up the signal, we send it to dummy sandbox.
Allow casting an enum by value when toType is an enum and each elements is individually castable to toType.
Always called from recv and implements specific logic for deserializing a list command received via Thrift.
An IdentityExpr doesn't change its argument, but it *can* propagate its / contextual type information down.
An iterative data-flow analysis to compute the livein sets for each block is necessary for two reasons:  1.
And if they do share states, then / its not possible for CallB to block CallA and CallA not to block CallB.
Any blocks containing a DestroyPoints where hoistDestroy did not find a use are now marked in DeadInBlocks.
Any reference to "self" can be done at +0 so long as it is a direct access, since we know it is guaranteed.
Any use occuring within an exit-block is accepted as these uses will have access to the sunk frame pointer.
Anyway, go back to the beginning of the getter code to ensure that the diagnostics point to correct tokens.
ArrayData* SetInt(ArrayData*, int64_t key, Cell v, bool copy)  Set a value in the array for an integer key.
Assign the rest of the source elements parameter types that will cause the recursive walker to ignore them.
At each step, we fetch from the PreClass is important because the order in which getMethods returns matters
At this point we have an interrupt, but we don't know if we're on the thread the proxy considers "current".
Attribute visitor that checks how the given attribute should be / considered when overriding a declaration.
Based on the constraints we have, build up a representation of what we expect the adjacencies to look like.
Bottom is a subtype of everything, nothing couldBe Bottom, and the union_of anything with Bottom is itself.
Call the normal conformance destructors last since they could be referenced by the other conformance types.
Class and ObjC existential metatypes can be bridged, but metatypes can't directly conform to protocols yet.
Collect all getCount users and check that there are no escapes or uses that / could change the array value.
Computing the interrupt site here pulls in more data from the Unit to describe the current execution point.
Continues a ripemd128 message-digest operation, processing another message block, and updating the context.
Continues a ripemd160 message-digest operation, processing another message block, and updating the context.
Continues a ripemd256 message-digest operation, processing another message block, and updating the context.
Continues a ripemd320 message-digest operation, processing another message block, and updating the context.
Copy / and destroy can just mask out the tag bits and pass the result to / retain and release entry points.
Debug parser for DWARF (using libdwarf)  DWARF is structured as a forest of DIEs (Debug Information Entry).
Determine a "mid" point and adjust to make sure the mid point is at the beginning of a case mapping triple.
Determines whether the first type is nominally a superclass of the second / type, ignore generic arguments.
Do this after the ini processing so we don't accidentally save the config when we change one of the options
Don't finish a region with literal values or values that have a class related to the current context class.
Emit an initialization sequence, initializing an enum at one address / with another at a different address.
Even if the complete graph of the function did change, it does not mean that the summary graph will change.
Even if you're manually creating catches we require this just to make sure you're not doing it on accident.
Extra characters at the end will be / tolerated (and included as a Suffix node as a child of the / Global).
FIXME: The latter could be avoided if we had already substituted all of those other type variables through.
FIXME: This needs to be a linker-local symbol in order for Darwin ld to resolve relocations relative to it.
FIXME: rdar://17671977 the initializer for a lazy property has already been moved into its implicit getter.
For a concrete conformance, use the conforming type as the base type of the requirement and witness lookup.
For example, We could give some path information where the use was uninitialized, like the static analyzer.
For instance, if the archetype is class-constrained, and the binding is not a class, it can never be bound.
For multi-line calls, this instruction is associated with the subsequent line which results in an off-by-n.
For now we leave this disabled in HipHop syntax mode to deal with incompatibilities in existing code-bases.
For now, / for this to succeed portably, both need to be globals defined in the / current translation unit.
Force a ManagedValue to be stored into a temporary initialization / if it wasn't emitted that way directly.
Function: getPixelInterpolated Returns the interpolated color value using the default interpolation method.
GCC 4.8 has some real problems with all the inlining in this file, so don't go overboard with that version.
Given a current token of 'unowned', check to see if it is followed by a / "(safe)" or "(unsafe)" specifier.
Given a type, check if this is an object type with any template parameters being a pointer followable type.
Given that a tuple value is being passed indirectly in the / output, translate the elements and implode it.
Given the type of a function, classify whether calling it with the / given number of arguments would throw.
Here we know both the ClassInfo and the static property name, but it may not actually be on this ClassInfo.
If anything of the fbjni calls fail, an exception of a suitable form will be thrown, which is what we want.
If at the current lattice state, we don't care if the value we are tracking can be used, just return false.
If it fails, we'll do the generic load/IncRef on the exit block, otherwise we do type-specialized versions.
If needed, mark 'self' as uninitialized so that DI knows to enforce its DI properties on stored properties.
If not, the instruction can mark itself (and all downstream instructions that depended on it) as removable.
If rawTarget doesn't have the flag bit we must have a smash in flight, but the call is still pointed at us.
If the base name is vacuous or is a keyword and there are two or fewer words in the base name, don't split.
If the bit is set, then the location currently has an / upward visible store at the end of the basic block.
If the element was not already marked as recursive by a re-entrant call, we can be sure it's not recursive.
If the enum is loadable, do this directly using values, since we have to strip spare bits from the payload.
If the failure callback requested a retry for 'class' or 'type' or both, jump back to the top to try again.
If the pattern has been type-checked, walk the match expression, which includes the explicit subexpression.
If the property can be proved to be true, the / corresponding semantics-call is replaced by a true-literal.
If the property occurs within a generic extension context, consider the generic signature of the extension.
If the protocol is Objective-C-compatible, go through the path that produces an ObjC-compatible protocol_t.
If the substitution didn't change the type, then a negative response to the above is determinative as well.
If the var pattern has no variables bound underneath it, then emit a warning that the var/let is pointless.
If there are FixIt hints introduced into the system, they may well be the reason that this isn't an lvalue.
If there was an interped FCallAwait, and we return via the jit, we need to deal with the suspend case here.
If this is a 'self' in a delegating initializer, we only track one bit: whether self.init is called or not.
If this is a copy of a tuple, we should scalarize it so that we don't have an access that crosses elements.
If this prologue has a DV funclet, then generate a translation for the DV funclet right after the prologue.
If we already saw a non-vararg field missing a default value, then we cannot assign a scalar to this tuple.
If we are not in repo-authoriative mode, we need to check that baseClass cannot change in between requests.
If we didn't return a reduce above, we still can compute a partially-known FCall effect with our res::Func.
If we don't have a substitution for this type and it doesn't have a parent, then we're not substituting it.
If we enter the current block through P, the self value will be null and we don't have to destroy anything.
If we got to the end of the line, and the thing before this diagnostic is a "//" then we can remove it too.
If we have more distinct overload choices for this locator than for prior locators, just keep this locator.
If we saw an init_existential_addr in the use list of the alloc_stack, / this is the init_existential_addr.
If we saw an open_existential_addr in the use list of the alloc_stack, / this is the open_existential_addr.
If we zapped or moved the retain, reset the iterator on the instruction *newly* after the prev instruction.
If we're applying a function that resulted from a covariant function conversion, strip off that conversion.
If we're in REPL mode, inject temporary result variables and other stuff that the REPL needs to synthesize.
If we're supposed to pass directly as a struct type, that really means expanding out as multiple arguments.
If you are setting an int, it does the string parsing once and then when you read it, it is already an int.
In most cases, we do not have decls associated with these parameter lists, so serialize the lists directly.
In non-WholeProgram mode, we can't tell whether the function will be overridden, so never use FCallBuiltin.
In other words many valid things that could be considered induction variables are disallowed at this point.
In the first pass over the image, we accumulate a histogram showing the usage count of each possible color.
Indexed types just for scanning are never pointer followable (because they're not actually heap allocated).
Indicates whether any of the arguments are potentially out-of-order, requiring further checking at the end.
It also seems true for that case as well, since the resulting array is essentially metadata for the object.
It is intended to be fast and catch / obvious cases so that SILCombine and other passes are more effective.
It is significantly bigger than what we need but hard to control all the info that we may want to add here.
It means ptr isn't really a pointer, so return AEmpty to avoid unnecessarily pessimizing any optimizations.
It will move what's at yytext (if anything) to the beginning of the buffer and fill the rest with new data.
Late addition:  construct the table according to file size for noticeable speed improvement on small files.
Let it be known that we are drawing a polygon so that the opacity mask doesn't get cleared after each line.
LifetimeChecker - This is the main heavy lifting for definite / initialization checking of a memory object.
Make an exit trace to side exit to the next instruction, replacing our guess with the correct stack output.
Make sure that any access of the witness through the protocol can only occur when the witness is available.
Make sure we don't print duplicate imports, due to getting imports for both a clang module and its overlay.
MemberRefExpr can refer to type and function members, but the only case that can be an lvalue is a VarDecl.
Merge the a set of imported names produced for the overridden / declarations of a given method or property.
Needed if it's a public base method declared in another compilation unit (for this we have no SILFunction).
Next is set to an invalid block that will be fixed up once we're done iterating through the original block.
Note, the basic block here could be a reference to an undefined basic block, which will be parsed later on.
Notify our parent declaration that we have added the member, which can be used to update the lookup tables.
Okay, given that we have a proper setup, we walk the use chains of the self box to find any accesses to it.
Once those lists no longer exist or are no longer "the truth", we can simplify this algorithm considerably.
Otherwise the STL allocator tries to avoid the high cost of doing allocations by pooling memory internally.
Otherwise, see if we can introduce a cast pattern to get from an existential pattern type to the enum type.
Otherwise, we'll return to this function and reoptimize after processing the new functions that were added.
Otherwise, whatever the result type of the call happened to be must not have been what we were looking for.
Parameters: scale_x - X scale factor scale_y - Y scale factor  Returns: GD_SUCCESS on success or GD_FAILURE
Pick the cast function based on the cast mode and on whether we're casting a Swift metatype or ObjC object.
Possibly bitcast the C function pointer to account for ABI-compatible parameter and result type conversions
Produce a function pointer, suitable for invocation by / objc_msgSend, for the given method implementation.
Prove that there are not array value mutating or capturing operations in the / loop and hoist make_mutable.
Rather than bitcasting, we make an effort to do something that should explode if we get something mistyped.
Retrieve the action associated with the given object type, computing a new one if it isn't already present.
Return an AliasClass representing a range of the eval stack that contains everything below a logical depth.
Return true if this is a closure expression that will require "self." / qualification of member references.
Simplify an apply of the builtin canBeClass to either 0 or 1 / when we can statically determine the result.
Since before this, the only type-indices that can be present are "kIndexUnknown" and "kIndexUnknownNoPtrs".
Since this is a global analysis, we need this to / cache information about different paths through the CFG.
Since we just checked that res is either MethodFoundWithThis or MethodFoundNoThis, magicCall must be false.
TODO: It would be better if we could get all declarations from a given module, not only the top-level ones.
TODO: When a contextual type is missing, we could try to diagnose cases where the element types mismatch...
The XML context is also deleted in this function, so the ownership of the File is kept locally in 'stream'.
The cast instructions don't know how to work with anything but the most general possible abstraction level.
The code below is used for both, function/method parameter type as well as for function/method return type.
The code we're jumping to expects to find a return address in x30, and a saved return address on the stack.
The details are unknown, but the lengths of the months were adjusted until they finally stablized in 8 A.D.
The failure function can do anything, including something like like raising an error or rebuilding the map.
The flags argument describes the behavior in cases where the named property is nonexistent or inaccessible.
The invariant is that this iterator starts a path from source and that sourceKey is correctly describes it.
The type of the dynamic method must match the usual type of the method, but with the more opaque Self type.
The work array elements have to be INT32s, so the work array would need 256Kb at our recommended precision.
They should not prevent load promotion, and will allow promoting values like X in regions dominated by "...
This also has the bonus feature that the value of __FUNCTION__ inside the created function will match Zend.
This assertion should always fail, per the user's request, and should not be converted to llvm_unreachable.
This bridging is more powerful than usual block bridging, however, so we use the ObjCMethod representation.
This can happen under solaris when a dir does not have read permissions but *does* have execute permissions
This could be moved out of the outer loop, but doing it here avoids another loop with getBlockInfo() calls.
This does no type-checking except for the bare minimum to / disambiguate semantics-dependent pattern forms.
This doubling scheme keeps the total block size a power of two, which should be good for memory allocators.
This has to apply to exactly the same / levels of sugar that were stripped off by lookThroughIdentityExprs.
This is important in a non-reentrant scanner so the next time yylex() is called, initialization will occur.
This is needed to track currentStackDepth correctly (and we also assert all the jumps have the same depth).
This is only for promoting primed values to in-memory values, so it's basically not a real problem, but ...
This is true when there is an ambiguous store, which may be an init or / assign, depending on the CFG path.
This is why there's two fairly different mechanisms for handling the effects of defining ops on base types.
This isn't really complete, but is good enough, and matches how Clang's Command handles escaping arguments.
This just walks the type hierarchy, marking the contained object type (if any) as being pointer followable.
This lets us distinguish between a protocol member and a protocol extension member that have the same type.
This might need more than one try in case we need to move the allocation out of a stack-alloc-dealloc pair.
This potentially causes us to perform multiple mmaps under contention, but it keeps the fast path pristine.
This rule ensures we get a reasonable syntax error message when unexpected characters occur inside XHP tags
Try to fully unroll the loop if we can determine the trip count and the trip / count lis below a threshold.
Try to perform the cast to the destination type, producing an optional that indicates whether we succeeded.
Type check each of the subexpressions in place, passing down the contextual type information if we have it.
Until, either ArrayObject moves to HNI or a special case is added to reflection unset should be turned off.
Update the callees for this method and all the methods it overrides by adding this function to their lists.
Used for the allocateSpillSpace() pass which inserts the instructions that create spill space on the stack.
We assume that whatever is in the local is dead and doesn't need to be refcounted before being overwritten.
We can analyze the class hierarchy rooted at it and eventually devirtualize a method call more efficiently.
We can however insert generic loads in the loop pre-header and replace these instructions with AssertTypes.
We can't use arr.lvalAt(name), because arr may have been modified as a side effect of an earlier iteration.
We don't necessarily start at a top-level frame so we need to continue iterating until we run out of frames
We don't need a conformance constraint because we wouldn't have found the declaration if it didn't conform.
We don't need to have explicit cases for any case tags which produce the same result as the default branch.
We don't want that our unoptimized version will be linked instead of the optimized version from the stdlib.
We got external information (probably from static analysis) that conflicts with what we've built up so far.
We intentionally don't respect access control here, since everything is visible to the Objective-C runtime.
We refer to / this map to determine the appropriate parent TRC to use when / walking the accessor function.
We treat the new inner type as a prediction because it will be verified the next time we load from the box.
We want to keep profiling translations to basic blocks, inlining shouldn't happen in profiling translations
When filter assertions is on, we use this to avoid putting stack assertions on some "obvious" instructions.
When generating JIT'd code, we need to call sel_registerName() to force the runtime to unique the selector.
When splitting based on a preposition, whether we should place the / preposition on the argument label (vs.
appendWithRef bumps the refcount and splits if necessary, to compensate for the upcoming pop from the stack
const TypedValue* NvGetInt(const ArrayData*, int64_t key)  Lookup a value in an array using an integer key.
o HNI-style param coerce modes can force the entire function to return false or null if the coersions fail.
*NOTE* This means that we will process ChildNode multiple times potentially with different projection users.
/ / Note that all the instructions BEFORE the specified iterator / stay as part of the original basic block.
/ Currently, this is true if the size and/or alignment of the type is / dependent on its generic parameters.
A SILInstruction visitor that analyzes alloc stack values for dead live / range and promotion opportunities.
A handful of builtins are varargs functions where the (not formally declared) varargs are pass-by-reference.
A name-only resolution is guaranteed to be some kind of non-enum, non-type-alias object (see resolve_class).
A type implementation for a class archetype, that is, an archetype / bounded by a class protocol constraint.
A vector of ClassInfo that encodes the inheritance hierarchy, unless this ClassInfo represents an interface.
Add a level of function application by passing in its possibly / unevaluated arguments and their formal type
All function types of a given convention have the same value semantics, so they share a value witness table.
Allow conversion from an import hint to an import hint kind, / which is useful for switches and comparisons.
Any instruction that can raise an error can run a user error handler and have arbitrary effects on the heap.
Anything other than array for ini_get can be converted to the expected string result for this function call.
As ASI is an operand of ASIUser, SingleWrite dominates ASIUser if it is in the same block as ASI or ASIUser.
As we remove the function from the table we have to store the name string elsewhere: in zombieFunctionNames.
At this point, if tupleInit is non-null, we must emit all of the elements into their corresponding contexts.
At this point, we've either failed to find any epilogue retains or all the post-dominating epilogue retains.
Before we've done the fixed point analysis the states in the info structures are not necessarily meaningful.
Break out of the while loop so that we can fall through to the to the call the the PHP5 autoload impl below.
Build a compound value name given a base name and a set of argument names / extracted from a parameter list.
But if we need to re-abstract, we'll see a lot of benefit from figuring out that we can use TakeAlways here.
But luckily stl only looks at this env var the first time it tries to do an alloc, and caches what it finds.
But this only propagates down to subclasses whose superclass type depends on the subclass's generic context.
Calling into internal functions here is unsafe from other threads so we enqueue the work for the event base.
Checking if Int is a subset of Str shows us that removing Ref from lhs would erase types not present in rhs.
Closures have a hidden local that's always the first (non-parameter) local, which stores the closure itself.
CodeMotionContext - This is the base class which retain code motion and / release code motion inherits from.
Conformance provides all requirements, and we don't have an instantiator, so we can just return the pattern.
Converts struct tm to time_t, assuming the data in tm is UTC rather than local timezone (as mktime assumes).
Create a global variable into which we will store the hash of the module (used for incremental compilation).
Determine the number of applications that need to occur before we can close this existential, and record it.
Determine whether the specified block is reachable from the entry of the / containing function's entrypoint.
Diagnose for checks that are useless because the minimum deployment target ensures they will never be false.
Do this before checking the inheritance clause, since it may itself be dependent on one of these parameters.
Don't walk into non-single expression closure bodies, because ExprTypeSaver and TypeNullifier skip them too.
Each src must be defined by some other instruction, and each dst must be defined by the current instruction.
Emit entry point arguments for the parameters of a C function, or the / method parameters of an ObjC method.
Emit suggested Fix-Its for a reference with to an unavailable symbol / requiting the given OS version range.
End llvm namespace / Check to see if AvailableVals has an entry for the specified BB and if so, / return it.
Expensive, but the only way that produces an acceptable result: mix down to a palette based temporary image.
Extend word sign Lowering for cmpqi removed, since movl was emitted, then the empty will always return false
FIXME: For protocol argument types, could add specific error similar to could_not_use_member_on_existential.
FIXME: If we inferred different types for literals (for example), could diagnose ambiguity that way as well.
Fast path: There are no tombstones and the requested capacity is less than or equal to the current capacity.
Filter out bits and pieces that no longer exist due to other components going to Bottom, starting with bits.
Find the first compilation unit which at least partially lies within the range given by the begin parameter.
Finds the unvisited blocks in the CFG by doing a reverse DFS starting at `block', and adds them to `blocks'.
Flow control cmds do their work in onSetup() and onBeginInterrupt(), so there is no real work to do in here.
For 'let' bindings, we emit a release_value or destroy_addr, depending on whether we have an address or not.
For nested loops it returns the command that completed the loop, which will match the expectedCmd passed in.
For properties that require "deep" initialization, we have to do a little more work at object creation time.
Free locals, but don't trigger the EventHook for FunctionReturn since the generator has already been exited.
GLOSSARY  dehiyyot         The set of 4 rules that determine when the new year starts relative to the molad.
Given a metatype value for the type, allocate an Objective-C / object (with alloc_ref_dynamic) of that type.
However, currently IndirectFixup is only used for destructors, which aren't allowed to throw, so this is ok.
I.e. we were called from CmdGlobal, or the client's current frame is the global frame, according to OnServer
If 'a' is passed, the value is expected to be a class name that will be prepended to the passed method name.
If Op is not a consumed argument, we must break since this is not an Op that is a part of a return sequence.
If an argument value was specified, but this is a simple enumerator, then we fail with a nice error message.
If an instruction, which is not releaseinst nor releasevalue, that could decrement reference count is found.
If both arguments are an integer or both arguments are a double, we know the exact type of the return value.
If hasBlock returns true, then IRUnit already has a block for that offset and makeBlock will just return it.
If the contextual type is an UnsafePointer or UnsafeMutablePointer, then that is probably what is happening.
If the enclosing context doesn't handle anything, use a specialized diagnostic about non-exhaustive catches.
If the enum we're testing is non-trivial, there will be a cleanup in this stack that will release its value.
If the method was declared within a protocol, check that it does not conflict with the setter of a property.
If the parameter is named, it will be removed and correctly disposed of by the hash_update call that follows
If the payload size is greater than 32 bits, the calculation would overflow, but one tag bit should suffice.
If the predecessor block has already been visited (potentially due to a cycle in the CFG), don't revisit it.
If the previous declaration didn't have a semicolon and this new declaration doesn't start a line, complain.
If the subscript occurs within a generic extension context, consider the generic signature of the extension.
If the variable is defined in a pattern in an if/while/guard statement, see if we can produce a tuned fixit.
If there is a hint decl that specifies where to add this, just link into the chain immediately following it.
If there is no false code, the continuation block has a use because the main condition jumps directly to it.
If this frame had its return address smashed by the debugger, the real catch trace is saved in a side table.
If this is a "super." dispatch, we do a dynamic dispatch for objc methods or non-final native Swift methods.
If this is true, and conservative is true as well, it means that the conservative scan is still conditional.
If we didn't manage to keep something in the first non-extra slot, scan extras again to swap something over.
If we didn't manage to resolve directly to an expression, we don't have a great diagnostic to give, so bail.
If we do not find a ref count increment in the relevant BB, skip this enum since there is nothing we can do.
If we found one, advance the info for the source to the current point in the path, then continue the search.
If we have no local context to parse the initial value into, create one for the PBD we'll eventually create.
If we run into any errors parsing getting any types for a type list we need to bail out and return an error.
If we were given a mangled name, do a very simple form of LLDB's logic to look up a type based on that name.
If we weren't able to resolve a member or if it is mutable, then the problem must be with the base, recurse.
If we're reading and the getter is mutating, or we're writing and the setter is mutating, this is readwrite.
If you specify textaddr/textaddrlen, a text-printable version of the address will be emalloc'd and returned.
Import members of the given Objective-C container and add them to the / list of corresponding Swift members.
In RepoAuthoritative, we assume we won't ever deallocate units and that this is read-only, mostly cold data.
In general, arrays can contain int-valued-strings, even though plain array access converts them to integers.
In this module the prescan simply updates the histogram, which has been initialized to zeroes by start_pass.
It will adjust all references into the original src ranges to point into the corresponding relocated ranges.
It will also return an empty array if the values for a valid collection-like configuration has not been set.
It's important that the EndBlock is at the head of the WorkList so that we handle it after all other blocks.
Keeps a list of replaceable instructions in the current basic block as / well as their SILValue replacement.
Manually add any expected nominal types from imported modules so that they get their expected type relation.
Map from exception names to the list of EHEnt's that have a catch block jumping to this label for that name.
NB: exceptions derived from DebuggerException or DebuggerClientExeption indicate the machine remains paused.
Nice for thumbnails but there's no support for fussy adjustment of the assumed properties of inks and paper.
Note that MSVC's rand is actually thread-safe to begin with so no changes are actually needed to make it so.
Note that a classname does not have to exist as the user can specify method bar on class Foo with "Foo::bar"
Note that accesses to this set are not synchronized, so it must not be modified after module initialization.
Note that the foreign error convention affects the selector, so we perform this before inferring a selector.
Note: the effective type we can assume a given static property may hold is not just the value in these maps.
Now we need to make the setenv 'stick', which it may not do since the env is flakey before main() is called.
Only allow allocation of member lookup tables using the allocator in ASTContext or by doing a placement new.
Open up unbound generic types, turning them into bound generic types with type variables for each parameter.
Otherwise, this is a simple reference to "dynamicType", which is always fine, even if self is uninitialized.
Our general approach is to do a depth first traversal of the broken expression tree, type checking as we go.
Partition the set of unsatisfied requirements to put the conflicts that involve this source file at the end.
Pointer manipulation is traditionally done with lea, and it's safe to insert even where flags might be live.
Prior to making any changes to the evaluation stack in between instructions, this function should be called.
Problem is, we don't have a ZendResourceData handy, as we should only get here if they've all been released.
Process each function, and consider merging its cluster with the one containing its most likely predecessor.
Rebuilds the given 'self' type using the given object type as the / replacement for the object type of self.
Replace all uses of the apply instruction with the operands of the return instruction, appropriately mapped.
Resolve the given identifier type representation as an unqualified type, / returning the type it references.
Retrieve the bridging operation to be used if a static conformance to _BridgedToObjectiveC cannot be proven.
Return the full function type for a set of curried parameter lists that / returns the specified result type.
Return the precedence-yielding parent of 'expr', along with the index of 'expr' as the child of that parent.
Same as previous macro, but useful when we know that the buffer stack is not NULL or when we need an lvalue.
Save any existing type data of the subexpr tree, and reset it to null in prep for re-type-checking the tree.
Set up callbacks to support stream wrappers for reading and writing xml files and loading external entities.
Starting from SearchRoot, finds the innermost node containing ChildRange / for which Predicate returns true.
Stored properties will be initialized in a separate .cxx_construct method called by the Objective-C runtime.
The Cursor creation should be done through an init method otherwise a connection have to be requested twice.
The array created by the other thread is now in expected, return it instead and delete the one we just made.
The empty compiler version represents the latest possible version, usually built from the source repository.
The mandatory inliner drops debug_value instructions when inlining, as if it were a "nodebug" function in C.
The raw type should be a C integer type, which should have a single scalar representation as a Swift struct.
The successor/predecessor edge in between S and ER with a new successor/predecessor edge in between S and L.
These 16 integers are fed through 320 invertible modifications, where each modification changes one integer.
This assigns a value register to constants defined by DefConst, because some HHIR instructions require them.
This avoids unreachable blocks appearing to be reachable, which would cause translateRegion to process them.
This file implements optimizations for reference counting, object allocation, and other runtime entrypoints.
This function assumes that 'globals' only contains GlobalValue values for the entities that it will look up.
This function is sometimes called more than once on the same buffer, such as during a yyrestart() or at EOF.
This is a lot like Pattern::print, but prints typed patterns and / parenthesized patterns a bit differently.
This is an interface over the standard OSF uuid library that gives UUIDs sane value semantics and operators.
This is because at runtime they are currently hphp arrays, which will treat leading integer keys as numbers.
This is called in a few places to be consistent with old minstrs, and should be revisited once they're gone.
This is called when a predecessor of a block is dropped, to simplify the / block and add it to the worklist.
This is helpful because type checking a subexpression can lead to replacing the nodes in that subexpression.
This makes sure that none of the registers eventually used by the dynamic linker are used by generated code.
To be compatible with a variadic interface, params from the variadic onwards must have a compatible typehint
Translate from the AST ownership enum to the Serialization enum / values, which are guaranteed to be stable.
Try to resolve this type witness via name lookup, which is the most direct mechanism, overriding all others.
Update the type for `l' to reflect new information that we've obtained from guards, assertions, or the like.
Visits a requirement type to match it to a potential witness for / the purpose of deducing associated types.
Walk the type to see if we have any archetypes that are *not* open existentials and that aren't type-erased.
We are transferring ownership of the array to the iterator, therefore we do not need to adjust the refcount.
We could punt, but it's better to assert for now because if we change this in hhbbc it will be on-purpose...
We didn't find any methods with the specified name in cls's method table, handle the failure as appropriate.
We do not handle guaranteed parameters here since those are handled in the code in GlobalARCPairingAnalysis.
We don't want the decision about whether to rename the decl to depend on what exactly the user has imported.
We had a counted inner array---we need to do an O(N) copy to get the collection into the request local heap.
We know the result Set will simply be a copy of this Set, so we can just call Clone() and return early here.
We must use the following (undocumented) APIs because pthread_attr_getstack returns incorrect values on OSX.
We need to do the calculation instead of just setting it to jeAllocated because of the MaskAlloc capability.
We only store the min and max offsets, and we will take a decision later, when the base value will be known.
We sometimes want to print the accessors abstractly instead of listing out how they're actually implemented.
We split this out into AvlLoc (can be moved to the end), and DelLoc (can be deleted if its anticipated out).
We want to ensure that all code blocks are close to each other so that we can short jump/point between them.
We'll keep track of how many things are in the bindings struct with its own count in the capture descriptor.
When parsing the top level executable code for a module, if we parsed some executable code, then we're done.
When the factory method has an "instancetype" result type, we can import it as a convenience factory method.
When we erase an instruction, we use the map in the worklist to check if the instruction is in the worklist.
While this is technically valid in an email address, these parts aren't actually part of the address itself.
With closure captures it is actually possible to have two function / arguments that both have the same name.
call a function to parse all the text, so that we can use the same function to parse text from other sources
class_method that refers to an initializing constructor is a method lookup for delegation, which is ignored.
ctx is not related to the class that first declared this protected method, so this method is not accessible.
emit nops to fill a standard li64 instruction block this will be useful on patching and smashable operations
holding it for the entire request life time, so soapserver and soapclient can use sdl* without being deleted
if the callee's class is not persistent, its still ok to use it if we're jitting into a method of a subclass
m_btpointers_cnt must be an upper bound on the number of filenames then *2 for tolerable hash table behavior
zero extend any boolean value that we pass to the helper in case the helper expects it (e.g., as TypedValue)
(Note: Zend will actually fatal if there's a user function named __lambda_func when you call create_function.
(This can happen if a user declares a class with a getWaitHandle method that returns non-WaitHandle garbage.)
/ / FIXME: We should identify nested loops with a common header and separate / them before merging the latch.
/ / Let-value initializations cannot be broken into constituent pieces if a / scalar value needs to be bound.
/ / The code relies on isIdentifiedUnderlyingArrayObject' to make sure that a / 'safe arrays' is not aliased.
/ / This is a bitset that conveniently flattens into a matrix allowing bit-wise / operations without masking.
/ / This is used for initializer delegation, so it covers only the narrow / subset of expressions used there.
/ / This is used to derive the common prefix of enum constants so we can elide / it from the Swift interface.
/ For generic metadata patterns, the address point is always at the / beginning of the template (for now...).
1 means that we have the fp from the caller's frame, and 2 means that this fp is not enough to figure out sp.
8) For each block, there must be a path from the entry to it that includes only earlier blocks in the region.
A block is considered reachable from itself only if its entry can be / recursively reached from its own exit.
A hoist group is a group of IRInstructions that all want to be hoisted to the same destination IRInstruction.
Add a level of function application by passing in its possibly / unevaluated arguments and their formal type.
After parsing the expected type, the / caller of this function can choose the one that has the expected type.
After the maximum size is reached then the least-recently-used element is discarded to make room for the new.
Ahead of time whole program optimizations need to assume it can see all the code, or it really can't do much.
Belonging to an indexed type generally marks that the type is allocated on the req-heap (with one exception).
Bind the given function declaration, which declares an operator, to / the corresponding operator declaration.
Blocking until Ctrl-C is issued by end user and DebuggerProxy cannot find a real sandbox thread to handle it.
Bodies of public transparent and always-inline functions are serialized, so use conservative access patterns.
Build a map from partial_apply to the indices of the operands that will be promoted in our rewritten version.
But if the dominating non-exact checked_cast_br fails, then the current exact cast would always fail as well.
By laying out the enum this way we can avoid the branch and just transition by adding 2 to the current state.
Cache key for element associated with m_pos in order to update m_pos after the compaction has been performed.
Catalog all of members of this declaration context that satisfy requirements of conformances in this context.
Check if the root value for Value that comes / along the path from DomBB is equivalent to the / DomCondition.
Check to ensure that we have an OverloadedDeclRef, and that we're not favoring multiple overload constraints.
Coerce each subpattern to its corresponding property's type, or raise an error if the property doesn't exist.
Compute the BBWriteSetOut and BBWriteSetIn for the current basic / block with the generated gen and kill set.
Create a new copy of this instruction, which retains all of the operands / and other information of this one.
Currently we believe that castValueToABICompatibleType can handle all cases, so this check should never fail.
Determine how many stack slots we're going to write that the caller hasn't already checked we have space for.
Determine whether the given context nested inside a generic type context / with no local contexts in between.
Don't attempt to determine function arguments in the PHP backtrace, as that might involve re-entering the VM.
Either way the stack depth is below the calleeAR by numArgs, because we haven't run func prologue duties yet.
FIXME: For now, conservatively assume that unknown functions can be called from any witness_method call site.
FIXME: If the unsubstituted payload type is empty, but not resilient, we treat the case as a no-payload case.
FIXME: This is the wrong diagnostic for if someone manually declares a variable named 'self' using backticks.
FIXME: clang::IdentifierInfo /nearly/ has the API we need to do this in a more principled way, but not quite.
Fast path -- if both functions were unwrapped from a CanSILFunctionType, we might have pointer equality here.
Finally, any removed frame pointers in BCMarkers must be rewritten to point to the outer frame of that frame.
For updating code we need to go through all the files and pick up changes, even if they have compiler errors.
Furthermore, any unreachable blocks appearing before the first reachable block are moved to the end of workQ.
Generate order numbers for the functions in the SIL module that correspond to definitions in the LLVM module.
Get the referenced base expression from the failed constraint, along with the SourceRange for the member ref.
Given a function candidate with an uncurry level, return the parameter / type at the specified uncurry level.
Got an ExitException during exception handling, handle similarly to the case below but don't call obEndAll().
Gradually, those gotos should go away as we can handle more kinds of conversions via disjunction constraints.
Handle arguments common to all invocations of the frontend (compilation, / module-merging, LLDB's REPL, etc).
If TC reuse is enabled, attempt to relocate the newly-emitted translation to a hole reclaimed from dead code.
If explicitly provided a timestamp to the ret array and always make sure there is at least one returned value
If it's ALL we create two resources, but only return one - this matches Zend, and is the documented behavior.
If the associated type is from our own protocol or we inherit from the associated type's protocol, resolve it
If the bit is set, then the location currently has an / downward visible value at the end of the basic block.
If the case has non-zero tag bits stored in spare bits, we need to mask them out before the data can be read.
If the destination type is known to have a Swift-compatible implementation, use the most specific entrypoint.
If the path cannot be resolved and is relative, the path of the sandbox is used to qualify the relative path.
If the signed char is negative, we want to instead treat it as an 8-bit unsigned char, hence the double cast.
If the substitution didn't change anything, we know that the original type was a lowered type, so we're good.
If the top bit of Result is known to be 0, then it is safe to replace the whole pattern by original bits of x
If the upcast is used by a ref_element_addr, then it is an access to a base ivar before super.init is called.
If there are more callee parameters than arguments it means that the callee is the result of a partial_apply.
If there's a superclass constraint that conforms to the protocol, add the appropriate same-type relationship.
If this block was changed and it now consists of only the unreachable, make sure we process its predecessors.
If this declaration is a function which goes into a vtable, then it's symbol must be as visible as its class.
If this is a call to an unavailable ++ / -- operator, try to diagnose it / with a fixit hint and return true.
If this is a single-expression closure, convert the expression in the body to the result type of the closure.
If we couldn't resolve a specific type for the base expression, then we cannot produce a specific diagnostic.
If we don't have the base available, we might still be able to get a value with a good type from its pointer.
If we found an impossible designated initializer, then we cannot call super.init(), even if there is a match.
If we know the type to have a fixed nonempty size, then the pointer is dereferenceable to at least that size.
If we were able to solve this without considering default literals, don't bother looking at default literals.
If we're currying a direct reference to a class-dispatched method, make sure we emit the right set of thunks.
If we're doing a metatype cast, it can only be existential if we're casting to/from the existential metatype.
In an initializer, the only expression allowed is "nil", which indicates failure from a failable initializer.
In the case of an interpolated string literal expr, the subexpressions are contained within the string token.
In theory, this is happening within conditional code, so we need to be only conditionally claiming the value.
Include a value from module X if: no particular module was requested, or module X was specifically requested.
Incref the args (they're already referenced in extraArgs) but now additionally referenced in varArgsArray ...
Infer the same availability for the mirrored declaration as we would for the protocol member it is mirroring.
It wouldn't be unreasonable for this method to just ignore OTK_None if we made code more convenient to write.
Literals cloned from the caller drop their location so the debug line / tables don't senselessly jump around.
Load the DIE at the given offset, and call the given callable on it, returning whatever the callable returns.
Look at all of the initializers of the subclass to gather the initializers they override from the superclass.
Make progress through this instruction before side-exiting to the next instruction, by doing a slower lookup.
Make sure that any VarDecl's contained within the pattern know about this PatternBindingDecl as their parent.
Make sure that the IR unit contains a main exit corresponding to the last bytecode instruction in the region.
Mark the current thread as being in the process of completing an io, and record the time that the io started.
NOTE: this is a conservative approximation, because some retains may be blocked before it reaches this block.
No phi for this value in this block means that the value flowing out of the immediate dominator reaches here.
Now copy each candidate callee that has a small enough number of call sites into the final set of call sites.
Now load the top-level module, so that we can check if the submodule exists without triggering a fatal error.
Now that all of the uses are fixed we can fix the branches that point to the blocks with the added arguments.
Now that the IR is correct, see if we can remove dead callee computations (e.g. dead partial_apply closures).
Objects types with internal linkage with the same name are only the same if they're in the same compile unit.
Owned parameters may call the destructor of the object which could violate the readonly-ness of the function.
PHP5 does list() assignments RTL, PHP7 does them LTR, so this loop can go either way and looks a little ugly.
Parameters: dst - Where to store the resulting affine transform  Returns: GD_SUCCESS on success or GD_FAILURE
Pop the signal polling thread, and any interrupting threads, out of their event loops and cause them to exit.
Process any destroy_addr and strong_release instructions that are invoked on / a partially initialized value.
Produce a diagnostic for a general overload resolution failure / (irrespective of the exact expression kind).
Push state and update the marker before emitting any instructions so they're all given markers in the callee.
Query whether the original type is address-only given complete / lowering information about its substitution.
RSP is unchanged in VM frames, except for some rare cases with calls to functions that we assume don't throw.
Refutable patterns occur when checking the PatternBindingDecls in if/let, while/let, and let/else conditions.
Reprint the original message, so readers don't necessarily have to page up through all the detail to find it.
Return true if any possible definition of one php::Class could derive from another at runtime, or vice versa.
See if a connection is in our blacklist to short-circut trying to connect to a node that is known to be down.
Select the "necessary column", Maranget's term for the column / most likely to give an optimal decision tree.
Set to true if the metadata record for the generic type has fields / outside of the generic parameter vector.
Since `current' is shorter, we might have a different hint, or a different heuristically-determined best-reg.
TODO: Could allow known-empty types to be inserted or removed, but SIL doesn't know what empty types are yet.
The Gregorian calendar was not instituted until October 15, 1582 (or October 5, 1582 in the Julian calendar).
The data flow has stabilized, run one last iteration over all the basic blocks and try to remove dead stores.
The direct check for SubstitutableType works because only class-bounded generic types can be passed directly.
The rule_inc_dec_fold will first apply when we're pointing to the "inc-4" node, removing "inc-4" and "dec-5".
The set of currently available pins that have not been invalidate by an / instruction that mayRelease memory.
The zend_hash_find() interface itself is theoretically non-const and callers may write directly to the value.
These four methods all have the same(ish) signature, but don't fit nearly into a template, so I went hacky...
These variable sets are used to compute the transfer function for the global liveness analysis in global_dce.
This also ensures that we are locally identified and non-escaping since we only allow for specific ARC users.
This character is not found in valid UTF-8 sequences and is rarely used in popular 8-bit character encodings.
This file implements basic setup and teardown for the class which performs IR generation for function bodies.
This file implements routines for arbitrary Swift-native heap objects, such as layout and reference-counting.
This force-casts the incoming address to NativeObject assuming the caller has performed all necessary checks.
This function returns its first argument so that in some cases we can do tails calls (or maybe avoid spills).
This has the effect of an intersection since we already checked earlier that RefCountedValue was not blotted.
This is a simple, if hacky, peephole that's useful for the code in emitInPlaceTypeMetadataAccessFunctionBody.
This is important in a non-reentrant scanner so the next time hphplex() is called, initialization will occur.
This is necessary since x86_64 can load only the byte and do not touch the other bits of destination register
This is the standard clone handler, which, confusingly, does NOT call the clone handler in the object bucket.
This relies on the following bytecode invariants:  - All fault funclets come after the primary function body.
Transition from SHUTDOWN_NONE to DRAINING_READS needs to happen explicitly through `stopListening`, not here.
Translate from the serialization Ownership enumerators, which are / guaranteed to be stable, to the AST ones.
Unlike static variables, there can be multiple definitions, but we'll only take the first information we see.
Verify that the optionality of the result type of the initializer matches the failability of the initializer.
We "freeze" (i.e. do not attempt to remove or move) such releases if / FreezeOwnedArgEpilogueReleases is set.
We also need to release the partial_apply instruction itself because it is consumed by the apply_instruction.
We are emitting a case in a finally epilogue, therefore skip the current try region and start from its parent
We assume that this method always removes one level of pattern and replacing it with its direct sub-patterns.
We can assume that the address of Proto does not alias because the calling convention is In or In-guaranteed.
We can just check the most recent redeclaration, which will inherit any attributes from earlier declarations.
We can't rely on the DeclContext hierarchy climb above because properties do not introduce a new DeclContext.
We do that, for instance, by making a class extension / and running the code in a function in that extension.
We don't want to leave sensitive data from our actual password hash computation on the stack or in registers.
We either just created a new destroy, forwarded a copy, or will continue propagating from this dead-in block.
We found differing projections, but we need to make sure that there are no casts in the symmetric difference.
We have a reference to an initializing constructor, but we will actually be using the allocating constructor.
We know that a dedicated checked_cast_br check is generated for each direct subclass by tryToSpeculateTarget.
We might be able to get more performance by just getting the number and doing to string conversion ourselves.
We need to preserve any phidefs in the forwarding block if they're present in the original destination block.
We only need to do this because the implicit constructor is added before all the properties are type checked.
We should never be emitting a metadata accessor for resilient nominal types outside of their defining module.
We want to import the signature of the exit(3) libc function as "func exit(Int32)", not as "func exit(CInt)".
We'll need to know the location of this jump later so we can patch it to new translations added to the chain.
We're evaling some code for internal purposes, most likely getting the default value for a function parameter
We've already inserted the requisite sync here, and have reencountered the Call while sinking a parent frame.
When EvalJitEnableRenameFunction is false, the translator may wire non-AttrInterceptable Func*'s into the TC.
When it appears that there is already code for the call present, just complete values and/or argument labels.
While not required for correctness adding these slots to the kill set will hopefully avoid some extra stores.
end anonymous namespace / Return the ArchetypeTypeInfoBase information from the TypeInfo for any / archetype.
for fresh type variables T0 and T1, which pulls out a static member, i.e., an enum case or a static variable.
getCanonicalType - Return the canonical version of this type, which has / sugar from all levels stripped off.
getOrEraseBlock - If there are branches to the specified JumpDest, / return the block, otherwise return NULL.
most likely a string, but just make sure that we are dealing with something that can be converted to a string
perf_event_open(struct perf_event_attr *hw_event_uptr, pid_t pid, int cpu, int group_fd, unsigned long flags)
t7621182 Don't merge different spillframes for now, because code-gen doesn't handle phi'ing an Obj and a Cls.
(Note that this special case generator relies on the exact implementation of the main appendReserved routine.)
- Whitespace is not normally significant, but newlines may not be in the middle of a list of opcode arguments.
/ / Essentially equivalent to forwardIntoIrrefutableSubtree, except it / converts AlwaysTake to TakeOnSuccess.
/ / TODO: There are a lot of code duplications between retain and release code / motion in the data flow part.
/ Both containers must be of the same existential type representable with the / same number of witness tables.
/ This helps the devirtualizer to replace witness_method by / class_method instructions and then devirtualize.
/ We will not rotate a loop where the header is equal to the latch except is / RotateSingleBlockLoops is true.
A declaration found directly beats any declaration found via dynamic lookup, bridging, or optional unwrapping.
A month always starts on or near a new moon and has either 29 or 30 days (a lunar cycle is about 29 1/2 days).
A single-frame stack trace is used to aggregate stats for each function when called from different call sites.
A version number is either an integer (8), a float (8.1), or a float followed by a dot and an integer (8.1.0).
Access strategies should be set by the abstract class layout, not using the concrete type information we have.
Add to `coveredArcs' all `cfg's arcs going from `src' to 'dst' or any of `dst's retranslations in `dstRegion'.
After we have scanned the entire region, diagnose variables that could be declared with a narrower usage kind.
Also determine which ones will need to be passed through the eval stack, and which ones will need conversions.
Assuming this lets us save an introducer character in the common case when a generic parameter is constrained.
Attempt to produce a diagnostic for a mismatch between an expression's / type and its assumed contextual type.
Avoid raw_ostream's write_escaped, we don't want to escape unicode characters because it will be invalid JSON.
Because it only has a read lock on the data, deletion from expiration has to happen after the lock is released
Between `r1' and `r2', choose the one whose position in `pos_vec' is closest to but still after (or at) `pos'.
But we want our state structures to have support_map pointing to at most one must-alias-set for each location.
Check whether we have an identifier followed by another backtick, in which case this is an escaped identifier.
Collect all get_element users and check that there are no escapes or uses / that could change the array value.
Collections can't contains refs, so we need to check for their presence before taking ownership of this array.
Conformance provides all requirements, but we have private storage and an initializer, so we must instantiate.
Could call vm_user_func(bound, params) here which goes through a whole decode function process to get a Func*.
Create and open a tempfile, use the tempfile's name when dumping a heap profile, then open the resulting file.
Drop the arguments from the branch instructions by creating a new branch instruction and deleting the old one.
Eagerly loading here could cause an unnecessary load+materialize in some cases, but it's not really important.
Even when newIds.isAny(), we still know it won't alias locals in other frames, so keep the specialization tag.
Expand the abstract parameters of a SIL function type into the / physical parameters of an LLVM function type.
FIXME: The name of this module could end up as a key in the ASTContext, but that's not correct for submodules.
FIXME: These expressions merely adjust the result type for DynamicSelf in an unchecked, ABI-compatible manner.
FIXME: This terrible hack is in place to support equality comparisons of non- equatable option types to 'nil'.
Factory initializers are effectively "allocating" initializers with no corresponding initializing entry point.
First add to NewParameterInfoList all of the SILParameterInfo in the original function except for the closure.
For PPC64 there are no instructions to perform operations with only part of a register, differently of x86_64.
For a SIMPLE arg, after the name part, there should be an ARG_TYPE part whose string value tells us what to do
For all lowerings except ResilientEnumImplStrategy, the primary enum operations are open-coded at usage sites.
For dependent member types, we may need to look up the member if the base is resolved to a non-dependent type.
For exact casts, we are interested only in the fact that the source operand is the same for both instructions.
For example, init_enum_data_addr and struct_element_addr / may be part of a decoupled initialization sequence.
For members of a synthesized extension, we should append the USR of the synthesize target to the original USR.
For now we're leaving that alone, which gives the invariant that every FuncFamily we create here is non-empty.
For short-term ease of initial implementation, we always go through the expr parser for ambiguous productions.
Given a Swift value explosion in 'in', produce a Clang expansion / (according to ABIArgInfo::Expand) in 'out'.
Given a specific expression and the remnants of the failed constraint / system, produce a specific diagnostic.
Given part of the witness's interface type, produce its / substitution according to the witness substitutions.
Grab the external entity whitelist and set up the map, then register the callback for external entity loading.
Gzip has 20 bytes header, so anything smaller than a few bytes probably wouldn't benefit much from compression
If a custom scanner function for bases is specified, the list of immediate bases which the scanner applies to.
If a stored property does not have a setter, it is still settable from the designated initializer constructor.
If all the parameters in the compact() call are statically known, there is no need to create a variable table.
If our base is an existential type, we can't make use of any member whose signature involves associated types.
If that happens, we need to return to the caller, but the handler will have already popped the callee's frame.
If the branch predicates for the two merge differ, mixing them is unsafe since they are not control dependent.
If the current result matches the remaining found declaration, keep it and move to the next found declaration.
If the final block is empty because it would've only contained instructions producing literal values, kill it.
If the number of calls is less than the natural uncurry level, the callee emission might create a curry thunk.
If the parameter is variadic, we will print the "..." after it, but we have to strip off the added array type.
If the preceding token in the call is the leading parameter separator, we'll expand replacement to cover that.
If the predecessor is not in the loop, make the predecessor a predecessor / of the loop instead of the header.
If the property is not found as a public property anywhere in the hierarchy, we don't want to merge this type.
If the target encoding was unknown, or no decoder function was specified, return the UTF-8-encoded data as-is.
If the use is a tuple_element_addr, add it to the worklist so we check if it or one of its descendants escape.
If there is only 1 child and we cannot strip off any projections, that means we need to create an aggregation.
If this is a simple 'let' constant, emit a note with a fixit indicating / that it can be rewritten to a 'var'.
If this is an initialization, or the storage type is trivial, we can just replace the assignment with a store.
If type is not nullptr, the witness table depends on the substituted conforming type, so use that are the key.
If we can't figure out the Base or Projection Path for the write, process it as an unknown memory instruction.
If we don't have a 'lib/arc/' directory, find the "arclite" library relative to the Clang in the active Xcode.
If we don't have an enum tag for each predecessor of this BB, bail since we do not know how to handle that BB.
If we have a nominal type that conforms to the protocol in which the associated type resides, use the witness.
If we have any arguments that were consumed but are now guaranteed, insert a release_value in the error block.
If we have determined that we need to deviate from the correct algorithm, flip bit 16 in initial expanded key.
If we should use a super access if applicable, and we have an overridden decl, then use ordinary access to it.
If we're not limited the set of interesting conformances, or if this is an interesting conformance, record it.
Ignore accessor methods (e.g. getters and setters), they will be handled when their storage decl is processed.
In all cases where a payload size is demanded in the metadata, it's runtime-dependent, so fill in a zero here.
In order to recover the nested GenericParamLists, we divide genericParams and requirements according to depth.
In the case that there is no next available integer key, this function sets out to point to the lvalBlackHole.
Instead we traverse thru all section headers until a symbol table one is found or else the binary is stripped.
It also prints a sorted table containing the contribution to the code size increase for all inlined functions.
It is important that this transformation is done at the end of a pipeline, as it may break some optimizations.
Iterator which iterates over all basic blocks of a function which are not / terminated by an unreachable inst.
Local function to extract the ith argument expression, which papers over some of the weirdness with tuples vs.
Look inside one-element exploded tuples, but not if both input and output types are *both* one-element tuples.
Lookup for an Objective-C method with the given selector in the / given class type or any of its superclasses.
Make sure we can identify when the subregion has at least one dead non-local edge and no remaining live edges.
MixedArray guarantees that when it adds a hash table entry that it always sets it to refer to a valid element.
Move invName to where the first argument belongs, no need to incRef/decRef since we are transferring ownership
Multi-threaded compilation: A single frontend command produces multiple output file: one for each input files.
NOTE: If more checks are to be added, place the most expensive in the end, this function is called many times.
NOTE: this is a conservative approximation, because some releases may be blocked before it reaches this block.
Needs to be under the lock, because multiple threads could call destroy, or want to manipulate the class list.
Note that the 'entryArDelta' parameter specifies the delta between sp at the beginning of the tracelet and ar.
Note that this should not use a for-each loop, as the Uses list can grow and reallocate as we iterate over it.
Now that we're at a fixed point, use the propagated states to remove instructions that don't need to be there.
Now visit each one of our predecessor regions and see if any are blocks that can use reference counted values.
Only include functions that are definitions, and which have not been intentionally excluded from optimization.
Otherwise either create an aggregate builder for the parent or reuse one that has already been created for it.
Otherwise, if this function type has a guaranteed self parameter type, make sure that we have a +0 self param.
Otherwise, we have an unreachable and every instruction is inert from an ARC perspective in an unreachable BB.
Owning a reference to a class existential is equivalent to owning a reference to the contained class instance.
Parse all args until we see an input, and then collect the remaining arguments into a synthesized "--" option.
Per-dir INI settings are bound here, but that seems really questionable since they can change per request too.
Possibly add more indexes in the future, like "log_queries", "log_commands", "log_failures", "log_metadata"...
Replace debug_value_addr with debug_value of the promoted value if we have a valid value to use at this point.
Return true if we are the last argument of our BB and that our parent function has a call signature with self.
Returns true if the given return or throw block can be used as a merge point / for new return or error values.
Returns true if the last command parsed by the client has an argument that changes the status of a breakpoint.
Right now, we choose mongo_ce_CursorException for everything but status 80, which is a cursor timeout instead.
Since function entry breakpoints are handled by onOpcode, this just handles pushing the active line breakpoint
Take the last direct outer result, inject it into an optional / type, and make that a new direct outer result.
The To node already has an outgoing pointsTo edge, so the only thing we can do is to merge both content nodes.
The caller must have already opened the stream, and is responsible for closing it after finishing compression.
The destination type is nontrivial, and may be smaller than the source type, so RC identity cannot be assumed.
The enumeration was mapped to a high-level Swift type, and its elements were created as children of that enum.
The key is a load instruction, the value is the corresponding store instruction which stores the loaded value.
The lineFocus and and charFocus parameters are non zero only when the source location comes from a breakpoint.
The precedence-yielding parent is the nearest ancestor of 'expr' which imposes a minimum precedence on 'expr'.
The prop definition in traits conflicts with the definition in a class so make a different prop for each trait
The required availability, if the check failed due to the / witness being less available than the requirement.
The second case is because vector operations may change the base at each step if it is a defining instruction.
The threshold argument defines the tolerance to be used while comparing the image color and the color to crop.
The type constrained by a generic requirement should always be a generic parameter or associated type thereof.
There are no predecessors where it is not clear if they are dominated by a success or failure branch of DomBB.
There's no reason to do the same for nonzero_result because the only meaningful value remaining would be zero.
This Archetype comes from an enclosing context -- proceed to bind the generic params form all parent contexts.
This could be a single input tuple, with one or more arguments inside, but guaranteed to not have inout types.
This function is sometimes called more than once on the same buffer, such as during a hphprestart() or at EOF.
This happens if it can be proven that generated / checked_cast_br instructions cover all other possible cases.
This is generally only valid for specific kinds of / ObjC reference, like superclasses or category references.
This reanalyzes every function using our now-very-updated Index, and then runs optimize_func with the results.
This should be treated like an error, but we don't want clients like lldb to crash because of corrupted input.
This situation most commonly happens when we interpOne a RetC due to having a VarEnv or some other weird case.
Unfortunately, there's no way to do the equivalent of dlopen() on data within another file, or even in memory.
Unless you know an array can't cow, you don't know if the TRef will stay a TRef or turn back into a TInitCell.
Use the property accessors if the variable has accessors and this isn't a direct access to underlying storage.
Verify that the typehints for meth's parameters are compatible with imeth's corresponding parameter typehints.
Visits defs of an instruction, updates their liveness, adds live ranges, and adds Uses with appropriate hints.
WBMP ---- WBMP Level 0: B/W, Uncompressed This implements the WBMP format as specified in WAPSpec 1.1 and 1.2.
We add 1 to the cap, to make it use up all the memory to be allocated, if the original cap has been maximized.
We assume that the importer translates all of the following types directly to structs in the standard library.
We could be changing the value of any local, but we won't change whether or not they are boxed or initialized.
We do this in explicit closures, not autoclosures, because otherwise the transparence of autoclosures is lost.
We don't have profile data for this Switch, most likely because it saw some weird input type during profiling.
We don't need to autoload classes because it is impossible to have an instance of a class if it's not defined.
We don't want to report these errors immediately, as we want to gather them up and report them all at the end.
We don't want to send speculative (or worse, repeat) requests to the autoloader, so do our due diligence here.
We eventually want this to work) and make a reference to that declaration be an implicitly unwrapped optional.
We know that accesses to this element only access this element, / cross element accesses have been scalarized.
We may need to support this at some point, but currently only imported objc methods are returns_inner_pointer.
We need to allocate it in such a way that a single efree(varargs) in the caller will free all relevant memory.
We only ever look into singleton tuples on the RHS if we're certain that the LHS isn't also a singleton tuple.
We only handle the "if let" case right now, since it is vastly the most common situation that people run into.
We use a non-standard name for the type that states the association requirement rather than the concrete type.
We want to emit the arguments as fully-substituted values because that's what the specialized emitters expect.
We're potentially spilling to a different depth than the unwinder would've expected, so we need an eager sync.
When we initially add them here, no attempt is made to determine if the edge is actually possible to traverse.
You can do layout / with this, but the type isn't copyable, so most of the value / operations are meaningless.
diagnoseRedefinition - Diagnose a redefinition error, with a note / referring back to the original definition.
end anonymous namespace / Apply a merge function to two optional versions, returning the result / in Inferred.
isStructInit() is like isPackedInit(), but returns true if the keys are all static strings with no duplicates.
or a multi-character token with the first character being the one that we want to consume as a separate token.
r1 is used as rsp r27 is used as rone (value 1) r28 is used as rvmfp r29 is used as rvmsp r30 is used as rvmtl
valid headers consist of at least three tokens, with the first being a string and the second token being a ':'
we cannot optimize away the code inside if statement, because there may be a goto that goes into if statement.
(In particular early passes like optimizeExits that are looking for specific vasm sequences inside of a block.)
(In practice they should all be past---we don't currently ever remove below the top for actual stack elements.)
- Analyze each instruction in the block, determining what state the spill space must be in before executing it.
/ / If ObjC class is not exactly _ObjectiveCType, then / its conversion to a required _ObjectiveCType may fail.
/ Use-points are only values which are relevant for lifeness computation, / e.g. release or apply instructions.
Add the constraint that the index expression's type be convertible to the input type of the subscript operator.
Add the path to the resource dir to rpath to support using the dylib from the default location without copying.
Add to the current inlining set (immutably, so we only affect the set during this call and recursive subcalls).
AllocOptimize - This performs load promotion and deletes synthesized / allocations if all loads can be removed.
Also, the beginning of a year varied from one culture to another - not all accepted January as the first month.
Analysis whether it is safe to specialize this loop nest based on the / array.props function calls it contains.
Any block that ends with anything other than NoSpill needs to be walked to look for places to free spill space.
At least one round of SSA optimization and inlining should run after this to take advantage of static dispatch.
AvailableValues - This scoped hash table contains the current values of / all of our simple scalar expressions.
Binding an operator overloading to a generic operator is weaker than binding to a non-generic operator, always.
Bytecode regions for every function must not overlap and must exactly divide up the bytecode of the whole unit.
C LALR(1) parser skeleton written by Richard Stallman, by simplifying the original so-called "semantic" parser.
Call syntax forms a pattern if: - the callee in 'Element(x...)' or '.Element(x...)' references an enum element.
Calls to getMorePostData may invalidate data, so make a copy iff we're trying to coalesce the entire POST body.
Canonicalize a select_enum: if the default refers to exactly one case, then replace the default with that case.
Check the entire protocol conformance, ensuring that all / witnesses are resolved and emitting any diagnostics.
Checks whether the apply instruction is checked for overflow by looking for / a cond_fail on the second result.
Client code should use apache_request_headers() to retrieve the original headers if they are security-critical.
Clone the `unit's CFG starting at `startBlock', and rename SSATmps according to `tmpRenames' map along the way.
Copy it off the cleanup stack in case the cleanup pushes a new cleanup and the backing storage is re-allocated.
Creates a GET_MORE request  The following fields of cursor are used: - ns - recv.request_id - limit - cursor_id
Emit the Objective-C -dealloc entry point if it has something to do beyond messaging the superclass's -dealloc.
Everything will get a conservative scanner by default if someone actually tries to use the scanners at runtime.
Explicitly listing these constants is an unfortunate compromise for making the database file much more compact.
Expressions, patterns and decls cannot contain fallthrough statements, so there is no reason to walk into them.
FIXME: BinaryFileName below should instead be ld-style names for object files in archives, e.g. "foo.a(bar.o)".
FIXME: Can weaken input type, but we really don't want to get in the business of strengthening the result type.
FIXME: This is unsound, since type checking will turn other more complicated patterns into non-refutable forms.
FIXME: We can't use visitConformances() because there are no conformances for protocols to protocols right now.
FIXME: We need to add implicit initializers and dtors when a decl is touched, because it affects vtable layout.
Find a set of get_element calls that can be replace by the initialization / value of the array allocation call.
First, 510 dates from a table in "Jewish Calendar Mystery Dispelled" were calculated and compared to the table.
For AllocStacks that are only used within a single basic blocks, use the linear sweep to remove the AllocStack.
For data profiling, we need to find the actual class that a Func belongs to so we put such Funcs into this map.
For each block in the body, traverse from the innermost to outermost exception handler that includes the block.
For fixed-size enums, the currently inhabited case is a function of both the payload tag and the payload value.
For returns from generators, we follow the execution stack for now, and end up at the caller of ASIO or send().
For the purposes of handling and try-coverage diagnostics, being rethrowing-only still makes this a throw site.
Form the optional using address operations if the type is address-only or if we already have an address to use.
Function arguments can't alias with things that are known to be unambiguously identified at the function level.
Helper for the freeLocalsHelpers which does the actual work of decrementing a value's refcount or releasing it.
However, if the layout has a suffix layout, the base layout is only applied once on the beginning of the block.
If caller is a resumable (aka a generator) then whats likely happened here is that we're resuming a yield from.
If every value in values is equivalent and safe to sink through a phi, return a model instruction to be copied.
If it has a result, remember that we saw one, but keep traversing in case there's a no-result return somewhere.
If it looks like we have an AST, set the source file kind to SIL and the name of the module to the file's name.
If no ActRec was pushed for the builtin function inspect the caller to determine if the call used strict types.
If one type is a subtype of the other, but not vice-versa, we prefer the system with the more-constrained type.
If our contextual type is an optional, look through them, because we're surely initializing whatever is inside.
If the argument being specified is actually varargs, then we're just specifying one element of a variadic list.
If the first side-effect instruction in this block is a cond_fail that / is guaranteed to fail, it is returned.
If the selector did not provide an index for the error, find the last parameter that is not a trailing closure.
If the stack pointer tmps are different, clear the tracked value (we can make a new one, given fp and irSPOff).
If the superclass constructor is a convenience initializer that is inherited into the current class, it's okay.
If the test class cannot be extended, we only need to do the same-class check, never the strict-subclass check.
If the two declarations occur in the same source file, make sure we get the diagnostic ordering to be sensible.
If the type is nontrivial, keep the context alive since the field depends on the context to not be deallocated.
If the use is a conditional branch/switch then look for an incoming edge that is dominated by DominatingSuccBB.
If the use is a struct_element_addr, add it to the worklist so we check if it or one of its descendants escape.
If there multiple regions starting at the lowest bytecode offset, pick the one with the largest profile weight.
If this is a copy_addr to a delegating self MUI, then we treat it as a self init for the purposes of testcases.
If this is a function conversion that discards throwability or noescape, emit a specific diagnostic about that.
If this is a statement or expression at the top level of the module, Parse it as a child of a TopLevelCodeDecl.
If this job or the previous job that ran on this thread have a custom initial document, make sure we do a reset
If we already have seen a store on this BB, or if the / slot does not match the entry slot, the analysis fails.
If we are able to promote at least one capture of the alloc_box, then add the promotable index to the main map.
If we are changing either the scope or the attributes of the closure, we need to re-scope its Closure subclass.
If we are trivial, there is no difference in between +1 and +0 since a trivial object is not reference counted.
If we didn't leave the bit alone in this situation, the lower bound could end up too high after a later IncRef.
If we don't know, we still have to emit a runtime check because src might be a subtype of the specialized type.
If we inferred a base name, use that to form the fully qualified name, otherwise treat it as an anonymous type.
If we were asked to ignore top-level optional injections, mark the top-level injection (if any) as "diagnosed".
If we're inlining into a normal apply and the callee's entry block ends in a return, then we can avoid a split.
If we're remote debugging, this proxy will go unused until we finally stop it when the user quits the debugger.
If we've ended up trying to assign an inout type here, it means we're missing an ampersand in front of the ref.
In an affine transform composed of scaling, rotation, shearing, and translation, returns the amount of scaling.
In the AST form, this will look like an OptionalEvaluationExpr with an immediate BindOptionalExpr inside of it.
It is important that the run time of this function is dependent only on the length of the user-supplied string.
It turns out that the actual msgsnd() and msgrcv() calls work fine with the same structure that other OSes use.
It would be nice to extend the front of the range to show where inout is, but we don't have that location info.
Just borrow the previous self value, since it will be guaranteed up until the 'super.init' or 'self.init' call.
License to copy and use this software is granted provided that it is identified as the "RSA Data Security, Inc.
Loads of a struct_element_addr of an argument get replaced with struct_extract of the new object type argument.
MInstrs can throw in between each op, so the states of locals need to be propagated across factored exit edges.
Make sure materializeForSet is available enough to access the storage (and its getters/setters if it has them).
Map an indirect return for a type SIL considers loadable but still requires an indirect return at the IR level.
Mutation would not / prevent make_mutable hoisting, but it would interfere with / isRetainReleasedBeforeMutate.
Note that the empty tuple type is assignable but usually isn't an l-value, so we have to be conservative there.
Note: dynamically-dispatched properties have their getter and setter added to the vtable when they are visited.
Notice that any callee main block must have a callee main block successor or be the terminal callee main block.
Ok, at this point we know that we can construct our aggregate projections from our list of address projections.
Otherwise PackedArrayInit can't be used because non-numeric keys are preserved even when preserve_keys is false
Otherwise, make a pass over the path looking for available concrete entries in the IGF's local type data cache.
Pre-check the expression, validating any types that occur in the / expression and folding sequence expressions.
Prepare the variadic "arguments" as single +1 indirect parameters with the array's desired abstraction pattern.
Produce a function pointer, suitable for invocation by / objc_msgSend, for the given destructor implementation.
Propagate the new access kind from the OVE to the original existential if we just set or changed it on the OVE.
Rebuild the ParenTypes for the given expression, whose underlying expression / should be set to the given type.
References to properties with accessors and storage usually go through the accessors, but sometimes are direct.
Reorder and rewrite the most nested concat subsequence, and append it to the previous subsequence in the stack.
Replace the cleanup with a new one on the superclass value so we always use concrete retain/release operations.
Require 'rethrows' on the override if it was there on the base, unless the override is completely non-throwing.
Resolve all components up to the last, keeping track of value-type logical properties we need to write back to.
Retrieve the object type for a 'self' parameter, digging into one-element / tuples, inout types, and metatypes.
Returns true if there is any availability attribute on the declaration / that is active on the target platform.
Shouldn't happen because we only call genObject() on offsets already visited and verified to be an object type.
Some values that were refcounted may become non-refcounted after conversions, and we can't DecRef things twice.
Sort blocks in reverse postorder, and try to arrange fall-through blocks in the same area to be close together.
TODO(t2598894): We do this for consistency with the old guard relaxation code, but may change it in the future.
TODO: Bridge object conversions imply a masking operation that should be "hella cheap" but not really expensive
TODO: If Index equals zero, then we know that the two lists have nothing in common and should return unrelated.
TODO: t5226715 We shouldn't need to check s_defaultLocale here, but right now this is called for every request.
The / subclass user then just calls getTargetOffset(), which performs / the layout and returns the found index.
The block storage consists of the block header (ObjCBlockStructTy) followed by the lowered type of the capture.
The client uses the prefix of the argument following the command to narrow down the list displayed to the user.
The default on linux for the newly allocated memory is read/write/exec but on some systems its just read/write.
The dest of the CheckType (which would've been Bottom) is now never going to be defined, so we return a Bottom.
The first category for a class in a module gets the module's / name as its key, e.g., NSObject (MySwiftModule).
The generator itself is still holding a reference to them though, so null out the key/value to free the memory.
The getRawValueExpr should remain the untouched original LiteralExpr for serialization and validation purposes.
The human readable name returned / by swift_getTypeName() is non-unique, so we used mangled names / internally.
The inputs vector is only used for deciding when to break the tracelet, which can never happen for these cases.
The linkage of template instantiations need to be fixed up depending on the linkage of its template parameters.
The location of this diagnostic points to the beginning of the first / token that the parser considers invalid.
The negative answer does not always mean that there is no conformance, unless it is an exact match on the type.
The non-reentrant case occurs when a non-async or async generator is resumed via ContEnter or ContRaise opcode.
The second axis essentially deals with how the case discriminator, or tag, is represented within an enum value.
The state variable is passed in to allow a function like fgetss to maintain state across calls to the function.
The string we're using as a key must be static, because we're using it as a key in the cache (across requests).
There are three cases we need to handle here: parameters, initialized (or bound) decls, and uninitialized ones.
There's no point in performing the fast-path token check here because we've already checked the cache variable.
Therefore, move the reference from tvRef to tvRef2, so that the reference will be released one iteration later.
This can happen when type-checking a different conformance deduces a different type witness with the same name.
This class transforms a hoistable loop nest into a speculatively specialized / loop based on array.props calls.
This is because we rely on loop canonicalization to canonicalize / multiple backedge loops into separate loops.
This is equivalent to Zend's zend_objects_store_del_ref_by_handle_ex() in the case where the object is deleted.
This is necessary so that the boost command line parser doesn't choke on args intended for the PHP application.
This is not a correctness assertion, but we want to know if we get it wrong because it'll be a subtle perf bug:
This is notably *not* the semantics of the x86 shift instructions, so we need to do some comparison logic here.
This keeps track of instructions in the use list that touch multiple tuple / elements and should be scalarized.
This probably only saves a few stat system calls at the start of each log period, but it might as well be done.
This uses the dominator tree, since the a parent loop's header must dominate the headers of its children loops.
Thus it is using return false to mean two different things, error a failure occurred and this is a declaration.
Try to construct a fix it using for-each: Verify that there is only one loop variable, and it is declared here.
Unfortunately, there is no initialization order guarantees for the statically and globally constructed objects.
Unlike DefInlineFP it does not load the SpillFrame, which we hope to push off the main trace or elide entirely.
Update the callees for each method of a given class, along with / all the overridden methods from superclasses.
Use the name of the given witness table to lookup the partially deserialized value from the witness table list.
Walk through the arguments, determining if any were bound to parameters out-of-order where it is not permitted.
We are just doing this to avoid extending lifetimes across php calls, which currently always leads to spilling.
We are only invoking ::fixup() from contexts that were known to be called out of the TC, so this cannot happen.
We cannot use ConvObjToBool here because that has special behavior in certain cases, which we do not want here.
We consider incompatible function types to be near so that functions and non-function types are considered far.
We do this by looking up the exiting blocks and finding the outermost region which the block is a subregion of.
We emit the counter for exiting the do-block here, as we may not have a valid insertion point when falling out.
We have found our target if the range of the node we are visiting is contained in the range we are looking for.
We know the resulting Map will simply be a copy of this Map, so we can just call Clone() and return early here.
We know the resulting Set will simply be a copy of this Set, so we can just call Clone() and return early here.
We may have changed either dst.value or dst.type in a way that could fail to preserve LocationState invariants.
We need to let the ObjC runtime clean up any associated objects or weak references associated with this object.
We share type infos for different instantiations of a generic type when the archetypes have the same exemplars.
We should never require phis going into a catch block, because they may not have multiple predecessors in HHIR.
We're assigning a register to an interval with multiple ranges, but the vreg isn't live out of the first range.
When translation punts due to hitting limit, will generate one more translation that will call the interpreter.
When we find the nearest color for a cell, its colormap index plus one is recorded in the cache for future use.
__swift_assign_existentials_N is the well-known function for assigning existential types with N witness tables.
allow for arrays with one element, no allowance for arrays with none but probably not required, gerrit thomson.
anon namespace Run a DFS over the heap, remember the first pointer id to each reachable node, aka its "parent".
check whether the current request was referred to by an external site which invalidates the previously found id
const TypedValue* NvGetStr(const ArrayData*, const StringData*)  Lookup a value in an array using a string key.
getInfixData - If the specified expression is an infix binary / operator, return its infix operator attributes.
getLivenessAtInst - Compute the liveness state for any number of tuple / elements at the specified instruction.
if there is no content type, default to text/plain, but use multipart/digest when in a multipart/rfc822 message
invoking a file, with NO json encoding "int(100)" is printed twice, one from warmup, and the other from include
need to do slightly different things, based on client/server method, so lets remember which method was selected
tokens may be NULL, in which case the number of tokens are counted, allowing the caller to allocate enough room
- consumes reference of the given Exception object - produces reference for the returned StaticWaitHandle object
/     * Each CodeCompletionString is a length-prefixed array of fixed size /       CodeCompletionString::Chunks.
/ / If the callee that we are partially applying to create a box/closure / isn't generic, then the map is empty.
/ / This routine promises to return a non-null result unless there was / a code-completion token in the pattern.
/ We would have trapped either when overflowing or when accessing an array / out of bounds in the original loop.
7-bit unsigned int (NOTE: not used for the sole int value due to the compatibility requirement above) - 10......
A machine can belong to a tier, which can overwrite various settings, even if they are set in the same hdf file.
Add the terminating null here since it wasn't added incrementally above once the whole string has been composed.
All other function signature optimization is done later by modifying the function signature elements themselves.
Allocate a new ArrayData with the specified capacity and dup all the elements (without copying over tombstones).
Any refinement contexts introduced in the statement condition will end at the end of the last condition element.
As a result, substitutions provided by AI are for Member, whereas substitutions in ClassInstanceType are for D2.
Bind the 'Self' type from the first extension to the type parameter from opening 'Self' of the second extension.
Block any threads that might be interrupting from communicating with the client until we're done with this poll.
Cache the entry under the original type and the exemplar type, so that we can avoid relowering equivalent types.
Check if the current predicted type for the location in ii is specific enough for what the current opcode wants.
Check if the method implementation is the same in a super class, i.e. it is not overridden in the derived class.
Check whether the module in which the declaration resides has a module prefix and will map into Swift as a type.
Check whether this is the depth 0, index 0 generic parameter, which is / used for the 'Self' type of a protocol.
Create a BB argument or 'unchecked_take_enum_data_addr' instruction to receive the enum case data if it has any.
Create a repl metavariable to capture the whole thing so we can reference it, then assign that into the pattern.
Create an address value for an alloc_stack, consisting of a container and / the address of the allocated buffer.
Create the hardware counter before reading options, so that the main thread never has inherit set in server mode
Currently unused except for debug printing:  Memory locations that we saw PureLoad instructions for in the loop.
Determine whether the given method potentially conflicts with the / setter for a property in the given protocol.
Do a local lookup into the function, using the end loc to approximate being able to see all the local variables.
Do not get RC identical value here, could end up with a crash in replaceAllUsesWith as the type maybe different.
Each block that has a use of the owning pointer has the value live-in unless it is the block with the alloc_box.
Each runtime function definition in RuntimeFunctions.def should indicate if it requires a global referencing it.
Emit a materializeForSet operation that projects storage, assuming / that no cleanups or callbacks are required.
Emit the condition, along with the "then" part of the if properly guarded by the condition and a jump to ContBB.
Even if we're processing the top-level module like any other, we may still want to include non-exported modules.
FIXME: We also need to consider if the enum is resilient, in which case we're never guaranteed to be exhaustive.
Find the initialization point of the / copy's source and replace the initializer's address with the copy's dest.
For a non-subscript declaration found via dynamic lookup, strip off the lvalue-ness (FIXME: as a temporary hack.
For fixed-layout cases this isn't necessary (except for reflection, but it's OK if reflection is a little slow).
For primitive return types (int, bool, double), and returnByValue, the return value is already in dstReg/dstType
Given a reference to nominal type metadata of the given type, / derive a reference to the nth argument metadata.
HPHP logs may need to access data in ServerStats, so we have to clear the hashtable after writing the log entry.
If Value is not null, collate all users of Value the appropriate child nodes and add such items to the worklist.
If ctx is the class that first declared this method, then we know we have the right method and we can stop here.
If one of the predecessors has a phi state with this same block, it'll find the dst we just added in phi_record.
If so, dig into them to produce better location info in the diagnostics and be able to do more precise analysis.
If the current loop is only a small part of its outer loop, we don't take the outer loop that much into account.
If the identifier contains non-ASCII character, we mangle  with an initial X and Punycode the identifier string.
If the ivar's size doesn't match the field layout we computed, overwrite it and give it better type information.
If the last fixed-offset field is also fixed-size, we can statically compute the end of the fixed-offset fields.
If the member reference expression failed to type check, the Expr's type does not conform to the given protocol.
If the pattern didn't get a type or if it contains an unbound generic type, we'll need to check the initializer.
If the property is a generic requirement, allow aliases, because it may be conformed to using a stored property.
If the subject is a simple variable, then we have to evaluate it every time we compare against a case condition.
If there's no fp, we've already executed a RetCtrl or similar, so there's no reason to try to jump anywhere now.
If there's only 1 byte of meaningful bits in the mask, we can adjust the pointer offset and use testbim instead.
If this collection is an OuterHandle, then we need to do a full check on this array for things like circularity.
If this element is resiliently- or dependently-sized, record that and configure the ElementLayout appropriately.
If this instruction defines the base of a location, then we need to invalidate any locations with the same base.
If this is a normal expression (not an expr-basic) then trailing closures are allowed, so this is obviously one.
If this is a potentially-escaping closure expression, start looking for references to self if we aren't already.
If we are merging already serialized modules with local decl contexts, we handle them here in a similar fashion.
If we couldn't get the name of the callee, then it must be something of a more complex "value of function type".
If we didn't consume any tokens failing to parse the expression, don't put in the source range of the ErrorExpr.
If we ever change ConcatStrFoo not to decref its sources we'll need to address this (or punt on a boxed source).
If we found a projection path, but there are no projections, then the two loads must be the same, return PrevLI.
If we get back a nullptr, then we know that the BB belongs to the function region and is also not a loop header.
If we have an inclusive range "low...up" the loop exit count will be "up + 1" but the overflow check is on "up".
If we leave this frame in the interpreter, we might be skipping a catch block that our caller expects to be run.
If we miss an increment from any of the payloaded case there is nothing we can do here, so skip this enum value.
If we run into a type we don't recognize, there's either been some corruption or we've messed up on the parsing.
If we're just setting an error, double-check that nobody has introduced a type declaration since we deduced one.
If we're missing semi-colons we'll already be erroring out, and this may not even have been intended as C-style.
If we're only dealing with two containers and if they are both arrays, we can avoid creating an intermediate Set
If you manually call dispose on the Java object, the native object will be deleted synchronously on that thread.
Imports from -import-name such as Playground auxiliary sources are treated specially by applying import depth 0.
In contrast to load instructions, we first collect all read-only function calls and add them later to SafeReads.
In particular, the "top" of the record is 16 bytes after rvmfp(), and the saved fp and return addr are as usual.
In practice, there should generally only be one item and it should be a string, but maybe that'll be extended...
Invert the P-box permutation, and convert into OR-masks for handling the output of the S-box arrays setup above.
It is possible and likely that another statically initialized object will call methods on it to create counters.
It is supposed to run very / late in the pipeline, after devirtualization, inlining and specialization / passes.
It should have pushed LdMem and IncRef to each successor block, with the narrowed type on the fallthrough block.
Likewise, DWARF as no concept of linkage, but the linkage is needed to know which types are actually equivalent.
Look for Foo::Foo() (old style constructor) declared in this class and deprecate warning if we are in PHP 7 mode
Metatypes of nominal types and archetypes have instance methods and static members, but not instance properties.
NB: This maps the region entry block to a new IR block, even though we've already constructed an IR entry block.
NOTE: If this occurs frequently, maybe we can have a release(Obj, N) API to drop multiple retain counts at once.
NOTE: the purposes are added as integer keys - the keys match up to the X509_PURPOSE_SSL_XXX defines in x509v3.h
No store besides the initialization of a "let"-variable can have any effect on the value of this "let" variable.
Note that an implicit getter may not have the body synthesized in case the owning PatternBindingDecl is invalid.
O(N) checks are available if you want them for debugging, but they are too slow for general use in debug builds.
Okay, the function has some side effects, if it doesn't capture the object argument, at least that is something.
One-to-one case insensitive map, where the keys are static strings and the values are some kind of borrowed_ptr.
Only the first backend job owns the compilation job (to prevent multiple de-allocations of the compilation job).
Ooops, the custom scanner function doesn't have a symbol, which probably means it doesn't have external linkage.
Peephole: instead of materializing and then assigning into a translation component, untransform the value first.
Pick up CondCode arguments first---vasm may optimize immediate loads into operations which clobber status flags.
Postfix expression is located on a different line than the code completion token, and thus they are not related.
Produce a function pointer, suitable for invocation by / objc_msgSend, for the given constructor implementation.
Property types for public static properties, declared on this exact class (i.e. not flattened in the hierarchy).
Put the block back at the end of workQ, since it may become reachable after processing some of the other blocks.
Remove the Content-MD5 header coming from PHP if we compressed the data, as the checksum is going to be invalid.
Return a pattern corresponding to the formal method parameters of / the current C function imported as a method.
Returns a new context to be introduced for the declaration, or nullptr / if no new context should be introduced.
Returns whether all the type and reffiness guards for `block' are satisfied by 'bd' and its corresponding block.
Set of blocks that branch to/reach this basic block P and are immediate successors of a switch_enum instruction.
Set the assert configuration according to the optimization level if it has not been set by the -Ounchecked flag.
Since this sequence is directly in-line, rip-relative like this is more compact than loading a 64-bit immediate.
Since we know all the locations accessed in this function, we can resize the bit vector to the appropriate size.
Since we're just going to forward our args directly to the initializer, don't allocate local variables for them.
So convert it to a number if it's a number or bool or null and to a string if it's anything else except arrays .
Some callers have caused the server to start executing more PHP, so update the machine/client state accordingly.
Specifically keep track of Objective-C initializers, which can come from either init methods or factory methods.
StackNode - contains all the needed information to create a stack for doing a depth first traversal of the tree.
SwitchProfile is variable-sized so we have to manually allocate it and pass the buffer to TargetProfile::data().
TODO: Although runtime checks are not required, we get them anyway when asking the runtime to perform this cast.
TODO: Reabstract the lvalue to match the abstraction level expected by the inout address conversion's InOutType.
TODO: We should be able to flat-out replace the select_enum instruction with the selected value in another pass.
The 'Z' type specifier in zend_parse_parameters() demands a zval** which remains valid until the caller returns.
The SIL verifier walks over a SIL function / basic block / instruction, / checking and enforcing its invariants.
The caller must have already opened the stream, and is responsible for closing it after finishing decompression.
The function is 'rethrows', and it was passed a default / argument that was not rethrowing-only in this context.
The individual optimizations called here are expected to change block boundaries and potentially add new blocks.
The insertion point is left in the block where the / condition has matched and any bound variables are in scope.
The presentation requires an / introduction version and does not support deprecation, obsoletion, or / messages.
The required accessibility, if the check failed due to the / witness being less accessible than the requirement.
Then, if we have an int and the underlying type is a string, convert it to a string so the output type is right.
Therefore at the time of emitting the actual goto instructions we can reliably tell which finally blocks to run.
These are not commonly used and cause noise and confusion when showing among the members of the underlying type.
These are private so that we don't accidentally copy and later double-delete one of of the pointers in children.
These explosions must follow the same schema as ClassExistentialTypeInfo, i.e. first the value, then the tables.
These type-scanners will then be compiled into a shared object which can be loaded at start-up if GC is enabled.
This enables some really simply local / peepholing in cases where you can't just do that with the lowered value.
This function inspects the instruction and prepares it for potentially being inserted to the instruction stream.
This generates a movq x86 instruction, which zero extends the 64-bit value in srcReg into a 128-bit XMM register
This implies that a ref count operation on the aggregate is / equivalent to a ref count operation on this field.
This little helper function is used to consume a separator comma if present, it returns false if it isn't there.
This may be different than the size because of flexible array members (which sometimes start within the object).
This reduces the recommended histogram size from 256Kb to 128Kb, which is a useful savings on PC-class machines.
This variable's lifetime needs to be for the whole function, but is only valid with Objective-C interop enabled.
Tishri 1 will be the day of the molad unless it is delayed by one of the following four rules (called dehiyyot).
To be consistent with PHP5, we need to make a distinction between null strings and empty strings for the prefix.
To maintain a fully accurate histogram, we'd need to allocate a "long" (preferably unsigned long) for each cell.
Translate from the AST associativity enum to the Serialization enum / values, which are guaranteed to be stable.
Try to load the script from the network if script is a URL NB: For security, this will only work in debug builds
Use a set of ad hoc rules to tell whether we should run a pessimistic / one iteration data flow on the function.
We also do not handle indirect results currently in the closure so make sure that does not happen at this point.
We can omit the uninit check for properties that we know may not be uninit due to the frontend's type inference.
We currently actually check their persistent bit here, which will let both static and uncounted strings through.
We do a little bit-flipping magic, repeating the MSB as the LSB, to ensure that 0 maps to 0 and 127 maps to 255.
We have a safe container if the array container is passed as a function argument by-value or by inout reference.
We have special profiling and logic to decide which arcs from a Switch are eligible for inclusion in the region.
We keep uses at the end of the first split because we know that `r' is free up to /and including/ that position.
We know we Foo:Foo() since we are in this if statement Now, if the PHP 7 runtime option is set and the class: 1.
We need the loop in case the first pattern-character in the candidate is not the first character in the pattern.
We need to emit the debug info for the function arguments after the function prologue, after the initialization.
We only need to set interface vtables for classes that can be instantiated and implement more than 0 interfaces.
We still have to tell the underlying DateTime the timezone incase they call setTimestamp or something else later
We use the original convention, except that we have an invariant that direct trivial results are always unowned.
What the user expects is a "step-in" into pseudo-main, but the implementation otherwise would just step over it.
When building the name for debugging purposes, include the protocol into which the associated type was resolved.
When no override determined the Objective-C name, look for requirements for which this declaration is a witness.
When this happens with an explicitly-written super.init or self.init invocation, return early if we did get nil.
When we have an associated type, the base type conforms to the given protocol, so use the type witness directly.
Whether or not the context class has a private method with the same name as the the method we're trying to call.
`InteriorAddress` is true if the current address projection already includes a struct/ref/tuple element address.
checkByRef() returns true if the parameter specified by argNum is pass by reference, otherwise it returns false.
create a bson code with scope  type: 15 4 bytes total size 4 bytes cstring size + NULL cstring bson object scope
fixupWork() takes an `ar' argument and syncs VM regs for the first TC frame it finds in the call chain for `ar'.
for this perpouse we allocate additional PHP_IMAP_ADDRESS_SIZE_BUF bytes by default this buffer is 10 bytes long
getBuiltinBaseName - Decode the type list of a builtin (e.g. mul_Int32) and / return the base name (e.g. "mul").
if "length" position is negative, set it to the length needed to stop that many chars from the end of the string
need to make sure this is NULL, in case a fatal errors occurs before it's set inside really_register_bound_param
- Finally, the exit hook for the returning function can throw, but this happens last so everything is destructed.
/ / FIXME: Once Self has been removed in favor of opened existential types / everywhere, remove support for self.
/ / Formally, an ApplyExpr in the AST always has a single argument, which may / be of tuple type, possibly empty.
/ / NOTE: This returns null if a varargs parameter exists in the list, as it / cannot be forwarded correctly yet.
/ / TODO: Sinking retains can block releases to be hoisted, and hoisting / releases can block retains to be sunk.
/ / This operation corresponds to a standard "dot" lookup operation like "a.b" / where 'self' is the type of 'a'.
/ / This routine diagnoses a reference to an unknown type, and / attempts to fix the reference via various means.
/ The sequence is traversed inside out, i.e. / starting with the innermost struct_element_addr / Move into utils.
/ To do it, try to back-propagate the Condition / backwards and see if it is actually equivalent to DomCondition.
@pinstr should be pointing to the beginning of the li32 block TODO(gut) use Decoder, but for now, do it hardcoded
A list of errata for this book has been posted to the sci.crypt newsgroup by the author and is available for FTP.
Added hdpi and vdpi to support images at non-screen resolutions, i.e. 300 dpi TIFF, or 100h x 50v dpi FAX format.
Adding 5 to the font index so we will never have font indices that overlap with the old fonts (with indices 1-5).
All no-payload cases have the same payload tag, so we can just use the payload value to distinguish between them.
All types aside from integer and string will be cast to string, and we also convert int-like strings to integers.
An initialized 'let' property has a single value specified by the initializer - it doesn't come from an argument.
An obvious improvement would to output an extra "temporary" attribute, but for now this logic just follows xdebug
Any output from them should be ignored as it doesn't make sense to try and send data after the request has ended.
As a special case, diagnose conversion to NilLiteralConvertible, since we know this is something involving 'nil'.
As will all I/O modules, most functions are for local use only (called via function pointers in the I/O context).
At most one ASet will be supported by any location at a time, to fit the "exclusivity" condition on lower bounds.
At the end of the request we clear the m_createdFunc map, JIT'ing the unit would be a waste of time and TC space.
Before being actually used, hphp_compiler_parse must be called with a NULL `code' parameter to do initialization.
But in php5 xdebug, property_value is exactly the same as property_get, without support for the constant context.
But we can do it anyway when we need more free memory, e.g., when a new instance of the server is about to start.
Cache missed - we need to look through all of the assocty sections for all images that we've been notified about.
Can only process new data if we aren't currently waiting on a call to readNext() to free up the key/value beffers
Catch blocks are special: we need to sync vmfp() and vmsp() so that the unwinder knows to free the inlined frame.
Check function calls, looking through implicit conversions on the function and inspecting the arguments directly.
Check if the object "content", i.e. a pointer to one of its stored properties, can escape to the called function.
Check to see if any loaded subelements are being used, and if so, explode the copy_addr to its individual pieces.
Check to see if the instruction immediately before the insertion point is a copy_addr from the specified operand.
Closure classes must be unique and defined in the unit that uses the CreateCl opcode, so resolution must succeed.
Collect conformances by looking up the conformance from replacement / type and protocol decl in GenericParamList.
Compute the page and the start/end indices Note that php xdebug doesn't support pages except for at the top level
Contents is __FreeBSD_version, whose relation to OS versions is defined by a huge table in the Porter's Handbook.
Create a call of _bridgeToObjectiveC which converts an _ObjectiveCBridgeable / instance into a bridged ObjC type.
Create an ErrorExpr to tell the type checker that this return statement had an expression argument in the source.
Dependent enum types need their own implementation if any element payload type might need its own implementation.
Diagnose if we have local captures and there were C pointers formed to this function before we computed captures.
Don't walk into subscript expressions - to do so would risk factoring the index expression into edge contraction.
Duplicate the destination block into this one, rewriting uses of the BBArgs to use the branch arguments as we go.
FIXME: Actually do the lookup in these contexts, because if we find something, we don't need to continue outward.
FIXME: Thread a branch through the cleanups if there are any active cleanups and we have a valid insertion point.
FIXME: We need an accessibility value to check against, so we pull one out of some random VarDecl in the pattern.
FIXME: With some changes to their callers, all of the below functions could be re-worked to use emitInjectEnum().
Filter out anything that couldn't satisfy one of the requirements or was used to satisfy a different requirement.
For allocating constructors, 'self' is a metatype, not the 'self' value formally present in the constructor body.
For each nested simulator (corresponding to nested VM invocations), look at its PC to find a potential fixup key.
For now, we assume that relocation is only required when the parent class has prefix matter we didn't know about.
For the DWARF output we want to mangle the type alias + context, unless the type alias references a builtin type.
For there to be a superclass relationship, the potential subtype must be a class or superclass-bounded archetype.
Function-like declarations do, but they should have / polymorphic type and therefore don't need specific binding.
Given a call to a helper function that produces a result / into its first argument, set attributes appropriately.
Hack: If the name of the constant being defined is itself a constant expression, assume that its not yet defined.
If "length" position is negative, set it to the length needed to stop that many chars from the end of the string.
If buildArgumentForwardingExpr failed, then it was because we tried to forward varargs, which cannot be done yet.
If the attribute is only valid on one kind of declaration (which is pretty common) give a specific helpful error.
If the best so far is not from a protocol, or is from a protocol that inherits this protocol, we have a new best.
If the class is generic, the superclass type may contain generic type parameters from the signature of the class.
If the enum is loadable, it's better to do this directly using values, so we don't need to RMW tag bits in place.
If the input day is in the third month, it doesn't matter which molad is returned, because both will be required.
If the input is too short for this to be a four-byte encoding, or it isn't one for real, just copy it on through.
If the layout of the class metadata is statically known, then there should be a fixed offset to the right offset.
If the memory object has nontrivial type, then any destroy/release of the memory object will destruct the memory.
If the month is 8 (Nisan) or greater, the calculation is simple subtraction from beginning of the following year.
If the retain value's argument is not the switch's argument, we can't do anything with our simplistic analysis...
If the store dest cannot alias the pointer in question, then the specified value cannot be modified by the store.
If the tuple pattern had a label for the tuple element, it must match the label for the tuple type being matched.
If the type does not conform to StringLiteralConvertible, it should be ExtendedGraphemeClusterLiteralConvertible.
If the type was previously uninteresting, but the new layout makes it interesting, mark it as pointer followable.
If the unbound decl hasn't been validated yet, we have a circular dependency that isn't being diagnosed properly.
If the upcast is used by a class_method + apply, then this is a call of a superclass method or property accessor.
If there are enough extra inhabitants for all of the cases, then the size of the enum is the same as its payload.
If this IR program contains a return sequence, it might DecRef the frame context below one (possibly freeing it).
If this assert fires, it means we have probably synthesized an implicit declaration without location information.
If this extension shows up in the list of extensions not yet included in the lookup table, there's nothing to do.
If this is a closure expression that did not have any named parameters, generate the anonymous variables we need.
If this is a copy addr that doesn't intersect the loaded subelements, just continue with an unmodified load mask.
If this is a method whose result type has a dynamic Self return, replace DynamicSelf with the actual object type.
If this is a partial store into a struct and the whole struct hasn't been initialized, diagnose this as an error.
If this is the 'self' argument of a non-mutating method in a value type, suggest adding 'mutating' to the method.
If this is the payload of an enum, and the type is a single-element labeled tuple, treat this as a tuple pattern.
If we allocated an initContext and the expression had a closure in it, we'll need to keep the initContext around.
If we are looking at the init method for a root class, just walk the MUI use-def chain directly to find our uses.
If we don't have a type for the expression, then we cannot use it in conversion constraint diagnostic generation.
If we got a correct shuffle, we can perform the analysis of all of the input elements, with their expected types.
If we have resolved this nested type to more than one associated type, create same-type constraints between them.
If we just filled the map with 32 elements we'd grow because of not enough tombstones which masks the issue here.
If we type checked the result but failed to get a usable output from it, just pretend as though nothing happened.
If we're already substituting a concrete type, mark this potential archetype as having a recursive concrete type.
If we're expecting an initializer with a specific kind, and this is not an initializer with that kind, remove it.
If we're parsing an expression as the body of a refutable var/let pattern, then an assignment doesn't make sense.
If wes till don't know, check whether we have a class with a superclass: it gets an implicit chained initializer.
Implementation strategy for no-payload enums, in other words, 'C-like' / enums where none of the cases have data.
Incrementally incorporate the difference between the previous and current deltas into the memory usage statistic.
It does this by tracking all types which are allocated via the allocation functions via the type-index mechanism.
It's important for good code layout that the insertion point be left in the original function section after this.
Keep track of the fact that V is live and add it to our worklist so that we can process the values it depends on.
Libraries are not sorted in the topological order of dependencies, and we don't know the dependencies in advance.
Look through uses of the alloc box the load is loading from to find up to one store and up to one strong release.
Magic entries with no description get a bonus because they depend on subsequent magic entries to print something.
Map outer initializations into a tuple of inner initializations: - fill out the initialization elements with null
Nearly all callers of setValue() for stack slots represent a modification of the stack, so it sets stackModified.
None of these should have native-data, because if they do, the mapped header should be for the NativeData prefix.
Note also that we might be in a situation where one of the STags is representing a union of more primitive STags.
Note that specifically require a class or class-constrained archetype here, because archetypes cannot be bridged.
Note that the function has a dynamic Self return type and set the return type component to the dynamic self type.
One-to-many case insensitive map, where the keys are static strings and the values are some kind of borrowed_ptr.
Optionally, the connect can be made asynchronously, which will implicitly enable non-blocking mode on the socket.
Otherwise, if the original parameter type was not a throwing function type, it does not contribute to 'rethrows'.
Otherwise, if the type is an unbound generic of the context type, use the context type to resolve the parameters.
Otherwise, if this is some other pointer, we can only ignore it if we can prove that the two objects don't alias.
Otherwise, it really does look like this comma continues the pattern clause, so eat it and parse the next clause.
PHP7 falls through to the IEEE division semantics below (and doesn't side exit since the type is still a double).
Replace all loads from the / global address by invocations of a getter that returns / the value of this variable.
Replace container box value arguments for the cloned closure with the /    transformed address or value argument.
Save the current options, and set things up so that systemlib.php can be read from and stored in the normal repo.
Scanning the vector is not terribly efficient, but this doesn't happen often when the server is in a steady state
Since resumables are stored on the heap, we need to go back in the callstack a bit to find the base of the stack.
Since they are both optional, it's really hard to express that there can be either ordering in the bison grammar.
Some of them may end up getting default-initialized, but regardless, we need to make space for them on the stack.
TODO: This is heinous - the same thing is happening in clang, but the API really needs to be cleaned up for both.
TODO: Write a strongly-worded letter to the person that came up with a pair of functions spelled "get" and "Set".
TODO: we could make the logic here more complicated to handle each type of instructions in a more precise manner.
Take a value out of the source inner result address, reabstract / it, and add it as the next direct outer result.
That said, if those checks are determined to be removable, we can remove this as well per rdar://problem/18801263
The call from enterTCHelper() that got us into the TC was popped off the RSB by the ret that got us to this stub.
The error at a given pixel is propagated to its not-yet-processed neighbors using the standard F-S fractions, ...
The index of the first "physical" parameter from paramTys/FI that corresponds to a logical parameter from params.
The intent was to create a new calendar system that was based on scientific principals, not religious traditions.
The mandatory inliner drops debug_value_addr instructions when inlining, as if it were a "nodebug" function in C.
The metatype represents an arbitrary named type: dig through to the declared type to see what we're dealing with.
The object file we are doing lookups in -- either the binary itself, or a particular slice of a universal binary.
The remainder will be in r1, the upper 16 bits of the quotient will be in d2 and the lower 16 bits will be in d1.
The tuple should have the source range enclosing its arguments unless they are invalid or there are no arguments.
The value was produced at +1, but pinning is only a conditional retain, so we have to leave the cleanup in place.
Then, it converts any DecRef instruction on tmps whose must-alias-sets say they "will_be_used_again" to DecRefNZ.
Therefore the invariant holds of all the successors, and we can queue them up if we haven't already visited them.
These instructions will emit a special SyncReturnBC instead to fixup the call frame to contain the inlined frame.
This happens automatically for dynamically-linked programs, but in this case we have to take additional measures.
This has to happen after building jobs, because otherwise we won't even emit .swiftdeps files for the next build.
This is just like setType() except that typeSrcs are preserved, so the new type may be derived from the old type.
This is used for persistent classes and functions, so they are always defined, and always visible to all threads.
This method is invoked when the HTTP library encountered some error before it could completely parse the headers.
This should run after specialization and inlining because we don't want to specialize a call that can be inlined.
To avoid exposing the pattern binding declaration to the user, get the descriptive kind from one of the VarDecls.
To do better we could either run this pass before semantic inlining, or we could also handle calls to array.init.
Translate the argument values from the requirement abstraction level to the substituted signature of the witness.
Used for arrays, where we compute the layout once, but want to insert it for the number of elements in the array.
We can omit the payload check if this is the only case represented with the particular extra tag bit pattern set.
We create an edge to pointsTo (agreed, this changes the structure of the graph but adding this edge is harmless).
We currently disable optimizing the initializer if a globalinit_func is called by "once" from multiple locations.
We differentiate this from a BigNode using the size field in either structure (they overlap at the same address).
We handle the var error in sema for a better fixit and inout is handled later in this function for better fixits.
We have to do a non-take copy because someone else may be using the box (e.g. someone could have closed over it).
We have to do this before defining the initializer since the entries will contain offsets relative to themselves.
We need to store to a local after doing some user-visible operations, so don't go down this path for pseudomains.
We should use an optimized PartialSolution structure for that use case, which would optimize a lot of stuff here.
We're only generating the module as an intermediate, so put it next to the primary output of the compile command.
When selecting a *mongos* node, readPreferences make no sense as we don't have a "primary" or "secondary" mongos.
When the main thread will be executing PHP rather than just managing a server, make sure its stack is big enough.
Where there is more than one potential conversion, create a disjunction so that we'll explore all of the options.
furc_get_bit -- the bitstream generator  Given a key and an index, provides a pseudorandom bit dependent on both.
light process available there is no need to do any locking, because the forking is delegated to the light process
retain_value of an enum_inst where we know that it has a payload can be reduced to a retain_value on the payload.
tryFile is a pointer to a function that resolve_include() will use to determine if a path references a real file.
we either have a query that returned a result set or an error occurred lets see if we have access to a result set
xhp names are mangled so we get them back to their original definition see the mangling in ScannerToken::xhpLabel
yy_ch_buf has to be 2 characters longer than the size given because we need to put in 2 end-of-buffer characters.
/ / Array literal construction and array initialization of array values / associates a count with the array value.
/ / Optimizations include: / /   - Merging together retain and release calls into retain_n, release_n /   - calls.
/ / The first SILValue keeps the address of the live store and the second / SILValue keeps the value of the store.
1) If the enum only has one case, it can be lowered as the type of the case itself, and no tag bits are necessary.
A leading slash is probably either // or /* and most likely occurs just in our testsuite for expected-error lines.
Additionally since we are going through the loop nest bottom up, all of our subloops have already been summarized.
After this pass is done the only thing that will reference the arguments is the partial apply that we will create.
All predecessors should either unconditionally branch to the current BB or be another checked_cast_br instruction.
Assuming that we've applied the same substitutions to both types, abstraction equality should equal type equality.
Basically this check is to make sure that we autoprime delegate generators when needed, and not if they're shared.
But if we had an OutputArg, we did not DecRef the old value, and the post-coercion value is a RefData* or nullptr.
Carries out the Quit command by informing the server the client is going away and then getting the client to quit.
Check if all predecessors of BB have a single common predecessor (which should be the block with the switch_enum).
Check to see if the instruction immediately before the insertion point is a retain_value of the specified operand.
Check whether there are any obvious reasons why the two given declarations do not have an overriding relationship.
Collect the interesting information that gets encoded in a type layout record, to see if there's one we can reuse.
Currently the only types in our typesystem that have infinitely growing chains of union_of are specialized arrays.
Determine whether the should associate a conflict among the given / set of methods with the specified source file.
Determine whether we should warn about the given witness being a close / match for the given optional requirement.
Do not specialize the signature of SILFunctions that are external declarations since there is no body to optimize.
Do the work of the debuggerRetHelper by setting some unwinder RDS info and resuming at the approprate catch trace.
Don't do this for ARM, because it can lead to interpOne on the first SrcKey in a translation, which isn't allowed.
During this first analysis pass, we need to pretend none of the stores is anticipated (because we don't yet know).
Each of the non-load instructions will each be checked to make sure that they are live-in or a full element store.
Each of these loops can trigger the others to execute again, so repeat until /all/ of the pending lists are empty.
Emit a class of diagnostics that we only know how to generate when there is / exactly one candidate we know about.
Emit the diagnostic on the unreachable block and emit the note on the branch responsible for the unreachable code.
Emit the sequence that an assign instruction lowers to once we know / if it is an initialization or an assignment.
Enum constants that are not imported as members should be considered private if the parent enum is marked private.
Examine the log file name specifier for strftime conversion specifiers and determine the period between log files.
FIXME: The only way this should happen realistically is if there are casts in between two projection instructions.
FIXME: we can do transforms between two abstraction patterns now Translate to the fully-substituted formal type...
Final stats, per-function per-callsite, with a count of how many times the function was called from that callsite.
For a class with a superclass, automatically define overrides for all of the superclass's designated initializers.
For a convenience initializer or an initializer synthesized for an Objective-C class, allocate using the metatype.
For example, if we matched "ViewController" in "dismissViewControllerAnimated", stitch together "dismissAnimated".
For more information on the IJG JPEG software (and JPEG documentation, etc.), see ftp://ftp.uu.net/graphics/jpeg/.
For prologues with corresponding DV funclets, their corresponding DV funclet will be regenerated right after them.
From here we have an intersection that may have data, and we know that neither type completely contains the other.
GIF Image compression - modified 'compress'  Based on: compress.c - File compression ala IEEE Computer, June 1984.
Given a loaded type like CInt, look through the name alias sugar that the stdlib uses to show the underlying type.
Given an array of polymorphic arguments as might be set up by / GenericArguments, bind the polymorphic parameters.
Given the DIE representing an object type, its name, and its key, return the detailed specification of the object.
However, Zend does it this way, as proven by the fact that you can inject code into the evaled unit's pseudo-main:
If "overrideLocationForMagicIdentifiers" is set, then we use it as the location point for these magic identifiers.
If at the current lattice state, we don't care if the value we are tracking can be decremented, just return false.
If that fails, try it as an SUS integer type if it begins with "d" or as an SUS string type if it begins with "s".
If the closest matches all mismatch on self, we either have something that cannot be subscripted, or an ambiguity.
If the declaration is exported as a C function, emit its native-to-foreign thunk too, if it wasn't already forced.
If the declaration we're starting from is in a class, first look for a class member with the appropriate selector.
If the enum has to be accessed resiliently from this resilience domain, we can't assume anything about its layout.
If the key is a number in ascending order, we're still dealing with an array, not an object, so increase the count
If the retain value's argument is not the cond_br's argument, we can't do anything with our simplistic analysis...
If there are no values available at this load point, then we fail to promote this load and there is nothing to do.
If there is a parser diagnostic in a line, ignore diagnostics in the same line that we got from the semantic pass.
If this is a basic block argument with a single caller then we know exactly which value is passed to the argument.
If this is a convenience initializer (i.e. one that calls self.init), then let properties are never mutable in it.
If this value was already defined, it is either a redefinition, or a specification for a forward referenced value.
If we allowed for PlusZero and we *did* get the value back at +0, then we assumed that self could be passed at +0.
If we do not have any payload arguments, then we should have an empty delete list and there is nothing to do here.
If we failed due to circular inlining, then emit some notes to trace back the failure if we have more information.
If we have a CollectionExpr with a type checked SemanticExpr, remove it so we can recalculate a new semantic form.
If we have a conversion type, but it has type variables (from the current ConstraintSystem), then we can't use it.
If we see another use of Src, then the source location is reinitialized before the Dest location is deinitialized.
If we syntactically match the second decl-var production, with a var-get-set clause, parse the var-get-set clause.
If we're casting to NSError, we may need a representation change, so fall into the general swift_dynamicCast path.
If we're diagnostic an issue with 'nil', produce a specific diagnostic, instead of uttering NilLiteralConvertible.
If we're doing a lookup for diagnostics, include inaccessible members, the diagnostics machinery will sort it out.
If we're within a container, add an implicit first pattern to match the container type as an element named 'self'.
Ignore the VM Stack, we want to pass that down from ContEnter ContEnterDelegate doesn't do anything for iterators.
In particular this means we want that AliasClass to have an entry in the stack_ranges, so we'll populate it later.
In the absence of a better conversion constraint failure, point out the inability to find an appropriate overload.
In this case various parts of the compiler (for example, AST verifier) have less strict assumptions about the AST.
Initialize the distances for the entry and exit blocks, used when computing the distances for the function itself.
Inline function at I, which also changes I to refer to the first instruction inlined in the case that it succeeds.
It is common to name a parameter and not use it (e.g. because you are an override or want the named keyword, etc).
It is not type metadata in and of itself, but is referenced in the structure of existential type metadata records.
Local function to mark the given associated type as recursive, diagnosing it if this is the first such occurrence.
Look into the value for the given LSLocation at end of the basic block, / return one of the three ValueState type.
Make sure that every predecessor ends with a Jmp that we can add arguments to, so we can create a new phi'd value.
Map various attributes differently depending on if we're looking at the declaration, or a function parameter type.
Mark the writeback as auto-generated so that we don't get warnings if we manage to devirtualize materializeForSet.
Merges two overlapping ranges and splits the first range into two / ranges before and after the overlapping range.
NB: locking is important when accessing m_bodyQueue as the session will also write into that structure via onBody.
Need to normalize to Windows directory separators, as the underlying system calls don't like unix path separators.
Notice that any use of an inlined frame not occurring within the callee main blocks is necessarily on a side exit.
Now we need to get the index of the captured value with that type so we know where to start the search at runtime.
Only C++ functions can inspect the caller frame, we know these are all loaded ahead of time and unique/persistent.
Only allow this method to be recursed on for a limited number of times to make sure we don't explode compile time.
Only do this if we're parsing a pattern, to improve QoI on malformed expressions followed by (e.g.) let/var decls.
Otherwise, if there's a dval or no need to check for a full match, stop when there are too many digits for a int64
Otherwise, we don't know, and raw_ptr could point to an arbitrary type, counted or not, so scan it conservatively.
Parse through the leading whitespace, and display a warning if we get to the end without encountering a delimiter.
Perform a forward scan and use control flow and previously detected overflow checks to remove the overflow checks.
Process Action-specific output-specifying options next, since we didn't find anything applicable in the OutputMap.
ProxyArray also always involves virtual size, because of the possibility that it could be proxying a GlobalsArray.
Recognize the unresolved constructor expression and determine where to place the RebindSelfInConstructorExpr node.
Record the users of a value or an element within that value along with the / operand that directly uses the value.
Remove any existing diagnostics files so that clients can detect their presence to determine if a command was run.
Reposition the rethrow block to the end of the postmatter section unless we're emitting into a single predecessor.
Responsible for converting the bytecode comparisons (which are type-agnostic) to IR comparisons (which are typed).
Returns 1 when an error was found and *handled*, and it returns 0 if no error situation has occurred on the cursor
Returns true if A is an opened existential type, Self, or is equal to an / archetype in F's nested archetype list.
Right now that just means skipping over TupleExpr instances that only exist to hold arguments to binary operators.
SET reads 4 input bytes in little-endian byte order and stores them in a properly aligned word in host byte order.
Set the CFI table row address to the start address, and reset the CFA offset to what it was at the end of the CIE.
Shift to state state ST_LT_CHECK to do a more extensive check to determine if this is the beginning of an XHP tag.
Since there can be many subscripts for the same nominal type, we need to find the one matching the specified type.
Special case: if the word in the name ends in 's', and we have a collection element type, see if this is a plural.
Suppress diagnostics about availability overrides for accessors if they would be redundant with other diagnostics.
The GlobalPropertyOpt performs an analysis on the whole module to determine / the values of high-level properties.
The block which contains the cond_br of the input value comparison / or the block which assigns the default value.
The fact that this is *directly* be a reference storage type cuts the code down quite a bit in getTypeOfReference.
The function is 'rethrows', and it was passed an explicit / argument that was not rethrowing-only in this context.
The hardware counter will then measure time for that thread, and all its children - which is exactly what we want.
The native implementation already put the return value on the stack for us, and handled cleaning up the arguments.
The pass begins by identifying the main-trace or callee main blocks and a set of blocks referred to as exit-heads.
The setter selector for, e.g., 'fooBar' is 'setFooBar:', with the property name capitalized and preceded by 'set'.
The supported encoding types are hardcoded here because we are limited to the encodings supported by expat/xmltok.
These are basically the madnesses that boost::variant has to go through, with the advantage of address-invariance.
This file implements semantic analysis for patterns, analysing a pattern tree in both bottom-up and top-down ways.
This function is a substitute for real alpha channel operations, so it doesn't pay attention to the alpha channel.
This function sorts the `blockData' vector in decreasing order or weight, and keeping the deleted ones at the end.
This has to match up with layout algorithms used in IRGen and the runtime, and a bit of SIL type lowering to boot.
This helps us avoid parsing the body of the string / as program tokens, which will only lead to massive confusion.
This is a store, invalidate any location that this location may alias, as their values can no longer be forwarded.
This is classified as InitOrAssign (not PartialStore), so there are only a few instructions that could reach here.
This is only responsible for the control-flow aspect of the Ret: getting to the destination's translation, if any.
This is to prevent creating multiple large regions containing the function body (starting at various DV funclets).
This linear search probably limits the usefulness of this implementation to cache sizes of a few tens of elements.
This may fail if the frontier is located on a critical edge which we may not split (no CFG changes in SILCombine).
This means sort the array by values, but keep the keys associated with the values they used to be associated with.
This method must return a char* which is owned by the IniSettingMap to avoid issues with the lifetime of the char*
This state will be propagated into all of our predecessors, allowing us to be conservatively correct in all cases.
This way, we won't create needless conversion constraints for elements whose equivalence classes have been merged.
Version 1 of this command means we want the names of all variables, but we don't care about their values just yet.
We can assume that this never relocates the metadata because it should have been allocated properly for the class.
We can now remove the cond fail on the increment the above comparison guarantees that the addition won't overflow.
We can use unsafe because we know the codepoint is in valid range and that 4 bytes is enough for any unicode point
We can't do this as we're parsing because we may want to resolve naming conflicts between the things we've parsed.
We can't just consume it because we're in conditionally-executed code (and because this might be a non-final use).
We can't represent this struct completely in SIL anymore, but we're still able to define a memberwise initializer.
We only consider ObjectData* for equality (not a Class*) so if either is an object these are not considered equal.
We're not going to deal with requires at merge time, so drop them here, and clear the mergeOnly flag for the unit.
When there is a conflict, the add() API is supposed to replace the existing element with the new element in place.
When we come back from the dominator tree recursion we need to remove checks that we have seen for the first time.
YYMAXDEPTH -- maximum size the stacks can grow to (effective only if the built-in stack extension method is used).
can't do a near jmp and a rip-relative load/jmp would require threading through extra state to allocate a literal.
don't need to worry about overwritten list, because this is definitely the first time we're setting this property.
funcPrologue --  Given a callee and a number of args, match up to the callee's argument expectations and dispatch.
holding it for the entire request life time, so soapserver and soapclient can use encodeMap* without being deleted
i.e. it is / still possible that 2 LSLocations with different bases that happen to be / the same object and field.
if the value may involve object, consider the variable as "needed" so that objects are not destructed prematurely.
missed at least one counted pointer, or refcount too high no assert, because without gc the only effect is a leak.
r0 is used in function linkage as rfuncln r11 is used as a scratch register (rAsm) r12 is used in function linkage
some software does not count the length bytes of COM section one company doing so is very much envolved in JPEG...
ty is unspecialized and we don't support guarding on CountedArr or StaticArr, so widen any subtypes of Arr to Arr.
(qigao) not calling stat at this point because the timestamp of local cache file is not valuable, maybe misleading.
/ / In terms of ARC this means that if we do not remove User, all releases post / dominated by User are known safe.
/ / This handles typealiases and structs provided by the standard library / for interfacing with C and Objective-C.
/ At the moment we only handle very simple induction variables that increment / by one and use equality comparison.
/ Retrieve the generic parameters of the specified declaration context, / without looking into its parent contexts.
/ The relationship represented by arithmetic operators represent the / information that the operation did not trap.
/ This implements a "raw" access, useful for implementing cache / functions or for implementing dependent accesses.
A dbg.declare is only meaningful if there is a single alloca for the variable that is live throughout the function.
A number of member instructions read locals without consuming an L from the symbolic stack through the normal path.
Adding nonempty values when we already have a single refcounted pointer means we don't have a single value anymore.
All constructors have their initializing constructor in the vtable, which can be used by a convenience initializer.
AllowedDirectories is a list of prefixes, so if x is a substring of y, we dont need y (also remove any duplicates).
Append extra zeroes if necessary to ensure that the size of the filenames and coverage mappings is a multiple of 8.
ArrayData* PlusEq(ArrayData*, const ArrayData* elems)  Performs array addition, logically mutating the first array.
Avoid a weird race: two threads come through at once, the first gets as far as binding propHandle, but then sleeps.
Because the follow-up instructions need to reuse the same archetype uuid which would only work if we used a cloner.
But if the dominating exact checked_cast_br succeeds, then the current non-exact cast would always succeed as well.
But note that later phases should set/get the attribute directly on the FunctionScope, rather than on the FileScope
Changing the definition of GD2_DBG (below) will cause copious messages to be displayed while it processes requests.
Check if the instruction we are visiting could potentially decrement the reference counted value we are tracking...
Check the uses list to see if there are any non-store uses left over after load promotion and other things DI does.
Check to see if the instruction immediately before the insertion point is a strong_retain of the specified operand.
Class existentials can't recursively contain existential containers, so we can fast-path by not bothering to recur.
Collect all array.props calls in the cloned basic blocks stored in the map, / asserting that we found at least one.
Constrain the guard on the Check instruction, but first relax the constraint based on what's known about `srcType'.
Continue on to see if our reference decrement could potentially affect any other pointers via a use or a decrement.
Create labeled initializers for unions that take one of the fields, which only initializes the data for that field.
Depending on number of request threads, current load, etc., this can easily result in excessive dirty page purging.
Emit the given expression as an r-value, then (if it is a tuple), combine / it together into a single ManagedValue.
Ensure that the VM stack is completely empty (vmfp() should be null) and that we're not in a nested VM (reentrancy)
Erase the instruction that stores into the box and the release that releases the box, and finally, release the box.
Every back edge must be a retreating edge, which means we must've already visited its target when iterating in RPO.
FCall, NewPackedArray, and some final member operations specify how many values are popped in their first immediate
FIXME: Along with the FIXME below, this is a hack to work around problems with restating requirements in protocols.
FIXME: There is a way more general property here, where we can drop one label from the tuple, maintaining the rest.
Failable enum initializer produce a CFG for the return that looks like this, / where the load is the use of 'self'.
Fast path: if the types match exactly, no abstraction difference is possible and we can just materialize as normal.
Flag that this translation has been retranslated, so that it's not retranslated again along with the function body.
For each Objective-C method declared in this file, check whether it overrides something in one of its superclasses.
For each block with multiple successors in the same chain, only keep the successor that first appears in the chain.
For each variable in the pattern, make sure its type is identical to what it was in the first label item's pattern.
Force the declaration's context to be the current module, not the original module associated with this module file.
Freshly thrown faults either were never previously seen by the unwinder OR were propagated from the previous frame.
Given a reference to class metadata of the given type, / load the fragile instance size and alignment of the class.
Given that we're going to define a global value but already have a / forward-declaration of it, update its linkage.
However, this shadow value is *only* needed when the argument is closed over (and when that closure isn't inlined).
I really don't know why this doesn't work properly with MSVC, but I know this fixes the problem, so use it instead.
Identical RC root blocks code motion, we will be able to move this retain further once we move the blocking retain.
If B.Type needs to be casted to A.Type and A is a superclass of B, then it can be done by means of a simple upcast.
If V1 is an address projection, attempt to use information from the aggregate type tree to disambiguate it from V2.
If a bit in the vector is set, then the location has an / upward visible store at the beginning of the basic block.
If a continuation matches, we bump the current continuation level so that higher-level continuations are processed.
If our base is an existential type, we can't make use of any constructor whose signature involves associated types.
If raise was true than lookupMethodCtx should have thrown, so we should only be able to get here if raise was false
If the bit is set, then the location currently has an / downward visible value at the beginning of the basic block.
If the block ends the region, then call irgen::endRegion to sync the state and make a REQ_BIND_JMP service request.
If the bridged value type is generic, the generic arguments must be bridged to Objective-C for bridging to succeed.
If the index value doesn't lower to literally the same SILValue's, do some fuzzy matching to catch the common case.
If the instruction corresponds to user-written return or some other statement, we know it corresponds to user code.
If there were any uses of instructions in the duplicated loop entry check block rewrite them using the ssa updater.
If there's only one no-payload case, or the payload is empty, we can jump directly to cases without more branching.
If this application is part of an operator, then we allow an implicit lvalue to be compatible with inout arguments.
If this bit is set, that means this is potentially a retain / or release that can be sunk or hoisted to this point.
If vals64 is zero, or we're testing a single bit, we can get away with a single test, rather than mask-and-compare.
If we ever start using StMem to store to pointers that might be stack/locals, we have to update tracked state here.
If we got here, we know that every pred of the current block is either providing a constant or the dest of a setcc.
If we have a ClosureExpr parent of the specified node, check to make sure none of its arguments are type variables.
If we have a typedef that refers to a tag type of the same name, skip the typedef and import the tag type directly.
If we have an OptionalEvaluationExpr at the top level, then someone is "optional chaining" and ignoring the result.
If we have an initializer requirement and the conforming type is a non-final class, the witness must be 'required'.
If we see another use of Dest, then Dest is live after the Src location is initialized, so we really need the copy.
If we would import a factory method as an initializer but were asked not to, don't consider this as an initializer.
If we're generating constraints for a binary operator application, there are two special situations to consider: 1.
If you want to use this code to quantize a non-RGB color space, you'll probably need to change these scale factors.
Ignore dummy entries semitted for non-method requirements, as well as requirements without default implementations.
In contrast, even if we do not sink ref counts across a cond_br from a select_enum, we may be able to sink anyways.
In fact, it's possible that the IR program itself could cause a location to not be `balanced' using only PureLoads.
In this case, we may be setting a breakpoint in a tracelet which could already be jitted, and present on the stack.
Invalid archetypes are never representatives in well-formed or corrected signature, so we don't need to visit them.
It is perfectly fine to eliminate various retains and releases of this object: we are zapping all accesses or none.
It returns a pointer to the property's address, or init_null_variant if the property was Uninit and doWarn is true.
Make sure that the type of the metatype matches the type that we are casting to so we stride by the correct amount.
Neither GCC nor Clang record a name for a variable which is a static definition, so ignore any that do have a name.
Normally, for a given block of memory, the layout will be applied contiguously until the entire block is processed.
Note if shutting the VM down took non-zero time it's possible that the alarm will fire first and kill this process.
Otherwise, all unsubstituted payload types are fixed-size and we have no constraints on what spare bits we can use.
Otherwise, mark each of the loop latches as irreducible control flow edge tails so we are conservative around them.
Poor mans attempt to get as many threads ready as possible before dropping spinWait, it doesn't have to be perfect.
Post data may be binary, but if parsePostParams() is called, it is correct to handle it as a null-terminated string
Preserve the depth of generic arguments by adding an empty outer generic param list if the conformance is concrete.
Profiler which makes a log of all function enter and exit events, then processes that into per-function statistics.
Protect against setting a non-tuple argument expression for a binop, which may occur as a result of error recovery.
Recontextualize any closure declcontexts nested in the initializer to realize that they are in the getter function.
Record info about the current thread for the debugger client to use when listing all threads which are interrupted.
ResumableObj should not be encountered on their own, they should always be prefixed by a ResumableFrame allocation.
Retrieves the parameter list, return type and context info for / a typed completion placeholder in a function call.
Scan all of the uses of the address of the box to see if any disqualifies the box from being promoted to the stack.
See if the placeholder is encapsulated with an EditorPlaceholderExpr and retrieve parameter and return type ranges.
Since visit() does both of these things, we need to delay calling visit() until listAssignmentAssignElements below.
So we only set GenericParamCaptures if we have a closure, or a non-generic function defined inside a local context.
Some inputs can cause us to allocate gigantic arrays, so we have to make sure we're not exceeding the memory limit.
Splits the basic block at the iterator with an unconditional branch and / updates the dominator tree and loop info.
TODO: Allow the box to be typed, but for staging purposes, only require it when -sil-enable-typed-boxes is enabled.
TODO: Currently all indirect function values use some variation of the "C" calling convention, but that may change.
TODO: If we were able to claim the value from a uniquely-owned existential box, we would want to deallocError here.
Take the binary representation of the length of the key and for every 1 add the alternate sum, for every 0 the key.
The actions are inferred by looking for member functions with special names, and static members with special names.
The reason for this is that that way, when allocating for case b, you don't need to store the SmallNode size again.
The stack depth at the target must be the same as the current depth (whatever this may be: it may still be unknown)
Then adds the breakpoint to client's list and sends this command to the server so that it too can update it's list.
These functions use murmurhash2 in its 32 and 64bit forms, which are differentiated by the constants defined below.
They have to be non-local because otherwise we'll get warnings when a particular x-macro expansion doesn't use one.
This (and the IGM itself) will get deleted by the IGMDeleter as long as the IGM is registered with the IRGenerator.
This API does /not/ actually guarantee a copy occurs, but if it does any assoicated strong iterators must be moved.
This can be improved later, e.g. by walking the untype-checked body to look for things that could possibly be used.
This could be avoided by computing reachability on-the-fly / for each alloc_box by walking backward from mutations.
This ensures that the pretty stack trace in the verifier is included with the back trace when the verifier crashes.
This file defines routines relating to bridging Swift types to C types, working in concert with the Clang importer.
This is a map of uses that are not loads (i.e., they are Stores, / InOutUses, and Escapes), to their entry in Uses.
This is redundant with a check in ifRefCounted, but we check earlier to avoid emitting profiling code in this case.
This is useful / when part of the mangling is done independently, e.g. when an / optimization pass modifies a pass.
This method is to be used when an instruction is found to be dead, replaceable with another preexisting expression.
This pass happens / before the definite initialization pass so that it doesn't see infeasible / control flow edges.
This used to be a conditional around just the two extra args, but that might be undefined if yyoverflow is a macro.
This visits each attribute on a decl early, before the majority of type / checking has been performed for the decl.
This will short-circuit the work done in phpDebuggerOpcodeHook() and ensure we don't interrupt on this source line.
Translate from the AST ResultConvention enum to the / Serialization enum values, which are guaranteed to be stable.
Try to do this in the order in which we needed them, since they can require other protocol definitions recursively.
Type doesn't have a builtin comparison operator because the ordering is rather arbitrary and application dependent.
Unwinding proceeds as follows:  - Discard all evaluation stack temporaries (including pre-live activation records).
Watson  Cygwin has a compat layer in place and does its own core dumping, so we still call setrlimit for core dumps
We actually know that any other type will fail causing us to side exit but there's no easy way to optimize for that
We allow the right operand of the conditional operator to begin with 'try' for consistency with the middle operand.
We also need to drop all references if instructions are allocated using an allocator that may recycle freed memory.
We also refuse to have name-only resolutions of enums, so that all name only resolutions can be treated as objects.
We are passing the packed registers to asyncRetCtrl unique stub, which expects both rType and rData to be i64 regs.
We could check for specialized objects to see if they don't declare a user-defined destructor, but currently don't.
We couldn't find a source of metadata even in the bindings, so we won't be able to get to this metadata at runtime.
We discard functions that don't have external linkage, e.g. deserialized functions, internal functions, and thunks.
We do not push its next level projection into the worklist, if we do that, we could run into an infinite loop, e.g.
We don't / need to check how it is initialized here, because that will show up as a / store to the local's address.
We need to be smarter about whether there's enough structure in the type to produce an interesting binding, or not.
We need to make an array containing all the arguments passed by the caller and put it where the second argument is.
We need to verify that the result type is the same in the dominating checked_cast_br, but only for non-exact casts.
We run multiple trials so that "a_b_c_abc" matching "abc" is matched on the "abc" part instead of the "a_b_c" part.
We treat ::class as a class constant in the AST and the parser, but at the bytecode and runtime level it isn't one.
We use the original convention, except that we have an invariant that direct trivial parameters are always unowned.
We we pretend that the query was positional even if it was named so that we fall into the named rewrite case below.
We've hit one internal breakpoint at a useful place, or decided we don't, need them, so we can remove them all now.
Whether we should short-circuit a disjunction that already has a / solution when we encounter the given constraint.
Write out VTables first because it may require serializations of non-transparent SILFunctions (body is not needed).
XXX - The 16-bit string compare probably needs to be done differently, especially if the flags are to be supported.
XXX(t3879280) This happens immediately before calling an extension function that takes an optional Object argument.
XXX: This was originally done before remapping scriptName but that seemed wrong as the value of docRoot may change.
aStart field of tr.bcmapping may point to cold range, so we need to explicitly form mappings for main code and cold
buildIntervals() uses the sets in a single backwards pass to build precise Intervals with live range holes, and  2.
getSelfConsumedAtInst - Compute the liveness state for any number of tuple / elements at the specified instruction.
o Remove instructions that check the type of memory locations if we proved the memory location must hold that type.
succ already has a label but it cannot contain an inlined fp because if it did we would have stored it in the fpMap
the PHP io_streams stores a php_stream*)  Returns an integer (masquerading as a void*) on success, NULL on failure.
try again - false means we should stop applying autoloaders (only affects classes) - anything else means keep going
(Comparable is similar enough in spirit that it would make sense to live here too when we implement its derivation.)
(The second Offset is basically to the actual jump/switch/etc instruction, while the first points to the immediate.)
/ / Bodies of alive functions should not be removed, as LLVM may / still need them for analyzing their side-effects.
/ / This is a conservative query given the information we know, so as we / perform the dataflow it may change value.
/ The LoweredValue of an alloc_stack keeps an owning container in / addition to the address of the allocated buffer.
A hoist group covers situations with a chain of dependent checks or of multiple checks that consume the same SSATmp.
A resilient indirect enum is still address only, because we don't know how many bits are used for the discriminator.
Add a domain error member, as required by conformance to _BridgedNSError / Returns true on success, false on failure
Add methods, properties, and protocol conformances from a JITed extension / to an ObjC class using the ObjC runtime.
After Seed 5, we should be able to recognize if a switch_enum handles all cases except for 1 and has a default case.
Always called from send and must implement the subclass specific logic for serializing a command to send via Thrift.
Analyse the loop for arrays that are not modified and perform dominator tree / based redundant bounds check removal.
Any block with a NeedSpill out-state and no successors must free spill space right before the block-end instruction.
ArrayData* Merge(ArrayData*, const ArrayData* elems)  Perform part of the semantics of the php function array_merge.
As long as any secondary blocks are inserted after the current IP instead of at the end of the function, we're fine.
Attempt to solve again, capturing all states that come from our attempts to select overloads or bind type variables.
But in case all paths from this block end in unreachable then the final release of the object may be optimized away.
Canonicalize a select_enum_addr: if the default refers to exactly one case, then replace the default with that case.
Claim the address of each and then perform the writeback from the temporary allocation to the source we copied from.
Closure classes can be cloned and rescoped at runtime, so it's not safe to assert the exact type of closure objects.
Create a diamond shaped control flow and a checked_cast_branch instruction that checks the exact type of the object.
Create the checked_cast_branch instruction that checks at runtime if the class instance is identical to the SILType.
Default is conservative: we don't increment a weak use if it uses the frame (or stack), so they can't be eliminated.
Determine whether the witness for the given requirement / is either the default definition or was otherwise deduced.
Diagnose an optional injection that is probably not what the / user wanted, because it comes from a forced downcast.
Emit diagnostics, if necessary, for accesses to storage where / the accessor for the AccessContext is not available.
Every indexed type is associated a layout (hence a scanner), but a given type can be part of multiple indexed types.
ExecutionContext and the TC may retain references to Class'es, so it is possible for Class'es to outlive their Unit.
FIXME: MongoDB doesn't support "connection promotion" to SSL at the moment, so we can't support this option properly
FIXME: We can have interesting ordering dependencies among the various extensions, so we'll need to be smarter here.
Filter out all servers that don't have the replicaset name the same as what we have in the server definition struct.
Finally, now that we know the value is uninitialized on all paths, it is safe to do an unconditional initialization.
First, pre-check the expression, validating any types that occur in the expression and folding sequence expressions.
For each declaration whose context is not something we've already visited above, add it to the list of declarations.
For each subject entry, convert it to string, then perform replacement and add the result to the return_value array.
For everything, store in the appropriate getObject() maps, which will allow us to do getObject() lookups afterwards.
For now we just toss in the function name and id, as well as the pseudo-frames for context breaks at explicit joins.
For properties that do not require deep initialization, promote strings and arrays that came from 86pinit to static.
FuncCache Set of FuncCache handles for dynamic function callsites, used for invalidation when a function is renamed.
GNU libc++ versions 3.3 and 3.4 obey the environment variables GLIBCPP_FORCE_NEW and GLIBCXX_FORCE_NEW respectively.
Given two SIL types which are representations of the same type, / check whether they have an abstraction difference.
Handle the return value, unblock any additional parents, release the WaitHandle, and transfer control to the parent.
However, it does allow eliminating the earlier copy, and we may later be able to eliminate this initialization copy.
If after advancing the iterator we have reached the end, free the iterator and fall through to the next instruction.
If changing the inner type of a boxed local, also drop the information about inner types for any other boxed locals.
If not UINT32_MAX, then this value is an extra value that appears at offset 0 to tell one or more empty enums apart.
If simplification has turned this into the same types, then this isn't the broken constraint that we're looking for.
If the entry is defined at the current point, (1) we know there won't be a better entry and (2) we should remove it.
If the enum only has 2 values and its tag isn't the true branch, then we know the true branch must be the other tag.
If the pointee is another CF typedef, create an extra typealias for the name without "Ref", but not a separate type.
If the string operand has a constant value, convert it to the appropriate numeric and lower to a numeric comparison.
If the struct has to be accessed resiliently from this resilience domain, we can't assume anything about its layout.
If there's no UMSGPAT_PART_TYPE_ARG_TYPE right after a UMSGPAT_ARG_TYPE_SIMPLE argument, then the pattern is broken.
If this bit is set, that means this basic block stops retain / or release of the refcounted root to be moved across.
If this is an assignment operator, and the left operand is an optional evaluation, pull the operator into the chain.
If we are configured to use an external emitter and we are compiling a strict mode hack file, try external emitting.
If we do not have any interesting instructions, bail and return false since we can not have any nested instructions.
If we don't, be compatible with Zend by allowing usercode in hphp_context_shutdown to run before we end the request.
If we had a contextual type, then it either conforms to ArrayLiteralConvertible or it is an invalid contextual type.
If we have a guaranteed method, we will have a release due to a missing optimization in SILGen that will be removed.
If we have either a backwards or a forwards hint, return it---if we have both, return whichever is free the longest.
If we have multiple candidates that we fail to match, just say we have the wrong labels and list the candidates out.
If we see two checks on the same SSATmp with non-intersecting types then give up on hoisting this particular SSATmp.
If we're capturing into a non-escaping closure, we can generally just capture the address of the value as no-escape.
If we're complaining about a function type, don't "aka" just because of differences in the argument or result types.
If we're in a subelement of a struct or enum, just mark the struct, not things that come after it in a parent tuple.
If we're re-typechecking an expression for diagnostics, don't visit closures that have non-single expression bodies.
In case of multiple llvm modules (in multi-threaded compilation) all private decls must be visible from other files.
In that case, add any instructions we are tracking or instructions that we have seen to the banned instruction list.
It's not clear what transformations (if any) on naive SILGen output would ever produce that, but still, don't do it.
It's okay if we passed fewer arguments than there are parameters as long as the gap can be filled in by DV funclets.
Make sure that the replacement type only uses archetypes allowed in the context where the normal conformance exists.
Moving a buffer allocation call is not trivial because we would need to move all the parameter calculations as well.
Non-materializable tuple types cannot be bound as generic arguments, so none of the remaining transformations apply.
Note that if D is a global in script mode (which are not lazy) then we will already have returned a diagnosis above.
Nothing uses WIterNext so we intentionally don't support it here to avoid a null check in the witer_next_key helper.
Now just find the ones that are ready, and copy the corresponding arrays from our input array into our return value.
Now we need to see if we can suggest trailing closure expansion, and if the call parens can be removed in that case.
On success scanning the expression body, the real lexer will be used to relex the body when parsing the expressions.
Once installed, this continues until it is either explicitly uninstalled, or if there is no longer an xdebug server.
One example is two decls when searching for Generator of Sequence: one from Sequence, the other from _Sequence_Type.
Otherwise, if the callee function had sugar on the result type, but it got dropped, make sure to propagate it along.
Otherwise, see if we can find a retain_value or strong_retain associated with that enum in the relevant predecessor.
PHP5 didn't formally define this, but observationally returns the truncated value (i.e., what dst1 currently holds).
Produce the foreign error convention from the imported error info, / error parameter type, and original result type.
Provide a working directory to Clang as well if there are any -Xcc options, in case some of them are search-related.
Query whether the original type is returned indirectly given complete / lowering information about its substitution.
Record the TRC for this storage declaration so that when we process the accessor, we can use this TRC as the parent.
Reorder the blocks in the region in topological order (if region is acyclic), since the previous steps may break it.
Return a stub that will finish entering the callee frame in C++, then call handleResume at the callee's entry point.
Semantic annotation queries for a particular document should cancel previously queued queries for the same document.
Some data, like the values of __CLASS__ and friends, are not available while we're still in the initial parse phase.
Some opcodes like Await may change state of the async function just before exit hook decides to throw C++ exception.
Static strings used to identify certain special types in the debug info, which serve as markers for special actions.
TODO(gut): move them to lower if rsp() manipulation is exclusively allowed in lea and not anymore in addqi and subqi
TODO: We should enforce that ObjC methods are dispatched on ObjC metatypes, but IRGen appears not to care right now.
TODO: checking may alias with Base is overly conservative, we should check may alias with base plus projection path.
TODO: if we guaranteed that this load couldn't crash, we could use a select here instead, which might be profitable.
Take care, as the sprintf implementation may return less places than we requested due to internal buffer limitations
The client is asserting that infinite recursion is / not possible because it has relaxed a constraint on the system.
The client uses the prefix of the argument following the command name to narrow down the list displayed to the user.
The partial_apply had ownership of this box so we must now release it explicitly when the partial_apply is released.
The result type (without the final optional) is a subtype of the operand type, so it will never have a higher depth.
There is an outer loop around the parser that will reinvoke the parser at the top level on each statement until EOF.
There we always just create a declaration and then later / deserialize the actual function definition if we need to.
Therefore, compute s_cactiveLimitCeiling here in order to amortize the cost of introspecting footprint and MemTotal.
They may have uses of SSATmps that no longer have defs, which can break how the simplifier chases up to definitions.
This is called on clone, so we treat it like how Zend would treat a clone, following zend_objects_store_clone_obj().
This isn't necessary if *both* operands of a binary instruction are the same virtual register, but is still correct.
This makes it difficult / to reason about pointer equality though, so undo it as an initial / canonicalization step.
This modifies the Vinstrs in `unit' by setting their `pos' members, in addition to producing the block-to-range map.
This opportunity frequently results from a calling convention that transfers object ownership from caller to callee.
This routine uses Heckbert's "locally sorted search" criterion to select the colors that need further consideration.
This value should be enough bytes to emit a REQ_RETRANSLATE: lea (4 or 7 bytes), movq (10 bytes), and jmp (5 bytes).
This way, php_pollfd_for will return a mask with POLLOUT if the connection is successful and with POLLPRI otherwise.
This will not "hook up" the relocated code in any way, so is safe to call before the relocated code is ready to run.
To avoid this issue, addqi and subqi are the only vasms that will be lowered directly by using rAsm on its emission.
Translate from the serialization ResultConvention enumerators, / which are guaranteed to be stable, to the AST ones.
Use an 'Ordinary' reference kind so that the reference may resolve to any unary or binary operator based on context.
Use the mangled name of the protocol to lookup the partially deserialized value from the default witness table list.
Value witnesses are (predominantly) functions that implement the basic operations for copying and destroying values.
We add the MONGO_NODE_STANDALONE and MONGO_NODE_MONGOS here, because that's needed for the MULTIPLE connection type.
We can do this safely because we are optimistically assuming that all incoming elements in a cycle will be the same.
We can't tell if two objects could be the same from here in general, but we can rule out simple cases based on type.
We consider the "FCall" instruction part of the FPI region, but the corresponding push is not considered part of it.
We could get even more extra inhabitants from the witness table pointer(s), but it's unlikely we would ever need to.
We don't care about these types being a bit verbose because we don't expect them to come up that often in API names.
We have a new token to deal with, jump to the beginning of the loop, but don't fetch the next token, hence the goto.
We have computed the available value bit, now go through every basic block and compute the forwarding value locally.
We know that this is safe because unescaped strings are always shorter than their escaped forms (in a valid string).
We need to iterate through the pattern, searching for the ending delimiter, but skipping the backslashed delimiters.
We need to separately store the value type because we always / use the same type to store the weak reference struct.
We raise a notice to let the user know that there was a type mismatch and that an implicit conversion was performed.
We start by builing up a vector of Label* that we'll use for the Switch instruction and/or for conditional branches.
When suspending, the compressor will back up to a convenient restart point (typically the start of the current MCU).
e.g. it is / not safe to store to an element in the array because we may be storing an / alias to the array storage.
gd_jpeg.c: Read and write JPEG (JFIF) format image files using the gd graphics library (http://www.boutell.com/gd/).
getAccessPathRoot - Given an address, dive through any tuple/struct element / addresses to get the underlying value.
getGlobalNameForReference - Given a reference to a global name, look it / up and return an appropriate SIL function.
in the (illegal) case of multiple Content-Encoding headers, any one with the value 'gzip' means we treat it as gzip.
lowerRawSILOperations - There are a variety of raw-sil instructions like / 'assign' that are only used by this pass.
prepareForCatch() in the ifThen() above messed with irb's marker, so we have to update it on the fallthru path here.
t0 and t1 must pass the match_bindjmp test, have compatible stack pointer adjustments, and be for the same function.
without the following downcast, the write will fail (i.e., will write a zero byte) for all big endian architectures:
(Module outputs can be specified using -module-output-path, or will be inferred if there are other top-level outputs.
/ / Some type metadata has information before the address point that the / public symbol for the metadata references.
Accesses to members in values of reference type (classes, metatypes) are always done through a the reference to self.
Add a jump from middleLabel to destLabel, taking into account any special instructions at the beginning of destLabel.
After all requests finish executing OR all connections close OR ServerShutdownListenWait seconds elapse, stop the VM.
Allow casting from a value that contains an aligned pointer into another pointer value regardless of the fixed width.
Allow the signal polling thread to send CmdSignal messages to the client to see if it there is a signal to repond to.
An Interval represents the lifetime of a Vreg as a sorted list of disjoint ranges and a sorted list of use positions.
And then emit our property using whether or not base is at +0 to discriminate whether or not the base was guaranteed.
Arranging for additional bytes to be discarded before reloading the input buffer is the application writer's problem.
As a special case, an initializer with a single, named parameter of type '()' is always representable in Objective-C.
Assert that the current IR IP (if valid) is immediately prior to the initial IR block for the next primary SIL block.
Before the decision on whether taken branch is traversed, instructions may observe the reference count of their args.
But if some of the types in the signature are public, it could actually end up getting picked in overload resolution.
Check the generic parameters of an extension, recursively handling all of / the parameter lists within the extension.
Clear any Xenon flags that might still be on in this thread so that we do not have a bias towards the first function.
ConflictGraph maintains lists of interfaces that conflict with each other due to being implemented by the same class.
Describes actions one could take to suppress a warning about a / nearly-matching witness for an optional requirement.
Determine / whether all of the elements touched by the instruction are definitely / initialized at this point or not.
Don't allow a generic parameter to be equivalent to a concrete type, because then we don't actually have a parameter.
Each predecessor of a reachable block must be reachable (deleted blocks must not have out-edges to reachable blocks).
Emit any rethrow with no cleanup since all args have been forwarded and nothing has been locally allocated or copied.
Emit the function body for the type metadata accessor of a nominal type / that might require in-place initialization.
Even if the array is empty, for PHP5 conformity we need call compact() because it has side-effects that are important
FIXME: This ties ASTs to every argument and the exact order that they were provided, preventing much sharing of ASTs.
For class-at-a-time analysis, closures that are associated with a class context are analyzed as part of that context.
For instance, routines that use stripUpcasts() do not want to strip off a downcast that results from checked_cast_br.
For now, if the type does not have a fixed layout in all resilience domains, we will treat it as address-only in SIL.
For now, return false is the address argument is an address-only type, since we currently handle loadable types only.
For now, we don't need either an AccessKind or an AccessSemantics, because addressors are always directly dispatched.
For the first selector piece, attach either the first parameter or "AndReturnError" to the base name, if appropriate.
Handle consumes that only remove the reference if the taken branch is not traversed, after we've propagated to taken.
Identical RC root blocks code motion, we will be able to move this release further once we move the blocking release.
If O1 and O2 do not equal and they are both values that can be statically and uniquely identified, they cannot alias.
If b is the current buffer, then yy_init_buffer was _probably_ called from yyrestart() or through yy_get_next_buffer.
If format of 1 is specified, then the function will return an array containing all the words found inside the string.
If it is a common (not leap) year and the molad occurs on Tuesday at or after 3:11:20 A.M., Tishri 1 must be delayed.
If the epilog is reachable, and the caller provided an epilog, just remember the block so the caller can continue it.
If the first and second names are equivalent and non-empty, and we would have an argument label by default, complain.
If the input is SSA, the start position of each interval dominates every live range and use position in the interval.
If the layout contains nothing but conservative scans, mark it as if it was explicitly marked for conservative scans.
If the nominal type is bridged to Objective-C (via a conformance / to _ObjectiveCBridgeable), print the bridged type.
If the parameter is a class type, we only consider it interesting if the convention decided it was actually a source.
If the uncurrying/unbridging process changed the type, re-check the cache and add a cache entry for the curried type.
If this init is defined inside of the same type (or in an extension thereof) as the let property, then it is mutable.
If this is the case, then such an indirect subclass would need a dedicated checked_cast_br check to be devirtualized.
If this unconditional branch has BBArgs, check to see if duplicating the destination would allow it to be simplified.
If two threads are accessing this function for the first time concurrently, we might end up creating two Impl object.
If we are doing a forwarding call and this_ is null, set cls appropriately to propagate the current late bound class.
If we have a base type for this member, try to perform substitutions into it to get a simpler and more concrete type.
If we have a resolved class for the constraint, all we have to do is check if the value's class is compatible with it
If we have already emitted a diagnostic about an unsafe override for the property, don't complain about the accessor.
If we have unviable candidates (e.g. because of access control or some other problem) we should diagnose the problem.
If we saw a non arc user that will keep this value alive, set known safe since we will not move non-arc instructions.
If we were in inline-and-all-clear mode, the vector might logically be much longer than a single chunk, but all-zero.
If we were properly handling overrides of protocol members when requirements get restated, it would not be necessary.
If we're expecting a member within a constrained extension with a particular generic signature, match that signature.
Implementation detail of FPushClsMethodD/F: we use "C::M:ctx" as the key for invoking static method "M" on class "C".
In a cold path, call into native code to unblock every member of an async function's dependency chain, if it has any.
In an inherited convenience initializer, we must use the dynamic type of the object since nothing is initialized yet.
In fact, all dates after the 3rd month are consistent from year to year (once it is known whether it is a leap year).
It is necessary to override this handler with zend_objects_store_clone_obj, which does call the bucket clone handler.
It may even have written uninits deeper than the stack base (but we limit it to sSurprisePageSize, so it's harmless).
It sometimes happens that we get r-value bases here, e.g. when calling a mutating setter on a materialized temporary.
It would be better to use print, but we need a PrintingPolicy for that, for which we need a clang LangOptions, and...
It's easier to know how many 16bits of data the immediate uses by counting how many nops there are inside of the code
Liveness analysis:  The global algorithm first performs a liveness analysis to propagate live out sets to each block.
Lower each of the elements of the substituted type according to / the abstraction pattern of the given original type.
Make a DTNode for the preheader and make the header's immediate dominator, the immediate dominator of the pre-header.
Make sure the above parsing code is revisited when new tags are added (we'll get a warning for a missing case label):
Map from each class name to ClassInfo objects for all not-known-to-be-impossible resolutions of the class at runtime.
Map from normal protocol conformances to diagnostics that have / been delayed until the conformance is fully checked.
Metadata for Self is derived inside the partial application thunk and doesn't need to be stored in the outer context.
Note that we can only get this case if there is a same-named (private or not) function deeper in the class hierarchy.
Note: It is not standards-compliant to compare function pointers for equality, so we just use fake addresses instead.
Now write function declarations for every function we've emitted a reference to without emitting a function body for.
Okay, if the original parameter is passed directly, then we just need to handle abstraction differences and bridging.
Other threads can continue to use the current chunk, or block on the lock if they also find the need for a new chunk.
Otherwise we will be jumping out of the current context, therefore if we are in a loop, we need to free the iterator.
Otherwise, we couldn't tell structurally what is going on here, so try to dig something out of the constraint system.
Project the address of the value inside a boxed existential container, / and open an archetype to its contained type.
Propagate the "reaches-a-points-to-edge" backwards in the defer-edge sub-graph by adding those nodes to the WorkList.
Record any generic parameters that come from this decl, so that we can use the decl to refer to the parameters later.
Return the minimum post-dominator tree level of any of the direct controlling predecessors of this node or any child.
Return the underlying SILValue after stripping off identity SILArguments if / we belong to a BB with one predecessor.
Returns true if the type is a tuple which contains at least one array / (we don't check for arrays in nested tuples).
Returns whether or not the weight of any arc was inferred and, in case of success, the weight of such arc is updated.
Scout out the specified destination of an AssignExpr to recursively / identify DiscardAssignmentExpr in legal places.
See the comment above for a rare situation in which the transparent pixel may not work properly with 16-bit channels.
Sends a getnonce command to the server for authentication  Returns the nonsense when it worked, or NULL if it didn't.
Sends this list command to the server to retrieve the source to be listed and then displays the source on the client.
SmallVector::emplace_back will never need to call this because we reserve the right size, but it does try statically.
So we need to clear the timeout, wait (if necessary) for a pending signal to be handled, and then set the new timeout
Summary: - Horizontal filter contributions are calculated on the fly, as each column is mapped from src to dst image.
TODO: if we're casting to an existential type, don't throw away the protocol conformance information we already have.
The DateTimeZone constructor doesn't support offset time zones, so we must mess with DateTimeZone structure ourselves
The OS might guarantee only one guard page at the bottom of the stack, and a page size can be as small as 4096 bytes.
The elements are pushed on the stack, so we arbitrarily limit this to a small multiple of MixedArray::SmallSize (12).
The exception cleanup should be getting forwarded around correctly anyway, but push a scope to ensure it gets popped.
The following pop and push instructions ensure that the arguments are place on the symbolic stack in a correct order.
The following terms apply to all files associated with the software unless explicitly disclaimed in individual files.
The hardware counter is only 48 bits, so reset this at the beginning of every request to make sure we don't overflow.
The implications of this include not being able to break an expression over multiple lines in an interpolated string.
The new entries added to m_classDecs are always empty, so it doesnt matter that we dont include them in the iteration
The particular policies used here have proved out well in experimental comparisons, but better ones may yet be found.
The purpose of this is to enable unit tests for SIL Alias Analysis / implementations independent of any other passes.
The return value is a pointer to the new metadata table, and the size of the table will be updated by passing by ref.
Therefore we have to check if both, the normal and the error block, are empty and lead to a common destination block.
These are sets of SSATmp names that are known to alias the same object, in a "semi"-flow-insensitive way (see below).
These two instructions don't touch memory we track, except that they may re-enter to construct php Exception objects.
This cast selects between two paths: one that calls the slow dynamic dispatch and one that calls the specific method.
This class stores global state that we use when computing redundant load and / their replacement in each basic block.
This depends on the inner details of the matching algorithm and will need to be updated if we substantially alter it.
This hacks mustBeRef() to return false for the first parameter of extract(), current(), key(), and array_multisort().
This is b/c it was passed at +0 originally and we need to balance the initial increment of the newly created closure.
This is conservative, but without it, we would need a runtime check to decide whether or not to forward the lsb class
This is the limit for the number of subclasses (jump targets) that the speculative devirtualizer will try to predict.
This is the only known occurance of ParamCoerceModeNullByte, so we treat it specially using an explicit tvCoerce call
This recgonizes such cases and ensures we have internal breakpoints to cover the destination(s) of such instructions.
This will be block that will contain the check whether to execute the 'native swift array' loop or the original loop.
This will leak blocks if anything's been added since the corresponding call to makeScratchBlock(), but it's harmless.
Unit contents to check: o bc o lines o UnitLitStr table o UnitArray table o UnitSourceLoc table o Classes o Functions
Unlike the non-ref case, we don't need to do anything to the stack/local because any load of the box will be guarded.
Use matchCallArguments to determine how close the argument list is (in shape) to the specified candidates parameters.
Usually llvm can eliminate this code again because the user's safety check should be constant foldable on llvm level.
We could figure this out and check for it, but it's good enough just to see that the opcode has the prefix we expect.
We directly read zend.assertions here, so that we can get its INI value in order to know how we should emit bytecode.
We don't use parseList() because we want to provide more specific diagnostics disallowing operators in version specs.
We don't want side exits when profiling, so only allow instructions that consume refs at the beginning of the region.
We exempt Objective-C initializers from this requirement because there is no equivalent to 'required' in Objective-C.
We get invalid note locations when trying to describe where a module is imported and the actual location is in Swift.
We may check packed array bounds on profiled arrays for which we do not statically know that they are of kPackedKind.
We need to expand all implied conformances to find the complete set of protocols to which this nominal type conforms.
We need to transitively ensure that any stores initializing the result that are visible to us are visible to callers.
We relook up our the states for our predecessors to avoid memory invalidation issues due to copying in the dense map.
We should never import an ObjC method as returning a tuple which would get broken up into multiple results like this.
We want to use this native / thunk where we expect to be calling an allocating entry point for an ObjC / constructor.
We will restrict this optimization to needles that are strings, and haystacks that have only non-numeric string keys.
When more than one copy occurs in a position, they are parallel-copies (all sources read before any dest is written).
When we're ready to resume, we need to replace the fault to reflect any state changes we've made (handledCount, etc).
With the current meaning of structs, if the keys are different, we can't do anything better than going to a map type.
WorklistMap keeps track of which slot a BB is in, allowing efficient containment query, and allows efficient removal.
end anonymous namespace / Checks operands of a string concatenation operation to see if / optimization is applicable.
gdAntiAliased passed as color: use the much faster, much cheaper and equally attractive gdImageAALine implementation.
getNamedElementId - If this tuple has a field with the specified name, / return the field index, otherwise return -1.
getUnderlyingPath and findAddressProjectionPathBetweenValues disagree on what the base pointer of the two values are.
if the callee isn't persistent, its still ok to use it if its defined at the top level in the same unit as the caller
isCopyToOrFromStack - Check to see if the specified use of an inout / argument is a copy_addr to/from an alloc_stack.
passing in cls will short-circuit the accessibility checks, but does mean we'll allow a private or protected s_TSPEC.
rdar://problem/21375421 - pod_indirect_initializeBufferWithTakeOfBuffer should move ownership of a fixed-size buffer.
s and e are integers modulo 360 (degrees), with 0 degrees being the rightmost extreme and degrees changing clockwise.
set current class as the first declaring prop private props' mangled names contain the class name, so regenerate them
set the pixel at (x,y) and its 4-connected neighbors with the same pixel value to the new pixel value nc (new color).
softmagic - lookup one file in parsed, in-memory copy of database Passed the name and FILE * of one file to be typed.
the allocated size is always the next power of two (or zero) so we just need to reallocate when we hit a power of two
this is because we might have made changes to other scopes which we do not undo, so we need to announce their updates
(The -1 value of zend.assertions corresponds to AssertEmitted being set to 0 above, and is not changeable at runtime.)
-- Effects of Pure Stores on Memory Support -- There are two main kinds of stores from the perspective of this module.
/  2) implode the corresponding values in the RValue to a scalar value of /     tuple type and process them as a unit.
/ / Note that this decl is created, but it is returned with an incorrect / DeclContext that needs to be set correctly.
/ / We have to prove that the array value is not changed in between the / creation and the method call to get_element.
/ / We propagate the elements associated with calls of / / * Array.init(count:repeatedValue:) /   The 'repeatedValue'.
/ / entityType specifies a specific type to use for this decl/expr that may be / more resolved than the concrete type.
/ If ObjC interop is disabled, we can use Swift refcounting entry / points, otherwise we have to use the unknown ones.
/ If an instruction is encountered that might modify any array this method / stops further analysis and returns false.
A release is only 'safe' if we know its deinitializer does not have sideeffects that could cause memory safety issues.
Adjust the type of the given declaration to appear as if it were / in the given subclass of its actual declared class.
After receiving this error, the connection is in an invalid state, and we do not need to call xpc_connection_cancel().
Again in such a case by merging the first release with the second release, we would be introducing an additional copy.
Allocate and insert a new node between two adjacent nodes, returning the new node, handling backlinking appropriately.
Allocate enough room for the instruction with tail-allocated data for all the case values and the SILSuccessor arrays.
Altered source versions must be plainly marked as such, and must not be misrepresented as being the original software.
An lvalue of type T1 can be converted to a value of type T2 so long as T1 is convertible to T2 (by loading the value).
But there might be requests in flight that still thought they were profiling, so we need to clear it on the treadmill.
But we also don't want to extend regions past it, so the JIT treats it as terminal and uses InterpOneCF to execute it.
Cast from existential metatype to existential metatype may still succeed, even if we cannot prove anything statically.
Closing all proxy connections will force the local proxy to pop out of it's wait, and eventually exit the main thread.
Copy the initializer into the function Replace the access to a let property by the value computed by this initializer.
Currently we don't do any sophisticated dataflow analysis, so we keep the memoryContent alive only for a single block.
Determines the access semantics to use in a DeclRefExpr or / MemberRefExpr use of this value in the specified context.
Even though there are no sessions, memory is allocated to perform INI setting bindings when the thread is initialized.
FIXME: If we used Clang as a linker instead of going straight to ld, we wouldn't have to replicate Clang's logic here.
FIXME: We should probably be a bit more clever here about which lines we put into the history and when we put them in.
FIXME: We're implicitly depending on the fact that lookupConformance is global, ignoring the module we provide for it.
Fetch the metadata cache for a generic metadata structure, / in a context where it must have already been initialized.
Figure out the offset to the first element, which is necessary to be able to polymorphically project as a generic box.
First pass of IRBuilder optimizations try to replace an instruction based on tracked state before we do anything else.
For a given expression, given information that is global to the / expression, attempt to derive a favored type for it.
For a single potential conversion, directly recurse, so that we don't allocate a new constraint or constraint locator.
For each matching starting delimiter, we increment nesting level, and decrement it for each matching ending delimiter.
For profiling translations, grab the postconditions to be used for region selection whenever we decide to retranslate.
For setter accessors, we need the base's setter to be accessible from the overriding context, or it's not an override.
For the purpose of naming (having entered the the function body), a variadic capture param acts as any other variable.
Get the runtime library link path for static linking, / which is platform-specific and found relative to the compiler.
Given a pattern stored in a clause matrix, check to see whether it / can be specialized the same way as the first one.
Given a reference to class metadata of the given type, / derive a reference to the field offset for a stored property.
Handle the direct result type, checking for supposedly scalar result types that we actually want to return indirectly.
Helpers to set the MOpFlags immediate of a bytecode struct, whether it's subop2 for Base* opcodes or subop1 for a Dim.
If callsite has an argument that is a plus zero or trivial rvalue, emit / a retain so that the argument is at PlusOne.
If it makes you feel any better, the PHP contributor responsible for this has since said that he regrets his decision.
If the Clang declaration is from a protocol but was mirrored into class or extension thereof, treat it as an override.
If the base of the access is mutable, then we may be invoking a getter or setter that requires the base to be mutable.
If the bit is set, that means this basic block creates a / retain which can be sunk or a release which can be hoisted.
If the end of the file has been reached, the routine has a choice of ERREXIT() or inserting fake data into the buffer.
If the lookup occurs from within a trailing 'where' clause of a constrained extension, also look for associated types.
If the optimizer is enabled, we run the ARCOpt pass in the scalar optimizer and the Contract pass as late as possible.
If the superclass doesn't require in-class initial values, the requirement was introduced at this point, so stop here.
If there are UnresolvedPatterns floating around after name binding, they are pattern productions in invalid positions.
If there will be an ambiguity when referring to the method, introduce a coercion to resolve it to the method we found.
If this assert fires, we're trying to put things on the stack in a catch trace that the unwinder won't be able to see.
If this function fails, close the mcrypt module to prevent crashes when further functions want to access this resource
If this protocol is class-constrained but not AnyObject, checking its conformance will check the class constraint too.
If true, the value witness will be / tail-emplaced inside the metadata pattern and initialized by the fill / function.
If we are not starting at the beginning of the source file, we had better already have a root type refinement context.
If we are passed in a null conformance (a valid value), just return nullptr since we cannot map a witness table to it.
If we created a fresh context and didn't make any autoclosures, destroy the initializer context so it can be recycled.
If we found an exact match, this must be a problem with a conversion from the result of the call to the expected type.
If we have a This pointer in destCtxReg, then select either This or its Class based on whether callee is static or not
If we have no useful type information from the destination, just type check the source without contextual information.
If we resolved down to an error, make sure to mark the typeRepr as invalid so we don't produce a redundant diagnostic.
If we're about to enter an exception handler we turn interrupts on to ensure we stop when control reaches the handler.
If we're in the initializer for a struct, and this is a call to a mutating method, we model that as an escape of self.
If we're reading a .sil file, treat a call to "selfinit" as a self.init call as a hack to allow us to write testcases.
If we're using checked_cast_addr, take the operand (which should be an address) and build into the destination buffer.
In the translator, numCells can be hardcoded, and m_top is wired into a register, so the expression requires no loads.
In we find arguments that are not the 'self' argument and if they are of the Self type then we abort the optimization.
Indirect results are passed as owned, so we also need to pass the direct result as owned (except it's a trivial type).
Intended usage is by the packaging script to quickly verify that it's building the thing that it thinks it's building.
It is not a requirement, but we attempt to locate all the DV entry points after the rest of the primary function body.
Keeps track of the comments that were printed from the file and resumes printing for the next node from the same file.
Leap years are every fourth year (year 3, 7, 11, etc.)  TESTING  This algorithm has been tested from the year 1 to 14.
Linux doesn't have a limit, but it will fill in the first 256 chars of hostname even if the actual hostname is longer.
Make sure the func loc is not the start of the function body, in which case the context sensitive keyword was implied.
Make sure the getter and setter have valid types, since they will be used by SILGen for any accesses to this variable.
More relevant info always comes earlier, so only use this field if we don't have appropriate aperture information yet.
Note that the ConcatFoo opcode consumed the reference on its first argument, so we only need to decref the second one.
Note: functions made with this currently only make sense to call if it's already known that the opcode has extra data.
Note: it's useful to do dead block removal before DCE, so it can remove code relating to the branch to the dead block.
Note: the couldBe comparisons here with sempty() are asking "can this string be a non-reference counted empty string".
Note: this is probably more complex than it needs to be, because we're iterating the stk_expand_map for each location.
Null exit block for 'ldrefExit' because we won't actually need to reload the inner cell since we are doing a stLocNRC.
On the other hand, if one or both of them has more memory support bits than lower bound, we just pessimize everything.
Only if the current loop is actually the "main part" in the outer loop we add the full loop weight for the outer loop.
Only if the day number is actually found to be in the ambiguous period of 29 to 31 days is the other molad calculated.
Order is important here: types must progress from more specific to less specific to return the most specific DataType.
Otherwise, some part of the copy_addr's value is demanded by a load, so we need to explode it to its component pieces.
Otherwise, we have no way of knowing the original protocol or conformance, since the witness has a concrete self type.
Otherwise, we've found a definition, or something else that will require that the memory is initialized at this point.
Parse Composite Document Files, the format used in Microsoft Office document files before they switched to zipped XML.
Promote values of non-static let properties initialized by means / of constant values of simple types into their uses.
Reads a cursors body Returns -31 on failure, -80 on timeout, -32 on EOF, or an int indicating the number of bytes read
Recontextualize any closure declcontexts nested in the initializer to realize that they are in the parameter function.
Record the end of a translation, storing the size of cold and frozen, returns a TransLoc representing the translation.
Refresh stats to reflect directly malloc()ed memory, and determine whether the request memory limit has been exceeded.
Return the implicit access kind for a MemberRefExpr with the / specified base and member in the specified DeclContext.
Returns false if cloning required by jump threading cannot be performed, because some of the constraints are violated.
Same with Closure, since it's a dynamic object but still has its own different behavior for var_dump and cast to array
See if we have an instance method, instance member or static method, and check if it can be accessed on our base type.
Set the DFSNum for this node if we haven't already, and if we have, which indicates it's already been visited, return.
Setting this will ensure we stay out of JIT code and in the interpreter so phpDebuggerOpcodeHook has a chance to work.
So, the first molad was 5 hours 793 halakim after the start of Tishri 1, 0001 (which was Monday September 7, 4761 B.C.
Some byte codes, such as for the implicit "return 0" at the end of a a source file do not have valid source locations.
Speculate the targets of virtual calls by assuming that the requested / class is at the bottom of the class hierarchy.
TODO: If we add in alias analysis support here for apply inst, we will need to check that the pointer does not escape.
The SIL StackPromotion pass generates a pair of swift_bufferAllocateOnStack and swift_bufferDeallocateFromStack calls.
The first step of processing an element is to collect information about the element into data structures we use later.
The only case this can happen is if the accessor label is immediately after a brace (possibly preceded by attributes).
The original version of tiger got the endianness backwards This fb-specific version remains for backward compatibility
The property which we want to track: is the value/field a native swift / array which doesn't need deferred type check.
The stub uses arg reg 0 as scratch and to pass arguments to destructors, so it expects the iter argument in arg reg 1.
The thunk takes an A' and converts it into an A, calls the inner function value, and converts the result from B to B'.
There is only one container (not counting container1) so we can just call containerKeysToSetHelper() to build the Set.
These would start an encoding for something that couldn't be represented with UTF16 digraphs, so Unicode rejects them.
This algorithm treats the exceptional live-out states differently from the live-out states during normal control flow.
This allows mixed compilation, where some units were compiled DEBUG and others compiled RELEASE, to successfully link.
This block aborts the program, if something bad happens when handling exceptions, thus keeping this function noexcept.
This check assumes that either the storage type of a type is an llvm::StructType or it has a single-element explosion.
This is a complex type involving other associatedtypes, we'll fail to resolve and get a special diagnosis in finalize.
This is a streamlined copy of Variant.constructValHelper() with no incref+decref because we're moving v to this array.
This is basically TypeLowering::emitStoreOfCopy, except that if we have a known incoming value, we can avoid the load.
This may be at a different stack depth, though, especially if we've moved from the original function to the resumable.
This uses getLocation() instead of getRange() because we don't want to replace the "(set)" part of a setter attribute.
To conform to PHP behavior, we invalidate all strong iterators when an element is added to the beginning of the array.
Translate from the AST ParameterConvention enum to the / Serialization enum values, which are guaranteed to be stable.
Under the assumption that input will be rounded nearest, mode 0 renders 1e23 as 1e23 rather than 9.999999999999999e22.
Walk the function expression, which should produce a reference to the callee, leaving the final curry level unapplied.
We can match the suffix of the type so long as everything preceding the match is neither a lowercase letter nor a '_'.
We may, alternatively, want to use a type variable in that case, and possibly infer the type of the variable that way.
We're performing a single compilation (and thus no merge module step), so prefer to use -emit-module-path, if present.
When suspending, the decompressor will back up to a convenient restart point (typically the start of the current MCU).
When there are multiple partial solutions for a given connected component, rank those solutions to pick the best ones.
When we make a new connection to a machine, we have to wait for it to interrupt us before we can send it any messages.
With this in mind, we'll discuss all four cases: Unknown target, Zero LB: We flag all must-alias-sets as "pessimized".
collectDelegatingClassInitSelfUses - Collect uses of the self argument in a / delegating-constructor-for-a-class case.
getGlobalNameForDefinition - Given a definition of a global name, look / it up and return an appropriate SIL function.
if the current word puts us over width w, copy back up until the last space, insert a break, and move up the laststart
remember to set application/x-www-form-urlencoded content-type later on lest the php streams guys come and beat you up
/ / This routine is used for 'simple' expressions that only need their / types simplified, with no further computation.
11) All successors and predecessors sets are consistent (i.e., if B is a successor of A, then A is a predecessor of B).
A "null" initialization that indicates that any value being initialized / into this initialization should be discarded.
A phidef'd variable just need to be assigned a phi group if it doesn't already have one (i.e., from handling a phijmp).
A thread with the write lease may be modifying b.m_frontier while we call b.used() but it should never modify b.m_base.
All other things considered equal, if any overload choice is more more constrained than the other, increment the score.
Always called from recv and must implement the subclass specific logic for deserializing a command received via Thrift.
ArrayData* Append(ArrayData*, Cell v, bool copy)  Append a new value to the array, with the next available integer key.
At the end of each block, propagate its out-state to successors, adding them to the worklist if their in-state changes.
C99 says to define __STDC_LIMIT_MACROS before including stdint.h, if you want the limit (max/min) macros for int types.
Calls are identical if the callee and operands are identical and we know that the call is something that is "readnone".
CopyForwarding will be reapplied after the transparent function is inlined at which point global hoisting will be done.
Create a SILBuilder with a tracking list for newly added instructions, which we will periodically move to our worklist.
Create the control variable as the first instruction in the function (so that it is easy to destroy the stack location.
Debug Hook Handling Helper that grabs the breakpoint ids for the given breakpoint type using the given breakpoint info.
Deconstruct the call argument to find its elements, element names, and the locations of the left and right parentheses.
Determine if this value_metatype instruction is part of a call to / self.init when delegating to a factory initializer.
Determine whether the word preceding the preposition is part of an / "extended" preposition, such as "compatible with".
Disable signal polling during this time, since our protocol requires that only one thread talk to the client at a time.
Error for values that don't make sense if there's a clear definition of the possible values (as there is for _runtime).
Even though at the SIL level we have "one" return function, we can have multiple exits provided by no-return functions.
FIXME: Occurs when the nested type is a concrete type, in which case it's quite silly to create a type variable at all.
FIXME: PatternBindingDecls don't have attributes themselves, so just assume the variables all have the same attributes.
FIXME: This is a band-aid used to work around the fact that the above code can introduce null elements into the vector.
FIXME: We probably shouldn't be adding an rpath here unless we know ahead of time the standard library won't be copied.
Fetch from PreClass as: - the order is important - we want type profiling info and neither of these are in the Class...
Flag it as error (or warning, if in playground mode) for the rest of the compiler pipeline and lex it as an identifier.
For function that requires just 1 iteration of the data flow to converge we set the initial state of BBWriteSetIn to 0.
For lookups within the generic signature, look at the generic parameters (only), then move up to the enclosing context.
For the most part this should never happen, the emitter assigns our delegate to a non-null value in ContAssignDelegate.
Foreign-to-native, native-to-foreign thunks for declarations and function values are implemented in SILGenBridging.cpp.
Get the value witness table for an existential type, first trying to use a / shared specialized table for common cases.
Given a Clang-expanded (according to ABIArgInfo::Expand) parameter / in 'in', produce a Swift value explosion in 'out'.
Given a day number, find the molad of Tishri (the new moon at the start of a year) which is closest to that day number.
Hoists the necessary check for beginning and end of the induction / encapsulated by this access function to the header.
However, in the init and destructor methods for the type immediately containing the property, accesses are done direct.
I've reviewed the changes made in OpenBSD (as of 2.7) and modified the original code in a similar way where applicable.
If any of the fromElements can be cast by value to the singleton toElement, then the overall enum can be cast by value.
If isn't really a use, but we account for the alloc_box/mark_uninitialized as a use so we see it in our dataflow walks.
If one type is an aggregate and it contains the other type then the record reference may alias the aggregate reference.
If self is already deallocating, self does not need to be retained or released since the deallocating bit has been set.
If the constant produced a tuple, be smarter than RAUW: explicitly nuke any tuple_extract instructions using the apply.
If the lookup found no hits at all (either viable or unviable), diagnose it as such and try to recover in various ways.
If the original variable was settable, then Sema will have treated the VarDecl as an lvalue, even in the closure's use.
If the protocol introduces a class constraint, track whether we need to check for it independent of protocol witnesses.
If the result type is dependent on a type parameter we might have to cast to the result type - it could be substituted.
If the return address is in functionEnterHelper or callToExit, rvmfp() won't contain a real VM frame, so we skip those.
If the source value is a metatype, either do a metatype-to-metatype cast or cast it to an object instance and continue.
If the step out command is active and if our stack depth has decreased, we are out of the function being stepped out of
If this entity was introduced after the minimum platform version, it's availability can only be determined dynamically.
If this is a non-take access at plus zero, we can perform a +0 load of the address instead of materializing a +1 value.
If we are optimizing, we should use the return location from the single, previously processed, return statement if any.
If we are profiling the heap, we always need to sync because regs need to be correct during allocations no matter what.
If we choose to support this, header() and setcookie() do not work without a transport so we'd need to get around that.
If we don't have any no-payload cases, we are done -- the payload tag alone is enough to distinguish between all cases.
If we have a simple name, determine whether there are argument labels we can use to restrict the set of lookup results.
If we have no contextual type information and the subexpr is obviously a overload set, don't recursively simplify this.
If we should import this instance method also as a class method, do so and mark the result as an alternate declaration.
If we're at the end of a brace on a separate line in the context of anything other than BraceStmt, don't add an indent.
In SIL mode, we can have multiple generic parameter lists, with the first one being the outmost generic parameter list.
In the case of a failing initializer, the release on the exit path needs to cleanup the partially initialized elements.
It must make sure that no write and no increment to the array / reference has happened such that hoisting is not valid.
Make sure the getter and setter have valid types, since they will be used by SILGen for any accesses to this subscript.
More subtle is that we need to block auto-typechecking until the VM is fully initalized, and systemlib is fully merged.
Normally putting a public member in an internal extension is harmless, because that member can never be used elsewhere.
Note that in practice we only expect there to be one file, but this is general and is what the diagnostic file expects.
Note that we should only end up in this path in cases where simply forwarding the outer result address wasn't possible.
Note that we'll revisit this instruction and add it to Uses twice if it is both a load and store to the same aggregate.
Objective-C thunks for generic methods also always derive all polymorphic parameter information from the Self argument.
Okay, now that we've classified all the constraints, sort them by their priority and privilege the favored constraints.
On interrupt, it presents a command prompt, and continues pumping interrupts when a command lets the machine run again.
On the other hand, the new "copy" partial apply in the /    specialized function now needs to be balanced lest we leak.
Otherwise, it's an explosion, which we may need to translate, both in terms of explosion level and substitution levels.
Otherwise, the intersection is non-empty and has no specialized information inside the intersecting portion to consult.
Our handle may not be same as `svar' here because some other thread may have updated it already, check before updating.
Performs a qualified lookup into the given module and, if necessary, its / reexports, observing proper shadowing rules.
Plan the emission of a call result from an inner result address, given / that the outer abstraction pattern is a tuple.
Plan the emission of a call result into an outer result address, / given that the inner abstraction pattern is a tuple.
Presumably because that context was added later, as the constant context is left out in other arbitrary places as well.
Pull a 32-bit integer from the generator state Every other access function simply transforms the numbers extracted here
Record all generated layouts in m_layouts (ignoring ignored or conservative ones since those have hard-coded scanners).
Remove all instructions that were marked dead, and replace instructions that can be replaced with pops but aren't dead.
Replace one of the `first' Node's successor pointers to `current' with `replace'  Pre: direct_successor(first, current)
Return a pair, containing the total parameter count of a function, coupled / with the number of non-default parameters.
Returns true if this function has either a self metadata argument or / object from which Self metadata may be obtained.
Set of properties which already fulfill all conditions, except the available of constant, statically known initializer.
Set up the OR-mask arrays for the initial and final permutations, and for the key initial and compression permutations.
Similar to static variables, find any definitions which refer to this function in order to extract linkage information.
Since we had a declaration before, its linkage should be external, ensure that we have a compatible linkage for sanity.
So someone has invalidated the LoopAnalysis structure by changing the CFG before calling this function, which isn't ok.
Sort the predictions by location, so that we can simply compare the type-prediction vectors for different blocks later.
Special case for Protocol, which gets forward-declared as an ObjC class which is hidden in modern Objective-C runtimes.
Starting from the innermost context that is not a type context, count all parent contexts that have generic parameters.
TODO: Once there is an efficient API to check if a given symbol is a specialization of a specific type, use it instead.
TODO: check the body of didSet to only do this load (which may call the superclass getter) if didSet takes an argument.
TODO: prove that some conversions from class existential metatype to a concrete non-class metatype will obviously fail.
TODO: the integer literal bit size is 2048, but we only have a 64-bit conversion function available (on all platforms).
Temporarily change the active scope to null, so we don't record / any changes made while performing the undo operation.
The BitVector in / each g is then laid on top of it to keep track of which LSLocation / has a downward available value.
The apply instruction does not capture the pointer when it is passed through 'inout' arguments or for indirect returns.
The argument could be shuffled if it includes default arguments, label differences, or other exciting things like that.
The block may be a side exit or a normal IR block, depending on whether or not the offset is in the current RegionDesc.
The cast will load the reference from the source temp and store it into a dest temp effectively forwarding the cleanup.
The destination BB can take the argument payload, if any, as a BB arguments, or it can ignore it and take no arguments.
The inline cache is guaranteed to be set only once, but the one-way request-local method cache is updated on each miss.
The operator token in this case lexes as a binary operator because it neither leads nor follows a proper subexpression.
The overflow flag is not returned / explicitly, because this simplification is only possible if there is / no overflow.
The set of directly accessible types, which is only used when we're performing dynamic lookup into an existential type.
The set refers to operands instead of instructions because an apply could have several operands with release semantics.
The state transition table takes the current state and the current symbol, and returns either a new state or an action.
There's an interesting special case where we can do the initialization idempotently and thus avoid the need for a lock.
This currently means that we first show that TI cannot indirectly use Ptr and then use alias analysis on the arguments.
This extra call is for the other command line options that may have been overridden by a tier, but shouldn't have been.
This file contains code for emitting code associated with types: - methods - ObjC dispatch thunks - SIL v-tables - etc.
This function goes through the arguments of F and sees if we have anything / to optimize in which case it returns true.
This is a base class for passes that are based on function liveness / computations like e.g. dead function elimination.
This is in declaration order mirroring the php::Class interfaceNames vector, and does not include inherited interfaces.
This is safe since we are hashing the operands using the actual pointer values of the values being used by the operand.
This is something that is implicit in the partial_apply design that will be revisited when partial_apply is redesigned.
This leads to a year that is 365.25 days long, but the current accepted value for the tropical year is 365.242199 days.
This loop will repeatedly recurse on the RHS until it encounters an expression other than a list assignment expression.
This needs special handling because the behavior varies depending on whether the object has a toString() method or not.
This probably should be initialized somewhere, but I didn't find a suitable place so it's wrapped in a function for now
This silences downstream diagnostics checking to make sure that some PBD's that require initializers actually had them.
This table reflects a particular philosophy about what constitutes "text," and there is room for disagreement about it.
Tracks the min depth of the elem stack inside a region where baseValue is unknown, and the line where the min occurred.
Translate from the serialization DefaultArgumentKind enumerators, which are / guaranteed to be stable, to the AST ones.
Translate from the serialization ParameterConvention enumerators, / which are guaranteed to be stable, to the AST ones.
Try to map the value of a select_enum directly to an int type with a simple cast from the tag value to the result type.
Uses the client to send this command to the server, which will update its breakpoint list with the one in this command.
WARNING: Anything you put in this function will only be run when the VarDecl is fully type-checked within its own file.
We always tell them that they can silence the warning with an explicit type annotation (and provide a fixit) as a note.
We are working on an architecture that supports 64-bit integers since php is 32 bit by design, we bail out with warning
We can throw in a weird situation where the ActRec is already on the stack, but this bytecode isn't done executing yet.
We could duplicate whatever code in takenBlk in block, but we only do it if takenBlk contains only a cheap instruction.
We don't actually need to emit the outer parameters because they should have been emitted as part of the outer context.
We leave this struct type intentionally opaque, because the compiler basically never needs to access anything from one.
We may not be able to find a declaration to search if the ReferenceRange is invalid (i.e., we are in synthesized code).
We only want to perform closure specialization if we know that we will be able to change a partial_apply into an apply.
We re-use the histogram space as an "inverse color map", essentially a cache for the results of nearest-color searches.
We run multiple trials so that "a_b_c_abc" / matching "abc" is matched on the "abc" part / instead of the "a_b_c" part.
We use a very simple protocol for communicating over libafdt: One byte for the protocol version and a second code byte.
We use endswith here since if we specialize fatal error we will always prepend the specialization records to fatalName.
We want to do this as early as possible because any allocations before-hand will get a generic unknown type type-index.
We're going to pretend this instruction occured in the caller, so update its marker to use the same SrcKey as the call.
When there is a conflict, the addFront() API is supposed to replace the existing element with the new element in place.
all these instructions lower to parallel copyplans, which know how to load directly from constants or spilled locations
calls to this method are expected to come as a result of an error due to a requirement coming from traits or interfaces
if checkType and convertParam returned non-null values, param.value will have been updated with a phi of their results.
inout types are a special case for lowering, because they get completely removed and represented as 'address' SILTypes.
inout uses are generally straight-forward: the memory must be initialized before the "address" is passed as an l-value.
performNameBinding - Once parsing is complete, this walks the AST to / resolve names and do other top-level validation.
property_value The dbgp spec specifies property_value as property_get, except that the entire value is always returned.
resolveEdges() uses the sets to discover which intervals require copies on control flow edges due to having been split.
scanToken() will always get a new token from the frontier regardless of whether there are tokens in the lookahead store
strings with special characters will need to be quoted, as a safety measure we add 2 bytes for the quotes just in case.
********************************************************************* InitDynamic - Return a dynamically resizable void*
- true: documented value for success - null: undocumented default successful value - false: documented value for failure
/ / Existential types are nominal, so we potentially need to cast the / function to the appropriate object-pointer type.
/ / FIXME: SILGen doesn't currently allow local generic functions to / capture generic parameters from an outer context.
/ / It is the responsibility of the caller of this function to delete / the given ApplyInst when inlining is successful.
/ / This function performs brace and quote matching, keeping a stack of / outstanding delimiters as it scans the string.
/ If this returns a value other than SILValue() then the instruction was / simplified to a value which doesn't overflow.
0x9F, which ISO-8859 considers to be control characters but the IBM PC and Macintosh consider to be printing characters.
2) If the enum only has no-payload cases, only tag bits are necessary, with the cases mapping to integers, in AST order.
@unowned is basically like a reference type lowering except / it manipulates unowned reference counts instead of strong.
A function cast can succeed if the function types can be identical, or if the target type is throwier than the original.
A helper function with context that tries to emit member refs of nominal / types avoiding the conservative lvalue logic.
A mapping from abstract storage declarations with accessors to / to the type refinement contexts for those declarations.
A result plan which calls copyOrInitValueInto on an Initialization / using a temporary buffer initialized by a sub-plan.
Add the requirements for the given potential archetype and its nested / potential archetypes to the set of requirements.
Aggregate formation by themselves do not create new uses since it is their users that would create the appropriate uses.
Allow about one typo for every two properly-typed characters, which prevents completely-wacky suggestions in many cases.
And the first time a thread starts using the Treadmill it allocates a new thread id from s_nextThreadIdx with fetch_add.
Another thing to note about memory support is that we may have more bits set than the current lower bound for an object.
At this point we know for each predecessor of ArgBB if its reached over the success, failure or unknown path from DomBB.
At this point, we definitely know which types will be conservative scanned or not, so we do not need the guards anymore.
But we want the maximum correction applied to a pixel to be much less, otherwise obviously wrong pixels will be created.
Capture a pprof (C++) dump when we OOM a request TODO: (t3753133) Should dump a PHP-instrumented pprof dump here as well
Centralize try_get() calls to document that despite the scary name, it won't fail under any conditions we subject it to.
Check if the value of this alloc_stack is set only once by a store instruction, used only by CCABI and then deallocated.
Checks 4) and 5) below don't make sense for arcs corresponding to inlined calls and returns, so skip them in such cases.
Data beyond this point will be regenerated after resumption, so do not write it out when emptying the buffer externally.
Determine which colormap entries are close enough to be candidates for the nearest entry to some cell in the update box.
DosQueryAppType will return FAPPTYP_DOS on a file ending with ".com" (other than an OS/2 exe or Win exe with this name).
Each invocation of the match method returns the next type to check, returning nullptr if there's no more types to check.
Enter a cleanup to delete all the IGMs and their associated LLVMContexts that have been associated with the IRGenerator.
FIXME: Should be able to move a value from an extension in a derived module to the original definition in a base module.
FIXME: This hack tells us to prefer members of subprotocols over those of the protocols they inherit, if all else fails.
FIXME: We intentionally call SILClonerWithScopes here to ensure the debug scopes are set correctly for cloned functions.
For now, the fact that a declaration was not implemented in Swift is enough to conclusively force us into a slower path.
For now, we'll consider only the simplest induction variables: - Exactly one element in the cycle must be a SILArgument.
For reference, the total malloced memory usage could be calculated as such, if delta0 were recorded in resetStatsImpl():
For some invalid decls it might be impossible to compute the signature, for example, if the types could not be resolved.
Given the witness table vector from an existential object, find the / witness table corresponding to the given protocol.
Hack to make it process IDF1 I hope There are 2 IDFs, the second one holds the keys (0x0201 and 0x0202) to the thumbnail
Handle the cases where we didn't have enough preallocated Ents in tl_miter_table, and we need to allocate from `extras'.
If non-empty, the name of the field in the object which is a "flexible array" member (a trailing array of unbound size).
If only the destination label is within the statement associated with the current statement, just perform a direct jump.
If salvage produced an error message, then it failed to salvage the expression, just bail out having reported the error.
If so then we know that both this BB and the predecessor are boundaries of a loop that is not understood by SILLoopInfo.
If the base is an implicit self type reference, and we're in a property initializer, then the user wrote something like:
If the incoming values of all predecessors are equal usually this means that the common incoming value dominates the BB.
If the outer abstraction pattern is also a tuple, that result will also be expanded, in parallel with the inner pattern.
If the superclass is resilient to us, we cannot statically know the layout of either its instances or its class objects.
If there is a single removal range that covers everything but the trailing closure at the end, also zap the parentheses.
If there's a data pointer required, but it's a swift-retainable value being passed as the context, just forward it down.
If this import is specific to some named type or decl ("import Swift.int") then filter out any lookups that don't match.
If we find a "where", and there is a preceding item without a where, and if they are on the same source line, then warn.
If we get here, things are going to be slow anyway, so do all the autoloading logic in lookupFallbackFunc instead of ASM
If we got to the top of the block, (and if the instruction didn't start there) move the release to the top of the block.
If we have a function ref inst, we need to especially drop its function argument so that it gets a proper ref decrement.
If we have the SIL as our primary input, we can waive the one file requirement as long as all the other inputs are SIBs.
If we're close to a cache line boundary, just burn some space to try to keep the func and its body on fewer total lines.
If we're reading a .sil file, treat a call to "superinit" as a super.init call as a hack to allow us to write testcases.
In methods, strip the 'inout' off of 'self' so that mutating and non-mutating methods have the same self parameter type.
In other words, make sure there are no VM frames directly below this one and that we are not in a nested VM (reentrancy)
In profiling mode, don't trace through a control flow merge point, however, allow inlining of default parameter funclets
Initialize the value witness table and struct field offset vector for a / struct, using the "Universal" layout strategy.
Instantiate a value witness table for an opaque existential container with / the given number of witness table pointers.
It would have been cleverer if we'd used 'f' for thin functions and something else for uncurried functions, but oh well.
It's a collection, so either ThrowInvalidOperation, or return a constant depending on the type of comparison being done.
Join the CheckType to itself in case this is the first time we've seen it (i.e. it's not in the hoist group forest yet).
N1518: Recommendations for extended identifier characters for C and C++ Proposed Annex X.1: Ranges of characters allowed
NB: the m_evaledFiles map is only for the debugger, and could be omitted in RepoAuthoritative mode, but currently isn't.
NOTE: We only allow single-quote string literals so we can emit useful diagnostics about changing them to double quotes.
Note that it is always safe to read one over the end of "Bytes" because we know that there is a terminating " character.
Note that version 1 is the same format as version 0, so old receivers will not break when receiving a version 1 message.
Note that we check the module name to smooth over the difference between an imported Objective-C module and its overlay.
Note, this will not always be a constant, for example, when analyzing _convertFromBuiltinIntegerLiteral function itself.
Note: the ivar destroyer is responsible for destroying the instance variables before the object is actually deallocated.
Now we know that FirstIV is an enum and that all payloaded enum cases after just stripping off instructions are FirstIV.
Return false if we don't have a FrameState saved for `block' yet -- meaning it isn't reachable from the entry block yet.
Return true if we know for sure that one php::Class must derive from another at runtime, in all possible instantiations.
Returns true if the argument of this value is a single valued RValue / that is passed either at plus zero or is trivial.
Schedule the adviseOut instead of doing it immediately, so that the initial accesses to the primed keys are not too bad.
Since we have no way of knowing the true length either, we'll bump up our buffer size to a reasonable size, just in case
Since we'll be collapsing this call site, make sure there's another call site that will actually perform the invocation.
So, in order to infer the fully qualified name for any given class, the current scope is tracked as the DIEs are walked.
So, with bind/bindTo, if we are trying to bind an instance to a static closure, we just raise a warning and continue on.
Standard substitutions shouldn't start with 's' (because that's reserved for the swift module itself) or a digit or '_'.
Swift code already handles this, but we need to insert it for clang doc comments when not printing other clang comments.
The array may mutate itself in place and return the same pointer, or the array may allocate a new array and return that.
The call explicitly populates the struct for dirs, but returns false for them because it is geared toward file includes.
The difference with FPushClsMethod is what ends up on the ActRec (late-bound class), which we currently aren't tracking.
The finalizer on hybridData calls resetNative which will delete the object, if reseetNative has not already been called.
The ordering in the existential type metadata is by metadata pointer, which isn't necessarily stable across invocations.
The straight-forward way is to look for the DW_AT_object_pointer attribute (which is only present for member functions).
The variable-length output codes are re-sized at this point, and a special CLEAR code is generated for the decompressor.
There is only one container (not counting container1) so we can just call containerValuesToSetHelper() to build the Set.
These could be valid utf-8, but cannot be represented as modified UTF-8, due to the 20-bit limit on that representation.
These global references are created manually instead of using global_ref from References.h to avoid circular dependency.
These vectors are completely parallel, but the switch instructions want only the first information, so we split them up.
They can be used to highlight the location of the current breakpoint in the edit window of an attached IDE, for example.
This BlockState does not contain concrete value for any of the expanded locations, collect in this block's predecessors.
This DecRef never saw a refcounted type during profiling, so call the stub in cold, keeping only the type check in main.
This class maintains the table of scoped clones of itself, and if we create a new scoped clone, we need to map it there.
This enables us to get enum information from switch_enum and cond_br about the value that an enum can take in our block.
This ensures that an "unexpected diagnostic" and "expected diagnostic" in the same place are emitted next to each other.
This is done only for entry points using a new calling convention or for those entry points which explicitly require it.
This is not actually used, but is here for completeness, in case someone wants to use the HWB stuff for anything else...
This is the synchronous implementation of the command, the asynchronous part is managed by XDebugServer::pollSocketLoop.
This is true if a '*' constraint is present to say that the diagnostic may appear (or not) an uncounted number of times.
This is useful since in certain cases / due to dataflow issues, we cannot properly propagate the last use / information.
This maps out a portion of our executable We need to be very careful about what we do until we replace the original code
This means that the object is never passed to objc_setAssociatedObject, so its destructor cannot be extended at runtime.
This will make the unserializer to reserve an id for the element but won't allow referencing the element via 'r' or 'R'.
This will only schedule the given command if it has not been scheduled and if all of its inputs are in FinishedCommands.
Twelve of these alternating 29-30 day months gives a year of 354 days, which is about 11 1/4 days short of a solar year.
Unless its guaranteed to be all position independent, its "fixups" should have been passed into a relocate call earlier.
Unlike other declarations, extensions can be used without referring to them by name (they don't have one) in the source.
Use zend_strtod() instead of strtod() here since JSON specifies using a '.' for decimal separators regardless of locale.
We can quickly tell if this object is a collection, which lets us avoid checking for each class in turn if it's not one.
We don't actually track the U flavor (we treat it as a C), because there's nothing important to do with it for emission.
We don't support couldBe intelligently for interfaces quite yet, so here's a test that will start failing if we ever do:
We first serialize our number as a string, then we need to serialize any other public properties as an array after that.
We make up a unique usr for each extension by combining a prefix and the USR of the first value member of the extension.
We only do this as a second pass because the first pass we just did may return something of obviously non-function-type.
We put the 'newValue' argument before the subscript index list as a micro-optimization for Objective-C thunk generation.
When we are doing code completion, make sure to emit at least one diagnostic, so that ASTContext is marked as erroneous.
diagnoseProblems - After a function is fully parse, emit any diagnostics / for errors and return true if there were any.
fail fast if the post is too large, but only bother resolving host if content_length is larger than the minimum setting.
from the gnu manual: gethostname stores the beginning of the host name in name even if the host name won't entirely fit.
isStartOfUTF8Character - Return true if this isn't a UTF8 continuation / character, which will be of the form 0b10XXXXXX
we could run optimistic DSE on functions with less than 64 basic blocks / and 64 locations which is a sizeable function.
we could run optimistic RLE on functions with less than 64 basic blocks / and 64 locations which is a sizeable function.
(Note that this potentially includes conventions which pass indirectly without transferring ownership, like Itanium C++.)
/ / Array literal construction and array initialization of array values / associates element values with the array value.
/ / Note: Storage from a let property can only be removed if this / property can never be referenced from another module.
/ This is used for metadata accessors that come about due to resilience, / where the direct access is completely trivial.
1) If current state dictates a certain behavior, follow that Notes relating to ignored diagnostics should also be ignored
A map from the PossiblyUnreachableBlocks to the folded conditional / branches that caused each of them to be unreachable.
A special list of instructions known to access the current frame without explicitly depending on it are also blacklisted.
A visitor for traversing a pattern, creating / global accessor functions for all of the global variables declared inside.
Add all of the conformance and superclass requirements placed on the given generic parameters and their associated types.
After this we'll no longer be able to get this_ from Debugger::findProxy(), which means no new interrupts for this proxy.
ArrayData* EscalateForSort(ArrayData*, SortFunction)  Must be called before calling any of the sort routines on an array.
As the fact that it's not really a socket is an implementation detail, user code needs to be able to call shutdown on it.
Autoclosures look strange if there isn't a region, since it looks like control flow starts partway through an expression.
Bind the metadata instance to our local type data so we use it to provide metadata for generic parameters in field types.
By splitting critical edges we ensure that it's impossible to have an exit head that also has a side exiting predecessor.
Cast the base to i8*, apply the given inbounds offset (in bytes, / as a size_t), and cast to a pointer to the given type.
Cast the base to i8*, apply the given inbounds offset (in bytes, / as a size_t), and create an address in the given type.
Check whether we can hoist the dependent instructions resulting in the / array reference passed to the make_mutable call.
Checks if the given region is well-formed, which entails the following properties:  1) The region has at least one block.
Class member lookup table, which is a member lookup table with a second / table for lookup based on Objective-C selector.
Collect all the loop live out values in the map that maps original live out / value to live out value in the cloned loop.
Conformances for generics and concrete subclasses of generics are represented by referencing the nominal type descriptor.
Consider alpha in the foreground color itself to be an upper bound on how opaque things get, when truecolor is available.
Convert an AsyncFunctionWaitHandle-relative offset to an offset relative to either its contained ActRec or AsioBlockable.
Create a new Objective-C method corresponding to the given SIL value that / starts its search from the given search type.
Do a cached lookup under yet another key, just so later lookups using the SILType will find the same TypeLowering object.
Drop the reference to the current AFWH twice: - it is no longer being executed - it is no longer referenced by the parent
Each incoming value should be either from a block dominated by DomBB or it should be the value used in condition in DomBB
Enumerators are always stored within the enumeration, despite having the translation unit as their redeclaration context.
FIXME: These values are hardcoded from their previous IDL values Grab their correct values from the system as appropriate
FIXME: This check was tautological before the removal of AutoreleaseReturnInst, and it turns out that we're violating it.
FIXME: We shouldn't need to use the global context here, but something is persisting across calls to performIRGeneration.
FIXME: this assertion is absolutely correct, but it's currently fouled up by the presence of archetypes in substitutions.
Find out if the apply instruction contains any substitutions for a method itself, not for the class where it is declared.
First initialize the descriptor Notice that if no length is given, we initialize buf_end to the highest possible address.
For a fixed-size enum, this does a primitive load / of the representation and calls down to testFixedEnumContainsPayload.
For a non-member vardecl or one / which is not an override of a base class property, it performs a direct / storage load.
For in-tree builds this is the directory name, which is typically the same as the extension name converted to lower case.
For now, if you're binding output columns, it's better to use LAZY or BOUND fetches if you want to shave off those cycles
For types which have external linkage, this lets us use whatever naming scheme the compiler has chosen for unnamed types.
Format: attributes such as transparent, the callee's type, a value for the callee and a list of values for the arguments.
Furthermore, if the superclass is a generic context, we have to assume that its layout depends on its generic parameters.
Given any guaranteed arguments that are not being passed at +0, insert the decrement here instead of at the end of scope.
Heckbert-style quantizers vary a good deal in their policies for choosing the "largest" box and deciding where to cut it.
However the following ones can't read locals from our frame on the way out, except as a side effect of raising a warning.
However, headRoom comes from RuntimeOption::ServerMemoryHeadRoom, which isn't initialized until after the code here runs.
If all basic blocks will have their successors processed if the basic blocks in the functions are iterated in post order.
If b is the current buffer, then hphp_init_buffer was _probably_ called from hphprestart() or through yy_get_next_buffer.
If referencing the best method would produce an ambiguity and referencing the new method would not, we have a new "best".
If server is not yet started, e.g., when not running in server mode, or before server starts, we assume everything is OK.
If that didn't succeed, check whether this is an anonymous tag declaration with a corresponding typedef-name declaration.
If the calling context class is the same as the target class, and method is defined on this class, it must be accessible.
If the counterpart to the method we're attempting to import has the swift_private attribute, don't import as a subscript.
If the definition is a declaration, try to reconstruct a name and optionally an access path to the uninitialized element.
If the given VarDecl is a computed property whose getter always returns a / particular enum element, return that element.
If the hash is known key.entities should be missing otherwise it should exist, even as an empty array, so create it here.
If the outstanding weak retain count is 1 (i.e. only the initial weak retain), we can immediately call swift_slowDealloc.
If the program wasn't specified on the command-line, ala' -r, is no command-line parameter, read the PHP file from stdin.
If the token is not in the MemoryManager map, it means a pointer to the File has been stored directly in the XML context.
If there are no decrements between our ref count inst and terminator, sink the ref count inst into either our successors.
If we are doing second pass of code completion, we don't want to suddenly cut off parsing and throw away the declaration.
If we are returning a large unsigned value, we have to convert it back to a string since PHP only supports signed values.
If we are revisiting a block and asking for different required elements then anything that isn't agreeing is in conflict.
If we can not find a releases for all parts with reference semantics that means we did not find all release for the base.
If we got a default initializer, install it and re-type-check it to make sure it is properly coerced to the pattern type.
If we had a contextual type, then it either conforms to DictionaryLiteralConvertible or it is an invalid contextual type.
If we have a constructor with no parameters and a name with an argument name, synthesize a Void parameter with that name.
If we have a return, we place the release right before it so we know that it will be executed at the end of the epilogue.
If we parsed a bare closure as an expression, it will be a discarded value expression and the type checker will complain.
If we saw dynamic constants we cannot cache the enum values across requests as they may not be the same in every request.
In PHP 7 VerifyRetFail can coerce the return type in weak files-- even in a strict file we may still coerce int to float.
In that case, throw that off the stack and restore Mode::OBJECT so that we pretend the trailing comma just didn't happen.
Like the Ret* instructions, its manipulation of the runtime stack are outside the boundaries of the tracelet abstraction.
List of templates which should not be used to store request heap allocated values (because scanner aware variants exist).
Loads that have invariant memory locations still don't define SSATmps that are loop invariant (without further analysis).
Locations in the stores set may be stored to with a 'normal write barrier', decreffing the pointer that used to be there.
Logger flushes itself---we don't need to run any atexit handlers (historically we've mostly just SEGV'd while trying) ...
Look up profiling data for the Switch at the end of tid and decide which outgoing arcs, if any, to include in the region.
Maps functions to contexts that depend on information about that function, with information about the type of dependency.
More complicated way of expressing exposure time, so only use this value if we don't already have it from somewhere else.
NOTE: This function may refer to non-public symbols, which may lead to problems, if you ever try to inline this function.
Note this will also hit for unreachable code, but presumably we'll run DCE at some point after removing unreachable code.
Note, for example, that this means an array doesn't have to copy if it was asked to remove an element that doesn't exist.
Note: Amount of  allocation per character to be encoded may have to be increased as larger HTML Entities are implemented.
On Linux and FreeBSD (really, ELF binaries) we need to add objects to provide markers and size for the metadata sections.
One that references a status register that is used elsewhere and one that references an otherwise unused status register.
Otherwise, find the best path from one of the protocols directly conformed to by the protocol, then get that conformance.
Otherwise, we cannot resolve this because the available setter candidates are all mutating and the base must be mutating.
Prefer the original, potentially sugared version of the type if the type hasn't been mucked with by an optimization pass.
Recurse into the autoclosure body using the same sequence, but parenting to the autoclosure instead of the outer closure.
Reffiness guards are always at the beginning of the trace for now, so calculate the delta from the original sp to the ar.
Refs can never contain Uninit, so this lets us return UncountedInit rather than Uncounted, and InitCell rather than Cell.
Replace the terminator of BB with a simple branch if all successors go to trampoline jumps to the same destination block.
Returns the first instruction, starting from "startInst", with an accompanying exit block that dominates "dominatedInst".
Returns true if some declaration lexically enclosing the reference / matches the passed in predicate and false otherwise.
Since we're merging argument constraints, make sure that the representative tyvar is properly bound to the argument type.
So, basically, we just need to undo the changes made by getTypeOfReference and then reapply them on the substituted type.
Some builtin functions modify locals, read the varenv, or inspect the caller frame (e.g. for the value of m_thisOrClass).
Subtract the old jemalloc adjustment (delta0) and add the current one (delta) to arrive at the new combined usage number.
TODO: If this is the last use of the closure, and if it has internal linkage, we should remove it from the SILModule now.
TODO: In existential-to-existential casts, we should carry over common witness tables from the source to the destination.
TODO: The ordering of checks may benefit from using a PGO, because the most probable alternatives could be checked first.
The graphs are constructed after first computing information that allows us to process each must-alias-set independently.
The logic of `scaledIdx * 16` is split in the following two instructions, in order to save a byte in the shl instruction.
The only way an accessor can produce an lvalue is if we have a property where both the getter and setter are nonmutating.
The problem arises because, when lldb / uses swift to parse expressions, it needs to emulate the current / frame's scope.
There are a LOT of them, so they're separated out into include files, leaving this source file for actual implementation.
There's deliberately no BUILTIN clause here so that we'll blow up if new builtin categories are added there and not here.
These types don't actually get used to make Calling Convention choices - originally we were leaving them all at Normal...
They may occur if the body of a closure was not visited while pre-checking because of an error in the closure's signature
This is hella gross but saves us having to implement ObjCMethod-to-Explosion lowering and creating a thunk we don't want.
This is in glibc, which isn't a problem, except for the trampoline code in .plt, which we dealt with in the linker script
This is needed to balance the implicit release of all captured arguments that occurs when the partial apply is destroyed.
This is supposed to be handled by just not enqueuing things twice, but that gets tricky with synthesized function bodies.
This will require to merge the content nodes (and maybe other content nodes as well), because of the graph invariance 4).
To apply the bridged optimizations, we should ensure that types are not existential, and that not both types are classes.
To prevent these separators from being replaced with a space, we use the SKIP_LONG_HEADER_SEP_MBSTRING to skip over them.
Unless CHECK_ALL_PREFIX_DIRS is defined, we save the directory of the last file tested -- any common prefix should exist.
Verify that the type variables are either representatives or represented within their representative's equivalence class.
Walk the stack and find any return address to jitted code and bash it to the appropriate RetFromInterpreted*Frame helper.
We can still overflow the stack if there is a loop when using spl_autoload_call directly, but this behavior matches PHP5.
We can't handle the payload case here due to the flow problems caused by the dependency in between the enum and its data.
We can't return Float80, but we can receive a pointer to one, so switch the return type and the out parameter on strtold.
We need to mark DefInlineFP as both loading and storing the entire stack below its frame because it may have been pushed.
We use SelfObjectOfProtocol because an existential Boolean is allowed as a condition, but Boolean is not self-conforming.
We use a DFS order, always processing the left leafs first so that we match the order in which we will lay out arguments.
We use line1 here because it seems to be working better than line0 in a handful of cases for our bytecode-source mapping.
We want to do this first so that we can treat the rest of the bindings as inherently successful if we don't have a guard.
We want to synchronously shut down our satellite servers to free up ports, then asynchronously shut down everything else.
We're not copying the tombstones over to the new array, so the positions of the elements in the new array may be shifted.
We've potentially created some SSATmp's (that are defined by DefLabels), which have types that depend on their own types.
When a must-alias-set has any memory support bits set, it is going to be analyzed more conservatively than if it doesn't.
When supported, string hash functions using SSE 4.2 CRC32 instruction will be used, so we don't have to check every time.
XXX(t4592459): This will return 2 for TNull, even though it only needs 1 register (one for the type, none for the value).
buf_start is used for debugging  If the deserializer runs into bson it can't parse, it will dump the bytes to that point.
changeUnsetElementsTo - If any elements of this availability set are not / known yet, switch them to the specified value.
emitLazyCacheAccessFunction will see that the value was loaded from the guard variable and skip the redundant store back.
if you prepare and then execute passing an array of params keyed by names, then this will trigger, and we don't want that
other collection types are unsupported: - mapping collections require a key - immutable collections don't allow insertion
resolve_include() needs some way of checking the existence of a file path, which for hphpc means attempting to invoke it.
socket had an error earlier, we need to close it, remove it from persistent storage, and create a new one (in that order)
we don't get here if any parameter before the last has isUnpack() set, so the last one had better match containsUnpack().
/ This is used to disambiguate function overloads that would otherwise be / identical after opening their parameter types.
A description of an edge leading to a conditionally branching (or switching) / block and the successor block to thread to.
A struct is safe if either it implements the _DestructorSafeContainer protocol and all the type parameters are safe types.
A value that represents a statically-known function symbol that / can be called directly, represented as a StaticFunction.
A visitor for turning formal input types into SILParameterInfos, / matching the abstraction patterns of the original type.
AccKind should always be either IsGetter or IsSetter here, based on whether a reference is a mutating or non-mutating use.
After calling semget(), if a process finds that the usage count is 1, it will set the value of SYSVSEM_SEM to max_acquire.
All colors within a histogram cell will be mapped to the same colormap entry, namely the one closest to the cell's center.
Allocating/deallocating anything less than 1K is trivial these days, and we want avoid string copying as much as possible.
An Await opcode is used in the codegen for an async function to suspend execution until the given wait handle is finished.
Analyze the 'struct' instruction and check if it initializes any let properties by statically known constant initializers.
Check if the funcd of `inst' has any characteristics which prevent inlining, without peeking into its bytecode or regions.
Clone the original partially applied function into the new specialized / function, replacing some arguments with literals.
Create the LLVM function declaration for a thunk that acts like / an Objective-C method for a Swift method implementation.
Do a depth first search exploring all of the uses of the object pointer, following through casts, pointer adjustments etc.
During the optimize pass, we may add phis for the values known to be in memory locations at particular control-flow-joins.
Either this was a mutation that's going to fatal (property doesn't exist), or it's a private static or a protected static.
Emit a diagnostic with a fixit hint for an invalid binary operator, showing / how to split it according to splitCandidate.
Essentially what we now have is a set of tokens each consisting of a hexadecimal number followed by a separator character.
FIXME: This assumes that smashable calls and regular calls look the same, which is probably not true on non-x64 platforms.
FIXME: This is explicitly checking for attributes in some cases because it can be called before accessibility is computed.
FIXME: if we're missing 'override', but have the decl introducer we should delete it and re-add both in the correct order.
FIXME: merge requiresForeignEntryPoint() into getMethodDispatch() and add / an ObjectiveC case to the MethodDispatch enum.
Fixed-size loadable enums are represented as explosions of values, the address-only lowering uses more general operations.
Get the interface types of all of the captured values, mapped out of the / context of the callee we're partially applying.
Get the value out of the optional, and wrap it up with a cleanup so that any exits out of this scope properly clean it up.
Given an exploded enum payload consisting of consecutive word-sized chunks, cast them to their underlying component types.
Holds the distance information for a block in all it's scopes, i.e. in all / its containing loops and the function itself.
I include bell because some programs (particularly shell scripts) use it literally, even though it is rare in normal text.
If HH syntax is not enabled and we're not in the HH namespace, allow Hack-specific reserved names such "string" to be used
If an abstract class has any concrete subclasses, those classes will make sure the right entries are in the conflict sets.
If another thread in the sandbox fails to stop and consume the signal then it will be passed to the dummy sandbox instead.
If at the current lattice state, we don't care if the value we are tracking can be decremented or used, just return false.
If in an eagerly executed async function, not called by FCallAwait, wrap the return value into succeeded StaticWaitHandle.
If it is a class and it can be proven that this class and its superclasses cannot be extended, then it is safe to proceed.
If it needs a result, like subtract operations, the destination register must be filled considering the size of operation.
If not, construct SSA form by first calculating the required / placement of PHIs and then inserting new PHIs where needed.
If so, convert it / into a BraceStmt that can be used as the body of a control flow statement / to improve error recovery.
If so, we disambiguate the parse as the / start of a get-set block in a variable definition (not as a trailing / closure).
If the closure was created in the context of an array type signature's size expression, there will not be a local context.
If the enclosing scope is a DC directly, rather than a local scope, then the closure should be parented by an Initializer.
If the record provides a nondependent witness table for all instances of a generic type, cache it for the generic pattern.
If the result is indirect, and we have an address to emit into, and there are no abstraction differences, then just do it.
If the result type is a non-lvalue, then we are failing because it is immutable and that's not a great thing to assign to.
If the result wasn't computed, we must be analyzing code within an unreachable cycle that is not dominated by "TheMemory".
If the sourceDecl didn't explicitly name a raw value, this is the most / recent preceding decl with an explicit raw value.
If the type-scanners has non-conservative scanners, we must treat all unknown type-index allocations in the heap as roots.
If the variable has no initial value, emit a mark_uninitialized instruction so that DI tracks and enforces validity of it.
If there is a signal, it is passed as an interrupt to the proxy in an attempt to get other threads in the sandbox to stop.
If these destructors call restore_*_handler() they can trigger a pop_back() on the vector resulting in double destruction.
If this argument binds to the same parameter as the previous one or to a later parameter, just update the parameter index.
If this indexed type's action is conservative, examine guards (if any) to see if we want to ignore or conserative scan it.
If this is a conversion from T to () in a call argument context, it is almost certainly an extra argument being passed in.
If this is a loop, and depth is one, just allocate a fresh control target, since there are no more entries to delegate to.
If this is a vardecl with 'inout' type, then it is an inout argument to a function, never diagnose anything related to it.
If we created a new context and didn't run into any autoclosures during the walk, give the context back to the ASTContext.
If we delayed any extension declarations because we didn't have a resolver then, but we have a resolver now, process them.
If we didn't escape or reprocess anything, then we don't need to use the temporary string, just point to the original one.
If we found a candidate list with a recursive walk, try adjust the curry level for the applied subexpression in this call.
If we have a type for that, capture it so that we can calculate a substituted type, which resolves many generic arguments.
If we have any conflicting values, explicitly mask them out of the result, so we don't pick one arbitrary available value.
If we know that an RC root can't be released at a basic block, then we know we do not need to consider it for the killset.
If we know that an RC root can't be retained at a basic block, then we know we do not need to consider it for the killset.
If we visited an increment or decrement successfully (and thus Op is set), if this is the state for this operand, skip it.
If we're currently doing rethrows-checking on the body of the function which declares the parameter, it's rethrowing-only.
If we're returning a +1 value, emit a cleanup for the member to cover for the cleanup we disabled for the tuple aggregate.
If will probably be a common typo to write "if let case" instead of "if case let" so detect this and produce a nice fixit.
In the event that an invalid digit is found, halt the conversion and return the portion which has been converted thus far.
In the first iteration we have to merge the summary graphs, even if they didn't change (in not recomputed leaf functions).
Increment the ref count for the inlined function, so it doesn't get deleted before we can emit abstract debug info for it.
Inexact metadata will be a problem if we ever try to use this to remember that we already have the metadata for something.
Instantiate a value witness table for an existential metatype / container with the given number of witness table pointers.
It could be overridden by a computed property in a subclass, but that's not likely enough to be worth the strictness here.
It tries to pass all variadic arguments by reference, but it also allow expressions that cannot be taken by reference (ex.
It's okay to deactivate a cleanup for a / TakeOnSuccess value and then introduce new cleanups for all of its / subobjects.
Iterate over all dependent types in the generic signature, which will match the specialized attribute's substitution list.
Iterator bytecodes have multiple local immediates but not the Local flag, so they should never flow through this function.
Keep track of backend options so we can embed them in a separate data section and use them when building from the bitcode.
Keep type metadata around for all types, although the runtime can currently only perform name lookup of non-generic types.
Long enough to get past the "mmap punts at 0 bytes" thing, but short enough to trip an attempted read of the magic number.
Look inside the binary 'Bin' and append any linker flags found in its ".swift1_autolink_entries" section to 'LinkerFlags'.
Memoize throws in the emitter if any function parameters are references, so we can just assert that the param is cell here
NB: VerifyParamType of a reference parameter can kill any references if it re-enters, even if Option::HardTypeHints is on.
Normal HHVM extensions have the luxury of only when such a thing will be attempted, but we have no way to know in advance.
Note that doing this tends to strand the false code after everything else in the function, so maybe it's not a great idea.
Note that if elements are added or removed from the array, the value of the array's canonical invalid position may change.
Note that it is illegal for the driver to take a reference to param, as it resides in transient storage only at this time.
Note that we assume that this projection is safe for the particular case of an optional class-reference or metatype value.
Note: if you add new supported type tests, you should update negativeCheckType() to indicate whether it is precise or not.
Note: it's tempting to say every unique ClassInfo object has an AttrUnique class, but that may or may not apply right now.
Only in the event that we are currently in the process of an io, will we output the iostatus, and ioInProcessDuationMicros
Otherwise, if we are in an extension there might be other associated types brought into the context through `extension ...
Perform the same checks as conformance witness matching, but silently ignore the candidate instead of diagnosing anything.
Plan the emission of a call result as a single outer direct result, / given that the inner abstraction pattern is a tuple.
Predecessors which do not satisfy these conditions are not included in the BBToValue map (but we don't bail in this case).
Produce a reference to the member, the type of the container it resides in, and the type produced by the reference itself.
Recontextualize any closure declcontexts nested in the initializer to realize that they are in the initialization context.
Replace the given conditional branching instruction with a plain jump (aka unconditional branch) to the destination block.
Save the conformances from the substitution so that we can substitute them into substitutions that map between archetypes.
Setting one of these variables forces the STL default allocator to call new() or delete() for each allocation or deletion.
Since incompleteQ is ordered, we'll always visit blocks with earlier RPO ids first, which hopefully means less iterations.
Since we have two arrays, we need to manually tail allocate each of them, rather than relying on the flexible array trick.
Skip tid if its weight is below the JitPGOMinBlockPercent percentage of the weight of the block where this region started.
Sometimes calls to builtin functions are inlined so that the call itself can occur via CallBuiltin rather than NativeImpl.
Split all critical edges in the function updating the dominator tree and / loop information (if they are not set to null).
Stack these in tmp (autoboxed to int64_t) until we fill the GP regs, or we run out of args (in which case we'll pad them).
TODO: If function context arguments were given objc retain counts, we wouldn't need to create a separate heap object here.
TODO: We shouldn't be able to get an lvalue here, but the AST sometimes produces an inout base for non-mutating accessors.
TODO: closures in a non-class scope should be neither static nor non-static, but right now we don't really have this idea.
Take a value out of the source inner result address, reabstract / it, and initialize the destination outer result address.
The 2/3/1 scale factors used here correspond loosely to the relative weights of the colors in the NTSC grayscale equation.
The FP in succ came directly from pred, but pred now has a new FP, simply update all instances of predOldFp with predCurFp
The Objective-C runtime will copy field offsets from the field offset vector into field offset globals for us, if present.
The benefit if the operand of an apply gets constant, e.g. if a closure / is passed to an apply instruction in the callee.
The callable should generate the proper instruction(s) to perform the comparison operation which matches the given opcode.
The first two cases are simple to handle, whereas the partial case requires dynamic codegen based on the liveness bitmask.
The flattening of traits may result in requirements migrating from the trait's declaration into that of the "using" class.
The output is only an estimation because all printed numbers are LLVM instruction counts rather than real code size bytes.
The representation of an existential metatype remains consistent arbitrarily deep: a metatype, followed by some protocols.
There is an infinitesimally small chance that the first four bytes will happen to be the length of the rest of the string.
These are important uses that we'll visit, but we don't consider them definition points for liveness computation purposes.
This allows for un-accepted connections to be queued and then wait until all queued requests are actively being processed.
This can include retains which is why we always attempt to move releases up the CFG before sinking code from predecessors.
This causes us to only perform alias queries when we are at a lattice state where the alias queries will actually be used.
This check_header() function is copied from zlib 1.2.3 and re-factored to work with in-memory buffers (than file streams).
This is the "Composite Document File" format, and not the "Compound Document Format", nor the "Channel Definition Format".
This occurs when a swift_name'd entity becomes a member of an entity that follows it in the translation unit, e.g., given:
This sets up a guard for each piece of translated code to ensure we punt to the interpreter when the debugger is attached.
This will prevent someone from doing a build without debug info and silently getting conservative scanning for everything.
This wrapper temporarily turns off the exception throwing bit if it has been set (by calling mongo_cursor_throw() before).
Thunks for class method witnesses dispatch through the vtable allowing inherited witnesses to be overridden in subclasses.
To conform to PHP behavior, we invalidate all strong iterators when an element is removed from the beginning of the array.
To get around that, we wrap the initialization in a function so s_impl will get initialized the first time it gets called.
Translate from the AST function representation enum to the Serialization enum / values, which are guaranteed to be stable.
Update block succ to either use the FP from pred, phi the FP from pred with FPs of other predecessors, or define a new FP.
Various minstr opcodes that take a PtrToGen in src 0, which may or may not point to a frame local or the evaluation stack.
We also treat it as loading an entire ActRec-sized part of the stack, although it only loads the slot containing the Func.
We always emit an access function for conformances, and in principle it is always possible to just use that here directly.
We assume for performance reasons in repo authoriative mode that we can see all the sets to private properties in a class.
We can't do a byte load here---we have to sign-extend since we use `type' as a 32-bit array index to the destructor table.
We can't rely on GMP's auto-base detection as it doesn't handle cases where a base is specified AND a prefix is specified.
We do this to avoid eliminating apparently redundant assert opcodes that may become useful after prior guards are relaxed.
We do this with a simple linear scan, because transparent functions that reference each other have already been flattened.
We don't want two copies of Archetype being serialized, one by serializing genericArgs, the other by serializing the Decl.
We generally do this by creating a REPL metavariable (e.g. r4) to hold the result, so it can be referred to in the future.
We know it's not boxed (setRef above handles that), and the helper has already decref'd the old array and incref'd newArr.
We know the witness thunk and the corresponding set of substitutions required to invoke the protocol method at this point.
We need to expand all implied conformances before we can find those conformances that pertain to this declaration context.
We need to step over this opcode, then grab the created AsyncFunctionWaitHandle and setup stepping like we do for OpAwait.
We take format as a variant in order to get the right conversion failure notice (as opposed to parameter typehint warning)
We're going to build an RValue here, so make sure we translate indirect arguments to be scalar if we have a loadable type.
When deep is false Element nodes still require the attributes Following taken from libxml as xmlDocCopyNode doesnt do this
When given a null buffer, swift_demangle_getDemangledName should still be able to return the size of the demangled string.
`getReturn` needs to know whether a generator finished successfully or whether an exception occurred during its execution.
find the best successor, which is the one to which cid has the highest weight among the ones that haven't been visited yet
gdDPExtractData is the exception to this: it will return the pointer to the internal data, and reset the internal storage.
iopWrapper is used to normalize the calling convention for the iop* functions, since some return void and some return TCA.
lazy is not allowed on a lazily initialized global variable or on a static property (which is already lazily initialized).
m_breakpoints is initially set to the breakpoints collection of the client (in validate, which indirectly calls sendImpl).
rewriteAllocBoxAsAllocStack - Replace uses of the alloc_box with a / new alloc_stack, but do not delete the alloc_box yet.
sf_var is the physical SF register, computed from the union of VregSF registers by computeLiveness() and buildIntervals().
the original unresolved type structure came from a type constant (instead of a type alias), and may have this/self/parent.
willSet/didSet implementations are never exposed to objc, they are always directly dispatched from the synthesized setter.
(materializeForSet has to do this, for one.)  The onus is on the caller to ensure that formal access semantics are honored.
/ / Because these are builtin operations, we can make some structural / assumptions about the expression used to call them.
/ / If we are unable to find all uses, for example, because we don't look / through struct_element_addr, then return false.
/ / In the case that a non-null value is returned, FullArgs contains effective / argument operands for the callee function.
/ / The copy will be eliminated if the original is not accessed between the / point of copy and the original's destruction.
/ We calculate it on demand, so that we don't have to do it if the / function does not have any stack promoted allocations.
A constraint that binds any pointer to a void pointer is ineffective, since any pointer can be converted to a void pointer.
Also perform the same recovery as the main parser to capture tokens from this decl that are past the code completion token.
Apparently, the same logic can be used recursively on the something, so there is an infinite chain of blocked wait handles.
Array comparisons can produce arbitrary side-effects, so we can only eliminate the comparison if its checking for sameness.
As above, the Objective-C runtime will slide the field offsets within the class metadata to adjust for the superclass size.
Attempt to diagnose a failure without taking into account the specific / kind of expression that could not be type checked.
Because of other codepaths, an un-normalized name might enter the table without a Class* so we need to check if it's there.
Builds the type refinement hierarchy for the IfStmt if the guard / introduces a new refinement context for the Then branch.
Check for stack overflow in the same place func prologues make their StackCheck::Early check (see irgen-func-prologue.cpp).
Check whether rObjClass points to a strict subclass of rTestClass, set dst with the bool true/false result, and return dst.
Conservative whitelist for HHBC opcodes we know are safe to inline, even if the entire callee body required a AttrMayUseVV.
Copy the use vars to instance variables, and initialize any instance properties that are for static locals to KindOfUninit.
Data beyond this point must be rescanned after resumption, so move it to the front of the buffer rather than discarding it.
Default implementation is conservative: assume we use all of our inputs, and can't be removed even if our output is unused.
Determine which of the successors is unreachable and create a new terminator that only branches to the reachable successor.
Don't prune redundant type information from the base name if there is a corresponding property (either singular or plural).
ELF executables have multiple section headers in arbitrary file locations and thus file(1) cannot determine it from easily.
FIXME: Even implicit Stmts should have proper ranges that include any non-implicit Stmts (fix Stmts created for lazy vars).
FIXME: Might want to warn about this in debug builds, so we can find a way to eliminate the redundancy in the search space.
Fast path: if the unsubstituted type from the variable equals the substituted type from the l-value, there's nothing to do.
First try to detect BOM: ZERO WIDTH NOBREAK SPACE (FEFF 16) since we have no encoding support for the BOM yet we skip that.
For it to be a valid split, the start and end section must be valid operators, splitting a unicode code point isn't kosher.
For non consumed parameters (e.g. guaranteed), we also need to insert releases after each apply instruction that we create.
For non-trivial types, insert destroys for each final release-like instruction we found that isn't an explicit dealloc_box.
Given an RValue of aggregate type, compute the values of the elements by / emitting a series of tuple_element instructions.
Go make sure that type declarations that would act as witnesses did not get injected while we were performing checks above.
If BB is trivially unreachable, remove it from the worklist, add its successors to the worklist, and then remove the block.
If all basic blocks will have their predecessors processed if the basic blocks in the functions are iterated in post order.
If an unbound generic type was spelled in the source (e.g. `case Optional.None:`) this will fill in the generic parameters.
If any modules have been loaded since we did the search last (or if we hadn't searched before), look in those modules, too.
If arg is not an ignorable tester, but we are an ignorable tester, we need to be inserted into the constructed testers set.
If both a given integer x and its equivalent string presentation were both keys in the collection, we better warn the user.
If casting among classes, and there are open type variables remaining, introduce a subtype constraint to help resolve them.
If that happens, we'll have to wrap getServiceDataInstance around a pthread_once and pay some runtime synchronization cost.
If the argument is already lowered to an LValue, it must be the receiver of a self argument, which will be the first inout.
If the current context is not a generic type context, returns / the maximum depth of any generic parameter in this context.
If the destination type is a foreign class or a non-specific class-bounded archetype, use the most general cast entrypoint.
If the element decl was not resolved (because it was spelled without a type as `.Foo`), resolve it now that we have a type.
If the transfer is doable bitwise, and if the elements of the explosion are the same type, then just transfer the elements.
If the tuple element starts with "ident :", then the identifier is an element tag, and it is followed by a type annotation.
If we are appending to the end of a block being constructed, then we create a new basic block to continue cons'ing up code.
If we failed to find the decl a clean and principled way, try hacks: map back to the AST and look for some common patterns.
If we have a partial_apply, release each captured argument at each one of the final release locations of the partial apply.
If we have a strong_release or a release_value, see if our parameter is in an array semantic guaranteed self call sequence.
If we have a trivial bit cast between trivial types, it is not something that can use ref count ops in a way we care about.
If we ignore all unknown write, what's the maximum set / of available locations at the current position in the basic block.
If we specialized this on Vector we could use a DecRefNZ here (since we could assume that initElem has incref'd the value).
If we've never seen this nominal type before, or if we have an out-of-date negative cached value, we'll have to go looking.
Make sure constants for true and false exist before doing anything, so we can use them without having to create more Vregs.
Marker that instances of the type with this type index do not represent actual heap allocations (we only want the scanner).
ModuleFilename can be empty if something strange happened during module loading, for example, the module file is corrupted.
Most of this function is about tuples: tuples can be represented as one or many values, with varying levels of indirection.
NodeScope - almost a POD, but needs to call the constructors for the scoped hash tables so that a new scope gets pushed on.
Note, however, that we will override this decision below if the only thing we have to forward is already a context pointer.
Otherwise, create it and remember that this is a forward reference so that we can diagnose use without definition problems.
Otherwise, we have a normal var or subscript declaration, parse the full complement of specifiers, along with their bodies.
PGO can significantly increase the size of the regions, so disable it for pseudo-mains (so regions will be just tracelets).
Plan the emission of a call result from an inner result address, / given that the outer abstraction pattern is not a tuple.
Plan the emission of a call result into an outer result address, / given that the inner abstraction pattern is not a tuple.
Resilient tag numbering decreases for payload tags, so reverse the payload tags if this enum is resilient from any context.
Semantic checks ensure that the return annotation is "Awaitable" or "WaitHandle" and that it has at most one type parameter
Setup the VarLocs to point to the incoming args and setup initialization so any args needing cleanup will get that as well.
Since `CapCode::Threshold + 1' is a small size class (it should always be a power of 2), the threshold for string length is
Since the union is made of all of the fields at once, this is a trivial accessor that casts self to the correct field type.
Skip the translation of this instruction (the FPush) -and- the next instruction (the FCall) if singleton inlining succeeds.
Substitute the `Self` type from a protocol conformance into a protocol / requirement's type to get the type of the witness.
TODO: When there's a store or copy_addr immediately into the box, peephole it into the initializer parameter to allocError.
Take into account even those functions that should not be optimized, because they may contain access to the let properties.
The / read or stored value, kept in a map between LSLocation and LSValue, / becomes the available value for the LSLocation.
The case-exit will have left us in a normal insertion state (i.e. not a post-terminator IP) with nothing to clean up after.
The design is that the compiler will emit a load of this / pointer, and the linker will ensure that that pointer is unique.
The instruction was a pure load, and its value was known to be available in `knownValue', with best known type `knownType'.
The lowered type is the formal type, but uncurried and with parameters automatically turned into their bridged equivalents.
The notion of a / near miss is used to refine overload sets to a smaller candidate set that is / the most relevant options.
The object is hooked into hphp_session_init() and hphp_context_shutdown() to be init'd and reset'd at the end of a request.
The results of a try_apply are not only the normal and error return values, but also the decision whether it throws or not.
The set of associated types that have been inferred by matching / the given value witness to its corresponding requirement.
Therefore we will potentially see a load of the array struct if there are mutating functions in the loop on the same array.
They may reject some Statics in some situations, where we only guard using the type tag and not by loading the count field.
This / provides a convenient place to specify the refined range when it is / different than the declaration's source range.
This all applies only for direct calls to assert() -- dynamic calls don't get this special logic, and don't in PHP7 either.
This can happen, in case the replicaset name was not given, but just bool(true) (or string("1")) in the connection options.
This catches the case where the last path piece we saw was an Extension path piece, which is not a valid way to end a path.
This has to occur first during type checking, because the extensions need to be wired into the AST for name lookup to work.
This is a kind of hacky way to avoid hitting an assert in recordGdbStub when we call it with stub - 1 as the start address.
This is a little safety check for instances when we are dealing with a regenerated session that was not yet written to disk
This is best for palette images, and libpng defaults to it for palette images anyway, so we don't need to do it explicitly.
This one is special because lookup is performed against the base module, rather than against the previous link in the path.
This will be useful for type checker diagnostics when a user tries to use the Objective-C/C type instead of the Swift type.
Transition the generator into either the Priming state (if we were just created) or the Running state (if we were started).
Type check a function body (defined with the func keyword) that is either a named function or an anonymous func expression.
UnsafePointer can also be converted from an array or string value, or a UnsafePointer or AutoreleasingUnsafeMutablePointer.
Used to find the last uses of partial_apply, which is need to insert releases/destroys of temporaries as early as possible.
We can't just reference the data in the TemporaryFiles vector because that could theoretically get copied to a new address.
We could print an error about "v" instead of "v.0" when "v" has tuple type and the whole thing is accessed inappropriately.
We could support dest addrs here, but it can't actually happen with the current limitations on default arguments in tuples.
We have an intervening nominal type context that is not the declaration context, and the declaration context is not global.
We know that the profiler is not attached, so either we failed the request init checks or it was turned off during runtime.
We may not go to dominated blocks outside the loop, because we didn't check for safety outside the loop (with ABCAnalysis).
We occasionally end up with disjunction constraints containing an original constraint along with one considered with a fix.
We only checked that our delegate is an object, but we can't get into this situation if the object itself isn't a Generator
We simply assume that by the end of the delay no threads should be still referencing m_prevFile and we can safely close it.
We want "dynamicCastFailure" to appear in crash logs even we crash  during the diagnostic because some Metadata is invalid.
We want to replace dead terminators with unconditional branches to the nearest post-dominator that has useful instructions.
enableDiagnosticVerifier - Set up the specified source manager so that / diagnostics are captured instead of being printed.
error_log() should not invoke the user error handler, so we use Logger::Error() instead of raise_warning() or raise_error()
m_spl_stack_inited will be re-initialized by the next requestInit m_handlers will be re-initialized by the next requestInit
manual call to Logger instead of logError as we need to use evalFileName and line as the exception doesn't track the eval()
we add 1 or 2 to the pointers so we don't end up with all 0s, as the interesting stuff is at the end for big endian systems
we've got an unterminated enclosure, assign all the data from the start of the enclosure to end of data to the last element
/ / *NOTE* We have to be careful here since exiting blocks may include BBs / that have been subsumed into a subloop already.
/ / Do not form a path with an IndexAddrInst because we have no way to / distinguish between indexing and subelement access.
/ / We have to prove that the size of the array value is not changed in between / the creation and the method call to count.
/ / When checking if two signatures should be equivalent for overloading, / we may need to compare the extended information.
/ The debug locations and scopes of all functions and instructions are changed / to point to the generated SIL output files.
A freed stub may be released by Treadmill more than once if multiple threads execute the service request before it is freed.
Add variable bindings from the pattern to our current scope and mark them as being having a non-pattern-binding initializer.
Added runtime option to change m_scriptFilename to s_pathTran which will allow mod_fastcgi and mod_action to work correctly.
Ask the handler (that can be an analysis, a pass, or some other data structure) if it wants to receive delete notifications.
But to do that they need to be able to initialize all properties, i.e. all properties should be accessible by the extension.
Check if any indirect subclasses use an implementation of the method different from the implementation in the current class.
Check that the Objective-C method(s) provided by the witness have / the same selectors as those required by the requirement.
Check that the given inner region is valid, within the outer region, and the inner region boundaries are exact instructions.
Check to see if the specified VarDecl is part of a larger / PatternBindingDecl, where some other bound variable was mutated.
Collections can't contain refs, so check for any refs in the input array and look for int-like string keys at the same time.
ComputeMaxStoreSet - If we ignore all reads, what is the max store set that / can reach a particular point in a basic block.
Create a temporary address suitable for passing to the given inner / indirect result and add it as an inner indirect result.
Do the tar test first, because if the first file in the tar archive starts with a dot, we can confuse it with an nroff file.
Each SrcKey in m_typePredictions, m_preConditions, m_byRefs, m_refPreds, and m_knownFuncs is within the bounds of the block.
Emit the retain that matches the captured argument by the partial_apply in the callee that is consumed by the partial_apply.
FIXME: callWitness() may end up re-doing some work we already did to convert the array literal elements to the element type.
For known conditional jumps we have to consume the const value on the top of the stack and figure out which branch to go to.
For polymorphic functions, bail if the number of substitutions is not the same as the number of expected generic parameters.
Forcefully always compile this unit with debug enabled, to permit mixing and matching of optimized and unoptimized binaries.
Forward captures of functions are OK, if the function doesn't transitively capture variables ahead of the original function.
Frontier for the "local" part of the persistent region (data not shared between threads, but not zero'd)---downward-growing.
If QUALITY is negative, the IJG JPEG library's default quality is used (which should be near optimal for many applications).
If a declaration was provided instead of a location, and that declaration has a location we can point to, use that location.
If assertions are on, before we do anything, each region makes a call to a C++ function that checks the state of everything.
If it doesn't start with a number, then we know it can never collide with an int or any of our constants, so it's fine as is
If its not within a namespace (IE, within a class), give it a unique name based on how many unnamed types we've seen so far.
If loadable, it's better to do this directly to the value than in place, so we don't need to RMW out the tag bits in memory.
If the first argument name doesn't start with a preposition, and the method name doesn't end with a preposition, add "with".
If the instanceSize of the superclass equals the stored instanceStart of the subclass, the ivar offsets will not be changed.
If the members agree on instance-ness, a property is better than a method (because a method is usually immediately invoked).
If the overall memory allocation has multiple elements, then dive in to explain *which* element is being used uninitialized.
If the referenced decl is a local func with context, then the SILDeclRef uncurry level is one deeper (for the context vars).
If this candidate otherwise matched but was marked unavailable, then treat it as unavailable, which is a very close failure.
If this is a call to a method in a class initializer, then it must be a use of self before the stored properties are set up.
If this requirement has a different name from one we've seen, bail out and let protocol-conformance diagnostics handle this.
If this swift_name attribute maps a factory method to an initializer and we were asked not to do so, ignore the custom name.
If we are accessing different fields of a common object, the two projection paths may have a non-empty symmetric difference.
If we are asked to just emit a declaration, return the declaration and say that the witness table is not fully deserialized.
If we are not tracking a ref count inst for this increment, there is nothing we can pair it with implying we should skip it.
If we didn't find any delegating or chained initializers, check whether the initializer was explicitly marked 'convenience'.
If we don't have any such state, then the predecessor must be unreachable from the entrance and thus is uninteresting to us.
If we end up here with a stored property of a type that's resilient from some resilience domain, we cannot do direct access.
If we have an OptStr with a value, we can at least exclude the possibility of integer-like strings by looking at that value.
If we set up an initialization context for a property or module-level global, check to see if we needed it and wind it down.
If when we're done alreadyValid is false, and pvalid is also nullptr, it means this function freed the last strong iterator.
In Sticky mode, the current thread continues to block others (even while running) until the mode is switched back to Normal.
In cases where there is no parent EnumCaseDecl (such as imported or deserialized elements), print the element independently.
In order to be consistent, we have to make sure we add the good amount of nulls depending on the current number of elements.
Indirect parameters are passed as owned, so we also need to pass the direct parameter as owned (except it's a trivial type).
Information about the definition of a virtual register, if it was defined by either copying or lea'ing off another register.
Initial sources code is avaibable in the Gems Source Code Packages: http://www.acm.org/pubs/tog/GraphicsGems/GGemsIII.tar.gz
Initialize in the zend extension compatibility layer, as needed before any calls from legacy zend extensions to zend_strtod.
It is a common error to try to capture a nested field instead of just a local name, reject it with a specific error message.
LdContActRec and LdAFWHActRec, loading a generator's AR, is the only time we have a pointer to an AR that is not in rvmfp().
Look through the type variables that have bindings in all of the solutions, and add those that have differences to the diff.
MSVC gets confused if we try to directly assign the template overload, so use a temporary and let the optimizer sort it out.
Make an ArgGroup for array elem instructions that takes: 1/ the ArrayData* (or pointer to a KindOfArray TV) 2/ the index key
Needs to modify locals after doing effectful operations like converting things to strings, so we can't guard on their types.
Note: InstanceOfD can do autoload if the type might be a type alias, so it's not nothrow unless we know it's an object type.
Object comparisons can produce arbitrary side-effects, so we can only eliminate the comparison if its checking for sameness.
Optimization that tries to hoist CheckType instructions so that we can specialize code earlier and avoid generic operations.
Optimize away the pattern below that happens when exceptions are created and in some cases, due to inlining, are not needed.
Otherwise, go satisfy the derivable requirement, which can introduce a member that could in turn satisfy *this* requirement.
Prior to calling this routine, `uses' should contain the direct (non-transitive) use counts of each DefInlineFP instruction.
Propagate across the taken edge if there is one, first doing any may-decrefs that only occur if the taken edge is traversed.
Propagation of liveness needs to use this (always more conservative) set instead of kill when crossing a factored exit edge.
Recursively add the given protocol and its inherited protocols to the / given vector, guarded by the known set of protocols.
Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
Return a function which takes two pointer arguments, memcpys / from the second to the first, and returns the first argument.
Return an id for the semaphore with the given key, and allow max_acquire (default 1) processes to acquire it simultaneously.
Returns the common word-prefix of two strings, allowing the second string / to be a common English plural form of the first.
Right now this is just RuntimeOption::SourceRoot but mwilliams wants to fix it so it is settable, so I'll leave this for now
Semaphore 0 (SYSVSEM_SEM) is the actual semaphore, it is initialized to max_acquire and decremented as processes acquire it.
Sends an ismaster command to the server to find server flags  Returns 1 when it worked, and 0 when an error was encountered.
Set of ids of the other MustAliasSets that this set may alias, in a flow insensitive way, and not including this set itself.
Since the / anonymous type is imported as a nested type of the outer type, this / generated name will most likely be unique.
So before we leave, update the marker to placate EndCatch assertions, which is trying to detect failure to do this properly.
So we find the caller's FP, compensate for its locals and iterators, and then we've found the base of the generator's stack.
Starting from currBC, find the next bytecode with a non-empty x86 range that could potentially correspond to instruction ip.
Substitute the 'Self' type into the requirement to get the concrete witness type, leaving the other generic parameters open.
TODO: We could use isUniquelyReferenced to shorten the duration of the box to the point that the opaque value is copied out.
That shouldn't ever happen today, though, since we only ever indirect the 'self' parameter of functions imported as methods.
The BaseS* bytecodes consume the Class from the eval stack so the final operations don't have to expect an A-flavored input.
The reason why this is ok to do is currently we only perform closure specialization if we know the function_ref in question.
The scope is tracked as a stack of contexts, pushing and popping off contexts when a namespace or type is entered or exited.
The vastly most common case is memory allocations that are not tuples, so special case this with a more efficient algorithm.
There doesn't appear to be a complete definition of this type anywhere, so just return the incomplete object representation.
These conversions are between concrete types that don't need further resolution, so we can consider them immediately solved.
These two operations must follow the same rules for column placement because 'arguments' are parallel to the matrix columns.
They must also define a function called collectionVsNonObj() which is used when comparing collections with non-object types.
This file implements the ConcreteDeclRef class, which provides a reference to a declaration that is potentially specialized.
This function is logically 'readnone': the caller does not need to reason about any side effects or stores it might perform.
This gives a return value similar to that from fcvt, except that trailing zeros are suppressed, and ndigits can be negative.
This is not a correctness check, but we only want to the optimization if the condition gets dead after moving the cond_fail.
This is okay, since all IterAdvance() impls handle this correctly, but it means that EmptyArray::IterAdvance() is reachable.
This is safe without any extra dominator checks because we know that there are no preds that don't have the value available.
This leads to more efficient code because the service request stubs will patch jumps in the main trace instead of off-trace.
This might overwrite the hash table, but won't overrun the allocated space as long as `malloc' returns multiple of 16 bytes.
This node can be null (ParentTy()), / indicating that custom logic elsewhere will handle removing / the context when needed.
This search is potentially slow, so we do it last and only if the reference declaration context is a type or global context.
This way the DW_AT_APPLE_runtime_class(DW_LANG_Swift) attribute can be used to differentiate them from C++ and ObjC classes.
Thus as long as we use indices, we will visit all exiting block edges appropriately and not deal with touching stale memory.
To avoid repeated crashes, used to notify the service to delay typechecking / in the editor for a certain amount of seconds.
Track all the managed elements whether or not we're actually emitting to an address, just so that we can disable them after.
Under these conditions if x is loadable then we can even load the given value and pass it as a scalar instead of an address.
Uses the provided Builder to insert a try_apply at the given / SILLocation and generates control flow to handle the rethrow.
Validate the mutating attribute if present, and install it into the bit on funcdecl (instead of just being a DeclAttribute).
Walk through the given block, undoing any fallbackcc/bindjcc optimizations that happen in an area where spill space is live.
We also assume all the locals in the mayReadLocalSet must be added to the live local set, and don't remove anything from it.
We also make an exception for main, which, albeit it does not have a Swift name, does appear prominently in the source code.
We do this last so that the region ends up in (quasi-)topological order (it'll be in topological order for acyclic regions).
We don't want to complain about them, because we might already have complained about redeclarations based on Swift matching.
We force a recheck, because "expr" is likely in our table with the extra contextual constraint that we know we are relaxing.
We need to check AttrTrait on the function in case it came from a pre-flattened trait (that doesn't count as a constructor).
We will just inline them and specialize each one of the individual functions that these sorts of functions are inlined into.
We're converting a pre-live actrec to a live actrec, which effectively changes some stack AliasClasses to not exist anymore.
When an assignment to an expression is detected and the destination is / invalid, emit a detailed error about the condition.
Zero for size is correct, because when this APCCollection was unreferenced it already included the size of the inner handle.
foldSequence - Take a sequence of expressions and fold a prefix of / it into a tree of BinaryExprs using precedence parsing.
foreach also advances the index after the last iteration, so I see no problem in incrementing the index here unconditionally
if no charset had previously been set, either through inheritance or by an explicit content-type header, default to us-ascii
llvm::hash_value(StringRef) is, unfortunately, defined out of line in a library we otherwise would not need to link against.
log*() functions return a newly-created log expression to be inserted after or instead of the expression they're looking at.
need to make sure the last reference is deleted in this thread The VM thread is done, any outstanding push txns need aborts.
other collections are not supported: - Maps and Sets require associative sort - Immutable collections are not to be modified
other collections are not supported: - Vectors require a non-associative sort - Immutable collections are not to be modified
yy_get_next_buffer() needs the text pointing at the data we want to keep in the buffer, and the cursor pointing off the end.
(Note this might need to split into a different API: type aliases aren't allowed everywhere we're doing resolve_class calls.)
/ / If we found a make_mutable call this means that check_subscript was removed / by the array bounds check elimination pass.
/ / The same logic currently applies to both uses of the array struct itself and / uses of an aggregate containing the array.
/ Since fallthrough-able case blocks must not bind variables, they are always / emitted in the outermost scope of the switch.
All no-payload cases have the same payload tag, so we can just use the payload value to distinguish between no-payload cases.
At this point by iterating through the decl context hierarchy we should have encountered the first type context in the stack.
AvailabilitySet - This class stores an array of lattice values for tuple / elements being analyzed for liveness computations.
Both PHP and libcurl are documented as return 0 to continue, non-zero to abort, however this is what Zend actually implements
Buffer like gray8 gray16 or rgb8 will require some tweak and can be done in this function (called from the autocrop function.
Build an expression that evaluates the specified parameter list as a tuple / or paren expr, suitable for use in an applyexpr.
But NewObjectExpression is written to use the class as the function name, so clear it here, to take care of the dynamic case.
Calling all of these library functions in a signal handler is completely undefined behavior, but we seem to get away with it.
Check if BB is reachable from a single enum case, which means that the immediate predecessor of BB is the switch_enum itself.
Check whether the given declaration contains its own generic parameters, / and therefore is not representable in Objective-C.
Consider the constructor decl reference expr 'implicit', but the constructor call expr itself has the apply's 'implicitness'.
Continuations at the current level are processed as, if we see one, there's no lower-level continuation that may have failed.
Converts from YUV (with color subsampling) such as produced by the WebPDecode routine into 32 bits per pixel RGBA data array.
Determine whether the given Objective-C class, or any of its / superclasses, either has or inherits a swift_bridge attribute.
During this re-entry anything can happen (e.g. a surprise flag check could cause a php signal handler to run arbitrary code).
During type-checking, we may try to mapTypeInContext before AllArchetypes has been built, so fall back to the generic params.
Each attribute has a type, which identifies what it is, and a value (the type of the value is implied by the attribute type).
Each of the type variables in the same equivalence class as this type should have this type variable as their representative.
Either way, we have a live PHP return value in the return registers, which we need to put on the top of the evaluation stack.
Encode Unicode string as UTF-8, returning pointer to character after end of string, or NULL if an invalid character is found.
FIXME: If the root class specifies its own runtime ObjC base class, assume that that base class ultimately inherits NSObject.
FIXME: Weird that we're producing an archetype for protocol Self, but the declared type of the context in non-protocol cases.
Find a Store whose destination is taken from an init_enum_data_addr whose address is same allocation as our inject_enum_addr.
For example, it will return false for / enumerators, because those are naturally nested within the / enumeration declaration.
For protocol default implementations, we also use the allocating constructor, because that's the only thing that's witnessed.
ForceCompression exists only to support cases when proxy removes Accept-Encoding header but browser can read compressed data.
Form an LLVM constant for the relative distance between a reference / (appearing at gep (0, indices) of `base`) and `target`.
Get the unlowered formal type of the constant, stripping off the first level of function application, which applies captures.
Given a use that has at least one uninitialized element in it, produce a / nice symbolic name for the element being accessed.
Given that type1 is known to be a subtype of type2, check if the two / types have the same calling convention representation.
Grab one of the candidates (if present) and get its input list to help identify operators that have implicit inout arguments.
Gross hack: strip a level of unchecked-optionality off both sides when matching against a protocol imported from Objective-C.
Here we only do it if there are "constant" arguments to the branch or if we know how to fold something given the duplication.
If `keep_uses' is set, uses exactly at the end of the first interval will stay with the first split (rather than the second).
If after advancing the iterator we have not reached the end, jump to the location specified by the second immediate argument.
If in an eagerly executed async function, wrap the user exception into a failed StaticWaitHandle and return it to the caller.
If loading from memory, we need to set the base directory for the document but it is not apparent how to do that for schema's
If looking for an associated type and the archetype is constrained to a class, continue to the default associated type lookup
If the SpecifierLoc is invalid, then the caller just wants us to synthesize the default, not actually try to parse something.
If the call is to the 'unreachable' builtin, then remove the call, as it is redundant with the actual unreachable terminator.
If the derived method is ABI-compatible with the base method, give the vtable thunk the same signature as the derived method.
If the given type is a direct reference to an associated type of / the given protocol, return the referenced associated type.
If the root class was implemented in Objective-C, use Objective-C's allocation methods because they may have been overridden.
If the string's length is less than or equal to the specified width, there's nothing to do and we can just return the string.
If there is a toString() method, use it (via ConvObjToStr) to turn the object into a string, and then do a string comparison.
If this expression is already typechecked and has an i1 type, then it has already got its conversion from Boolean back to i1.
If this sub-expression is currently being diagnosed, refuse to recheck the expression (which may lead to infinite recursion).
If this table is used instead of the above one, some of the special cases for the NEL character can be taken out of the code.
If this type variable is not the representative of its equivalence class, add it to its representative's set of equivalences.
If we can completely represent the struct in SIL, leave the body implicit, otherwise synthesize one to call property setters.
If we have a no-payload case, this yields a non-negative value, which is the most significant bits of the current case index.
If we have no new information to pull in (and nobody else pulled in new information while we waited on the lock), we're done.
If we rejected some possibilities due to an argument-label mismatch and ended up with nothing, try again ignoring the labels.
If we side exit in an inlined callee, we short-circuit here in order to skip exit events that could unbalance the call stack.
If we're at the beginning of a brace on a separate line in the context of anything other than BraceStmt, don't add an indent.
If yes, we set the initial value of the SILGlobalVariable and / remove the "once" call to globalinit_func from the addressor.
Intentionally only adjusting the fp here, as the stack offsets should be unchanged in places where we've sunk the DefInlineFP
It would not be ok to reuse the Context's address buffer though, since our base value will a different type than the element.
Just convert the opcode to a Nop, because this could create an empty block and we have an invariant that no blocks are empty.
Make an ArgGroup for prop instructions that takes: 1/ the context Class* 2/ the ObjectData* (or pointer to a KindOfObject TV)
Make sure that DestBB is in the worklist, as well as its remaining predecessors, since they may not be able to be simplified.
Most likely one of: init_enum_data_addr open_existential_addr partial_apply struct_element_addr unchecked_take_enum_data_addr
Note that this check has to happen before the call to truncateLiterals() because that updates the region but not the IR unit.
Note: the odd check for one generic parameter copes with protocols nested within other generic contexts, which is ill-formed.
Older ObjCs didn't guarantee _objc_empty_vtable to be nil, but Swift doesn't deploy far enough back for that to be a concern.
Only allow about one typo for every two properly-typed characters, which prevents completely-wacky suggestions in many cases.
Parse a specialized attributed, building a parsed substitution list / and pushing a new ParsedSpecAttr on the SpecAttrs list.
Perform dominator based value simplifications and jump threading on all users / of the operand of 'DominatingBB's terminator.
Processing the failed constraint first slightly biases it in the ranking ahead of other failed constraints at the same level.
Produce a function pointer, suitable for invocation by / objc_msgSend, for the given property's getter method implementation.
Produce a function pointer, suitable for invocation by / objc_msgSend, for the given property's setter method implementation.
Record that contains the mapping from contexts to the list of / globals that will be injected as members into those contexts.
Record the start of a translation, and reserve space at the top of cold and frozen (if they aren't the same) to record sizes.
Remove from pConds the elements that correspond to stack positions that have been popped given the current SP offset from FP.
Replace the old CheckType with a Mov from the result of the Load so that any uses of its dest point to the correct new value.
Reserve space for all named locals plus one additional variable to avoid reallocations if one extra dynamic variable is used.
Retrieve the conformance for the superclass constraint of the given / potential archetype (if present) to the given protocol.
Retrieves the type and interface type for a protocol or / protocol extension method given the computed type of that / method.
Return a function which takes two buffer arguments, copies / a pointer from the second to the first, and returns the pointer.
Returns false if we can't continue because we don't know the length of this instruction or one of the immediates was invalid.
Run callbacks only if it's safe to do so, i.e., not when there's a pending exception or we're unwinding from a C++ exception.
Scan the parent block of AI and check that the users of AI inside this block are inside the lifetime of the allocated memory.
The BitVector in each / BlockState is then laid on top of it to keep track of which LSLocation / has an upward visible store.
The archetype builder now has all of the requirements, although there might still be errors that have not yet been diagnosed.
The fixupWork() looks for a TC frame, and we never call fixup() directly from the TC, so skipping this frame isn't a problem.
The following assertions come after the above, because if the tree is totally clobbered it's easy for the wrong ones to fire.
The genset keeps a list of upward visible stores / and the killset keeps a list of LSLocation this basic block reads (kills).
The inlining decision could be smarter but this is enough for now since we never emit guards in inlined functions (t7385908).
The linkage of a template is the most restrictive linkage of its original linkage and the linkage of its template parameters.
The path may be empty if the file being loaded is a partial AST, and the current compiler invocation is a merge-modules step.
The reason this is ok is that one of the following two things are happening:  o The old next() block is becoming unreachable.
There appears to be no other parameters in this call, so we'll expand replacement for trailing closure and cover call parens.
There's no point in doing this for fixed-sized types, since we'll allocate an appropriately-sized buffer for them statically.
These index the known object types in various ways to allow for the proper lookup of an object type according to its linkage.
These will do the right thing for either R,G,B or B,G,R color order, but you may not like the results for other color orders.
They should be rare, so for now we'll do the most conservative thing and completely bail out, doing no dead code elimination.
This CheckType should've been optimized away but wasn't, presumably because certain optimizations are off or haven't run yet.
This check doesn't require special casing for variadics, because it's not ok to turn a variadic function into a non-variadic.
This class implements a simple type recursive traverser which queries a / user-provided walker class on every node in a type.
This commonly happens across php calls right now, where values must be reloaded from memory because SSATmps can't span calls.
This could share code with apc_load_impl_compressed, but that function should go away together with the shared object format.
This ensures that we don't return into jitted code and gives the system the proper chance to interpret blacklisted tracelets.
This file implements the TypeCheckRequest type, which describes a request to the type checker to compute certain information.
This function appends a new value to the array with the next available integer key, if there is a next available integer key.
This makes a strong assumption that the allocated object is released on all paths in which some object initialization occurs.
This optimisation fails on a zero key (which is weak and has bad parity anyway) in order to simplify the starting conditions.
This pass performs removal of external function definitions for a sake of / reducing the amount of code to run through IRGen.
This returns / true for single-expression closures, where we want the body to be considered / part of this larger expression.
This source code is licensed under the BSD-style license found in the LICENSE file in the root directory of this source tree.
Tmps defined by DefConst are always available and may be assigned to registers if needed by the instructions using the const.
Try to find available values of a set of subelements of the current value, / starting right before the specified instruction.
Try to lookup the cached regex entry, and if successful, just pass back the compiled pattern, otherwise go on and compile it.
Turn a param list into a symbolic and printable representation that does not / include the types, something like (_:, b:, c:)
We cannot apply the solution with unresolved TypeVars, because they will leak out into arbitrary places in the resultant AST.
We could get into the situation where we're constructing class D extends B, and B has an old-style ctor but D::B also exists.
We don't know the types of all the global declarations in the first pass, which means we can't completely analyze everything.
We don't need to check for space for the ActRec (unlike generally in normal re-entry), because the ActRec isn't on the stack.
We don't need to pass anything extra as long as all of the archetypes (and their requirements) are producible from arguments.
We leak ExtraArgs in other similar situations for this too (e.g. if called via FCallArray and then a stack overflow happens).
We only care about consistency if there is a possible return from this function along the path starting at this successor bb.
We should not have the case which retains have to be anchored topdown and releases do not have to be bottomup, or vice-versa.
bool ExistsInt(const ArrayData*, int64_t key)  Returns true iff this array contains an element with the supplied integer key.
it's dangerous to return pointers to string buffer of referenced variable, because it can be clobbered throug magic callbacks
now we should get a job from the beginning of the queue even though we are in lifo mode before request expiration is enabled.
single-entry, multiple-exits region that ends on conditional branches or when an instruction consumes a value of unknown type
(Note that we do not measure the total cost of all the inlined calls for a given caller---just the cost of each nested stack.)
/ / Currently, we recursively look at all array value uses and if any use could / escape or change the array value we give up.
/ / Note that we can have tuples down to arbitrary depths in the / type, but every branch should lead to an l-value otherwise.
/ If you have created the object, instead of returning the result / with makeParserResult, use the object's fixupParserResult.
/ The list returned includes the viable candidates as well as the unviable / ones (along with reasons why they aren't viable).
0xFF, or one of the following control characters: backspace, tab, line feed, vertical tab, form feed, carriage return, escape.
Add the memory buffers first, these will be associated with a filename and they can replace the contents of an input filename.
Also to determine back / edges, we need to compare post order numbers potentially of loop headers, / not the loops themselves.
Although we will cope with a later change in dither_mode, we do not promise to honor max_memory_to_use if dither_mode changes.
As we do for other favored constraints, if a favored overload has been specified, let it be the first term in the disjunction.
Ask curl_multi for its handles directly This is preferable as we get to know which are blocking on reads, and which on writes.
Assumes exactly one of setMainExecutablePath() or setRuntimeIncludePath()  is called before setTargetTriple() and parseArgs().
Builds the type refinement hierarchy for the WhileStmt if the guard / introduces a new refinement context for the body branch.
Check if there is only a single statically known implementation of the method which can be called by the default case handler.
Constructs a scalar array with all the shape field names, this/self/parent, classes, type accesses, and type aliases resolved.
Creates a unique hash for a server def with some info from the server config, but also with the PID to make sure forking works
DelayedConformanceDiags callbacks contain pointers to the TypeChecker, so they must be removed when the TypeChecker goes away.
Double check the prologue array now that we have the write lease in case another thread snuck in and set the prologue already.
Emit a projection from an existential container to its concrete value / buffer with the type metadata for the contained value.
FIXME: Avoid the possibility of an infinite loop by fixing the root /        cause instead (incomplete circularity detection).
FIXME: Could be an assert if we fix non-single-frontend mode to link together serialized SIL emitted by each translation unit.
FIXME: Really these should be marked as artificial, but LLVM currently has no support for flags to be put on global variables.
Facebook specific optimization which depends on versions of MySQL which allow access to the grotty internals of libmysqlclient
Filter out duplicated inferred types as well as inferred types that don't meet the requirements placed on the associated type.
For now, assume that we never have any interest in dynamically changing the value witnesses for something that's fixed-layout.
Form the set of canonical protocol types from the protocol declarations, and use that to build the canonical composition type.
Given a DIE, and the current scope, recursively generate the names/linkages for all the object types in this DIE and children.
Given a VarDecl with a willSet: and/or didSet: specifier, synthesize the / (trivial) getter and the setter, which calls these.
Halt means to stop processing along this control flow path---something during analysis had to pessimize and we can't continue.
However, if we don't have a fallthrough or a multi-pattern 'case', we can just emit the body inline and save some dead blocks.
If both are convenience initializers, and the instance type of one is a subtype of the other's, favor the subtype constructor.
If the AllocStackInst is also deallocated inside the allocation block then make sure that all the users are inside that block.
If the destination type is an NSError, and the source type is an ErrorProtocol, then the cast can succeed by NSError bridging.
If the existential type cannot be represented or the protocol does not conform to itself, there's no point in looking further.
If the group name is specified, we sort them according to their source order, which is the order preserved by getTopLeveDecls.
If there was no type specified, and if we're not looking at a ClosureExpr, then we have a parse error (no type was specified).
If this comparison is for the purpose of trying to merge two indexed type together (see below), skip comparing certain fields.
If this function has too many basic blocks or too many locations, it may / take a long time to compute the genset and killset.
If this is a method whose result type is dynamic Self, or a construction, replace the result type with the actual object type.
If this is a static member, look up any definitions which refer to this member, and pull any additional information out of it.
If we found an associated type in an inherited protocol, the base for our reference to this associated type is our own `Self`.
If we have HOWMANY bytes, it indicates that the data might have been truncated, probably even before this function was called.
If we have a deallocating parameter, it is passed in at +0 and will not be deallocated since we do not allow for resurrection.
If we have a leading token that may be part of the closure signature, do a speculative parse to validate it and look for 'in'.
If we have a shared case with bound decls, then the 0th pattern has the order of variables that are the incoming BB arguments.
If we have an expect optimizer hint with a constant value input, there is nothing left to expect so propagate the input, i.e.,
If we have an imbalance of optionals or a collection downcast, handle this as a checked cast followed by a a 'hasValue' check.
If we reach here it means we've found an inaccessible private method in cls's method table, handle the failure as appropriate.
In eager execution, the state is suspended into a new AsyncFunctionWaitHandle object so that the execution can continue later.
In this case, we emit code to dynamically lookup the method given the Object and the method slot, which is the same as func's.
Inverts the expected value of 'PotentialExpect' (if it is an expect / intrinsic) and returns this expected value apply to 'V'.
It / buffers up diagnostics produced during compilation, then checks them / against expected-error markers in the source file.
It is ok to cache a non-AttrPersistent class here, because if it isn't loaded in the request we'll never hit the TC fast path.
It is the start of a block if it is:  - A jump target  - Immediatelly following a control flow instruction, other than a call.
NoSideEffects - The destructor does nothing, or just touches the local / object in a non-observable way after it is destroyed.
Perform an analysis to determine memory locations that are known to hold "balanced" values with respect to reference counting.
Plan the emission of a call result as a single outer direct result, / given that the inner abstraction pattern is not a tuple.
Prevent saving config while reading it These are system settings, but can be loaded after the core runtime options are loaded.
Recursively walk into the given formal index type, expanding tuples, / in order to form the arguments to a subscript accessor.
Retrieves the type and interface type for a generic class or class / extension method, given the computed type of that method.
Return the appropriate access kind for the base l-value of a / particular member, which is being accessed in a particular way.
Returns a tuple of RValues holding the accessor value, base (retained if / necessary), and subscript arguments, in that order.
Returns false if the file does not exist or could not be read as an HPHP::String instance containing the contents of the file.
Rip-relative offsets that point outside the range being moved need to be adjusted so they continue to point at the right thing
SILGen produces shadow variables for "inout" arguments to provide proper semantics for when the inout argument is closed over.
See the file "license.terms" for information on usage and redistribution of this file, and for a DISCLAIMER OF ALL WARRANTIES.
Simple stats about opcodes (that don't require full type information---those cases are only enabled when extendedStats is on).
TODO: If we could require Objective-C classes to have an attribute to get this behavior, we could avoid runtime overhead here.
TODO: It is only safe to directly deallocate an instruction if this BB is being removed in scope of destructing a SILFunction.
The `initializerType' is for use during refine_public_statics, and inferredType will always be a supertype of initializerType.
The new node is placed or moved to the front of n's caller list, in the hopes that the next search on n will be the same addr.
The payloads are all reference-counted values, and there is at / most one no-payload case with the tagged-zero representation.
The probably doesn't matter outside of a FuncDecl, which we'll have to special-case, but it's an interesting bit of data loss.
The state doesn't have this problem during optimization passes, because we'll always process the jump before the target block.
The type of failure is that multiple occurrences of the same generic are being passed arguments with different concrete types.
The zombie state happens if an array is "moved from"---the only legal operation on a zombie array is to decref and release it.
This allows max_acquire to be set and track the PHP code without having a global init routine or external semaphore init code.
This file implements IR generation of type metadata for struct/class stored properties and enum cases for use with reflection.
This forces any errors to appear upfront, and helps eliminate some nasty lag after the first statement is typed into the REPL.
This includes creating the IR type, collecting IR attributes, performing calls, and supporting prologue and epilogue emission.
This instruction is essentially a PureLoad, but we don't handle non-TV's in PureLoad so we have to treat it as may_load_store.
This is a super-common case for single-element structs, but is also a general answer for arbitrary structs and tuples as well.
This macro was not mandated originally: define only if we know we won't break user code: when these are the locations we know.
This means that between the fork/exec and the waitpid, the LightProcess could fork/exec more processes for different requests.
This method reads the message header for a database response It returns failure or success and throws an exception on failure.
This must be checked before we IncRef the context below, because the slow exit will want to do that same IncRef via InterpOne.
This uses the parent declcontext (not the closure) since the initializer expression is evaluated before the closure is formed.
Use a priority queue keyed on dominator tree level so that inserted nodes are handled from the bottom of the dom tree upwards.
Used to track how many times a given function has been (partially) optimized by the function pass pipeline in this invocation.
WIter* instructions may leave the value locals as either refs or cells, depending whether the rhs of the assignment was a ref.
We / handle this by doing some lookahead in common situations and emitting a / diagnostic with a fixit to add wrapping parens.
We add the "_Tt" prefix to make this a reserved name that will not conflict with any valid Objective-C class or protocol name.
We assume the previous credentials will work on this database too, or if authSource is set, authenticate against that database
We do not do any optimization for the JIT and it has problems with external symbols that get merged with non-external symbols.
We don't want to cast the function here because it interferes with LLVM's ability to recognize and special-case this function.
We need to maintain the invariant that if there are any strong iterators bound to arrays, one of the bindings is in slot zero.
We paired up decls from two different modules, so either we still infer as a getter with no setter, or we cannot be a property
When NSUInteger is used as an enum's underlying type or if it does not come from a system module, make sure it stays unsigned.
Whether we "own" the buffer - i.e., we know we created it, and can realloc() it to grow it, and should free() it to delete it.
Wrap the string in an array to allow the JSON_parser to handle things like unicode escape sequences, then unwrap to get result
Writers of suspendable-input applications must note that skip_input_data is not granted the right to give a suspension return.
XXX(t10347945): This causes our data section to own a pointer to heap memory, and we're putting bindaddrs in said heap memory.
alteredAvl : prevents a store from being moved forward through this block, and prevents it from being killed by a later store.
if we are cutting, and we've accumulated enough characters, and we haven't see a space for this line, copy and insert a break.
'set' and 'willSet' have a (value) parameter, 'didSet' takes an (oldValue) parameter and 'get' and always takes a () parameter.
(We'll unbox the value that gets passed to the magic setter, though, since __set functions can't take parameters by reference.)
- If the second case happened and we have to run another destructor, its enter hook will throw, but it will be swallowed again.
/ / - In a protocol extension, the callback doesn't know how to capture /   or reconstruct the generic conformance information.
/ / This returns false and sets Oper to a valid operand if the instruction is a / projection of the value at the given address.
/ Notice that unlike other sinking methods in this file we do allow sinking / of literals from blocks with multiple successors.
A class controlling the emission of the decision tree for a pattern match / statement (switch, if/let, or while/let condition).
Adjust the cc1 triple string we got from clang, to make sure it will be accepted when it goes through the swift clang importer.
All instructions that are OutCInput or OutCInputL cannot push uninit or a ref, so only specific inner types need to be checked.
All the use(s) and def(s) of that instruction are live at some point within it, but their lifetimes nonetheless do not overlap.
And we do not need to worry about the compiler because the address dependency naturally forces an order to the memory accesses.
As a special case, if all the classes are potentially hoistable, we don't list them twice, but instead iterate over them again.
Assembler::fmov (which you'd think shouldn't be a macro instruction) will emit a ldr from a literal pool if IsImmFP64 is false.
Bizaarly, comparison against a string is done by converting both the string and the resource to a double and comparing the two.
Break down an expression that's the formal argument expression to / a builtin function, returning its individualized arguments.
But we know this is a closure, and we can get a Func* via getInvokeFunc(), so just bypass all that decode process to save time.
Canonicalize the given DeclContext pointer, in terms of / producing something that can be looked up in / ClosureDiscriminators.
Case-exits only leave themselves post-terminator if they use the continuation block, so we're in an acceptable insertion state.
Check if a precision was specified  XXX: an unreasonable amount of precision may be specified resulting in overflow of num_buf.
Class and protocol metatypes are interoperable with certain Objective-C runtime classes, but only when ObjC interop is enabled.
Closures and generators from closures don't satisfy the "one static per source location" rule that the inline fastpath requires
Compute the element type based on the getter, looking through the implicit 'self' parameter and the normal function parameters.
Copy to YYRES the contents of YYSTR after stripping away unnecessary quotes and backslashes, so that it's suitable for yyerror.
Create a single sequence expression, which we will modify for each operator, filling in the operator and dummy right-hand side.
Determine the type of the method we referenced, by replacing the class type of the 'Self' parameter with Builtin.UnknownObject.
Empty nodes are useful for building graphs, since not every node type can have control flow edges, but it has no meaning later.
Exit blocks are all associated with FPs that are defined on the main trace as part of a DefInlineFP/InlineReturn pair (mainFPs)
Explicitly set the linker target to "androideabi", as opposed to the llvm::Triple representation of "armv7-none-linux-android".
FIXME: If one or both types are dependent, we can't accurately assess whether they're ABI-compatible without a generic context.
FIXME: some of this work needs to be delayed until runtime to properly account for archetypes dynamically being optional types.
Few of the cell counts will overflow, and clamping those that do overflow to the maximum value will give close- enough results.
Fortunately, the cases where that happens are exactly the situations where our entire superclass hierarchy is defined in Swift.
GPC elements holds Variants that are acting as smart pointers to RefDatas that we've created in the process of a multi-dim key.
Get or create a helper function with the given name and type, lazily / using the given generation function to fill in its body.
If *pMonth is 13, the SDN represents one of the holidays at the end of the year and pDay will be in the range 1 to 6 inclusive.
If Reusable TC is enabled then the prologue may have already been smashed and the memory may now be in use by another function.
If an UnresolvedDotExpr, SubscriptMember, etc has been resolved by the / constraint system, return the decl that it references.
If paramType contains any substitutions already, find them and add them to our list before matching the two types to find more.
If the closure's only body element is a single return statement, use that instead of creating a new wrapping return expression.
If the headers have not been fully received we never started the transport and exiting without receiving an onComplete is safe.
If the instruction produces a reference, we can assume the SSATmp it defines corresponds to a new increment on the lower_bound.
If the linking mode is not link all, AI is not transparent, and the callee is not shared, we don't want to perform any linking.
If the owning Objective-C class has designated initializers and this is not one of them, treat it as a convenience initializer.
If the type is not generic, we can use a global variable to cache the address of the field type vector for the single instance.
If this is a method or enum case member (not a var or subscript), then the uncurry level is 1 if self has already been applied.
If this is an application of a function that cannot be partially / applied, arrange for us to check that it gets fully applied.
If this use is not an apply inst or an apply inst with substitutions, there is nothing interesting for us to do, so continue...
If we found our contextual type, then we know we have a conversion to some function type, and that the result type is concrete.
If we only have one predecessor see if we can gain any information and or knowledge from the terminator of our one predecessor.
If you use this software in a product, an acknowledgment in the product documentation would be appreciated but is not required.
In RepoAuthoritative mode, trait methods are already flattened into the preClass, so we don't need to add in the estimate here.
In both cases, we don't have enough information at the time we emit the function to know if it should be marked fragile or not.
In the interpreter it would result in two instances for a single global: one in the imported module and one in the main module.
In this case we can avoid the SmallNode, which saves us some memory and also let's us give out 16-byte aligned pointers easily.
Look up witness tables for the protocols that need them and get references to the ObjC Protocol* values for the objc protocols.
Make sure that each of the successors/predecessors of this basic block have this basic block in its predecessor/successor list.
Note that DestUserInsts is likely empty when the dest is an 'out' argument, allowing us to go straight to backward propagation.
Now that constants have been bound we can update options using constants in ini files (e.g., E_ALL) and sync some other options
On the other hand, if the old set has a lower bound of zero, so we can't compensate for removing it, we leave everything alone.
Perform definitive initialization analysis and promote alloc_box uses into / SSA registers for later SSA-based dataflow passes.
Pop nDiscard elements from the stack, push the result (if present), DecRef tvRef(2), and mark the member operation as complete.
Postcondition: Builder's insertion block is a new block that defines the specialized call argument and has not been terminated.
Preserve original filename (as this varies per-function and not per-unit in the case of methods imported from flattened traits)
Protected properties may be weakened to public below, but otherwise, the parent's properties will stay the same for this class.
Remaining references to the FP must be from nested DefInlineFP instructions that were already moved off the main execution path
Right now we generally can't limit any of these better than general re-entry rules, since they can raise warnings and re-enter.
SILGenExtension - an ASTVisitor for generating SIL from method declarations / and protocol conformances inside type extensions.
Set the first callee block as a successor to the FCall's block and "fallthrough" from the caller into the callee's first block.
Since we don't know how big it is (i.e. how much data we should memcpy), we have no choice but to ask malloc to realloc for us.
So in order to make sure we can eliminate the SpillFrame, we do the CallBuiltin instruction after we've left the inlined frame.
So, the approach used is to take the given day number and round it to the closest molad of Tishri (first new moon of the year).
Sometimes function resolution can't determine which function something will call, but can restrict it to a family of functions.
Strip off the part of the name that is redundant with type information, so long as there's something preceding the preposition.
TODO: This uses exact SILValue equivalence to detect aliases, we could do something stronger here to catch other obvious cases.
TODO: Using parentMap would be more general, rather than requiring the issue to be related to the root of the expr under study.
TODO: we should consider Throw block as well, or better we should abstract the Return block or Throw block away in the matcher.
The fix is to check if genericArgs exist in the Decl's Archetypes, if they all exist, we use indices to the Decl's Archetypes..
The function prologue is where the stack frame is set up and storage for local variables and function arguments is initialized.
The next few lines are basically copied from gd2CreateFromFile we change the file size, so don't want to use the code directly.
The non-derived flags imply the derived flags, even if the class is final, so you don't need to check both in those situations.
The remaining situations are that m_stag is STag::None, in which case it is a subclass since osbits wasn't in the intersection.
Then get the ini and hdf cli strings again, in case the tier overwrites overrode any non-tier based command line option we set.
These are just some last resort values that might match some Un*x system if building this version of gd separate from graphviz.
These routines are concerned with the time-critical task of mapping input colors to the nearest color in the selected colormap.
Things earlier in the list are considered to have higher specificity (and thus, higher priority) than things lower in the list.
This allows us to initialize object properties very quickly because we can just memcpy and we don't have to do any refcounting.
This assertion means you manually created a catch block, but didn't put an exceptionStackBoundary after an update to the stack.
This case should only happen if something successfully stat'd the file, but then it was gone by the time we tried to open() it.
This difference only matters for objects that resurrect themselves in their destructors, so make sure count is consistent here.
This function returns the offset of instruction i's branch target, which is the offset corresponding to the branch being taken.
This results in things going extremely slowly when run under gdb, because gdb spends all its time rescanning its symbol tables.
Threads may race through the following calls, but the last call made by any idling thread will correctly restore lg_dirty_mult.
Unfortunately, the uses being valid / doesn't mean that the memory is actually initialized on all paths leading to / a release.
Unknown target, Non-Zero LB: We don't know where the store is going, but we can account for balancing the possibly-new pointer.
Walk our input, determine what kind of poll() operation is necessary for the descriptor in question, and put an entry into fds.
Walk through all of the archetypes in the generic parameter lists, matching up their conformance requirements with those in the
Walks an expression sub-tree, and collects information about expressions / whose types are mutually dependent upon one another.
We can't sink instructions that may read or write to memory or side effects because it can change the semantics of the program.
We define the main trace for a DefInlineFP-InlineReturn pair as the set of blocks on any path from DefInlineFP to InlineReturn.
We don't just assert here since there is the potential for a conformance without a witness table to be passed to this function.
We use a fast path translation with a hashtable if none of the cases are numeric strings and if the input is actually a string.
We want factored exit edges from the fault funclets to any of these enclosing catch blocks (or other enclosing funclet blocks).
Where file commando is used it's not essential as the CLI process ends, multiple loading within the same process wouldn't work.
breakpoints holds a list of fresh new BreakPointInfo objects that have been deserialized from the client's list of breakpoints.
emitBranchAndCleanups - Emit a branch to the given jump destination, / threading out through any cleanups we might need to run.
fsync forces "w" to be at least 1, so don't touch it if it's already set to something else above while parsing "w" (and "safe")
or the birth of Jesus Christ, did not come into use until several centuries later when Christianity became a dominant religion.
simplifyBranchOperands - Simplify operands of branches, since it can / result in exposing opportunities for CFG simplification.
start() returns the index in UnicodeString, which normally means the index into an array of 16-bit code "units" (not "points").
the WebP bytes There can be extra chunks after the "VP8 " chunk (ICMT, ICOP, ...) All 32-bits sizes are in little-endian order.
(See killBeforePEI below.)  Final note about types:  Global DCE can change the types of locals in a way that spans basic blocks.
(We could try to rule it out by figuring out if one must be defined based on the ctx.unit, but it's unlikely to matter for now.)
- If none of the src pixels within a sampling region differ, then the output pixel is forced to equal (any of) the source pixel.
/ / For example, a method reference 'self.method' decomposes into curry thunk / as the callee, with a single call site '(self)'.
/ / Since Swift does not natively support these features, we fake them by / importing them as declarations with generated names.
/ / The shortest path of a block is the sum of the shortest path from the scope / entry and the shortest path to the scope exit.
Add a 32-bit relative offset to a mangled typeref string / in the typeref reflection section, or globally if 'global' is 'true'.
Cancelling ourselves isn't needed for correctness, but we can go ahead and do it now instead of waiting on it later, so why not.
Certain case statements can be entered along multiple paths, either because they have multiple labels or because of fallthrough.
Coerce argument types for those cases where the IR type required by the ABI differs from the type used within the function body.
Concats two affine transforms together, i.e. the result will be the equivalent of doing first the transformation m1 and then m2.
Conformance of a metatype to an existential metatype is actually equivalent to a conformance relationship on the instance types.
Determine whether we should strip the module prefix from a global-scope entity in the given module and with the given base name.
Don't use knownValue if it's from a different block and we're currently in a catch trace, to avoid extending lifetimes too much.
Either the Swift declaration was from stdlib, or we imported the underlying decl of the typedef, or we imported the decl itself.
Erase the uses, we can have instructions that become dead because of the removal of these instructions, leave to DCE to cleanup.
FIXME: These could be further propagatable now, we might want to move this to CCP and trigger another round of copy propagation.
FIXME: path separators would be handled here, jumping straight to the last component if the pattern doesn't contain a separator.
For everything else if we fail to start the return block it means the return was unreachable, and we cannot inline such regions.
For now instead of ignoring it, pick up the declaration name from the buffer identifier and append it to the diagnostic message.
Form an LLVM constant for the relative distance between a reference / (appearing at gep (0, indices...) of `base`) and `target`.
Functions need some special handling when printing, since the syntax for function and pointer to function is slightly different.
Generators pass return values both through the eval stack and through the return registers, so we need to get it in both places.
Given an instruction which is considered live, propagate that liveness back to the instructions that produce values it consumes.
Helper lambda function to determine if instruction b is strictly after instruction a, assuming both are in the same basic block.
However, the resulting error message is misleading if the real problem is an empty input file, so we handle that case specially.
If DB has dups then UnitEmitter commons them - spec should outlaw dups because UE will assert if db has dups with different ids.
If all stores are leaves in the AddressProjectionTrie, then we can analyze the stores that reach the end of the object lifetime.
If conditions are not equivalent along all paths, try harder / to check if they are actually equivalent along a subset of paths.
If createTrueBB or createFalseBB is / false, then only one of the two blocks is created - a CFG triangle instead / of a diamond.
If it's known to be a ref, this behaves like FPassV, except we need to do it slightly differently to keep stack flavors correct.
If our generator finished earlier (or if there was nothing to do) just continue on and let YieldFromDelegate handle cleaning up.
If our preferred access method is to go via an accessor, it means there is some non-trivial computation that needs to be cached.
If refine_public_statics is called more than once, the subsequent calls may only shrink the types we recorded for each property.
If the destination BB accepts the case argument, set up a waypoint BB so we can feed the values into the argument's PHI node(s).
If the new PHInode is properly dominated by the deallocation then it is obviously a dead PHInode, so we don't need to insert it.
If the node already has a pointsTo _edge_ we don't change it (we don't want to change the structure of the graph at this point).
If the result is address-only, we need to return something in memory, otherwise the result is the BBArgument in the merge point.
If the source of the VarDecl is a trivial PatternBinding with only a single binding, rewrite the whole thing into an assignment.
If the string contains a class name (e.g. Foo::bar), all kinds of weird junk happens (wrt forwarding class contexts and things).
If the type after replacing DynamicSelf with the provided base type is no different, we don't need to perform a conversion here.
If the user is trying to create a breakpoint where a disabled breakpoint already exists, then re-enable the original breakpoint.
If there are more callee parameters than arguments it means that the callee is the result of a partial_apply - a thick function.
If this is a let-param whose type is a type variable, this is an untyped closure param that may be bound to an inout type later.
If this static_assert fails, the compiler error will have the real value of sizeof_Class in it since it's in this struct's type.
If we have a single candidate that failed to match the argument list, attempt to use matchCallArguments to diagnose the problem.
If we're not looking at a protocol and we're not supposed to visit the protocols that this type conforms to, skip the next step.
In the case of a define or a global, the pointer will be followed by a TypedValue representing the value being defined/assigned.
In the derived class, a method override that involves substituted types will have a different SIL lowering than the base method.
In this situation, we put a SmallNode header at the front of the block that tells us the size for when we need to free it later.
Information about a folded conditional branch instruction: it's location / and whether the condition evaluated to true or false.
Instructions classified as assign are only generated when lowering InitOrAssign instructions in regions known to be initialized.
Issue a warning when the returned expression is on a different line than the return keyword, but both have the same indentation.
It also specified that there would be exactly 12 months per year and 365.25 days per year with every 4th year being a leap year.
It just means that it might, and that our lower bound may have been "kept higher for longer" using that knowledge at some point.
Look through our predecessors for a set of ref count increments on our enum value for every payloaded case that *could* be sunk.
Luckily, a type's linkage is closely related to its scope (except for templates, see below), so it can be inferred the same way.
NewStructArray is reading elements from the stack, but writes to a completely new array, so we can treat the store set as empty.
Note that it is okay for there to be a race involving a weak release* which happens after the strong reference count drops to 0.
Note: If we ever use this to undo the actual variable binding, we'll need to store the change along the early-exit path as well.
Note: in this case, we don't call the emitter at all -- doing so just runs the risk of tripping up asserts in SILGenBridging.cpp
Removing unreachable incoming edges can change types, so if we changed anything we have to reflow to maintain that IR invariant.
Return the set of clusters that are left, which are the ones that didn't get merged (so their first func is it's original func).
Scan forward from the alloc box to find the first store, which (conservatively) must be in the same basic block as the alloc box
Set the specified generic parameters onto this abstract function, setting the parameters' context to the function along the way.
Simplify() calls can make blocks unreachable as we walk, and visiting the unreachable blocks with simplify calls is not allowed.
Swift will preserve any / data stored into this arbitrarily sized and aligned field, but doesn't / know anything about the data.
Synthesize availability attributes for protocol requirements / based on availability of the types mentioned in the requirements.
TODO(9795696): Race in thread map may trigger spurious logging at thread exit, so for now, only spawn threads if we're a server.
TODO: Given that we know the range of elements being accessed, we don't need to go all the way deep into a recursive tuple here.
TODO: If a nominal type is in the same source file as we're currently emitting, we would be able to see its value witness table.
TODO: as soon as we generate alloca instructions with accurate lifetimes we should also do a better stack size calculation here.
TODO: it would be great to factor this even lower into SILGen to the point where we can see that the parameter is +0 guaranteed.
Takes a pair of RGBA row data as input and generates 2 rows of Y data and one row of subsampled U, V data as output Input: 1, 2.
The BitVector in each / BlockState is then laid on top of it to keep track of which LSLocation / has a downward available value.
The CreateCl opcode is specified as not being allowed before the class it creates exists, and closure classes are always unique.
The arguments are pushed in order, so we should refer them by index instead of taking the top, that would lead to reverse order.
The critical / thing here is that performing an operation involving archetypes / is dependent on the witness binding we can see.
The exception was either handled, or a catch or fault handler was identified and the VM state has been prepared for entry to it.
The following mappings are used if this is a compilation in scripting mode and global variables are accessed without addressors.
The interpreter will have popped the pre-live ActRec already, so we can just return to the caller after syncing the return regs.
There isn't a canonical invalid pthread_t, but this is only used for the assert in lookup() and it's ok to have false negatives.
This allows type declarations and other things to be parsed, name bound, and type checked in batches, similar to immediate mode.
This cannot be done for general function types, since function_ref's SILFunctionTypes do not have archetypes associated with it.
This file implements semantic analysis for protocols, in particular, checking whether a given type conforms to a given protocol.
This function will rewrite any / existing external declaration to the address point as an alias into the / full metadata object.
This is redundant with a check in ifRefCountedNonPersistent, but we check earlier to avoid emitting profiling code in this case.
This is removing the copy_addr, but explodeCopyAddr takes care of removing the instruction from Uses for us, so we return false.
This pass performs straight-forward copy propagation, along with stateful copy propagation of values through physical registers.
This product includes software developed by the Apache Group for use in the Apache HTTP server project (http://www.apache.org/).
This will be resolved (or rejected) by sema when the overall refutable pattern it transformed from an expression into a pattern.
Unfortunately, we can't actually get to the end of the token without using the Lex library, which would be a layering violation.
Unfortunately, we can't check this invariant until we get to IRGen, since the AST and SIL don't know anything about type layout.
Unlikely for a function to return a value despite throwing an exception, but if it did, I suppose we would have to clean up here
VALID RANGE  Although this software can handle dates all the way back to the year 1 (3761 B.C.), such use may not be meaningful.
Walk the post-dominator tree from the query block down, building the set of blocks that the given block is control-dependent on.
We always want these methods to be cloned with new funcids in subclasses so we can burn Class*s and Func*s into the translations
We assume that all of our loops have been canonicalized so that /all/ loop exit blocks only have exiting blocks as predecessors.
We can do that particular trick because class instances' metadata have their generic parameters instantiated with real metadata.
We can't clear it here as there is no way to abort the transport and we need to be around to receive any data it may try to send
We can't really know this for a fact: even if it started as a "side-exit", real computation could've been moved into the branch.
We can't reliably filter a C enum without additional knowledge that the type has no undeclared values, and won't ever add cases.
We do not keep processing since the code below cannot properly sink ref counts over switch_enums so we might as well exit early.
We do this in the same order as leaf types since ProjTree expects that the order of leaf values matches the order of leaf types.
We don't need a ConditionalDominanceScope here because (1) there's no code in the other condition and (2) we immediately return.
We don't need to merge the litstrs in the array, because rats in arrays in the array type table must be using global litstr ids.
We hang on to the last slab instead of freeing it so that we don't keep allocating and freeing slabs in the common steady state.
We may need to merge different-sized memory stacks, because a predecessor may not touch some stack memory that another pred did.
We now know that all incoming values, other than NoPayloadEnums, are FirstIV after trivially stripping RCIdentical instructions.
We only want to return an incomplete object as a last resort, so let's look for any possible definitions of this type elsewhere.
We use a DenseMap over what are essentially StringRefs instead of a StringMap because we don't need to actually copy the string.
Wire up this BB as an "initial predecessor" of all of its successors and make each of its successors a successor for the region.
`recursive` determines whether we enter just the top generator or whether we drop down to the lowest running delegate generator.
c) Size-untracked small allocation  Many callers have an easy time telling you how big the object was when they need to free it.
do nothing Stored type variables in a generic context need to logically occur once per instantiation, which we don't yet handle.
itRef will be set to true if the iterator was initialized with MIterInit*, false if the iterator was initialized with IterInit*.
new_iter_object_any creates an iterator for the specified object if the object is iterable and it is non-empty (has properties).
note that the U, V upsampling in height is happening here as the U, V buffers sent to successive odd-even pair of lines is same.
rvalue MemberRefExprs are produced in two cases: when accessing a 'let' decl member, and when the base is a (non-lvalue) struct.
void Ksort(int sort_flags, bool ascending)  Sort an array by its keys, keeping the values associated with their respective keys.
when supporting multiple unpacks at the end of the param list, this will need to disallow transitions from unpack to non-unpack.
"Copy/grow" semantics:  Many of the functions that mutate arrays return an ArrayData* and take a boolean parameter called 'copy'.
- The keyword argument might be a typo for an actual argument name, in which case we should find the closest match to correct to.
/ / FIXME: This whole thing is a hack, because name lookup should really / just find these members when it looks in the protocol.
/ DebugValueAddrInst maybe promoted to DebugValue, when this is done, / DebugValueAddrInst is effectively a read on the location.
/ NOTE: this vector contains an approximation of whether there will be a / retain or release to a certain point of a basic block.
A TupleExpr propagate contextual type information down to its children and / can be erroneous when there is a label mismatch etc.
After running this pass all of the functions we will remove should consist only of one basic block terminated by UnreachableInst.
AllocObj re-enters to call constructors, but if it weren't for that we could ignore its loads and stores since it's a new object.
Any Objective-C initializer, because failure propagates from any initializer written in Objective-C (and there's no way to tell).
Any base which has been included with the custom base scanner should be ignored here, as we'll do one call to the custom scanner.
Apply this transformation to all the elements of a tuple value, / which just entails mapping over each of its component elements.
Because of this it pays to keep it separate from the other cases so they don't need to be littered with RepoAuthoritative checks.
Closures should appear at the VERY top of the file, so if any class in the same file tries to use them, they are already defined.
Continue this process until we take a full pass through the indexed type list without computing a different layout for all types.
DataType is actually mapped to uint64_t constants, for some reason, but if that changes we still want to test them as bytes here.
DecRef of def is done unconditionally by the IR, since there's a good chance it will be paired with an IncRef and optimized away.
Determine whether the entry is a global declaration that is being / mapped as a member of a particular type or extension thereof.
Devirtualization of remaining cases is not possible, because more than one implementation of the method needs to be handled here.
Either way, it's helpful to know the situation that led us here, so this dumps the buffer up to this point to stdout and returns.
Emit an open-coded protocol-witness thunk for materializeForSet if / delegating to the standard implementation isn't good enough.
Enumerators can end up within their enclosing enum or in the global scope, depending how their enclosing enumeration is imported.
Every closure should have a unique allocation site, but we may see it multiple times in a given round of analyzing this function.
Expand a zlib stream into a String  Starts with an optimistically sized output string of input size or maxlen, whichever is less.
FIXME: willBeRelativelyAddressed is only needed to work around an ld64 bug resolving relative references to coalesceable symbols.
Find the values that this basic block defines and the locations which we do not have a concrete value in the current basic block.
Flush any pending writes and close, calling close() will immediately call readEOF and prevent any further attempts to write data.
For now we just return Unrelated since I can not remember why I had the special check in the hasNonEmptySymmetricDifference code.
Func guards on x64 come in regular and short versions---the latter are used for Func*'s which fit into a signed 32-bit immediate.
Given a candidate list, this computes the narrowest closeness to the match / we're looking for and filters out any worse matches.
Given a reference range and a declaration context containing the range, / attempt to find a declaration containing the reference.
Go through the tracking list and add its contents to the worklist and then clear said list in preparation for the next iteration.
If it is the year following a leap year and the molad occurs on Monday at or after 9:32:43 and 1/3 sec, Tishri 1 must be delayed.
If so, create a new select_enum instruction / This is used to simplify arbitrary simple switch_enum diamonds into / select_enums.
If the declaration was imported from C, we won't gain anything from using materializeForSet, and furthermore, it might not exist.
If the decls in question are distinct protocol members, let the checks below determine if the two choices are 'identical' or not.
If the destination has a payload but the source doesn't, we can destroy the payload and primitive-store the new no-payload value.
If the next non-uppercase character was not a letter, we seem to have a plural, we should still lowercase the character we're on.
If the property decl is an instance property, its accessors will be instance methods and the above condition will mark them ObjC.
If the value has a common size and alignment, use specialized value witnesses we already have lying around for the builtin types.
If there are any BB arguments in the destination, replace them with the branch operands, since they must dominate the dest block.
If toType is a NoEscape or NoReturn function type and the expression is a ClosureExpr, propagate these bits onto the ClosureExpr.
If we can't figure out the Base or Projection Path for the read instruction, process it as an unknown memory instruction for now.
If we did not find a static method AND this_ is null AND there is a frame ar, check if the current instance from ar is compatible
If we found a declaration from the standard library, make sure it does not show up in the lookup results for the imported module.
If we found a mapping, check to see if the matched up arguments agree in their type and count the number of mismatched arguments.
If we know the requested argType to use, use computeTupleShuffle to produce the shuffle of input arguments to destination values.
If we know we have a fixed stride different from our size, or we have a dynamic size, do a byte-level GEP with the proper stride.
If we're checking conformance of an existential type to a protocol, do a little bit of extra work to produce a better diagnostic.
In a pseudomain, we have to do a non-inline DecRef, because we can't side-exit in the middle of the sequence of LdLocPseudoMains.
In particular notice that any instructions which may raise, as well as Call, CallArray, and CallBuiltin all require catch traces.
In particular, operator path pieces represent actual operators here, but filters on operator functions when they appear later on.
In production mode, only functions that we have assumed can be intercepted during static analysis should actually be intercepted.
In this case we should populate m_lineTable (otherwise we might lose line info altogether, since it may not be backed by a repo).
Initialize the inline cache, or do a lookup in the out-of-line cache if we've finished initialization and have smashed this call.
InsertCFGDiamond - Insert a CFG diamond at the position specified by the / SILBuilder, with a conditional branch based on "Cond".
It might be worth adding a mechanism for the external emitter to emit a line number when it fails that we can use when available.
Keep track of an association between vardecls and the StmtCondition that they are bound in for IfStmt, GuardStmt, WhileStmt, etc.
Make the alloca at least as aligned as the coercion struct, just so that the element accesses we make don't end up under-aligned.
Mark each reg assigned to an inactive interval as only free until the first position at which `current' intersects that interval.
Multi-threading compilation has multiple outputs, except those outputs which are produced before the llvm passes (e.g. emit-sil).
Node weights are not required to be accurate and, since arc weights are derived from nodes' weights, they aren't accurate either.
Note serialize can only run user-defined code if its argument is an object, which will never be a constant type, so this is safe.
Note that the derived class' sweep() is responsible for closing m_fd and any other non-request resources it might have allocated.
Now that we've scalarized some stuff, recurse down into the newly created element address computations to recursively process it.
Often type checking will create new AST nodes and replace old ones / (e.g. by turning an UnresolvedDotExpr into a MemberRefExpr).
Optimize an array operation that has (index_raw_pointer b, sizeof(T) * Dist) / operands into one that use index_addr as operands.
Pacify compilers like GCC when the user code never invokes YYERROR and the label yyerrorlab therefore never appears in user code.
Process the remaining bytes in the internal buffer and the usual prolog according to the standard and write the result to RESBUF.
Removing the useless copy can be thought of as forwarding the original object directly to the call argument in place of the copy.
Return 0 or 1 depending on whether or not a match was found and (optionally), set matched (sub-)patterns for passed-in reference.
Return a function which takes two pointer arguments, loads a / pointer from the first, and calls swift_release on it immediately.
Scan all of the uses of the retain count value, collecting all the releases and validating that we don't have an unexpected user.
Since we're exposing an element of a Vector in an read/write context, we need to sever any buffer sharing that might be going on.
Still have format specs, but no more args passed throw_wrong_arguments_nr check should guarantee that we're already past min args
TODO: Eventually we can plug in some analysis on the what the release of the Ptr can do, i.e. be more precise about Ptr's deinit.
TODO: More general conditions in which we can relate the BB to a single case, such as when there's a single literal "false" case.
TODO: reorder, if possible, so that diagnostics emitted during CompilerInvocation::parseArgs are included in the serialized file.
Test to see if there is a value with the same name as 'proposedName' in the same module as the decl FIXME: This will miss macros.
The `mcprep' instruction here creates a smashable move, which serves as the inline cache, or "prime cache" for the method lookup.
The only two cases where an archetype is always legal in a function is if it is self or if it is from an opened existential type.
The pkeys array points to elements inside of Keys returned from Key::Get() which may be newly allocated and have no other owners.
The rule here is that only blocks with a single predecessor and blocks that are dominated by them can rely on branch information.
The thunk that implements the partial apply calls the closure function that expects all arguments to be consumed by the function.
These are instructions that push an output type that is always the same, i.e. where an AssertT is never going to add information.
These specializations are generated during -O compilation of / the library, but only used only by client code compiled at -Onone.
This block of code, performs the pop back and also if the Node has been invalidated, skips until we find a non invalidated value.
This code implements the AUTODIN II polynomial The variable corresponding to the macro argument "crc" should be an unsigned long.
This file implements validation for Swift types, emitting semantic errors as appropriate and checking default initializer values.
This informs our recursion that tuple stores are not scalarized outside, and that stores should not be treated as partial stores.
This is because (a) switch statements are equivalent to a series of if-elses, and (b) Zend has some weird evaluation order rules.
This is because extensions may wish to assign to properties after a typehint guard, which is going to fail without HardTypeHints.
This is used when generating layouts, but after that, layout_index will index into the layout table for the actual layout to use.
This object was just a wrapper around a FILE* or fd owned by someone else, so don't close it except in explicit calls to close().
This will eliminate struct_extracts/tuple_extracts from the newly created aggregate and have them point directly at the argument.
This, hopefully, will help / ARC sequence opt to remove retain and release pairs without worrying too / much about control flows.
To do this, we search / forward in the current block from the copy that initializes the value to the / point of deinitialization.
Unfortunately there's not much that can be done about this, but we want to catch it quickly so that we can try to work around it.
We can compute an upper bound for the size of the result in advance and so we can prepare the buffer we pass to `sha256_crypt_r'.
We can compute an upper bound for the size of the result in advance and so we can prepare the buffer we pass to `sha512_crypt_r'.
We can only optimize settings that are system wide since user level settings can be overridden during the execution of a request.
We can skip the catch body, since bounding the result by None is guaranteed to give back None, which leaves our Result unchanged.
We could theoretically reject cases where the set of conformances is known (say the protocol or classes are private or internal).
We do this regardless of whether the base is trivial because even a trivial base may be value-dependent on something non-trivial.
We make no guarantee that the Fix-It, when applied, will result in semantically valid code -- but, at a minimum, it should parse.
We may have a known type even without an SSATmp for an available value, or that is more refined than an SSATmp knownValue's type.
We need a definition for that, so record all the variable definitions along with their specification, which we can consult later.
We need to blot pointers we remove after processing an individual pointer so we don't process pairs after we have paired them up.
We reserve the bottom page of each stack for use as the surprise page, so the minimum useful stack size is the next power of two.
We want to process (name bind, type check, etc) decls one at a time to make sure that there are not forward type references, etc.
We're performing a single compile and don't have -emit-module-path, but have been told to treat the module as a top-level output.
With SIL optimizations this is not guaranteed and a variable can end up in two allocas (for example, one function inlined twice).
`connections_requested` - This number helps with comparing how many connection would have been made if the there were no pooling.
base may be from inside a RefData inside a stack/local, so to determine setRef we must check the actual value of the stack/local.
bool ExistsStr(const ArrayData*, const StringData*)  Return true iff this array contains an element with the supplied string key.
container_size indicates number of bytes to be left blank at the beginning of p_out buffer to accommodate for a container header.
don't try to write REQUEST_COMPLETE again There may still be a pending eventCount from an onComplete call from the open tranport.
pretty unlikely, but if it was we must clear CLOEXEC, and the only way to do that is to dup it to a new fd, and then dup2 it back
scopes that this scope calls (callees) TODO(stephentu): this list only contains *user* functions, we should also include builtins
(Call this when processing an interrupt since this probably means that execution has moved away from the previous interrupt site.)
(We don't want to do this if the index expression is a literal type that differs from the return type of the subscript operation.)
/ / This is necessary whenever the inner type may not normally be represented / as a 'type-simple' production in the type grammar.
/ / This is only necessary because Sema fills in too much type information / before the type-checker runs, causing redundant work.
A retainable pointer representation may be wrapped in an optional, so we need to provide inttoptr/ptrtoint in addition to bitcast.
ALGORITHMS  The calculations are based on two different cycles: a 4 year cycle of leap years and a 5 month cycle of month lengths.
After finishing a request, check to see if we've allowed any triggers to fire and update the time of the oldest request in flight.
All pairs of non-equivalent primitives are not related by either subtypeOf or couldBe, including if you wrap them in wait handles.
An important note is that the bits in memory_support can represent memory locations that possibly alias (via ALocMeta::conflicts).
And we are only interested in deserializing a specific requirement and don't have that requirement, don't deserialize this method.
Backward pass that weakens DecRefs to DecRefNZ if they cannot go to zero based on future use of the value that they are DecRefing.
BaseSC and BaseSL remove an A that may be on the top of the stack or one element below the top, depending on the second immediate.
Because we're transforming an existing tuple, the weird corner case where TupleType::get does not return a TupleType can't happen.
Before we begin emitting code to generate the actual path, try to find the latest point in the path that we've cached a value for.
Bizarrely, comparison against a resource is done by converting both the string and the resource to a double and comparing the two.
Calculate the profFactor for the callee as the weight of the caller block over the weight of the entry block of the callee region.
Change the thread mode, and mark the given (or calling) thread as the current thread for this proxy, depending on the thread mode.
Check if the instruction corresponds to user-written code, also make sure we don't report an error twice for the same instruction.
Don't check for the existence of input files, since the user of the CompilerInvocation may wish to remap inputs to source buffers.
For concrete metadata, we want to use the initializer on the / "full metadata", and define the "direct" address point as an alias.
For recovery, again make sure the user didn't try to spell a switch case label: 'case Identifier:' or 'case Identifier where ...:'
Functions that throw C++ exceptions TODO(T6618159) Take a stack dump here to save context if it results in a crash when propagated
Given a Swift type, attempt to return an appropriate Clang / CanQualType for the purpose of generating correct code for the / ABI.
Given that we have an imported Clang declaration, deduce the / ownership conventions for calling it and build the SILFunctionType.
If I is a use of the value that we are going to track, this is the position right after I where we would want to move the release.
If Index is greater than zero, then we know that the two projection paths have a common base but a non-empty symmetric difference.
If a key (after various conversions) occurs more than once in the container, we'll simply overwrite the old entry and that's fine.
If constraint solving resolved this to an UnresolvedType, then we're in an ambiguity tolerant mode used for diagnostic generation.
If either Left or Right is unknown then we can't say anything about the sign of the final result since XOR does not short-circuit.
If one is a compound name and the other is not, they do not conflict if one is a property and the other is a non-nullary function.
If one of the alias classes have a non-None stag, we can only keep it if the other doesn't have any of the corresponding bits set.
If one of the string literals is UTF8 and another one is UTF16, convert the UTF8-encoded string literal into UTF16-encoding first.
If the input instruction has a dest, this will return an SSATmp that represents the same value as dst(0) of the input instruction.
If the result element wasn't computed, we must be analyzing code within an unreachable cycle that is not dominated by "TheMemory".
If the situation is not cacheable, we just put a value into the immediate that will cause it to always call out to handleSlowPath.
If the stag bits for the two classes overlap, but the stags were different, we're dealing with a union-style STag (like IterBoth).
If the type is not a function type, then we just return the original type, but we don't check that the Decl is the associated one.
If there are non-case-label statements at the start of the switch body, raise an error and recover by parsing and discarding them.
If there's no suffix, the scanner is wrapped within a for loop which loops over the entire allocation given by the size parameter.
If this is an escaping closure, then any captured decls are also escaping, even if they are coming from an inner noescape closure.
If typechecking was performed we use the computed accessibility, otherwise / we fallback to inferring accessibility syntactically.
If we are inside of a method, check to see if there are any ivars in scope, and if so, whether this is a reference to one of them.
If we do not have a tag associated with this enum value for each predecessor, we are not a switch region exit for this enum value.
If we have an argument list (i.e., a scalar, or a non-zero-element tuple) then diagnose with some specificity about the arguments.
If we're in a comma-separated list and the next token starts a new declaration at the beginning of a new line, skip until the end.
Important note: because of the `kills' set modifications, an instruction may not report that it can re-enter if it actually can't.
In case the Self operand is an alloc_stack where a copy_addr copies the result of an open_existential_addr to this stack location.
In the entry block, hhbc-translator gets a chance to emit some code immediately after the initial checks on the first instruction.
In this situation, the decompressor will return to its caller (with an indication of the number of scanlines it has read, if any).
Insert releases and destroy_addrs as early as possible, because we don't want to keep objects alive longer than its really needed.
Instantiate a value witness table for a class-constrained existential / container with the given number of witness table pointers.
Its run as a treadmill job, because old requests might continue to execute the old code, even after we finish the relocation step.
Local function that retrieves the requirement with the same name as the provided requirement, but within the given known protocol.
Mtime for module file KEY We don't need the stored key to load the results, but it is useful if we want to debug the cache itself.
Native ppc64 instructions can't handle an immediate bigger than 16 bits and need to be loaded into a register in order to be used.
Need to bitcast to an integer in order to use 'icmp eq' if the piece isn't already an int or pointer, or in order to apply a mask.
Note that this is suppressed for certain accessibility declarations, which are imported as getter/setter pairs and not properties.
Now we can generate a new BB for preds reaching BB over the success path and a new BB for preds reaching BB over the failure path.
Okay, we'll replace the BB arg with one with the right type, replace the uses in this block, and then rewrite the branch operands.
On failure, we'll clean up everything (except self, which should have been cleaned up before jumping here) and return nil instead.
Only actually recurse if this child DIE is the above computed first DIE, or one following it, and begins before the end parameter.
Only add a fulfillment if we don't have any previous fulfillment for that value or if it 's cheaper than the existing fulfillment.
Pass in both the TBAA types so we can perform typed access TBAA and the actual types of V1, V2 so we can perform class based TBAA.
Recompute a predicted type for when the proven type changes (or when a new prediction is made and we want to discard the old one).
Remap vardecls that the case body is expecting to the pattern var locations for the given pattern, emit whatever, and switch back.
Return the minimum precedence that an expression in the place of 'expr' must have without needing to be surrounded by parentheses.
Same type requirements may allow for generic inference, even if this generic parameter is not mentioned in the function signature.
Skip incrementing the color count so that the dither / matching phase won't use it on pixels that shouldn't have been transparent.
So we can insert a load in the pre-header that defines a Gen, and replace the load at the position in the loop with an AssertType.
Step out of the current control flow to emit a foreign error block, / which loads from the error slot and jumps to the error slot.
Store the function constant and calling convention as a StaticFunction so we can avoid bitcasting or thunking if we don't need to.
TODO: This logic covers the most common case, when there's exactly one more no-payload case than extra inhabitants in the payload.
Take the type reference inside a protocol conformance record and fetch the / canonical metadata pointer for the type it refers to.
Test that filling a small dense map with exactly the number of elements in the map grows to have enough space for an empty bucket.
The immediate dominator of a successor of this block needn't be this block, but it has to be something which dominates this block.
The next 2 functions should be used to manage the generation count/time in the treadmill for both the requests and the work items.
The semantics of these functions is the following:  If the `copy' argument is false, a COW is not required for language semantics.
The types of use vars are looked up from the index, but we don't currently do anything to try to track closure static local types.
The unwinder will unwind through VMs nested under this one first, making it safe to assume that we can sync the VM registers here.
The version range for the false branch should never have any versions that weren't possible when the condition started evaluating.
The vlower() implementations may allocate scratch blocks and modify instruction streams, so we cannot use standard iterators here.
The wildcard spec '*' represents the minimum deployment target, so there is no need to create a refinement context for this query.
There isn't a nice way to get CPU seconds on OS X that I've found, outside of setitimer, which has its own configurability issues.
These typealiases frequently create a many-to-one mapping, so just use the first type that mapped to a particular underlying type.
This ensures that the debugger knows about the sandbox, and adds the thread to the set of threads currently active in the sandbox.
This field of the structure is documented as private, and sure enough it's gone in the latest libjpeg, replaced by something else.
This is an error case, where we're trying to use type inference to help us determine which declaration the user meant to refer to.
This is done by means of calling _forceBridgeFromObjectiveC or _conditionallyBridgeFromObjectiveC_bridgeable from the Target type.
This is true when there is an ambiguous destroy, which may be a release / of a fully-initialized or a partially-initialized value.
This is used to avoid duplicate error reporting in case we reach the same instruction from different entry points in the WorkList.
Type check hoisting moves type checks higher up in the CFG, allowing the check's type information to be used by more instructions.
Unlink this instruction from its current basic block and insert it into / the basic block that Later lives in, right before Later.
Until the rest of the pipeline can handle it without regressing, try to not break tracelets in the middle of new minstr sequences.
VPXEncode: Takes a Y, U, V data buffers (with color components U and V subsampled to 1/2 resolution) and generates the VPX string.
Validate that the contextual type conforms to ArrayLiteralConvertible and figure out what the contextual element type is in place.
Wait on socket availability with a timeout  Returns: 0 on success -1 on failure, but not critical enough to throw an exception 1..
Walk through the operand list and delete any random instructions that will become trivially dead when this instruction is removed.
We just interpreted a bytecode that decided we need to return to an address in the TC rather than interpreting up into our caller.
We need to handle PatternBindingDecl as a special case here because its attributes can only be retrieved from the inside VarDecls.
We need to iterate to find out the actual size, since kNamedLocalDataType elements in the array may have been set to KindOfUninit.
We now know this protected method is accessible, but we need to keep going because ctx may define a private method with this name.
We only track two kinds of uses for delegating initializers: calls to self.init, and "other", which we choose to model as escapes.
We should include the Decl* in the DiagnosticInfo and have a way for Xcode to handle this "points-at-a-decl-from-module" location.
We shouldn't ever register opened types multiple times, but saving and re-applying solutions can cause us to get multiple entries.
We want to handle stacks partially specially, because they can be expanded in some situations even if they don't have an ALocMeta.
We're using a repo generated in WholeProgram mode, but we're not using it in RepoAuthoritative mode (this is dodgy to start with).
We've hit a breakpoint and now need to make sure that breakpoints won't be hit again for this site until control leaves this site.
When a load instruction is encountered, remove the loaded location and /    any location it may alias with from the BBWriteSetMid.
When we combine the partial_apply and this apply into a new apply we need to retain all of the closure non-address type arguments.
getDecl - Return the underlying variable declaration associated with this / allocation, or null if this is a temporary allocation.
return value is only used as a simple string, so mis-aligned parts inside the Bigint are not at risk on strict align architectures
(Breakpoints can still get hit if control reaches this site during a call that is part of this site because the flags are stacked.)
- If the destructor for any of these things throws a fatal, it's swallowed, and we set surprise flags to throw a fatal from now on.
/ / BBWriteSetMid is initialized to BBWriteSetOut of the current basic block / before instructions in the basic block is processed.
/ / General calls are unsafe because they may copy the array struct which in / turn bumps the reference count of the array storage.
/ / This proof also hinges on the fact that if release A interferes with / releases B then release B must interfere with release A.
/ / When a branch is modified existing pointers to the operand / (ValueUseIterator) become invalid as they point to freed operands.
/ For organizational purposes, the platform-independent logic for / constructing job invocations is also located in ToolChains.cpp.
/ This tests the expandTypeIntoLeafProjectionPaths function, which is / a function used extensively in expand and reduce functions.
2) The result of the partial_apply is re-abstracted anyway (and the re-abstracted function type matches with our specialized type).
@convention(witness_method) callees are exploded as a triple consisting of the function, Self metadata, and the Self witness table.
Again we need to be careful here, because ssa construction (with the existing representation) can change the operand from under us.
At this point, either the tested type is a subtype of the src type, or they are non-disjoint but neither is a subtype of the other.
Attempt to resolve this nested type to an associated type of one of the protocols to which the parent potential archetype conforms.
Before a basic block is processed, it / is initialized to the intersection of BBWriteSetIns of all successors of the / basic block.
Before we do, save the catch block attached to the call in a side table so the return helpers and unwinder can find it when needed.
Check if we can skip the llvm part of the compilation if we have an existing object file which was generated from the same llvm IR.
Either null, or populated by initialization of ThreadInfo as an approximation of the highest address of the current thread's stack.
Emit a function now, if it's externally usable or has been referenced in / the current TU, or remember how to emit it later if not.
Enqueue additional tasks if we have additional tasks, we aren't already at the parallel limit, and no earlier subtasks have failed.
FIXME: Use the allArchetypes vector instead of the generic param if available because of cross-module archetype serialization woes.
FIXME: We should have generated an overload set from this, in which case we can emit a typo-correction error here but recover well.
Find the closest colormap entry for each cell in the update box, given the list of candidate colors prepared by find_nearby_colors.
For DCE analysis it is ok to assume the transfer function is the identity on unreachable blocks (i.e. gen and kill sets are empty).
For most of our types, where m_data represents an exact constant value, this just means the types only overlap if there is no data.
For now this just gives up if the context and the callee class could be related and the context defines a private of the same name.
Helper function to determine if given the current state of the / deserialization if the function body for F should be deserialized.
However it requires a mapping from vreg numbers to the instruction that defines them, and a way to address individual instructions.
However, so long as we see already-resolved types that refer to protocols, skip over them to keep looking for a misplaced raw type.
However, the goal for each stack frame is to print stack fragments from deepest to shallowest -- a then b in the following example:
However, with call we are supposed to just return null (according to the PHP 7 implementation) Here is that speciality check, then.
If a instruction may write to a local that is not live, it can be marked as removable if it is known to have no other side-effects.
If all basic blocks will have their predecessors processed if the basic blocks in the functions are iterated in reverse post order.
If an error is encountered adding a tagset, the read preference will again be cleared to avoid being left in an inconsistent state.
If edgeTargetsEdgeSource returns true, this method is called to determine / which outgoing edge of Node is the target of this edge.
If the base is an object, and it does not implement ArrayAccess, it is still ok to push the right hand side, because it is a fatal.
If the explicit conformance is associated with a type that is different from the type we're checking, retrieve generic conformance.
If the expression we've found is the intended target of an RebindSelfInConstructorExpr, wrap it in the RebindSelfInConstructorExpr.
If the function is marked readonly, then we know it can't have any interesting side effects, so we don't need to analyze it at all.
If the intrinsic was lowered from a call to a function that takes two arguments of the same type, use the type of the LHS argument.
If the number of captured subpatterns on this run is less than the total possible number, pad the result arrays with empty strings.
If the parsed stmt was a GuardStmt, push the VarDecls into the Entries list, so that they can be found by unqual name lookup later.
If the server hasn't received the entire request body ServerShutdownEOM seconds after shutdown starts, the request will be aborted.
If the true case didn't need the continuation block, then we don't either, regardless of whether the current location is reachable.
If the type to be fixed is an optional type that wraps the type parameter itself, we do not want to go through with the assignment.
If the usable space in the chunk is smaller than PaddingSize, no TombHash is needed, because we can tell that the chunk is used up.
If this SILValue was blotted, there is nothing left to do, we found some sort of conflicting definition and are being conservative.
If this is a ValueMetatypeInst, check to see if it's part of a self.init call to a factory initializer in a delegating initializer.
If this is true, hoisting any loop invariant definition will create uses of SSATmps that span a call on some path to the back edge.
If this token is located at the / beginning of the line, then the location is adjusted to point to the end / of the previous token.
If we are defining a default initializer for a class that has a superclass, it overrides the default initializer of its superclass.
If we find a subtree that cannot be type checked on its own (even to an incomplete type) then that is where we focus our attention.
If we're in the Created state we want to transition to Priming, and if we're in the Started state we want to transition to Running.
Import the given Objective-C protocol list, along with any implicitly-provided protocols, and attach them to the given declaration.
In addition to the declared arguments, the constructor implicitly takes the metatype as its first argument, like a static function.
In particular, it should provide the results via the return value from writeStats, not print to stderr :) Task 3396401 tracks this.
In principle, this is an unnecessary restriction, and you can imagine caches that might want to vend this combination of accessors.
Initialize the invariant superclass components of a class metadata, / such as the generic type arguments, field offsets, and so on.
Jumps outside of the decision tree entirely will be / fine: the jump will simply destroy the subobjects instead of the / aggregate.
Likewise, if the candidate is inaccessible from the scope it is being accessed from, mark it as inaccessible or a general mismatch.
Locate the colormap entries close enough to an update box to be candidates for the nearest entry to some cell(s) in the update box.
MainExePath points to "lib/sourcekitd.framework/Versions/Current/XPCServices/ SourceKitService.xpc/Contents/MacOS/SourceKitService"
Newline before label will be subtracted from returned text, but raw text will include it, for zend_highlight/strip, tokenizer, etc.
Note that this InlineReturn counts as a weak use, but we haven't incremented for it yet, which is where the "+ 1" comes from below.
Note that we're assuming that it's safe to call a function that returns a pointer at a site that assumes the function returns void.
Objective-C generics don't preserve their generic parameters at runtime, so they aren't able to fulfill type metadata requirements.
On a 2's complement machine, negating the most negative integer results in a number that cannot be represented as a signed integer.
Otherwise, if there's a linkage name, demangle it, and strip off everything except the last section, and use that as the base name.
Otherwise, we couldn't find a specific thing to complain about, so emit a generic error, depending on what kind of failure this is.
Parameters: m1 - The first affine transformation m2 - The first affine transformation  Returns: GD_SUCCESS on success or GD_FAILURE
Perhaps this is something that shouldn't be done, and is a bandaid over some other lower-level architecture issue that I'm missing.
Returns true if this is an instruction that may have side effects in a / general sense but are inert from a load store perspective.
Similar to swift::conflicting, but lenient about protocol extensions which / don't affect code completion's concept of overloading.
Simple implementation of bstrcaseeq, used for bstrcasestr since the above implementation is specialized for exact-matching strings.
Since Swift protocol descriptors are laid out to look like ObjC Protocol* objects, the name has to clearly be a Swift mangled name.
Since we don't care about the actual length, we can use this, which lets us ignore the string data a larger proportion of the time.
So don't go around using the translation-time values of vmfp()/vmsp(), since they have an unpredictable relationship to the source.
So, for example, we may suggest wrapping a variable declaration in a guard, which would not be valid if the variable is later used.
Special cases: - "connect" isn't supported by the URL parsing - "readPreferenceTags" is an array of tagsets we need to iterate over
The copy_addr doesn't provide any values, but we've arranged for our iterators to visit the newly generated instructions, which do.
The dealloc_stack of an alloc_stack must be in the loop, otherwise the dealloc_stack will be fed by a phi node of two alloc_stacks.
The destruct functions below all arbitrarily take RefData* as an example of a refcounted object, then just cast to the proper type.
The interpOne functions are fat wrappers around the iop* functions, mostly adding a bunch of debug-only logging and stats tracking.
The set of type witnesses inferred by this solution, along / with the index into the value witnesses where the type was / inferred.
The setter loads the oldValue, invokes willSet with the incoming value, does a direct store, then invokes didSet with the oldValue.
The storage occupied by the enum may be smaller than the one of the raw type as long as it is large enough to hold all enum values.
The type of a match predicate, which takes as input a node and its / parent and returns a bool indicating whether the node matches.
There is an inout 'self' when we have an instance method of a value-semantic type whose 'self' parameter is a pointer-to-non-const.
These invalidate enums so "write" memory, but that is not an essential operation so we can remove these if they are trivially dead.
This DIE is the first one which contains some data within the begin/end range, so that must be the first one to begin recursion at.
This doesn't work for the full generality of OptionalEvaluationExpr, but it works given that we check the result for certain forms.
This file implements generation of Clang AST types from Swift AST types for types that are representable in Objective-C interfaces.
This is currently true from this place, but we need to be careful if this function is ever called before user's rpaths are emitted.
This is sufficient to allow us to identify EBCDIC text and to distinguish between old-style and internationalized examples of text.
This is the authoritative map that drives Hack's auto-importation mechanism for core types and classes defined in the HH namespace.
This is true when there is a destroy on a path where the self value may / have been consumed, in which case there is nothing to do.
This makes it easy to reuse the load from the first such projection for all subsequent projections on the same value decl or index.
This module needs some understanding of both types, and both of these types of stores affect memory support, but in different ways.
This prevents us from removing members of lhs that weren't present in rhs, but would be casualties of removing certain bits in lhs.
This should only accept as an operand type single-refcounted-pointer types, class existentials, or single-payload enums (optional).
Try to CSE the users of the current open_existential_addr instruction with one of the other open_existential_addr that dominate it.
Turn block pointer types back into normal function types in any context where bridging is possible, unless the block has a typedef.
VALID RANGE  These routines only convert dates in years 1 through 14 (Gregorian dates 22 September 1792 through 22 September 1806).
We already consumed self, but there may be subsequent loads if the call to 'super.init' or 'self.init' involves instance variables.
We interleave copies and loads in `edge_copies', so here and below we process them separately (and pass `true' to avoid asserting).
We never ask for anything else than DOUBLE, LONGLONG and STRING so in the case we get something else back something is really wrong
We sync the VM registers here, then optionally use a landing pad, which is an exit trace from hhir with a few special instructions.
We've exited the epilogue sequence, try to find out which parameter we have all the epilogue releases for and which one we did not.
add extra fields required for files: - filename - upload date - length these fields are only added if the user hasn't defined them.
and set endHighlightLine/Column so that it is just past the end of the spew, and all code up to the truncation will be highlighted.
end anonymous namespace / Perform a copy or init operation from an array of ManagedValue (from an / RValue) into an initialization.
find all the stores, so we can determine whether a phi is actually required for each src (also, we need a candidate store to clone)
partial_apply instructions do not allow the pointer to escape when it is passed indirectly, unless the partial_apply itself escapes
php's glob always produces an array, but Variant::Variant(CArrRef) will produce KindOfNull if given a req::ptr wrapped around null.
readwbmp ------- Actually reads the WBMP format from an open file descriptor It goes along by returning a pointer to a WBMP struct.
setLocalValue - When an instruction or block argument is defined, this / method is used to register it and update our symbol table.
the mechanism is to force them all to start interpreting all of their code in an effort to gain control in phpDebuggerOpcodeHook().
(*) `t1' could also be defined by an instruction doing a load from that location, but it's even more obviously ok in that situation.
(Or also we sometimes use them just for some static_assertions relating to calls to helpers from mcg that hardcode these registers.)
*NOTE* No instruction destruction can happen here since we may remove instructions that are insertion points for other instructions.
- If the preds provide only one unique value other than the dest of the phi itself, replace the phi with a Mov of that unique value.
/ Since LLVM and many system linkers do not have a notion of relative symbol / references, we emit the symbol as a global asm block.
/ Within a closure, we require that the source code contain "self." explicitly / because 'self' is captured, not the property value.
A (case-insensitive) map from class method names to associated FuncFamily objects that group the set of possibly-overriding methods.
A (case-insensitive) map from interface names supported by this class to their ClassInfo structures, flattened across the hierarchy.
A cleanup that deinitializes an opaque existential container / before a value has been stored into it, or after its value was taken.
A cond_fail that would have protected (executed before) a memory access must - after hoisting - also be executed before said access.
A walker that looks for 'try' or 'throw' expressions that aren't nested within closures, nested declarations, or exhaustive catches.
Add the given protocol conformance to the list of conformances for which / runtime records will be emitted in this translation unit.
Aliasing inouts is unspecified, but we still want aliasing to be memory- safe, so we can't mark inouts as noalias at the LLVM level.
An apply is ok if the argument is used as an inout parameter or an indirect return, but counts as a possible mutation in both cases.
An autoclosure body is the part of the enclosing function body for the purposes of deciding whether a try contained a throwing call.
Assigning to YYVAL unconditionally makes the parser a bit smaller, and it avoids a GCC warning that YYVAL may be used uninitialized.
At this point it is known that there is only one remaining method implementation which is not covered by checked_cast_br checks yet.
Bump the current buffer pointer forward *before* calling parseInput, so we don't get stuck in an infinite loop if parseInput throws.
Check surprise flags in the same place as the interpreter: after setting up the callee's frame but before executing any of its code.
Clear the buffer for the intermediate result so that people attaching to processes or reading core dumps cannot get any information.
Determine we can suppress the warning about a potential witness nearly / matching an optional requirement by moving the declaration.
Devirtualization of functions with covariant return types produces a result that is not an apply, but takes an apply as an argument.
Do not attempt a value-to-optional conversion when resolving the applicable overloads for an operator application with nil operands.
Don't walk the children for this node, it leads to multiple diagnostics because of how sema injects this node into the type checker.
Equality and subtyping have fairly strict requirements on tuple matching, requiring element names to either match up or be disjoint.
FIXME: Extract useful related declarations, overloaded functions, if VD is an initializer, we should extract other initializers etc.
FIXME: If we have fewer arguments than we need, that might be okay, if we're allowed to deduce the remaining arguments from context.
FIXME: We should really go through the conformance above to extract the element type, rather than just looking for the element type.
Find the locations that this basic block defines and the locations which we do not have a concrete value in the current basic block.
For PHP 7 support, in certain scenarios, we throw a deprecation warning and then for PHP 8+ support we will not support them at all.
For these classes, we want the initial type of the property to be the type set by the 86pinit method, so we set the type to TBottom.
Functions, especially artificial thunks and closures, are often generated on-the-fly while we are in the middle of another function.
Future considerations for this: - If we have the structural type lying around in some cheap fashion, maybe we *should* just pass it.
Generators pass return values through both the eval stack and the registers, so the memory location already contains the same value.
Get the expression result of type checking the arguments to the call independently, so we have some idea of what we're working with.
However, some special functions written in hhas (e.g. array_map) have complex DV funclets that get retranslated for different types.
I don't think there is any need to send an empty chunk, other than sending out headers earlier, which seems to be a useless feature.
If 'start' or 'length' are arrays and we've gone past the end, default to 0 for start and the length of the input string for length.
If Objective-C interop is enabled, generic types might contain Objective-C references, so we have to use unknown reference counting.
If a value (after various conversions) occurs more than once in the container, we'll simply overwrite the old entry and that's fine.
If an exit is associated with an FP that was already sunk walk up the chain to the first FP that wasn't sunk and associate it there.
If it's a jump, we're printing relative offsets, and the dest is within the range we're printing, add the dest as a relative offset.
If m_pos is the canonical invalid position, we need to update it to what the new canonical invalid position will be after compaction
If no old capacity was provided, we compute the largest capacity where m_size/cap() is less than or equal to 0.5 for good hysteresis
If the day of the month is not as expected one then we must have adjusted back to the previous day so add 24 hours worth of seconds.
If the imported module name is the same as the current module, skip the Swift module loader and use the Clang module loader instead.
If there is a potential modification in the current block, scan the block to see if the store or escape is before or after the load.
If this is ever insufficient --- if we have interesting bridging to do to 'self' --- we have the right information to be more exact.
If we didn't manage to diagnose anything well, so fall back to diagnosing mining the system to construct a reasonable error message.
If we find what looks to be a / string literal, diagnose the problem and return a pointer to the end of the / entire string literal.
If we found the closing brace, then the caller should not care if there were errors while parsing inner decls, because we recovered.
If we have a thin-to-thick abstraction change, cook up new a metatype value out of nothing -- thin metatypes carry no runtime state.
If we only need to capture a single Swift-refcounted object, we still need to build a thunk, but we don't need to allocate anything.
In addition to changing the current preprocessor directly, we still need to change the options structure for future module-building.
In all the cases where getConstantLinkage returns something different for ForDefinition, it returns an available-externally linkage.
In order to avoid tail call elimination optimization issues, grab the parent frame pointer in order make sure this pointer is valid.
In var/let decl with multiple patterns, accumulate them all in this list so we can build our singular PatternBindingDecl at the end.
Interleave the occupiedValue and spareValue bits, taking a bit from one / or the other at each position based on the spareBits mask.
Invalid header for now, to avoid truncated output due to errors looking valid (and to allow computing diskOffset while serializing).
IterFree must come after VerifyRetType, because VerifyRetType may throw, in which case any Iters will be freed by the fault funclet.
Let's not differ from C99 6.8.5.2: "The evaluation of the controlling expression takes place after each execution of the loop body."
Look up the catch trace for the return address in `ctx', and install it by updating the unwind RDS info, as well as the IP in `ctx'.
Make sure we use the same value category for these so that we can hereafter just use simple equality checks to test for abstraction.
No need to perform special logic for "ReturnAllTokens", we already accounted for that when the tokens were inserted into m_lookahead
Normally to forward declare these, we would have to forward declare a lot of other types, but we employ a dirty trick to avoid this.
Note that the canonical mangling signature will sometimes use different dependent type from Generics, apparently for no good reason.
Note: this currently isn't exhaustively checking accessibility, except in cases where we must do a little bit of it for correctness.
Note: we don't redirect the defer-edges because we don't want to trigger updatePointsTo (which is called by addDeferEdge) right now.
Nothing we can do in other cases that could be strings (without statically known values)---they may behave like integers at runtime.
Order is important in this enum: it's only legal to transition to states with higher values, and states are merged using std::max().
Other function representation attributes are not normally supported at source level, but we want to support them there in SIL files.
Overlay/append this class's protected and public properties onto/to those of the parent, and append this class's private properties.
Performing a RPO walk over the control flow graph, tracking any / LSLocations that are read from or stored into in each basic block.
Previous revisions of the code would do explicit cleanups, but simply running the self-test after hash computation is more reliable.
Protocols don't support generic parameters, but people often want them and we want to have good error recovery if they try them out.
Results: chPtr is filled with the Tcl_UniChar, and the return value is the number of bytes from the UTF-8 string that were consumed.
See http://swift.org/LICENSE.txt for license information See http://swift.org/CONTRIBUTORS.txt for the list of Swift project authors
Set the constraints for both side of the conditional branch, if that the condition is dominating the dest block (see comment above).
Since there are no side effects, it is perfectly fine to delete this instruction if all uses of the instruction are also eliminable.
Since we only typecheck the primary file (plus referenced constructs from other files), any error is likely to break SIL generation.
TODO: provide an API to find the best metadata path to the conformance and decide whether it's expensive enough to be worth caching.
The code emission here assumes that we don't need to have active cleanups for all the result values we're not actively transforming.
The last three are handled automatically by generic attribute validation -- for the first one, we have to check FuncDecls ourselves.
The normal case for DV initializers is that each one falls through to the next, with the block jumping back to the main entry point.
The only reasonable semantics for this would be to inherit the setter but override the getter, and that would be surprising at best.
The optional object type is the same, so we assume the optional types are layout identical, allowing the use of unchecked bit casts.
The simplify() implementations may allocate scratch blocks and modify instruction streams, so we cannot use standard iterators here.
This is / simply the information that would be passed to a generic function / that takes the (thick) parent metatype as an argument.
This is a mapping from VarDecls to the if/while/guard statement that they / occur in, when they are in a pattern in a StmtCondition.
This is sufficient for our purposes because at a use, the width will always be a single-bit constraint or Any (i.e., no constraint).
This macro really ought to take a parameter, but we do it the disgusting crufty way forced on us by the ()-less definition of BEGIN.
This structure is linked to a block of instructions (usually starting at a label), and tracks the current stack depth in this block.
Try to authenticate with the newly set credentials, and fake return values to be backwards compatible with previous driver versions.
We disable then enable the breakpoints before/after the evaluation in order to prevent a breakpoint from being hit within this check
We don't need to retype the DefLabel in the actual loop header, because it must already contain the types for these incoming values.
We effectively inline most of CompilerInstance::ExecuteAction here, because we need to leave the AST open for future module loading.
We have to do this mapping before we might call getType on one of those archetypes, but after we've read all the generic parameters.
We mark nothrow with a nullptr, which will assert during unwinding, use a separate marker here to indicate the catch has been erased
We update the parameter list to remove the parameter for the / closure argument and to append the variables captured in the closure.
We will hit this case for top-level elements that do not themselves introduce DeclContexts, such as extensions and global variables.
We won't need to create more DefInlineFP's after this, and if they're completely unused in any of these traces DCE will clean it up.
We're building a setter or something around an underlying / implementation, which might be storage or inherited from a / superclass.
We've handled the self and _cmd arguments, so when we deal with generating explosions for the remaining arguments we can skip these.
because now A and D go on the maybe-hoistable list B goes on the never hoistable list, and we fatal trying to instantiate D before B
eek -- this is just a clean-up notification because the connection's been closed, but we already dealt with it in onConnectionClosed
fd_set can only hold sockets from 0 to 1023, anything higher is ignored by FD_SET() avoid "unexplained" behavior by failing outright
set a lower artificial limit on this in the interest of security and resource friendliness 255 arguments should be more than enough.
use the number of properties remaining as an estimate for the total number of dynamic properties when we see the first dynamic prop.
we don't add property names and class names (or Class*) in Prop assuming that is static data not owned or accounted by the APCObject
(Scalar, Scalar): If we have two scalar pointers, since we know that the types are already not equal, we know that they cannot alias.
- Check that each block handling a given case tag of a switch_enum only produces an integer value and does not have any side-effects.
/ / (2) A local variable, which may be copied from a by-val argument, / initialized directly, or copied from a function return value.
/ / It uses an optimistic iterative data flow to compute where to insert the / retains and releases for every reference-counted root.
/ Reducing the search space increases the chances of matching ref count / instructions to one another and the chance of sinking them.
A class for building ObjC class data (in Objective-C terms, class_ro_t), / category data (category_t), or protocol data (protocol_t).
And rather than giving each Class its own persistent handle that always points to an immutable 'true', share one between all of them.
As a special case, an ErrorProtocol existential can be represented as a reference to an already existing NSError or CFError instance.
Cast a function that takes all pointer arguments and returns to a / function type that takes different pointer arguments and returns.
Checks if the block contains a cond_fail as first side-effect instruction / and tries to move it to the predecessors (if beneficial).
Convert the byte order of the data we are looking at While we're here, let's apply the mask operation (unless you have a better idea)
Copy the given (default) value into a freeable string, so that assignments to the setting will consistently free the previous string.
Creates a new CmdBreak instance, sets its breakpoints to the client's list, sends the command to the server and waits for a response.
Defer the initialization of light processes until the log file handle is created, so that light processes can log to the right place.
Eberhard Mattes remarks Tue, 6 Apr 93: Moreover, it reports the type of the (new and very bug ridden) Win Emacs as "OS/2 executable".
FIXME: Overriding the default to context "None" is a hack so that they won't overwhelm other results that also match the filter text.
FIXME: Parser diagnostics should be filtered out of the semantic ones, Then just merge the semantic ones with the current parse ones.
FIXME: This hack is required because the inclusion check below doesn't compares the *start* of the ranges, not the end of the ranges.
For constructors, we make sure that the body ends with a "return" stmt, which we either implicitly synthesize, or the user can write.
For error recovery purposes, keep track of the disposition of the last pattern binding we saw ('let' vs 'var') in multiple PBD cases.
For instructions with vector immediates, we have to scan the contents of the vector immediate to determine how many values are popped
For the same reason, we need s_impl to be destructed after all other statically created objects may reference it in their destructor.
Form the function type by building the curried function type from the back to the front, "prepending" each of the parameter patterns.
HACK: Deal with imports of submodules by importing the top-level module as well, unless it's the top-level module we're currently in.
Helper function to produce a SILValue from a result value / produced by a basic block responsible for handling a / specific enum tag.
However the transformation we want to make extends the setcc flags lifetime, and we don't want it to overlap another flag's lifetime.
However, so long as we see already-resolved types that refer to protocols, skip over them to keep looking for a misplaced superclass.
If an expression other than "and", "or", or "not" is encountered, this method calls EmitterVisitor::visit() to handle the expression.
If for whatever reason, m_thread isn't debugging anymore (for example, it runs in Sticky mode, but it finishes running), kick it out.
If instance type is type alias, showing users that the constructed type is the typealias instead of the underlying type of the alias.
If the bridged value type is generic, the generic arguments must match the  FIXME: This should be an associated type of the protocol.
If the connection is closed before the cursor is destroyed, the cursor might try to fetch more results with disasterous consequences.
If the destructor has an objc_method calling convention, we cannot analyze it since it could be swapped out from under us at runtime.
If the region wasn't complete, don't cache the result, unless we already know it will be too expensive, or we've stopped profiling it
If there is an existing AST and the offset can be mapped back to the document snapshot that was used to create it, then use that AST.
If this check is reachable via success, failure and unknown at the same time, then we don't know the outcome of the dominating check.
If this is a derived class init method, track an extra element to determine whether super.init has been called at each program point.
If this is false, then we / do not need to generate the genset or killset, i.e. we can simply do 1 / pessimistic data flow iteration.
If this is the top level of 'self' in an init method, we treat each element of the struct as an element to be analyzed independently.
If this was an exact match, downgrade it to inaccessible, so that accessible decls that are also an exact match will take precedence.
If we can statically determine that the operation overflows, warn about it if warnings are not disabled by ResultsInError being null.
If we have a single Swift-refcounted context value, we can adopt it directly as our closure context without creating a box and thunk.
If we have multiple guard statements in the same block then we may have multiple refinement contexts to pop after walking that block.
If we have only one nonSubstitutableArg so far, then this different type might be the one that we should be substituting for instead.
If we see one at top level, diagnose that it must be part of an assignment so we don't get a generic "expression is ambiguous" error.
If we used TheAccessSemantics::Ordinary here, the only downside would be unnecessary vtable dispatching for class materializeForSets.
If we're applying more arguments than the natural argument count, then this is a call to the opaque value returned from the function.
If we're coming from unreachable code and the dst is already initialized, it doesn't change the dst (whether it is reachable or not).
Interesting types either contain interesting types, pointers to "pointer followable" types, or have some custom action defined on it.
It does mean we will be loading and storing garbage m_data for Null values but that's fine since m_data is undefined for Null values.
It is the summarized numbers of all nodes referring to the / function minus the size of the original function (which is not inlined).
Mark as covered all incoming arcs from already covered nodes into the entry of the region or one of its retranslations/merged blocks.
N1518: Recommendations for extended identifier characters for C and C++ Proposed Annex X.2: Ranges of characters disallowed initially
NB: unlike most other commands, the client expects that more interrupts can occur while we're doing the server-side work for a print.
NB: unlike most other commands, the client expects that more interrupts can occur while we're doing the server-side work for an eval.
Note that since this function is supposed to return all _declared_ variables in scope, which includes variables that have been unset.
Note: this is currently separate from typeFromRAT for now, just because we don't want to enable every single type for assertions yet.
Once we have found the target node, look for the innermost ancestor / matching our criteria on the way back up the spine of the tree.
Only grab a new stack trace if we don't have one cached, or if the one cached does not match the type of stack trace being requested.
Otherwise we conservatively treat all these cases as "possibly" being inside of an object property with "PostProp" with locType TTop.
Otherwise, the caller should call Tcl_UtfCharComplete() before calling this routine to ensure that enough bytes remain in the string.
Parsing the debug information can take quite a bit of time right now, so only actually do it if someone has explicitly opted into it.
Produce the caller-side default argument for this default argument, or / null if the default argument will be provided by the callee.
Return whether an IRInstruction may decref one of its sources, if its next edge is traversed, but not if its taken edge is traversed.
Right now these operations only need to do work for array shapes, so the default case (zero-arg call) is applied to most other types.
Right now we always guard that it is at least uncounted (this means a constant set to STDIN or something will always side exit here).
Similar to FPushFunc/FPushObjMethod, we have an incomplete ActRec on the stack and must handle that properly if we throw or re-enter.
Since most accesses to magic property getters aren't going to recurse, we optimize for the case where only a single getter is active.
Some day we will do some high level analysis of uninitialized variables (rdar://15157729) but until then, output a specialized error.
Some remaining known issues that aren't supported here (or in conjunction with as.cpp):  - .line/.srcpos directives  - Static locals.
Static properties don't need to exclude closures for this, though---we use instance properties for the closure 86static_* properties.
TODO: We can use all values greater than the largest discriminator as extra inhabitants, not just those made available by spare bits.
The StartBlock is inside a loop but we couldn't find a deallocation place in this loop, e.g. because there are uses outside the loop.
The calendar was created in 46 B.C., but the details did not stabilize until at least 8 A.D., and perhaps as late at the 4th century.
The following functions make DArr* structs out of static arrays, to simplify implementing some of the type system operations on them.
The loop terminates when a command is executed that causes the machine to resume execution, or which should cause the client to exit.
The only time the base is allowed to be inout is if we are accessing a computed property or if the base is a protocol or existential.
The value was produced at +1, so to produce an unbalanced release we need to leave the cleanup intact and then do a *second* release.
These functions try to take their first parameter by reference but they also allow expressions that cannot be taken by reference (ex.
These routines work with a list of "boxes", each representing a rectangular subset of the input color space (to histogram precision).
This file defines the SILWitnessTable class, which is used to map a protocol conformance for a type to its implementing SILFunctions.
This instruction primarily exists to assist in optimizing away unused activation records, so it's usually not going to happen anyway.
This is a consequence of the fact that a DoCatchStmt with a non-throwing body will type check even in a non-throwing lexical context.
This is a terrible hack to get around the fact that typeCheckExpression() might change subExpr to point to a new OpenExistentialExpr.
This routine is based in part on the Chapter 13 demo code in "PNG: The Definitive Guide" (http://www.cdrom.com/pub/png/pngbook.html).
This struct carries some context information needed for the invocation, as well as a place for the return value of invoking the file.
To get the same result as in PHP we thus need to replicate the PHP algorithm more closely than in the other versions of array_unique.
Type substitution preserves structural type structure, and the type-of-reference is only different in the outermost structural types.
Unlink this instruction from its current basic block and insert it into / the basic block that Earlier lives in, right after Earlier.
We can strip the load that might even occur in the loop because we make sure that no unsafe store to the array's address takes place.
We don't use the iterator when the delegate is a generator though, so even if the param tells us to free it we should just ignore it.
We have just completed an Await, so the new AsyncFunctionWaitHandle is now available, and it can predict where execution will resume.
We normally reject unbound types in IR-generation, but there are several occasions in which we'd like to mangle them in the abstract.
We'll queue up all the function transforms that we see in a row and then run the entire group of transforms on each function in turn.
When the source is cancelled, libdispatch will make sure all pending event handlers have finished before invoking the cancel handler.
When we are lexing a subrange from the middle of a file buffer, we will run past the end of the range, but will stay within the file.
When we see an expression in a TopLevelCodeDecl in the REPL, process it, / adding the proper decls back to the top level of the file.
When we upgrade boost, we can remove this and also get rid of the parent try statement and move opts back into the original try block
Write an instruction that looks exactly like a conversion: all / important information is encoded in the operand and the result type.
cvtsi2sd doesn't modify the high bits of its target, which can cause false dependencies to prevent register renaming from kicking in.
hphplex_init_extra has the same functionality as hphplex_init, but follows the convention of taking the scanner as the last argument.
normalizeDir may be called before very early one, such as in Runtime option parsing, when MemoryManager may not have been initialized
parseGenericWhereClause - Parse a 'where' clause, which places additional / constraints on generic parameters or types based on them.
sort so we can use upper_bound to find the right prefix, rather than using a linear scan (and so we can remove duplicates, etc below)
super_method always looks at the metatype for the class, not at any of its stored properties, so it doesn't have any DI requirements.
void Sort(int sort_flags, bool ascending)  Sort an array, by values, and then assign new keys to the elements in the resulting array.
without calling res_init(), any call to getaddrinfo() may leak memory: http://sources.redhat.com/ml/libc-hacker/2004-02/msg00049.html
(NB: these instructions will likely require a DefInlineFP in their catch blocks to ensure that the callee is visited by the unwinder).
- If this check succeeds, then it jumps to the code which performs a direct call of a method implementation specific to this subclass.
A large portion of the debug information lies within subprogram definitions, and scanning all of that consumes a large amount of time.
A store to an alloc_stack can't possibly store to the array size which is stored in a runtime allocated object sub field of an alloca.
According to the book "Jewish Calendar Mystery Dispelled" by George Zinberg, the patriarch Hillel II published these rules in 358 A.D.
Before type checking, chains of binary expressions will not be fully parsed, so associativity has not yet been encoded in the subtree.
But they make a real mess on VT100-style displays if they're not paired properly, so we are probably better off not calling them text.
Clang-generated accessors are "uncurried" here and not in the below loop because ClangType AbstractionPatterns don't support currying.
Create a basic block to jump to for the implicit destruction behavior of releasing the elements and calling the superclass destructor.
Currently we don't attempt any of this for FPushClsMethod because lookupImmutableMethod is only for situations that don't involve LSB.
Don't implicitly turn non-optional results to optional if we're going to apply a foreign error convention that checks for nil results.
Eliminating the reference copies, avoids artificially bumping the refcount which could save a copy of all elements in a COW container.
Emit a diagnostic for references to declarations that have been / marked as unavailable, either through "unavailable" or "obsoleted:".
Emit either an 'apply' or a 'try_apply', with the error branch of / the 'try_apply' simply branching out of all cleanups and throwing.
Even though, LSLocations are canonicalized, we still need to consult alias analysis to determine whether 2 LSLocations are disjointed.
Finds the enclosing CallExpr, and indicates whether it should be further / considered a candidate for application of trailing closure.
For compatibility with php, throwing through a constant lookup has different behavior inside a property initializer (86pinit/86sinit).
For example, assuming that a child expression is literally a TupleExpr may only be a reasonable assumption in an unchecked parse tree.
For now this only supports alloc_ref of classes so any alloc_ref with a reference type that is not a class this will return false for.
Furthermore, if the subexpr type is already known to be an array type, then we must have an attempt at an array to pointer conversion.
Given a type and a declaration context, return a type with a curried 'self' type as input if the declaration context describes a type.
However if the request just finished is not the current oldest we don't need to check anything as there cannot be any WorkItem to run.
If all other registers are used by their owning intervals before the first register-use of `current', then we have to spill `current'.
If any of these makes a change we'll end up restarting the function passes on the current function (after optimizing any new callees).
If either is an interface, we'd need to explore all implementing classes in the program to know if they have a non-empty intersection.
If the producer knows that the cell is not the last reference (e.g. if it is a Dup), then Use:UsedIfLastRef is equivalent to Use::Not.
If the server checked the validity of the breakpoints, the values of the m_bindState flags are copied to the client's breakpoint list.
If the underlying declaration is an Objective-C type parameter, pull the corresponding generic type parameter from the imported class.
If this argument is promoted, it is a box that we're turning into an address because we've proven we can keep this value on the stack.
If this is a 'let' initialization for a non-global, set up a let binding, which stores the initialization value into VarLocs directly.
If this is a builtin which might have side effect, but its side effects do not cause reference counts to be decremented, return false.
If this is the top level of a function input list, peel off the ImmediateFunctionInput marker and install a FunctionInput one instead.
If this type declaration was not parsed from source code or introduced via the Clang importer, don't add any synthesized conformances.
If we fail to get the socket, we just return up to higher-level code (the HttpServer class will then try to kill the existing server).
If we have a transparent color (the alphaless mode of transparency), we must reserve a palette entry for it at the end of the palette.
If we have reached this point, we found no spec for our target, so we return the other spec ('*'), if we found it, or nullptr, if not.
If we see a property reference with an implicit base from within a closure, then reject it as requiring an explicit "self." qualifier.
If we're an InnerHandle, someone already checked that, but we want to check for whether it's uncounted to use a better representation.
If we're type checking this pattern in a context that can provide type information, then the lack of type information is not an error.
If you hit this assertion, you're gen'ing an IR instruction that can throw after gen'ing one that could write to the evaluation stack.
Implementation strategy for C-compatible enums, where none of the cases / have data but they all have fixed integer associated values.
In a protocol context, variables written as "var x : Int" are errors and recovered by building a computed property with just a getter.
In fact, "function" on its own isn't an actual type in C or C++, but its easier for everything else to have them be separate concepts.
In principle, we could use the interval configuration of the timer to count down one second at a time, but that doesn't seem worth it.
In psuedomains we have to pre-constrain local guards, because we don't ever actually generate code that will constrain them otherwise.
In the worst case, we'll produce lots of duplicate solutions for this constraint system, which is problematic for overload resolution.
Insert a load of the liveness bitmask and split the CFG into a diamond right before the destroy_addr, if we haven't already loaded it.
It is only necessary because of the poor representation of clang enum aliases and should be removed when rdar://20879992 is addressed.
It's also necessary because we might run destructors as part of parameter coersions, which we don't want to clobber our spilled stack.
Its now too late to run the requestShutdown functions, but if we carry on, requestInit and requestShutdown will never be called again.
LLVM can replace relative references to this variable with / relative references to the GOT entry for the variable in the object file.
Marshal the data we actually care about into fields on this object, then remarshal them into smart_ptr structures during unserialize()
Note that this equivalence relation does /not/ capture the idea that we probably want the same register for x4 as we do for x6 and x7.
Note that, / unlike fetching the type info and asking it for the storage type, / this operation will succeed for forward-declarations.
Note that, unlike / fetching the type info and asking it for the storage type, this / operation will succeed for forward-declarations.
Note: it's ok not to zero new allocations, because we've never done anything with this part of the page yet, so it must still be zero.
Perform another check, this time in reverse and use future overflow checks that must be executed to eliminate earlier overflow checks.
Recursively visit callee's BB in depth-first preorder, starting with the entry block, cloning all instructions other than terminators.
Reserve space for the expression length and mark the beginning of the expression, so that the size can be patched on end_expression().
The connection is blacklisted, but we've reached our ping interval so lets remove the blacklisting and pretend we didn't know about it
The event hook has already cleaned up the stack and popped the callee's frame, so we're ready to continue from the original call site.
The implementations below produce reasonably good machine code that is comparable to the machine code for strcasecmp from glibc 4.4.0.
The intersection finding technique of this code could be improved by remembering the previous intertersection, and by using the slope.
The main point of the merging algorithm is to map each content node in the source graph to a content node in this (destination) graph.
Then updates this command with the source information and sends it to the server in order to retrieve the source text from the server.
There's a corresponding hack in MultiPayloadEnumImplStrategy::completeEnumTypeLayout to ignore spare bits of dependent-typed payloads.
This allows "self reassignment" to happen in super init method chains, which is important for interoperating with Objective-C classes.
This code doesn't try to prove tricky validity constraints about whether it is safe to push the release past interesting instructions.
This exact bit can't be set anymore (because the caller of this function cleared it via a call to drop_support_bit, if we had a meta).
This implies that lookupClsMethod, given the same class and the same method name, will never return MagicCall*Found or MethodNotFound.
This is true if definite initialization has finished processing assign / and other ambiguous instructions into init vs assign classes.
Using sbrk to ensure its in the bottom 2G, so we avoid the need for trampolines, and get to use shorter instructions for tc addresses.
Validate the contextual type conforms to DictionaryLiteralConvertible and figure out what the contextual Key/Value types are in place.
Variables must have materializable type, unless they are parameters, in which case they must either have l-value type or be anonymous.
We break regions at resumed Await/FCallAwait instructions, to avoid duplicating the translation of the resumed SrcKey after the Await.
We don't need to worry about any of the passed parameter locals, because the caller must have checked for that in its maxStackCells().
We only need to check the class constraint for metatype casts where no protocol conformance indirectly requires the constraint for us.
When a new instance of HPHP has taken over our page server socket, stop our admin server and satellites so it can acquire those ports.
When we destroy the execution context will call destructors on any objects in the userErrorHandlers and userExceptionHandlers vectors.
but also don't have the underlying type computed, then we are recursing into interface validation while checking the body of the type.
isSuperInitUse - If this "upcast" is part of a call to super.init, return / the Apply instruction for the call, otherwise return null.
optimizePhis() performs limited tail duplication in a few specific situations where the resulting code is strictly better than before.
this hash is much faster than initializing and most codebases likely only have a few constant sets with more than a thousand patterns.
we have multiple epilogue releases for this argument, check whether it has covered all fields with reference semantic in the argument.
'Fix' a tuple or tuple element structure kind to be a function parameter / or function type if we are currently inside a function type.
(Local 0 will be the closure itself, and other locals will have used vars unpacked into them.)  We rely on hhbbc to assert these types.
(Some of them currently regress performance, presumably because the IR doesn't always handle the additional type information very well.
- Each fault funclet is a contiguous region of bytecode that does not jump into other fault funclets or into the primary function body.
- If all preds provide an equivalent value, insert a copy of the instruction defining that value after the DefLabel, replacing the phi.
/ / If there are more call sites than the natural uncurry level, they are / have to be applied recursively to each intermediate callee.
/ / The current heuristic hoists all initialization points within a function to / a single dominating call in the outer loop preheader.
A protocol has an implicit generic parameter list consisting of a single generic parameter, Self, that conforms to the protocol itself.
A type info implementation for class existential types, that is, / an existential type known to conform to one or more class protocols.
Actually we compute the coordinates of the center of the corner histogram cell, which are the lower bounds of the volume we care about.
All errors thrown by the do body are caught, but any errors thrown by the catch bodies are bounded by the throwing kind of the do body.
An ASTPrinter for annotating declarations with XML tags that describe the / key substructure of the declaration for CursorInfo/DocInfo.
At this point, all IR invariants must hold, because we've restored the only one allowed to be violated before fullDCE in prepareBlocks.
Build out an environment that conceptually matches what we'd see if we were to iterate the environment and call getenv() for each name.
Closures inside of classes are analyzed in the context they are created in (this affects accessibility rules, access to privates, etc).
Codegen may fail and cause us to clear the partially-populated fixups, so we wait until after that to manually add the alignment fixup.
Coming out of SILGen, we assume that raw stores are initializations, unless they have trivial type (which we classify as InitOrAssign).
Determine whether the 'Self' type from the first protocol extension satisfies all of the requirements of the second protocol extension.
Determine whether the given word occurring after the given / preposition results in a conflict that suppresses preposition / splitting.
Emit a release_value instruction at the current location, attempting to / fold it locally into another nearby retain_value instruction.
FIXME: There exists a small window where the module file may have been modified after compilation finished and before we get its stamp.
FIXME: callWitness() may end up re-doing some work we already did to convert the dictionary literal elements to the (key, value) tuple.
FIXME: swiftcall / func printTypeMetadataMemberOffset(forType: Any.Type, /                                    memberName: StaticString)
For a non-generic method that returns dynamic Self, we need to provide an interface type where the 'self' argument is the nominal type.
For each type variable bound in all of the previous solutions, check whether we have a binding for this type variable in this solution.
For optimize, we don't need to bother doing anything to these---another pass is responsible for removing completely unreachable blocks.
Given a lowered SIL type, apply a substitution to it to produce another / lowered SIL type which uses the same abstraction conventions.
However, since templates can be parameters to other templates, this process must be repeated until the linkage of no types are changed.
If DefInlineFP is not pushed these cells were marked as both stored and killed by BeginInlining so now actual stores should be aliased.
If a contextual function type exists, we can use that to obtain the expected return type, rather than allocating a fresh type variable.
If any of them are removed, however, they must all be removed, because of the need to keep eval stack consumers and producers balanced.
If the Swift property name starts with the word "is", strip the "is" and lowercase the rest when forming the Objective-C property name.
If the static types are invalid, simply avoid promotion, that way the runtime will then report a failure if this cast is ever executed.
If the use is a DSI, add it to our memory analysis so that if we can chop up allocas, we also chop up the relevant dealloc stack insts.
If there are any transparent functions that are deserialized from another module that are now unused, just remove them from the module.
If they have the same specialized tag, then since isect is equal to m_bits, the stagBits must be part of the intersection or be BEmpty.
If we are casting a protocol, then the cast will fail as we have not found any conformances and protocols cannot be extended currently.
If we are constructing a tuple with initializer syntax, the expected argument list is the tuple type itself - and there is no initdecl.
If we have a good directory to extract to above, we now check whether the "file" parameter passed in is a directory or actually a file.
If we have exactly one argument mismatching, classify it specially, so that close matches are prioritized against obviously wrong ones.
If we have predecessors, where it is not known if they are reached over success or failure path, we cannot eliminate a checked_cast_br.
If we need to complete an override, collect the keywords already specified so that we do not duplicate them in code completion strings.
In this branch, the eventual return value is mostly created by bridging the native return value, but we may need to adjust it slightly.
In this case, the overridden vtable entry will point to a thunk which transforms parameters and results and invokes the derived method.
Instead we collect uses wrapping uses in branches specially so that we can reconstruct the use even after the branch has been modified.
It is generally ok to resolve a method that won't actually be called as long, as we only do so in cases where it will fatal at runtime.
It's possible that we could drive pushes from somewhere other than the VM thread, in which case we'll need a different saftey mechanism
Like find_range, but copy them into a temporary buffer instead of returning iterators, so you can still mutate the underlying multimap.
Look through the overload locators that have overload choices in all of the solutions, and add those that have differences to the diff.
NB: this also checks whether we should be stopping at special interrupt sites, like SessionStarted, RequestEnded, ExceptionThrown, etc.
Note that an ObjC class subclassing from a Swift class, may still be able to override its non-computed-property-accessors via a method.
Note that it's still possible for the race condition to happen if we are creating and starting threads statically before main() starts.
Note that we intentionally don't support forwarding of weak pointers, because the underlying value may drop be deallocated at any time.
Note: currently this is visiting inner loops first, but not for any strong reason for the types of optimizations it currently performs.
Now add the files that haven't changed, so that they'll get built in parallel if possible and after the first set of files if it's not.
On Win32 locked files that are closed without being explicitly unlocked will be unlocked only when "system resources become available".
Only recurse if this node differs from the equivalent one in children, in order to keep recursion from being of exponential complexity.
Pre:  direct_successor(pred, middle) direct_successor(middle, last)  Post: direct_successor(pred, last) and middle is unlinked entirely
Prepare the actual arguments to the CallBuiltin instruction, by converting a ParamPrep into a vector of SSATmps to pass to CallBuiltin.
Recursively visit original BBs in depth-first preorder, starting with the entry block, cloning all instructions other than terminators.
Returns nullptr if there is no type param list to import or we suppress its import, as in the case of NSArray, NSSet, and NSDictionary.
Right now we compute the conflict sets for object properties based only on object property offsets, and for arrays based only on index.
Since libmemcachd is in C, we cannot use lambda functions as lambda functions are special typed and normally passed by templated types.
Since the innermost GenericParamList is in the beginning of the vector, we process in reverse order to handle the outermost list first.
So we overload the meaning of tl_doneAutoTypecheck to make sure that we don't enable auto-typechecking until systemlib is fully merged.
Some properties may need to be marked with the AttrDeepInit attribute, while other properties should not be marked with this attrbiute.
Some vasm opcodes don't have equivalent single instructions on ARM, and the equivalent instruction sequences require scratch registers.
TODO: More interesting dominance analysis could be done here to see if the alloc_stack is dominated by copy_addrs into it on all paths.
TODO: There are cases we could statically warn about, such as casting from a non-class to a class-constrained archetype or existential.
The actions inherent to the type are used when automatically generating a scanner for that type, while the actions here override those.
The associated type metadata is passed first so that this function is CC-compatible with a conformance's witness table access function.
The computations that follow attempt to 'best guess' the indentation and new lines so that the user doesn't have to add any whitespace.
The global will exist only if the abstract type has concrete layout, so if we're not laying out the abstract type, use its access rule.
The local DCE algorithm addresses dead eval stack manipulations and dead stores to locals that are visible within a single basic block.
The reason for this is that if a type is constrained, we need to be able to find "all" possible sources of the type and constrain them.
The resumeAsyncFunc() entry point in ExecutionContext doesn't care what we put here, but also won't try to decref it, so we use a null.
The state of memory support for each must-alias-set is a bitvector of the memory locations AliasAnalysis has identified in the program.
The terminator has an invalid source location to signal to the DataflowDiagnostic pass that this code does not correspond to user code.
These are instructions that cannot observe the reference count and so we can sink IncRefs across them regardless of their lower bounds.
These static strings are the same as the ones in hphp/compiler/type_annotation.cpp, where the typeAnnotArrays are originally generated.
This comprises / the protocol descriptor, and for ObjC interop, references to the descriptor / that the ObjC runtime uses for uniquing.
This gets it's own thread, and polls the client once per second to see if there is a signal, i.e., if the user has pressed Ctrl-C, etc.
This happens because yy_g_n_b() sees that we've accumulated a token and flags that we need to try matching the token before proceeding.
This makes some inner loops simpler and sometimes saves work during multiplications, but it often seems to make things slightly slower.
This part is basically the same as File::TranslatePath(), except relative_to is optionally a parameter instead of coming from g_context
This portion of DCE cannot be turned off, because it restores IR invariants, and callers of fullDCE are allowed to rely on it for that.
To handle top-level code properly, we look through the TopLevelCode decl on the use (if present) since the vardecl may be one level up.
Use an iterative data flow to compute whether there is an available value at a given point, we do not yet care about what the value is.
Using this module, you can emit pretty much any sort of not trivially-illegal bytecode stream, and many trivially-illegal ones as well.
Value-type elements (anything other than objects and resources) of an immutable collection "inherit" the collection's immutable status.
We are allowed to assume the type annotation on the property is accurate, although nothing is currently checking that this is the case.
We couldn't find an appropriate spec for the current platform, so rather than refining, emit a diagnostic and just use the current TRC.
We don't want a new execution context to cause any request-heap allocations (because it will cause us to hold a slab, even while idle).
We only change the condition to be NewEITI instead of all uses since EITI may have other uses besides this one that need to be updated.
We provide macros for accessing buffer states in case in the future we want to put the buffer states in a more general "scanner state".
We recursively walk down the LHS, building up index chains and copying them into the top-level list as we reach the leaves of the tree.
We should probably unify this checking for deployment-version API unavailability with checking for explicitly annotated unavailability.
We sometimes call this while curFunc() isn't really the builtin, so make sure to record the sync point as if we are inside the builtin.
We use a quick pcre_fullinfo() check to see whether cache is corrupted, and if it is, we flush it and compile the pattern from scratch.
WebPEncode: Takes a Y, U, V data buffers (with color components U and V subsampled to 1/2 resolution) and generates the WebP string  4.
When ICU clones the UText, it does not copy the buffer, so we have to keep the string buffer around by holding a reference to its zval.
When both types are strict subtypes of TObj or TOptObj or both are strict subtypes of TCls we look for a common ancestor if one exists.
When throwing from a constructor, we normally want to avoid running the destructor on an object that hasn't been fully constructed yet.
When using a subgenerator we don't actually read the values of the m_key and m_value of our frame generator (the delegating generator).
When we choose to "support" invalid salts, nevertheless disallow those containing characters that would violate the passwd file format.
When we're type checking a single-expression closure, we need to reset the DeclContext to this closure for the recursive type checking.
Zend would check here if this is a write operation, but HHVM always handles that with offsetSet so we just want to return nullptr here.
compress stdin to stdout  Algorithm:  use open addressing double hashing (no chaining) on the prefix code / next character combination.
libdwarf uses a very low-level janky C-style interface, so provide a simple wrapper class to make some of the common operations easier.
ssize_t IterLast(const ArrayData*)  Returns the position of the last element, or the canonical invalid position if this array is empty.
we need to combine the current collection name with the parameter passed in, get the parent db, then select the new collection from it.
(Merge-only-ness provides no measurable perf win in repo mode now that we have persistent classes, so we're not too worried about this.)
(This also covers other properties with that same name.) FIXME: We should still mirror the setter as a method if it's not already there.
-- Must/May Alias Sets -- The passes in this file operate on groups of SSATmp's called "must-alias-set"s (or often "asets" in the code).
/ / Coming into this function, we assume that the code is in canonical form: / none of these calls have any uses of their return values.
:) TODO: At some point, we should special case closures that just *read* from the escaped value (by looking at the body of the closure).
A member of a "phi group"---i.e., the set of all variables which flow into one another via a set of corresponding phijmp's and phidef's.
Add to sets coveredNodes and coveredArcs the cfg arcs that are now covered given the new region containing the translations in `region'.
Allow null property types to match non-null ones, which only happens when one property is from a generic extension and the other is not.
Another extension of the / same class in the same module gets a category name with a number appended, / e.g., NSObject (MySwiftModule1).
Both the code that is used to set up a closure object and the (beginning of) the closure itself has the AbstractClosureExpr as location.
But if the -s option has been given, we skip this optimization, since on some systems, stat() reports zero size for raw disk partitions.
But within one JIT region, right now we declare it illegal to generate IR that uses an object after a DecRef that might take it to zero.
Clone the referenced function of each partial_apply, removing the operands that we will not need, and remove the existing partial_apply.
Collect the applies for this block in reverse order so that we can pop them off the end of our vector and process them in forward order.
Create: (assign (decl_ref_expr(VD)), decl_ref_expr(value)) or: (assign (member_ref_expr(decl_ref_expr(self), VD)), decl_ref_expr(value))
Determine whether the given word occurring before the given / preposition results in a conflict that suppresses preposition / splitting.
Due to complications associated with ArrayAccess, it is possible to acquire a reference as a side effect of vector operation processing.
Either release the callee (which the apply would have done) or remove a retain that happens to be the immediately preceding instruction.
First if one instruction is a gep and the other is not, canonicalize our inputs so that V1 always is the instruction containing the GEP.
For non-closure classes, a property of type KindOfUninit means that it has non-scalar initializer which will be set by a 86pinit method.
Function: gdTransformAffineCopy Applies an affine transformation to a region and copy the result in a destination to the given position.
Give each parameter in a ClosureExpr a fresh type variable if parameter types were not specified, and return the eventual function type.
If a SR is used then certain optimizations will not fire since they do not set the condition codes as the original instruction(s) would.
If a bit is set, that means there is / potentially an upward visible store to the location at the particular / point of the basic block.
If a use is visited that potentially causes defInst's address to escape, then return false without fully populating the data structures.
If it is an interpreter, don't use try to use any advanced calling conventions and use instead a more conservative C calling convention.
If so, and if this conversion constraint is different than the types being cast, produce a note that talks about the overall expression.
If the constraint system has a contextual type, then we can test to see if this is the problem that prevents us from solving the system.
If the context wants a +0 value, guaranteed or immediate, we can give it to them, because OpenExistential emission guarantees the value.
If the parent lexer should stop prematurely, and the ArtificialEOF position is in this subrange, then we should stop at that point, too.
If the pixel is transparent, we assign it the palette index that will later be added at the end of the palette as the transparent index.
If the property is defined in a non-final class or a protocol, the accessors are dynamically dispatched, and we cannot do direct access.
If the tuple we are extracting from only has one non trivial element and we are not extracting from that element, this is an ARC escape.
If there was an error while automatically generating the layout for this underlying type, it is stored here until they are all reported.
If this is a derived class init method for which stored properties are separately initialized, track an element for the super.init call.
If this is a direct reference to underlying storage, then this is a capture of the storage address - not a capture of the getter/setter.
If this is a load from within an enum projection, we can't promote it since we don't track subelements in a type that could be changing.
If this is a valid identifier continuation, but not a valid identifier start, attempt to recover by eating more continuation characters.
If we didn't find a matching declaration, the iteration is restarted but we won't look anymore for the specific nominal type declaration
If we have a shadowed variable definition, check to see if we have a redefinition: two definitions in the same scope with the same name.
If we inline the thunk, we will get the benefit of calling the signature optimized function without additional setup on the caller side.
In general these instructions may make decisions based on whether this is the last reference to a tmp, so we have to observe at level 2.
In this case, we still have to consider the self type to "fulfill" the type parameters so they don't get emitted as separate parameters.
Many cases are handled by the inliner/devirtualizer, but certain special cases are not covered there, e.g. partial_apply(witness_method)
Not all git versions we use know --show-toplevel, if it was just echoed back (this version doesn't know it), fall back to another method
Note that escape analysis must work with the original pointers and not the underlying objects because it treats projections differently.
Note that the number of predecessors of both types (backedge or normal) on a Phi node in last or pred is conserved under this operation.
Note that we cannot use the BASE64 alphabet here, because it contains "/" and "+": both are unacceptable for simple inclusion into URLs.
Note: this doesn't take commutativity or associativity into account, but it might be nice to do so for the opcodes where it makes sense.
Note: this is not the case e.g. if the apply is in a then-branch of an if-then-else in the caller and the else-branch is the short path.
OSS builds read tzdata from the system location (eg /usr/share/zoneinfo) as this format must be stable, we're keeping timelib stable too
Once the guards have been evaluated, ignore will either be cleared (if any guards pass), or conservative will be cleared (if none pass).
Other parameter lists cannot be uniqued because the decls / within them are always different anyway (they have different DeclContext's).
Otherwise the new function could have an external linkage (in case the original function was de-serialized) and would not be code-gen'd.
Return a pointer to the SILFunction called by Call if we can / determine which function that is, and we have a body for that / function.
Returns .Some(I) if I is a release that is the only non-debug instruction / with side-effects in the use-def graph originating from Arg.
Sends an Info command to the server to retrieve source location information for the function or class specified by the command argument.
TODO: If we can prove that a given global variable is assigned only once, during initialization, then we can treat it as if it is a let.
TODO: We could also convert multiple indirect results by returning a tuple type and created tuple_extract instructions at the call site.
The WuManberReplacement class, related data structures and hash function are ported from php_strtr_array_* as implemented in PHP 5.6.10.
The loop associated with this header consists of all nodes reachable in the reverse CFG from its back-edges's sources before the header.
The normal case for production mode is that all builtins are persistent, and every systemlib unit is accordingly going to be merge only.
The only thing that can change the FP is inlining, but we can't have one of the predecessors in an inlined callee while the other isn't.
The reason is that if there is not a single predecessor then the code that is dominated by the block can be reachable from other blocks.
The remapping case could be accomplished with less memory for non- interlaced images, but interlacing causes some serious complications.
The summary currently includes all translations, so it's misleading if we're filtering a specific kind of translations or address range.
Therefore we need a thunk which converts from the re-abstracted function back to the original function with indirect parameters/results.
This caching system is somewhat /   more efficient than what IGF provides, but it's less general, and it /   should probably be removed.
This can return multiple results for var decls that bind to multiple / values, structs that define a struct decl and a constructor, etc.
This is a map from each partial apply to a single index which is a promotable box variable for the alloc_box currently being considered.
This is based on what is defined in hphp/runtime/ext_zend_compat/php-src/main/php_config-*.h And also what I know is present under MSVC.
This parameter is always present which is evident since we always grab a type to cast to, but sometimes after the polymorphic arguments.
This releases ownership from the unique_ptr, and passes the pointer, and ownership of it, to HybridData which is managed by the java GC.
To match hphpc, we silently ignore functions defined in user code that have the same name as a function defined in a separable extension
To use ArrayIdx, we require either constant non-int keys or known integer keys for Map, because integer-like strings behave differently.
Utility functions to make the template solveDataFlow compilable for a block list containing references _and_ a list containing pointers.
We also only /want/ to do it if the Check is guaranteed to be executed in the loop body (assuming another hoistable Check doesn't fail).
We can't simply use (0, object size) because we do not want to include base classes, nor padding which we know can't contain any fields.
We decrease NumCurrentImportingEntities only after pending actions are finished, to avoid recursively re-calling finishPendingActions().
We downcast back to RuleBasedBreakIterator because clone() always returns a icu::BreakIterator, which doesn't implement getRuleStatus().
We emit an empty asm string with the side-effect flag set, and with a unique integer argument for each cond_fail we see in the function.
We know that the incoming arguments from all predecessors are the same, so just use them directly and remove the basic block parameters.
When we have known args, we only need to add one of the entry points to the initial state, since we know how many arguments were passed.
localeconv(): A thread-local struct lconv is maintained and it is filled by making multiple calls to nl_langinfo() which is thread-safe.
noescape/autoclosure are valid as a decl attribute and type attribute (in parameter lists) but we disambiguate them as a decl attribute.
non unique types are funny because we cannot really make any conclusion about them so they resolve to "non precise" subtype relationship
validateUTF8CharacterAndAdvance - Given a pointer to the starting byte of a / UTF8 character, validate it and advance the lexer past it.
"::" is semi-arbitrary, though whatever we choose must delimit possible class and method names, so we might as well ape the source syntax
- the immediate goal is to capture the module API, but we would like to be able to extend this format to carry ABI information in future.
/ / LSValue consists of a base - a SILValue from the load or store inst, / as well as a projection path to which the field it represents.
/ / Note that we handle the general case of a destroy_addr of a piece of the / memory object, not just destroy_addrs of the entire thing.
/ / Projections of the struct over its elements are all similarly recorded in / ElementAddressUsers, ElementLoads, and ElementValueUsers.
/ / This pass is only enabled if SILOptions::SILOutputFileNameForDebugging is / set (i.e. if the -gsil command line option is specified).
A "conversion" of a DeclRef a C function pointer is done by referencing the thunk (or original C function) with the C calling convention.
Accessibility checks depend on the relationship between the class that first declared the method (baseClass) and the context class (ctx).
And since it can be determined whether the year is a leap year by simple division, the lengths of Adar I and II can be easily calculated.
And there are functions which are read-none and have a retain, e.g. functions which _convert_ a global_addr to a reference and retain it.
Check whether there is a superclass method for the getter that is *not* suppressed, in which case we will need to suppress this property.
Determine whether the parameter is of (possibly lvalue, possibly optional), non-autoclosure function type, which could receive a closure.
Each label source source has an Offset where the jmp should be patched up is, and an Offset from which the jump delta should be computed.
FIXME: Ask Clang to try to parse and evaluate the expansion as a constant expression instead of doing these special-case pattern matches.
For each new apply, attempt to link in function bodies if we do not already have them, then notify the pass manager of the new functions.
For storage, close the existential either when it's accessed (if it's an rvalue only) or when it is loaded or stored (if it's an lvalue).
Grab the first fully transparent entry, if any, as the value of the simple-transparency index, mostly for backwards binary compatibility.
If `block' only goes to `takenBlk' and `takenBlk' can only be reached directly from `block', merge them and leave `takenBlk' unreachable.
If an expression references 'self.init' or 'super.init' in an / initializer context, returns the implicit 'self' decl of the constructor.
If it's a same-ish comparison and the types don't match (taking into account Str and StaticStr), lower to a bool comparison of constants.
If the convertType is *only* provided for that hint, then null it out so that we don't later treat it as an actual conversion constraint.
If the global is fixed-size in all resilience domains that can see it, we allocated storage for it statically, and there's nothing to do.
If the struct we are extracting from only has one non trivial element and we are not extracting from that element, this is an ARC escape.
If there are factored edges, make a copy of the state (except stacks) in case we need to propagate across factored exits (if it's a PEI).
If this is a DotSyntaxCallExpr, then the callee is a method, and the argument list of this apply is the base being applied to the method.
If this is a store to a 'let' property in an initializer, then we only allow the assignment if the property was completely uninitialized.
If we are going to clone it for a previous checked_cast_br the argument will not dominate the blocks which it's used to dominate anymore.
If we are in SIL mode, and if the first token is the start of a sil declaration, parse that one SIL function and return to the top level.
If we do not have an RPO number for a predecessor, it is because the predecessor is unreachable and a pass did not clean up after itself.
If we found an ending curly quote (common since this thing started with an opening curly quote) diagnose it with a fixit and then return.
If we have any literal constraints, check whether there is already a binding that provides a type that conforms to that literal protocol.
If we're matching the base name of a method against the type of 'Self', and we haven't matched anything yet, skip over words in the name.
If we're omitting needless words and the name won't conflict with something in the standard library, strip the prefix off the Swift name.
In the case of HNI builtin classes, private properties are allowed to be mutated by native code, so we may not see all the modifications.
In which case, the member will be modeled as an inout but ExistentialMemberRef and ArchetypeMemberRef want to take the base as an rvalue.
Inspired by: Optimal control dependence and the Roman chariots problem TOPLAS, v19, issue 3, 1997 http://dx.doi.org/10.1145/256167.256217
IsSelfOfNonDelegatingInitializer - This is true if we're looking at the / top level of a 'self' variable in a non-delegating init method.
It includes referencing this specific property (both reads and stores), as well as implicit stores by means of e.g. a struct instruction.
Let's hope all strptime-s use ` ' to skipp *all* whitespace instead of just one (it works that way on all the systems I've tested it on).
MapViewOfFileEx() requires "the specified memory region is not already in use by the calling process" when mapping the shared area below.
Mark everything that is not visible from the source code (i.e., does not have a Swift name) as artificial, so the debugger can ignore it.
Notice that the block containing InlineReturn may have other instructions whose marker does not match fp as InlineReturn is non-terminal.
Now remove any edge that looks like it will unconditionally fail type predictions, and completely remove any block that can't be reached.
Only insert an indexed type into the unique vector if its not equal (for the purposes of merging) as the last indexed type in the vector.
Only object types (which are recorded as being pointer followable) pass, as do void pointers (though we cannot generate layout for them).
Options contain information about the developer's computer, so only serialize them if the module isn't going to be shipped to the public.
Pass the address of tvBuiltinReturn to the native function as the location it can construct the return Array, String, Object, or Variant.
Similarly, apc strings could be in the ServerNote array, and its possible they are scheduled to be destroyed after this request finishes.
Since the string is already parsed, Tok already points to the first token after the whole string, but PreviousLoc is not exactly correct.
Since this is may-information that makes analysis more conservative, the memory support bits should conceptually be or'd at merge points.
TODO Have loadSystemlib() or Native::registerBuiltinFunction track this for us so that we can support this here and in ReflectionExtesion
The destination of these instructions is somewhat counter intuitive so we take care to ensure that we step to the most appropriate place.
The generic fast/slowPath calls are frequently only inlined one level down to _branchHint before inlining the call sites that they guard.
The global DCE performs a liveness analysis and then uses this information to allow dead stores to locals to be eliminated across blocks.
The new non-critical edge though will be placed at the same spot in the new terminator where the critical edge was in the old terminator.
The returnType flag is only non-folly::none for these, but note that something may be a builtin and still have a folly::none return type.
The variables in this class are all JNI global references and are intentionally leaked because we assume this library cannot be unloaded.
This allows for use of popular specialized functions from the standard library, which makes the non-optimized builds execute much faster.
This can be called multiple times, and this function leaves the proxy usable by request threads which may still be handling an interrupt.
Thus, we maintain a mapping from internal token IDs to stable "user token IDs" and only expose the user token IDs to the PHP application.
To support this, inside inheritance clauses we allow references to protocols that are unavailable in the current type refinement context.
Typically this will be called by HPHP::Extension::moduleInit to load an extension-specific systemlib file, or to load the main systemlib.
We allocate these expressions on the stack because we know they can't escape and there isn't a better way to allocate scratch Expr nodes.
We also ensure that nativeDataWakeup is invoked regardless of whether or not serialized native data exists within the serialized content.
We divide the corresponding region block's profile counter by the following factors, depending on the code area the block is assigned to.
We jmp directly to the func body---this keeps the return stack buffer balanced between the call to this stub and the ret from the callee.
We need this to make sure that we insert a release in the appropriate locations to balance the +1 from the creation of the partial apply.
We shouldn't ever register disjunction choices multiple times, but saving and re-applying solutions can cause us to get multiple entries.
We'll pull a proxy out of the queue, ask it to cleanup which will wait for threads it owns to exit, then drop our shared reference to it.
When convenient, preferable to doing skipWhitespace/expect manually to keep the line number in the error prior to the whitespace skipped.
performGeneralOptimizations - This does a forward scan over basic blocks, / looking for interesting local optimizations that can be done.
ssize_t IterBegin(const ArrayData*)  Returns the position of the first element, or the canonical invalid position if this array is empty.
'T(x...)' is treated as a NominalTypePattern if 'T' references a type by name, or an EnumElementPattern if 'T' references an enum element.
(Note that the program still may modify these memory locations in blocks that are reachable from the loop header, after exiting the loop.)
-- Overview -- This file contains passes that attempt to reduce the number and strength of reference counting operations in an IR program.
/    TODO: This is a terrible hack, but necessary because we need constant /    size and alignment for the final stack promotion decision.
/ / This arises in _BridgedNSError, where we wouldn't otherwise pull in / the witness table, causing dynamic casts to perform incorrectly.
2) We need to find an insertion place for the deallocation so that it preserves a properly nested stack allocation-deallocation structure.
A full heap metadata is basically just an additional small prefix on a full metadata, used for metadata corresponding to heap allocations.
Add the type decl to ExternalDefinitions so that we can type-check raw values and SILGen can emit witness tables for derived conformances.
All of the active clauses are already walked by the / AST walker, but we also want to handle the inactive ones to avoid false / positives.
All the non-SIL, non-type-trait builtins should use the named-builtin logic, which just emits the builtin as a call to a builtin function.
An abstract enum value can be thought of as supporting three primary operations: 1) GetEnumTag: Getting the current case of an enum value.
ArrayData* Escalate(const ArrayData*)  Arrays must be given a chance to 'escalate' to more general kinds prior to some unusual operations.
Avoid tail-call optimization which may convert the call to the final release to a jump, which is done after the stack frame is destructed.
Check if a loop has only 'safe' array operations such that we can hoist the / uniqueness check even without having an 'identified' object.
Collection accessors can read from their inner array buffer, but stores COW and behave as if they only affect collection memory locations.
ComputeAvailSetMax - If we ignore all unknown writes, what is the max / available set that can reach the a certain point in a basic block.
Dynamic lookup cannot find results within a non-protocol generic context, because there is no sensible way to infer the generic arguments.
Even if they are apply_inst, it is safe to do so, because they can only be applies of functions annotated as string.utf16 or string.utf16.
Every AttrUnique non-trait class has a unique ClassInfo object, or no ClassInfo object in the case that instantiating it would've fataled.
Explode a copy_addr instruction of a loadable type into lower level / operations like loads, stores, retains, releases, retain_value, etc.
Finally, if there's a suffix layout, and the suffix begins at offset 0, than the suffix layout can completely subsume the original layout.
For each fault handler block ending in Unwind, find the EH entry for the funclet, then traverse outwards starting from the next outermost.
For every instruction in trace representing a tracelet guard, call func with its location and type, and whether or not it's an inner hint.
For generic and resilient types, nondependent conformances are keyed by the nominal type descriptor rather than the metadata, so try that.
Give each parameter in a ClosureExpr a fresh type variable if parameter / types were not specified, and return the eventual function type.
Here we need to be generating hopefully-dead stores to initialize non-parameter locals to KindOfUninit in case we have to leave the trace.
However, tcmalloc does allocations really fast, especially for the types of small items one sees in STL, so it's better off just using us.
I think the only way this can happen is if we have a switch_enum of some sort with multiple incoming values going into the destination BB.
If /every/ usable register is assigned to a lifetime interval which intersects with `current', we have to split current before that point.
If classType shares an exemplar types with the abstract type, that will end up re-entrantly building the layout of the same ClassTypeInfo.
If so, then the pair of the / partial_apply instruction and the index of the box argument in the closure's / argument list is added to IM.
If the physical register has never been redefined, we will be safe rewriting uses of other Vregs that we know were defined in terms of it.
If the predecessor is the head of a backedge in our traversal, clear any state we are tracking now and clear the state of the basic block.
If the producer of the cell knows that it is not the last reference, then it can treat Use::UsedIfLastRef as being equivalent to Use::Not.
If the variable is empty in all resilience domains that can see it, don't actually emit a symbol for the global at all, just return undef.
If there is a same-type requirement to be added for the given nested type / due to a superclass constraint on the parent type, add it now.
If there is a transition from 1 to 0, that means we have a partial merge, which means the release can NOT be hoisted to the current block.
If this function maybe called indirectly, e.g. from virtual table do not function signature specialize it, as this will introduce a thunk.
If we just passed in a name that already has a value like: hhvm.server.apc.ttl_limit max_execution_time then we just return the value now.
If we reach this point, we know that the types must be different since otherwise simplifyInstruction would have handled the identity case.
If we're emitting to memory, project out this element in the destination buffer, then wrap that in an Initialization to track the cleanup.
In this situation, all the sets get flagged as `pessimized', we don't do anything to them anymore, and a Halt node is added to all graphs.
It is important to pass nullptr so that the OS sets mtime and atime to the current time with maximum precision (more precise then seconds)
It's safe to side-exit still because we only do these profiled array gets on the first element, with simple bases and single-element dims.
Look up a TypeAliasReq or a Class for the supplied NamedEntity (which must be the NamedEntity for `name'), invoking autoload if necessary.
MOpFlags::Unset Props doesn't promote "emptyish" things to stdClass, or affect arrays, however it can define a property on an object base.
Mark regs that fit our constraints as free up until the point of conflict, unless they're owned by active intervals---then mark them used.
Objective-C metaclasses are subclasses of NSObject in the ObjC runtime, so casts from NSObject to potentially-class metatypes may succeed.
Once that's no longer true (because we're serializing everything appropriately in the module), we should assert that this does not happen.
Otherwise we continue processing the reference count decrement to see if the decrement can affect any other pointers that we are tracking.
Otherwise, see if there are any instructions in between FirstPredInc and the end of the given basic block that could decrement first pred.
Partial applications take ownership of the context parameters, so we'll need to pass ownership rather than merely guaranteeing parameters.
Pattern-bindings don't require anything special as long as / these initializations are performed in the constructor, not / .cxx_construct.
Perform final cleanup passes to collapse any critical edges that were split, and simplify our instructions before shipping off to codegen.
Preserve specialization through this operation by peeling off the substitutions from a specialized conformance so we can apply them later.
Print a string of the form "LLVM xxxxx, Clang yyyyy, Swift zzzzz", / where each placeholder is the revision for the associated repository.
Private instance and static property types are stored separately from ClassInfo, because you don't need to resolve a class to get at them.
Remove the size of the first instance, because a single instance of a function is always needed and does not contribute to the _overhead_.
Resolve the given identifier type representation as a qualified / lookup within the given parent type, returning the type it / references.
Special case of some common conversions involving Swift.String indexes, catching cases where people attempt to index them with an integer.
TODO: Add gdImageGetRowPtr and works with ptr at the row level for the true color and palette images new formats will simply work with ptr
TODO: We could do bitcasts entirely in the value domain in some cases, but for simplicity, let's just always go through the stack for now.
The first thread to hit an interrupt becomes the current thread, and all others block until the current thread is done with its interrupt.
The new word is either zerod or set to 1, depending on whether we are one of the special builtins that takes variadic reference arguments.
The ones that return a TCA return a non-nullptr value to indicate that the caller must resume execution in the TC at the returned address.
The reason why we sort the list is so that we will process projections with the same value decl and tuples with the same indices together.
The result of this is that s_request_wrappers is no longer request-local - requestInit() and requestShutdown() will never be called again.
The syntax is probably easiest to understand by looking at some examples (or the semi-BNF markup around some of the parse functions here).
This could be slightly generalized to cases where there's multiple tag bits and exactly one no-payload case in the highest used tag value.
This file implements semantic analysis for expressions, analysing an expression tree in post-order, bottom-up, from leaves up to the root.
This function recursively visits each node in an expression, keeping track of where to jump if an "and" or "or" expression short circuits.
This method is called in post-order over the AST to validate that / methods are fully applied when they can't support partial application.
This optimization will early-initialize the copy dest, so we can't allow aliases to be accessed between the initialization and the return.
This version of furc_hash is fairly insensitive to key length since additional bits are generated by re-hashing the initial MurmurHash64A.
This will ensure that we always exit on the same path on both proxy and client threads, and remove any spurious output form ths test case.
TraceProfiler Walks a log of function enter and exit events captured by TraceProfiler and generates statistics for each function executed.
Use strcspn instead of strpbrk because the latter doesn't report when its terminated due to a null byte in haystack in any manageable way.
Verify that none of the class properties are TBottom, i.e. any property of type KindOfUninit has been initialized (by 86pinit or 86sinit).
We also need to open-code if the witness is defined in a protocol context because IRGen won't know how to reconstruct the type parameters.
We don't allow appending with an interior pointer, although we may be asked to append less than the whole string in an aliasing situation.
We don't serialize the body of stdlib_binary_only functions so we can't mark them as Shared (making their visibility in the dylib hidden).
We may be able to add the LSLocation to the vault, but it gets complicated very quickly, e.g. we need to resize the bit vectors size, etc.
We merely setup the remaining live stores, but do not materialize in IR yet, These stores will be materialized before the algorithm exits.
We now know this protected property is accessible, but we need to keep going because ctx may define a private property with the same name.
We should (a) see if there's a cheaper way to keep it up to date, and/or (b) see if we can fast-path cases where there's no ObjC involved.
We should only end up in this path for local and global variables, i.e. ones whose lifetime is assured for the duration of the evaluation.
When we have type context, we still show literals that are keywords, but we treat them as keywords instead of literals for prioritization.
With the exception of a second call to start being made this should be safe as any place we mutate m_socket is done within the event base.
XXX - the actual Single UNIX Specification says that "L" means "long", as in the C data type, but we treat it as meaning "4-byte integer".
for this operation to succeed, we need room for the entry we're adding, two realloc entries, and two entries to mark the end of the trace.
if the socket is in non-blocking mode and there's no data to read, don't output any error, as this is a normal situation, and not an error
swift_dynamicCast took or destroyed the value as per the original request We may still have an opaque existential container to deallocate.
/ / If 'layout' is null, there is a single captured value of / Swift-refcountable type that is being used directly as the / context object.
/ / This is done in the case of a typecheck failure, after we re-typecheck / partially-typechecked subexpressions in a context-free manner.
/ For example, if the ObjC type is exactly the expected / _ObjectiveCType type, then it would always succeed for / NSString, NSNumber, etc.
// no access to Def / destroy_addr Def / / Return true if a destroy was inserted, forwarded from a copy, or the / block was marked dead-in.
4) If the enum has multiple payload cases, the layout attempts to pack the tag bits into the common spare bits of all of the payload cases.
Add the deallocating destructor to the vtable just for the purpose that it is referenced and cannot be eliminated by dead function removal.
Additionally, when retrieving the main systemlib from the current executable, honor the HHVM_SYSTEMLIB environment variable as an override.
All pure memory access and pointer logic can be transformed, in particular: LdLoc, StLoc, LdLocAddr, CheckLoc, HintLocInner, and AssertLoc.
ArrayData* CopyStatic(const ArrayData*)  Copy an array, allocating the new array with malloc() instead of from the request local allocator.
Binding default dependenant on whether we are using an OSS build or not, and that is set at initialization time of CoreDumpReportDirectory.
But it also doesn't matter because we're going to throw a special VMReenterStackOverflow in that case so the unwinder won't worry about it.
Class extension methods are only dynamically dispatched if they're dispatched by objc_msgSend, which happens if they're foreign or dynamic.
Converts each generic function argument into a SILValue that can be passed / to the specialized call by emitting a cast followed by a load.
Currently protocol witness methods are called with an additional generic parameter bound to the Self type, and thus always require a thunk.
Do post order walks from each DV entry with the same visited set (so we'll stop if they chain to the main entry, which is the normal case).
Each block starts with an extra position number that corresponds to an imaginary "label" instruction that is not physically in the vasm IR.
Getting the interface from a swift source file differs from getting interfaces / from headers or modules for its performing asynchronously.
Given a class existential container, returns a witness table / pointer out of the container, and the type metadata pointer for the / value.
Given a value with the abstraction patterns of the original formal / type, give it the abstraction patterns of the substituted formal type.
Given an object type representation, fill the given Layout (starting at specified offset) with the appropriate layout for that object type.
Given that we have a source for a witness table that the given type / conforms to the given protocol, check to see if it fulfills anything.
Here's why:  - If a destructor for any of these things throws a php exception, it's swallowed at the dtor boundary and we keep running php.
However, XHP wants to use different type codes for bool, int, float, and string, so we need to fix up the type code here to make XHP happy.
Ideally this shouldn't happen, but the AST can contain overlapping nodes, such as multiple PatternBindingDecl in code like: var a, b : Int.
If a custom scanner for the object type is specified, it will only be invoked if any of the types in the custom guards list is interesting.
If a globalinit_func is called by "once" from a function that is not an addressor, we set count to 2 to disable optimizing the initializer.
If a vtable or witness table (method) is only visible in another module it can be accessed inside that module and we don't see this access.
If an oversized block is found instead, the remaining space before and/or after the return space it re-added to the appropriate free lists.
If the cast reduces to unchecked_ref_cast, then the source and dest have identical cleanup, so just forward the cleanup as an optimization.
If the last component is physical, then we just need to drill through side effects in the lvalue, but don't need to perform the final load.
If the substituted type isn't a reference type, then we can't have a class-bounded protocol or inheritance, and the simple case just works.
If there is a non-local / successor edge path that points to a dead edge in Parent, mark the / descendant non-local successor edge as dead.
If this is a conversion to a type variable used to form an archetype, Then diagnose this as a generic parameter that could not be resolved.
If this type is either a bound generic type, or a nested type inside a bound generic type, we will need to fish out the generic parameters.
If we didn't find a valid initializer (maybe the initial value was incompatible with the raw value type) mark the entry as being erroneous.
If we failed lookup of an operator, check to see it to see if it is because two operators are juxtaposed e.g. (x*-4) that needs whitespace.
If we see a store here, we have already checked that we are storing into the pointer before we added it to the worklist, so we can skip it.
If we're conservative scanning everything, we need to take no special action, as the above problem only applies to auto generated scanners.
If you add anything to this list, change the default size of PlatformConditionValues to not require an extra allocation in the common case.
Images with an alpha channel are only able to resolve down to '1/128th opaque' instead of '1/256th', and this conversion is also automatic.
In server mode, we exclude warmup document requests from profiling, then record samples for EvalJitProfileInterpRequests standard requests.
In that case, the code uses the static empty string, so if it was an OptCStr it needs to incorporate SStr, but an OptSStr can stay as SStr.
In this situation, we can remove the memory support bit to avoid futher reductions in the lower bound of that set via that memory location.
Initialize each TypeLoc in this attribute with a concrete type, and populate a substitution map from GenericTypeParamType to concrete Type.
Instead the structure of the DIEs mimics the nesting structure in the source (IE, a nested class within a class nested within a namespace).
It does this by classifying the enum along two orthogonal axes: the loadability of the enum value, and the payload implementation strategy.
It is ok to eliminate the Dup even if its second output u2 is used, because eliminating the Dup still leaves the second output u2 on stack.
It only makes sense to constrain tc with a class that's related to its existing class, and we want to preserve the more derived of the two.
It simply invokes the actual implementation of the runtime entry by means of indirect call through a pointer stored in the global variable.
Later, we should add more array optimizations, which would allow us to optimize the generated code once the scalar expressions are resolved
Maps instructions which produce a failing condition (like overflow builtins) to the actual cond_fail instructions which handle the failure.
Modifying one phi node can invalidate another unrelated phi nodes operands through the common branch instruction (that has to be modified).
None of the operations we do here can fail, so we can atomically disable the tuple's cleanup and then create cleanups for all the elements.
Note that order is important here, we process calls from most to least nested so that we can expose as many such opportunities as possible.
Note, we intentionally diagnose the end quote before the start quote, so that the IDE suggests fixing the end quote before the start quote.
Our destructor has no side effects, so if we can prove that no loads escape, then we can completely remove the use graph of this alloc_ref.
Performing a post-order walk over the control flow graph, tracking any / LSLocations that are read from or stored into in each basic block.
Rather than deal with yet another case (which only happens when we disable jemalloc), just emit a smashable mov followed by a register cmp.
Remove any may/must-aliasing stores to the LSLocation, as they can't be used to kill any upward visible stores due to the interfering load.
Returns whether a set on something containing type t could have side-effects (running destuctors, or modifying arbitrary things via a Ref).
SpillFrame's spOffset is to the bottom of where it will store the ActRec, but AliasClass needs an offset to the highest cell it will store.
Static closure body: we still need to pass the object instance for the closure prologue to properly do its dispatch (and extract use vars).
TODO(4441939): We could do better if we had an intersect_of() function that provided a formal way to compute the intersection of two Types.
The allocation is inside a stack alloc-dealloc region and we are now leaving this region without having found a place for the deallocation.
The arguments after _NAMELENGTH and _CONTENTSLENGTH must be explicitly cast to long in curl_formadd use since curl needs a long not an int.
The checkers appear in argument order, so each one increments curSrc, and at the end we can check that the argument count was also correct.
The destination object is made permanent so that multiple JPEG images can be written to the same file without re-executing jpeg_stdio_dest.
The name of the author may not be used to endorse or promote products derived from this software without specific prior written permission.
The proper long-term fix is that closure functions should be emitted with a convention that takes the closure box as the context parameter.
Therefore, any indexed type with such an action can immediately be marked as pointer followable, which helps us reach a fixed point faster.
This also simplifies the handler code because it doesn't have to worry about saving its arguments somewhere while executing the exit trace.
This code doesn't try to prove tricky validity constraints about whether it is safe to push the destroy_addr past interesting instructions.
This implements the object representation of the standard ErrorProtocol protocol type, which represents recoverable errors in the language.
This implies for every /    specialized call site, we insert an additional retain for each captured /    argument with reference semantics.
This is essential so that we don't accidentally double-count a key (after various conversions) that occurs in the container more than once.
This is only used for debug tracing, and is currently the first instruction (in an rpo traversal) that defined a tmp in the must-alias-set.
Threads for the dummy sandbox and signal polling can't destroy the proxy directly, since the proxy owns them and will want to destroy them.
To trigger this, one would need a terminator that uses a reference counted value and only has one successor due to critical edge splitting.
Todo: Replace the color/YUV functions with our own and simplify that should boost the conversion a bit as well, not only for palette image.
Traverse the "access" path for V and check that it starts with "let" and everything along this path is a value-type (i.e. struct or tuple).
Use strcspn instead of strpbrk because the latter doesn't report when it's terminated due to a null byte in haystack in any manageable way.
We can make it sync for the fp and rip in `context' by putting them in a fake ActRec here on the native stack, and passing a pointer to it.
We do not optimize overflow checks across instructions with side effects because we don't want to delay the trap past user-visible changes.
We simply use the top of stack of the previous VM frame (since the ActRec, locals, and iters for this frame do not reside on the VM stack).
We will check in checkSafeArrayAddressUses that all initialization stores to this variable are safe (i.e the store dominates the loop etc).
What this analysis state tells us is that every path through the program to the point of this LdLoc has provably stored `t1' to that local.
When we emit a forward jump to a block we haven't seen yet, we write down where the jump was so we can fix it up when we get to that block.
YUV420toRGBA: Converts from YUV (with color subsampling) such as produced by the WebPDecode routine into 32 bits per pixel RGBA data array.
if we have a cached connection, we need to pump the event loop to clear any "connection closed" events that may be sitting there patiently.
processREPLTopLevelPatternBinding - When we see a new PatternBinding parsed / into the REPL, process it by generating code to print it out.
to an invalid one so that we don't put extra strings into the default argument generator function that is not going to be ever used anyway.
/ / Arrays are identified by their 'underlying' pointer to the array structure / which must either be an alloc_stack or a function argument.
/ / This is a SetVector since several blocks may lead to the same error / report and we iterate through these when producing the diagnostic.
/ / To report unreachable user code, we detect the blocks that contain user / code and are not reachable (along any of the preceding paths).
/ / We get the "currently active" part by passing through the DEVELOPER_DIR / environment variable (along with the rest of the environment).
Also, we need to inspect the Funcs now (while we still have a references to parent) to determine which ones we will eventually need to free.
An unowned parameter is passed at +0, like guaranteed, but it isn't kept alive by the caller, so we need to retain and manage it regardless.
AnyObject results can come from different modules, including the current module, but we always assign them the OtherModule semantic context.
But we need this ordering to ensure that as long as you hold an accessor to m_expMap, its key converted to a char* will be a valid c-string.
But, according to The Encyclopedia Judaica, Hillel II may have only published the 19 year rule for determining the occurrence of leap years.
Check the generic parameters in the given generic parameter list (and its / parent generic parameter lists) according to the given resolver.
Check whether the addition is overflow checked by a cond_fail or whether code in the preheader's predecessor ensures that we won't overflow.
Depending on how we decide to resolve rdar://problem/14627460, we may want to use the regular getLoc instead and rather use the column info.
During this traversal, each instruction that pops when going forward instead "pushes" information about whether that input will be required.
For a designated initializer, we know that the static type being allocated is the type of the class that defines the designated initializer.
Fortunately, though, all versions of EBCDIC, including this one, agree on most of the printing characters that also appear in (7-bit) ASCII.
Function: gdTransformAffineGetImage Applies an affine transformation to a region and return an image containing the complete transformation.
Functions, initializers, and de-initializers include their interface types in their signatures as well as whether they are instance members.
Get properties from the actual object unless we're serializing for var_dump()/print_r() and the object exports a __debugInfo() magic method.
Given an unresolved T_shape TypeStructure, returns the __fields__ portion of the array with all the field names resolved to string literals.
Handle checking a metatype object's type by directly comparing the address of the metatype value to the subclass's static metatype instance.
Handles MemoryRef arguments and load the data input from memory, but these ones have no output other than the sign flag register update (SF)
Helper to emit getting the value for ActRec's m_this/m_cls slot from a This pointer depending on whether the callee method is static or not.
Here is the right place to do so, because this is the first action (other than possibly a back-up) that will match for the new input source.
If a frame pointer is used for something that can be modified to not be a use as long as the whole frame can go away, we'll track that here.
If it is possible for it to see a weak reference count of 1, then at the end of this function, the weak reference count will logically be 0.
If it looks potentially interesting, decide whether we *can* do the operation and whether the block is small enough to be worth duplicating.
If loc contains a valid location, reset the frontiers of all code and data blocks to the positions recorded by the last call to markStart().
If the class must not require dynamic initialization --- e.g. if it is a super reference --- then respect everything that might impose that.
If the throw destination is not valid, then the PatternMatchEmission logic is emitting an unreachable block but didn't prune the failure BB.
If this ever changes, this implementation will need to be architecture-dependent (and the sizeof* routine will probably need to take a TCA).
If this is a load expression, we try hard not to actually do the load (which could materialize a potentially expensive value with cleanups).
If this is the case, check if there is a specialization available for it already and use this specialization instead of the generic version.
If we have a binding that does not involve type variables, or we have no other option, go ahead and try the bindings for this type variable.
If we have a chain of identical binop expressions with homogeneous argument types, we can directly simplify the associated constraint graph.
If we're testing for the payload element, we cannot directly check to see whether it is present (in full generality) without doing a switch.
In all of the foo_list_t structs, either: - there's a 32-bit entry size and a 32-bit count or - there's no entry size and a uintptr_t count.
In order to handle both old dependencies that have disappeared and new dependencies that have arisen, we need to reload the dependency file.
In such cases, we assume that we are passing / self at +0 and then after we know what the callee is, we check if the / self is passed at +1.
In the following cases, note that if you get an elem out of an array that doesn't exist, php semantics are to return null (after a warning).
Namespace resolution specially recognizes "self" and "parent" and doesn't prepend a prefix, we don't have to worry about stripping prefixes.
No-payload enums have all values above their greatest discriminator value that fit inside their storage size available as extra inhabitants.
NoEscape - The destructor potentially has some side effects, but the / address of the destroyed object never escapes (in the LLVM IR sense).
Note that this may be an under estimate because there are 6939.6896 days in a metonic cycle not 6940, but it will never be an over estimate.
Note: If indirect fixups happen frequently enough, we could just compare savedRip to be less than some threshold where stubs in a.code stop.
Note: we don't need to handle possible emptiness explicitly, because if the array was empty we won't ever pull anything out while iterating.
Once the absolute depth at the jump becomes known, its StackDepth instance calls the setBase method of the StackDepth instance of the label.
Otherwise, create a new potential archetype for this associated type and make it equivalent to the first potential archetype we encountered.
Parameters: dst - Where to store the resulting affine transform angle - Shear angle in degrees  Returns: GD_SUCCESS on success or GD_FAILURE
Returns the bytes read on success Returns -31 on unknown failure Returns -80 on timeout Returns -32 when remote server closes the connection
Right now, that only is used for MONGO_RP_NEAREST, and MONGO_RP_NEAREST uses this function (see below in mongo_find_all_candidate_servers().
TODO: Similar to the above, a more general isBindableToSuperclassOf base class constraint could potentially introduce secondary constraints.
TODO: if the class pointer is guaranteed, we can do this lazily, at which point it might make sense to do it for a wider selection of types.
The best we can say is if the timer exists and fired and cancelled itself, we can clip to 0, otherwise just return the full timeout seconds.
The deserializer caches functions that it deserializes so that if it is asked to deserialize that function again, it does not do extra work.
The eval stack is also dead at this point (the return value is passed to ReturnHook as src(1), and the ReturnHook may not access the stack).
The first body parameter pattern for a constructor specifies the "self" instance, but the constructor is invoked from outside on a metatype.
This can get better results than just merging into stateIn in place, basically because of the way we represent the locations that need phis.
This function assumes the object and object/array down the tree have no internal references and do not implement the serializable interface.
This function is to ensure that the OS won't schedule the process to different processors, which would make values read by rdtsc unreliable.
This is required to preserve the lifetime of its argument, which could be e.g. a partial_apply instruction capturing some further arguments.
This pass prints a bottom-up ordering of functions in the module (in the sense that each function is printed before functions that call it).
This routine uses Thomas' incremental distance calculation method to find the distance from a colormap entry to successive cells in the box.
This stable sort will keep the blocks only reachable from DV entry points after all other main code, and move fault funclets after all that.
This switch does a "break" when the instruction can be skipped and is interesting, and a "continue" when it is a retain of the same pointer.
This, in turn, works better with our error recovery because we won't diagnose an end curly quote in the middle of a straight quoted literal.
Unless we go through this branch, the string was just freshly created, so the following mutation will be safe wrt its internal hash caching.
VarDecls are walked via their NamedPattern, ignore them if we encounter then in the few cases where they are also pushed outside as members.
We can use Objective-C generics in limited ways without reifying their type metadata, meaning we don't need to capture their generic params.
We can't call mongo_cursor_throw after deregister as it frees up bits of memory that mongo_cursor_throw uses to construct its error message.
We can't do this for types within a namespace because namespaces are open and thus we can't force a global numbering of all types within it.
We consider the current type-matching problem to the "solved" by this addition, because this new constraint will be solved at a later point.
We delay this until we *know* we will have a need to create new translations, instead of just trying to win the lottery at the dawn of time.
We don't need to link to the try_apply's normal result argument, because we handle it separately in setAllEscaping() and mergeCalleeGraph().
We use a set (instead of an unordered_set) because we want a fixed and well-defined iteration order while we're accumulating the hash below.
We will never sink the hoisted releases from predecessors since the hoisted releases will be on the enum payload instead of the enum itself.
close those descriptors that we just opened for the parent stuff, dup new descriptors into required descriptors and close the original cruft
icu::RuleBasedBreakIterator is stateful -- it cannot be used by multiple threads simultaneously without causing data corruption and crashes.
putmbi ------ Put a multibyte intgerer in some kind of output stream I work here with a function pointer, to make it as generic as possible.
'throw' is probably a typo for 'throws', but in local contexts we could just be at the end of a statement, so we need to check for the arrow.
- For each hoist group, perform the actual hoisting to the highest instruction with an exit that still dominates the rest of the hoist group.
/ / After the live parts of the store are determined, they are merged into the / minimum number of stores possible using the reduce function.
/ / Currently this can only happen given a non-local edge in which case we / want the non-local edge to point at its parent's successor edge.
/ Essentially, we can implement the release code motion by inverting the retain / code motion, but this can also make the code less readable.
/ It is generated by the compiler in some corner cases, e.g. if a serialized / optimized module is imported into a non-optimized main module.
A CRTP type visitor for deciding whether the metatype for a type / is a singleton type, i.e. whether there can only ever be one / such value.
A behavior in non-type or static context is never going to be able to satisfy Self constraints (until we give structural types that ability).
Actually we compute the coordinates of the center of the upper-corner histogram cell, which are the upper bounds of the volume we care about.
All blocks reachable from `startBlock' are also cloned, so that there is no path from the cloned blocks to the original blocks in the `unit'.
Allow casting a tuple by value when all elements in toType correspond to an element of the same size or larger in fromType in the same order.
Analyze the destructor for the class of ARI to see if any instructions in it / could have side effects on the program outside the destructor.
Arrays can be specialized in different ways, here we check if the constant array fits the kind()/type() of the specialization of rhs, if any.
Attempt to get the instance for S, whose static type is the same as its exact dynamic type, returning a null SILValue() if we cannot find it.
Before beginning the actual layout generation, we can speed things up a bit by marking any types which we know are always pointer followable.
Before we can match a release with a retain we need to check that we have not already matched the release with a retain we processed earlier.
CALENDAR OVERVIEW  The French republican calendar was adopted in October 1793 during the French Revolution and was abandoned in January 1806.
Check locally to see if any elements are satisfied within the block, and keep track of which ones are still needed in the NeededElements set.
Constructs a type info which performs simple loads and stores of / the given IR type, given that it's a pointer to an aligned pointer / type.
Don't use inode because it can easily change when you update the repository even though the file is supposed to be the same (same size/time).
Each Variable represents a Vreg in the Vunit we're performing register allocation on---including lifetime ranges, uses, def information, etc.
Each interval consists of a sorted list of disjoint, live ranges covering the positions where R must be in a physical register or spill slot.
Expand the result and parameter types of a SIL function into the / physical parameter types of an LLVM function and return the result / type.
For / Swift-defined types, this is equivalent to the metatype for the / class, but for Objective-C-defined types, this is the class / object.
For an integer subscript expression on an array slice type, instead of introducing a new type variable we can easily obtain the element type.
For each increment in our list of new increments, attempt to match them up with decrements and gather the insertion points of the decrements.
For each platform version spec in the spec list, create an implicit AvailableAttr for the platform with the introduced version from the spec.
For example, on the OSXApplicationExtension platform we want to chose the OS X spec unless there is an explicit OSXApplicationExtension spec.
Given a value with the abstraction patterns of the substituted / formal type, give it the abstraction patterns of the original / formal type.
If any of the bound patterns fail (because this is a 'for case' pattern with a refutable pattern, the code should jump to the continue block.
If such a value exists, it is a candidate for RC-identity with the / argument itself--the caller must verify this after evaluating all paths.
If the class in which this initializer was declared conforms to a protocol that requires this initializer, then this initializer is required.
If the enum element has no explicit raw value, try to autoincrement from the previous value, or start from zero if this is the first element.
If the instructions are different, but only in terms of a cheap operand then we can still sink it, and create new arguments for this operand.
If the lexer stopped with an EOF token whose spelling is ")", then this is actually the tuple that is a string literal interpolation context.
If the nested type comes from a type alias, use either the alias's concrete type, or resolve its components down to another dependent member.
If the only users of the alloc_stack are alloc, destroy and init_existential_addr then we can promote the allocation of the init existential.
If the predecessor region is an unknown control flow edge tail, the dataflow that enters into the region bottom up is undefined in our model.
If this is a load of self in a struct/enum/protocol initializer, then it must be a use of 'self' before all the stored properties are set up.
If we have not detected a change yet, then calculate new reachabilities into a new bit vector so we can determine if any change has occurred.
If you have some other initialization that must be done asynchronously, then you can defer this call until after that initialization is done.
If you take one or the other it's possible for normal context insensitive return types in the index to get bigger instead of getting smaller.
In WholeProgram mode, during parse time we collected all class_alias calls so we can mark the targets of such calls redeclaring if necessary.
In this case, we decrement the lower bound and just eagerly behave as if the must-alias-set for the stored value may be decref'd right there.
Indirect enum cases are implemented by substituting in a SILBox type for the payload, resulting in a fixed-size lowering for recursive enums.
It expects `tv' to be the address of a TypedValue with refcounted type `type' (though it may be static, and we will do nothing in that case).
It should always still be a placeholder, because it was created as an anonymous symbol and nobody should ever be randomly messing with those.
License is also granted to make and use derivative works provided that such works are identified as "derived from the RSA Data Security, Inc.
Mark oldAd as having 0 elements so that the array release logic doesn't decRef the elements (since we teleported the elements to a new array)
Most of the clients treat subscript reference the same way as a regular reference when called on the open bracket and ignore the closing one.
Normally we wouldn't need an explicit copy/move-constructors, or copy/move-assignment operators, but we have to make sure m_key isn't copied.
Note: the call sites of this function all assume that no user code will run and no recoverable exceptions will occur while running this code.
Ok, now we know that the merged set can safely represent a set of of instructions which together semantically act as one ref count increment.
On the other side, the implementation indexer should be registering the getter/setter USRs independently of how they're actually implemented.
Other reference storage types all have the same layout for their storage qualification and the reference counting of their underlying object.
Otherwise, if the instruction has a fall-through, then insert a jump to the next offset, since it may not be the next block to be translated.
Our safety measure is meant to protect from such many-buggy to one-correct collisions, by deviating from the correct algorithm in such cases.
Redefining the struct here is technically an aliasing violation, but we can just tell the compilers that actually use TBAA that this is okay.
Removes meta-data about a caller to a proflogue from prof-data to ensure that a call to an optimized translation isn't wrongly smashed later.
Set un-passed parameters to Uninit (or the empty array, for the variadic capture parameter) and set up the ExtraArgs on the ActRec as needed.
Short-circuit for cases where we're executing a line of code that we know we don't need an interrupt for, e.g., stepping over a line of code.
TODO: We might be able to coordinate AllowPlusZero across conditionals / if all branches of the conditional can actually produce a +0 result.
TODO: maybe PrivateExternals should get SharedExternal (these are private functions from the stdlib which are specialized in another module).
TODO: we can pass at +0 (immediate) to an unowned parameter if we know that there will be no arbitrary side-effects between now and the call.
Test fixture, with helper functions implemented by forwarding to global function overloads selected by component types of the type parameter.
The Jewish calendar has been in use for several thousand years, but in the early days there was no formula to determine the start of a month.
The canonical mangling signature removes dependent types that are equal to concrete types, but isn't necessarily parallel with substitutions.
The names of the authors may not be used to endorse or promote products derived from this software without specific prior written permission.
The number of generic type arguments being bound must be equal to the total number of generic parameters in the current generic type context.
The pattern variables were all emitted as lets and one got passed in, now we finally alloc a box for the var and forward in the chosen value.
The return type of _bridgeErrorProtocolToNSError is formally 'AnyObject' to avoid stdlib-to-Foundation dependencies, but it's really NSError.
The tuple contains the known return type for the builtin, the total number of calls seen and the total number of calls that could be reduced.
They have bytecode bodies that just fatal, so it won't hurt return type inference (we'll just add an extra TBottom to the return type union).
This ASTWalker explores an expression tree looking for expressions (which / are DeclContext's) and changes their parent DeclContext to NewDC.
This file defines the SILCoverageMap class, which is used to relay coverage mapping information from the AST to lower layers of the compiler.
This might be worth doing specifically for the zend.assertions setting, for which the emitter emits an ini_get around every call to assert().
This performs either / getAddrOfSwiftMetaclassStub or getAddrOfObjCMetaclass, depending / on whether the class is published as an ObjC class.
Use the address of the c_Generator object as a tag for this stepping operation, to ensure we only stop once we're back to the same resumable.
We "know" that we're inside a ParenExpr, because ParenExprs are required by the syntax and locator resolution looks through on level of them.
We can only take the value if the box is a bridged NSError, in which case owning a reference to the box is owning a reference to the NSError.
We do not know what this instruction is, do a simple check to make sure that it does not decrement the reference count of any of its operand.
We have an implicit assumption here that the first MemberRefExpr encountered walking (pre-order) is the Dest is the destination of the write.
We have to check that nothing was added to newInsts because that's the only way we can tell simplification happened to a no-dest instruction.
When ArrayIterator is cast to an array, it returns its array object, however when it's being var_dump'd or print_r'd, it shows its properties
Whitelist certain types even if Foundation is not imported, to ensure that casts from AnyObject to one of these types are not optimized away.
XXX - the actual Single UNIX Specification says that "long" means "long", as in the C data type, but we treat it as meaning "4-byte integer".
getElementForScalarInit - If a tuple of this type can be initialized with a / scalar, return the field number that the scalar is assigned to.
hzhao: mismatched version of conf file may have attributes that are not recognizable, and I don't think it should be treated as fatal errors.
options not implemented case LDAP_OPT_SERVER_CONTROLS: case LDAP_OPT_CLIENT_CONTROLS: case LDAP_OPT_API_INFO: case LDAP_OPT_API_FEATURE_INFO:
simplifySwitchEnumBlock - Simplify a basic block that ends with a / switch_enum instruction that gets its operand from an enum / instruction.
tryJumpThreading - Check to see if it looks profitable to duplicate the / destination of an unconditional jump into the bottom of this block.
unless the old capacity is too small, in which case we use the smallest capacity that is large enough to hold the current number of elements.
(If the block special device really has zero length, the fact that it is empty will be detected and reported correctly when we read the file.)
(When we don't have an spOff, the caller of the service request was responsible for making sure rvmsp already contained the top of the stack.)
/ / Also inout formal access and parameter and result conventions are / handled here, with some special logic required for calls with +0 self.
/ / TODO: Completely eliminate make_mutable calls if all operations that the / guard are already guarded by either "init" or "mutate_unknown".
/ / materializeForSet sometimes needs to be open-coded because of the / thin callback function, which is dependent but cannot be reabstracted.
A class that walks the AST to find the innermost (i.e., deepest) node that / contains a target SourceRange and matches a particular criterion.
A rather simple way to get at just the demangled function name (fully qualified i.e. Swift.String.init) without the argument and return types.
Chunked replies are sent async, so there is no way to know the time it took to flush the response, but tracking the bytes sent is very useful.
Conformances / cannot be generated until the function declaration is fully parsed so / that the function's generic signature can be consulted.
Due to the matching pairs being in different basic blocks, the ARC Optimizer (which is currently local to one basic block does not handle it).
FIXME: One should only jump to this label in the case where we want to cut off other potential conversions because we know none of them apply.
FIXME: Should suggest overload set, but we're not ready for that until it points to candidates and identifies the self type in the diagnostic.
Find all of the members that aren't used to satisfy requirements, and check whether they are close to an unsatisfied or defaulted requirement.
For consistency with the interpreter, decref the rhs before we decref the stack inputs, and decref the ratchet storage after the stack inputs.
For now, we never try to emit specialized versions of the metadata statically, so compute the field layout using the originally-declared type.
For parity with C, several places in the grammar accept multiple comma-separated expressions and then bind them together as an implicit tuple.
For there to be a superclass relationship, we must be a superclass, and the potential subtype must be a class or superclass-bounded archetype.
For types that might be static, it generates a compare of the m_count field against 1, followed by two conditional branches on the same flags.
Function parameters are contravariant: we want to switch the direction of transformation on them by flipping inputOrigType and outputOrigType.
Get the (GuaranteedValue, Token) tuple from a call to "unsafeGuaranteed" / if the tuple elements are identified by a single tuple_extract use.
Given an interesting instruction, incorporate it into the set of results, and filter down the list of demanded subelements that we still need.
Go through all of our pointers and merge all of the retains with the first retain we saw and all of the releases with the last release we saw.
However, we want highest bit of the first byte to always be set so that we can tell if the string is fb_serialize'd or fb_compact_serialize'd.
I would support a wider range of dates, but I have not been able to find an authoritative definition of when leap years were to have occurred.
If a basic block does / not have LoadInst, we do not actually perform the last iteration where / RLE is actually performed on the basic block.
If the callee is a concrete witness method thunk, we ignore generic parameters derived from 'self', the generic parameter at depth 0, index 0.
If the current BB isn't terminated, and we require a return, then we are not allowed to fall off the end of the function and can't reach here.
If the function is recursive, a function_ref inst inside of the function will give the function a non-zero ref count triggering the assertion.
If the normal conformance is for a generic type, and we didn't hit a specialized conformance, collect the substitutions from the generic type.
If there are no extra tag bits, or they're set to zero, then we either have a payload, or an empty case represented using an extra inhabitant.
If there are no posted constraints or failures, then there was not enough contextual information available to infer a type for the expression.
If there aren't any arguments, then it can't destroy locals -- even if the call is to extract(), there's no argument, so it won't do anything.
If we couldn't infer the result type of the closure expr, then we have some sort of ambiguity, let the ambiguity diagnostic stuff handle this.
If we're emitting optimized code, record the string in the module and let the late ARC pass insert it, but don't generate any calls right now.
If we're implicitly trying to treat an optional type as a boolean, let the user know that they should be testing for a value manually instead.
If we're looking at members of a protocol or protocol extension, filter by whether we expect to find something in a protocol extension or not.
Ignore the given root path, strip off leading '/'s to a single leading '/' from the addpath, and leave addpath at the first non-'/' character.
In this situation, the compressor will return to its caller (possibly with an indication that it has not accepted all the supplied scanlines).
IncDecL is a read-modify-write: can be removed if the local isn't live, the set can't have side effects, and no one reads the value it pushes.
It looks up the predicted type for the value in cur().predictedTypes and ensures both locations have the most refined predicted type possible.
Keeping the ArrE for now just because we would need to check the key.type is not an invalid key (array or object) to prove it's non-empty now.
Michael's regex carries this copyright:  Copyright Michael Rushton 2009-10 http://squiloople.com/ Feel free to use and redistribute this code.
NOTE: depth is always 0 for ObjC generic type arguments, since only classes may have generic types in ObjC, and ObjC classes cannot be nested.
Note - in some partial liveness cases, we can push the destroy_addr up the CFG, instead of immediately generating dynamic control flow checks.
Note, this instruction can re-enter, but doesn't need the may_reenter() treatmeant because of the special kill semantics for locals and stack.
Otherwise, if the increments operand stripped of RC identity preserving ops matches EnumValue, it is the first increment we are interested in.
TODO: Copy arguments of the partial_apply into new temporaries only if the lifetime of arguments ends before their uses by apply instructions.
TODO: We should have an "isNoReturn" bit on Swift's BuiltinInfo, but for now, let's recognize noreturn intrinsics and builtins specially here.
The assumption here is that for builtins, the generated func contains only a single opcode (NativeImpl), and there are no non-argument locals.
The better solution would be to require all variables to be described with a SILDebugValue(Addr) and then not describe capture list arguments.
There should only ever be one of these in a set of constraints related to a dependent type, so the ordering among other types does not matter.
These arenas tend to have proportionally large memory usage fluctuations because requests clean up nearly all allocated memory at request end.
They are in a normal function, but didn't come from a VarDecl, or came from one that was autogenerated or inlined from a transparent function.
This allows the `region' to originally contain blocks stored in ProfData, which may be reused later with different guard-relaxation decisions.
This assumes that we won't even try to touch the value in such cases, although we may touch the cleanup (enough to see that it's not present).
This enables a type to retroactively model or directly conform to a protocol only available on newer OSes and yet still be used on older OSes.
This is a bit of a misuse of this field but the API doesn't allow one direct access to an not-yet-opened stream resource so it should be safe.
This method will already be called for all individual statements, so don't repeat that checking by walking into any statement inside this one.
This mutex must be non-reentrant so when the child process tries to unlock it after a fork(), the call to pthread_mutex_unlock() will succeed.
This pass does some analysis to try to avoid PureLoad instructions, and avoid "hidden" loads that are part of some instructions like CheckLoc.
To get around these problems, we apply Thomas' method to compute the nearest colors for only the cells within a small subbox of the histogram.
True if we shouldn't complain about problems with this conformance / right now, i.e. if methods are being called outside / checkConformance().
VarDecls are popped before we see their TypeRepr, so if we pass the token nodes now they will not change from identifier to a type-identifier.
We know we're on the "current" thread, so we can process any active flow command, stop if we're at a breakpoint, handle other interrupts, etc.
We need to be able to install a handler (from any extension, generally) as we also need to be able to print stack traces on errors/exceptions.
When converting floating-point integers less than 1e16, we use floating-point arithmetic rather than resorting to multiple-precision integers.
When no registers are available, choose either the current interval or another one to spill, trying to free up the longest-available register.
When we're inlining a NativeImpl opcode, we know this is the only opcode in the callee method body aside from AssertRATs (bytecode invariant).
`memcpy8()' could overrun the buffer by at most 7 bytes, so we allocate 6 more bytes here, which (together with the trailing 0) makes it safe.
bool IsVectorData(const ArrayData*)  Returns true if this array is empty, or if it has only contiguous integer keys and the first key is zero.
callToExit is special: it's a return helper but we don't treat it like one in here in order to simplify some things higher up in the pipeline.
tell typeCheckExpression that it is ok to produce an ambiguous result, / it can just fill in holes with UnresolvedType and we'll deal with it.
/ / It is important that any Initialization created for a pattern that might / not have an immediate initializer implement finishUninitialized.
/ / NOTE: The implementation of this function is very closely related to the / rules checked by SILVerifier::requireABICompatibleFunctionTypes.
/ / TODO: This needs to take a flag for the access mode of the witness table, / which may be direct, lazy, or a runtime instantiation template.
2) deletion of stored-only objects - objects that are allocated and potentially retained and released, but are only stored to and don't escape.
A check for multi-threaded compilation: Is this the llvm module where the global is defined and not only referenced (or not referenced at all).
A simple clamping of the error values to about +- MAXJSAMPLE/8 works pretty well, but the smoother transfer function used below is even better.
After initialization, we also smash the slow path call to point instead to a lookup routine for the out-of-line method cache (allocated above).
Alerts user to cirular dependency in extensions e.g. Unable to resovle dependencies for extension(s): A(depends: B) B(depends: C) C(depends: A)
An array is only mapped to a call once the analysis has determined that no make_mutable calls are required within the loop body for that array.
At this point the typeID (and field num, if applicable) should've already been written to the output so all we need to do is write the payload.
Because this intermediate value only needs 36 to 37 bits and the other numbers are constants, the process has been reduced to just a few steps.
Because we want to disambiguate between the two types of check bounds checks merge in the type into the lower bit of one of the addresse index.
But we can't assert that it is because background threads are allowed to clear surprise bits concurrently, so it could be cleared again by now.
CodeSmasher is used to overwrite all the relocated code with ud2 and int3 to ensure that we never execute it after the code has been relocated.
Disable the rvalue expression cleanup, since the let value initialization has a cleanup that lives for the entire scope of the let declaration.
Do what a release would do before calling the deallocator: set the object in deallocating state, which means set the RC_DEALLOCATING_FLAG flag.
Doing this here safes us from doing it over the whole function in updateSSAAfterCloning because we have split all other critical edges earlier.
Dynamic check for the enabling conditions of different kinds of / packing into a fixed-size buffer, and perform an operation at each / of them.
Even if the alloc_ref did not allocate the object on the stack, we don't have to deallocate it, because it is deallocated in the final release.
Even if the type does not really need a register (e.g., InitNull), a Vreg is still allocated in assignRegs(), so the following assertion holds.
For RPCRequestHandler threads, the ExecutionContext can stay alive across requests, but its always ok to kill it between requests, so do so now
For dynamic multi-payload enums, it would be expensive to recalculate the payload area size from all of the cases, so cache it in the metadata.
For some operations that are conceptually a socket operation (eg fopen('http://...)) we actually complete it and store the result in a memfile.
For this inlined region to be a viable target for this optimization the InlineReturn should be the only use of DefInlineFP within these blocks.
Fortunately, our TC personality routine skips all the way back to native frames before resuming the unwinder, so its brokenness goes unnoticed.
Given a ValueMember, UnresolvedValueMember, or TypeMember constraint, / perform a lookup into the specified base type to find a candidate list.
Given a reference to nominal type metadata of the given type, / derive a reference to a protocol witness table for the nth / argument metadata.
If a basic block does / not have StoreInst, we do not actually perform the last iteration where / DSE is actually performed on the basic block.
If inference of IUO type is disabled, IUOs may only be specified in the following positions: outermost type function param function return type
If the expression is an implicit call to _forceBridgeFromObjectiveC or / _conditionallyBridgeFromObjectiveC, returns the argument of that call.
If the field offset can't be known at compile time, we need to load a field offset, either from a global or the metadata's field offset vector.
If there are no ref count decrements in between the increment and the terminator of the BB, then we can sink the retain out of the switch enum.
If this merge is undefined due to unknown control flow, assume that the empty set is flowing into this block so clear all state and exit early.
If we already have out-of-line storage, the padding invariants will still apply, and we just need to copy the old data into the new allocation.
If we found a reference to an associated type or other member type that was marked invalid, just return ErrorType to silence downstream errors.
If we have a struct instruction with only one non-trivial stored field, the only reference count that can be modified is the non-trivial field.
In case we have a read preference of primaryPreferred or secondaryPreferred, we need to do a bit more logic for selecting the node that we use.
In practice, this means we will warn on a private declaration that shadows a non-private one, but only in the file where the shadowing happens.
In such a case we must keep the argument live across the call site of the callee and emit a matching retain for every invocation of the callee.
It is assumed that each fault funclet handler extends from its entry offset until the next fault funclet entry offset (or end of the function).
It is possible that the instruction still has uses, because it could be used as the replacement Value, i.e. F.second, for some other RLE pairs.
It will have to go away once we're properly differentiating bound generic types based on the protocol conformances visible from a given module.
Load the value from the temporary unless the type is address-only and this is the final use, in which case we can just consume the value as-is.
Mapping from archetypes with lazily-resolved nested types to the / archetype builder and potential archetype corresponding to that / archetype.
Misc stubs for functions which should be defined in the core standard library, but are difficult or impossible to write in Swift at the moment.
Most of the complexity in this analysis is related to instructions that load or store from memory, and therefore interacts with memory support.
Now walk the children looking for nodes that have controlling predecessors that have the same or lower level number in the post-dominator tree.
Objects that are allocated at global scope instead of on the heap, and statically initialized to avoid synchronization costs, are defined here.
On exit, internal references (references into the source range) will have been adjusted (ie they are still references into the relocated code).
Once we've collected all of the conditional init/assigns, we can insert a single control variable for the memory object for the whole function.
Parameters: dst - Where to store the resulting affine transform angle - Rotation angle in degrees  Returns: GD_SUCCESS on success or GD_FAILURE
Process the inner and outer types separately and then recombine them, since the minstr operations all operate on the inner cell of boxed bases.
RaceTest_ExpectEqual(code) runs code in many threads simultaneously,  / verifies that they all returned the same value, and returns that value.
Returns the file descriptor of the new log file and also sets the name of the file and the start time of the next period via pointers supplied.
Since the stack state is going to be considered "trimmed" over there, we need to null the extraArgs/varEnv field if the function could read it.
TODO: The systems that we need to solve for interpolated string expressions require bespoke logic that don't currently work with this approach.
Test the function and pass names we're given against the debug options that force us to break prior to a given pass and/or on a given function.
The countedness or possible-emptiness of the arrays is handled outside of this function, so it's ok to just return TArr from all of these here.
The derived type that is making the super call is resilient, for example we may be in an extension of a class outside of our resilience domain.
The extra layer of locking is here so that InstanceBits::init can safely iterate over s_instanceCounts while building its map of names to bits.
The local variables YYSIZE and YYSTACKSIZE give the old and new number of elements in the stack, and YYPTR gives the new location of the stack.
The reason to just use a default argument here is that it allows us to centralize all instruction removal in SILCombine into this one function.
There are potentially infinitely growing types when we're using union_of to merge states, so occasonially we need to apply a widening operator.
There is the thread currently processing an interrupt, plus any other threads stacked up in blockUntilOwn() (represented in the m_threads set).
This can happen when they are actually different types, because they exist in different scopes (e.g. everyone names their type parameters 'T').
This doesn't need to be done in RepoAuthoritative mode due to trait flattening ensuring that added methods are already present in the preclass.
This file implements application of a solution to a constraint system to a particular expression, resulting in a fully-type-checked expression.
This is essentially the bitvector implementation of global availability, but disallowing the cases where we can't find/create a suitable store.
This is populated as we go through the optimize pass, and doesn't need to be flow-sensitive since it only contains a RegInfo for virtual Vregs.
This is potentially expensive since we need to perform additional stripping on the argument provided to this argument from each predecessor BB.
This means they can't simply be hoisted to a loop preheader, and it also means that computations depending on the destination can't be hoisted.
Though seems to be wasting memory a lot, we have to realize most of the time this function is called with small strings, or fragments of HTMLs.
We can safely assume that either VerifyRetTypeC will throw or it will produce a value whose type is compatible with the return type constraint.
We don't handle those in our method regions for now---they'll get handled by the tracelet compiler and then may branch to the main entry point.
We match the behavior of clang to not report deprecation warnings inside declarations that are themselves deprecated on all deployment targets.
We must do this immediately rather than defer it in order to avoid problems with cloning dead instructions when doing recursive specialization.
We need to handle the special case where attributes semantically attach to enum element decls while syntactically locate before enum case decl.
We swap out the Closure object stored in m_this, and replace it with the closure's bound Ctx, which may be either an object or a class context.
We truncate to FBSYSTRACE_MAX_SECTION_NAME_LENGTH just to make sure we can avoid the overflow check even if the caller passes in something bad.
When called by FuncEmitter, the least significant bit of m_paramCounts are not yet being used as a variadic flag, so numParams() cannot be used
makes no representations concerning either the merchantability of this software or the suitability of this software for any particular purpose.
this is a no-op, and can happen when we triggered VM shutdown from the timeout code path, but the connections drain while waiting for shutdown.
* An erroneous import-as-member will cause an extra iteration at the end, so that the loop can detect that nothing changed and return a failure.
...as in ClassConstant statement We are handling this one here, not in ClassConstant, purely because we need "value" to store in constant table.
/ / If there are no enum elements but there are properties, attempts to map / an arbitrary property to an enum element using extractEnumElement.
/ / This mention may only be used on immediate children of the current expr / node, because ClosureExpr parameters need to be treated specially.
/ / We test it to catch any suspicious things when memory location is / expanded, i.e. base is traced back and aggregate is expanded / properly.
Add must-alias-set ids to the block's GEN set if it has a use in the block that implies its reference count can't be zero on entry to the block.
Always-unavailable imported constructors are factory methods that have been imported as constructors and then hidden by an imported init method.
As all registers are 64-bits wide, a smaller number from the memory should have its sign extended after loading except for the 'z' vasm variants
As an optimization, we do want to perform direct accesses of stored properties declared inside the same resilience domain as the access context.
But /    since the original partial apply no longer will have that corresponding /    -1, we need to insert a release for the old partial apply.
Copy parent's 86pinit() vector, so that the 86pinit() methods can be called in reverse order without any search/recursion during initialization.
Either this platform has no support for parsing debug information, or the preprocessor symbol to enable actually building scanner isn't enabled.
Even if at runtime this option will be off, it's fine to compile as if it were on: we just won't fold the calls that could've raised this error.
FIXME: For SizeInBits, clang uses the actual size of the type on the target machine instead of the storage size that is alloca'd in the LLVM IR.
FIXME: PHP calls stat() here if the wrapper has a non-null stat handler, in order to skip the open of a missing file, thus suppressing warnings.
Fault funclets can have protected regions which may point to handlers that are also listed in parents of the EH-region that targets the funclet.
For a dynamic result referring to an instance function through an object of metatype type, replace the 'Self' parameter with a AnyObject member.
For member functions, the args are serialized and kept along with the 'this' pointer, and used to look for constant returns given the same args.
For smashable jmps and calls in ARM, we emit the target address straight into the instruction stream, and then do a pc-relative load to read it.
Given a set of parameter lists from an overload group, and a list of / arguments, emit a diagnostic indicating any partially matching overloads.
Government and others acting in its behalf permission to use and distribute the software in accordance with the terms specified in this license.
However, since indexed types are keyed by a type index, they are only applied on specific instances of the type with that type index at runtime.
If our predecessors cover any of our enum values, attempt to hoist releases up the CFG onto enum payloads or sink retains out of switch regions.
If running the transform resulted in new functions on the top of the worklist, we'll return so that we can begin processing those new functions.
If the Class is unique but not persistent, it's safe to use it as a const after the LdClsCached, which will throw if the class can't be defined.
If the conformance is in this object's table, then the witness table should also be in this object file, so we can always directly reference it.
If the month is 4 to 7, it is considered whether it is a leap year and then simple subtraction from the beginning of the following year is used.
If there were forward jumps that referenced this Label, compare the the eval stack from the first foward jump we saw with the current eval stack
If they aren't needed, they carry a set of instructions that must be removed if the instruction that produces the stack value is also removable.
If this is a non-generic local function that does not capture any generic type parameters from the outer context, don't need a signature at all.
If this iterator was set to the _old_ canonical invalid position, we need to update it to the _new_ canonical invalid position after compaction.
If this projection is the same as the last projection we processed, just replace all uses of the projection with the load we created previously.
If we did find something, it might be a duplicate of something we found earlier, because we aren't tracking generation counts for Clang modules.
If we don't know exactly where the base is, we have to be conservative and apply the operation to all locals/stack slots that could be affected.
If we're converting on the behalf of an AutoreleasingUnsafeMutablePointer, convert the lvalue to unowned(unsafe), so we can point at +0 storage.
In particular, if a case condition modifies the switch subject, things behave differently depending on whether the subject is a simple variable.
Insert lifetime-resolving copies, spills, and rematerializations, and replace the Vreg operands in the Vinstr stream with the assigned PhysRegs.
It is hard to tell whether the next clause is a pattern or an invalid expression, because 'case' patterns can have expressions embedded in them.
It is safe to hoist array.props / calls if the array does not escape such that the array container could be / overwritten in the hoisted region.
Look for a method that will import to have the same name as the / given method after importing the Nth parameter as an elided error / parameter.
Normal case, where the base is an object (and not a pointer to something)---just do a lea with the type information we got from static analysis.
Note: it would be nice to give them more info about the process we think is debugging this sandbox: what machine it's on, what it's pid is, etc.
Note: we need to check the isImplicit() bit here to make sure that we don't classify explicit parameters declared with `self` as the self param.
Pending fixups always point after the call instruction, so use the "before" address, since there may be nops before the next actual instruction.
Precondition: m_rewrittenURL is set Postcondition: Output is true and m_path and m_absolutePath are set OR output is false and no file was found
Returns 'false' (i.e. no error) if it is legal to match functions with the corresponding function type representations and the given match kind.
Right now this just takes the C-style escaped version, which can't contain """ bytes anyway, but it's a little worse output than it needs to be.
SQLITE_OPEN_NOMUTEX specifies that the connection be opened such that no mutexes are used to protect the database connection from other threads.
Sign extension in the first char has no effect - nothing to overwrite yet, and those extra 24 bits will be fully shifted out of the 32-bit word.
Spare bit information is not available at runtime, so spare bits can only be used if all payload types are fixed-size in all resilience domains.
Specialize the Load left on the main trace after cloning the generic version to the exit---give it the type the old CheckType would've produced.
That'll mean we'll chop off the trailing N-1 opcodes, then in the next region we'll select N-1 opcodes and chop off N-2 opcodes, and so forth...
The class is defined in a generic context, so its superclass type may refer to generic parameters of the class or some parent type of the class.
The default zero initializer suppresses the implicit value constructor that would normally be formed, so we have to add that explicitly as well.
The head structure has a pointer to the most-recently-used element, and elements are moved to this position in the list each time they are used.
The innermost M levels of optionals on the operand are reflected in the requested destination type, so we should map these nils into the result.
The parser will have already diagnosed this, but treat this as a type error as well to get the ParamDecl marked invalid and to get an ErrorType.
There is ambiguity with expressions (e.g. "break x+y") but since the expression after the break is dead, we don't feel bad eagerly parsing this.
This BlockState contains concrete values for all the expanded locations, collect and reduce them into a single value in the current basic block.
This count can be propagated to the / count method if we can prove that the array value has not changed until / reading the array value's count.
This is fundamentally required because the callee can side-exit or throw an exception without a catch trace, so everything needs to be balanced.
To avoid this problem we update the return BC offset to refer to the outer frame and fix it up in the catch trace when we restore the rbp chain.
To preserve the invariant that the lsb class is an instance of the context class, we require that f's class is an instance of the context class.
Unowned parameters are only guaranteed at the instant of the call, so we must retain them even if we're in a context that can accept a +0 value.
We duplicate the file descriptor, because fclose on a tmpfile will delete the file, but any open descriptors can still access the phantom inode.
We introduce for the non-local case because these may have getters and setters (and these may be synthesized, so they might not even exist yet).
We need to be careful about mapping 'raw' argument type variables to parameter tuples containing default args, or varargs in the first position.
We need to do this before a native function calls into a C library compiled with -fomit-frame-pointer with the intention of having it call back.
We need to retain the parameter if: - we received at +0 (either) and are passing as owned - we received as unowned and are passing as guaranteed
We need to save the original Apply-Witness users because we'll be adding new users and we need to make sure that we can find the original users.
We use our own post-dominator tree instead of PostDominatorAnalysis, because we ignore unreachable blocks (actually all unreachable sub-graphs).
We want to minimize the PHP code we run while propagating fatals, so we do this check here on a very common path, in the relatively slower case.
clang::isIdentifierHead and clang::isIdentifierBody are deliberately not in this list as a reminder that they are using C rules for identifiers.
computeTupleElementAddress - Given a tuple element number (in the flattened / sense) return a pointer to a leaf element of the specified number.
fetchToken() will return the first token in the lookahead store (if the lookahead store has tokens) or it will get a new token from the frontier
findUnexpectedBoxUse - Validate that the uses of a pointer to a / box do not eliminate it from consideration for promotion to a / stack element.
if we removed any whole blocks that ended in Jmp instructions, reflow all types in case they change the incoming types of DefLabel instructions.
unnamed namespace / Parse a pattern-matching clause for a case or catch statement, / including the guard expression: / /    pattern 'where' expr
- Therefore either the weak retain must happen-before this function, or this function cannot see a weak reference count of 1, or there is a race.
...non-type-checked types should only ever show up here because of test cases using -enable-source-import, but unfortunately that's a real thing.
/ Create a Substitution list mapping each nested archetype to a concrete / type, and resolve conformances for each generic parameter requirement.
3) For any block that had a successor in the retranslation chain, remove all the chain blocks from its successors' set and add only the new root.
A 'self.init' or 'super.init' application inside a constructor will evaluate to void, with the initializer's result implicitly rebound to 'self'.
An existential conforms to a protocol if the protocol is listed in the existential's list of conformances and the existential conforms to itself.
Before we recurse mark the type as safe i.e if we see it in a recursive position it is safe in the absence of another fact that proves otherwise.
Defend against type variables from our constraint system leaking into recursive constraints systems formed when checking the body of the closure.
Detect the case where the last selector is text(), simplexml always accesses the text() child by default, therefore we assign to the parent node.
Disambiguate and diagnose invalid uses of trailing closures in a situation / where the parser requires an expr-basic (which does not allow them).
Duplicating the testb/jcc from B4 into these allows branch fusion to greatly simplify everything, eliminating the phi and saving a test and jump.
During the cleanup phase, we can either use a landing pad to perform cleanup (with _Unwind_SetIP and _URC_INSTALL_CONTEXT), or we can do it here.
FIXME: Ideally we would handle decl modifiers as a special kind of attribute, but for now it's simpler to treat them as a keyword in the printer.
Find the least common ancestor of the two paths, then modify the active list by popping and then pushing nodes to set it to the new block's path.
First 256 symbols are for conversion from koi8-r to corresponding charset, second 256 symbols are for reverse conversion, from charset to koi8-r.
For now we are not going to be smart about this to enable avoiding any issues with visiting the protocol_method before the init_existential_inst.
Here we also store the value index to use into the value map (versus non-argument values where the operand use decides which value index to use).
If only a subset is given or the class has protected members then you need to merge the properties separately by calling zend_merge_properties().
If the `copy' argument is true, the returned array must be indistinguishable from an array that did a COW, in terms of the contents of the array.
If the user error handler throws an exception, discard the uninitialized value(s) at the top of the eval stack so that the unwinder doesn't choke
If the variable declaration is for a 'self' parameter, it may be because the self variable was reverted whilst validating the function signature.
If this is an 'as' pattern coercing between two different types, then it is "useful" because it is providing a different type to the sub-pattern.
If this is dynamic and isn't overriding a non-dynamic method, it'll always be accessed by objc_msgSend, so we don't need to add it to the vtable.
If we find one, / change the block to have an unreachable instruction right after it, and / diagnose any user code after it as being unreachable.
If we have a DCls::Sub we have to assume it could affect any subclass, so we repeat this merge for all exact class types deriving from that base.
If we statically know the source is an NSError subclass, then the cast can go through the scalar path (and it's trivially true so can be killed).
If we're doing a merge on a path that's previously seen a partial merge, conservatively drop the sequence, to avoid doing partial RR elimination.
Immediate-form logical (unsigned) shift operations are obtained by specifying appropriate masks and shift values for certain Rotate instructions.
Instead of linking to CrashReporterClient.a (because it complicates the build system), define the only symbol from that static archive ourselves.
It / should be a performance win for small constant values where the function / can be inlined, the loop unrolled and the memory accesses merged.
Note that if any class derives from a class and adds magic methods, it can change still change dispatch to call that method instead of fatalling.
Note: this can't use std::move, because pauseBlock must leave the current state alone so startBlock can use it as the in state for another block.
Note: this is part of a performance hack to prefer non-generic operators to generic operators, because the former is far more efficient to check.
Once intervals have been walked and split, every interval has an assigned operand (register or spill location) for all positions where its alive.
Other notes: if there is a redirect the POST becomes a GET request, see curl_easy_setopt(3) and the CURLOPT_POSTREDIR option for more information
Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1.
Return 0 if the checksum is bad (i.e., probably not a tar archive), 1 for old UNIX tar file, 2 for Unix Std (POSIX) tar file, 3 for GNU tar file.
ServerShutdownEOM isn't required to be smaller than ServerShutdownListenWait, but it makes sense to make it be, in order to make shutdown faster.
Since this is repeated in exif_process_IFD_TAG make it a notice here and make it a warning in the exif_process_IFD_TAG which is called elsewhere.
Sink retain_value, release_value before select_enum to be retain_value, / release_value on the payload of the switch_enum in the destination BBs.
Sink retain_value, release_value before switch_enum to be retain_value, / release_value on the payload of the switch_enum in the destination BBs.
So, for a PureStore we can simply mark the location as no-longer providing memory support on the set it used to, but leave the lower bound alone.
TODO: If the protocol name was elided from the assoc type mangling, we could try to fish it out of the generic signature constraints on the base.
TODO: We currently limit this optimization to known arithmetic operators, but we should be able to broaden this out to logical operators as well.
The "autoreleased" convention doesn't survive through a partial application, since the thunk takes responsibility for retaining the return value.
The invokeFunc below will get very confused if this is the case, since it will be using a varEnv that belongs to the wrong function on the stack.
The lowered type should be an LLVM struct comprising the block header (IGM.ObjCBlockStructTy) as its first element and the capture as its second.
The runtime adds Stringish to any class providing a __toString() function, so we mirror that here to make sure analysis of interfaces is correct.
Then run through every ClassInfo, and for each of its parent classes clear the AttrNoOverride flag if it has a different Func with the same name.
There exists some more types in this enum like MYSQL_TYPE_TIMESTAMP2, MYSQL_TYPE_DATETIME2, MYSQL_TYPE_TIME2 but they are just used on the server
This gets tricky: - if we had a ref-counted type, and it was converted to a Bool, Int or Dbl above, we explicitly DecReffed it (in coerce_value).
This is a / function that lazily instantiates the type metadata for all of the / types of the stored properties of an instance of a nominal type.
This string is what PHP considers as "data" or "info" which is basically the string of "PHP1xx" where xx is country code that uses this timezone.
Try to simplify checked_cond_br instructions using existential metatypes by propagating a concrete type whenever it can be determined statically.
Unfortunately, Clang's getMethodFamily() never / considers a method to be in a special family if its result / doesn't satisfy isObjCRetainable().
We delete uncounted keys while iterating the cache, which is OK for AtomicHashArray, but not OK for other containers, such as std::unordered_map.
We have a closure created by a closure's invoke method, which means it should inherit the outer closure's context, so we have to know that first.
We insert a BigNode header at the front of the allocation in order to find these at sweep time (end of request) so we can give them back to libc.
We may have read an EOF because someone deliberately called close() in which case they may call shutdown() or we may already be inside shutdown()
We may visit the same closure expr multiple times in some cases, for instance, when closures appear as in-line initializers of stored properties.
We need to revisit the hasPrivateAncestor code if we start being able to look up methods on interfaces (currently they have empty method tables).
We need to take special care not to directly contract parameter binding constraints if there is an inout subtype constraint on the type variable.
When we ask the ObjC runtime to lay out this class, we need the RO-data to point to the field offset vector, even if the layout is not dependent.
Writing shouldn't change the EOF status, but because we have a transparent buffer, we need to do read operations on the backing store, which can.
https://github.com/google/brotli/issues/274 We should also allow 6 extra bytes for an empty meta-block at the end of each chunk to force "flush".
(If it did, we'd be calling that private method, which currently we don't ever resolve---we've removed it from the method table in the classInfo.)
- Check if the faultOffset that raised the exception is inside a protected region, if so, if it can handle the Fault resume the VM at the handler.
/ / - When the addressor is local to the module, be sure it is inlined to allow /   constant propagation in case of statically initialized "lets".
/ / Because size modifying instructions would create a copy of the storage this / is sufficient for the purpose of eliminating potential aliasing.
/ / Therefore, nested ApplyExprs applied to a constant are flattened into a / single call of the most uncurried entry point fitting the call site.
Conservatively do not allow any use of the box argument other than a strong_release or projection, since this is the pattern expected from SILGen.
Delegate generators aren't currently supported in the IR, so just use the interpreter if we get into a situation where we need to use the delegate
Emit a value witness table for a fixed-layout generic type, or a null / placeholder if the value witness table is dependent on generic parameters.
Emit protocol witness table pointers for the given protocol conformances, / passing each emitted witness table index into the given function body.
FIXME: And re-doing SILGen, SIL-linking, SIL diagnostics, and IRGen is expensive, because it's not properly being limited to new things right now.
For now, generic function types cannot be dependent (in fact, they erase dependence) or contain type variables, and they're always materializable.
Generate a new apply of a function_ref to replace an apply of a / witness_method when we've determined the actual function we'll end / up calling.
Get the index of the first range or use that is not strictly lower than `pos' (i.e., which contains/is at `pos' or is strictly higher than `pos').
Given a set of parameter lists from an overload group, and a list of / arguments, emit a diagnostic indicating any partially matching / overloads.
I'm honestly not sure where these constants came from I've brought them for ward from their IDL definitions with their previous hard-coded values.
If the argument isn't named, and we're cloning for an inherited constructor, give the parameter a name so that silgen will produce a value for it.
If the callee is a concrete witness method thunk, apply substitutions from the conformance, and drop any substitutions derived from the Self type.
If the result was from a Selector("selector-name"), add a separate note that suggests wrapping the selector in parentheses to silence the warning.
If the subexpression is a conditional checked cast, emit an unconditional cast, which drastically simplifies the generated SIL for something like:
If the types disagree, but we're comparing a non-void, single-expression closure result type to a void function result type, allow the conversion.
If there exist more than one typecheck of the same variable, they must be compatible with each other (i.e. their intersection must not be Bottom).
If there is already an internal breakpoint set when a StepDestination is constructed then it will not remove the breakpoint when it is destructed.
If this is an optional chain that isn't chaining anything, and if the subexpression is already optional (not IUO), then this is a noop: reject it.
If this node /does/ have a parent, make sure that all non-local successors point to a successor in the parent and match whether or not it is dead.
If we have "case let x." or "case let x(", we parse x as a normal name, not a binding, because it is the start of an enum pattern or call pattern.
In applications that need to be able to suspend compression due to output overrun, a FALSE return indicates that the buffer cannot be emptied now.
In the simple case of a unique alias name and a unique target name, we might be able to get away with manipulating the target classes' volatility.
In this case, we can just mark the target location as memory support for the must-alias-set for the stored value, and leave its lower bound alone.
It may be ok to remove pops on objects with destructors in some scenarios (where it won't change the observable point at which a destructor runs).
It's important to update this traversal whenever the AST is changed, whether by adding a new node class or adding a new child to an existing node.
Memory usage is stored on function begin if tracing, or if collect_memory is enabled, or on function end if computerized tracing output is enabled
NB: the arguments were just popped from the VM stack above, so the VM stack-pointer is conceptually pointing to the callee's ActRec at this point.
Normally this means that we'll just insert the epilogue in the current block, but if the current IP is unreachable then so is the entire epilogue.
Note: recursive type-checking implies that AllConformances may be reallocated during this traversal, so pay the lookup cost during each iteration.
PHP's streams layer explicitly flushes on close Mimick that for user-wrappers by pushing the flush here without impacting other HPHP stream types.
Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:  1.
Return the index of the given protocol conformance in the list of all / protocol conformances for the given dependent type in the given signature.
Returning true stops the call to the default interpreter which implies the handler for that opcode must perform all the right steps wrt the state.
ScopeCloner expects NewFn to be a clone of the original / function, with all debug scopes and locations still pointing to / the original function.
Since captures are created via partial_apply instructions, we need to see which function parameter fulfilled this metadata need and grab its type.
So in both cases we actually want to DecRef the *old* value, so we have to restore it here (because realize_param replaced it with the new value).
The buffer operations assume that the value is stored indirectly, because installCommonValueWitnesses will install the direct equivalents instead.
The logic above possibly moved elements and tombstones around within the buffer, so we make sure m_pos is not pointing at garbage by resetting it.
The names of its contributors may not be used to endorse or promote products derived from this software without specific prior written permission.
The pessimistic case still applies, however, if you need to reduce the lower bound on a must-alias-set S that currently has a lower bound of zero.
The result is placed in buf, and len denotes the length of the string The sign is returned in the is_negative argument (and is not placed in buf).
The zend_startup_strtod from hphp/runtime/base/zend-strtod.h uses the HPHP namespace, is used for other purposes, and predates the EZC extensions.
These definitions are not necessarily loop invariant, because their destination SSATmps may have types that depend on the position in the program.
This can be empty, meaning that values of this / type are not know to implement any protocols, although we do / still know how to manipulate them.
This deals with the case where the called function has a by ref param at the index of the unpack (because we don't want to box the unpack itself).
This is a weird situation for throwing: we've partially torn down the ActRec (decref'd all the frame's locals), and we've popped the return value.
This must be consistent with the extra inhabitant count produced by the runtime's getHeapObjectExtraInhabitantCount function in KnownMetadata.cpp.
Thus if we find / one go through all of its uses and see if they are all loads and address / projections (in many common situations this is true).
We do not need to update the available BitVector here as they should have been initialized and stabilized in the processBasicBlocksWithGenKillSet.
We don't have a lot of great options here, so (if all else fails), we'll attempt to diagnose the issue as though the first option was the problem.
We don't support inlining a function that binds dynamic self because we have no mechanism to preserve the original function's local self metadata.
We emit an empty fallback case with a comment to encourage the developer to think explicitly about whether fallback on earlier versions is needed.
We need to pull the generic parameters from the callee's interface type back into context because NecessaryBindings speaks in terms of archetypes.
We need to return a pair of values here: - the first one is the actual result of the devirtualized call, possibly casted into an appropriate type.
We should really change the test so that prints out the path elements top down the path, rather than constructing all of these intermediate paths.
emitOptimizedOptionalEvaluation - Look for cases where we can short-circuit / evaluation of an OptionalEvaluationExpr by pattern matching the AST.
void OnSetEvalScalar(ArrayData*)  Go through an array and call Variant::setEvalScalar on each value, and make all string keys into static strings.
/ / A load can be eliminated if its value has already been held somewhere, / i.e. generated by a previous load, LSLocation stored by a known value.
/ We only CSE semantic calls on high-level SIL because we can be sure that / e.g. an Array as SILValue is really immutable (including its content).
@effects(readonly) is worthless if we have owned parameters, because the release inside the callee may call a deinit, which itself can do anything.
A running async function is active on the normal stack, and we cannot compute the location just by inspecting the async function wait handle alone.
Absent some sort of user "max alignment" annotation (or having reached the platform maximum alignment, if there is one), these are part and parcel.
After merging, BlockState now contains lists of available LSLocations and their values that reach the beginning of the basic block along all paths.
An additional method that can be provided by data source modules is the resync_to_restart method for error recovery in the presence of RST markers.
By observing the types during this initial pass, we can often use a specialized comparator and avoid performing type checks during the actual sort.
Currently the RequestBodyReadLimit is not supported by FastCGI so we don't ever pause ingress and POST data is always received during VM execution.
Currently the following things are done:  o Replace PureLoad instructions with new uses of an available value, if we know it would load that value.
Deserializing an array could give back a different ArrayKind than we need, so we have to go with the slow case of calling a collection constructor.
Determine whether the frame pointer is outside the native stack, cleverly using a single unsigned comparison to do both halves of the bounds check.
During analysis of retains/releases within the loop body, the users in this set are assumed to cover all possible mutating operations on the array.
FIXME: As a bit of a hack, do lookup by the simple name, then filter compound decls, to avoid having to completely redo how modules are serialized.
For classes, expand implied conformances of the superclass, because an implied conformance in the superclass is considered "fixed" in the subclass.
For example, if this is a VarDecl for "x", the pattern may be / "(x, y)" and the initializer on the PatternBindingDecl may be "(1,2)" or / "foo()".
Get the guard page's size, because the stack address returned above starts at the guard page, so the thread's stack limit is stackaddr + guardsize.
Given a load with multiple struct_extracts/tuple_extracts and no other uses, canonicalize the load into several (struct_element_addr (load)) pairs.
However, vixl has 33 separate register codes, because it treats the zero register and stack pointer (which are really both register 31) separately.
If one is an OptionalSomePattern and one is an EnumElementPattern, then they are the same since the OptionalSomePattern is just sugar for .Some(x).
If the key is already in the map because someone else beat us to the insertion, we will return the existing value and delete the object we created.
If the typedef / should be skipped, returns the underlying declaration that the typedef / refers to -- this declaration should be imported instead.
If there's exactly one register argument slot left, the whole TypedValue goes on the stack instead of being split between a register and the stack.
If this is a curried call to an integer literal conversion operations, then we can "safely" assume it is readnone (btw, yes this is totally gross).
If this is a forbidden template (and forbidden template checking has been enabled), check if any of the template's type parameters are interesting.
If this is a property, we accept the match and then reject it below if the types don't line up, since you can't overload properties based on types.
If this is a use of self before super.init was called, emit a diagnostic about *that* instead of about individual properties not being initialized.
If we change the global ValueNumberTable during the pass, the hash values of the SSATmps will change which is apparently a no-no for unordered_map.
If we know we're removing a contextual constraint, then we can force a type check of the subexpr because we know we're eliminating that constraint.
In `killed_edge_defining' we have the case that an instruction defining a temp on an edge (like CheckType) determined it can never define that tmp.
In earlier versions of the IJG code, this module quantized in YCbCr color space, processing the raw upsampled data without a color conversion step.
In the comments throughout this file, three type names are used: 'B' is the type of a fixed-size buffer 'T' is the type which implements a protocol
In the normal method case, the "saved pc" for line number printing is pointing at the cell conversion (Unbox/Pop) instruction, not the call itself.
Inside a closure expression, an expression which syntactically looks like a discarded value expression, can become the return value of the closure.
It does its best to not search unnecessary subtrees, / although this is complicated by the fact that not all nodes have / source range information.
It is only safe to perform this operation when there exists a dominating edge E' of IVE for which FirstIV also takes on a non-payloaded enum value.
It should be impossible to reach a prologue that has been reclaimed through an immutable stub, as this would imply the function is still reachable.
Iterate over the format string filling in the result objects until we reach the end of input, the end of the format string, or there is a mismatch.
NOTE: on windows gethostbyname is "thread safe" the hostent is allocated once per thread by winsock2 and cleaned up by winsock when the thread ends
Needed because folly::symbolizer assumes it can find files via /proc/self/maps, but that's not true when we remap the text section with huge pages.
Non-materializable input and materializable output occurs when witness method thunks re-abstract a non-mutating witness for a mutating requirement.
Non-obvious off-by-one fun: if the *return address* points into the TC, then the frame we were running on in the TC is actually the previous frame.
Note that we can't assert the type if this isn't the only predecessor, but also, it's currently not the case that it would ever be useful to do so.
Note: We need to mark the cursor as failed _after_ prepping the exception, otherwise the exception won't include the servername it hit for example.
Now that we have our vector of Label*'s ready, we can emit a Switch instruction and/or conditional branches, and we can emit the body of each case.
Now that we've walked all of the immediate uses, scalarize any operations working on tuples if we need to for canonicalization or analysis reasons.
Otherwise, allocate a fixed-size buffer and possibly heap-allocate a payload at runtime if the runtime size of the type does not fit in the buffer.
Records the beginning and end of a translation and stores the size of the cold and frozen regions in the first 4 bytes of their respective regions.
Similar to the function case in do_analyze, we have to handle the fact that there are infinitely growing chains in our type lattice under union_of.
Simple subtraction of each component would yield PtrToMembInt, but that would mean we removed PtrToRefInt from the lhs despite it not being in rhs.
TODO: Allocating new vtable slots for derived methods with different ABIs would invalidate the assumption that the same thunk is correct, as above.
TODO: If the dominating checked_cast_br is non-exact, then it is in general not safe to assume that current exact cast would have the same outcome.
Test for type parameters, as opposed to a generic decl context, in case the enclosing enum type was illegally declared inside of a generic context.
The arguments /    to swift_bufferAllocate in SIL are not constant because they depend on /    the not-yet-evaluatable sizeof and alignof builtins.
The cast to (char *) in the following accommodates both implementations that use char* generic pointers, and those that use void* generic pointers.
The conversion destination of throw is always ErrorType (at the moment) if this ever expands, this should be a specific form like () is for return.
This allows a fairly fast implementation of the "brute force" approach of computing the distance from every colormap entry to every histogram cell.
This can't actually be a property of the obj because apache does weird things on object destruction that will cause the link to be destroyed twice.
This function will only return when the debugger is letting the thread continue execution, e.g., for flow control command like continue, next, etc.
This has to be inactive until the variable is initialized: if control flow exits the before the value is bound, we don't want to destroy the value.
This is a conservative list of functions that we are certain won't inspect the caller frame (generally by either CallerFrame or vm_call_user_func).
This is important because the list is processed in order and eliminating a nested inlined return may allow us to eliminate outer layers of nesting.
This means if we have to fallback from the currently-translating translation we jump to the "anchor" translation (which just is a REQ_RETRANSLATE).
This neatly sidesteps the problem of concurrent modification and execution, as well as the problem of 19- and 26-bit jump offsets (not big enough).
This will further enable to sink strong_retain_unowned instructions, which provides more opportunities for the unowned-optimization in LLVMARCOpts.
This will update a single range that was not relocated, but that might refer to relocated code (such as the cold code corresponding to a tracelet).
We are currently emitting code for '_convertFromBuiltinIntegerLiteral', which will call the builtin and pass it a non-compile-time-const parameter.
We can't handle this as part of the constant folding logic, because there is no value they can produce (other than empty tuple, which is wasteful).
We cannot catch these errors with SIL verification because they may legitimately occur during code specialization on dynamically unreachable paths.
We don't need to test whether NumRemainingSpecializations is AlwaysRefutable before decrementing because we only ever test this value against zero.
We don't rely on any other LLVM ARC transformations, but we do need ARC contraction to add the objc_retainAutoreleasedReturnValue assembly markers.
We intentionally use typeCheckStmt instead of typeCheckBody here because we want to contextualize all the TopLevelCode declarations simultaneously.
When updating a tracked location, the visitor below will kill any potentially conflicting locations in the availability mask without updating them.
eIPrev will actually be used, so properly initialize it with the previous element before pos (or an invalid position if pos was the first element).
foo If we are parsing a refutable pattern and are inside a let/var pattern, the identifiers change to be value bindings instead of decl references.
function type: decl-ctx + type FIXME: we should just be able to demangle the DeclCtx and resolve the function this is fragile and will easily break
the type of interrupt, practically the type will be one of the following: - ExceptionThrown - ExceptionHandler - BreakPointReached - HardBreakPoint
this is now the original code by Michael G Schwern: i've changed it just a slightly bit (use emalloc, get rid of includes etc) - thies - 13.09.1999
this is unfortunate, but is needed because we're digging into the literals to get information about them, instead of accepting general expressions.
-- Memory Support -- This section is going to introduce the "memory support" concept, but details will be fleshed out further in following sections.
/ / This can return a new expression (for e.g. when a UnresolvedDeclRef gets / resolved) and returns null when the subexpression fails to typecheck.
/ / expr-call-suffix: /   expr-paren selector-arg* /   expr-closure selector-arg* (except in expr-basic) / / selector-arg: /   identifier expr-paren
A CR bit parameter in ppc64 is a combination of X64's cc and sf variables: CR group (4 bits per group) is a sf and the CR bit (1 of the 4) is the cc
A release of a load from the self box in a class delegating initializer might be releasing an uninitialized self, which requires special processing.
A set which causes a destructor to run, a iteration init which causes an object's next() method to run, a RetC which causes destructors to run, etc.
After register allocation, some lifetime intervals may have been split, and their Vregs assigned to different physical registers or spill locations.
Also do block compression with an adaptive reset, whereby the code table is cleared when the compression ratio decreases, but after the table fills.
Also, add factored exit edges for exceptional control flow through any parent protected regions of the region(s) that pointed at each fault handler.
Attempts to avoid / unnecessary copies by emitting the payload directly into the enum / payload, or into the box in the case of an indirect payload.
Check to see if this is the last character in the set, in which case it is not a range and we should add the previous character as well as the dash.
Create the argument list for the new apply, casting when needed in order to handle covariant indirect return types and contravariant argument types.
Currently all witness tables have public conformances, thus witness tables should not reference SILFunctions without public/public_external linkage.
Depending on the RecordKind, we write the SILFunction table, the global / variable table, the table for SILVTable, or the table for SILWitnessTable.
Determine the set of predecessors in case any predecessor has two edges to this block (e.g. a conditional branch where both sides reach this block).
Disable the expression cleanup of the copy, since the let value initialization has a cleanup that lives for the entire scope of the let declaration.
FIXME: Eventually we might get C++-like support for strong pointers in structs, at which point we should really be checking the lifetime qualifiers.
FIXME: Introduce a bit indicating when everything in the TypeRepr has been name-bound, which indicates that we can always compute a structural type.
FIXME: This is a hack because DI is not understanding SILGen's stack values that have multiple init and destroy lifetime cycles with one allocation.
For consistency with the interpreter, we need to decref things in a different order depending on whether we are unwinding, or planning to side exit.
For purposes of argument type matching, existential types don't need to conform -- they only need to contain the protocol, so check that separately.
For the protected method case: if the context class must be derived from the class that first defined the protected method we know it is accessible.
Generally it will report a list of pointers to other potentially interesting types, as well as address ranges that should be conservatively scanned.
I can't think of a reason why we would get more than one decl called deinit here, but just in case, if it is a function type, we should remember it.
If a dependent member type appears in lowered position, we need to lower its context substitution against the associated type's abstraction pattern.
If both the original partial_apply and the apply of the callee are in the same basic block we can assume they are executed the same number of times.
If template_params is provided, the parent DIE is an object type, so template_params should be filled with any template parameters in the child DIE.
If the function type throws, set the lower bit of the return type address, so that we can carry this information over to the function type metadata.
It can happen with class constraints that Sema will consider a constraint to be abstract, but the minimized signature will eliminate it as concrete.
Mark all associatedtypes in this protocol as recursive (and error-type) to avoid later crashes dealing with this invalid protocol in other contexts.
Note: we skip catch clauses if we have a pending C++ exception as part of our efforts to avoid running more PHP code in the face of such exceptions.
Open in "create" mode (writing only, create if needed, no truncate) so that the file is not modified before we attempt to aquire the requested lock.
Otherwise if the type has external linkage, look for any type elsewhere (with external linkage) with the same name and having a complete definition.
Otherwise, swift_initClassMetadata_UniversalStrategy() will point the Objective-C runtime into the field offset vector of the instantiated metadata.
Produce a deterministic ordering of the given declarations with / a bias that favors declarations in the given source file and / members of a class.
Return a function which takes two pointer arguments and a count, memmoves / or memcpys from the second to the first, and returns the first argument.
TODO: Doug suggested that we could generate one error per non-throwing function with throw sites within it, possibly with notes for the throw sites.
TODO: Verify interesting layout properties specific to the kind of type, such as struct or class field offsets, enum case tags, vtable entries, etc.
The actual decRef has to happen after the call to arr().end() below, because both can have visible side effects (calls to __destruct() and valid()).
The mechanism used to keep the function body separate from the DV init is to temporarily mark the SrcKey for the function body as already optimized.
The second pass over the image maps each input pixel to the closest output color (optionally after applying a Floyd-Steinberg dithering correction).
The way we compute isEndOfSequence relies on the assumption that the sequence-folding algorithm never recurses with a prefix of the entire sequence.
There is a small race condition here with HttpServer::reset in program-functions.cpp, but it can only happen if we get a signal while shutting down.
This code is taken from http://www.acm.org/jgt/papers/SmithLyons96/hwb_rgb.html, an article on colour conversion to/from RBG and HWB colour systems.
This helper for weaken_decrefs reports uses of reference-counted values that imply that their reference count cannot be zero (or it would be a bug).
Version 3.31 of the file command considered a file to be ASCII if each of its characters was approved by either the isascii() or isalpha() function.
We do not currently handle generating a / new Clang struct type for Swift struct types that are created / independently of importing a Clang module.
We do this after deleting the old applies because otherwise we hit verification errors in the linking code due to having non-cond_br critical edges.
We don't currently support intersecting RepoAuthType::Arrays (t4473238), so we might be here because srcType and typeParam have different RATArrays.
We don't currently support using the 'r' encoding to refer to collection keys, but eventually we'll need to make this work to allow objects as keys.
We need to get things into an appropriate state for handleStackOverflow to be able to synchronize things to throw from the PC of the caller's FCall.
XML_Parse can reenter the VM, and it will do so after we've lost the frame pointer by calling through the system's copy of XML_Parse in libexpat.so.
updateInstructionForInitState - When an instruction being analyzed moves / from being InitOrAssign to some concrete state, update it for that state.
warning: if you turn off any stores using this bisector, you need to disable the corresponding deletes (or simpler, all deletes) using store_delete.
(*) ForScan -- Similar to Auto, but this type should not be marked as "pointer followable" (see below) if this is the only indexed type for the type.
**  Please change html_tables/generate-html-table.py instead and then     ** run it in order to generate this file                                 **
/ * retains must be matched by a release before hitting a mutating operation / * stores must not store an array value (only trivial stores are safe).
/ We only hoist semantic calls on high-level SIL because we can be sure that / e.g. an Array as SILValue is really immutable (including its content).
A RAII object for deciding whether this DeclKind needs special / treatment when parsing in the "debugger context", and implementing / that treatment.
Assure two bytes in the buffer so we can peek ahead -- handle case where first byte of header is at the end of the buffer after the last gzip segment
Class bases are stored on the symbolic stack in a "virtual" way so we can resolve them later (here) in order to properly handle php evaluation order.
Copy a numeric literal value into AST-owned memory, stripping underscores / so the semantic part of the value can be parsed by APInt/APFloat parsers.
Create an inliner pass that does not inline functions that are marked with / the global_init attribute or have an "availability" semantics attribute.
Detect when the source and destination are both permit scalar conversions, but the source has a name and the destination does not have the same name.
Dispatch to each specialized function is implemented by inserting / call at the beginning of the original generic function guarded by a type / check.
Do the following math as float intermediately, and round to ensure that Polygon and FilledPolygon for the same set of points have the same footprint.
FIXME: A clang module's Directory is supposed to be the directory containing the module map, but ClangImporter sets it to the module cache directory.
FIXME: Can also weaken to the set of protocol constraints, but only if there are any protocols that the type conforms to but the superclass does not.
FIXME: It would be really nice to emit a follow-up note showing where we got the other type information from, e.g., the parameter we're initializing.
FIXME: These decls are not being parsed correctly since (a) some of the callbacks are still being added, and (b) the logic to parse them has changed.
FIXME: We're seeding typeVars with TypeVariables so that the connected-components algorithm only considers those type variables within our component.
FIXME: possibly it could be worth recovering and attempting other inlines within this same recursive call rather than simply propagating the failure.
FIXME: the canonical type makes a poor signature, because we don't canonicalize away default arguments and don't canonicalize polymorphic types well.
Force type lowering to lower the type, so that we have a chance to check for infinite value types even if there are no other references to this type.
If "opt.purge" is absent, it's either because jemalloc is too old (pre-4.1.0), or because ratio-based purging is no longer present (likely post-4.x).
If self was consumed in a predecessor P, don't look at availability at all, because there's no point in making things more conditional than they are.
If the call to xdebug_get_stack_depth was NOT done via CallBuiltin, then it will be included in the depth count, and we need to manually substract it
If the dominating checked_cast_br is exact then then it is in general not safe to assume that the current non-exact cast would have the same outcome.
If this happens, we produce better diagnostics below by diagnosing this here rather than trying to peel apart the failed conversion to function type.
If this is a var in the top-level of script/repl source file, wrap the PatternBindingDecl in a TopLevelCodeDecl, since it represents executable code.
If this is an initialization or a normal assignment, upgrade the store to an initialization or assign in the uses list so that clients know about it.
If this is the first, and we're using MixedArray, we need to pre-allocate space in the array to ensure the elements dont move during unserialization.
In a heuristic effort to reduce the number of weird-sized fields, whenever we see a bitfield starting on a 32-bit boundary, start a new storage unit.
In addition to a base pointer like the operations agove, these may take a pointer to MInstrState::tvRef, which they may store to (but not read from).
In practice, we expect to rarely see LdCtx instructions inside of an inlined function---normally the actual context object should be copy propagated.
In that case, we just continue emitting code as if we were still in the true case, and we're unreachable iff the end of the true case is unreachable.
Initializers must take 'self' at +1, since they will return it back / at +1, and may chain onto Objective-C initializers that replace the / instance.
Interned strings are not duplicated when stored in HashTable, but all the interned strings created during HTTP request are removed at end of request.
It is a somewhat common error to try to access an instance method as a curried member on the type, instead of using an instance, e.g. the user wrote:
Locations that refer to ranges of the eval stack or multiple frame locals are expanded into individual locations only if smaller than this threshold.
Normally we'd just use the consumption of the source because the difference between TakeOnSuccess and TakeAlways doesn't matter for irrefutable rows.
Note that on 80x86 machines, the pointer row is in near memory but the actual arrays are in far memory (same arrangement as we use for image arrays).
Note that the instructions with popConds are relying on the consumer of the values they push to check whether lifetime changes can have side-effects.
Note: the tvUnboxIfNeeded comes *after* the setop on purpose here, even though it comes before the IncDecOp in the analogous situation in incDecProp.
Now that the block has been inserted into the function, create PHI nodes in the backedge block which correspond to any PHI nodes in the header block.
Now that we have the candidate list, figure out what the best matches from the candidate list are, and remove all the ones that aren't at that level.
On the other hand, if this unit was just created by parsing a php file (or whatnot) which was not committed to the repo, we'll have a m_sourceLocTab.
One rule this pass relies on is that it is illegal to DecRef an object in a way that takes its refcount to zero, and then IncRef it again after that.
Permission granted to use, copy, modify, distribute and sell so long as the above copyright and this permission statement are retained in all copies.
Read generic params before reading the type, because the type may reference generic parameters, and we want them to have a dummy DeclContext for now.
Scan all of the uses of the AllocStack and check if it is not used for anything other than the init_existential_addr/open_existential_addr container.
Since `other' is an inactive Vreg interval, it cannot cover current's start, and `current' cannot cover other's start, since `other' started earlier.
That data structure tracks the first position at which a register is /unavailable/, so it would appear that constrain()'s return value is off-by-one.
The heuristic is that double-quoting is unnecessary unless the string contains an apostrophe, a comma, or backslash (other than backslash-backslash).
The leftmost of imeth's contiguous trailing optional parameters must start somewhere to the right of this parameter (which may be the variadic param)
The liveOut state is the union of liveIn states of each normal successor, and liveOutExn is the union of liveIn states of each exceptional successor.
The normal Unit m_lineTable is capable of producing enough line number information for things needed in production modes (backtraces, warnings, etc).
They are implemented afterwards in order to guarantee that the desired vasm is already defined or else it'll fallback to the templated emit function.
This destructor is called, for example, in the course of deleting the CallbackMap s_system_ini_callbacks, which happens after the end of the request.
This doesn't work with symlinks with alternate names, but we can't detect 'swift' vs 'swiftc' if we try and resolve using the actual executable path.
This encapsulates the intermediate data structures used during the allocation phase of the algorithm so we don't have to pass them around everywhere.
This is a hack to ensure we always consider the protocol requirement itself when calling something that has a default implementation in an extension.
This isn't strictly necessary (the rest of the logic will work fine without it), but fail fast if it looks like we don't have any debug info enabled.
This utility is meant to help simplify the extraction of test cases from sil files by removing (currently only) functions that do not match a string.
To improve the visual quality of the results, we actually work in scaled RGB space, giving G distances more weight than R, and R in turn more than B.
We copy declAttrs into propAttrs for each loop iteration so that we can safely add AttrDeepInit to propAttrs without mutating the original declAttrs.
We don't need to worry about non-opaque patterns because the type-checker forbids non-thick function types from having generic parameters or results.
We don't want to end up emitting the type metadata for Int by chasing through N layers of metadata just because that path happens to be in the cache.
We take over recursive walking of assignment expressions in order to walk the destination and source expressions in different member access contexts.
When an instruction reads from memory in an unknown way, the BBWriteSet /    bit is cleared if the instruction can read the corresponding LSLocation.
XDebugServer::breakpoint will send the response for the command before the break command, but we first need to send a response for the break command.
true is equal to any non-zero integer, so to preserve php's switch semantics we have to remember the first non-zero case to appear in the source text
- For each direct subclass, a dedicated checked_cast_br instruction is generated to check if a dynamic class of the instance is exactly this subclass.
/ To form the actual relative reference, you must pass the returned / result to emitRelativeReference, passing the correct base-address / information.
And in general, accesses to memory must maintain this invariant when they are done outside of small regions that may temporarily break that invariant.
As a hack to avoid completely redoing how the module is indexed, we take the simple-name-based lookup then filter by the compound name if we have one.
As include() and require() support streams, we sometimes need to look up a wrapper outside of a request - eg in HPHP::lookupUnit when using StatCache.
Attempt to specialize each apply we collected, deleting any that we do specialize (along with other instructions we clone in the process of doing so).
Certain compilers (usually Clang) will emit debug information for template instantiations, but fail to emit information about the template parameters.
DeadFunctionElimination pass takes functions / reachable via vtables and witness_tables into account / when computing a function liveness information.
Emit the fixes computed as part of the solution, returning true if we were / able to emit an error message, or false if none of the fixits worked out.
Even if we diagnose, we go ahead and form an identifier token, in part to ensure that the basic behavior of the lexer is independent of language mode.
FIXME: This is a hack to work around our inability to handle multiple levels of substitution through inherited conformances elsewhere in the compiler.
FIXME: We need to check whether anything is specialized, because the innermost extended type might itself be a non-generic type within a generic type.
First pass, identify the easy(common) case of modules with no dependencies and put that at the front of the list defer all other for slower resolution
For a reference to an overloaded declaration, we create a type variable that will be bound to different types depending on which overload is selected.
For a reference to an overloaded declaration, we create a type variable that will be equal to different types depending on which overload is selected.
HNI conversions implicitly unbox references, this behavior is wrong, in particular it breaks the way type conversion works for PHP 7 scalar type hints
If an instruction can be handled here, then it must also be handled in isIdenticalTo, otherwise looking up a key in the map with fail to match itself.
If the final emitted function does not have a self param or it does have a self param that is consumed, convert what we think is self to be plus zero.
If the two declarations are in different source files, and one of those source files is the source file we're biasing toward, prefer that declaration.
If we find any autogenerated copies to/from an alloc_stack, then / remove the alloc stack in favor of loading/storing to the inout pointer / directly.
If we're already validating the type declaration's generic signature, avoid a potential infinite loop by not re-validating the generic parameter list.
If we're in a nested inlined call and we just eliminated a DefInlineFP we can eliminate it from the use map which may allow us to optimize its parent.
If we're not emitting into memory (which happens both because the type is address only or because we have a contextual memory location to initialize).
In practice, trying to use their recommended scratch registers results in a SEGV inside _Unwind_SetGR, so we pass things to the handler using the RDS.
Instead we run an extra iteration of the ARC optimizer with / this enabled in a side table so the information gets propagated everywhere in / the CFG.
It looks strange at the first glance, but this / is OK, because this function is invoked only internally when processing / tuple_extract instructions.
Its important to distinguish the actions that are inherent to a type (embodied in the Action class), with the actions assigned inside an indexed type.
NB: the order we convert to strings is observable (because of __toString methods), and the order we run DecRefs of the input cells is also observable.
Note slight error in 16-bit case:  up to 256 16-bit shades may get mapped to a single 8-bit shade, and only one of them is supposed to be transparent.
One note about StaticLoc: we're literally always going to generate a fallthrough trace here that is cold (the code that initializes the static local).
Other smashable control flow instructions are three instructions plus inline 64-bit data, so it needs to be one instruction off from 8-byte alignment.
Otherwise, the extension method might be favored if we're inside an extension context, since any archetypes in the parameter list could match exactly.
Since resolve() takes a Class::Const and no other fields of the Const can change, just copy cns and give the copy our local version of the ArrayData*.
The / ObjC runtime requires protocol references to be loaded from an / indirect variable, the address of which is given by / getAddrOfObjCProtocolRef.
The check above enforces an invariant that allows us to always know that m_nextKI is not present in the array, so it is safe to use findForNewInsert()
The two object types have the same linkage and same name, so now examine which linkage that actually is to determine how to check for object equality.
The use of testbim and testlim here is little-endian specific but it's "ok" for now as long as nothing else is read or written using the same pointer.
The verifier is basically all assertions, so don't compile it with NDEBUG to prevent release builds from triggering spurious unused variable warnings.
There is ambiguity with expressions (e.g. "continue x+y") but since the expression after the continue is dead, we don't feel bad eagerly parsing this.
These are stored explicitly for two reasons:  o When inserting phis, we need to see the state on each edge coming to a join point to know what to phi.
This minimum value can be interpreted as a minimum value of the actual integer in memory at each point, if the program were not modified by this pass.
To apply the bridged optimizations, we should ensure that types are not existential, and that one of the types is a class and another one is a struct.
We can't just put the address of iter_next_cold in the table below right now because we need to get a nullptr into the third argument register for it.
We set m_shutdown here because if the transport reenters and attempts to write we will put the socket in a very bad state and fail all in flight data.
readEOF will call shutdown() which may free this out from under us, we could add a DestructorGuard, but we'd only end up calling shutdown() ourselves.
when we set a new stack we need to reset the frame position if we go from regular to async or vice-versa since the lengths aren't necessairly the same
'guard' statements fall through if all of the guard conditions are true, so we refine the range after the require until the end of the enclosing block.
(E.g. it unconditionally throws, or is an abstract function body.)  In this case, we leave the return type as TBottom, to indicate the same to callers.
- block, which match the Apple blocks extension: a ref-counted pointer to a mostly-opaque structure with the function pointer stored at a fixed offset.
/ / This returns the base subexpression that looks immutable (or that can't be / analyzed any further) along with a decl extracted from it if we could.
/ / This routine handles the two-step literal conversion process used / by integer, float, character, extended grapheme cluster, and string / literals.
/ / To do this, when the algorithm reaches the beginning of the basic block in / the loop it will need to invalidate the location in the BBWriteSetMid.
/ Class existentials can be represented directly as an aggregation / of a refcounted pointer plus witness tables instead of using an indirect / buffer.
/ If you are making one of these objects to address issue 1, call / the constructor that only takes a DeclKind, and it will be moved / unconditionally.
After assigning current properties' indexes, we will use these negative indexes to assign new indexes to parent properties that haven't been overlayed.
All of its methods must be usable from a separate / thread and so shouldn't touch anything outside of the EditLine, History, / and member object state.
Allow casting a struct by value when all elements in toType correspond to an element of the same size or larger laid out in the same order in fromType.
Because of the surprise page at the bottom of the stack we lose an additional 256 elements which must be taken into account when checking for overflow.
Classes known to be implemented in Swift can be assumed not to have tagged pointer representations, so we can use spare bits for enum layout with them.
Copy the original arguments of the partial_apply into newly created temporaries and use these temporaries instead of the original arguments afterwards.
Emit an ExitPlaceholder at the beginning of the block if any of the optimizations that can benefit from it are enabled, and only if we're not inlining.
FIXME: If this is a submodule, get its top-level module, which will be the DeclContext for all of its Decls since we don't have first-class submodules.
Given an operand of a direct apply or partial_apply of a function, / return the parameter used in the body of the function to represent / this operand.
Here we add all uses of I to the worklist, replace all uses of I with the new value, then return I, so that the combiner will know that I was modified.
If "name" is one of the standard library types used to map in Clang / primitives and basic types, print out the appropriate spelling and / return true.
If an object type is marked pointer followable, all its bases must be as well (because a pointer to a base could be pointing towards this object type).
If it is initialized on some paths, but not others, then we have an inconsistent initialization, which needs dynamic control logic in the general case.
If on entry, you have completely disabled a node via taskset, the node will not be available, and calling numa_run_on_node will not work for that node.
If the epilog has a single predecessor and there's no current insertion point to fall through from, then we can weld the epilog to that predecessor BB.
If the successor region is an unknown control flow edge head, the dataflow that leaves the region bottom up is considered to be undefined in our model.
If the user is extracting a trivial field of an aggregate structure that does not overlap with the ref counted part of the aggregate, we can ignore it.
If there is no current file, print the desired range of eval code or give an error message if the debugger is not currently performing an eval command.
If this is an address-only case, get the address of the buffer we want the result in, then cast the address of it to the right type, then emit into it.
If this isn't a "scan-only" indexed type (which can't be pointer followable), and the type was previously un-interesting, make this pointer followable.
If we have a nominal type decl as our base, try to emit the base rvalue's member using special logic that will let us avoid extra retains and releases.
In that case, we just continue emitting code as if we were still in the false case, and we're unreachable iff the end of the false case is unreachable.
In the last case, the AST has this call typed as being applied to an rvalue, but the witness is actually expecting a pointer to the +0 value in memory.
Inlining self-recursive functions into other functions can result in excessive code duplication since we run the inliner multiple times in our pipeline
Look for 'typealias' here and diagnose a fixit because parseDeclTypeAlias can ask us to fix up leftover Swift 2 code intending to be an associatedtype.
Note that unserialize can run arbitrary php code via a __wakeup routine, which could try to access this same key, and we're holding various locks here.
Note: we must handle the string-related cases before doing the general handleBaseElemD, since operates on strings as if this was an intermediate ElemD.
Objective-C protocols may have the suffix "Protocol" appended if the non-suffixed name would conflict with another entity in the same top-level module.
One final note: because of the exclusivity rule on lower bounds, we cannot assume a lower bound of one for a LdCtx unless it comes from the main frame.
Opts.RuntimeImportPath is set by calls to setRuntimeIncludePath() or setMainExecutablePath() and  updated by calls to setTargetTriple() or parseArgs().
Pre-live frames are slightly different from other pure stores, because eventually they may become live frames even within our region (via DefInlineFP).
Recall that we can in general have more memory support locations for one aset than the tracked lower bound---this is one situation that can cause that.
Run another iteration of the SSA optimizations to optimize the devirtualized inline caches and constants propagated into closures (CapturePropagation).
TODO: Could look through arbitrary implicit conversions that don't have side effects, or through tuple shuffles, by emitting ignored default arguments.
The initial state of this live set depends on whether we are performing global or local DCE, and in the local case includes all locals in the function.
The vmJitCalledFrame() check below is only important if we might throw before returning to the TC, which is guaranteed to not happen in this situation.
Therefore, such borrowings must be "unforwarded" / during the emission of such jumps by disabling the new cleanups / and re-enabling the outer cleanup.
This is a separate step, because this merge can cause changes to other may-alias sets at each stage (it may pessimize all the sets in some situations).
This is why, for example, shuffling a TupleExpr creates a TupleShuffleExpr instead of just making a new TupleExpr with the elements in different order.
This token starts before the edited range, but doesn't end before it, we need to adjust edited line range and clear the affected syntax map line range.
To disambiguate other cases of "identifier :", which might be part of a question colon expression or something else, we look ahead to the second token.
Treat StoredWithTrivialAccessors the same as Stored unless we're printing for SIL, in which case we want to distinguish it from a pure stored property.
Used during enum raw value checking to identify the source of a raw value, / which may have been derived by auto-incrementing, for diagnostic purposes.
We cannot just serialize a declaration to a shared_external function since shared_external functions still have linkonce_odr linkage at the LLVM level.
We have to do getAddrOfObjCClass ourselves here because the ObjC runtime base needs to be ObjC-mangled but isn't actually imported from a clang module.
We need to fix up the main trace-- if a function can reenter we need to be sure that we've adjusted its BC marker so that it doesn't stomp on the stack
We require the memory stack is always at least as big as the irSPOff, unless irSPOff went negative (because we're returning and have freed the ActRec).
hphplex_init is special because it creates the scanner itself, so it is the ONLY reentrant function that doesn't take the scanner as the last argument.
libiconv sometimes defines the second parameter of its main function as (char**), and sometimes as (const char**) but provides no means to detect this.
mongo_options are the same options as the connection_string, while driver_options is additional PHP MongoDB options, like stream context and callbacks.
tryToRemoveDeadAllocation - If the allocation is an autogenerated allocation / that is only stored to (after load promotion) then remove it completely.
/ / However, we actually can't reabstract arbitrary thin function / values while still leaving them thin, at least without costly / page-mapping tricks.
/ / The set of active cleanups should always be instantaneously / consistent: that is, there should always be exactly one cleanup / tracking a +1 value.
/ / This is interesting because in such cases, we must pessimistically assume / that we are merging in the empty set from Succ into Pred or vis-a-versa.
/ If a buffer is allocated on the stack it's not needed to explicitly set / the RC_DEALLOCATING_FLAG flag (except there is code which may depend on it).
@transparent is always ok on implicitly generated accessors: they can be dispatched (even in classes) when the references are within the class themself.
Again since we only deal with iterators, the intersection must be iterator information, and we know it only intersects if they are the same iterator id.
Array bounds check analysis finds array bounds checks that are safe to / eliminate if there exists an earlier bounds check that covers the same / index.
Casts to or from generic types can't be statically constrained in most cases, because there may be protocol conformances we don't statically know about.
FIXME: When default implementations come along, we can try to match these when they're default implementations coming from another (unrelated) protocol.
For known strings that are strictly integers, we'll set both the known integer and string keys, so generally the int case should be checked first below.
For namespaced collections, returns an "alternate" name, which is a collection name with or without the namespace qualifier, depending on what's passed.
If it is not an exact match, it may mean that all of the superclasses do not have this conformance, but the actual type may still have this conformance.
If someone defines a weird __invoke (e.g. as a static method), we don't bother caching it here so the translated code won't have to check for that case.
If the argtype is a tuple type with default arguments, or a labeled tuple with a single element, pull the scalar element type for the subexpression out.
If the candidate set has been narrowed to a single parameter or single / archetype that has argument type errors, diagnose that error and / return true.
If the client is cool with a +0 rvalue, the decl has an address-only type, and there are no conversions, then we can return this as a +0 address RValue.
If the failure callback requested that we stop autoloading for 'class', then return false here so we don't fall through to the PHP5 autoload impl below.
If the rules are changed so that fields aren't necessarily laid out sequentially, the computation of InstanceStart in the RO-data will need to be fixed.
If the static property "slaveOkay" is set, we need to switch to a MONGO_RP_SECONDARY_PREFERRED as well, but only if read preferences aren't already set.
If we have a foreign-error convention that strips result optionality, we need to wrap both the original and substituted types in a level of optionality.
If we're already processing an interrupt, enable signal polling around the execution of the new PHP to ensure that we can handle signals while doing so.
If we're currently looking at a .sil and the conflicting declaration comes from a .sib, don't error since we won't be considering the sil from the .sib.
If we're doing a multi-dimensional set, this will point at the m_data.parr inside of a RefData sometimes (via toArrRef on the variants in gpc_elements).
If we're optimizing a repo that was already created by hphpc, it won't have the full SourceLocTable information in it, so we're limited to line numbers.
In combination with a table size that is a power of 2, this guarantees a probe sequence of length tableSize that probes all table elements exactly once.
In these instances it's possible that no ActRec was pushed for the builtin call, in which case the liveFunc() will be the caller rather than the callee.
Instead of proceeding to "dec-4" after it applies, it moves back to reprocess at "inc-3", which lets the rule apply again to remove "inc-3" and "dec-4".
It is a little bit of a hack to use an AFDT request/response to shut down our accept socket, but it has to be done from within the main libevent thread.
Note resolve_phis can add blocks, which can cause a resize of env.blockInfo---don't reuse pointers/references to any block state structures across here.
Note: if you try to tail-call these helper routines, gcc will unfortunately still generate functions with frames and and makes a call instead of a jump.
Numeric strings will complicate matters because the loose comparisons done with array keys are not quite the same as loose comparisons done by in_array.
Otherwise, this word starts with an uppercase letter if the next word is alphabetic (URL_Loader) or after the last uppercase letter if it's not (UTF_8).
Permit '()' when this method overrides a method with a foreign error convention that replaces NSErrorPointer with () and this is the replaced parameter.
Rather than work through the various cases here, though, we've just decided to just play it safe and mark all the names involved as redeclaring for now.
Simplify expressions which are type sugar productions that got parsed / as expressions due to the parser not knowing which identifiers are / type names.
Strip any upcasts off of our 'self' value, potentially leaving us with a value whose type is closer (in the class hierarchy) to the actual dynamic type.
TODO: Since we expect a pattern in this position, we should optimistically parse pattern nodes for productions shared by pattern and expression grammar.
Technically we shouldn't have to eval the unit right now (it'll execute the pseudo-main, which should be empty) and could get away with just mergeFuncs.
The top-level DIEs correspond to compilation-units, and all the children of these top-level DIEs correspond to the information in that compilation-unit.
The underlying library may return zero length null ptr's to indicate an empty string (since the isNull check above would tell if it were actually NULL).
The upcast from the concrete type to an existential type for the protocol requires packaging the payload together with type metadata and witness tables.
There are quicker ways to do this conversion, but it's necessary to follow this to match the functionality of fbcode/multifeed/text/TokenizeTextMap.cpp.
This definition is needed to avoid triggering a gcc compiler error about an overloaded virtual when only overriding the one parameter version from File.
This happens in foreach silgen (see rdar://15532779) and needs to be resolved someday, either by changing silgen or by teaching DI about destroy events.
This method is the master for selecting the correct algorithm for the order of servers in which to try the candidate servers that we've previously found
This must be consistent with the extra inhabitant calculation implemented in the runtime's storeHeapObjectExtraInhabitant function in KnownMetadata.cpp.
Visit each retain/release that is matched up to our operand over and over / again until we converge by not adding any more to the set which we can move.
We can get a more precise output type for interpOne if we know all of its inputs, so we still populate the rest of the instruction even if this is true.
We need both the class to match any object that this function may have been invoked on, and we need the class from the function execution is stopped in.
We want to track if the generic context is represented by a class-bound existential so we won't inappropriately wrap the self type in an inout later on.
We will dedupe with last-one-wins semantics by walking backwards and including only those whose dedupe key we have not seen yet, then reversing the list
When checking if a key is present in the Set, any key that is not an integer or string is cast to a string, and we convert int-like strings to integers.
When set a condition into a Conditional Statement, inform each of the variables bound in any patterns that this is the owning statement for the pattern.
Work around a bug in webscalesql where setting a read or write timeout causes most mysql connections to fail (depending on the exact timing of packets).
lookupImmutableMethod will return Funcs from AttrUnique classes, but in this case, we have an object, so there's no need to check that the class exists.
note: diagOpt has references to this If we had any wrong labels, or we have both missing and extra labels, emit the catch-all "wrong labels" diagnostic.
"Deinitialize" an existential container whose contained value is allocated / but uninitialized, by deallocating the buffer owned by the container if any.
/   - Metatype names cannot generally be used as values: they need a "T.self" /     qualification unless used in narrow case (e.g. T() for construction).
/ / 'Safe' array operations are: /   * all array semantic functions /   * stores to array elements /   * any instruction that does not have side effects.
Add ".0" to a float that (a) is not in scientific notation, (b) does not already have a fractional part, (c) is not infinite, and (d) is not a NaN value.
After promoting unchecked_ref_cast_addr to unchecked_ref_cast, the SIL verifier will assert that the loadable source and dest type of reference castable.
All fpass instructions spill the stack after they execute, because we are sure to need that value in memory, regardless of whether we side-exit or throw.
As such, we have no choice but to map functions like strtod_l, which should respect the given locale_t parameter, to functions like strtod, which do not.
Attempting to use better types when not in a situation like this would just make the compiler complacent, leading to a long tail of undiscovered crashes.
Enter the block for a non-note diagnostic immediately, rather than waiting for beginDiagnostic, in case associated notes are emitted before we get there.
Even if we couldn't find a value property, still make up a stub getter and setter, so that subsequent diagnostics make sense for a computed-ish property.
FIXME: This forces us to re-use archetypes from outer scopes as concrete types, which is currently important for the layout of the "all archetypes" list.
For classes with non-scalar initializers, the 86pinit and 86sinit methods are guaranteed to run before any other method, and are never called afterwards.
For request-local allocation, we make a fast path to handle cases where no CapCode encoding is needed and the corresponding size class is fully utilized.
Generate a category if the extension either introduces a conformance to an ObjC protocol or introduces a method that requires an Objective-C entry point.
However, we limit the effectivness of this during parse to ensure that we eliminate only very simple scalars that don't require analysis in later phases.
If an exception is throwing, regstate for this call is actually still correct, and we don't have information in the fixup map for interpOne calls anyway.
If compared against an object, first do a collection check on the object, and then emit an object-string comparison (swapping the order of the operands).
If the member is dynamic, reference its dynamic dispatch thunk so that it will be redispatched, funneling the method call through the runtime hook point.
If the memory object has multiple tuple elements, we need to destroy any live subelements, since they can each be in a different state of initialization.
If we have a terminator that we cannot sink through or the cfg will not let us sink into our predecessors, just move the increment before the terminator.
If we have an identifier after this, which is not the start of another stmt or decl, we assume it is the label to break to, unless there is a line break.
If we need to handle throwing cleanups, the correct thing to do here is to recreate the exception's cleanup when emitting each cleanup we branch through.
If we try to have a common implementation, we're left with the problem of describing the layout of a node when that's technically instantiation-specific.
In a trait, a potentially rebound closure or psuedo-main, we can't resolve self:: or parent:: yet, so we emit special instructions that do those lookups.
In order to make sure we have a deterministic ordering when we visiting exiting subregions, we need to sort our exiting regions by ID, not pointer value.
Introducing a notion of a LSValue that is used to model the value / that currently resides in the associated LSLocation on the particular / program path.
It also runs the simplify() subroutine on every instruction in the unit, and can eliminate some conditional branches that test types of memory locations.
Look through one layer of optionality when considering the class- Referring to a class-constrained generic or metatype doesn't require its type metadata.
Lower the immediate to a register in order to use ppc64 instructions that can change required Condition Register (on vasm world, that's the SF register).
MSIE doesn't delete a cookie when you set it to a null value so in order to force cookies to be deleted, even on MSIE, we pick an expiry date in the past
Modifies passed url based on the location header that was received in the response headers, depending on whether the redirection was relative or absolute
Note that we do this after the accessors are set up, because we don't want the setter for the lazy property to inherit these properties from the storage.
Note: currently we're limiting all represented types to predefined bit patterns (instead of arbitrary unions), so this function is around for assertions.
Now propagate liveness backwards from each instruction in our worklist, adding new instructions to the worklist as we discover more that we need to keep.
Ok, we now know that the type of Base and the type represented by the base of this projection match and that this projection can be represented as value.
Otherwise, ask the transition state if this instruction causes a transition that can be matched with the transition in order to eliminate the transition.
Similar to class_alias, when a type alias is declared with the same name as a class in the program, we need to make sure the class is marked redeclaring.
Since it's unlikely (but not impossible) to have zero generic parameters at a depth, encode indexes starting from 1, and use a special mangling for zero.
Since removing this functionality could cause a lot of functionality to break, instead we continue to allow access case-insensitively, but with a warning
Since these deltas potentially include memory allocated from another thread but deallocated on this one, it is possible for these nubmers to go negative.
TODO: redesign from a SmallString to a StringScratchBuffer design for all of this name mangling, since we have to use one for omit needless words anyways
The "returns inner pointer" convention doesn't survive through a partial application, since the thunk takes responsibility for lifetime-extending 'self'.
The debugger will execute any logic needed to handle the event, and will block below this to wait for and process more commands from the debugger client.
The most common case here is to parse something that was a lexically obvious pattern, which will come back wrapped in an immediate UnresolvedPatternExpr.
The names "Apache Server" and "Apache Group" must not be used to endorse or promote products derived from this software without prior written permission.
The way the algorithm works, whatever is in here must be factual (even if it is not complete information), because we may deduce other facts based on it.
This may capture any content of the released object, but not the pointer to the object itself (because it will be a dangling pointer after deallocation).
This means the location "owns" a reference in the normal sense---i.e. the count on the object is at least one on account of the pointer in that location.
This version does not attempt to produce an output file with transparency in some of the palette indexes, which, in practice, doesn't look so hot anyway.
To avoid doing it more than once for any given join point, this keeps track of what we've added so if it's needed in more than one place we can reuse it.
Track all known array users with the exception of struct_extract users (checkSafeArrayElementUse prohibits struct_extract users from mutating the array).
We allow the use of clases from nullable objects because emitPropSpecialized() explicitly checks for null (when needed) before doing the property access.
We are storing the rdSrc value into the static, but we don't need to inc ref it because it's a bytecode invariant that it's not a reference counted type.
We must do this before we do anything, because it can throw, and we can't start tearing down the AFWH before that or the unwinder won't be able to react.
We must use an "unsafe" mutex in this pathway since the normal "safe" mutex calls fatalError when an error is detected and fatalError ends up calling us.
What this handles is recording the evaluation stack state at instruction boundaries so that jumps know what their stack state will be at the destination.
o If we were going to free the ExtraArgs structure, we'd need to make sure we can re-enter the VM right now, which means performing a manual fixup first.
o In some situations, executing an instruction that could decref pointers that live in memory, for example by re-entering and running arbitrary php code.
A utility array to add new Nodes to the list so we maintain while processing the current worklist we maintain only completed items at the end of the list.
An alarm may be set in http-server.cpp to kill this process after ServerPreShutdownWait + ServerShutdownListenWait + ServerGracefulShutdownWait seconds 1.
An observing property backed by its own storage (i.e. which doesn't override anything) has a trivial getter implementation, but its setter is interesting.
Anonymous enumerations simply get mapped to constants of the underlying type of the enum, because there is no way to conjure up a name for the Swift type.
At -O0, emit a shadow copy of an Address in an alloca, so the / register allocator doesn't elide the dbg.value intrinsic when / register pressure is high.
Currently, we aggressively assume that / pointer-to-address is never used for type punning, which is not yet / clearly specified by our UnsafePointer API.
Delay the destruction of the proxy originally attached to the sandbox to avoid calling a DebuggerProxy destructor (which can sleep) while holding m_mutex.
Even if it does, the miscompile might only occur on the production build, but not on a testing build (such as because of different optimization settings).
FIXME: This is really weird: 1) For generic functions, generic methods and generic local functions, we return the function's generic parameter list twice.
Given that the type-of-rvalue differs from the type-of-storage, / store a +1 value (possibly not a scalar) of the type-of-rvalue / into the given address.
Given the type of an argument, try to determine if it contains / a throwing function in a way that is permitted to cause a / 'rethrows' function to throw.
Handle stores as a special case here: we want to make sure that the object is being stored *to*, not itself being stored (which would be an escape point).
Heuristic: We only want to hoist array.props instructions if we can hoist all of them - only then can we get rid of all the control-flow if we specialize.
If HardReturnTypeHints is false OR if the constraint is soft, then there are no optimizations we can safely do here, so just leave the top of stack as is.
If an event hook throws we need the current bytecode to be after the FCallAwait, otherwise the unwinder will expect to find a PreLive ActRec on the stack.
If format of 2 is specified, then the function will return an associated array where the position of the word is the key and the word itself is the value.
If it's the same image, mapping is NOT trivial since we merge with greyscale target, but if pct is 100, the grey value is not used, so it becomes trivial.
If the enum was not imported, the derived conformance is either from the enum itself or an extension, in which case we will emit the declaration normally.
If the function name passed is already mangled then we assume the user knows exactly what function they want and thus don't try to demangle any functions.
If this is conversion failure due to a return statement with an argument that cannot be coerced to the result type of the function, emit a specific error.
If we are warning about a switch condition being a constant, the main emphasis should be on the condition (to ensure we have a single message per switch).
If we don't know of an object type at the given location, assume its referring to something we never parsed in the first place, so return the pseudo-type.
If we have an instruction that may write to memory and we cannot prove that it and its operands cannot alias a load we have visited, invalidate that load.
If we still haven't found a refinement, check if there's a parameter- wise comparison between an empty existential collection and a non- existential type.
If we're capturing an unowned pointer by value, we will have just loaded it into a normal retained class pointer, but we capture it as an unowned pointer.
If yes, the swift_bufferAllocateOnStack is replace with an alloca plus a call to swift_initStackObject and the swift_bufferDeallocateFromStack is removed.
In RepoAuthoritative mode (with the WholeProgram compiler optimizations), the contents of traits are flattened away into the preClasses of "use"r classes.
In the case where the old partial_apply was passed in at +0, we /    know that the old partial_apply does not need to have any ref count /    adjustments.
It may not--for example in the case that `swiftc -target x86_64-unknown-linux-gnu -emit-ir` is invoked using a Swift compiler not built for Linux targets.
It's a hole in this if we don't check unserialization doesn't violate what we've seen, which we handle by throwing if the repo was built with this option.
Note here that a string type stays a string (with a changed character, and loss of staticness), unless it was the empty string, where it becomes an array.
Note however, the slab allocator adds to m_stats.jemallocDebt when it calls malloc(), so that this function can avoid double-counting the malloced memory.
Note that main code may be generated in the cold code range (see emitBlock in code-gen-x64 genCodeImpl()) so we need to explicitly check the aStart value.
Note that the / original value may not belong to the same function as the one being cloned / by cloneBlocks() (they may be from the partial apply caller).
Note that while this pass may insert multiple DefInlineFP instructions for a particular inlined region it will never insert new InlineReturn instructions.
Only generate the optimized version if the argument passed in is a static string with a constant literal value so we can get the string value at JIT time.
Otherwise if it is the requirement we are looking for or we just want to deserialize everything, add the function to the list of functions to deserialize.
Removes redundant check_unowned calls if they check the same reference and / there is no instruction in between which could decrement the reference count.
Run backwards through an array chain doing array_set operations to produce the array type that incorporates the effects of any intermediate defining dims.
The c-style-for loop and foreach-style-for loop are conflated together into a single keyword, so we have to do some lookahead to resolve what is going on.
The constraint solver depends on multiple constraints being present in this case, so it can generate the appropriate lvalue wrapper for the argument type.
The only way to produce an aliasing typed / address is with pointer_to_address (via UnsafePointer) or / unchecked_addr_cast (via Builtin.reinterpretCast).
The programmer has guaranteed that the closure will not capture the self pointer passed to it or anything that is transitively reachable from the pointer.
The stats parameter allows the updates to be applied to either m_stats as in refreshStats() or to a separate MemoryUsageStats struct as in getStatsSafe().
These values can be / propagated to the get_element method if we can prove that the array value / has not changed until reading the array value's element.
This is called when a thread interrupts for either session- or request-started, as these each signal the start of debugging for request and other threads.
Unless we've already done this, retypecheck the specified subexpression on / its own, without including any contextual constraints or parent expr / nodes.
Unlike the canonical Linux implementation, this does not distinguish between whether we wanted real seconds or CPU seconds -- you always get real seconds.
Use a key with non-zero span, because otherwise a key right at the base of a range will be treated as before the range (bad) rather than within it (good).
We do not need to worry about the throw block, as the return value is only going to be used in the return block/normal block of the try_apply instruction.
We don't need to set the in state on the new edge-splitting block, because it isn't in our env.rpoBlocks, so we don't ever visit it for the optimize pass.
We run this before any other passes because it allows code-gen to create things like self-copies or self-lea's without affect on optimizations downstream.
When checking if a key is present in the Set, any value that is not an integer or string is cast to a string, and we convert int-like strings to integers.
When the requirement is an IUO, all is permitted, because we assume that the user knows more about the signature than we have information in the protocol.
When we call builtin functions, we need to make sure that we don't change the return value of VRefParam::isReferenced on any possibly-KindOfRef arguments.
call setCached after adding to the class list, otherwise the target-cache short circuit at the top could return a class which is not yet on the clsList().
cppext functions/methods have their own logic for raising warnings for missing arguments, so we only need to do this work for non-cppext functions/methods
downscaling using the fixed point implementations are usually much faster than the existing gdImageCopyResampled while having a similar or better quality.
simplifySwitchValueBlock - Simplify a basic block that ends with a / switch_value instruction that gets its operand from an integer / literal instruction.
(E.g. MM().freeSmallSize() or MM().freeBigSize().)  When small blocks are freed (case b and c), they're placed in the appropriate size-segregated freelist.
3) If the enum has a single payload case and one or more no-payload cases, we attempt to map the no-payload cases to extra inhabitants of the payload type.
Adding the rpaths might negatively interact when other rpaths are involved, so we should make sure we add the rpaths last, after all user-specified rpaths.
An abstract enum value consists of a payload portion, sized to hold the largest possible payload value, and zero or more tag bits, to select between cases.
Because of this we cannot add the stack positions within the inline function to the kill set here as they may be live having been stored on the main trace.
Compute the scope between two potentially-matching names, which is / effectively the sum of the edit distances between the corresponding / argument labels.
Derived-to-base casts in the AST might not be reflected as such in the SIL type system, for example, a cast from DynamicSelf directly to its own Self type.
Even if the call has the destroys_locals flag this is the case---after it destroys the locals the new value will have a fully synchronized reference count.
F and G are optimized compared to their RFC 1321 definitions for architectures that lack an AND-NOT instruction, just like in Colin Plumb's implementation.
FIXME: This is a hack to ensure that inherited conformances are always "single step", which is bad for resilience but is assumed elsewhere in the compiler.
Following this call, BreakPointInfo::breakable will return false until a subsequent call to BreakPointInfo::setBreakable with a lower or equal stack level.
Here we want to pre-compute the transfer function for each block, so we don't need to visit each instruction repeatedly during the fixed point computation.
However, this can easily lead to loss of / opportunities, e.g. a read that only kills part of a store may need to be / treated as killing the entire store.
I am purposely restricting this to array semantic functions that we know are well behaved (i.e. the ref counts are the same on both sides of the callsite).
If one type does not have an error result, we can still trivially cast (casting away an error result is only safe if the function never throws, of course).
If the location has a single type-source instruction, pass it along to preOptimizeAssertTypeOp(), which may be able to use it to optimize away the Assert*.
If the metatype's instance type does not contain any type parameters, substitution does not alter anything, and the empty representation can still be used.
If the types on either side of a cast do not have / equivalent reference counting semantics, then the source and destination / values are not RC identical.
If there's also an existing GOT-equivalent entry, rewrite it too, since LLVM won't recognize a global with bitcasts in its initializers as GOT- equivalent.
If there's no message, but this is specifically an imported "unavailable in Swift" attribute, synthesize a message to look good in the generated interface.
If we tried to include the function body along with a DV init, but didn't end up generating any DV init, then flag that the function body was not included.
It replaces an indirect class_method-based call by a code to perform a direct call of the method implementation based on the dynamic class of the instance.
It's length from the segment is the shorter of the lengths from the endpoints, but call the distance -1, so as not to compute the alpha nor draw the pixel.
It's ok not to make a new definition of this tmp, because the code running simplify is going to have to track unreachable blocks and avoid looking at them.
Keep track of blocks where the contents of the self box are not valid / because we're in an error path dominated by a self.init or super.init / delegation.
NOTE: PHP's implementation of natsort and natcasesort accepts ArrayAccess objects as well, which does not make much sense, and which is not supported here.
Note that the IncRef must happen first, for correctness in a pseudo-main: the destructor could decref the value again after we've stored it into the local.
Otherwise, use the default inlining setting on the theory that forcing inlining off should only effect the user's function, not otherwise invisible thunks.
Products derived from this software may not be called "Apache" nor may "Apache" appear in their names without prior written permission of the Apache Group.
Return the concrete type that the given dependent type is constrained to, / or the null Type if it is not the subject of a concrete same-type / constraint.
Special cases for 'callable': Hack typechecker throws a naming error (unbound name), however, hhvm still supports this type hint to be compatible with php.
The base must have a member of the given name, such that accessing that member through the base returns a value convertible to the type of this expression.
The column with the most pattern nodes prior to a wildcard turns out to be a good and cheap-to-calculate heuristic for generating an optimal decision tree.
The main problem here is when the non-payloaded cases are created / with new enum instructions (which happens when casting sometimes): / /   bb9: /     ...
The module map used for Glibc depends on the target we're compiling for, and is not included in the resource directory with the other implicit module maps.
The ordering has been set up so that indexed types that are identical except for the "scan" field will have the indexed types with scan set to false first.
The reason for this is that nothing is allowed to DecRef the context of a frame, except code that tears down that frame (either via a return or unwinding).
Therefore, if a normal load in this function sees a weak reference count of 1, it cannot be racing with a weak retain that is not racing with deallocation:
This can only be done after binding all the value parameters, and must be done even for non-polymorphic functions because of imported Objective-C generics.
This is different from ignore_all where ignore_all will still process base classes as normal, but whitelisted will not process anything, even base classes.
This means m_savedRip in our ActRec must have been callToExit, which should've been returned by jitReturnPost(), whether or not we were called from the TC.
This might overwrite the hash table, but won't go beyond the space allocated for the MixedArray, assuming `malloc()' always allocates multiple of 16 bytes.
This must be consistent with the extra inhabitant calculation implemented in the runtime's getHeapObjectExtraInhabitantIndex function in KnownMetadata.cpp.
Traversal - This class implements a simple expression/statement / recursive traverser which queries a user-provided walker class / on every node in an AST.
We can just handle potential users normally, since if we handle the user we already saw a decrement implying that we will treat this like a guaranteed use.
We expect SIL_FUNC_NAMES first, then SIL_VTABLE_NAMES, then SIL_GLOBALVAR_NAMES, then SIL_WITNESS_TABLE_NAMES, and finally SIL_DEFAULT_WITNESS_TABLE_NAMES.
We must give TypeStructure::resolve() the same ArrayData* we tested up above, to avoid reading an already-resolved (by another thread) ArrayData* from cns.
We must make sure the value stored at the handle is correct before setting m_sPropCacheInit in case another thread tries to read it at just the wrong time.
We use an assert boolean return here since in release builds we want to conservatively return false and in debug builds assert since this is a logic error.
We're not calling statically, so this result is unhelpful Also, it's never produced by lookupObjMethod, so it'll never happen, but we must handle all enums
(We have to skip discardStackTemps in this case because it will look for FPI regions and assume the stack offsets correspond to what the FPI table expects.)
/ / For example, given an explosion which begins with the / representation of an (Int, Float), consume that and produce the / representation of an (Int, T).
A common error is to try to define an operator with something in the unicode plane considered to be an operator, or to try to define an operator like "not".
After the candidate list is formed, it can be filtered down to discard / obviously mismatching candidates and compute a "closeness" for the / resultant set.
All jobs which have been scheduled for execution (whether or not / they've finished execution), or which have been determined that they / don't need to run.
Assumptions: AI substitutions contain first the substitutions for a class of the method being invoked and then the substitutions for a method being invoked.
Conveniently however, get/set properties are not allowed to have initializers, so we don't have an ambiguity, we just have to check for observing accessors.
FIXME: Until we link everything in up front we need to ensure that we link after devirtualizing in order to pull in everything we reference from the stdlib.
Generally, we set the "InStructSubElement" flag and recursively process the uses so that we know that we're looking at something within the current element.
Getting this wrong will cause subtle breakage -- in particular, it probably will not show up in CLI mode, since everything there tends to be single theaded.
Helper to produce a dummy value that can stand in for a global constant / for us to build relative references against before the constant is / instantiated.
However, we do need to make sure that the cleanup state gets restored later, because being final on this path isn't the same as being final along all paths.
If check and dest were the same, we would have replaced the check instead of creating a new one, so we only want to add a Halt block if that's not the case.
If our DFS number is the minimum found, we've found a (potentially singleton) SCC, so pop the nodes off the stack and push the new SCC on our stack of SCCs.
If so, pop its frame, wrap the exception into failed StaticWaitHandle object, leave it on the stack as a return value from the async function and resume VM.
If the argument is a type variable created for a literal that has a default type, this is a favored param/arg pair if the parameter is of that default type.
If the version range for the current TRC is completely contained in the range for the spec, then a version query can never be false, so the spec is useless.
If this is a conditional cast, the result type will always have at least one level of optional, which should become the type of the checked-cast expression.
If we have an identifier after this, which is not the start of another stmt or decl, we assume it is the label to continue to, unless there is a line break.
If we're going to code currently believed to be unreachable, take the src state, and consider the dest state changed only if the source state was reachable.
If you're inheriting a constant with the same name as an existing one, they must originate from the same place, unless the constant was defined as abstract.
In the case of us having applied a type member constraint against a synthesized type variable during diagnostic generation, we may not have a valid locator.
It is tempting to try to free the ExtraArgs structure here, but it's ok to not to:  o We're about to raise an uncatchable fatal, which will end the request.
It's conceptually the same as if it was storing an Uninit over each of the locals, but the stores of uninits would be dead so we're not actually doing that.
Multiple threads might create and store the resolved type structure here, but that's fine since they'll all store the same thing thanks to GetScalarArray().
One additional check: 'let' properties may never be passed inout, because they are only allowed to have their initial value set, not a subsequent overwrite.
Precompute some information from the post-dominator tree to aid us in determining control dependence without generating a complete control dependence graph.
Since nested generic functions are not supported yet, the only case where generic parameters can be captured is by closures and non-generic local functions.
Since the length of a metonic cycle is a constant, this is a simple calculation, except that it requires an intermediate value which is bigger that 32 bits.
Since we do not / look through enums or classes, in the current type system it should not be / possible to have a cycle implying that a RPOT should be fine.
Since we'll either stop when we get out of whatever is driving this resumable, or we'll stop when we get back into it, we know the object will remain alive.
TODO: If BB has only one predecessor and has bb args, fold them away, then use instsimplify on all the users of those values - even ones outside that block.
TODO: If it is a private type or internal type and we can prove that there are no derived types conforming to a protocol, then we can still return WillFail.
The class' instance property initialization template is in different places, depending on whether it has any request-dependent initializers (i.e. constants)
Things that maybe we should collect from the command line: - relocation model - code model FIXME: We should do this entirely through Clang, for consistency.
This function returns an array containing two keys "file" and "line" which indicate the the filename and line number where the "caller" called the "callee".
This is somewhat inefficient but the only way to find the corresponding name without the index, and the number of parameters in a call is normally very low.
This isn't correct for all blocks, but block storage type should only be converted for function signature lowering, where the parameter types do not matter.
This logic feels like it belongs in the simplifier, but the generated code for this case is pretty different, since we don't need the pre-live ActRec trick.
Try to classify a conversion from non-existential type / into an existential type by performing a static check / of protocol conformances if it is possible.
We consider it safe to take `pageFreeFactor` percent of cached pages (excluding those used by the current process, estimated to be equal to the current RSS)
We get the Fix-It location from the PatternBindingDecl unless the VarDecl has attributes, in which case we get the start location of the VarDecl attributes.
We treat "unowned" as "assign" (even though it's more like "safe_unretained") because we want people to think twice about allowing that object to disappear.
We use the class name in this case to ensure that the ordering is dependent only on the source program (Class* or something like that seems less desirable).
We will want to support these eventually, but we haven't figured out how this will interact with Definite Initialization, deinitializers and resilience yet.
We'd infer this anyway when we look at the bytecode body (NativeImpl) for the HNI function, but just initializing it here saves on whole-program iterations.
When checking if a value is present in the Set, any value that is not an integer or string is cast to a string, and we convert int-like strings to integers.
XXX: VM process initialization is handled through a function pointer so libhphp_runtime.a can be linked into programs that don't actually initialize the VM.
end anonymous namespace / addElementUses - An operation (e.g. load, store, inout use, etc) on a value / acts on all of the aggregate elements in that value.
https://github.com/facebook/hhvm/issues/2186 If not UTF8, and we are converting to HTML entities, use known entity equivalent of the character, if possible.
only hmac-sha1 is supported at the moment (it is the most common implementation), still need to lay down the ground work for supporting plaintext and others
since we allow null (e.g. nullOkay is true in the call into type-resource), we have to check if the resource data is null before we try to get a connection.
(This push doesn't actually get the value into memory---we're going to put it in the return value for AsyncRetCtrl and let enterTCHelper store it to memory.)
*Now* apply the substitutions and get the type info for the instance's payload type, since we know this case carries an apparent payload in the generic case.
/ 2) The nominal type is a value type with a fixed size from this /    resilience domain, in which case we can reference the constant /    metadata directly.
All the sources to the original instruction must be available, and non-reference counted values reachable through the source chain are also always available.
Attempt to peek at one byte from the stream, checking for: i)  recv() closing gracefully, or ii) recv() failed due to no waiting data on non-blocking socket.
But this is just the dominance condition we wanted: every path through the program to this load must have defined `t1', so its definition dominates the load.
DecRefs on the main line must happen after the potentially-throwing exit above: if we throw during the RaiseWarning, those values must still be on the stack.
Determine whether the given type is a value type to which we can bridge a / value of its corresponding class type, such as 'String' bridging from / NSString.
Even if we have alias rules, if we're in repo mode, they will be applied during the trait flattening step, and we won't populate traitAliases() on the Class.
FIXME: Duplicated from CompilerInvocation, but in theory the runtime library link path and the standard library module import path don't need to be the same.
FIXME: the callee should have a lowered SIL function type, and PartialApplyInst should derive the type of its result by partially applying the callee's type.
For astronomical as well as ceremonial reasons, the start of a new year may be delayed until a day or two after the new moon causing years to vary in length.
For each key in the map, we copy the key to the set if the corresponding value is equal to pos exactly (which means it was present in all of the containers).
For example, type SomeTy.SomeMember can look up static functions, and can even look up non-static functions as well (thus getting the address of the member).
Given that the type-of-rvalue differs from the type-of-storage, / and given that the type-of-rvalue is loadable, produce a +1 scalar / of the type-of-rvalue.
Hdf's and ini (via Variant arrays) internal storage handles ordering naturally (as specified top to bottom in the file and left to right on the command line.
Helper method which returns true if the linkage of the SILFunction / indicates that the objects definition might be required outside the / current SILModule.
However, we can rely on a subsequent mark_dependent / instruction to take that object as an operand, causing it to escape / for the purpose of this analysis.
If one component is unspecialized, it behaves like Top, and the intersection is the other component (the Bottom case is handled by the subtype checks above).
If the source is not existential, an archetype, or (under the ObjC runtime) a class, and the destination is a metatype, there is no way the cast can succeed.
If the storage is dynamic or ObjC-native, we can't add a dynamically- dispatched method entry for materializeForSet, so force it to be statically dispatched.
If the variable isn't public, or has already been defined in this TU, then it definitely doesn't need a GOT entry, and we can relative-reference it directly.
If this is a failable ctor, then we actually jump to the failure epilog to keep the invariant that there is only one SIL return instruction per SIL function.
If type of the source and the expected ObjC type are equal, there is no need to generate the conversion from ObjCTy to _ObjectiveCBridgeable._ObjectiveCType.
If we have a specialized protocol conformance, since we do not support currently partial specialization, we know that it cannot have any open type variables.
If we're beyond nParams, then either all params are refs, or all params are non-refs, so if vals64 isn't 0 and isnt mask64, there's no possibility of a match
In other cases (especially if you don't bother to DefCls your classes in your .main) you'll just get mysterious "class not defined" errors or weird behavior.
In the case of a function application, we would have already captured the return type during constraint generation, so there's no use in looking any further.
In the case of back edges, it may process through the loop unnecessarily, but it won't make any illegal transformations because the lower_bound will be zero.
It should be safe to free the string we previously allocated, since we have not got to the end of the request when the MemoryManager will free these strings.
Look up a TypeAliasReq for the supplied NamedEntity (which must be the NamedEntity for `name'), invoking autoload if necessary for types but not for classes.
Metatypes containing classes, or where the original unsubstituted / type contains a type parameter, must be represented as pointers / to metadata structures.
Most of the analysis code in this module is about computing the information we need to build these flowgraphs, before we do the actual optimizations on them.
Naturally we would be emitting them as DW_TAG_reference_type types, but LLDB can deal better with pointer-sized struct that has the appropriate mangled name.
Next, callee main blocks are processed to transform frame relative access into stack relative access and adjust certain instructions to use the parent frame.
Return a specialized emission function if this is a function with a known / lowering, such as a builtin, or return null if there is no specialized / emitter.
Returns the Apply and WitnessMethod instructions that use the / open_existential_addr instructions, or null if at least one of the / instructions is missing.
Since we don't always alloc and dealloc a shared structure from the same thread it is possible that this can go negative when we are tracking jemalloc stats.
The root type refinement context reflects the fact that all parts of the source file are guaranteed to be executing on at least the minimum platform version.
Theoretically, this could be stored within the frameData itself, but that's probably not worth the runtime memory penalty so we take the performance hit now.
This function conceptually should check that the portions of the specialized information on the intersection of the stagBits for the two classes may overlap.
This is a bit ugly: when PHP7 picked up Hack-style return types, they inverted the syntax for a long-form closure with both a "use" clause and a return type.
This is necessary because libmemcached doesn't reset hash/distribution options on false case, like it does for MEMCACHED_BEHAVIOR_KETAMA (non-weighted) case.
This is the function that actually relaxes the guards of all the blocks in `blockData' in case that's considered profitable according to `relaxIsProfitable'.
This pass will reset the state / after an instruction that may modify any array allowing removal of redundant / checks up to that point and after that point.
To be able to assume it is actually counted it if used to be static, we need to add code checking for keys that are one of the "illegal offset type" of keys.
Update the replica set name in the parsed "servers" struct so that we can consistently compare it to the information that is stored in the connection hashes.
We use a different command type for an async stack trace, so we can both send and receive different data and still keep the existing Where command unchanged.
We use this function to determine if a subtype constraint is set / between two (possibly sugared) type variables, one of which is wrapped / in an inout type.
Xenon data is gathered for logging per request, "if we should" meaning that if Xenon's Surprise flag has been turned on by someone, we should log the stacks.
n is partially here to make simple cases tail-recursive, but it also gives us a simple opportunity to bail out early when we see an always-refutable pattern.
we have already popped FPass's input, but not pushed the output, so this check doesn't count the F result of this FPass, but does count the previous FPass*s.
whether a character is a valid part of the extended sorts of names that HHVM uses for certain generated constructs (closures, __Memoize implementations, etc)
(Technically debug information will be wrong if we stop under one of those cases.)  Note: if rVmSp is ever changed to refer to rsp, this code needs to change.
- Filter weight contribution results, after summing, are rounded to the nearest pixel color value instead of being casted to ILubyte (usually an int or char).
/ If the body is able to be inlined into functions in other resilience / domains, this ensures that only sufficiently-conservative access patterns / are used.
2) ProjectEnumPayload: Destructively stripping tag bits from the enum value, leaving behind the payload value, if any, at the beginning of the old enum value.
3) InjectEnumCase: Given a payload value placed inside an uninitialized enum value, inject tag bits for a specified case, producing a fully-formed enum value.
A must-alias-set's lower bound can be decreased in many situations, including: o An explicit DecRef or DecRefNZ of an SSATmp that maps to this must-alias-set.
After handling any conditional initializations, check to see if we have any cases where the value is only partially initialized by the time its lifetime ends.
At this point, we know that this element satisfies the definitive init / requirements, so we can try to promote loads to enable SSA-based dataflow / analysis.
Because our old lower bound is non-zero (from the memory support), we don't need to deal with the possibility of may-alias observes or may-alias decrefs here.
Before we've inserted arrays into either a ArrayTypeTable::Builder or an actual ArrayTypeTable, they can't be compared just using their ids, so we have these.
Build a custom epilog block, since the AST representation of the constructor decl (which has no self in the return type) doesn't match the SIL representation.
Compare 'this' lvalue and the 'rhs' lvalue (which is guaranteed to have / the same dynamic PathComponent type as the receiver) to see if they are / identical.
Don't pop the args yet---if the builtin throws at compile time (because it would raise a warning or something at runtime) we're going to leave the call alone.
Don't propagate the code completion bit from members: we cannot help code completion inside a member decl, and our callers cannot do anything about it either.
Even if we aren't inlining this can happen, because before doing the CallBuiltin we set the marker stack offset to only include the passed-through-stack args.
Following this call, BreakPointInfo::breakable will return true until a subsequent call to BreakPointInfo::unsetBreakable with the same or higher stack level.
For example, if a unit defines multiple persistent functions, it's possible another thread may call one of them before we've finished defining the other ones.
For instance, a PopC will call the destructor of the top-of-stack object if it was the last reference alive, and this counts as an example of 'UsedIfLastRef'.
For the moves set, we have no way to track where the pointers may be moved to, so we need to account for it, conservatively, as if it were a decref right now.
Given a tuple_element_addr or struct_element_addr, compute the new / BaseEltNo implicit in the selected member, and recursively add uses of / the instruction.
If it is not required, it also pushes an accumulating set of instruction ids that must be removed if the instruction which produces the stack slot is removed.
If it's a declared property we're good to go: even if a subclass redefines an accessible property with the same name it's guaranteed to be at the same offset.
If the base is a string, SetM pushes a new string with the value of the first character of the right hand side converted to a string (or something like that).
If the frame becomes live via DefInlineFP, we don't need to treat it as memory support for this set anymore, for the same reason that LdCtx doesn't need that.
If the length of period is equal or longer than a day then we have to check tht the calculation is not thrown out by the start or end of daylight saving time.
If the next month is invalid, then we need to try the first month of the next year, bearing in mind that the next year after 1 BCE is actually 1 AD and not 0.
If the payload is empty, turn the case into a no-payload case, but only if case numbering remains unchanged from all resilience domains that can see the enum.
If we add other 'whole program' passes that want to iterate, iterating this one at the same time would probably be mostly free, so we can consider that later.
If we are asked do debug serialization, instead of running all diagnostic passes, just run mandatory inlining with dead transparent function cleanup disabled.
If we are at the end of a scan line, set curx back to the beginning If we are interlaced, bump the cury to the appropriate spot, otherwise, just increment it.
If we cannot find information of the so-named function, it might not exist, or it might go through __call(), either of which cannot have reference parameters.
If we didn't find anything, /and/ this is a nominal type, check to see if any of the nominal's protocols are derivable and contain the name we're looking for.
If we failed lookup of a binary operator, check to see it to see if / it is a binary operator juxtaposed with a unary operator (x*-4) that / needs whitespace.
If we found a single candidate, and have no contextually known argument type information, use that one candidate as the type information for subexpr checking.
If we somehow reach this point and both name and uid were passed, then the uid values will override the name values, but it will otherwise function just fine.
In this case, the stack must be empty, and we need to record that this is the case so that later backward jumps can check this is the case at their jump site.
Note: We may push the publishing of the inline frame below the start of the inline function so that we can avoid spilling the inline frame in the common case.
Otherwise, this word ends before the last uppercase letter if the next word is alphabetic (URL_Loader) or after the last uppercase letter if it's not (UTF_8).
Produce an unreachable code warning for this basic block if it contains user code (only if we are not within an inlined function or a template instantiation).
Since the stack is maintainined on a per request basis, for performance reasons, it only makes sense to expand if necessary and cycles are wasted contracting.
So, in the presence of magic methods, we must handle the fact that attempting to call an inaccessible method will instead call the magic method, if it exists.
That is, make sure that on every version where the conforming declaration is available, if the requirement is available then the witness is available as well.
The SIL witness thunk has the type of the AST-level witness with witness substitutions applied, at the abstraction level of the original protocol requirement.
The base classes and members aren't always reported in DWARF in offset order, but make the output deterministic here to simplify consumers of the information.
The ext_libxml extension is the only XML extension that should be storing streams in the MemoryManager since it has no other place to safely store a req::ptr.
They accomplish this by forward-propagating the block input states from a FuncAnalysis to each instruction in the block prior to doing the backward iteration.
This isn't bulletproof, but at the point we emit conformance tables, we're far enough along that we should have emitted any metadata objects we were going to.
This means that if the given day number falls in the 3rd month or on the 30th day of the 2nd month the length of the year must be found, but in no other case.
Type checking must be deferred until IRGen so Builtin.isUnique can be called from a transparent generic wrapper (we can only type check after specialization).
Union operations are guaranteed to be commutative, so if there are two non-None stags, we have to consistently choose between them if we're going to keep one.
Unique the type string into an identifier since PrintLiteralString is building an AST around the string that must persist beyond the lifetime of PrefixString.
Using "Objective-C Garbage Collection" as the key here is a hack, but LLVM's object-file emission isn't general enough to collect arbitrary keys to put in the
Visitor that determines the memory behavior of an instruction relative to a / specific SILValue (i.e. can the instruction cause the value to be read, / etc.).
We couldn't find a suitable node by climbing the DeclContext hierarchy, so fall back to looking for a top-level declaration that contains the reference range.
We have to make sure the live FramePtr at the point of the DefLabel is the same as the one from the LdLocAddr, if that's the instruction we're trying to sink.
We suppress this warning when compiling for playgrounds because the developer cannot cannot explicitly set the minimum deployment target to silence the alarm.
verifyFile - After the file has been processed, check to see if we / got all of the expected diagnostics and check to see if there were any / unexpected ones.
we've already checked that charset needs to be replaced by rep, so now check if we can just return rep as is, or if we need to graft the options back onto it.
- Auto-identify keys to functions which could be used to place things in APC - i.e., same per-request, but not cross-request unless, say, locale is considered.
/ / An epilogue release is a release that post dominates all other uses of a / pointer in a function that implies that the pointer is alive up to that / point.
/ / If the insertion point is valid (i.e., pointing to an existing / instruction) then split the block at that instruction and return the / continuation block.
/ We update ForwardLocalValues in getLocalValue and when a value is defined / in setLocalValue, the corresponding entry in ForwardLocalValues will be / erased.
A ReqRetranslate is generated if we're still generating IR for the first bytecode instruction in the region and the `target' offset matches the current offset.
An output_buf parameter is required by the method signature, but no data is actually output (in fact the buffer controller is probably passing a NULL pointer).
As a special case, when we're injecting the result of an ObjC constructor into an optional, do it using an unchecked bitcast, which is opaque to the optimizer.
As we model the ref_element_addr instruction as a content-relationship, we have to go down one content level if just one of the values is a ref-counted object.
Based on an algorithm by Mark Rabkin with two changes: 1) Uses MurmurHash64A to hash the original key and to generate additional bits by recursively rehashing.
Because catch bodies can only be executed if the do body throws an error, and because the do is non-exhaustive, we can skip checking the catch bodies entirely.
Currently only supports a very limited set of instructions to simplify the decision for when it's safe to clone/sink them: - No memory effects (read or write).
During analysis, information about functions or classes will be requested from the Index, which initially won't really know much, but will record a dependency.
For all of the entries that did not have this control target in m_breakTargets, add this control target to these entries' m_breakTargets fields as appropriate.
For some discussion on how we know whether the SSATmp* is usable (i.e. its definition dominates code that might want to reuse it), see the bottom of this file.
However, we always constrain the input to this opcode with at least DataTypeSpecific, so we only have to skip the optimization if the typeParam is specialized.
If the explicit protocol for the left-hand side is implied by the explicit protocol for the right-hand side, the left-hand side supersedes the right-hand side.
If the explicit protocol for the right-hand side is implied by the explicit protocol for the left-hand side, the right-hand side supersedes the left-hand side.
If the value is a (possibly optional) ObjC block passed into the entry point of the function, then copy it so we can treat the value reliably as a heap object.
If the value is a specialized object type and we don't have to constrain a guard to get it, we can avoid emitting runtime checks if we know the result is true.
If there was a conflict on the first argument, and this was the first argument and we're not stripping error suffixes, just give up completely on error import.
It is fine to think of it that way for general understanding of the analysis here, but in this implementation we don't actually treat it that way when merging.
It's not normally ok to directly use tracelet abi registers in codegen, unless you're directly dealing with an instruction that does near-end-of-tracelet glue.
Iterating invariant_tmps goes in insertion order, which means it is already guaranteed to be topologically sorted by any dependencies between the instructions.
Make sure we have the right current working directory within the repo based on what server.source_root was set to (current process directory being the default)
NB: THREAD SAFETY (this comment also exists at Countable.java)  This method deletes the corresponding native object on whatever thread the method is called on.
Note it's not necessary to check whether the test class is defined: if it doesn't exist than the candidate can't be an instance of it and will fail this check.
Note that in this case, we do not want to propagate the 'throws' bit to the closure type, as the closure has already been analyzed for throwing subexpressions.
Note that while protocol types don't have a metadata pattern, we still require an accessor since we actually want to get the metadata for the existential type.
Now that we've parsed all of our patterns, initializers and accessors, we can finally create our PatternBindingDecl to represent the pattern/initializer pairs.
Pure stores potentially (temporarily) break the heap's reference count invariants on a memory location, but only if the value being stored is possibly counted.
SSATmps with loop-invariant definitions, either because they are purely loop invariant or because the other definitions they depend on are also loop invariant.
Scan instructions in the given section to find valid instruction boundaries, and check that branches a) land on valid boundaries, b) do not escape the section.
So, all that boils down to this: we ignore the extra args field (the unwinder will not consult the ExtraArgs field because it believes the ActRec is pre-live).
The assumption is that if fromType has larger elements, or additional elements, their presence cannot induce a more compact layout of the overlapping elements.
The documentation says a read filter is only created for 'r' and '+' modes, but the implementation will always create one unless STREAM_FILTER_WRITE is passed.
The kind of variance (none, covariance, contravariance) to apply / when comparing types from a witness to types in the requirement / we're matching it against.
The trick here is that the ClosureExpr provides a DeclContext for stuff inside of it, so it isn't safe to just drop it and rip the BraceStmt from inside of it.
These two routines are coupled---most cases in findWeakActRecUses should have a corresponding case in performActRecFixups to deal with the frame being removed.
This function is used when another thread is segfaulting---we just want to wait forever to give it a chance to write a stacktrace file (and maybe a core file).
Try consulting the 'class' map first, but don't call the failure callback unless there was an uncaught exception or a fatal error during the include operation.
Use SILOneTypeValuesLayout: the type is for condition, the list has value for condition, hasDefault, default basic block ID, a list of (DeclID, BasicBlock ID).
We have to lie to RValue about the formal type (by using the lowered type) because we're emitting into an abstracted value, which RValue doesn't really handle.
We lack a SIL instruction to nondestructively project data from an address-only enum, so we can only do so in place if we're allowed to take the source always.
end anonymous namespace / Given an expression and its context, the analyzer tries to figure out the / expected type of the expression by analyzing its context.
get marker byte, swallowing possible padding some software does not count the length bytes of COM section one company doing so is very much envolved in JPEG...
ppOut is empty for a block with no succs (since placement is definitely not possible in any of its successors), and its initialized to empty, so nothing to do.
processNonTrivialRelease - We handle two kinds of release instructions here: / destroy_addr for alloc_stack's and strong_release/dealloc_box for / alloc_box's.
we cannot use strlcpy - here the problem is that we have to copy NUL chars up to byte_count, we also have to add a single NUL character to force end of string.
/ / If includeInaccessibleMembers is set to true, this burns compile time to / try to identify and classify inaccessible members that may be being / referenced.
Also, the caller hasn't set up the m_invName area on the ActRec (unless it was a magic call), since it's the prologue's responsibility if it's a non-magic call.
Apply a storage qualifier, like 'weak', 'unowned' or 'unowned(unsafe)' to a type with reference semantics, such as a class reference or class-bound existential.
At present, BaseSets only support int values and string values, so if this BaseSet is non empty and the iterable is non empty the zip operation will always fail
Determine whether a reference to the given method via its / enclosing class/protocol is ambiguous (and, therefore, needs to / be disambiguated with a coercion).
Emit nonlazily realized class references in a second magic section to make sure they are realized by the Objective-C runtime before any instances are allocated.
ExprCleanser - This class is used by typeCheckExpression to ensure that in / no situation will an expr node be left with a dangling type variable stuck / to it.
FIXME: We don't have enough semantic understanding of extra inhabitant sets to be able to reason about how many spare bits from the payload type we can forward.
For the case of join points which were halted on one side, optimize_graph will not process through the join because the visit_counter will never be high enough.
If a dynamic alloc_stack is immediately initialized by a copy_addr operation, we can combine the allocation and initialization using an optimized value witness.
If the RPO number of S is less than the RPO number of ER, then we know that the edge in between them is not a backedge and thus we do not want to clip the edge.
If the argument cannot be initialized with a scalar, then it is an error, so we might as well pass down the expected type, to get a specific error involving it.
If the constraint system had a contextual type specified, we use it - it will have a purpose indicator which allows us to give a very "to the point" diagnostic.
If the source of the assignment is an application of a C function, there is no metatype argument, so treat the assignment to the self box as the initialization.
If the type gets more refined, we need to forget the old value, or else we may end up using a value with a more general type than is known about the stack slot.
If this is a load/copy_addr from a struct field that we want to promote, compute the access path down to the field so we can determine precise def/use behavior.
If we fail to lookup the SILFunction, again skip Class and attempt to resolve the method in the VTable of the super class of Class if such a super class exists.
If we somehow reach this point and both gname and gid were passed, then the gid values will override the gname values, but it will otherwise function just fine.
In this case, we can do a fast subtype check using the classVec, because we know oldCls can't be an interface (because we observed an instance of it last time).
Indeed, using PHP_POLLREADABLE results in select failing only due to the timeout and not immediately as would be expected when a connection is actively refused.
It just can't be resilient at the top level: we have to know its immediate members, or we can't even begin to approach the problem of emitting metadata for it.)
Locations here have a projection path from their Base, but this particular instruction may not be accessing the base, so we need to rebase* the locations w.r.t.
Mark it live across the instruction so its lifetime conflicts with the destination, which ensures it will be assigned a different register than the destination.
Meanwhile the second sees that its been bound, finishes up, and then tries to read the property, but sees uninit-null for the value (and asserts in a dbg build)
Note about nested array types in the builder:  The serialization we use for the ArrayTypeTable doesn't currently allow the possibility of recursive array types.
On x64, concurrent modification and execution of instructions is safe if all of the following hold:  1/  The modification is done with a single processor store.
Parameters: dst - Where to store the resulting affine transform m1 - First affine matrix m2 - Second affine matrix  Returns: GD_SUCCESS on success or GD_FAILURE
Propagate information about a concrete type from init_existential_addr / or init_existential_ref into witness_method conformances and into / apply instructions.
The current heuristic we use for translation chaining is to assume the most common cases are probably translated first, so we chain new translations on the end.
The structure produced here is / consumed by swift_getGenericMetadata() and must correspond to / the fill operations that the compiler emits for the bound decl.
The value type of the map is a list of offset ranges, so a single line with several sub-statements may correspond to the bytecodes of all of the sub-statements.
This doesn't need to account for ActRecs on the fpiStack, because no instruction in an FPI region can ever consume a stack value from above the pre-live ActRec.
This function is necessary because for semantic / analysis, the parser attaches attributes to declarations other / than those on which they, concretely, appear.
This has to be factored out like this in order for MSVC to actually disable the warning, as MSVC only allows this warning to be disabled at function boundaries.
This initialization is thread-safe because program-functions.cpp must call Debugger::StartClient (which ends up here) before any additional threads are created.
We know that our loads happen before stores, so we need to first check for Phi nodes in the first block, but stores first in all other stores in the idom chain.
We'd like the dump routine to be present in all builds, but it's a pretty large amount of code, most of which is not sensitive to the actual key and value data.
When we actually see the EOF, we change the status to "new" (via yyrestart()), so that the user can continue scanning by just pointing yyin at a new input file.
When we are timed out, and we're SELECT-ing, we're potentially running a long query on the server without waiting for any results back, wasting server resource.
When we're building the IR, we append a conditional jump after generating its target block: see emitJmpCondHelper, where we call makeExit() before gen(JmpZero).
With -embed-bitcode, save a copy of the llvm IR as data in the __LLVM,__bitcode section and save the command-line options in the __LLVM,__swift_cmdline section.
folly::symbolizer isn't supported on all the platforms that HHVM is, so we deliberately exclude it in our CMake setup, which makes this feature FB-only for now.
the last (variadic) param is included in numParams (since it has a name), but the arg in that slot should be included as the first element of the variadic array
A non-final class can model a protocol requirement with a contravariant Self, because here the witness will always have a more general type than the requirement.
A simple pass which replaces each apply of a generic function by an apply / of the corresponding pre-specialized function, if such a pre-specialization / exists.
Allowing a use exactly at the end facilitates lifetime splitting when the use at the position of an instruction clobbers registers as a side effect, e.g. a call.
Analyze the function and replace each apply of a generic function by an apply of the corresponding pre-specialized function, if such a pre-specialization exists.
ArrayData* CopyWithStrongIterators(const ArrayData*)  Explicitly request an array be copied, and that any associated strong iterators are moved to the new array.
As we do the coersions, params.value gets updated so whenever we call these catch block creation functions it will only decref things that weren't yet converted.
Because type arguments are not actually translated separately, whether they are trivially representable or bridged representable doesn't impact our final result.
But eg if it has unlikely paths into cold code that has not been relocated, then the cold code will still point back to the original, not the relocated versions.
Collects the post-conditions associated with the current state, which is essentially a list of local/stack locations and their known types at the end of `block'.
Computes a color in im's color table that is part way between the background and foreground colors proportional to the gray pixel value in the range 0-NUMCOLORS.
Copy initial values for properties to a new vector that can be used to complete initialization for non-scalar properties via the iterative 86pinit() calls below.
Entry points using a standard C calling convention or not using the new calling convention do not need to have global symbols referring to their implementations.
FIXME: All the code following could be made significantly more aggressive by saying that aggregates of the same type that do not contain each other cannot alias.
FIXME: If ModuleToPrint is a submodule, get its top-level module, which will be the DeclContext for all of its Decls since we don't have first- class submodules.
For a constructor, enum element, static method, static property, or an instance method referenced through an instance, we've consumed the curried 'self' already.
For all entries we visited that did not have this control target in m_gotoTargets, add this control target to these entries' m_gotoTargets fields as appropriate.
Given an abstract type --- a type possibly expressed in terms of / unbound generic types --- return the formal type within the type's / primary defining context.
Given that we are returning a normal value, convert it to a / bridged representation and set up a return value according to the / given foreign-error convention.
Given that we've applied some sort of trivial transform to the / value of the given ManagedValue, enter a cleanup for the result if / the original had a cleanup.
If the first method has a valid source location but the first conflicting declaration does not, swap them so the primary diagnostic has a useful source location.
If the only remaining constraints are conformance constraints or member equality constraints, and we're allowed to have free variables, we still have a solution.
If we don't have any casts in our symmetric difference (i.e. only typed GEPs), then we can say that these actually have a symmetric difference we can understand.
If we fail to attach to a debugger, then we can choose to wait for an exception to be thrown so we try again, or we can just detach the debugger hook completely.
Note that frame_free_locals expects to be able to free return_value in the event of an exception, so we have to take it out of our Variant /before/ calling that.
Return from an eagerly-executed async function: wrap the return value in a StaticWaitHandle object and return that normally, unless we were called via FCallAwait
Since each extra inhabitant corresponds to a specific bit pattern that is known to be invalid given the payload type, projection of the payload value is a no-op.
TODO: - Optimize pixel accesses and loops once we have continuous buffer - Add scale support for a portion only of an image (equivalent of copyresized/resampled)
That will remove the element and not block, even if we hold an ExpMap::accessor to the element in another thread, which would allow us to proceed and free vpkey.
The DWARF output created by Swift is intentionally flat, therefore archetypes are emitted with their DeclContext if they appear at the top level of a type (_Tt).
The fact that we do not use an atomic operation here means that we could get a stale read, but in practice that poses no problems for how we are using the value.
The fundamental issue here is that since we do not have any notion of size, we cannot know the effect of a cast + gep on the final location that we are reaching.
The potential versions in the declaration are constrained by both the declared availability of the declaration and the potential versions of its lexical context.
There are currently two kinds of freelist entries: entries where there is already a valid SmallNode on the list (case b), and entries where there isn't (case c).
There's no actual function pointer to capture, and we semantically can't cache dispatch, so we need to perform the message send in the partial application thunk.
These routines provide selection of a custom color map for an image, followed by mapping of the image to that color map, with optional Floyd-Steinberg dithering.
This always involves an action on the client and usually, but not always, involves the server by sending this command to the server and waiting for its response.
We can now go back and convert all MergeKind::Class entries to MergeKind::UniqueDefinedClass, and all hoistable classes to their Class*'s instead of PreClass*'s.
We can use any representative ClassInfo for the context class to check this, since the private method list cannot change for different realizations of the class.
We do want to preserve the original source order, but that's done by having previously added all the primary blocks to the LLVM function in their original order.
We handle this conservatively by just pushing all DecRef markers where the DecRef is from a function other than the outer function down to a safe re-entry depth.
With identical-code-folding enabled in the linker, __jit_debug_register_code tends to get folded with a bunch of other functions, some of which are called a lot.
baseClass can change on us in between requests, but since ctx is an ancestor of baseClass we can make the weaker assumption that the object is an instance of ctx
(This includes locals that were live going out of this block.)  This set is used by global DCE to remove locals that are completely unused in the entire function.
/ / This pass is more sophisticated than SILCodeMotion, as arc optimizations / can be very beneficial, use an optimistic global data flow to achieve / optimality.
API availability ranges are contravariant: make sure the version range of an overridden declaration is fully contained in the range of the overriding declaration.
Cannot use the String constructor directly, as it has subtle different behavior in the case where ptr is null, and length is 0, and it breaks flib to change that.
Check if the instruction we are visiting could potentially decrement the reference counted value we are tracking in a manner that could cause us to change states.
Create one interval I for each Vreg R that requires register allocation, by iterating blocks and instructions in reverse order, computing live registers as we go.
Each of these tests, if it succeeds, will leave the text converted into one-unichar-per-character Unicode in ubuf, and the number of characters converted in ulen.
Even if the instruction does not write memory we conservatively set all operands to escaping, because they may "escape" to the result value in an unspecified way.
Even though we didn't emit the function now, update the lastEmittedFunction so that we preserve the original ordering that the symbols would have been emitted in.
FIXME: Relative references to aliases break MC on 32-bit Mach-O platforms (rdar://problem/22450593 ), so substitute an alias with its aliasee to work around that.
FIXME: We should support returning "Self.Type" for a root class instance method mirrored as a class method, but it currently causes problems for the type checker.
If V2 is also a gep instruction with a must-alias or not-aliasing base pointer, figure out if the indices of the GEPs tell us anything about the derived pointers.
If the archetype has a superclass constraint, it has at least the retain semantics of its superclass, and it can be represented with the supertype's pointer type.
If the declaration name isn't parallel to the actual parameter list (e.g. if the method has C-style parameter declarations), don't try to apply error conventions.
If this is a different swift_allocObject than we started with, then there is some computation feeding into a size or alignment computation that we have to keep...
If this is a simple "try expr" situation, where the expr is a closure literal, and the next token is a 'catch', then the user wrote try/catch instead of do/catch.
If we're in top-level code, we don't need to physically capture script globals, but we still need to mark them as escaping so that DI can flag uninitialized uses.
Most importantly, it might have pulled args /off/ the eval stack and shoved them into an ExtraArgs on the calleeAR, or into an array for a variadic capture param.
NB: fname needs to be long-lived if generating a bytecode repo because it can be cached via a Location ultimately contained by ErrorInfo for printing code errors.
Note: a block can have an unprocessed predecessor even if the region is acyclic, e.g. if the IR was able to prove a path was unfeasible due to incompatible types.
PHP 5.x does different things when diffing against the same array, particularly when the comparison function is outside the norm of return -1, 0, 1 specification.
Static metatypes are unitary and can optimized to a "thin" empty representation if the type also appears as a static metatype in the original abstraction pattern.
TestUnsetStatement TestEchoStatement TestForStatement TestObjectPropertyExpression TestListAssignment TestUnaryOpExpression - internal_functions - isset_variables
The call to expirePaths() cannot be safely omitted, because it would otherwise be possible for a symlink-induced cycle to keep some or all of the node tree alive.
The convention didn't provide a source of the metadata, so we'll want to check the necessary bindings structure to see if it was stored there (it most likely is).
The documentation for connect() says in case of non-blocking connections the select function reports success in the writefds set and failure in the exceptfds set.
The goals here are two- fold: (1) avoid the need to grow or shrink in the common case, and (2) for extreme cases where it's hard to make an accurate estimate (ex.
The last is to invoke a custom function (with a certain symbol), passing a pointer formed by the offset as the first parameter (which serves as the this pointer).
The number of locations is currently generally small, so this is probably ok for now---but if we remove the limit we may need to revisit this so it can't blow up.
The result function has already been reabstracted to the substituted type, so use the substituted formal type as the abstraction pattern for argument passing now.
The transfer function is a function of the set of locals read and killed in the block, and does not depend on the final live out state, so we can compute it here.
Therefore there's no risk on this function being called by the iterator wrapper destructor function and not finding the memory of this iterator allocated anymore.
They require that the appropriate ObjectData::Attribute has been checked first, and return false if they refused to run the magic method due to a recursion error.
This could be made more aggressive through appropriate alias analysis and usage of LLVM's function attributes to determine that a function does not touch globals.
This is tricky since the behavior's parameter type may be dependent on the property type, so we'd need to clone the closure expr for each var to re-type-check it.
This means there's no connection between this range and any subsequent one, so we can safely break the interval after the first range without making things worse.
To be safe we close the socket so that if nobody else is listening the OS starts rejecting requests but if somebody is listening we let them receive the requests.
True if we're converting a function parameter, property type, or / function result type, and can thus safely apply representation / conversions for bridged types.
TypeSubstCloner, SILClonerWithScopes, and SILCloner desperately need refactoring and/or combining so that the obviously right things are happening for cloning vs.
Unfortunately, it needs a work array to hold the best-distance-so-far for each histogram cell (because the inner loop has to be over cells, not colormap entries).
When we actually see the EOF, we change the status to "new" (via hphprestart()), so that the user can continue scanning by just pointing yyin at a new input file.
end anonymous namespace / Return true if the witness table requires runtime instantiation to / handle resiliently-added requirements with default implementations.
i.e. if there is no downward visible / value that can reach the end of a basic block, then we know that the genset / and killset for the location need not be set.
(The algorithm doesn't need this for correctness, but it might make it iterate less.)  Every block must be visited at least once, so we throw them all in to start.
-- The list of immediate predecessors that this block is control-dependent on along with the level number in the post-dominator tree of each of those predecessors.
/ In deserializer, we use LocalValues to store the definitions and / ForwardLocalValues for forward-referenced values (values that are / used but not yet defined).
Although this builtin is provided by clang rt builtins, it isn't provided by libgcc, which is the default runtime library on Linux, even when compiling with clang.
As a consequence of being called via callfaststub, we can't safely use any Vregs here except for status flags registers, at least not with the default vwrap() ABI.
Check if the instruction we are visiting could potentially use our instruction in a way that requires us to guarantee the lifetime of the pointer up to this point.
Exclude "main", because it should naturally be used, and because adding it to llvm.used leaves a dangling use when the REPL attempts to discard intermediate mains.
FIXME: CharSourceRange is a half-open character-based range, while SourceRange is a closed token-based range, so this conversion omits the last token in the range.
FIXME: Form a new initializer by performing the appropriate substitutions of subclass types into the superclass types, so that we get the right generic parameters.
FIXME: This hack is only necessary to work around some problems we have for inferring the type of an unresolved member reference expression in an optional context.
First new DefInlineFP instructions are inserted at exit heads and all exit blocks are updated to use these new frame pointers, inserting phi nodes where necessary.
Given an expression that has a non-lvalue type, dig into it until we find / the part of the expression that prevents the entire subexpression from being / mutable.
If the two writebacks we're comparing are of different kinds (e.g. ownership conversion vs a computed property) then they aren't the same and thus cannot conflict.
If this pixel is transparent, we want to assign it to the special transparency color index past the end of the palette rather than go through matching / dithering.
If we don't have concrete conformance information, the type must be an archetype and the conformance must be via one of the protocol requirements of the archetype.
If we have a substitution whose replacement type is an archetype, make sure that the replacement archetype is in the context generic params of the caller function.
If we've done many iterations without progress, pop the current function and any other function we've run any optimizations on on from the stack and then continue.
It is possible to cast the address of a smaller InputType to the address of a larger OutputType (the actual memory object must be large enough to hold both types).
Note that we only support C's for CVU so far (this only comes up with FCallBuiltin)---we'll fail the verifier if something changes to send V's or U's through here.
On the failure case, we don't need to clean up the 'self' returned by the call to the other constructor, since we know it is nil and therefore dynamically trivial.
Otherwise there will be one for each possible path through the inheritance hierarchy, potentially excluding cases that we know would definitely fatal when defined.
Override simple behaviors where MayHaveSideEffects is too general and encompasses other behavior that is not read/write/ref count decrement behavior we care about.
Redirect the terminator of the current loop iteration's latch to the next / iterations header or if this is the last iteration remove the backedge to / the header.
Region exits These exits don't leave the current php function, and could head to code that could read or write anything as far as we know (including frame locals).
Returns true if we proved that RCIdentity has a non-payloaded enum case, / false if RCIdentity has a payloaded enum case, and None if we failed to find / anything.
Testing for equality with true simplifies to just the left operand, while equality with false is the negation of the left operand (equivalent to XORing with true).
The extra data for the InterpOne comes with some additional information about which local(s) it may modify, which is all we try to be more precise about right now.
The kernel removed the directory watch, either as a side effect of directory deletion, or because inotify_rm_watch() was explicitly called during Node destruction.
The ones with at least one capital are the composite ops, and the capitals correspond roughly to the positions of buffers (as opposed to objects) in the arguments.
The two solutions are to make address projections variadic (something on the wee horizon) or enable Projection to represent a cast as a special sort of projection.
This currently invalidates the CFG since parts of PHI nodes are stored in / branch instructions and we replace the branch instructions as part of this / operation.
This is an implementation of the RPO version of the global value numbering algorithm presented in the 1996 paper "SCC-based Value Numbering" by Cooper and Simpson.
We don't need to do anything for collect.publicStatics because we'll analyze the included pseudo-main separately and see any effects it may have on public statics.
We normally maintain the invariant that the region surrounding the current brk is mapped huge, but we don't know yet whether huge pages are enabled for low memory.
We reached the EndBlock but didn't find a place for the deallocation so far (because we didn't find all uses yet or we entered another stack alloc-dealloc region).
We're never being asked to do anything with *formal* indirect results here, just the possibility of a direct-in-SIL result that's actually being passed indirectly.
When an allow string is passed in we keep track of the string in state 1 and when the tag is closed check it against the allow string to see if we should allow it.
When we hoist a release to the predecessor block this release would block hoisting further releases because it looks like a ARC decrement in the predecessor block.
if unpacking, any regularly passed arguments on the stack in excess of those expected by the function need to be discarded in addition to the ones held in the arry
/ / At this parsing has been performed, but we still have UnresolvedDeclRefExpr / nodes for unresolved value names, and we may have unresolved type names as / well.
A SpillFrame will store over kNumActRecCells stack slots, and just like normal PureStores we can drop any support bits for them without reducing their lower bounds.
A generic param decl at module scope cannot refer to another module because we would have no way lookup the original module when serializing a copy of the function.
ALGORITHMS  The calculations are based on three different cycles: a 400 year cycle of leap years, a 4 year cycle of leap years and a 5 month cycle of month lengths.
Because it can appear in PHP expressions, the emitter pretends that it pushed a value on the eval stack (and iopExit actually does push Null right before throwing).
But only do this if tvRef was used in this iteration, otherwise we may wipe out the last reference to something that we need to stay alive until the next iteration.
Create a block for the body and emit code into it before processing any of the patterns, because none of the bound variables will be in scope in the 'body' context.
Currently, Self is being migrated away from in favor of opened existential types, so we should remove the special case here for Self when that process is completed.
Don't emit type metadata records for types that can be found in the protocol conformance table as the runtime will search both tables when resolving a type by name.
Eval stack:  During backward traversal of a block, we maintain a "backwards" stack, indicating which eval stack slots are going to be required in the future or not.
Given a partial_apply instruction, create a specialized callee by removing / all constant arguments and adding constant literals to the specialized / function body.
Given an operand of a direct apply or partial_apply of a function, / return the index of the parameter used in the body of the function / to represent this operand.
IR instructions with no associated assembly will still get entries in the instRanges vector so they will be printed too (they just get an empty machine code range).
If an insertion point is specified, / then the new instruction is inserted before the specified point, otherwise / the new instruction is returned without a parent.
If the nominal type declaration of the context type we're looking at matches the owner's nominal type declaration, this is how we found the member type declaration.
If the original type was an archetype, use that archetype as the original type of the element --- the actual archetype doesn't matter, just the abstraction pattern.
It is assumed in several places in IR-generation that the explosion schema of a tuple type is always equal to the appended explosion schemas of the component types.
Keep track of how many nested refinement contexts we have pushed on the context stack so we can pop them when we're done building the context for the StmtCondition.
Metatype conversion casts in the AST might not be reflected as such in the SIL type system, for example, a cast from DynamicSelf.Type directly to its own Self.Type.
Note that semantic components will generally preserve the syntactic order of their children because doing something else could illegally change order of evaluation.
On exit from the switch, s points to the string that must be printed, s_len has the length of the string The precision requirements, if any, are reflected in s_len.
Returns true if we actually removed the support (i.e. we accounted for it by reducing a lower bound, or the location wasn't actually supporting anything right now).
So we don't want to include the Uninit (which isn't really a user-visible type for the property) or by the time we union things in we'll have inferred nothing much.
Storing the result into the AFWH overwrites contextIdx (they share a union), so it has to be done after the checks in the fast path (but before unblocking parents).
TODO: Handle generic instantiations, where we need to eagerly specialize on the given generic parameters, and static methods, where we need to drop in the metatype.
The caller must ensure that the source buffer is long enough that this routine does not run off the end and dereference non-existent memory looking for trail bytes.
The latter is needed because for certain multiple inputs to the buggy algorithm there exist easily found inputs to the correct algorithm that produce the same hash.
The non-interface type of a method that returns DynamicSelf uses DynamicSelf for the type of 'self', which is important when type checking the body of the function.
This constant has a non-scalar initializer, meaning it will be potentially different in different requests, which we store separately in an array living off in RDS.
This is because even if we don't do anything, we will still pair the retain, releases and then the guaranteed parameter will ensure it is known safe to remove them.
This isn't currently "wrong", because calling it would be a fatal, but note that resolve_method needs to be pretty careful about privates and overriding in general.
This lead to an 11 day shift in the calendar with respect to the seasons by the 16th century when the Gregorian calendar was created to replace the Julian calendar.
We can't use emitClassFieldOffset() here because that creates an invariant load, which could be hoisted above the point where the metadata becomes fully initialized
We do not insert the new mapped arguments into the value map since there by definition is nothing in the partial apply user function that references such arguments.
We do this in parallel: all the shared information is queried out of the index, and each thread is allowed to modify the bytecode for the function it is looking at.
We need this initialization to be done late so that ICU's dynamic initializers have had a chance to run, which is important if we've linked against a static libICU.
We need to create an object without initialization (constructor call), and set the fetched fields as dynamic properties on the object prior calling the constructor.
We originally planned to do this from the get-go, but threading that through turns out to be kind of annoying and of questionable value, so just doing this for now.
We want to raise the exception from the caller's FCall instruction in the second case, and in the first case we have to raise in a special way inside this re-entry.
When an HHIR region is exited, there's always some instruction we can use to indicate via memory_effects what may be read (e.g. EndCatch, RetCtrl, ReqBindJmp, etc).
When intersecting a constant value with another type, the result will be the constant value if the other value is a supertype of the constant, and Bottom otherwise.
When m_evalStackIsUnknown, it means we have hit a place in the bytecode where the offset cannot be reached via fallthrough, but no forward jumps targeted it either.
with the matching strong_retain to the strong_release in a predecessor basic block and the matching strong_release for the strong_retain in a successor basic block.
/ / NOTE: / Overall, this pass does not try to remove any information which can be / useful for LLVM code generation, e.g. for analysis of function's / side-effects.
/ Either the instruction is somewhere inside the CFG pattern, then we move it / up, immediately before the SelectValueInst in the pattern's dominating / entry block.
Aggregate together all of the subelements into something that has the same type as the load did, and emit smaller) loads for any subelements that were not available.
At this point curN contains the 7/16 error value to be propagated to the next pixel on the current line, and all the errors for the next line have been shifted over.
Builds a constant LLVM struct describing the layout of a heap closure, / the types of its captures, and the sources of metadata if any of the / captures are generic.
FIXME: Today, the subclasses of LoadedFile happen to return StringRefs that are backed by null-terminated strings, but that's certainly not guaranteed in the future.
For a few special cases, (object-string and string-int), we have special IR opcodes because the required semantics cannot be easily represented via type conversions.
For all entries we visited that did not have this control target in m_returnTargets, add this control target to these entries' m_returnTargets fields as appropriate.
For all of the entries that did not have this control target in m_continueTargets, add this control target to these entries' m_continueTargets fields as appropriate.
Force recheck of the arg expression because we allowed unresolved types before, and that turned out not to help, and now we want any diagnoses from disallowing them.
If it's retainable for the purposes of ObjC ARC, we can trust the presence of ns_returns_retained, because Clang will add that implicitly based on the method family.
If the current state is OUT and we are still at a stack level less than the original, then we skip over the PopR opcode if it exists and then break (matching hphpd).
If the decl is currently being validated, this is likely a recursive reference and we'll want to skip ahead so as to avoid having its type attempt to desugar itself.
If the enum is address-only, we better not have any spare bits, otherwise we have no way of copying the original payload without destructively modifying it in place.
If the field offset is fixed relative to the start of the superclass, reference the global from the ivar metadata so that the Objective-C runtime will slide it down.
If the low bit is set in mcePrime, we're in the middle of smashing immediates into the TC from the handlePrimeCacheInit, and the upper bits is not yet a valid Func*.
If the type is inout, get the metadata for its inner object type instead, and then set the lowest bit to help the runtime unique the metadata type for this function.
If this function returns true for an operand, then the register allocator may give it an XMM register, and the instruction will store the whole 16 bytes into memory.
If we have users like that we cannot hoist the release past them unless we know that there is an additional set of releases that together post-dominate this release.
If we're in a designated initializer, the elements of the memory represent instance variables -- after destroying them, we have to destroy the class instance itself.
In takeover, the agent will attempt to use libafdt to transfer a file descriptor from an existing process (which should exist, since we couldn't bind to the socket).
It may happen that this request was waiting in async queue for too long so another thread has already updated this sema with ast generation bigger than ASTGeneration
NB: Although gd RGB values are ints, their max value is 255 (see the documentation for gdImageColorAllocate()) -- perfect for 8-bit JPEG encoding (which is the norm)
Nishimura, "Mersenne Twister: A 623-Dimensionally Equidistributed Uniform Pseudo-Random Number Generator", ACM Transactions on Modeling and Computer Simulation, Vol.
Note that if the receiver is 'super' that does not mean that the call is statically determined (an extension method may have injected itself in the super hierarchy).
Now that we've smashed all the IBs for these translations they should be unreachable-- to prevent a race we treadmill here and then reclaim their associated TC space
Perhaps we should just compute leading 28 bits of S once and for all and pass them and a shift to quorem, so it can do shifts and ors to compute the numerator for q.
Returns: -1 if it worked, but the option really shouldn't be used 0 if it worked 1 if either name or value was missing 2 if the option didn't exist 3 on logic errors
Symbolic stack elements do not have corresponding values on the real eval stack at runtime, and represent things like local variable ids or literal ints and strings.
TODO: we may eventually want to make an option which specifies directories or filenames to exclude from PHP7 behavior, and so checking these may want to be per-file.
The ClosureHoistable flag keeps them ahead of any other classes, but in mergeImpl we're going to define functions before we define classes, so we do them first here.
This "static empty mixed array" is only used internally within the HashCollection implementation and it's never exposed outside of the HashCollection implementation.
This doc comment is going to explain a few concepts, interleaved with discussion on how they are used by the various analysis and optimization passes in this module.
This implicitly converts objects Note that our vectors will leak if object conversion fails and PHP ends up with a fatal error and calls longjmp as a result of that.
This indicates to the producer of the cell that the it is considered used if it could be the last reference alive (in which case the destructor would be run on Pop).
This is ignoring the possibility that we may have a loop with an interesting terminator but for which, we are going to clear all state (since it is a loop boundary).
This should be enough to unique Git hashes for the time being, and certainly enough for SVN revisions, while keeping the version string from being ridiculously long.
This will populated derived protocols and / synthesized protocols, add the new variable and pattern bindings, and / create the inits parameterized over a raw value /
Unlike opaque / existentials, a class existential does not need to store type / metadata as an additional element, since it can be derived from the / class instance.
We don't have a great cost model at the SIL level, so we don't want to blissly duplicate tons of code with a goal of improved performance (we'll leave that to LLVM).
We need tags for each of the payload types, which we may be able to form using spare bits, plus a minimal number of tags with which we can represent the empty cases.
When we have a candidate that differs by a single argument mismatch, we / keep track of which argument passed to the call is failed, and what the / expected type is.
With primary, there is only going to be one node, with primary the set contains only secondaries and with nearest we do not prefer a secondary over a primary or v.v.
just a hack to free resources allocated by glibc in __res_nsend() See also: res_thread_freeres() in glibc/resolv/res_init.c __libc_res_nsend()   in resolv/res_send.c
reset RuntimeOption::AllowedDirectories to empty because if the Hdf version of this test is run at the same time, we don't want to append the same directories to it.
reset RuntimeOption::AllowedDirectories to empty because if the INI version of this test is run at the same time, we don't want to append the same directories to it.
vixl's literal pools don't work well with our codegen pattern, so if that would happen, emit the raw bits into a GPR first and then move them unmodified into a SIMD.
/ / The cloned literals will retain the SILLocation from the partial apply's / caller, so the cloned function will have a mix of locations from different / functions.
/ Applies heuristics that are suitable when trying to find the end of a list / of generic parameters, generic arguments, or list of types in a protocol / composition.
Also as a hack, always mark the setter mutating if we're inside a protocol, because it seems some things break otherwise -- the root cause should be fixed eventually.
Bridge the given Swift value to its corresponding Objective-C / object, using the appropriate witness for the / _ObjectiveCBridgeable._bridgeToObjectiveC requirement.
But don't do this transformation during code completion, as the source may be incomplete and the type mismatch in return statement will just confuse the type checker.
Even if a func has AttrNoOverride, if it has static locals it is cloned into subclasses (to give them different copies of the static locals), so we need to skip this.
Find the immediate dominator of each block using Cooper, Harvey, and Kennedy's "A Simple, Fast Dominance Algorithm", returned as a vector of Block*, indexed by block.
For now we are not going to be smart about this to enable avoiding any issues with visiting the open_existential_addr/witness_method before the init_existential_inst.
For the current scheme we just add the local to gen even if we're doing a removable push, which is correct but could definitely fail to eliminate some earlier stores.
GIFENCODE.C    - GIF Image compression interface  GIFEncode( FName, GHeight, GWidth, GInterlace, Background, Transparent, BitsPerPixel, Red, Green, Blue, gdImagePtr )
If the invocation's argument expression has a favored constraint, use that information to determine whether a specific overload for the initializer should be favored.
If this region's entry block is at the entry point for a function, we have some additional information we can assume about the types of non-parameter local variables.
If we aren't using FCallBuiltin, the stack frame of the call to assert will be in middle of the code we are about to eval and our caller, whose varEnv we want to use.
If we have a partial_apply and we converted some results/parameters from indirect to direct there are 3 cases: 1) All uses of the partial_apply are apply sites again.
If we're using a local context (either a TopLevelCodeDecl or a PatternBindingContext) install it now so that CurDeclContext is set right when parsing the initializer.
Initialized 'let' properties have storage, but don't get an argument to the memberwise initializer since they already have an initial value that cannot be overridden.
It's reasonable to expect that the replacement won't be completely unrelated to the original, but try to avoid making assumptions about the exact representation type.
Merge an attribute's availability with an existing inferred availability / so that the new inferred availability is at least as available as / the attribute requires.
NOTE: currently they can't modify anything other than the bytecode/Blocks, because other threads may be doing unlocked queries to php::Func and php::Class structures.
Note that the new value is already considered to be retained (by the semantics of the storage type), and we're transferring that ownership count into the destination.
Otherwise, if we see a jcc but only one of the branches is a normal exit, then convert the jcc to a bindexit with the jcc's condition and the original bindjmp's dest.
Otherwise, process this by turning the values corresponding to the tuple into a single value (through an implosion) and then binding that value to our initialization.
PHP classes that inherit from cpp builtins that have special clone functionality *may* also define a __clone method, but it's totally fine if a __clone doesn't exist.
Returns the id of the next region block in workQ whose corresponding IR block is currently reachable from the IR unit's entry, or folly::none if no such block exists.
RpoSort does a depth-first search over successor and exception edges of a Graph, visits blocks in postorder, and builds the reverse-postorder list of blocks in-place.
Skip asserting the top of the stack if it just came immediately out of an 'obvious' instruction (see hasObviousStackOutput), or if this instruction ignoresStackInput.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS.
That may destroy the proxy here, or it may remain alive if there is a thread still processing an interrupt with it since such threads have their own shared reference.
The basic idea here is that we haven't constrained block layout based on the exception tree, but adjacent blocks are still reasonably likely to have the same ExnNode.
The mutation invalidates a capture if it occurs in a block reachable from the block the partial_apply is in, or if it is in the same block is after the partial_apply.
The read preference spec states: "slaveOk remains as a bit in the wire protocol and drivers will set this bit to 1 for all reads except with PRIMARY read preference."
This is done to "extend" the life-time of original partial_apply arguments, as they may be destroyed/deallocated before the last use by one of the apply instructions.
This means it's safe to elide their inlined frame, as long as we adjust their markers to a depth that is guaranteed to not stomp on the caller's frame if it reenters.
To avoid copies, evaluate it directly into the box, being careful to stage the cleanups so that if the expression throws, we know to deallocate the uninitialized box.
Use SILOneTypeValuesLayout: the type is for condition, the list contains value for condition, hasDefault, default basic block ID, a list of (Value ID, BasicBlock ID).
We don't need to worry about sil_witness_tables since witness tables reference each other via protocol conformances and sil_vtables don't reference each other at all.
We reuse the same storage for the return value as the yield (`m_value`), so doing a blind read will cause `current` to return the wrong value on a finished generator.
With any escapes tallied up, we can work through all the uses, checking for definitive initialization, promoting loads, rewriting assigns, and performing other tasks.
recordFailableInitCall - If I is a call of a throwing or failable / initializer, add the actual conditional (try_apply or cond_br) to / the set for dataflow analysis.
/ / The function's input type is (value, metadataValue, protocol...) / The function's output type is (value, witnessTable...) / / The value is NULL if the cast failed.
A natively ObjC method witness referenced this way will end up going through its native thunk, which will redispatch the method after doing bridging just like we want.
Anything that was definitively allocated by the MemoryManager allocator should be counted in this number even if we're otherwise zeroing out the count for each thread.
At this point it might help to go look at one or two of the transformation rule examples below (e.g. rule_inc_dec_fold), but that documentation is not duplicated here.
Because fcall is a variable length instruction, and because we sometimes delete instructions from the instruction stream, we need to use fpi regions to find the fcall.
By / keeping the LSLocation and LSValue in their indivisible form, one / can easily find which part of the load is redundant and how to compute its / forwarding value.
Collect all uses of a struct given an aggregate value that contains the / struct and access path describing the projection of the aggregate / that accesses the struct.
For each component C, we should subtract C_rhs from C_lhs iff every other component of lhs that can intersect with C is subsumed by the corresponding component of rhs.
Fortunately too, there is general agreement that codes 0x00 through 0x3F represent control characters, 0x41 a nonbreaking space, and the remainder printing characters.
However it is not the case that every tmp in the set necessarily has a subtype of widestType, because of situations that can occur with AssertType and interface types.
If a given class has no subclasses and - private - or internal and it is a WMO compilation then this class can be considered final for the purpose of devirtualization.
If the element is the first non-empty element to be added to the structure, we can assign it a fixed offset (namely zero) despite it not having a fixed size/alignment.
If the skip extends beyond the data currently in the buffer, the buffer can be marked empty so that the next read will cause a fill_input_buffer call that can suspend.
If the true case did need the continuation block, but the false case doesn't, just merge the continuation block back into its single predecessor and move the IP there.
If we found something within the protocol itself, and our search began somewhere that is not in a protocol or extension thereof, remap this declaration to the witness.
It is important to check for IMAGE_FILETYPE_TIFF JPEG does not use absolute pointers instead its pointers are relative to the start of the TIFF header in APP1 section.
Note that we could do this in a later SILDiagnostics pass as well: this would be stronger (more equivalences exposed) but would have worse source location information.
Process intervals in order of start position, maintaining the set of active (live) and inactive (not live, but with live ranges that start after the current interval).
The FPI delta from instrFpToArDelta includes locals and iterators, so when we're in a resumed context we have to adjust for the fact that they're in a different place.
The HashCollection implementation makes use of s_theEmptyMixedArray, a special static empty array that has all of MixedArray's fields initialized to convenient values.
These are used when we can make an accurate prediction of where execution should flow, eventually, and when we want to let the program run normally until we get there.
This / assumes that field and global-variable bindings always bind at / least one name, which is probably a reasonable assumption but may / not be adequately enforced.
This file defines the SILVTable class, which is used to map dynamically dispatchable class methods and properties to their concrete implementations for a dynamic type.
This is fine so long as this parameter and all of those parameters up to (and including) the previously-bound parameter are either variadic or have a default argument.
This is important because while we cannot both define a new frame with DefInlineFP and phi it with an incoming frame from another side exiting block in the same block.
This module implements two code layout strategies for sorting a Vunit's blocks:  1) rpoLayout() implements a simple layout that sorts the blocks in reverse post-order.
This tracking can take two forms: - Absolute depth: the depth of the stack is exactly known for this block - Relative depth: the depth of the stack is unknown for now.
Traverses the code bottom up, keeping track of the currently live (single) status-flag register, or InvalidReg if there isn't one live, then iterates to a fixed point.
We consider relaxation profitable if there's not a single dominating type that accounts for RuntimeOption::EvalJitPGORelaxPercent or more of the time during profiling.
We don't want to leave them around in the system because later diagnostics will assume they are unsolvable and may otherwise leave the system in an inconsistent state.
We have to preserve the original order of the cases for string switches because of insane things like 0 being equal to any string that is not a nonzero numeric string.
We have to update the frame pointer and the stack pointer, and load the return value into the return register so the trace we are returning to has it where it expects.
We only try to remove mid-block unreachable code if we're not in an FPI region, because it's the easiest way to maintain FPI region invariants in the emitted bytecode.
We populate the name and nullable field of the alias directly from the specified type constraint and derive the AnnotType from the compute AnnotType in the constraint.
snprintf expects a the buffer capacity including room for the null terminator, writes the null termintor, and returns the full length not counting the null terminator.
when seting a dynamic property, do not write directly to the TypedValue in the MixedArray, since its m_aux field is used to store the string hash of the property name.
with the matching retain_value to the release_value in a predecessor basic block and the matching release_value for the retain_value_retain in a successor basic block.
*NOTE*: Apply instruction substitutions are for the Member from a protocol or class B, where this member was first defined, before it got overridden by derived classes.
/ / The goal of the most general type is to be (1) unambiguous to / compute from the substituted type and (2) the same for every / possible generalization of that type.
/ / This allows us to re-use the argument expression emitter for / some weird cases, like a shuffled tuple where some of the / arguments are going into a varargs array.
16 bits/cell is plenty for that too.) Since the JPEG code is intended to run in small memory model on 80x86 machines, we can't just allocate the histogram in one chunk.
A scalar type is a trivial subtype of a one-element, non-variadic tuple containing a single element if the scalar type is a subtype of the type of that tuple's element.
Also sets all catch-traces to null to ensure that they are reset as appropriate in any future translation (the unwinder always_asserts on null catch trace annotations).
Basically this is doing dynamic dispatch without a vtable in IRExtraData, instead using the Opcode tag from the associated instruction to discriminate the runtime type.
Can't open a glob as a file, it's meant to be opened as a directory if the function was called via FCallBuiltin, we'll get a bogus name as the stack frame will be wrong
Determine whether the given pattern binding declaration either has / an initializer expression, or is default initialized, without performing / any type checking on it.
Fallback implementation of curl_multi_select()  This allows the OSS build to work with older package versions of libcurl, but will fail with file descriptors over 1024.
Fast-path, if the needles just not there, or if it is and the haystack is ascii (meaning the needle must have been as well) Then we can skip the ICU overhead and return
For each captured argument of PAI, decrement the ref count of the captured / argument as appropriate at each of the post dominated release locations / found by Tracker.
I chose not to use a RequestEventHandler because setlocale() may be called during static variable initialization before any of the HHVM stuff like memory managers, etc.
If the base type is known to have a single protocol conformance in the current generic context, then we don't need to disambiguate the associated type name by protocol.
If the header starts with a DefLabel, the arguments from all the incoming edges need to be collected in a new DefLabel in the new pre-header, and Jmp'd into the header.
If the intersection allowed data, and either type was an option type, we can simplify the case to whether the unopt'd version of the option type couldBe the other type.
If this is the first instruction in the region, we check inner type eagerly, insert `EndGuards` after the checks, and generate profiling code in profiling translations.
If this static property was declared in a parent class, its value will be KindOfUninit, and we'll need to consult the appropriate parent class to get the initial value.
If we are forming a tuple and the tuple only has one element with reference semantics, a retain_value on the tuple is equivalent to a retain value on the tuple operand.
If we got all the way down to a truly ambiguous disjunction constraint with a conversion in it, the problem could be that none of the options in the disjunction worked.
If we haven't found our target yet and the node we are pre-visiting doesn't have a valid range, we still have to traverse it because its subtrees may have valid ranges.
Note: right now we're only asserting about normal successors, but there can be exception-only successors for catch blocks inside of fault funclets for finally handlers.
Now that we've emitted a bunch of instructions, including a load and store but also including other stuff, update the internal state of LifetimeChecker to reflect them.
Since we initialize our data structure by processing the loop nest bottom up, this should always give us the correct region for the level of the loop we are processing.
Such a thunk is called a "re-abstraction thunk" -- the AST-level type of the function value does not change, only the manner in which parameters and results are passed.
The right fix here is to update AbstractStorageDecl::addTrivialAccessors() to take brace locations and have callers of that method provide appropriate source locations.
The template variable live controls whether or not MemoryManager member variables are updated and whether or not to call helper methods in response to memory anomalies.
There can be no other function with this name on `cls', and we already ruled out the case where dispatch should've gone to a private function with the same name, above.
These booleans indicate whether this is currently the first or second pass over the global scope (or neither, if we're in a context where we only visit each decl once).
This is going to be the last basic block this program is going to execute and this block is inert from the ARC's prospective, no point to do any releases at this point.
This makes it dangerous to use this manager and a different destination manager serially with the same JPEG object, because their private object sizes may be different.
This struct represents an analyzed function pointer to determine the / candidates that could be called, or the one concrete decl that will be / called if not ambiguous.
This structure stores Exif header image elements in a simple manner Used to store camera data as extracted from the various ways that it can be stored in a nexif header
We instantiate IR_OPCODES after defining all the various source forms to do type assertions according to their form (see ir-opcode.h for documentation on the notation).
We only do the optimization for stack promoted object, because for these we know that they don't have associated objects, which are _not_ released by the deinit method.
We only handle a very simple pattern here where there is a single predecessor to the block, and the predecessor instruction is a try_apply of a throwing delegated init.
We use it to suppress potential unavailability and deprecation diagnostics on code that definitely will not run with the current platform and minimum deployment target.
What we really want is to have substituted the base type into the declaration reference, so that we can compare the actual types to which two type declarations resolve.
When the source expression might produce a non-optional reference that could legitimated be nil, such as with an initializer, allow this workaround to capture that nil:
is not in a namespace (namespaced classes treat methods with the same name as the class as just normal methods, not a constructor) then we give the deprecation warning.
*NOTE* We can only strip things here if we know that there is no semantic change in terms of upcasts/downcasts/enum extraction since this is used by other routines here.
/ / This entry point is designed to be used when the witness for a / particular requirement and adoptee is required, before the / conformance has been completed checked.
Because these don't provide a human readable locale string as output, the implementation maintains a thread-local object to persist the currently active locale settings.
C++ doesn't allow declaring empty arrays like C does, so we give it size 1 and use m_classVec's offset as the true size of Class when allocating memory to construct one.
Even for object types with different keys, if the underlying object type is the "same" (according to the linkage rules), the same Object representation will be returned.
FIXME: Assume (probably safely) that the hasMethodBB has only us as a predecessor, and cannibalize its bb argument so we can represent is as an ObjCMethod lowered value.
FIXME: Unfortunately, right now, in an unlikely race another thread could create another translation with the same type specialization that we just created in this case.
For partial_apply, if we've been asked to examine the body, the uses of the argument are okay there, and the partial_apply itself cannot escape, then everything is fine.
For these declarations (enum / cases and variable declarations) a Fix-It for an added availability / attribute should be suggested for the appropriate concrete location.
If the operand is an otherwise-unused 'metatype' instruction in the same basic block, zap it and create a 'metatype' instruction that directly produces a thick metatype.
If this is a Main source file, determine if we found code that needs to be executed (this is used by the repl to know whether to compile and run the newly parsed stuff).
If we are referring to a type within its own context, and we have either a generic type with no generic arguments or a non-generic type, use the type within the context.
If we have a tuple_extract that is extracting the only non trivial member of a tuple, a retain_value on the tuple is equivalent to a retain_value on the extracted value.
If we reach situations that would break that restriction, we must handle it conservatively (using a `pessimized' state, which is discussed some later, as a last resort).
If we're removing something (e.g. a keyword), do a bit of extra work to make sure that we leave the code in a good place, without extraneous white space around its hole.
If you try to add or replace a method to a class that isn't initialized yet, the Objective-C runtime will crash in the calls to class_replaceMethod or class_addProtocol.
Instead of breaking blocks on instructions that could throw, we represent the control flow edges for exception paths as a set of factored edges at the end of each block.
It can also be used by generic specialization and existential devirtualization passes to promote witness_method and protocol_method instructions to static function_refs.
List of Objective-C methods created by the type checker (and not / by the Clang importer or deserialized), which is used for / checking unintended Objective-C overrides.
Luckily this cannot happen since cond_br is the only terminator that allows for critical edges and all other "interesting terminators" always having multiple successors.
Meanwhile, we don't need to worry about finding unwanted hidden declarations from different modules because we do a module check before deciding that there's a conflict.
On ELF platforms there's no built in autolinking mechanism, so we pull the info we need from the .o files directly and pass them as an argument input file to the linker.
Our current cleanup emission logic, where we don't try to re-use cleanup emissions between various branches, doesn't require any code to be emitted at transition points.
Set the phi group for each phi use variable to that of the corresponding phi def variable (allocating a new group if the def variable has not already been assigned one).
The assumption we make is that 'args' and 'inoutArgs' were built up in parallel, with empty spots being dropped into 'args' wherever there's an inout argument to insert.
The reason for this is if the cast is not dead then there must be some other use after the cast that we will protect if a release is not in between the cast and the use.
This file defines the native Swift ownership transfer conventions and works in concert with the importer to give the correct conventions to imported functions and types.
This function appends a new KindOfRef to the array with the next available integer key, boxes v if it is not already boxed, and points the new value to the same RefData.
This means that this can happen: - The user sees a SIL diagnostic in one function - The user edits another function in the same file and introduces a typechecking error.
Track whether all fields in this record can be referenced in Swift, either as stored or computed properties, in which case the record type gets a memberwise initializer.
Use SILOneTypeValuesLayout: the type is for condition, the list has value for condition, result type, hasDefault, default basic block ID, a list of (Value ID, Value ID).
Using this static empty mixed array allows us to always assume data() is non-null, and it is better than calling MakeReserveMixed because it avoids doing any allocation.
We exclude continuation opcodes which transfer control out of the function, which allows cmds to get a chance to alter their behavior when those opcodes are encountered.
We will combine the version ranges from these annotations with the TRC for the valid location to overapproximate the running OS versions at the original source location.
When copying down an entry for a non-private method that has static locals, we want to make a copy of the Func so that it gets a distinct set of static locals variables.
gdcache.c  Caches of pointers to user structs in which the least-recently-used element is replaced in the event of a cache miss after the cache has reached a given size.
/ / This is an awful hack that makes it possible to work around several kinds / of problems: /   - initializers currently cannot fail, so they always return non-optional.
A struct nested inside another struct will either be logically a sibling of the outer struct, or contained inside of it, depending on if it has a declaration name or not.
Adar I, the month added for leap years, is sometimes referred to as the 13th month, but I have chosen to assign it the number 6 to keep the months in chronological order.
Allocate an uninitialized array of a given size, returning the array / and a pointer to its uninitialized contents, which must be initialized / before the array is valid.
Any changes to the logic here also need / to be reflected in PrintAsObjC, so that the Swift type will be / properly printed for (Objective-)C and in SIL's bridging logic.
Build the type refinement context for a StmtCondition and return a pair / of optional version ranges, the first for the true branch and the second / for the false branch.
Check that the use of an Array value, the value of an aggregate containing / an array, or the value of an element within the array, is safe w.r.t / make_mutable hoisting.
Closures will not have an 86pinit body, but still may have properties of kind KindOfUninit (they will later contain used variables or static locals for the closure body).
Consequently, checkSafeArrayElementUse must prove that no uses of the Array value, or projections of it can lead to mutation (element uses may only be retained/released).
Emit an error message about an unbound generic parameter existing, and / emit notes referring to the target of a diagnostic, e.g., the function / or parameter being used.
FIXME: If we reach this point, the program we're being handed is likely very broken, but it's still conceivable that this may happen due to invalid shadowed declarations.
FIXME: This should all just be a matter of getting the type of the sub-expression, but this doesn't work well when typeCheckChildIndependently is over-conservative w.r.t.
For every other use case a failed generator was identical to one that finished executing, but `getReturn` wants to throw an exception if the generator threw an exception.
Give a cond_br or switch_enum instruction and one successor block return / true if we can infer the value of the condition/enum along the edge to this / successor blocks.
If `definer' ends its block, it must have a fallthrough block, and `inst' will be inserted at the beginning of that block, as long as the block has no other predecessors.
If that gives us a forward declaration (which can happen with bound generic types), don't propagate that into the cache here, because we won't know how to clear it later.
If the protocol comes from clang and is not annotated and the protocol requirement itself is not annotated, then infer availability of the requirement based on its types.
If the requirement has a self parameter passed as an indirect +0 value, and the witness takes it as a non-inout value, we must load and retain the self pointer coming in.
If the user dynamically checks for correct type sizes in the generic function, a specialized function can contain the (not executed) bitcast with mismatching fixed sizes.
If we are predecessors only successor, we can potentially hoist releases into it, so associate the first pred BB and the case for each value that we are tracking with it.
If we're on the eager side of an async function, we have to zero-out the TV aux of the return value, because it might be used as a flag if we were called with FCallAwait.
It then procedes to block for up to 'timeout' seconds, waiting for the first actionable descriptor(s), which it then returns in the form of the original arrays passed in.
My attempt to incorporate alpha channel into the result worked poorly and degraded the quality of palette conversion even when the source contained no alpha channel data.
NOTE: If you make changes to how serialization and unserialization work, make sure to update reserialize() here and test_apc_reserialize() in "test/ext/test_ext_apc.cpp".
Note that in that book's description of DES the lookups for the initial, pbox, and final permutations are inverted (this has been brought to the attention of the author).
Note that, as instructions are cloned into the new blocks, the dest SSATmps of these instructions also need to be renamed, so they're added to `tmpRenames' along the way.
Note: it may seem like we should need a precondition on this rule that each incoming node is distinct, since Phi nodes don't necessarily have unique predecessor pointers.
Note: there is a general problem with the spillStack mechanism, in that it may sink stores that are not profitable to sink, but in this case we can work around it easily.
Note: we should not destroy user save handler here (if the session is restarted during request, the handler should be alive), it's destroyed only in the request shutdown.
Otherwise, ctx is derived from baseClass, so we know this protected property is accessible and we know ctx cannot have private property with the same name, so we're done.
Returns true if a diagnostic about an accessor being less available / than the accessor it overrides would be redundant because we will / already emit another diagnostic.
That aside, the greatest value wins, but we can't know that it will until we've scanned both numbers to know that they have the same magnitude, so we remember it in BIAS.
The debugger synthesizes typealiases of unbound generic types to produce its extensions, which subverts bindExtensionDecl's ability to create the generic parameter lists.
The magic number is stored to make sure bad values do not cause us to allocate bogus or extremely large amounts of memory when encountering an object with the new format.
The runtime needs to be able to freely manipulate live weak references without worrying about us mucking around with their bits, so weak references are completely opaque.
The user is an RCIdentical user of our Pin result and only has /    RCIdentity preserving insts, mark dependence, or the unpin we are /    trying /    to remove as users.
This function inspects a sil / value and strips trivial conversions such as values that are passed / as arguments to basic blocks with a single predecessor or type casts.
This function tries to infer the weight of any arc in the arcVec given the weights of other arcs in the list and totalWeight, which is the known sum of all their weights.
This matrix associates subpattern rows to their / corresponding guard expressions, and associates destination basic block / and columns to their associated subject value.
This should never happen, but when it does we have to bail out, since there's no sensible way to send data at this point and trying to do so will horribly corrupt memory.
To determine the time of the start of the next period add just enough to move beyond the start of the next period and then determine the time of the start of that period.
To ease migration, the 'array' type constraint will implicitly cast collections to arrays, provided the type constraint is not soft and the parameter is not by reference.
Use SILOneTypeValuesLayout: the type is for condition, the list has value for condition, result type, hasDefault, default, basic block ID, a list of (Value ID, Value ID).
We need to loosen_statics and loosen_values on instance properties, because the class could be unserialized, which we don't guarantee preserves those aspects of the type.
When the loop below finishes or when an exception is thrown, make sure that posLimit() get set to the correct value and that m_pos gets set to point to the first element.
getAddrOfWitnessTableOffset - Get the address of the global / variable which contains an offset within a witness table for the / value associated with the given function.
static variable use is safe here since simple store or fetch operations are atomic and because the actual probe process is not in danger of collisions or race conditions.
the following regex is also used at http://oauth.googlecode.com/svn/code/php/OAuth.php to help ensure uniform behavior between libs, credit goes to the original author(s)
'swifterror' fixes this physically, but there's still a risk of miscompiles because the LLVM optimizer may forward arguments positionally without considering 'swifterror'.
(The cleanups still happen, as they are threaded through here messily, but the explicit retains here counteract them, and then the retain/release pair gets optimized out.)
-- RC "lower bounds" -- A lower bound on the reference count of a must-alias-set indicates a known minimum for the value of its object's count field at that program point.
/ / This function is appropriate for ordinary situations where the / construction of the metadata value just involves calling idempotent / metadata-construction functions.
A single copy_addr can appear multiple times if the source and dest are to elements within a single aggregate, but we only want to pick up the CopyAddrKind from the store.
A store like this will generate 2 *indivisible* LSLocations, / 1 for each field and in addition to keeping a list of LSLocation, RLE also / keeps their available LSValues.
All we have to do here is incorporate our knowledge of the percentage of this pixel that is really "lit" by pushing the alpha value up toward transparency in edge regions.
Allow ExtInfos to differ in these ways: - the overriding type may be noreturn even if the base type isn't - the base type may be throwing even if the overriding type isn't
For example, all entries using the RegisterPreservingCC calling convention need a global, because they are currently always invoked indirectly using a client-side wrapper.
For more information on the level of compatibility, please refer to the comments in BF_set_key() below and to the crypt(3) man page included in the crypt_blowfish tarball.
Given a declaration that allows availability attributes in the abstract / syntax tree, return the declaration upon which the declaration would / appear in concrete syntax.
However, if the tested case is the only non-trivial case in the enum, then the destruction on the failure path will be a no-op, so we can disable the cleanup on that path.
If the call has any arguments, the FPushFunc will be in a different tracelet -- the tracelet will break on every FPass* because the reffiness of the callee isn't knowable.
If the source is a physical lvalue, the destination is a single address, and there's no semantic conversion necessary, do a copy_addr from the lvalue into the destination.
If there is no way a location can have an upward visible store at a particular point in the basic block, we do not need to turn on the genset and killset for the location.
If this is a ParamDecl for a closure argument that has an Unresolved type, then this is a situation where CSDiags is trying to perform error recovery within a ClosureExpr.
If we already have a block that qualifies as a pre-header, but pre-header was nullptr (asserted above), that means the block was added after this LoopAnalysis was created.
In cases where a parameter or return type is omitted, a fresh type variable is used to stand in for that parameter or return type, allowing it to be inferred from context.
It's not safe to cache the non-private results because we didn't search private imports there, but in most non-private cases the result will be cached in the final lookup.
NOTE: Unlike other bits of the metadata that should later be removed, this one is important because things check this value's flags to determine what kind of object it is.
Note however, that this is a *pointer* to a scanner, as it will be allocated by this call (and is the reason, too, why this function also must handle its own declaration).
Note that if `key' actually is an integer-ish string, we'd fail this check (and most likely would have failed the previous check also), but this false negative is allowed.
Note that we diagnose this here instead of letting diagnoseGeneralMemberFailure handle it, because it doesn't know how to handle lookup into a contextual type for an URME.
On the other hand if the takeover was started, we don't want to call shutdown because the new server might be listening on that socket and we would cause it to never work.
Otherwise, we have to be conservative (even with native reference-counting) in order to interoperate with code that might be working more generically with the memory/type.
Otherwise, we're passing an opaque tuple expression, and we should treat it as contributing to 'rethrows' if the original parameter type included a throwing function type.
Precondition: m_originalURL and m_queryString are set Postcondition: Output is false and we are redirecting OR m_rewrittenURL is set and m_queryString is updated if needed
Since that is not *that* interesting from an ARC perspective (i.e. no ref count operations in a loop), disable it on such functions temporarily in order to unblock others.
Since these are represented by a single byte in UTF8 (and will not be present in any multi-byte UTF8 representations), we can just switch on the value of the current byte.
Suppress GenericMetadataBuilderBase's default behavior of introducing fill ops for generic arguments unless they belong directly to the target class and not its ancestors.
TODO: In pseudo-main, the VGetG instruction invalidates what we know about the types of the locals because it could cause any one of the local variables to become "boxed".
The Map::accessor here establishes a write lock, which means that other threads, protected by read locks through Map::const_accessor, will not read erased values from APC.
The `doCheckStack' and `doInitArgs' callbacks should return truthy in order to short-circuit the rest of invokeFuncImpl() and return early, else they should return falsey.
The arguments may not be used in another block, because when the predecessor of SBB directly jumps to the successor, the SBB block does not dominate the other use anymore.
The candidate list of an unresolved_dot_expr is the candidate list of the base uncurried by one level, and we refer to the name of the member, not to the name of any base.
The idea is to generate the function body right after calling this function, so that all prologues are placed right before it, and with the hottest prologues closer to it.
The implementation F (the implementing method) which was found may have a different set of generic parameters, e.g. because it is implemented by a class D1 derived from B.
The passed-in ar is only useful in whole-program mode, so create a distinct ar to be used only for emission of this unit, and perform unit-level (non-global) optimization.
The semantic expression is set up by type-checking to include all the other children as sub-expressions, so if it exists, we should just bypass the rest of the visitation.
The source object and input buffer are made permanent so that a series of JPEG images can be read from the same file by calling jpeg_gdIOCtx_src only before the first one.
This is done by using DirectToStorage semantics above, with the understanding that the access semantics are with respect to the resilience domain of the accessor's caller.
This is used to ensure progress and eliminate the chance of going into an infinite loop in cases where (for example) we have recursive type-based specialization happening.
This means that after calling global_dce on a function, the type information in the block input states in the associated FuncAnalysis can no longer be considered accurate.
We don't try to track when a BoxedStaticStr might be converted to a BoxedStr, and we never guard on staticness for strings, so boxing a string needs to forget this detail.
/ / If the definition type is specified, the result will always be a / GlobalValue of the given type, which may not be at the / canonical address point for a type metadata.
A few of our optimization passes must be aware of every path out of a region, so throwing through jitted code without a catch block is very bad---and we abort in this case.
Add the error propagated from the previous line to form the complete error correction term for this pixel, and round the error term (which is expressed * 16) to an integer.
Also, we know that ctx cannot be the same or an ancestor of this, so we don't need to check if ctx declares a private property with the same name and we can fail fast here.
Apply a substitution to the given SILFunctionType so that it has / the form of the normal SILFunctionType for the substituted type, / except using the original conventions.
BSD/OS X has localeconv_l, which actually returns data held onto by the locale itself -- and since that's thread-local (since this object instance is) we can just use that.
Conceptually, the dependency from a debug instruction to its definition is in reverse direction: Only if its definition is alive, also the debug_value instruction is alive.
However, IE in all it's wisdom always sends the full path of the file on the user's filesystem, which means that unless the user does basename() they get a bogus file name.
However, certain aspects of object types can't be completely inferred at the declaration site (mainly static variable linkage related things like linkage name and address).
However, since the field offset vector only stores offsets of stored properties defined in Swift, we don't have to worry about indirect indexing of the field offset vector.
If we simply ignored the fact that a new pointer has been created at the store, that means the lower bound would be two after the two IncRefs, with no memory support flags.
In order to work around this, tell clang to force it to only 8 byte alignment, which causes it to emit an inlined version of memcpy which does not assume 16-byte alignment.
It is a little bit of a hack to use libafdt to send the shutdown request, but we need to synchronously shut down the admin server, so we cannot use the admin server for it.
It's possible we could assert the intersection of the types, but it's not entirely clear what situations this would happen in, so let's just not do it in this case for now.
Locations other than the frame and stack (e.g. object properties and whatnot) are always live on a function return---so mark everything read before we start killing things.
Most of the time we want to adjust to a corresponding "before" address with the exception of the start of the range where "before" can point to the end of a previous range.
Note that we wait to update m_used until after we've updated the strong iterators because we need to consult what the _old_ value of m_used before compaction was performed.
Note: This should be treated as a lookup for intra-module dependency purposes, but a subclass already depends on its superclasses and any extensions for many other reasons.
Open a new log file: determine the start of the current period, generate the log file name from the fileTemplate, determine the end of the period and open the new log file.
Protocol type manglings have a variable number of protocol names follow the 'P' sigil, so a trailing underscore is needed after the type name, unlike protocols as contexts.
Reparenting is required with: - nested autoclosures, because the inner autoclosure will be parented to the outer context, not the outer autoclosure - non-local initializers
Since not all of our unions carry a type register, there are some situations with strings and arrays that are neither constantly-foldable nor in the emitTypeTest code path.
So a stored variable should still have getter/setter USRs (pointing to the variable declaration), and an addressed variable should have its "getter" point at the addressor.
Support for collecting a set of generic requirements, both explicitly stated and inferred, and computing the archetypes and required witness tables from those requirements.
THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, AND THE AUTHORS AND DISTRIBUTORS HAVE NO OBLIGATION TO PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
The code below depends on cacheLookup having the right number of elements Push a dummy value even though we'll use the cacheID as an int instead instead of emitting a local
The way we maintain correctness here is to never move or eliminate reference counting operations unless we know about at least /two/ references to the object being counted.
This is slightly tricky because, unlike our other control constructs, the refined region is not lexically contained inside the construct introducing the refinement context.
This means we can't deal with situations where we have different stags, and right now we also don't try to deal with situations that have the same stag in a combinable way.
This seems like a good choice for now because it operates efficiently in blocks rather than bytes, and  the data returned from the collation iterator comes in 4byte chunks.
Use SILOneTypeValuesLayout: the type is for condition, the list has value for condition, result type, hasDefault, default basic block ID, a list of (DeclID, BasicBlock ID).
We rely on this side-effect in RepoAuthoritative mode right now, since the stat information is an output-param of resolveVmInclude, but we aren't really going to call stat.
We want to inline the argument to an array.uninitialized call, because this argument is most likely a call to a function which contains the buffer allocation for the array.
When an interval is split and the second part is spilled, possibly split the second part again before the next use-pos that requires a register, and enqueue the third part.
control flow sensitive types:  Things are also slightly complicated by the fact that we are analyzing some control flow insensitve types along side precisely tracked types.
looks like proxygen HTTP parser understands a few more methods than libevent: TRACE, COPY, MOVE, MKACTIVITY, CHECKOUT, MERGE, MSEARCH, NOTIFY, SUBSCRIBE, UNSUBSCRIBE, PATCH
o For loads of invariant locations, we're using information from the full flow-insensitive pass over the loop in analyze_loop that identified which locations are invariant.
(I.e. it has no predecessors other than `pred', and no successors other than `last'.)  This means middle can't be a Sig unless one of it's next or taken pointers is nullptr.
A (possible) use of the result of a candidate store prevents the candidate from being moved past the use, and also prevents the candidate from being killed by a later store.
ALGORITHMS  SERIAL DAY NUMBER TO JEWISH DATE  The simplest approach would be to use the rules stated above to find the molad of Tishri before and after the given day number.
Allocate memory, then copy the input, replacing invalid sequences with either the substitution character or nothing, depending on the value of RuntimeOption::Utf8izeReplace.
By adding KEEP_SECTION, both these functions end up in the same section, and by doing something reasonably silly in this one, we can ensure that no code folding takes place.
Create: (call_expr (dot_syntax_call_expr (decl_ref_expr(didSet)), (decl_ref_expr(self))), (decl_ref_expr(tmp))) or: (call_expr (decl_ref_expr(didSet)), (decl_ref_expr(tmp)))
ExternalFunctionDefinitionsElimination pass does not take functions / reachable via vtables and witness_tables into account when computing / a function liveness information.
Function names are already hashed, and the hash bits are random enough That allows us to do a faster combination of hashes using a known implementation (boost::hash_combine)
However, we can't rely on it being the only action because there may be other actions (e.g. BackenJobActions) that are not merge-module inputs but nonetheless should be run.
If an instruction takes a register operand defined as a constant, and there is valid immediate-form of that instruction, then change the instruction and embed the immediate.
If this length does not match the / 'DestinationCapacity' this function must be called again with a buffer of / the required length to get a lowercase version of the string.
In a convenience initializer, the sole element of the memory represents the self instance itself, so if self is neither initialized nor consumed, we have to free the memory.
It is probably fairly close to allowing you to access most of the metadata associated with hhvm's compiled unit format, although it's possible something has been overlooked.
Make an ArgGroup for elem instructions that takes: 1/ the pointer to a KindOfArray TV 2/ the index key, as a raw value or a TypedValue depending on whether the type is known
Note that some of these stack slots overlap with the frame locals of the callee-- those slots are inacessible in the inlined call as frame and stack locations may not alias.
Note: a cyclic inheritance chain will blow this up, but right now we'll never get here in that case because hphpc currently just modifies classes not to have that situation.
Serialize the witness table in two cases: 1) We're serializing everything 2) The type has a fixed layout in all resilience domains, and the conformance is externally visible
Spill space is allocated right before it's needed and freed before any instruction that exits the unit, which is any block-ending instruction with no successors in the unit.
There's a fair bit of complexity here right now, for these reasons:  o Sometimes we're 'logically' inlining a php-level call to a function that contains a NativeImpl opcode.
This can be done unconditionally here because we maintain the invariant throughout that either tvRef is KindOfUninit, or tvRef contains a valid object that result points to.
This file provides high-level entry points that use constraint systems for type checking, as well as a few miscellaneous helper functions that support the constraint system.
This has to happen before requestEventHandler shutdown hooks, because it can run user code which may need to access other RequestLocal objects (such as the stream registry).
This is safe because we are running on the executor's thread: it won't destruct until after it's been unregistered (which we check above) and that will happen on this thread
This is valid because we run on architectures where all pointers are the same size, and we always generate the heap scanners at the same time we're building everything else.
This means spare bits cannot be used if the payload value is address-only, because there is no way to strip the spare bits in that case without modifying the value in-place.
Title: Crop  A couple of functions to crop images, automatically (auto detection of the borders color), using a given color (with or without tolerance) or using a selection.
We are going to check conformance once we hit commit_to_conversions below, but we have to add a token restriction to ensure we wrap the metatype value in a metatype erasure.
We could conceivably let you use static memory and have our own thread local here that users can change and then reset it back to the default, but we haven't built that yet.
We need to access the type metadata for the fields, which could lead to infinite recursion in recursive types if we build the field type accessor during metadata generation.
We pass in false here since we need to signal to eraseInstFromFunction to not add this instruction's operands to the worklist since we have not initialized the worklist yet.
What this means depends on how the builtin is dealing with parameter coersion: new-style HNI builtins try to do a tvCoerceParamTo*, while older ones use tvCastTo* semantics.
*NOTE* We do not run this check when we have a generic type since generic types do not have type lowering and are always treated as non-trivial since we do not know the type.
/  / If a retain is sunk from Region A to Region B, that means there is no / blocking operation between where the retain was in Region A to where it is / sunk to in Region B.
Also returns true for cmds that should always break, like SessionStarted, and returns true when we have special modes setup for, say, breaking on RequestEnded, PSPEnded, etc.
Although the PHP doc about proc_close() says that the pipes need to be explicitly pclose()'ed, it seems that Zend is implicitly closing the pipes when proc_close() is called.
For return by reference (String, Object, Array, Variant), the builtin writes the return value into MInstrState::tvBuiltinReturn TV, from where it has to be tested and copied.
Given a pair of instructions that are already known to have the same kind, / type, and operands check any special state in the two instructions that / could disrupt equality.
However, whenever we handle removing memory support, if you need to remove one bit, you generally speaking are going to need to remove the support for the whole conflict set.
If running the function transforms did not result in new functions being added to the top of the worklist, then we're done with this function and can pop it off and continue.
If this is part of a call to a witness method for a non-class-bound protocol in a root class, then we could have a store to a temporary whose address is passed into an apply.
If this is the interesting case, we need to generate a CFG diamond for each element touched, destroying any live elements so that the resulting store is always an initialize.
If this length does not match the / 'DestinationCapacity' this function must be called again with a buffer of / the required length to get an uppercase version of the string.
If we could theoretically use the same information to increase the lower bound of a different set B, we can't do that at the same time---we have to choose one to apply it to.
If we do not find state for a specific value in any of our predecessor BBs, we cannot be the end of a switch region since we cannot cover our predecessor BBs with enum decls.
If we're creating trivial accessors for a stored property of a nominal type, the stored property is either witnessing a protocol requirement or the nominal type is resilient.
Implement findRetainPoints to peek though projections of the load, like unchecked_enum_data to find the true extent of the lifetime including transitively referenced objects.
Note: it's important that the unwinder makes a copy of the Fault it's currently operating on, as the underlying faults vector may reallocate due to nested exception handling.
The GeneralEffects should already contain AHeapAny in both loads and stores if it affects those locations for reasons other than re-entry, but does not need to if it doesn't.
This has the effect that a succession of list commands that specify no parameters will scroll sequentially through the source code in blocks of DebuggerClient::CodeBlockSize.
This is the same as typeCheckChildIndependently, but works on an arbitrary / subexpression of the current node because it handles ClosureExpr parents / of the specified node.
Time is stored if profiling, tracing, or collect_time is enabled, but it only needs to be collected on function exit if profiling or if computerized tracing output is enabled
Until perflab can automatically scale the values we give it to an appropriate range, we have to fudge these numbers so they look more like reasonable hardware counter values.
We cheat slightly in the lexer by turning T_ELSE T_WHITESPACE T_IF into T_ELSEIF  This makes the AST flatter and avoids bugs like https://github.com/facebook/hhvm/issues/2699
We have to look up our exiting blocks each time around the loop since if we split a critical edge, the exiting block will have a new terminator implying a new successor list.
We just smashed all of those callers-- treadmill the free to avoid a race (threads executing callers may end up inside the guard even though the function is now unreachable).
We need to be able to reclaim the function prologues once the unit associated with this function is treadmilled-- so record all of the callers that will need to be re-smashed
We're trying to handle this case correctly as far as the type inference here is concerned, but the runtime doesn't actually behave this way right now for declared properties.
php5 xdebug doesn't enable tracing if we cannot open the file, so we need to open it now as opposed to when we actually do the writing in order to ensure we handle this case.
/ / The bitvector indicates which subelements we're interested in, and result / captures the available value (plus an indicator of which subelement of that / value is needed).
/ / The lowered function type of the callee defines an abstraction pattern / for evaluating argument values of tuple type directly into explosions of / scalars where possible.
/ / The optimization is only done for stack promoted objects because they are / known to have no associated objects (which are not explicitly released / in the deinit method).
A factory to generate a unique instance of a UserIniData which will eventually end up in either the per-request or system-wide table that maps ini settings to their callbacks.
A scoped closure may not have a `cls', but we still need to preserve its `methodSlot', which refers to its slot in its `baseCls' (which still points to a subclass of Closure).
Create: (call_expr (dot_syntax_call_expr (decl_ref_expr(willSet)), (decl_ref_expr(self))), (declrefexpr(value))) or: (call_expr (decl_ref_expr(willSet)), (declrefexpr(value)))
Extra inhabitant information can be obtained at runtime through the value witness table, so there are no layout differences between a generic enum type and a substituted type.
For now we skip these so we don't get odd behaviour in default arguments and the like, but in the future we should consider creating appropriate regions for those expressions.
If the first operator's precedence is lower than the second operator's precedence, recursively fold all such higher-precedence operators starting from this point, then repeat.
If we cannot conservatively prove that the given RefCountState will not be removed, be conservative and clear the transition state, so we do not propagate KnownSafety forward.
If we're applying an operator function to a nil literal operand, we disallow value-to-optional conversions from taking place so as not to select an overly permissive overload.
Liking in sanitizers will add rpaths, which might negatively interact when other rpaths are involved, so we should make sure we add the rpaths after all user-specified rpaths.
Look at the origin/user ValueBase of V to see if any of them are / TypedAccessOracle which enable one to ascertain via undefined behavior the / "true" type of the instruction.
Modifications to the Linux kernel to support shutting down a listen socket for new connections only, but anything which has completed the TCP handshake will still be accepted.
Note that if intercept skips the callee, it tears down its frame but guarantees that m_savedRip remains valid, so this is safe (and is the only way to get the return address).
Note: right now this state is per-ASetInfo, but we must pessimize everything at once if we pessimize anything, because of how the analyzer will lose track of aliasing effects.
Once the integration completes, I'll play around with it some more and potentially change this implementation to use std::isnan() if it is exactly commensurate with our usage.
Program responsible for taking the parsed debug-information from TypeParser, analyzing it (along with user-provided annotations), and generating C++ code for GC type-scanners.
Several things could have gone wrong here, and we'll check for each of them at some point: - The keyword argument might be redundant, in which case we can point out the issue.
Suppress a deprecation warning if the availability checking machinery thinks the reference program location will not execute on any deployment target for the current platform.
The last param noQuotes indicates to serializer to not put the output in double quotes (used when printing the output of a __toDebugDisplay() of an object when it is a string.
The reason why it makes sense to / just use a sorted vector with std::count is because generally functions do / not have that many arguments and even fewer promoted arguments.
The source of those codes is at https://github.com/mongodb/mongo/blob/master/docs/errors.md  We should kill the connection so the next request doesn't do the same wrong thing.
There may be EHEnt regions covering the fault funclet, but if an exception occurs in the funclet it can also propagate to any EH region from the code that entered the funclet.
This analysis is basically normal, but slightly modified from the usual in order to deal with the way exceptional control flow is represented in our CFG (with factored edges).
This block contains concrete values for some but not all the expanded locations, recursively call collectLocationValues to materialize the value that reaches this basic block.
This file implements name lookup within the type checker, which can involve additional type-checking operations and the implicit declaration of members (such as constructors).
This information (FIXME) will be used by IRGen to lay out class vtables, and can be used by devirtualization passes to lower class_method instructions to static function_refs.
This might not be the most elegant solution, since you could fetch 100 results, get the first one, close the connection, get 99 more, and suddenly not be able to get any more.
This should probably just go to the Local repo always, except that our unit test suite is currently running RepoAuthoritative tests with the compiled repo as the Central repo.
Using the results of this analysis, we can add to the lower bound of some must-alias-sets when we see loads from locations that are known to be balanced at that program point.
We clone methods with static locals into derived classes, but the clone still points to the class the method was defined in (because it needs to have the right context class).
We consider a normal class better than an interface, because it might influence important things like method dispatch or property accesses better than an interface type could.
We need to walk the original parameter types in parallel because it only counts for 'rethrows' purposes if it lines up with a throwing function parameter in the original type.
When they return folly::none it is not a conservative thing: it implies the array is definitely not packed, packedN, struct-like, etc (we use this to return false in couldBe).
appendWithRef bumps the refcount: this accounts for the fact that the extra args values went from being present on the stack to being in (both) ExtraArgs and the variadic args
s_treadmill forces any Funcs that are being destroyed to go through a treadmill pass, to make sure we won't try to dereference something that's being pulled out from under us.
simplifyUnreachableBlock - Simplify blocks ending with unreachable by / removing instructions that are safe to delete backwards until we / hit an instruction we cannot delete.
AggregateAvailableValues - Given a bunch of primitive subelement values, / build out the right aggregate type (LoadTy) by emitting tuple and struct / instructions as necessary.
Because PHP callees can side-exit (or for that matter throw from their prologue), the program is ill-formed unless we have balanced reference counting for all memory locations.
Callback invoked by libmcrouter (by way of McRouter::onReply()) We're in the worker thread here, so we can't do any request allocations or the memory manager will get confused.
Emit unique side-effecting inline asm calls in order to eliminate the possibility that an LLVM optimization or code generation pass will merge these blocks back together again.
F if in -GH and not B--GH, D--GH, -H--GH, -H---GH else dropped if -GNED, -GN, else dropped if -DGE-, -DGI- or -DGY- (handled in D) else J if in -GE-, -GI, -GY and not GG else K
FIXME: For now, substitute in the bound type for literal collection exprs that would otherwise result in a simple conversion constraint being placed between two type variables.
Given that we've broken down a source value into this subobject, / and that we were supposed to use the given consumption rules on / it, construct an appropriate managed value.
If a function exists already and it is a non-optimizing compilation, simply convert it into an external declaration, so that a compiled version from the shared library is used.
If a stored property lacks an initial value and if there is no way to synthesize an initial value (e.g. for an optional) then we suppress generation of the default initializer.
If the current function was the last frame in the current VM nesting level, rethrow the exception, otherwise go to the first step and repeat this process in the caller's frame.
If the operand is an otherwise-unused 'metatype' instruction in the same basic block, zap it and create a 'metatype' instruction that directly produces an Objective-C metatype.
If the solver has allocated an excessive amount of memory when solving for this expression, short-circuit the binding operation and mark the parent expression as "too complex".
If there are any -verify errors (e.g. differences between expectations / and actual diagnostics produced), apply fixits to the original source / file and drop it back in place.
If this indexed type is always going to be a complete conservative scan, than we're always going to have a non-trivial action for its scanner, so its always pointer followable.
If we found a typealias first, and now have an associatedtype with the same name, it was a Swift 2 style declaration of the type an inherited associatedtype should be bound to.
If we're at the end of a closure, paren or tuple expr, and the context is a paren/tuple expr ending with that sub expression, and it ends on the same line, don't add an indent.
In HardTypeHints mode, we assume that if this opcode doesn't throw, the parameter was of the specified type (although it may have been a Ref if the parameter was by reference).
It works with the latter because both ANSI C and C++ allow castless assignment from any pointer type to void*, and deal with argument conversions as though doing an assignment.
Since popen() doesn't indicate if the internal fork() doesn't work (e.g. the shell can't be executed) we explicitly set it to 0 to be sure we don't catch any older errno value.
Since the lower bound is non-zero, we don't need to worry about changing lower bounds in other sets that May-Alias this one, because of the "exclusivity" rule for lower bounds.
Subclasses must override SILWitnessVisitor::visitAbstractStorageDecl() / to call addAbstractStorageDecl(), since we need the substitutions to / be passed down into addMethod().
Suppress the diagnostic if we are in synthesized code inside a synthesized function and the reference is lexically contained in a declaration that is itself marked unavailable.
The Type we're allowed to assume any static property contains is the union of the ClassInfo-specific type with the unknown class type for that property name that's stored here.
The VASMs that are composed of these kind of operations, must be lowered to first extract the operator into a register and later perform operation using the entire register, i.
The intention is the caller would include other information they care about in the tail of the array so they can decide how to act on the potentially-now-queryable descriptors.
The protocols are the same at every level, so we can just set the metatype correctly and then recurse, letting the recursive call fill in the conformance information correctly.
The reason why this is different from the ref bitcast is b/c the use of a ref bit cast is still a ref typed value implying that our ARC dataflow will properly handle its users.
This is necessary as when we perform the RLE in the last iteration, we must handle loops, i.e. predecessor blocks which have not been processed when a basic block is processed.
To handle mutations of public statics where the name is known, but not which class was affected, these always need to be unioned with values from IndexData::unknownClassSProps.
Unless we've already done this, retypecheck the specified child of the / current expression on its own, without including any contextual / constraints or the parent expr nodes.
php5 xdebug doesn't enable profiling if we cannot open the file, so we need to open it now as opposed to when we actually do the writing in order to ensure we handle this case.
A potential binding from the type variable to a particular type, / along with information that can be used to construct related / bindings, e.g., the supertypes of a given type.
After a null check, if it's actually an object we can just do LdPropAddr, otherwise we just give out a pointer to the init_null_variant (after raising the appropriate warnings).
As long as it's a pointer type it doesn't matter exactly which for either ABI type generation or standard Obj-C type encoding, but protocol extended method encodings will break.
Because of how we build MustAliasSets (essentially canonical(), or groups of LdCtx instructions), it is guaranteed that this widestType includes all possible values for the set.
Convert the source args to unsigned here so that (1) the compare will be unsigned as it is in strncmp() and (2) so the ctype functions will work correctly without extra casting.
FIXME: We shouldn't even get here if the function isn't locally generic to begin with, but fixing that requires a lot of reengineering for local definitions in generic contexts.
Find the initial set of instructions in this function that appear to be live in the sense that they are not trivially something we can delete by examining only that instruction.
Given two expressions used as indexes to the same SubscriptDecl (and thus / are guaranteed to have the same AST type) check to see if they are going to / produce the same value.
However, our optimizer is smart enough now to recognize that an initializer can "never" produce nil, and will optimize away any attempts to check the resulting optional for nil.
If the first operator's precedence is higher than the second operator's precedence, or they have matching precedence and are both left-associative, fold LHS and RHS immediately.
If we're emitting top-level code, then emit a "mark_function_escape" that lists the captured global variables so that definite initialization can reason about this escape point.
In practice that race is much less likely to cause problems, because the other thread will generally invoke the autoloader and then find out its defined by the time that's done.
It additionally performs dead code elimination when it initially adds instructions to the work queue in order to reduce compile time by not visiting trivially dead instructions.
JEWISH DATE TO SERIAL DAY NUMBER  The year number is used to find which 19 year metonic cycle contains the date and which year within the cycle (this is a division and modulus).
Note: when unwinding from an exception the callee may not be the first AR on the stack, however, with the exception of Call, and CallArray, the next frame will always be native.
Rationale: this is partially intended to make it trivial to catch wrong-number-of-arguments errors, although it probably could be done without this if you feel like changing it.
The complete set of substitutions may be different, e.g. because the found witness thunk F may have been created by a specialization pass and have additional generic parameters.
The information we need to record in generic type metadata / is the information in the type's generic signature, minus the / information recoverable from the type's parent type.
The number of OptionalEvaluationExprs between the point of the inner cast and the enclosing OptionalEvaluationExpr (exclusive) which represents failure for the entire operation.
The reference is safe if an over-approximation of the running OS versions is fully contained within an under-approximation of the versions on which the declaration is available.
The tracked FPI state must always be the same, notice that the size of the FPI stacks may differ as the FPush associated with one of the merged blocks may be outside the region.
This case occurs when the current target class `cls' and the class we saw last time in mceKey have some shared ancestor that defines the method, but neither overrode the method.
This is true if the class or any of its ancestors: - is generic, - is resilient, - has a parent type which isn't emittable as a constant, - or has a field with resilient layout.
This makes the exit path more expensive, so we try to allocate spill space as late as possible to avoid pessimising fallbackcc/bindjcc instructions unless it's really necessary.
This value is computed by adding up the profiling weights of all the Profile translations that may execute immediately before the Profile translation containing the loop header.
This walks the generic signature's requirements, similar to Solution::computeSubstitutions but with several differences: - It does not operate within the type constraint system.
We don't use the iterator if we have a delegate generator (as iterators mess with the internal state of the generator), so short circuit and dont init our iterator in that case.
We use an approach that tries to minimize side-channel leaks of password information - that is, we mostly use fixed-cost bitwise operations instead of branches or table lookups.
argArray was exhausted, so there are no "extra" arguments but there may be a deficit of non-variadic arguments, and the need to push an empty array for the variadic argument ...
rdar://problem/22674524 If we intend to relatively address this string, don't mark it with unnamed_addr to prevent it from going into the cstrings section and getting coalesced.
simplifySwitchEnumUnreachableBlocks - Attempt to replace a / switch_enum_inst where all but one block consists of just an / "unreachable" with an unchecked_enum_data and branch.
/ / Another way to implement the DSE optimization is to keep the instructions / that read and/or write memory without breaking the memory read/written / using the ProjectionPath.
/ / This allows us to use an arbitrary conditional downcast to / evaluate an "is" / "as" pattern, which includes any kind of / downcast for which we don't have specialized logic.
By looking at bar without any knowledge of foo, we can know that it is safe to promote this to a by-value capture, allowing x to live on the stack under the following conditions:
Enables the hotfixing of a bug that occurred with D1797805 where per request user settings (like upload_max_filesize) were not able to be accessed on a server request any longer.
First, grab a write lock on s_instanceCounts and grab the current set of counts as quickly as possible to minimize blocking other threads still trying to profile instance checks.
For all loop types, throws one of a variety of exceptions for various errors, and throws DebuggerClientExitException when the event loop is terminated due to the client stopping.
Helper for removing instructions in the rest of this file---if a debugging mode is enabled, it will replace it with a debugging instruction if appropriate instead of removing it.
If it does, the overloads were created after the associated overloaded id expression was created, and we'll need to add a new disjunction constraint for the new set of overloads.
If there is a transition from 1 to 0, that means we have a partial merge, which means the retain can NOT be sunk to the current block, so place it at the end of the predecessors.
If this binding is one of multiple patterns, each individual binding will just be let, and then the chosen value will get forwarded into a var box in the final shared case block.
If this compilation unit entirely lies within the begin/end range, specify a begin parameter of "0", which will stop printDIE() from doing range checks (which is more efficient).
If we find a non-OrdStr use, we're not going to do the optimization, so clear the list, and make sure this one is first, so we can easily skip without searching the whole vector.
If we know a-priori that an object-type is a template, and the debug information indicates the object type has no template parameters, do a hacky check on the object type's name.
In other words, it can be thought of as an optimization to clear the memory support state when we see a PureStore with a known target location: it's not required for correctness.
In the cases where we can statically determine the function that / we'll call to, replace an apply of a witness_method with an apply / of a function_ref, returning the new apply.
MurmurHash2, 64-bit versions, by Austin Appleby  The same caveats as 32-bit MurmurHash2 apply here - beware of alignment and endian-ness issues if used across multiple platforms.
The goal is to sink IncRefs past Check* and Assert* instructions that may provide further type information to enable more specialized IncRefs (or even completely eliminate them).
The only things we are going to do is write uninits to the non-passed params and to the non-parameter locals, and possibly shuffle some of the locals into an ExtraArgs structure.
The requirement is that we can't create another reference to the array by performing an array operation: for example, storing or appending one array into a two-dimensional array.
These declarations are uniqued by signature, so it is totally random (determined by the hash function) which of the equivalent declarations (across multiple modules) we will get.
This / means that from an RC use perspective, the object can be ignored since it is / up to the frontend to communicate via fix_lifetime and mark_dependence these / dependencies.
This code ensures that version 2 messages are received only by receivers that previously sent a version 1 message (thus indicating their ability to deal with version 2 messages).
This could be improved by doing an "isCaptured" analysis when emitting address-only let constants, and emit them into an alloc_box like a variable instead of into an alloc_stack.
This should never happen because the trie should only ever contain prefixes of fixed-size network addresses, so the trie should never be any deeper than the network address size.
We can assume it's by value, because either we're calling a function that doesn't exist (about to fatal), or we're going to an __call (which never takes parameters by reference).
We can't call the offsetGet method on `base` because users aren't expecting offsetGet to be called for `isset(...)` expressions, so call the method on the base ArrayObject class.
Yes this does seem beyond strange, but that is what the PHP parser does when it sees a function declared inside a namespace, so we too have to pretend there is no namespace here.
getAddrOfWitnessTableOffset - Get the address of the global / variable which contains an offset within a witness table for the / value associated with the given member variable..
(For example, We don't want to introspect an 'if' expression to see if it has default arguments.) Instead, we should bind the type variable to the first element type of the tuple.
(If we happen to release the write lease after they jump but before they get into REQ_RETRANSLATE, they'll acquire it and generate a translation possibly for this same situation.)
/ / Creating an instance of this object will cause it to figure out / whether we are in the debugger function, whether it needs to swap  / the Decl that is currently being parsed.
/ Since it is supposed to be a load from a let property with / statically known constant initializer, only struct_element_addr / and tuple_element_addr projections are considered.
A simple little state-machine to strip out html and php tags  State 0 is the output state, State 1 means we are inside a normal html tag and state 2 means we are inside a php tag.
Additionally it will enable a user to exactly simulate / Swift's LLVM pass pipeline by using the same pass pipeline building / machinery in IRGen, something not possible with opt.
And importantly, the memory support bits are may-information: just because a bit is set, doesn't mean that we know for sure that memory location contains a pointer to this object.
Apply a substitution to this polymorphic SILFunctionType so that / it has the form of the normal SILFunctionType for the substituted / type, except using the original conventions.
But if we're unwinding through the constructor's RetC, the constructor has logically finished and we're unwinding for some internal reason (timeout or user profiler, most likely).
But it can return Invalid if a type-checking / failure prevents it from deciding that, and it can return None / if the function is an autoclosure that simply doesn't throw at all.
Don't update f's m_cls if it doesn't have AttrClone set: we're cloning it so that we get a distinct set of static locals and a separate translation, not a different context class.
Essentially, an entry a is less than an entry b iff:  - a starts before b - a starts at the same place, but encloses b entirely - a has the same extents as b, but is a parent of b
For a subl instruction (l means 32bits), the result must be placed in the lower 32bits (X means the result value): "0x44582C2XXXXXXXX" and the higher 32bits should not be touched.
Generate accessor functions for all of the declared variables, which Builtin.once the lazy global initializer we just generated then return the address of the individual variable.
If there is no return type constraint, or if the return type constraint is a typevar, or if the top of stack is the same or a subtype of the type constraint, then this is a no-op.
In php, you can access base class static properties through derived class names, and the access affects the property with that name on the most-recently-inherited-from base class.
Invoke the given PHP, possibly specialized to match the type of the current function on the stack, optionally passing a this pointer or class used to execute the current function.
It's not incorrect to leave things out of the kills set, but this assertion is here because we shouldn't do it on purpose, so this is here until we have a reason not to assert it.
Mangle normal identifiers as count identifier-char+ where the count is the number of characters in the identifier, and where individual identifier characters represent themselves.
Mangle the module name if: - the extension is defined in a different module from the actual nominal type decl, - the extension is constrained, or - the extension is to a protocol.
Neither the name of the author nor the names of other contributors may be used to endorse or promote products derived from this software without specific prior written permission.
None of these kinds should be encountered because they're either not interesting to begin with, or are mapped to different headers, so we shouldn't get these from the pointer map.
Note that unlike the above we're going to assign location ids to the individual stack slots in AStack portions of AliasClasses that are unions of AStack ranges with other classes.
Note though that previously we tried targeting specific options considered semantically relevant but it proved too fragile (very easy to miss some new compiler invocation option).
Since check is a control flow instruction, it needs to end the block, so all the code after it has to move to either the taken block (exit) or the fallthrough block (specialized).
That expression happens to cause an assumption that we made earlier to be violated (that `ar` is on the stack), so if we detect this situation we need to fix up the value of `ar`.
That is, we allow equality in stopping tests when the round-nearest rule will give the same floating-point value as would satisfaction of the stopping test with strict inequality.
The RValue will have one scalar ManagedValue / for each exploded tuple element in the RValue, so this needs to make the / shape of the initialization match the available elements.
The most general convention is generally to pass the entire tuple indirectly, but if it's not materializable, the convention is actually to break it up into materializable chunks.
The one exception to this is if we are given an empty iterator, in which case ContAssignDelegate will remove our delegate and just send us to YieldFromDelegate to return our null.
This file implements the IterativeTypeChecker class, which performs iterative type checking by tracking the set of outstanding type-checking requests and servicing them as needed.
We may not have optimized these functions yet, and it could be beneficial to rerun some earlier passes on the current function now that we've made these direct references visible.
When an EOF's been seen but there's still some text to process then we mark the buffer as YY_EOF_PENDING, to indicate that we shouldn't try reading from the input source any more.
regular file, check next possibility  If stat() tells us the file has zero length, report here that the file is empty, so we can skip all the work of opening and reading the file.
ssize_t IterRewind(const ArrayData*, size_t pos)  Returns the position of the element that comes before pos, or the canonical invalid position if there are no elements before pos.
- a function to release a userdata struct when it is no longer being managed by the cache  In the event of a cache miss the cache is allowed to grow up to a specified maximum size.
/ / If the access requires runtime initialization, that initialization / must be dependency-ordered-before any load that carries a dependency / from the resulting metadata pointer.
A class is allowed to implement two interfaces that share the same slot if we'll fatal trying to define that class, so this has to happen after all of those fatals could be thrown.
Add filters to determine if a Clang availability attribute applies in Swift, and if so, what is the cutoff for deprecated declarations that are now considered unavailable in Swift.
Also worth discussing is that there are several runtime objects in the VM with operations that have behavioral differences based on whether the reference count is greater than one.
As far as the linetable is concerned, cleanups at the end of a lexical scope should point to the cleanup location, which is the location of the last instruction in the basic block.
By these conditions, a pointer followable type is one which is known to be allocated out of the request heap, and transitively leads to a countable type via some chain of pointers.
Determine whether the given context is an extension to an Objective-C class / where the class is defined in the Objective-C module and the extension is / defined within its module.
FIXME: Member function pointers can be mapped to curried functions, but only when we can express the notion of a function that does not capture anything from its enclosing context.
For example, storing to a local on a frame is weak because if no other uses of the frame are keeping it alive (for example a load of that same local), we can just remove the store.
For non-interface classes, each method in a php class has an entry in its ClassInfo method table, and if it's not special, AttrNoOverride, or private, an entry in the family table.
Format: attributes such as transparent and number of substitutions, the callee's substituted and unsubstituted types, a value for the callee and a list of values for the arguments.
If any of cond_br edges are critical edges, do not perform the transformation, as SIL in canonical form may only have critical edges that are originating from cond_br instructions.
If the expression is an explicit closure expression (potentially wrapped in / IdentityExprs), change the type of the closure and identities to the / specified type and return true.
If the type is in the same source file, or has a common value witness table exported from the runtime, we can project from the value witness table instead of emitting a new record.
If we're calling a member of a non-class-constrained protocol, but our archetype refines it to be class-bound, then we have to materialize the value in order to pass it indirectly.
Mangle normal identifiers as: count identifier-char+ where the count is the number of characters in the identifier, and where individual identifier characters represent themselves.
Opcode arguments must be on the same line as the opcode itself, although certain argument types may contain internal newlines (see, for example, read_jmpvector or string literals).
Perform a strong_release instruction at the current location, attempting / to fold it locally into nearby retain instructions or emitting an explicit / strong release if necessary.
Scan the blocks in a post-order direction to make sure that we sink the users of each instruction before visiting the instruction itself to allow us to scan the function just once.
So, for example, a type T can have an automatically generated scanner for some instances of T, but a conservative scanner for others depending on which type index the instance has.
The first time this unit is merged, if the classes turn out to be all unique and defined, we replace the PreClass*'s with the corresponding Class*'s, with the low-order bit marked.
Therefore, we only include the function body along with the DV init if both (a) the function has a single proflogue, and (b) the size of the function is within a certain threshold.
This is because aggregate types (various array subtypes) could have some parts become more refined when inferring it in a context-sensitive way, while other parts are less refined.
This situation can arise due to conservatively reducing the lower bound, or due to pure stores happening before IncRef instructions that raise the lower bound for that new pointer.
This transformation is only appropriate if we believe the check failing is very unlikely, because it can cause new regions to be generated that duplicate portions of the loop body.
This type variable is only currently associated with the function being applied, and the only constraint attached to it should be the disjunction constraint for the overload group.
Unbound generic type can override a method from a bound generic class, but this unbound generic class is not considered to be a subclass of a bound generic class in a general case.
Unless we're compiling multiple modules at once, or if the other module re-exports this one, it shouldn't be possible to have a dependency from that module on anything in this one.
Unserialize happens in the request thread where we can allocate smart pointers Use this opportunity to marshal the saved data from persistent data structures into per-request data.
We are allowed to see through exactly one "partial apply" instruction or one "thin to thick function" instructions, since those are the patterns generated when using auto closures.
We would have to prove that something in this function is holding the weak value live across the promoted region and that isn't desired for a stable diagnostics pass this like one.
We'd only do that anyway for types that don't guarantee the existence of a non-unique access function, and that should never be true of a resilient type with external availability.
When walking the use list, if we index into a struct element, keep track / of this, so that any indexes into tuple subelements don't affect the / element we attribute an access to.
- consumes reference of the given cell - produces reference for the returned StaticWaitHandle object  Both the JIT and bytecode.cpp assume this function gives the nothrow guarantee.
Check to see if this is a locator referring to something we cannot or do here: in this case, we ignore paths that end on archetypes witnesses, or associated types of the expression.
Continuations above that level are skipped as, if we see one, it means that the continuation that controls them - i.e, the lower-level continuation preceding them - failed to match.
Empirically and surprisingly (20Jan2015): server mode: the contents of system map are     destructed on SIGTERM CLI    mode: the contents of system map are NOT destructed on SIGTERM
Final elem ops This is a helper for final defining Elem operations that need to handle array chains and frame effects, but don't yet do anything better than supplying a single type.
For the purpose of this function, 'word' is defined as a locale dependent string containing alphabetic characters, which also may contain, but not start with "'" and "-" characters.
Given the range of a reference to an unavailable symbol and the / declaration context containing the reference, make a best effort find up to / three locations for potential fixits.
HACK: For synthesized trivial accessors we may have not a valid location for the end of the braces, so in that case we will fall back to using the range for the storage declaration.
If the current function was the last frame in the current VM nesting level, re-throw the C++ exception, otherwise go to the first step and repeat this process in the caller's frame.
If the type is itself an archetype, we could always potentially bind it to the superclass (via external retroactive conformance, even if the type isn't statically known to conform).
If these functions are persistent, it's possible another thread could call one of those functions before we define the closures, and try to use closure classes that don't exist yet.
If we can't get a translation at the current SrcKey, interpret basic blocks until we end up somewhere with a translation (which we may have created, if the lease holder dropped it).
In Swift's AST-level type system, function types are allowed to be equivalent or have a subtyping relationship even if the SIL-level lowering of the calling convention is different.
It either sets the value to `v', or binds the value to `v', depending on whether `v' is "observably referenced"---i.e. if `v' is already KindOfRef and RefData::isReferenced is true.
It will group the / available value's by the LSValue base, i.e. the LSValues come from the / same instruction, and then use extraction to obtain the needed components / of the base.
Neither the name of the University nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
Next, the color-selection step begins with a box representing the whole color space, and repeatedly splits the "largest" remaining box until we have as many boxes as desired colors.
On the other hand, for a PureStore with a known destination, we don't need to reduce the lower bound of any set that was supported by that location, since it never implies a DecRef.
Perform basic sequential layout given a vector of metadata pointers, / calling a functor with the offset of each field, and returning the / final layout characteristics of the type.
Second, the calculation algorithm described in "Jewish Calendar Mystery Dispelled" was coded and used to verify all dates from the year 1 (3761 B.C.) to the year 13760 (10000 A.D.).
This can be done / one of two ways: / /  1) recursively scalarize down the initialization on demand if the type of /     the RValue is tuple type and the initialization supports it.
This function goes through all the blocks' `data' and marks as deleted the ones that are equivalent (per the `equivalent' function above) to another block after relaxing the guards.
This is a member lookup, which generally means that the call arguments (if we have any) will apply to the second level of parameters, with the member lookup binding the first level.
This will normally correspond to the main function entry (for normal, regular bytecode), but it may not be for irregular functions written in hhas (like array_map and array_filter).
We accomplish this with req nodes at level 2 for all asets that could be boxed before we see builtin calls (we could do it only to the ones that could be args, but we don't bother).
We lazily / create ObjC protocol_t records for protocols, storing references to the / record into the __objc_protolist and __objc_protorefs sections to be / fixed up by the runtime.
We track the highest position at which a spill slot was owned, and only reassign it to a Vreg if its lifetime interval (including all splits) is strictly above that high water mark.
XDEBUG_CC_UNUSED and XDEBUG_CC_DEAD_CODE not supported right now primarily because the internal CodeCoverage class does support either unexecuted line tracking or dead code analysis
-- More about Memory -- Another consideration about memory in this module arises from the fact that our analysis passes make no attempt to track which object pointers may be escaped.
/ / Given the case which the 2 fields of the struct both have available values, / RLE can find their LSValues (maybe by struct_extract from a larger / value) and then aggregate them.
/ / However, SIL functions take zero or more parameters and the natural entry / point of a method takes Self as an additional argument, rather than / returning a partial application.
0x7F would be called ASCII text, but many systems might reasonably consider some characters outside this range to be alphabetic, so the file command would call such characters ASCII.
Basically, CallBuiltin observes the reference count (at level 2) for their possibly-boxed args, even though they can't decref the pointer through the memory locations for those args.
Because these attributes might not be appertaining to the accessor, but to the first declaration inside the implicit getter, we need to save the parser position and restore it later.
Conceptually, the dependency from a debug instruction to its definition is in reverse direction: Only if its definition (the Arg) is alive, also the debug_value instruction is alive.
Duplicate method names override parent methods, unless the parent method is final and the class is not a __MockClass, in which case this class definitely would fatal if ever defined.
For function that requires more than 1 iteration of / the data flow this is populated when the first time the functions is / walked, i.e. when the we generate the genset and killset.
Get the fragile type information for the given type, which is known / to have undergone SIL type lowering (or be one of the types for / which that lowering is the identity function).
Given a list of a specific marker object type, apply the given callable f to it (which should extract the marked type out of it), sort and uniquify the resultant list, and return it.
However, since constructor ordering is only known to be an issue with GNU libc++ we're probably OK on other compilers so let the situation pass silently instead of issuing a warning.
If an initializer has an override attribute but does not override anything or overrides something that doesn't need an 'override' keyword (e.g., a convenience initializer), complain.
If there is no contextual type available, tell typeCheckExpression that it is ok to produce an ambiguous result, it can just fill in holes with UnresolvedType and we'll deal with it.
If we don't bail out, we end up filling in just one type in "result" instead of two and then the compiler will crash later when it tries to create the bound generic from only 1 type.
If we see that there is an outstanding weak retain of the object, we need to fall back on swift_release, because it's possible for us to race against a weak retain or a weak release.
It does not attempt to remove unnecessary evaluation stack manipulation spanning basic blocks, but it uses the same local DCE code and will eliminate intra-block stack manipulations.
Note: for now we're merging counted arrays into whatever type it used to have in the following set functions, and returning arr_*'s in some cases where we could know it was a carr_*.
Note: we could use the gen set here to remove support entries when we step the mrinfo, but it's not useful because only CallEffects causes it right now, and SSATmps can't span calls.
The meaning and interpretation of the DIEs is deliberately left vague by the standard, so different compilers can encode things in different ways (and no implementation is bug free).
The reason we have this unusual case only when dealing with builtin calls is that in that situation, we're actually tracking references and memory locations associated with the call.
The storage type of a class existential is a struct containing / a refcounted pointer to the class instance value followed by / witness table pointers for each conformed-to protocol.
This is enforced by semantic analysis, so the early exit here is a performance optimization and also prevents us from erroneously including those protocols before they get diagnosed.
This makes it possible for a type to conform to an Objective-C protocol that is missing annotations but whose requirements use types that are less available than the conforming type.
We simplify cases where there is a single use of the argument that is an extract from a struct or tuple and where the predecessors all build the struct or tuple and pass it directly.
With slave_okay being true or absent, the RP is switched to SECONDARY PREFERRED but only if the current configured RP is PRIMARY - so that other read preferences are not overwritten.
sqlite3_open_v2() will silently open in read-only mode if file permissions prevent writing, and there is no apparent way to detect this other than to attempt writing to the database.
'start' and 'length' can be arrays (in which case we step through them in sync with stepping through 'str'), or not arrays, in which case we convert them to ints and always use those.
/ / Note, this set is different from the PossiblyUnreachableBlocks as these / are the blocks that do contain user code and they might not be immediate / successors of a folded branch.
Bridge the given Objective-C object to its corresponding Swift / value, using the appropriate witness for the / _ObjectiveCBridgeable._unconditionallyBridgeFromObjectiveC requirement.
FIXME: We might need to go through ObjC dispatch for references to constructors imported from Clang (which won't have a direct entry point) or to delegate to a designated initializer.
For effects on locals, we perform the type effects of each operation on base.type, and then allow moveBase() to make the updates to the local when we know what its final type will be.
For type constants, we have to use the value from the PreClass of the declaring class, because the parent class or interface we got it from may have replaced it with a resolved value.
In / particular, we DCE instructions as we go, to avoid adding them to the / worklist (this significantly speeds up SILCombine on code where many / instructions are dead or constant).
In such a case we want to make sure the associatedtype is frontmost to generate generics/witness lists correctly, and the alias will be unused/useless for generic constraining anyway.
Instructions that we do not recognize (and thus will not move) and that must* use RCIdentity, implies we are always known safe as long as meet over all path constraints are satisfied.
Our method of efficiently finding nearest colors is based on the "locally sorted search" idea described by Heckbert and on the incremental distance calculation described by Spencer W.
Rather than lose this distinction in vixl (it's really helpful for avoiding stupid mistakes), we sacrifice the ability to represent all 32 SIMD regs, and pretend there are 33 GP regs.
Return true if the given value is an instruction or block argument that is / known to produce a nonaliasing address with respect to TBAA rules (i.e. the / pointer is not type punned).
Subtract s_nextThreadIdx because if n threads start at the same time, one of their start times will be increased by n-1 (and we need to subtract 1 anyway, to deal with exact seconds).
TODO: this should probably read out the other elements of the global data which control Option or RuntimeOption values -- the others are read out in an inconsistent and ad-hoc manner.
The easiest case is if we're going to use all of the available payload tag bits (plus potentially some extra bits), because we can just straight-up use CommonSpareBits as that bitset.
The enum value is either passed as an extra argument if we are moving an retain that does not refer to the enum typed value - otherwise it is the argument to the refcount instruction.
The payload might be zero sized, if the enum consists entirely of empty cases, or there might not be any tag bits, if the lowering is able to pack all of them into the payload itself.
The primary thing we need to do more conservatively with must-alias-sets that have memory support is reduce their lower bound if they could be decref'd through that pointer in memory.
This file defines a generator that produces code to verify that IRGen's static assumptions about data layout for a Swift type correspond to the runtime's understanding of data layout.
This means that it is possible to deliberately cause a header collision, which an attacker could use to sneak a header past a proxy that would either overwrite or filter it otherwise.
This means that unlike with specialized emitters above, enum constructors use the AST-level abstraction pattern, to ensure that function types in payloads are re-abstracted correctly.
This picks up the default "w" through the properties of MongoCollection and MongoDb, but only if w is still 1 - as otherwise it was perhaps overridden with the "w" (or "safe") option.
This produces a very simple programming model which is great to use, but relies on the optimizer to promote by-ref captures to by-value (i.e. by-copy) captures for decent performance.
This state inserts a Halt node in each of the RC flowgraphs, and stops all optimizations along that control flow path: it prevents us from doing anything else in any successor blocks.
True if the given type value is nonnull, and the represented type is NSError / or CFError, the error classes for which we support "toll-free" bridging to / ErrorProtocol existentials.
We create accessor entities so we can implement the functionality of libclang, which reports implicit method property accessor declarations, invocations, and overrides for properties.
We need to do this before trying to remove any dead arguments that we added since otherwise the number of incoming values to the phi nodes will differ from the number of values coming
Will return a PropInfo with an offset of -1 if the mapping from baseClass's name to the Class* can change (which happens in sandbox mode when the ctx class is unrelated to baseClass).
note it's important to add to scope, not a pushed FunctionContainer, as a function may be declared inside a class's method, yet this function is a global function, not a class method.
ssize_t IterAdvance(const ArrayData*, size_t pos)  Returns the position of the element that comes after pos, or the canonical invalid position if there are no more elements after pos.
("rule_foo" functions)  Each transformation on the RC flowgraph has a shape of the graph it matches against, set of preconditions, and a "reprocess" point if it makes a transformation.
/    The solution to this problem is that we need native support for tail- /    allocated arrays in SIL so that we can do the array buffer allocations /    with alloc_ref instructions.
As an additional complication, the linkage of any nested class is inherited from its parent, so when a template's linkage changes, it must be bubbled down to any of its nested classes.
For a generic type, use a slot we saved in the generic metadata pattern immediately after the metadata object itself, which should be instantiated with every generic metadata instance.
Heuristically, all other things being equal, we should complain about the ambiguous expression that (1) has the most overloads, (2) is deepest, or (3) comes earliest in the expression.
If a ClosureExpr's parameter list has types on the decls, and the types and remove them so that they'll get regenerated from the associated TypeLocs or resynthesized as fresh typevars.
If a release is hoisted from / Region B to Region A, that means there is no blocking operation from where / the release was in Region B and where the release is hoisted to in Region A.
If our source location is invalid (this may be synthesized code), climb the decl context hierarchy until we find a location that is valid, collecting availability ranges on the way up.
If the memory object had any non-trivial stores that are init or assign based on the control flow path reaching them, then insert dynamic control logic and CFG diamonds to handle this.
If we naively bind the type variable to the parameter tuple, we'll later end up looking to whatever expression created the type variable to find the declarations for default arguments.
If you hit this assertion: you've created a catch block and then modified tracked state, then generated a potentially exception-throwing instruction using that catch block as a target.
It can, in fact, do this -- except due to what is as far as I can tell a linker bug on OS X, ld doesn't actually lay this out with 16 byte alignment, and so the SSE instructions crash.
It is my intent that you should be able to use this on your system, as part of a software package, or anywhere else to improve security, ensure compatibility, or for any other purpose.
It's not quite clear how in practice we'll be able to conclude that something is known-POD without knowing its size, but it's (1) conceivable and (2) needed as a general export anyway.
Macro definition for EmitXOForm functions Format: X(name,   arg3,  oe,  xop) name: function name arg3: ARG if needed, otherwise NONE to skip oe:   parameter value xop:  parameter value
Make sure we're using its address result, not its refcount result, and make sure that the box gets deallocated (not released) since the pointer it contains will be manually cleaned up.
Since spare bits correspond to bits which are known to be zero for all valid representations of the payload type, they must be stripped out before the payload value can be manipulated.
So, for correctness in the presence of nested loops (natural or not), we need to start to refuse to hoist checks if we see a block where we haven't visited all of its predecessors yet.
Sponsored in part by the Defense Advanced Research Projects Agency (DARPA) and Air Force Research Laboratory, Air Force Materiel Command, USAF, under agreement number F39502-99-1-0512.
The Type class doesn't fully correctly handle the fact that the earlier stages of the compiler consider null to be either initalized or uninitalized, so we need to do this check first.
The exclusivity of the lower bound means we know we're just cancelling out something that raised the lower bound on this set and no other, so the state on other sets can't be affected.
The one from hphp/runtime/ext_zend_compat/php-src/Zend/zend_strtod.h does not wrap with HPHP namespace, and implements functionality required by the zend extension compatibility layer.
These maps always have an entry for each public static property declared in this class, so it can also be used to check if this class declares a public static property of a given name.
This class reimplements the setlocale() and localeconv() functions in a thread-safe manner and provides stronger symbols for them than would be available from the glibc shared library.
This design has meant some duplication to what glibc already does in parsing the string locales but this should be OK because setlocale would never be called enough to be a bottleneck.
This has to happen before we start hooking up the Jmps on predecessors, because the block could be one of its own predecessors and it might need to send this new dst into the same phi.
This is part of hphp/runtime/base so the symbols are always available in the main binary and hence act as be a global replacement for calls even from other shared objects like ICU/etc.
We search exception edges first in a weak attempt to put exception blocks later in the final reverse-postorder numbering, but it shouldn't matter and anyone counting on that has a bug.
checkPartialApplyBody - Check the body of a partial apply to see / if the box pointer argument passed to it has uses that would / disqualify it from being promoted to a stack location.
(The bound type and the collection type, which will always be the same in this case.) This will avoid exponential typecheck behavior in the case of nested array and dictionary literals.
A useful addition might be to allow multiple of all types, but for now, multiple function or exception breakpoints results in the most recent silently being used (matching php5 xdebug).
After assigning indexes for current properties, we reassign indexes to parent properties that haven't been overlayed to make sure that they are greater than those of current properties.
CSE - This pass does a simple depth-first walk over the dominator tree, / eliminating trivially redundant instructions and using simplifyInstruction / to canonicalize things as it goes.
Final new elem ops This is a helper for final defining Elem operations that need to handle array chains and frame effects, but don't yet do anything better than supplying a single type.
If the class is already defined in this request, the class is persistent or a parent of the current context, and this constant is a scalar constant, we can just compile it to a literal.
If the weak references are equal to the normal references, the instruction is not necessary and can be removed (if we make the required changes to each instruction that used it weakly).
Important: we move the insertion point before this new release, just in case this inserted release would have caused the deallocation of the closure and its contained capture arguments.
It will return early after parsing any top level code in a main module, or in SIL mode when there are chunks of swift decls (e.g. imports and types) interspersed with 'sil' definitions.
Locations that are killed don't need to be tracked as memory support anymore, because nothing can load that pointer (and then decref it) anymore without storing over the location first.
Skip this block if its profile weight is less than the number of times the loop is invoked, since otherwise we're likely to executed the instruction more by hoisting it out of the loop.
Specializations have shared linkage, which means they do not have an external entry point, Since the callee is not fragile we cannot serialize the body of the specialized callee either.
The reason why we care about taking / non-trivial types as arguments is that we want to be careful in the face of / intrinsics that may be equivalent to bitcast and inttoptr operations.
The return value must be removed from the stack, or the unwinder would try to free it if the hook throws---but the event hook routine decrefs the return value in that case if necessary.
Walk backwards from an unsafeGuaranteedEnd builtin instruction looking for a / release on the reference returned by the matching unsafeGuaranteed builtin / ignoring releases on the way.
We don't really pass a return value via the stack, but enterTCHelper is going to want to store the rret() regs to the top of the stack, so we need the stack depth to be one deeper here.
We treat type-checking a PatternBindingDecl like type-checking an expression because that's how the initial binding is checked, and they have the same effect on the file's dependencies.
checkDefiniteInitialization - Check that all memory objects that require / initialization before use are properly set and transform the code as / required for flow-sensitive properties.
memcpy is safe even if it's a self append---the regions will be disjoint, since rN.data() can't point past the start of our source pointer, and rN.size() is smaller than the old length.
this works around a bug in internet explorer for the macintosh which sends mime boundaries that are only LF terminated when you use an image submit button in a multipart/form-data form.
we could create a second info struct here (end_info), but it's only useful if we want to keep pre- and post-IDAT chunk info separated (mainly for PNG-aware image editors and converters)
/ / The main case that this handles here are builtins that via read none imply / that they cannot read globals and at the same time do not take any / non-trivial types via the arguments.
By instead keeping track of the fact that that memory location may contain a pointer to that must-alias-set until it may be decref'd later, we can keep the lower bound higher for longer.
Each rule has a diagram explaining the graph transformation it makes, the changes it makes to the underlying IR, the preconditions for the rule applying, and where it tries to reprocess.
For object typehints there is no possible coercion in the failure case, but HNI builtins currently only guard on kind not class so the following wil generate false positives for objects.
If an allocation has an unknown type-index, then by definition we don't know which type it contains, and therefore the auto generated scanners will never report a pointer to such a type.
If at least one of the properties of the enclosing type cannot be used externally, then no initializer can be implemented externally as it wouldn't be able to initialize such a property.
If the right operand is a try, it's an error unless the operator is an assignment or conditional operator and there's nothing to the right that didn't parse as part of the right operand.
In Zend, object_ptr would be set to the Callable object, but here, all the magic is in callable, so we just set this to NULL as if it were a global function, and hope nobody will notice.
In a post order, we know that all of a BB's successors will always be visited before the BB, implying we will know if conservatively we saw a release on the pointer going down all paths.
Normal ("hhbc-semantics") operations on php values in memory all preserve balanced reference counts (i.e. a pointer in memory corresponds to one value in the count field of the pointee).
Possibly have all compiler invocation options auto-generated from a tablegen definition file, thus forcing a decision for each option if it is ok to share ASTs with the option differing.
Protocol composition types are / structural in the swift type system, but LLVM's type system / doesn't really care about this distinction, and it's nice to / distinguish different cases.
TODO: If we had the notion of a closed enum with no private cases or resilience concerns, then complete NS_ENUMs with no case corresponding to zero would also not be zero- initializable.
The algorithm uses two passes:  Analysis: - For each block in RPO: - Load in-state, which has been populated by at least one predecessor (or manually set to NoSpill for the entry block).
The bool, int, float, and string typenames are not given any special treatment by the parser and are treated the same as regular class names (which initially gets marked as type code 5).
The key idea behind this concept is that we can keep lower bounds higher than we would otherwise be able to by tracking at least some of the pointers to the object that may be in memory.
This is called "growing", since it may be used if an array is out of capacity for new elements---but it is also what happens if an array needs to change kinds and can't do that in-place.
Unfortunately, we can't rely on either depTy or type actually being the marked witness type in the generic signature, so we have to ask the generic signature whether the types are equal.
We don't need to do anything to handle the Swift parameter-ABI attributes here because we shouldn't be trying to round-trip swiftcall function pointers through SIL as C functions anyway.
We frequently generate a generic load, followed by a generic IncRef, followed by a CheckType that refines that temporary or otherwise branches to a block that's going to do a ReqBindJmp.
/ / Note, that a release in this modus (we don't have a uniquely identified / object) is not safe because the destructor of what we are releasing might / be unsafe (creating a reference).
But this case can also occur on unrelated classes that happen to have a same-named function at the same method slot, which means we still have to check whether the new function is static.
C enums have arbitrary values and we don't preserve the mapping between the case and raw value at runtime, so don't emit any case names at all so that reflection can give up in this case.
FIXME: Long-term, we'd like clients to deal with the trailing where clause explicitly, but for now it's far more direct to represent the trailing where clause as part of the requirements.
Find the innermost enclosing declaration with an availability range annotation and ensure that this attribute's available version range is fully contained within that declaration's range.
However since Sets currently only support integer and string elements, there is no way user code can really tell whether the existing element was replaced so for efficiency we do nothing.
If the failure is that different occurrences of the same generic have different concrete types, substitute in all the concrete types we've found into the failureInfo to improve diagnosis.
If we have no viable or unviable candidates, and we're generating, diagnostics, rerun the query with inaccessible members included, so we can include them in the unviable candidates list.
In most cases, generating a warning message and inserting a fake EOI marker is the best course of action --- this will allow the decompressor to output however much of the image is there.
Keep track of this expression for later backpatching If it doesn't get backpatched (because there was no HALT_COMPILER then the constant will return (int)"__COMPILER_HALT_OFFSET__" (zero)
Return a function which takes three pointer arguments and does a / retaining initWithCopy on the first two: it loads a pointer from / the second, retains it, and stores that in the first.
The callee main blocks are therefore identified by walking the graph backwards from the InlineReturn and selecting each block encountered, terminating when the DefInlineFP is encountered.
The downside is that we may return stale information, but we get the benefit of increased responsiveness, since the request will not be blocked waiting on the AST to be fully typechecked.
The licensing information for MurmurHash as specified on its website, http://sites.google.com/site/murmurhash/, is as follows: "For business purposes, Murmurhash is under the MIT license.
The mayRaiseError instructions should all be going through may_reenter right now, which will kill the stack below the re-entry depth---unless the marker for `inst' doesn't have an fp set.
This is probably not necessary anymore, but we added it originally because a store sinking prototype needed to know it can't push StLocs past a DefInlineFP, because of reserved registers.
This means even if we're not in RepoAuthoritative mode, as long as this code is reachable it will always use the same closure Class*, so we can just burn it into the TC without using RDS.
This means that any array type we create can only contain nested array RepoAuthTypes that have smaller array ids (they must already have been created when we create the outer array type).
We have state for whether any of it is valid (before we've analyzed for it, or if the program contains /any/ modifications of static properties where both the name and class are unknown).
We know that all of our sub blocks have the correct interesting insts since we did one scan at the beginning and are updating our interesting inst list as we move around retains/releases.
We take advantage of this in pure_load to bump the lower bound to at least one (if they weren't all in one set, we'd not be able to do that without violating exclusivity of lower bounds).
When HardTypeHints isn't on, AllFuncsInterceptable is on, or any InterceptableFunctions are listed, we don't require the constraints to actually match, and relax all the HNI types to Gen.
A visitor for breaking down formal result types into a SILResultInfo / and possibly some number of indirect-out SILParameterInfos, / matching the abstraction patterns of the original type.
Even though we always return false in ValidMArrayIter, this function may still be called because MArrayIters are constructed in an invalid position, and then advanced to the first element.
Given a tuple shuffle and an original parameter type, construct / the type of the source of the tuple shuffle preserving as much / information as possible from the original parameter type.
However, if JitEnableRenameFunction is enabled, then systemlib has to actually be merged every request -- and since much of systemlib is written in Hack, that would trigger auto-typecheck.
However, we'd like to delay our stack overflow check until after we've entered our frame, so we can combine it with the surprise flag check (which must run after we've created the callee).
If the option kinds are the same, and the wrapped types are the same, but the arities are different, we can peephole the optional-to-optional conversion into a series of nested injections.
If we don't create the connection, register it (done in mongo_get_connection_single) and add it to the list of servers that we're processing so we might use this host to find more servers.
It will also have to remove unreachable blocks when it's finished to maintain IR invariants (e.g. through DCE::Minimal), which will mean the uses of the no-longer-defined tmp will go away.
Note: this should typically only be used when invoking the frontend directly, as the driver will always pass -o with an appropriate filename if output is required for the requested action.
Redistributions of source code must retain the above copyright notice immediately at the beginning of the file, without modification, this list of conditions, and the following disclaimer.
Sema does later checks for UnresolvedPatternExpr's in arbitrary places, but rejecting these early is good because we can provide better up-front diagnostics and can recover better from it.
Set prop is happening with WithRef semantics---we only use a binding assignment if it was already KindOfRef, so despite the const_cast here we're safely not modifying the original Variant.
Take the following example, where t1 has a lower bound of zero: StMem ptr, t1 IncRef t1 IncRef t1 RaiseWarning "something"  // any instruction that can re-enter and decref t1 DecRef t1 ...
The / most general form of an unmaterializable type preserves the / basic structure of the unmaterializable components, replacing / any materializable components with fresh type variables.
The current location is initially determined by the breakpoint where the debugger is currently stopped and can thereafter be modified by list commands and by switching the the stack frame.
The speed of this approach is heavily influenced by the subbox size: too small means too much overhead, too big loses because Heckbert's criterion can't eliminate as many colormap entries.
Therefore when constructing a class object, either the metatype must be statically derived (rather than an arbitrary value of metatype type) or the referenced constructor must be required.
This can really only when a guard is relaxed away to Gen because we knew something was a BoxedCell statically, but we may need to keep information about what inner type we were predicting.
To track that information, we set the `hint' on phi uses to the corresponding phidef variable (or one of the two, in the case of phijcc), then let the hint back propagation pass handle it.
When the debugger is loading its configuration, there will be some cases where Extension::ModulesInitialised(), but the name appears in neither s_user_callbacks nor s_system_ini_callbacks.
But note that unless the user created the array manually, and added reference params at the correct places, we'll still get warnings, and the array elements will not be passed by reference.
Clang believes that it can force tl_perf_counters into 16-byte alignment, and thus emit an inlined version of memcpy later in this file using SSE instructions which require  such alignment.
FIXME: We eventually want to loosen this constraint, to allow us to find operator functions both in classes and in protocols to which a class conforms (if there's a default implementation).
Given SSA, there's a faster sparse version of this algorithm that marks useful instructions in one pass, then transitively marks pure instructions that define inputs to useful instructions.
However, if we have a method defined in Swift on an ObjC generic class, that method is restricted not to have access to the generic parameters, since it wouldn't be able to polymorphically.
If the decimal precision guaranteed by FP arithmetic is higher than the requested places BUT is small enough to make sure a non-zero value is returned, pre-round the result to the precision
If the proxy has an enabled breakpoint that matches entry into the given function, arrange for the VM to stop execution and notify the debugger whenever execution enters the given function.
If the resulting argument is used at the destination these terminators will end up live, and then our normal liveness propagation will mark the single operand of these instructions as live.
If this type alias is a KindOfObject and the name on the right hand side was another type alias, we will bind the name to the other side for this request (i.e. resolve that type alias now).
If we are using jemalloc, it is keeping track of allocations outside of the slabs and the usage so we should force this after an allocation that was too large for one of the existing slabs.
Markers in callee main blocks are modified to reference the parent FP, sp offsets are recomputed relative to this FP, and the fixup source key is set to the call source key from the caller.
Parameters: dst - Where to store the resulting affine transform offset_x - Horizontal translation amount offset_y - Vertical translation amount  Returns: GD_SUCCESS on success or GD_FAILURE
Since some of the template parameters may not yet be parsed when we parse the template, the inference of the correct template linkage is deferred until all the types' linkages are computed.
The result types of the expressions yielding protocol values (reflected in SubstFormalType) reflect an implicit level of function application, including some extra polymorphic substitution.
This affects cases where we're able to eliminate control flow while inlining due to the parameter types, and the AttrMayUseVV flag was due to something happening in a block we won't inline.
This intentionally ignores all stores, which (if they got emitted as copyaddr or assigns) will eventually get rewritten as assignments (not initializations), which is the right thing to do.
This is considerably more verbose than just using xmlCreateFileParserCtxt, but it allows us to bypass the external entity loading path, which is locked down by default for security reasons.
Thus, we can analyze these methods first to determine the initial types of properties with non-scalar initializers, and these need not be be run again as part of the fixedpoint computation.
VirtualHost acquires global mutexes in its constructor, so we allocate s_default_vhost lazily to ensure that all of the global mutexes have been initialized before we enter the constructor.
We necessarily prefer potential archetypes rooted at parameters that come from outer generic parameter lists, since those generic parameters will have archetypes bound in the outer context.
We need to ensure these units end up mergeOnly, at runtime there are things that assume this (right now no other HHBBC units end up being merge only, because of the returnSeen stuff below).
We set the "debugger interrupt" flag to ensure we interpret code rather than entering translated code, and we set the "debugger signal" surprise flag to pop out of loops in translated code.
While we could try to walk the body and update any Decls, ClosureExprs, etc within the body of the ClosureExpr, it is easier to just turn it into BraceStmt(CallExpr(TheClosure, VoidTuple)).
-- Weakening DecRefs -- This file contains a relatively cheap pass that can weaken DecRefs into DecRefNZ by proving that they can't go to zero (unless there is already a bug in the program).
/ / The pattern is that subclasses should override an 'add' method / from the appropriate layout class and ensure that they call / setTargetOffset() when the appropriate location is reached.
Abstractly represents a callee, which may be a constant or function value, / and knows how to perform dynamic dispatch and reference the appropriate / entry point at any valid uncurry level.
But if the outstanding weak retain count is 1, then anyone attempting to increase the weak reference count is inherently racing against deallocation and thus in undefined-behavior territory.
If the call is interpreted, then we spend some time in the TC inside g(), then eventually end in dispatchBB() (called by MCGenerator::handleResume()) for g()'s RetC, the logic here kicks in.
If the declaration context from which the type witness was determined differs from that of the conformance, adjust the type so that it is based on the declaration context of the conformance.
If the nested type is not an archetype (because it was constrained to a concrete type by a requirement), return the fresh type variable now, and let binding occur during overload resolution.
If these get thrown away, breakpoints that are temporarily disabled will suddenly fire again, which is not what we want to happen if we create a new breakpoint or just even list breakpoints.
If this is a member of a nominal type, don't allow it to have a name of "Type" or "Protocol" since we reserve the X.Type and X.Protocol expressions to mean something builtin to the language.
If we know that there is another decrement on the same pointer that has not been matched up to an increment, then the pointer must have a reference count of at least 2 before this decrement.
If we weren't merging this way, we would have to union the incoming memory bits, which easily leads to situations where more than one must alias set is supported by the same memory location.
If we're referencing AnyObject and we have argument labels, put the argument labels into the name: we don't want to look for anything else, because the cost of the general search is so high.
Input: Y1/U1/V1: The Y/U/V data of the first image imgdata: data buffer containing webp image imgdata_size: size of the imgdata buffer  Returns the PSNR value computed bewteen the two images
It's easier to do this unconditionally here and then overwrite in the exception case (when we turn the inout into an UnsafePointer) than to try to discover that we're in that case right now.
Logic based on zend_operators.c::convert_scalar_to_number()  Note that this needs to work the same as some similar logic in the JIT for optimized versions of some of the following functions.
Partial DCE for DefInlineFP/InlineReturn Instructions This module implements a pass to sink DefInlineFP instructions off the critical path allowing us to eliminate InlineReturn instructions.
Permission is granted to anyone to use this software for any purpose, including commercial applications, and to alter it and redistribute it freely, subject to the following restrictions: 1.
Resolve the witness for the given non-type requirement as / directly as possible, only resolving other witnesses if / needed, e.g., to determine type witnesses used within the / requirement.
Since there's no semantically correct way to do PureLoads from the locations in a PureSpillFrame unless something must have stored over them again first, we don't need to kill anything here.
Since we only sink retains (we do not move any other / instructions) which themselves are NOT MayDecrement operations, and moving / retains can't turn non-decrement instruction MayDecrement.
The accessor returns (temporary: Builtin.RawPointer, callback: Builtin.RawPointer), where the first pointer is the materialized address and the second is the address of an optional callback.
The rules are applied in a single pass over the flowgraph, going forwards, but potentially backtracking when certain rules apply, since they may enable more rules to apply to previous nodes.
This implements the very late (just before code generation) lowering / processes that we do to expose low level performance optimizations and take / advantage of special features of the ABI.
This must be done while holding a lock that blocks insertion of new Classes into their class lists, but in practice most Classes will already be created by now and this process is very fast.
This routine is based in part on code from Dale Lutz (Safe Software Inc.) and in part on demo code from Chapter 15 of "PNG: The Definitive Guide" (http://www.cdrom.com/pub/png/pngbook.html).
We will look at all the outgoing edges from the conditional branch to see whether any other uses of the condition or uses of the condition along an edge are dominated by said outgoing edges.
We've been told to dump the AST (either after parsing or type-checking, which is already differentiated in CompilerInstance::performSema()), so dump or print the main source file and return.
While we would have liked to simply fix the bug and move on, we have to provide a backwards compatibility feature (essentially the bug) for some systems and a safety measure for some others.
government, the Government shall have only "Restricted Rights" in the software and related documentation as defined in the Federal Acquisition Regulations (FARs) in Clause 52.227.19 (c) (2).
AND CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
Create new normal and error BBs only if: - re-using a BB would create a critical edge - or, the result of the new apply would be of different type than the argument of the original normal BB.
For chunk encodings, we way receive an EOM with no data, such that hasMorePostData returns true (because client is not yet complete), client sends EOM, getMorePostData should return 0/nullptr
Generate the arguments from this row's pattern in the case block's expected order, and keep those arguments from being cleaned up, as we're passing the +1 along to the shared case block dest.
If the right hand side is already defined, don't invoke the autoloader at all, this means we have to check for both a type alias and a class before attempting to load them via the autoloader.
If we're not passing down contextual type information this time, but the original failure had type info that wasn't an optional type, then set the flag to prefer fixits with force unwrapping.
Instead, we should introduce / dynamic-indirect argument-passing conventions and map opaque / archetypes to that, then respect those conventions in IRGen by / using runtime call construction.
Postfix operators cannot start a subexpression, but can happen syntactically because the operator may just follow whatever precedes this expression (and that may not always be an expression).
See http://curl.haxx.se/lxr/source/docs/libcurl/symbols-in-versions or curl src/docs/libcurl/symbols-in-versions for a (almost) complete list of options and which version they were introduced
The goal of the scanner generator is find the maximal set of pointer followable types, use those to compute the layout of each indexed type, then output those layouts in the form of C++ code.
This is logically wrong, but propagating l-values within RValues is hard to avoid in custom argument-emission code without making ArgumentSource capable of holding mixed RValue/LValue tuples.
This must be consistent with the extra inhabitant calculation implemented in the runtime's storeHeapObjectExtraInhabitant and getHeapObjectExtraInhabitantIndex functions in KnownMetadata.cpp.
We are being conservative here since we could make this more general by allowing for intervening non-arg releases in the sense that we do not allow for race conditions in between destructors.
We want const qualifiers on various index data structures for php object pointers, but during index creation time we need to manipulate some of their attributes (changing the representation).
o Convert instructions that check types of values in memory to use values in SSATmp virtual registers, if we know that we have a register that contains the same value as that memory location.
sgrimm note: not sure AllowFirst is relevant with my implementation since we always search for the narrowest matching rule -- it really just sets whether we deny or allow by default, I think.
(FIXME: This leads to deadlocks in /   recursive cases, though we can avoid many deadlocks because most /   valid recursive types bottom out in fixed-sized types like classes /   or pointers.)
(We aren't in a situation where we can do a normal VMRegAnchor fixup right now.)  But moreover we shouldn't be running destructors if a fatal is happening anyway, so we don't want that either.
/ This is needed in case we converted some parameters/results of the / specialized function from indirect to direct but the result function of the / partial_apply still needs them as indirect.
Adjust the path to refer to our copy of the Clang resource directory under 'lib/swift/clang', which is either a real resource directory or a symlink to one inside of a full Clang installation.
But note that default arg generators can't capture anything right now, and if we ever add that ability, it will be a different capture list from the function to which the argument is attached.
DebuggerClient acquires global mutexes in its constructor, so we allocate debugger_client lazily to ensure that all of the global mutexes have been initialized before we enter the constructor.
Get the number of expected generic parameters, which is a sum of the number of explicit generic parameters and the number of their recursive member types exposed through protocol requirements.
If calling the specialization utility resulted in new functions (as opposed to returning a previous specialization), we need to notify the pass manager so that the new functions get optimized.
If we find that a given named parameter has been used twice, we will raise an error, as we can't be sure that it is safe to bind multiple parameters onto the same zval in the underlying driver
If we've already seen this partial apply, then it means the same alloc box is being captured twice by the same closure, which is odd and unexpected: bail instead of trying to handle this case.
In particular, it's /not/ correct to check the PBD's DeclContext because top-level variables in a script file are accessible from other files, even though the PBD is inside a TopLevelCodeDecl.
In the comments throughout this file, three type names are used: 'B' is the type of a fixed-size buffer 'T' is the type which implements a protocol 'W' is the type of a witness to the protocol
LocalValues are updated in setLocalValue where / the ID passed in assumes the same ordering as in serializer: in-order / for each basic block argument and each SILInstruction that has a value.
Since we don't need the instrumenter, and all we actually need is the playground semantics visible to the user, like silencing the "expression resolves to an unused l-value" error, disable it.
This table maps each EBCDIC character to an (8-bit extended) ASCII character, as specified in the rationale for the dd(1) command in draft 11.2 (September, 1991) of the POSIX P1003.2 standard.
Thomas' article also describes a refined method which is asymptotically faster than the brute-force method, but it is also far more complex and cannot efficiently be applied to small subboxes.
To construct the calendar for a year, you must first find the length of the year by determining the first day of the year (Tishri 1, or Rosh Ha-Shanah) and the first day of the following year.
We store the free list pointers right at the start of each object (overlapping whatever it's first word holds), and we also clobber _count as a free-object flag when the object is deallocated.
makeUTF16 should have following parameters: (start: RawPointer, utf16CodeUnitCount: Word) makeUTF8 should have following parameters: (start: RawPointer, utf8CodeUnitCount: Word, isASCII: Int1)
/ / TODO: Handle this pattern: /   retain(array) /   call(array) /   release(array) / Whenever the call is readonly, has balanced retain/release for the array, / and does not capture the array.
A file is considered to be ISO-8859 text if its characters are all either ASCII, according to the above definition, or printing characters from the ISO-8859 8-bit extension, characters 0xA0 ...
According to this thread in the ICU mailing list, it should be safe to assume the UCollator object is thread safe so long as you're only passing it to functions that take a const pointer to it.
But if the abstraction pattern is opaque, and the tuple type is materializable -- if it doesn't contain an l-value type -- then it's a valid target for substitution and we should not expand it.
FIXME: the optionality of outputType and the presence of trustInputTypes are hacks for cases where coming up with those types is complicated, i.e., when dealing with generic bridging functions.
For every type which has its linkage changed, update its dependents (templates where the type is used as a parameter, or nested classes) with the new linkage, and mark as being changed as well.
If the abstract layout of the enum is dependent on generic parameters, then we additionally need to constrain any layout optimizations we perform to things that are reproducible by the runtime.
If the source type is private or target protocol is private, then conformances cannot be changed at run-time, because only this file could have implemented them, but no conformances were found.
In non-autopriming mode the rewind function will always call next, when autopriming is enabled, rewind matches PHP behavior and will only advance the generator when it has not yet been started.
Method ids reported to Vtune JIT API should not be less than 1000 (see the comment in iJIT_Method_Load structure definition.) We use 1000 for trampolines and larger values for normal functions.
One thing we have to be careful of is to make sure that we don't invalidate "BBI" (the iterator the outer walk of the optimization pass is using, and indicates the next instruction to process).
Otherwise, if the substituted type is a tuple, then we should emit the tuple in its most general form, because there's a substitution of an opaque archetype to a tuple or function type in play.
Swift function types are formally functions that take the class and return the method, we have to strip off the first level of function call to compare against the type from the demangled name.
The ActRec in question was pushed before the beginning of the tracelet, so we can make a guess about parameter reffiness and record our assumptions about parameter reffiness as tracelet guards.
This generates code to destroy the elements / that are known to be alive, ignore the ones that are known to be dead, and / to emit branching logic when an element may or may not be initialized.
This loads the FrameState for the IR block corresponding to the start of this region block, and it also sets the map from BC offsets to IR blocks for the successors of this block in the region.
This means that if we cancel the source and then wait on the timer group, when we are done waiting, we know the source is completely done and it's safe to free memory (e.g., in the destructor).
Two arrays can generally be the same even if they aren't the same SSATmp, because we might have loaded it from more than one place, and we have linear chains in array modification instructions.
We purposely process the inlined body after inlining, because the inlining may have exposed new inlining opportunities beyond those present in the inlined function when processed independently.
XXX: Changing this to empty_string causes problems, something is writing to this upstream but I'm not sure what and since it's unlikely to provide significant gain alone I'm leaving it for now.
i.e. if there is no upward visible store that can / reach the beginning of a basic block, then we know that the genset and / killset for the stored location need not be set for the basic block.
new_iter_object decrefs its src object if it propagates an exception out, so we use SyncAdjustOne, which adjusts the stack pointer by 1 stack element on an unwind, skipping over the src object.
'T.self as P.Protocol' can only succeed if T is exactly the type P, so is a concrete cast, whereas 'T.self as P.Type' succeeds for types conforming to the protocol P, and is an existential cast.
A conversion of a reference count value to a trivial value though could be used as a trivial value in ways that ARC dataflow will not understand implying we need to treat it as a use to be safe.
If the base is known to be a string and the operation is exactly SetElem, we're guaranteed that either the base will end as a CountedStr or the instruction will throw an exception and side exit.
If we have a contextual type, and if we have an ambiguously typed function result from our previous check, we re-type-check it using this contextual type to inform the result type of the callee.
Note that we ignore the initialization behavior of PatternBindingDecls, but we do want to walk into them, because we want to see any uses or other things going on in the initializer expressions.
The algorithm works as follows: In case we have a read preference of primary, secondary or nearest the set will always contain a set of all nodes that should always be considered to be returned.
This is a pseudo-copy of the logic in enterTCHelper: it sets up the simulator's registers and stack, runs the translation, and gets the necessary information out of the registers when it's done.
We classify an argument mismatch as being a "near" miss if it is a very likely match due to a common sort of problem (e.g. wrong flags on a function type, optional where none was expected, etc).
We don't care about the result so although we assign it to a var, we only do that to handle errors and return it so that the calling function knows whether a connection could be obtained or not.
We need put to a null on the stack in the catch trace in place of our input, since we've already shuffled that value into the heap to be owned by the waitHandle, so the unwinder can't decref it.
We use these equivalence classes during register allocation to try to assign the same register to all the variables in a phi group (at least at those positions where the phi instructions occur).
What's going on is we're going to have a m_lineTable if this UnitEmitter was loaded from the repo, and no m_sourceLocTab (it's demand-loaded by unit.cpp because it's only used for the debugger).
You will notice that the lengths alternate between 30 and 31 days, except for three anomalies: both July and August have 31 days, both December and January have 31, and February is less than 30.
new_miter_object decrefs its src object if it propagates an exception out, so we use SyncAdjustOne, which adjusts the stack pointer by 1 stack element on an unwind, skipping over the src object.
/ There are a few ways we can emit it: / / - If the type is fixed-layout and we have visibility of its value /   witness table (or one close enough), we can project the layout struct /   from it.
Adjusting the FP and offset is critical to prevent the callee stack from being smashed when reentering the VM, while changing the fixup source key is done to preserve invariants in the fixup map.
But in addition, a possibly interfering store following a candidate store prevents the candidate from moving past the store, but does not prevent the candidate from being killed by a later store.
FIXME: author apparently had no idea what this function was meant to do ce is meant to point to uninitialised memory, which this function is meant to fill, so you can't just triple-dereference it
Given a declaration upon which an availability attribute would appear in / concrete syntax, return a declaration to which the parser / actually attaches the attribute in the abstract syntax tree.
If a base class is generic and a derived class substitutes some generic parameter of the base with a concrete type, the derived class can override methods in the base that involved generic types.
If this entry is synthesized or implied, scan to determine whether there are any explicit better conformances that make this conformance trivially superseded (and, therefore, no worth recording).
In RepoAuthoritative mode, loaded units are never unloaded, we don't support symlink chasing, you can't include urls, and files are never changed, which makes the code here significantly simpler.
Instructions that allocate new objects, without reading any other memory at all, so any effects they have on some types of memory locations we track are isolated from anything else we care about.
It might be more appropriate to include it in the 8859 set instead of the ASCII set, but it's got to be included in *something* we recognize or EBCDIC files aren't going to be considered textual.
Perform a few simple optimizations on DefLabels: - If a phi's dest has a type that represents a constant value, replace the phi with a Mov from a DefConst (to be copy-propagated by a later pass).
SetOpL is like IncDecL, but with the complication that we don't know if we can mark it dead when visiting it, because it is going to pop an input but unlike SetL doesn't push the value it popped.
The only valid use of the noescape parameter is an immediate call, either as the callee or as an argument (in which case, the typechecker validates that the noescape bit didn't get stripped off).
They however don't return IrrelevantEffects because we assume (in refcount-opts) that IrrelevantEffects instructions can't even inspect Countable reference count fields, and several of these can.
We have to do this with a full AST walk, because the freshly parsed pattern represents tuples and var patterns as tupleexprs and unresolved_pattern_expr nodes, instead of as proper pattern nodes.
We only really need to do this when there's a non-trivial set of conformances, but we can't determine that just from this decl: the associated type might gain conformances in a refining protocol.
We set the low bit for two reasons: the Class* will never be a valid Class*, so we'll always miss the inline check before it's smashed, and handlePrimeCacheInit can tell it's not been smashed yet
We take advantage of this during the parse phase to reduce very simple expressions down to a single scalar and keep the parse tree smaller, especially in cases of long chains of binary operators.
When we see a PEI, we need to start over on the killBeforePEI set, and the local-liveness must take into account the fact that we could take an exception edge here (or'ing in the liveOutExn set).
/ / This routine validates all of the types in the parsed inheritance clause, / recording the superclass (if any and if allowed) as well as the protocols / to which this type declaration conforms.
Filter by private-discriminator, or filter out private decls if there isn't one...unless we're already in a private context, in which case everything is private and a discriminator is unnecessary.
For a variable declaration (without accessors) we use the range of the containing pattern binding declaration to make sure that we include any type annotation in the type refinement context range.
However, since we already know the instruction to replace and the value to replace it with, we can record it for now and forwarded it after all the forwardable values are recorded in the function.
If this instruction can read memory, we try to be conservatively not to move it, as there may be instructions that can clobber the read memory from current place to the place where it is moved to.
InitializationForPattern - A visitor for traversing a pattern, generating / SIL code to allocate the declared variables, and generating an / Initialization representing the needed initializations.
It might clarify this a little to list the reasons that a must-alias-set's lower bounds can be increased: o An explicit IncRef instruction in the instruction stream of a tmp in the must-alias-set.
Note that AttrStatic on a closure's __invoke Func* means it is a static closure---but the call to __invoke still works as if it were a non-static method call---so they are excluded from that here.
Root protocol initializers (ones that reassign to self, not delegating to self.init) have no members to initialize and self itself has already been reported to be uninit in the primary diagnostic.
Sometimes libbz2 will return fewer bytes than requested, and set bzerror to BZ_STREAM_END, but it's not actually EOF, and you can keep reading from the file - so, only set EOF after a failed read.
THE AUTHORS AND DISTRIBUTORS SPECIFICALLY DISCLAIM ANY WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.
The generator doesn't know how to get the base class from the derived (though in theory this could be inferred from the debug information), so punt and make the user specify a custom base scanner.
There is no particularly good way around this in the case that all 256 8-bit shades are used, but one could write some custom 16-bit code to handle the case where there are gdFree palette entries.
Therefore it does not remove bodies of any external functions / that are alive, because LLVM may analyze their bodies to determine their / side-effects and use it to achieve a better optimization.
When the name and initial linkages of all the types was generated, the relationship between templates, their parameters, and nested classes is recorded in m_linkage_dependents, which is used here.
v InlineReturn Splitting critical edges allows us to be certain that any exit head will have only callee main block predecessors, making it safe to add DefInlineFP to the start of every exit-head.
/ / The helper function will be shared between translation units within the / current linkage unit, so choose the name carefully to ensure that it / does not collide with any other helper function.
/ / This is only valid in a couple of special cases: / 1) The nominal type is generic, in which case we emit a call to the /    generic metadata accessor function, which must be defined separately.
A small peep-hole optimization: If the operand is allocated on stack and there is no "significant" code between the set_deallocating and the final dealloc_ref, the set_deallocating is not required.
An alternative, conservative approach to stores, for example, might be to eagerly attempt to reduce the lower bound on the must alias set for value being stored at the location of the store itself.
An immediate that points into the range being moved, but which isn't tagged as an addressImmediate, is most likely a bug and its instruction's address needs to be put into fixups.addressImmediates.
By doing it to only one of these two, we deviate from a state that could be directly specified by a password to the buggy algorithm (and to the fully correct one as well, but that's a side-effect).
FIXME: We either have an associated type here or a member of some member of the superclass bound (or its superclasses), which should allow us to skip much of the work in resolveDependentMemberType.
Given that we are throwing a native error, turn it into a bridged / error, dispose of it in the correct way, and create the appropriate / normal return value for the given foreign-error convention.
If the handledCount is non-zero, we've already seen this fault once while unwinding this frema, and popped all eval stack temporaries the first time it was thrown (before entering a fault funclet).
It is legal IR to have a LdCtx after this sort of decref, but it would be a semantically incorrect program if it does anything with the context after loading it that cares about whether it's freed.
Next, do a pass with a couple of optimizations: 1) release() motion, eliminating retain/release pairs when it turns out that a pair is not protecting anything that accesses the guarded heap object.
Once it's published, it's a live activation record, and doesn't get written to as if it were a stack slot anymore (we've effectively converted AStack locations into a frame until the InlineReturn).
Return bound generic type for the unbound type Superclass, / which is a superclass of a bound generic type BoundDerived / (Base may be also the same as BoundDerived or may be / non-generic at all).
Shutdown the listen sockets, this will 2.a Close any idle connections 2.b Send SPDY GOAWAY frames 2.c Insert Connection: close on HTTP/1.1 keep-alive connections as the response headers are sent 3.
The pc-relative offset is from the end of the instruction, and the instruction is shrinking by 4 bytes (opcode goes from 2 bytes to 1, and offset goes from 4 to 1), so we need to adjust delta by 4.
The reason for this is that our struct types currently are implying the presence of all the keys in the struct (it might be worth adding some more types for struct subtyping to handle this better.)
The stack overflow code knows how to handle the possibility of an ExtraArgs structure on the ActRec, and the uninits are harmless as long as we know we aren't going to segfault while we write them.
To ensure no retains occur / within the loop, it is necessary to check that the array does not escape on / any path reaching the loop, and that it is not directly retained within the / loop itself.
We don't actually know whether we did this switch during EOF (yywrap()) processing, but the only time this flag is looked at is after yywrap() is called, so it's safe to go ahead and always set it.
/ / When a load or store instruction is encountered, the memory is broken down / to the indivisible components, i.e aggregates are broken down to their / individual fields using the expand function.
If an array grows, the old array pointer may not be used for any more array operations except to eventually call Release---these grown-from arrays are sometimes described as being in "zombie" state.
If the payload is a single refcounted pointer and we have a single empty case, then the layout will be a nullable pointer, and we can pass enum values directly into swift_retain/swift_release as-is.
If the type of the result of the call differs from the type used elsewhere in the caller due to ABI type coercion, we need to coerce the result back from the ABI type before extracting the elements.
If we support the specialization of closures with multiple user callsites /    that can be specialized, we need to ensure that any captured values have /    their reference counts adjusted properly.
In general it is a simple pass to reason about the correctness of, and it cleans up some things we can miss, so it is easier to do some of the work this way than to complicate the main pass further.
Many of the things done by generic instantiation are unnecessary here: initializing the metaclass pointer initializing the ro-data pointer Initialize the superclass if we didn't do so as a constant.
Moreover, since global DCE makes use of type information to determine whether a store is dead, we need to be careful that this never changes whether the assumptions used to perform DCE were correct.
Recursion of magic property accessors is allowed, but if you recurse on the same object, for the same property, for the same kind of magic method, it doesn't actually enter the magic method anymore.
TakeoverAgent provides the ability to transfer the accept socket (the file descriptor used to accept new connections) from an older instance of the server to a new one that has just been brought up.
The main motivation for this is to generally eliminate the need for a separate stack pointer (the result of HHIR's DefSP instruction, which will just be an lea off of the rvmfp() physical register).
There can currently be no more than one immvector per instruction, and we need access to the size of the immediate vector for NUM_POP_*, so the member vector guy exposes a vecImmStackValues integer.
These definitions are coped from the Zend formatted output conversion files so that we only need to make minimal changes to the Zend formatted output conversion functions that are incorporated here.
This function is named the same and similar in implementation to that in php-src:php_zip.c One difference is that we canonicalize here whereas php-src is already assumed passed a canonicalized path.
To conform to PHP5 behavior, when array's integer keys are renumbered we invalidate all strong iterators and we reset the array's internal cursor (even if the array is empty or has no integer keys).
We are using the write lease + whether the code is already smashed to determine which thread should free the SmashLoc---after getting the lease, we need to re-check if someone else smashed it first.
We do not walk over the function and find all the possible LSValues in this function, as some of the these values will not be used, i.e. if the LoadInst that generates this value is actually RLE'ed.
We've already destroyed any instance variables initialized by this constructor, now destroy instance variables initialized by subclass constructors that delegated to us, and finally free the memory.
-- "Trivial" incdec removal pass -- This module also contains a local optimization that removes IncRef/DecRefNZ pairs in a block that have no non-"pure" memory-accessing instructions in between them.
/ 2) Sometimes the debugger wants a Decl to live beyond the current / function invocation, in which case it should be parsed at the / file scope level so it will be set up correctly for this purpose.
As we visit blocks, we propagate states to their successors and across their back edges---when state merges cause a change to the block stateIn, we will add it to this queue so it gets visited again.
As we walk down the domtree, we / look to see if instructions are in this: if so, we replace them with what / we find, otherwise we insert them so that dominated values can succeed in / their lookup.
Break the conversion into three stages: 1) changing the representation from foreign to native 2) changing the signature within the representation 3) changing the representation from native to foreign
Except in specific whitelisted cases for Foundation/Swift standard library compatibility, an _ObjectiveCBridgeable conformance must appear in the same module as the definition of the conforming type.
Finally, a file is considered to be international text from some other character code if its characters are all either ISO-8859 (according to the above definition) or characters in the range 0x80 ...
For a given phi node F, the first of the two hints we return is derived from only those phijmps and phijccs targeting F (if F is a phidef), or from the phidefs F targets (if F is a phijmp or phijcc).
From this assumption only DefInlineFP's associated with an InlineReturn are considered, and terminal blocks are associated with the most deeply nested DefInlineFP that is paired with an InlineReturn.
If any of these facts are more useful than they used to be, add all the Contexts that had a dependency on the new information to the work list again, in case they can do better based on the new fact.
If this is a load with a single user that is a return (and optionally a retain_value for non-trivial structs/enums), then this is a return in the enum/struct init case, and we haven't stored to self.
If we did some shared thing, we would just hand you back the strings and you'd have to parse them on every request or build some convoluted caching mechanism which is slower than just the int access.
In the common case, the function won't use the extra arguments, so act as if they were never passed (NOTE: this has the effect of slightly misleading backtraces that don't reflect the discarded args)
Inline things into this function, and if we do so invalidate analyses for this function and restart the pipeline so that we can further optimize this function before attempting to inline in it again.
It came out of the approach we used above, and it's not any worse than any other choice we could make.)  It is crucial that we don't do the same to the expanded key used in the main Eksblowfish loop.
Look to see if the conflicting decl is unavailable, either because it's been marked NS_SWIFT_UNAVAILABLE, because it's actually marked unavailable, or because it was deprecated before our API sunset.
The RetCtrl is generally ending a bytecode instruction, with the exception being in an Await bytecode instruction, where we consider the end of the bytecode instruction to be the non-suspending path.
The final case is a PureStore to an unknown location (either because it was not supplied a AliasAnalysis id, or because it stored to something like a PtrToGen that could refer to anything in memory).
The fpValue, irSPOff, and curFunc are not cleared because they must agree at bytecode-level control-flow merge points (which can be either merge points at the bytecode or due to retranslated blocks).
Type aliases are always defined at top-level scope, so they're not allowed to reference "self" or "parent" (and "static" is already disallowed by the parser, so we don't need to worry about it here).
